(window.webpackJsonp=window.webpackJsonp||[]).push([[14],Array(108).concat([function(e,t,i){"use strict";var n=i(98),a=i(125),o=i(237),s=i(252),r=o.Provider;a.getLogger("createJsxRenderer"),e.exports=function(e,t){var a=i(380),o=i(141),l=i(25);return{name:e,render:function(e,i,c){var u,d=a.renderToStaticMarkup((u=t(e||{}),n.createElement(r,{value:s.getValue()},u))),h=l(d);return i&&o.insertNodes(h,i,c),h}}}},,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(232),s={children:a.node.isRequired,hpadded:a.bool,vpadded:a.bool,align:a.oneOf(["top","center","bottom","stretch"])},r=function(e){var t=e.children,i=e.hpadded,a=e.vpadded,s=e.align;return n.createElement(o,{align:s,hpadded:i,vpadded:a},t)};r.propTypes=s,r.defaultProps={align:"top"},e.exports=r},,,,function(e,t,i){"use strict";var n=i(3)(i(144)),a=i(98),o={primary:"button--primary",secondary:"button--secondary",destructive:"button--destructive","border-only":"button--stroke",stroke:"button--stroke","red-carrot":"button--red-carrot",green:"button--green",transparent:"button--transparent","billing-green":"button--billing-green",facebook:"button--facebook",vkontakte:"button--vkontakte",odnoklassniki:"button--odnoklassniki",google:"button--google",instagram:"button--instagram",linkedin:"button--linkedin",twitter:"button--twitter",phone:"button--phone","add-photo":"button--add-photo","attention-boost":"button--attention-boost","bundle-sale":"button--bundle-sale","chat-with-tired":"button--chat-with-tired","chat-with-newbies":"button--chat-with-newbies","chat-quota":"button--chat-quota",criteria:"button--criteria",crush:"button--crush","extra-shows":"button--extra-shows",favourites:"button--favourites","invisible-mode":"button--invisible-mode","liked-you":"button--liked-you",riseup:"button--riseup","special-delivery":"button--special-delivery",spotlight:"button--spotlight",spp:"button--spp",undo:"button--undo",verification:"button--verification","never-loose-account":"button--never-loose-account",inherited:"button--inherited","primary-inverted":"button--primary-inverted","signup-inherited":"button--signup button--inherited",signup:"button--signup",default:"button--primary"},s={lg:"button--lg"},r=function(e){return[e.narrow&&"button--narrow",e.stroke&&"button--stroke"].filter(Boolean).join(" ")},l=function(e){return a.createElement("div",{className:"button__content"},e.icon&&a.createElement("span",{className:"button__icon"},e.icon),e.text&&a.createElement("span",{className:"button__text js-button-text",dangerouslySetInnerHTML:{__html:e.text}},e.subText&&a.createElement("span",{className:"button__subtext",dangerouslySetInnerHTML:{__html:e.subText}})))};e.exports=function(e){var t=o[e.type]||"default",i=s[e.size]||"",c=e.attrs||{};return e.href?a.createElement("a",(0,n.default)({className:"button ".concat(t," ").concat(i," ").concat(r(e)," ").concat(e.extraClass," js-touchable qa-button")},c,{href:e.href}),a.createElement(l,{icon:e.icon,text:e.text,subText:e.subText})):a.createElement("button",(0,n.default)({className:"button ".concat(t," ").concat(i," ").concat(r(e)," ").concat(e.extraClass," js-touchable qa-button")},c),a.createElement(l,{icon:e.icon,text:e.text,subText:e.subText}))}},,,function(e,t,i){"use strict";var n=i(3),a=n(i(144)),o=n(i(127)),s=i(98),r=i(156),l=i(106),c=["menu","back","close"];e.exports=function(e){var t=(0,o.default)({},e||{}),i={};t.scrollToggleClass&&(i["data-toggle-class"]=t.scrollToggleClass),t.scrollToggle&&(i["data-scroll-top"]=t.scrollToggle);var n=t.actions;return c.forEach(function(e){t[e]&&((n=n||{})[e]=!0)}),t.actions=n,s.createElement(s.Fragment,null,s.createElement("div",(0,a.default)({className:"navigation-bar ".concat(t.extraClass?t.extraClass:""," ").concat(t.hasWideSides?" has-wide-sides":""," ").concat(t.hasShadow?" navigation-bar--shadow":""," ").concat(t.scrollToggle?" js-scroll-toggle ":"")},i,{"data-role":"navigation-bar","data-qa":"navbar"}),s.createElement(s.Fragment,null,s.createElement("div",{className:"navigation-bar__primary"},t.primary?t.primary:s.createElement(s.Fragment,null,t.actions.menu?s.createElement("div",{className:"navigation-bar__icon js-navigation","data-action":r.MENU,"data-qa":"navbar-menu"},s.createElement(l,{name:"navigation-bar-menu"}),t.showBadge?s.createElement("span",{className:"navigation-bar__menu-notification"}):null):null,t.actions.back?s.createElement("div",{className:"navigation-bar__icon js-navigation js-navigation-back","data-action":r.BACK,"data-qa":"navbar-back"},s.createElement(l,{name:"navigation-bar-back",supportsRtl:!0})):null,t.actions.close?s.createElement("div",{className:"navigation-bar__icon js-navigation js-navigation-close","data-action":r.CLOSE,"data-qa":"navbar-close"},s.createElement(l,{name:"navigation-bar-close"})):null)),t.title?s.createElement("div",{className:"navigation-bar__title","data-qa":"navbar-title"},s.createElement("span",{className:"js-navigation-title",dangerouslySetInnerHTML:{__html:t.title}})):t.profile?t.profile:s.createElement("div",{className:"navigation-bar__main","data-qa":"navbar-main"},t.logo?s.createElement(s.Fragment,null,s.createElement("div",{className:"navigation-bar__logo","data-qa":"navbar-logo"},s.createElement("svg",null,s.createElement("use",{xlinkHref:"#logo-".concat(t.partner_id)}))),t.logoAlt?s.createElement("div",{className:"navigation-bar__logo-alt"},s.createElement("svg",null,s.createElement("use",{xlinkHref:"#logo-".concat(t.logoAlt,"-").concat(t.partner_id)}))):null):null,t.content?s.createElement("div",{className:"navigation-bar__main-content js-navigation-main-content"},t.content):null),s.createElement("div",{className:"navigation-bar__secondary"},t.secondary?t.secondary:s.createElement(s.Fragment,null,t.actions&&t.actions.location?s.createElement("div",{className:"navigation-bar__icon js-navigation","data-action":r.LOCATION,"data-qa":"navbar-location"},s.createElement(l,{name:"navigation-bar-filter"})):null,t.actions&&t.actions.link?s.createElement("button",{className:"navigation-bar__button-text ".concat(t.actions.link.disabled?" is-disabled":""," js-navigation"),"data-action":t.actions.link.action,"data-qa":"navbar-link",key:"navbar-button-".concat(t.actions.link.action)},t.actions.link.text):null)))),t.noFake?null:s.createElement("div",{className:"fake"}))}},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(232),s={children:a.node.isRequired,hpadded:a.bool,vpadded:a.bool},r=function(e){var t=e.children,i=e.hpadded,a=e.vpadded;return n.createElement(o,{align:"top",hpadded:i,vpadded:a},t)};r.propTypes=s,e.exports=r},,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(3)(i(127));e.exports=function(e,t,i){return void 0===i&&(i=t,t={}),e?void 0!==e.length?e.map(function(e,a){return i((0,n.default)({},t,e,{ndx:a}))}):i((0,n.default)({},t,e)):null}},,,,,,,,,,,function(e,t,i){"use strict";var n=i(121),a=i(556),o=n.BUTTONS,s=a.extend({overlay:!0,createElement:function(){var e=s._super.createElement.call(this);return e.addClass("overlay-page"),e},getNavigationActions:function(){return{close:!0}},onNavigationAction:function(e){e===o.CLOSE&&this.goBack()}},"PromotionPageOverlay");e.exports=s},,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(232),s={children:a.node.isRequired,hpadded:a.bool,vpadded:a.bool},r=function(e){var t=e.children,i=e.hpadded,a=e.vpadded;return n.createElement(o,{align:"bottom",hpadded:i,vpadded:a},t)};r.propTypes=s,e.exports=r},,,function(e,t,i){"use strict";var n,a,o=i(3),s=o(i(127)),r=o(i(4)),l=o(i(107)),c=i(100),u=i(126),d=i(254),h=i(213),p=i(187),m=i(102),g=i(146),_=i(244),f=i(547),v=i(99),E=i(113),b=i(103),y=i(179),k=i(243),S=i(124),w=i(157),C=i(128),T=i(140),P=i(161),N=i(159),I=i(326),x=i(405),A=i(197),O=i(2977),V=i(136),R=i(155),B=i(177),L=i(105),F=L.VoteResultType,M=L.ServerErrorMessage,D=i(101),U=D.VoteProfileEvent,j=D.SendMessageEvent,G=(n={},(0,l.default)(n,1,1),(0,l.default)(n,2,2),(0,l.default)(n,3,3),(0,l.default)(n,F.MAYBE,4),(0,l.default)(n,5,5),n),q=(a={},(0,l.default)(a,2,9),(0,l.default)(a,138,9),(0,l.default)(a,22,9),a),H=N.extend({transition:!1,headerTemplate:null,screenName:14,createElement:function(){return V({qaAttribute:"profile"})},showFavourite:!0,allowNavigationArrows:!0,voteOptionOverrides:null,init:function(){var e=this;H._super.init.apply(this,arguments),this.actionHandler_=this.registerController("ACTION_HANDLER",new x).on(x.EVENTS.QUOTA_PROCESSING,this.onPaymentProcessing_,this).on(x.EVENTS.QUOTA_PROCESSED,this.onPaymentProcessed_,this),this.profileController_=this.registerController("PROFILE",new I({isOwnProfile:this.isOwnProfile,parent:this.parent,reload:function(){return e.getProfile_({reload:!0})},reportUserContext:q[this.clientSource]})).on(I.EVENTS.CLOSE,this.onCloseProfile_,this).on(I.EVENTS.CHAT,this.navigateToChat_,this).on(I.EVENTS.SMILE,this.sendSmile_,this).on(I.EVENTS.VOTE,this.onVoteProfile_,this).on(I.EVENTS.CRUSH,this.onCrushProfile_,this).on(I.EVENTS.GALLERY_CLICK,this.onGalleryClick_,this).on(I.EVENTS.BLOCKED,this.onBlockProfile_,this).on(I.EVENTS.ADJACENT_PROFILE_CLICK,this.onAdjacentProfileClick,this),this.userModel_=C.getInstance(),C.getInstance().on(C.EVENTS.INVALIDATED,this.onUserInvalidated_,this),w.on(w.EVENTS.MESSAGE_FROM_ME,this.onMessageFromMe_,this),this.jinba=new p("ProfileView")},open:function(){H._super.open.apply(this,arguments),this.buyingCrush_=!1,this.clear(),this.profileController_.showLoading(),this.onLoad_=this.getParameter("onLoad"),this.importPromise=this.getParameter("importPromise"),this.hasDifferentProfile_()&&window.scrollTo(0,0),this.processParameters(),this.profileController_.hideFullScreenLoading()},processParameters:function(e){var t=this.getParameter("id"),i=this.getParameter("token");if(!t&&!i)throw b.back(),new Error("Trying to navigate to profile without user id or token");this.navigatingToUser_=null,this.getProfile_({reactiveUpdate:e&&e.reactiveUpdate}),this.onLoad_=this.getParameter("onLoad")},clear:function(){this.hasDifferentProfile_()&&(this.profileController_.clear(),window.scrollTo(0,0))},getProfile_:function(e){var t=this;return e&&e.reactiveUpdate||this.profileController_.showLoading(),this.getProfilePromise_(e).then(function(e){var i=(0,r.default)(e,3),n=i[0],a=i[1],o=i[2];if(t.isStarted()){o=Object.assign({},o,{folderUserId:t.getParameter("folderUserId")});var s=t.getProfileDataContext_({user:n,adjacentProfiles:o,sessionUser:a,voteOptionOverrides:t.voteOptionOverrides});t.updateUser_(s),t.element.attr({"data-qa-user-id":n.getUserId(),"data-qa-user-gender":n.getGender()});var l=document.getElementById("badoo-meta");return l&&(l.content="profile"),n}}).catch(function(e){t.handleGetProfileError_(e)})},handleGetProfileError_:function(e){var t=this;if(this.profileController_.hideLoading(),this.isStarted()){if(!(e instanceof M&&20===e.getType())){var i=A.handleError({error:e,screenName:this.getScreenName(),navigationBar:{logo:!0,actions:{close:!0}}});if(i)return i.on(i.EVENTS.REFRESH,function(){return t.getProfile_()}),Promise.resolve();throw e}O()}},getProfilePromise_:function(e){var t=c.get(e,"reload")?"fetch":"get",i=[this.userModel_.trackNext()[t]({id:this.getParameter("id"),token:this.getParameter("token"),clientSource:this.clientSource,userFieldFilter:this.getUserFilter_(),folderType:this.folderType,sectionId:this.getParameter("sectionId"),inAppData:this.getParameter("inAppData")})];return E.isLoggedIn()?i.push(this.userModel_.trackNext()[t]({id:E.getUserId(),token:this.getParameter("token"),clientSource:this.clientSource,userFieldFilter:this.getUserFilter_(),folderType:this.folderType,sectionId:this.getParameter("sectionId"),inAppData:this.getParameter("inAppData")})):i.push(Promise.resolve()),(this.adjacentProfiles||this.folderType&&this.allowNavigationArrows)&&i.push(this.getAdjacentProfiles()),Promise.all(i)},getAdjacentProfiles:function(){this.folderModel_||(this.folderModel_=new T({folderId:this.folderType}));var e=this.getParameter("sectionId"),t=this.getParameter("id");return this.folderModel_.getAdjacentProfiles(t,e)},onAdjacentProfileClick:function(e){30!==e.getAccessLevel()?this.navigatingToUser_!==e&&(this.navigatingToUser_=e,b.navigate(g.extractRouteName(b.getUrl()),!0,this.getNavigationParams_(e))):b.back()},getNavigationParams_:function(e){return{id:e.getUserId(),sectionId:this.getParameter("sectionId")}},getUserFilter_:function(){var e=this.getParameter("id");return E.isLoggedIn()?e===E.getUserId()?d.getOwnProfileFilter():d.getProfileFilter(e,this.folderType):d.getUnauthenticatedProfileFilter(e)},getProfileDataContext_:function(e){var t=e.user,i=e.adjacentProfiles,n=e.sessionUser,a=e.voteOptionOverrides;return{protoUser:t,isCached:t.fromCache,sessionUser:n,showFavourite:this.showFavourite,clientSource:this.clientSource,activationPlace:this.getParameter("activationPlace")||this.activationPlace,sectionId:this.getParameter("sectionId"),adjacentProfiles:i,voteOptionOverrides:a,importPromise:this.getImportPromise(),defaultPhotoId:this.getParameter("defaultPhotoId")}},getImportPromise:function(){var e=this.importPromise;return this.importPromise=void 0,e},updateUser_:function(e){var t=this;this.profileController_.hideLoading();var i=E.isLoggedIn(),n=new k(e);return!i&&n.age<u.get("user.age.min")?(this.log.warn("Profile is either deleted or underage - get out of here"),void b.navigate(u.get("default.page"))):(2===n.vote.theirVote&&2===n.vote.yourVote&&(n.vote.allowChat=!0),this.lastUserIdOrToken_=n.id||n.token,this.profileData_=n,this.profileController_.updateParameters(n),this.profileController_.profileOpened(),this.reportVisit_(n.isCached),this.jinba.waitForImage(n.largeProfilePhoto).stop().then(function(){t.readyForVrt(),_(t,"Profile interactive")}),this.onLoad_&&this.onLoad_(this.lastUserIdOrToken_),void 0)},reportVisit_:function(e){var t=this;this.userModel_.sendVisiting({fromCache:e,folder:this.folderType,id:this.profileData_.id,section:this.getParameter("sectionId"),source:this.clientSource}),this.clearAllSendLogViewStatsTimers_(),this.getParameter("id")&&P.get().then(function(e){return(0,r.default)(e,1)[0].getReportLongProfileViewMilliseconds()}).then(function(e){t.clearAllSendLogViewStatsTimers_(),t.sendLongViewStatsTimers_=c.map(e,function(e){return setTimeout(h.sendProfileLongViewStats(t.getParameter("id"),e),e)})})},clearAllSendLogViewStatsTimers_:function(){c.each(this.sendLongViewStatsTimers_,function(e){return clearTimeout(e)}),this.sendLongViewStatsTimers_=null},onVoteProfile_:function(e){var t=this,i=e.voteResult,n=e.photo,a=e.isCrush,o=this.profileData_,r=2===i&&2===o.user.getTheirVote(),l=R.clone(o.user).setAllowCrush(!1).setMyVote(i).setIsMatch(r).setAllowChat(o.user.getAllowChat()||r),c=new k((0,s.default)({},this.getProfileDataContext_({user:l,adjacentProfiles:o.adjacentProfiles,voteOptionOverrides:(0,s.default)({},this.voteOptionOverrides,{allowCrush:!1,yourVote:i})}),{animateButtonsAfterVote:!0,animateStatusIconsAfterVote:!0}));this.profileController_.updateParameters(c),this.actionHandler_.vote({profileData:o,voteResult:i,photo:n}).then(function(e){return t.onAfterVote_(e)}).catch(function(e){if(!(e instanceof k))throw e;t.profileController_.updateParameters(e)});var u=a?6:G[i];this.trackVote_(u,this.profileData_.id)},onAfterVote_:function(e){var t=e.yourVote,i=e.allowChat,n=e.isMatch;if(3===t)return f.votedNo(this.profileData_.user.getUserId()),void this.onVoteNo_();var a=Object.assign({},this.voteOptionOverrides,{allowChat:i,allowCrush:!1,yourVote:t}),o=this.profileData_.user.setAllowCrush(!1).setMyVote(t).setIsMatch(n);c.isBoolean(i)&&o.setAllowChat(i),C.getInstance().updateCache(o.getUserId(),o);var s=this.getProfileDataContext_({user:o,adjacentProfiles:this.profileData_.adjacentProfiles,voteOptionOverrides:a});s.animateButtonsAfterVote=!0,s.animateStatusIconsAfterVote=!0,this.updateUser_(s),f.votedYes(this.profileData_.user.getUserId()),this.hasVoted_=!0},onVoteNo_:function(){var e=this,t={uid:this.profileData_.user.getUserId(),folder:6};T.getInstance().removeUserFromFolder(t).then(function(){y.trigger(y.VOTED_NO,e.profileData_.user.getUserId()),b.navigate("connections/fans")})},onCrushProfile_:function(e){var t=this,i=e.profileData,n=e.photo,a=e.seenExplanationScreen;this.buyingCrush_||(this.buyingCrush_=!0,this.actionHandler_.crushVote({profileData:i,photo:n,seenExplanationScreen:a}).then(function(e){t.buyingCrush_=!1,t.profileController_.hideCrushUpsellSlide(),2===e.vote&&t.onVoteProfile_({isCrush:!0,voteResult:2,photo:n})},function(){t.buyingCrush_=!1}))},onBlockProfile_:function(){this.folderType&&this.allowNavigationArrows?this.profileController_.viewNextProfile_():b.back()},onCloseProfile_:function(){b.back()},onPaymentProcessing_:function(){this.profileController_.showLoading()},onPaymentProcessed_:function(){this.profileController_.hideLoading()},onUserInvalidated_:function(e){var t=e.all,i=e.keys;this.isStarted()&&this.profileData_&&(t||i.includes(this.profileData_.id))&&this.processParameters({reactiveUpdate:!0})},onStop:function(){H._super.onStop.apply(this,arguments),this.clearAllSendLogViewStatsTimers_()},onGalleryClick_:function(){var e=E.getUser();1===(e&&e.getGender())&&this.profileController_.showFullscreenGallery()},trackVote_:function(e,t){m.track(U,{vote_result:e,activation_place:this.activationPlace,encrypted_user_id:t,gesture:3})},hasDifferentProfile_:function(){var e=this.getParameter("id")||this.getParameter("token");return this.lastUserIdOrToken_!==e},navigateToChat_:function(){!Number(this.profileData_.id)&&this.profileData_.id.length<20&&this.log.error("WRONG USER ID: ".concat(this.profileData_.id," in navigateToChat_")),b.navigate("messages",{id:this.profileData_.id,folderId:this.folderType,clientSource:this.clientSource,toClientSource:this.clientSource})},sendSmile_:function(){var e=this;if(this.profileData_.user.getIsChatBlocked())this.navigateToChat_();else{var t=this.profileData_.user.getUserId(),i=new B({context:this.clientSource,messageType:22,toPersonId:t},this.profileData_.user);w.send(t,i).then(function(){var i;i=t,m.track(j,{activation_place:10,encrypted_user_id:i,message_first:!0,send_smile:!0,length:0}),S.showNotification({type:S.TYPES.INFO,text:v.get(638)}),e.userModel_.updateCache(t,"allow_smile",!1),e.profileData_.user.setAllowSmile(!1),e.profileController_.updateParameters(e.profileData_)},function(t){e.onMessageSendFail_(t)})}},onMessageFromMe_:function(e){if(this.profileData_&&this.profileData_.user){var t=this.profileData_.user.getUserId();t===e.toPersonId&&(this.userModel_.updateCache(t,"quick_chat",void 0),this.profileData_.user.delQuickChat(),this.profileController_.updateParameters(this.profileData_))}},getScreenName:function(){return null===this.getParameter("depth")?this.screenName:23}},"PersonProfilePage");e.exports=H},,,,,,,,,,,function(e,t,i){"use strict";function n(e,t,i,n,a){return n=n||g.noop,new Promise(function(o,r){if(t&&t.promoBlock instanceof x&&function(e){return e&&2===e.getOkAction()}(t.promoBlock))return r(new Error("Photos are required to continue with this action")),s({feature:e,back:i.from}).then(function(){n&&n(2)});if(k.isCostRequired()&&!a||-1===Object.keys(R).indexOf(e.toString())){var l=t.cost,c=t.promoBlock,u=t.productType,d=t.promoBlockType;u=u||c&&c.getOkPaymentProductType(),d=d||c&&c.getPromoBlockType(),y.purchase({back:i.from,cost:l,hotPanelData:t.hotPanelData,popState:t.popState,productType:u,promoBlockType:d,userId:t.userId,success:function(e){return o(e)},error:function(e){return r(e)},complete:function(){return D.trigger(V.END_PAYMENT,i)}})}else{var h=R[e],p={promoBlock:t.promoBlock.toJSON(),reject:r,resolve:o,userId:t.userId};T(function(){return n(60)}),f.navigate(h,t.popState,p)}})}function a(e){return 1!==e&&13!==e}function o(e,t,i,a,o,s){var r=a.getPromo(),l=r.getOkPaymentProductType(),c=D.getFeatureFromPaymentProductType(l),u=r.getPaymentAmount();return!r.getScreenHeader()&&a.getScreenHeader()&&r.setScreenHeader(a.getScreenHeader()),Object.assign(i,{cost:u,hotPanelData:e,promoBlock:r}),n(c,i,t,o,s)}function s(e){return new Promise(function(t){f.navigate("add-photos",!1,(0,p.default)({},e,{callback:t})),C.once(C.EVENTS.PHOTO_UPLOADED,t)})}function r(e,t){var i=t.productType,n=t.onAction;e&&e.success&&1===i&&n(6)}var l,c,u,d,h=i(3),p=h(i(127)),m=h(i(107)),g=i(100),_=i(139),f=i(103),v=i(146),E=i(169),b=i(125),y=i(228),k=i(325),S=i(165),w=i(276),C=i(329),T=i(142).waitForPageTransitionFinish,P=i(111),N=i(149),I=i(105),x=I.PromoBlock,A=I.CallToAction,O=b.getLogger("BannersHelper"),V=P("START_PAYMENT","END_PAYMENT"),R=(l={},(0,m.default)(l,35,"spotlight-explanation"),(0,m.default)(l,127,"attention-boost-explanation"),(0,m.default)(l,32,"extra-shows-explanation"),(0,m.default)(l,28,"riseup-explanation"),(0,m.default)(l,175,"bundle-sale-explanation"),(0,m.default)(l,226,"crush-explanation"),l),B=(c={},(0,m.default)(c,12,"add-photo"),(0,m.default)(c,56,"attention-boost"),(0,m.default)(c,57,"bundle-sale"),(0,m.default)(c,4,"chat-with-newbies"),(0,m.default)(c,5,"chat-with-tired"),(0,m.default)(c,96,"crush"),(0,m.default)(c,11,"extra-shows"),(0,m.default)(c,10,"extra-shows"),(0,m.default)(c,6,"favourites"),(0,m.default)(c,35,"undo"),(0,m.default)(c,7,"liked-you"),(0,m.default)(c,38,"liked-you"),(0,m.default)(c,1,"riseup"),(0,m.default)(c,16,"special-delivery"),(0,m.default)(c,3,"special-delivery"),(0,m.default)(c,9,"spotlight"),(0,m.default)(c,65,"spp-delayed"),(0,m.default)(c,8,"premium"),(0,m.default)(c,22,"stickers"),(0,m.default)(c,40,"special-delivery"),(0,m.default)(c,40,"special-delivery"),(0,m.default)(c,43,"undo"),(0,m.default)(c,37,"invisible-mode"),(0,m.default)(c,10017,"video-chat-explanation"),(0,m.default)(c,165,"messenger-mini-game"),(0,m.default)(c,42,"invite-friends"),(0,m.default)(c,68,"get-verified"),(0,m.default)(c,199,"quality-walkthrough"),(0,m.default)(c,200,"share-own-profile"),(0,m.default)(c,61,"encounters"),(0,m.default)(c,304,"live"),(0,m.default)(c,326,"liked-you"),c),L=(u={},(0,m.default)(u,1,8),(0,m.default)(u,2,9),(0,m.default)(u,3,59),(0,m.default)(u,4,48),(0,m.default)(u,5,24),(0,m.default)(u,6,10),(0,m.default)(u,7,1),(0,m.default)(u,12,58),(0,m.default)(u,14,64),(0,m.default)(u,16,27),(0,m.default)(u,18,58),(0,m.default)(u,20,7),(0,m.default)(u,21,56),(0,m.default)(u,22,57),(0,m.default)(u,23,65),(0,m.default)(u,25,96),(0,m.default)(u,27,9),(0,m.default)(u,28,9),u),F=(d={},(0,m.default)(d,21,127),(0,m.default)(d,22,175),(0,m.default)(d,25,226),(0,m.default)(d,6,32),(0,m.default)(d,7,28),(0,m.default)(d,2,35),(0,m.default)(d,1,19),(0,m.default)(d,23,19),(0,m.default)(d,13,38),d),M=(0,m.default)({},96,76),D=g.extend({},_,{EVENTS:V,getFeatureName:function(e){var t=B[e];return void 0===t&&O.error("invalid PROMO_BLOCK_TO_FEATURE_NAME_MAPPING ".concat(e)),t},getButtonName:function(e){return M[e]},getFeatureFromPaymentProductType:function(e){var t=F[e];return t||O.error("invalid PRODUCT_TYPE_TO_FEATURE_MAPPING ".concat(e)),t},isFeatureConfigurable:function(e){return e&&19!==e},unifyPromoType:function(e){switch(e){case 3:case 16:case 40:return 40;case 43:case 35:return 43;default:return e}},getBadgeTypeForPromoBlock:function(e){var t=E.getBadgeTypeFromPromoBlock(e);return"N/A"===t?null:t},getPromoBlockForProduct:function(e){var t=L[e];return t||O.error("invalid PRODUCT_TO_PROMO_BLOCK ".concat(e)),t},getPictureForPromoBlock:function(e,t){var i,n=function(e,t){t=t||0;var i=e.getPictures(),n=i&&e.getPictures()[t];return i&&(t<0||t>=i.length)?null:n?n.getDisplayImages():e.getImageId()&&e.getImageId()[t]}(e,t.index);return n?{disableMasking:(i=e.getPromoBlockType(),[65,41,57].includes(i)),type:E.IMAGE_TYPE.URL,value:n}:E.getPlaceholderForGender(t.gender)},buyCrush:function(e,t,i,n){var a={from:f.getUrl()},s={userId:e,productType:25};return w.getInstance().fetchProductExplanation(25,e).then(function(e){if(i){var r=e.getPromo().getPictures([])[0];if(r){var l=r.getDisplayImages(),c=i.getPreviewUrl(l);r.setDisplayImages(c)}}return o(t,a,s,e,g.noop,n)})},handlePromoSelected:function(e,t,i){var l,c=e.productType;c&&(l=D.getFeatureFromPaymentProductType(c));var u=e.action,d=e.activationPlace,h=e.cost,p=!!e.paymentTransitionInFlow,m=e.popState,_=D.unifyPromoType(e.banner),E=D.isFeatureConfigurable(l),b=e.crossSellTransaction;(t=t||{}).from||O.warn('No "from" parameter given to BannersController. What should we do once payment is completed?');var k=(i=i||{}).onAction||g.noop;41===_&&(c=13,l=38);var C={activationPlace:d,cost:h,promoBlockType:_},P=g.extend(C,e.hotPanelData||{});switch(N.generate(),u){case 60:!function(e){var t=e.context,i=e.cost,n=e.crossSellTransaction,a=e.hotPanelData,o=e.paymentTransitionInFlow,s=e.popState,r=e.productType,l=e.onAction;if(!(n&&n.getPurchaseParams()&&n.getPurchaseParams().getCrossSellOrderId()))return void O.error("Trying to perform cross/pack without required transaction id");var c=new Promise(function(e){return T(e)}),u=new Promise(function(e){y.purchase({back:t.from,cost:i,hotPanelData:a,paymentTransitionInFlow:o,popState:s,productType:r,purchaseTransactionSetup:{crossSellOrderId:n.getPurchaseParams().getCrossSellOrderId(),uid:n&&n.getUid(),providerId:n&&n.getProviderId()},complete:function(i){D.trigger(V.END_PAYMENT,t),e(i)}})});Promise.race([c,u]).then(function(){l(60)})}({context:t,cost:h,crossSellTransaction:b,hotPanelData:P,paymentTransitionInFlow:p,popState:m,productType:c,onAction:k});break;case 9:!function(e){var t=e.context,i=e.cost,n=e.hotPanelData,o=e.paymentTransitionInFlow,s=e.popState,l=e.productType,c=e.promoBlockType,u=e.onAction,d=null,h=new Promise(function(e){return T(e)});D.trigger(V.START_PAYMENT,t),d=a(l)?new Promise(function(e){y.purchase({back:t.from,cost:i,hotPanelData:n,paymentTransitionInFlow:o,popState:s,productType:l,promoBlockType:c,complete:function(i){D.trigger(V.END_PAYMENT,t),e(i)}})}):new Promise(function(e){var a={back:t.from,cost:i,productType:l,hotPanelData:n,promoBlockType:c,callback:function(t){r({productType:l,onAction:u})(t),e(t)}},d={paymentTransitionInFlow:o,replace:s};S.navigateToPayment(a,d)}),Promise.race([h,d]).then(function(){u(60)})}({context:t,cost:h,hotPanelData:P,paymentTransitionInFlow:p,popState:m,productType:c,promoBlockType:_,onAction:k});break;case 4:!function(e){var t=e.context,i=e.cost,s=e.featureType,l=e.hotPanelData,c=e.isFeatureConfigurable,u=e.paymentTransitionInFlow,d=e.popState,h=e.productType,p=e.promoBlockType,m=e.promoData,g=e.onAction;if(D.trigger(V.START_PAYMENT,t),a(h))c?w.getInstance().fetchProductExplanation(h).then(function(e){return o(l,t,m,e,g)}).then(function(){g(60),1===h&&g(6)}).catch(function(e){if(g(60),e instanceof Error)throw e}):n(s,{cost:i,hotPanelData:l,popState:d,productType:h,promoBlockType:p},t,g).then(function(){g(60),1===h&&g(6)}).catch(function(){g(60)});else{var _,f=new Promise(function(e){T(e)}),v=new Promise(function(e){_=e}),E={back:t.from,cost:i,hotPanelData:l,paymentTransitionInFlow:u,productType:h,promoBlockType:p,callback:function(e){r(e,{productType:h,onAction:g}),_()}},b={};d&&(b.replace=d),S.navigateToPayment(E,b),Promise.race([f,v]).then(function(){g(60)})}}({context:t,cost:h,featureType:l,hotPanelData:P,isFeatureConfigurable:E,paymentTransitionInFlow:p,popState:m,productType:c,promoBlockType:_,promoData:e,onAction:k});break;case 2:T(function(){return k(60)}),s(e).then(function(){k(2)});break;case 63:T(function(){return k(60)}),function(e,t){var i=v.getRouteFromRedirectPage(e);f.navigate(i,!!t.popState,t)}(e.redirectPage,e);break;case 13:T(function(){return k(60)}),f.navigate("own-profile-edit/verification");break;case 12:T(function(){return k(60)}),f.navigate("invitations",e.navigateOpts);break;case 52:T(function(){return k(60)}),f.navigate("share-profile",e.navigateOpts);break;case 6:!function(e){var t=e.context,i=e.productType,n=e.paymentTransitionInFlow,a=e.hotPanelData,o=e.promoBlockType,s=e.onAction,l=e.popState;D.trigger(V.START_PAYMENT,t);var c,u=new Promise(function(e){T(e)}),d=new Promise(function(e){c=e}),h={back:t.from,productType:i,paymentTransitionInFlow:n,hotPanelData:a,promoBlockType:o,callback:function(e){r(e,{productType:i,onAction:s}),c()}},p={};l&&(p.replace=l),S.navigateToPayment(h,p),Promise.race([u,d]).then(function(){s(60)})}({context:t,hotPanelData:P,paymentTransitionInFlow:p,popState:m,productType:c,promoBlockType:_,onAction:k});break;case 100:D.trigger(V.START_PAYMENT,t),f.navigate("spp-trial",!1,{returnTo:t.from,context:t.context,activationPlace:d,fromBanner:!0});break;default:O.error("Unknown action type:",u)}},getActionTypeFromPromoBlock:function(e,t){t=t||{};var i=e.getOkAction();if(!i){var n,a=e.getButtons([]);a.length>0&&(n=t.ctaType?a.find(function(e){return e.getType()===t.ctaType}):a[0])instanceof A&&(i=n.getAction())}return i||t.defaultActionType},getRedirectPageFromPromoBlock:function(e,t){t=t||{};var i=e.getRedirectPage();if(!i){var n,a=e.getButtons([]);a.length>0&&(n=t.ctaType?a.find(function(e){return e.getType()===t.ctaType}):a.find(function(e){return e.hasRedirectPage()}))instanceof A&&(i=n.getRedirectPage())}return i}});e.exports=D},,,,,,,function(e,t,i){"use strict";var n=i(129),a=i(100),o=i(132),s=i(102),r=i(2855),l=i(148),c=i(105).User,u=i(101).ViewElementEvent,d={REFRESH:"refresh",DISABLED:"disabled"},h=n.extend({data_:null,hotPanelData_:null,source_:null,type_:null,serverFeature_:null,clientFeature_:null,isEnabled_:!1,construct:function(){l(this),h._super.construct.call(this)},setup_:function(){this.extractParams_(this.getParameters())&&(null!==this.serverFeature_?(this.onServerFeature_(o.getSync(this.serverFeature_)),this.startEvents_()):this.checkClientFeature_()&&this.populateView_())},startEvents_:function(){this.hasEvents_&&this.stopEvents_(),o.on(o.EVENTS.UPDATE,this.onFeatureUpdate_,this),this.hasEvents_=!0},stopEvents_:function(){this.hasEvents_&&(o.off(o.EVENTS.UPDATE,this.onFeatureUpdate_,this),this.hasEvents_=!1)},onFeatureUpdate_:function(e){e.getFeature()===this.serverFeature_&&this.onServerFeature_(e)},onParametersUpdate:function(){this.setup_()},extractParams_:function(e){return!!a.isObject(e)&&(this.type_=e.type,this.source_=e.source,this.socialParams_=e.socialParams,this.verifyData_(e)?(this.data_=e,this.hotPanelData_=e.hotPanelData,!0):(this.disable_(),!1))},verifyData_:function(e){return e.user instanceof c},onServerFeature_:function(e){this.featureObject_=e,e.getEnabled()||0!==e.getRequiredAction()?this.checkClientFeature_()&&this.populateView_():this.disable_()},checkClientFeature_:function(){return!(this.clientFeature_&&!o[this.clientFeature_]&&(this.disable_(),1))},populateView_:function(){var e=this.extractData_(this.data_,this.hotPanelData_,this.socialParams_);if(null===e||!this.parent)return this.disable_(),!1;this.hasFocussed_=!1;var t=this.sectionView_;t||((t=this.sectionView_=this.registerView(new r({el:this.parent.get(0)}))).on(r.EVENTS.REFRESH,this.trigger.bind(this,d.REFRESH)),t.on(r.EVENTS.FOCUS,this.onFocus_,this)),this.sectionView_.update(e),this.parent.addClass("vrt-".concat(this.getName())).attr("data-qa",this.getName()),this.parent&&this.showContent_(),this.isEnabled_=!0,this.trigger(d.REFRESH)},extractData_:function(){return null},showContent_:function(){this.showOrHideContent_(!0)},hideContent_:function(){this.showOrHideContent_(!1)},showOrHideContent_:function(e){var t=e?"removeClass":"addClass",i=this.parent,n=this.sectionView_;i&&i[t]("hidden"),n&&n.getElement()[t]("hidden")},disable_:function(){this.hideContent_(),this.isEnabled_=!1,this.trigger(d.DISABLED)},clear:function(){this.hideContent_()},userAction_:function(){},getName:function(){return""},onOpened:function(){this.sectionView_&&this.sectionView_.checkFocus()},onFocus_:function(){if(!this.hasFocussed_){this.hasFocussed_=!0,this.focus();var e=this.getHotPanelElement();e&&s.track(u,{element:e})}},getHotPanelElement:function(){return null},focus:function(){},isEnabled:function(){return this.isEnabled_},isOwnProfile_:function(){return!0===this.getParameter("isOwnProfile")}},"AbstractProfileInfoSection");h.EVENTS=d,h.TYPE={},e.exports=h},function(e,t,i){"use strict";function n(){}var a=["action","cost","paymentTransitionInFlow","popState","productType","promoBlock","promoBlockType","purchaseTransactionSetup","inviteFlow","redirectPage","source","paymentFlowId","hotPanelData","albumType","feature","userId","back","clientSource","activationPlace","screenName","callback"];
a.forEach(function(e){var t=e.substring(0,1).toUpperCase()+e.substring(1);n.prototype["get".concat(t)]=function(){return this[e]},n.prototype["set".concat(t)]=function(t){if(this[e]=t,"hotPanelData"===e)for(var i in t)t.hasOwnProperty(i)&&a.includes(i)&&(this[i]=t[i]);return this},n.prototype["has".concat(t)]=function(){return e in this}}),e.exports=n},function(e,t,i){"use strict";function n(e){return C[e]}var a,o,s=i(3)(i(107)),r=i(100),l=i(139),c=i(103),u=i(146),d=i(236),h=i(132),p=i(228),m=i(165),g=i(125),_=i(389),f=i(276),v=i(105),E=v.PromoBlock,b=v.PurchaseTransactionFailed,y=g.getLogger("ServerActionHelper"),k=[4,9,6],S=(a={},(0,s.default)(a,10,"encounters"),(0,s.default)(a,11,"people-nearby"),(0,s.default)(a,17,"settings-filter"),a),w={handleAction:function(e){var t=e.getAction()||0,i=e.getProductType();if(t in S)return c.navigate(S[t]),Promise.resolve();switch(4!==t||n(i)||(t=9,1===i&&(t=6)),t){case 0:return Promise.resolve();case 2:case 69:return this.handlePhotoUpload(e);case 4:return this.handlePaymentRequired(e);case 6:return this.handleSuperPowers(e);case 9:return this.handleSpendCredits(e);case 12:case 21:return this.handleInviteFlow(e);case 16:return this.handleOpenPrivacySettings_(e);case 63:return this.handleRedirectPage(e);case 68:return this.handleRequestPrivatePhotos(e);case 50:return this.handleShowPromoVideo(e);default:return y.error("Action Type not handled by ServerActionHelper: ".concat(t)),Promise.reject(new Error("Action Type not handled by ServerActionHelper: ".concat(t)))}},handlePhotoUpload:function(e){var t=e.getAlbumType(),i=e.getCallback(),n=e.getBack(),a=e.getFeature();return c.navigate("add-photos",{feature:a,albumType:t,destination:n,callback:i}),Promise.resolve()},handlePaymentRequired:function(e){var t=this,i=e.getPopState(),a=e.getProductType(),o=e.getUserId();return a?new Promise(function(s,r){f.getInstance().fetchProductExplanation(a).then(function(e){return e&&e.getPromo()}).then(function(l){if(!l){var u="No PromoBlock in response of ClientProductExplanation";return y.error(u),void r(new Error(u))}if(l instanceof E&&2===l.getOkAction())return t.handlePhotoUpload(e);var d=n(a),h={promoBlock:l.toJSON(),reject:r,resolve:s,userId:o};c.navigate(d,i,h)}).catch(r)}):(y.error("No product type but want to handle PAYMENT_REQUIRED"),Promise.reject(new Error("No product type but want to handle PAYMENT_REQUIRED")))},handleSuperPowers:function(e){return new Promise(function(t,i){var n=e.getBack(),a=e.getHotPanelData(),o=e.getPaymentFlowId(),s=e.getPaymentTransitionInFlow(),r=e.getPopState(),l={back:n,paymentTransitionInFlow:s,productType:1,promoBlockType:e.getPromoBlockType(),paymentFlowId:o,hotPanelData:a,callback:function(e){var n=e.success,a=e.cancelled,o=e.purchaseReceipt;if(a)t(!1);else if(!n){var s=o instanceof b?o.getNotification().getMessage():"Unknown error purchasing SuperPowers";i(new Error("SPP Error: ".concat(s)))}}},c={replace:r};m.navigateToPayment(l,c),d.observe(h.getObservable(19),function(e){e.getEnabled()&&t(!0)},{leading:!1,once:!0})})},handleSpendCredits:function(e){var t=e.getBack(),i=e.getCost(),n=e.getHotPanelData(),a=e.getPopState(),o=e.getProductType(),s=e.getPromoBlockType(),r=e.getPurchaseTransactionSetup();return new Promise(function(e,l){var c={productType:o,back:t,cost:i,hotPanelData:n,popState:a,promoBlockType:s,purchaseTransactionSetup:r,complete:e,success:e,error:l};p.purchase(c)})},handleOpenPrivacySettings_:function(){return Promise.resolve(c.navigate("settings-privacy"))},handleInviteFlow:function(e){var t=e.getClientSource(),i=e.getActivationPlace(),n=e.getScreenName(),a=e.getInviteFlow()||void 0;return c.navigate("invitations",{inviteContext:t,triggerActivationPlace:i,triggerScreenName:n,inviteFlow:a}),Promise.resolve()},handleRedirectPage:function(e){var t=e.getPopState(),i=e.getRedirectPage(),n=u.getRouteFromRedirectPage(i);return c.navigate(n,!!t,function(e){var t={};return e.hasActivationPlace()&&(t.activationPlace=e.getActivationPlace()),t}(e)),Promise.resolve()},handleRequestPrivatePhotos:function(e){var t=e.getUserId();return _.getInstance().getAccess(t).then(function(){return _.getInstance().getAccessLevel(t)})},handleShowPromoVideo:function(e){var t=e.getPromoBlock()||{},i=t.getId&&t.getId()||"",n={timer:t.getTimer&&t.getTimer()||0,videoId:i};c.navigate("external-promo-video",!1,n)},isPaymentAction:function(e){return-1!==k.indexOf(e)}};r.extend(w,l),e.exports=w;var C=(o={},(0,s.default)(o,21,"attention-boost-explanation"),(0,s.default)(o,22,"bundle-sale-explanation"),(0,s.default)(o,25,"crush-explanation"),(0,s.default)(o,6,"extra-shows-explanation"),(0,s.default)(o,7,"riseup-explanation"),(0,s.default)(o,2,"spotlight-explanation"),o)},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106);e.exports=function(e){switch(e.src){case"male":return n.createElement("div",{className:"brick__icon"},n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}));case"female":return n.createElement("div",{className:"brick__icon"},n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}));case"unknown":return n.createElement("div",{className:"brick__icon"},n.createElement(o,{name:"avatar-placeholder-unknown",size:"stretch"}));case"deleted":return n.createElement("div",{className:"brick__icon"},n.createElement(o,{name:"avatar-placeholder-deleted",size:"stretch"}));case"invisible":return n.createElement("div",{className:"brick__icon"},n.createElement(o,{name:"avatar-placeholder-invisible",size:"stretch"}));case void 0:return null;default:return e.preload?n.createElement("div",{className:"brick__image js-preload","data-src":a({src:e.src,width:e.size})}):n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({src:e.src,width:e.size}),"')")}})}}},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(147),r=i(117),l=i(3044).Choice,c=i(106),u=i(120).P3,d={width:o.oneOf(["fixed","relative"]),direction:o.oneOf(["in","out"]).isRequired,isContinuation:o.bool,status:o.shape({text:o.string.isRequired,icon:o.string,level:o.oneOf(["info","error"]),onClick:o.func}),isNested:o.bool,isSelectable:o.bool,isSelected:o.bool,onSelect:o.func,children:o.node.isRequired,innerRef:s.ref},h=function(e){var t,i=e.width,o=e.direction,s=e.isContinuation,d=e.children,h=e.status,p=e.isNested,m=e.isSelectable,g=e.isSelected,_=e.onSelect,f=e.innerRef,v=r((t={"csms-chat-message-item":!0},(0,n.default)(t,"csms-chat-message-item--".concat(i,"-width"),i),(0,n.default)(t,"csms-chat-message-item--".concat(o),!0),(0,n.default)(t,"csms-chat-message-item--continuation",s),t));return p?d:a.createElement("div",{className:v,ref:f,"data-qa":"chat-message","data-qa-message-direction":o},a.createElement("div",{className:"csms-chat-message-item__container"},m?a.createElement("div",{className:"csms-chat-message-item__select"},a.createElement(l,{type:"checkbox",isChecked:g,onChange:_})):null,a.createElement("div",{className:"csms-chat-message-item__content"},d)),h?a.createElement("div",{className:"csms-chat-message-item__status csms-chat-message-item__status--".concat(h.level?h.level:"info"),onClick:h.onClick,"data-qa":"chat-message-status","data-qa-message-status-level":h.level},h.icon?a.createElement("div",{className:"csms-chat-message-item__status-icon"},a.createElement(c,{name:h.icon,size:"sm"})):null,a.createElement(u,null,h.text)):null)};h.propTypes=d,h.defaultProps={isContinuation:!1,isSelectable:!1,isSelected:!1},e.exports=h},,,,,,,function(e,t,i){"use strict";var n=i(100),a=i(102),o=i(129),s=i(101).ProfileQualityWalkthroughEvent,r={NEXT:"next",COMPLETE:"complete"},l=o.extend({screenId:null,isComplete_:!1,isDryRun:!1,userExited:!1,setParent:function(e){this.parent=e},getHpScreenValue:function(){return null},logHotPanelScreenEvent_:function(){var e=this.getHpScreenValue();e&&a.track(s,{step:e,step_skipped:!this.isComplete_,exit_point:this.userExited,activation_place:this.activationPlace,percentage:this.percentage_})},init:function(){this.isDryRun=this.getParameter("dryRun"),this.registerView("view",this.onScreenInit())},update:function(e){this.getView("view").update(e)},setComplete:function(e){return this.isComplete_=!!e,this.trigger(r.COMPLETE,this.isComplete_),this},goToNextScreen:function(){this.trigger(r.NEXT)},onStart:function(){this.getView("view").appendTo(this.parent),this.onScreenActive()},onStop:function(){this.logHotPanelScreenEvent_(),this.onScreenBackground(),this.getView("view").getElement().detach()},isComplete:function(){return this.isComplete_},getName:function(){},preloadData:function(e){this.activationPlace=e.activationPlace},onScreenInit:function(){},onScreenActive:n.noop,onScreenBackground:n.noop,setScreenId:function(e){return this.screenId=e,this},getScreenId:function(){return this.screenId},getProfileOptionType:function(){},updatePercentage:function(e){this.percentage_=e}},"AbstractScreenController");l.VIEW="view",l.EVENTS=r,e.exports=l},,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(98);e.exports=function(e){var t=e.children,i=e.intro,a=e.onSubmit;return n.createElement("form",{className:"form-uniform",onSubmit:a},i?n.createElement("div",{className:"form__intro"},i):null,t)}},,,,,,,,,,function(e,t,i){"use strict";var n=i(194),a=i(305),o=i(371),s=o.OFFLINE_PAGE,r=!0;e.exports=function(e,t){if(window.performance&&window.performance.timing&&r&&a.getInstance().getFirstNormalController()===e){r=!1;var i=n.getRequest(t);i.setStart(window.performance.timing.navigationStart),setTimeout(function(){i.end()},0),setTimeout(function(){"serviceWorker"in window.navigator&&window.navigator.serviceWorker.register("/offline-page-worker.js",{scope:s})},2e3)}}},function(e,t,i){"use strict";function n(e){var t=e.userSubstitute;this.id=t.getId(),this.encountersPromoCard=function(e){return a(o({promos:e.getPromos([]),position:21,type:193})[0])}(t),this.connectionPromoCard=function(e){return a(o({promos:e.getPromos([]),position:1,type:193})[0])}(t),this.contentModePromoCards=function(e){return o({promos:e.getPromos([]),position:13,type:193}).map(function(e){return a(e)})}(t),this.sponsoredAlert=function(e){var t=o({promos:e.getPromos([]),position:22,type:194})[0];if(t){var i=o({promos:e.getPromos([]),position:21,type:193})[0];if(i){var n=s({ctas:i.getButtons([]),type:3});return n?{ctaText:n.getText(),hotpanelData:c(t),popup:{header:t.getHeader(),text:t.getMssg(),buttons:t.getButtons([]).map(function(e){return{text:e.getText(),action:e.getAction()}})}}:void 0}}}(t)}function a(e){if(!e)return null;var t=e.getButtons([]),i=s({ctas:t,type:1});i=i&&63===i.getAction()?{action:i.getAction(),text:i.getText(),redirectPage:i.getRedirectPage()}:null;var n=s({ctas:t,type:2}),a=null;if(n){var o=n.getIcon();a={title:n.getText(),logo:o?o.getDisplayImages():null,action:n.getAction(),redirectPage:n.getRedirectPage()}}var r=s({ctas:t,type:9}),l=s({ctas:t,type:8}),u=s({ctas:t,type:14}),d=s({ctas:t,type:15}),h=e.getId(),p=e.getVariantId();return{key:"".concat(h,"-").concat(p),id:h,variantId:p,hotpanelData:c(e),promoBlockType:e.getPromoBlockType(),promoBlockPosition:e.getPromoBlockPosition(),statsRequired:e.getStatsRequired(),header:a,title:e.getHeader(),text:e.getMssg(),photo:e.getImageId([])[0],primaryCta:i,showOnTap:d&&b.includes(d.getAction()),swipeLeft:r?{action:r.getAction()}:null,swipeRight:l?{action:l.getAction()}:null,swipeUp:u?{text:u.getText(),action:u.getAction()}:null}}function o(e){var t=e.promos,i=e.position,n=e.type;return t.filter(function(e){return e.getPromoBlockPosition()===i&&e.getPromoBlockType()===n})}function s(e){var t=e.ctas,i=e.type;return t.find(function(e){return e.getType()===i})}function r(e){l({promoCard:e.promoCard,context:e.context,event:1})}function l(e){var t=e.promoCard,i=e.context,n=e.event,a=e.avoidStatsRequired;if(t.statsRequired){if(!a){var o=t.statsRequired.indexOf(n);if(-1===o)return;t.statsRequired.splice(o,1)}var s=(new v).setEvent(n).setContext(i);t.promoBlockType&&s.setPromoBlockType(t.promoBlockType),t.promoBlockPosition&&s.setPromoBlockPosition(t.promoBlockPosition),t.id&&s.setPromoId(t.id),t.variantId&&s.setVariantId(t.variantId),function(e){new d(278,(new E).setPromoBannerStats(e)).request()}(s)}}function c(e){var t={bannerId:e.getPromoBlockType()};return e.hasPromoBlockPosition()&&(t.positionId=e.getPromoBlockPosition()),e.hasStatsVariationId()&&(t.variationId=e.getStatsVariationId()),t}function u(e,t){var i=t(e);return!1!==i?i:h.isArray(e)?function(e,t){for(var i=e.length,n=[],a=-1;++a<i;)n[a]=u(e[a],t);return n}(e,t):h.isObject(e)?function(e,t){var i={};return Object.keys(e).forEach(function(n){i[n]=u(e[n],t)}),i}(e,t):e}var d=i(122),h=i(100),p=i(99),m=i(146),g=i(103),_=i(155),f=i(105),v=f.PromoBannerStats,E=f.ServerAppStats,b=[113,112],y=_.Message;n.prototype={getHeaderData:function(){var e=this.encountersPromoCard;e||(e=this.contentModePromoCards[0]);var t=this.sponsoredAlert,i=e.header,n={};if(i&&(n.header=i,t&&t.ctaText)){n.header.subtitle=t.ctaText;var a=t.popup,o=a.buttons[0];n.sponsoredAlert={hotpanelData:t.hotpanelData,header:a.header,text:a.text,ctaText:o?o.text:p.get(19)}}return n},performPrimaryCta:function(e){var t,i,n=e.promoCard,a=e.context,o=e.replaceNavigation;t=n.primaryCta,i={replaceNavigation:o},t&&63===t.action&&function(e,t){if(e)if(e.getUrl())window.open(e.getUrl(),"_blank","noopener");else{var i=m.getRouteFromRedirectPage(e);g.navigate(i,t.replaceNavigation)}}(t.redirectPage,i),r({promoCard:n,context:a})},toJSON:function(){return u(this,function(e){return e instanceof y&&e.toJSON()})}},n.reportEventShow=function(e){var t=e.promoCard,i=e.context;l({promoCard:t,context:i,event:2})},n.reportEventClick=r,n.reportEventSkip=function(e){var t=e.promoCard,i=e.context;l({promoCard:t,context:i,event:8,avoidStatsRequired:!0})},n.reportEventDismiss=function(e){var t=e.promoCard,i=e.context;l({promoCard:t,context:i,event:4,avoidStatsRequired:!0})},n.fromJSON=function(e){return u(e,function(e){return!(!h.isObject(e)||!h.isString(e.$gpb))&&_(e)})},e.exports=n},,function(e,t,i){"use strict";var n=i(100),a=i(161);e.exports=function(e){var t=a.getSettings();if(t){var i=n.find(t.getExternalEndpoints(),function(t){return t.getType()===e});if(i)return i.getUrl().replace("http://","https://")}}},function(e,t,i){"use strict";var n=i(3)(i(144)),a=i(98),o={notification:"mark--notification",white:"mark--white",primary:"mark--primary",default:"mark--notification"};e.exports=function(e){var t=e.color||"default",i=e.attrs||{};return a.createElement("div",(0,n.default)({className:"mark ".concat(o[t]," ").concat(e.shadow?"mark--shadow":""," ").concat(e.extraClass)},i,{dangerouslySetInnerHTML:{__html:e.text}}))}},function(e,t,i){"use strict";var n=i(100),a=i(122),o=i(103),s=i(113),r=i(159),l=i(3465),c=i(124),u=i(102),d=i(131),h=i(238),p=i(375),m=p.notifySecurityCheckPassed,g=p.getRouteNameFromSecurityPage,_=i(105),f=_.ClientSecurityPage,v=_.ServerGetSecurityPage,E=i(101).PassSecurityCheckEvent,b=r.extend({notificationScreenAccess:3,viewConstructor:null,setupView_:n.noop,getContextFromClientSecurity_:n.noop,getVerificationMethod_:n.noop,context_:null,init:function(){b._super.init.apply(this,arguments),this.navigationBar_=this.getView(r.VIEWS.NAVIGATION_BAR),this.navigationBar_.update({scrollToggle:1,scrollToggleClass:"navigation-bar--shadow"}),this.navigationBar_.attachToggleScroll()},onStart:function(){b._super.onStart.apply(this,arguments),this.context_={},this.initView_(),a.any.on(361,this.onSystemNotification_,this)},onReady:function(){b._super.onReady.apply(this,arguments),this.onParametersUpdate(),h({isExpected:!0})},onStop:function(){b._super.onStop.apply(this,arguments),this.destroyChangeVerificationModal_(),a.any.off(361,this.onSystemNotification_,this)},onSystemNotification_:function(e,t){10===(t&&t.getId())&&o.back()},initView_:function(){var e=this.getMainView_();if(!e){var t=this.viewConstructor;e=this.registerView("view",new t).on(t.ACTIONS.CONTACT_SUPPORT,this.onContactSupport_.bind(this)).on(t.ACTIONS.LOGOUT,this.onUserLogout_.bind(this)),this.setupView_(e)}e.appendTo(this.parent)},start:function(e){e.clientSecurityPage||(e.clientSecurityPage=this.getParameter("clientSecurityPage")),b._super.start.call(this,e)},updateParameters:function(e){e.clientSecurityPage||(e.clientSecurityPage=this.getParameter("clientSecurityPage")),b._super.updateParameters.call(this,e)},onParametersUpdate:function(){if(!this.wasBack()){var e=this.getParameter("clientSecurityPage");if(e instanceof f){this.initView_();var t=this.context_=this.context_||{};t.text=e.getText();var i=s.getUser();if(i){t.gender=d.getGenderString(i.getGender());var a=i.getProfilePhoto();a&&(t.imageUrl=d.parseUrls(a.getPreviewUrl()))}e.hasAlternativePages()&&(t.allowChangeVerificationMethod=!0,this.alternativeVerificationMethods_=e.getAlternativePages()),n.extend(t,this.getContextFromClientSecurity_(e)),this.updateView("view",t),this.updateView(r.VIEWS.NAVIGATION_BAR,{title:e.getTitle()})}else o.back()}},onContactSupport_:function(){o.navigate("feedback",{category:"questions"})},onUserLogout_:function(){u.track(E,{verification_method:this.getVerificationMethod_(),security_check_result:4},!0),s.logout()},getMainView_:function(){return this.getView("view")},onError_:function(e){this.log.error("Security check failed",JSON.stringify(e)),c.showNotification({type:c.TYPES.ERROR})},handleCheckResult_:function(e,t){this.getMainView_().hideLoading();var i={verification_method:this.getVerificationMethod_(),security_check_result:2};return e?(u.track(E,i),this.onError_(e)):t.getComplete()&&t.getSuccess()?(i.security_check_result=1,u.track(E,i),m(),void o.back()):(this.context_.errorText=t.getErrorText(),this.getMainView_().update(this.context_),void u.track(E,i))},getNavigationActions:function(){return null},onClickChangeVerificationMethod_:function(){this.alternativeVerificationMethods_?(this.destroyChangeVerificationModal_(),this.changeMethodModal_=new l({alternativeVerificationMethods:this.alternativeVerificationMethods_,clientSecurityPage:this.getParameter("clientSecurityPage")}),this.changeMethodModal_.on(l.EVENTS.CHANGE_METHOD,this.onChangeVerificationMethod_,this),this.registerController("change-verification-method-modal",this.changeMethodModal_)):this.log.error("onClickChangeVerificationMethod_ called but no alternativeVerificationMethods_ available")},destroyChangeVerificationModal_:function(){this.changeMethodModal_&&(this.changeMethodModal_.off(l.EVENTS.CHANGE_METHOD,this.onChangeVerificationMethod_,this),this.changeMethodModal_.destroy(),this.removeController("change-verification-method-modal",this.changeMethodModal_),this.changeMethodModal_=null)},onChangeVerificationMethod_:function(e){var t=this;this.destroyChangeVerificationModal_(),new a(523,(new v).setRequestedPageType(e)).on(524,function(e,i){if(e)t.log.error("Security check response error",JSON.stringify(e));else{var n=g(i);n?o.navigate(n,!0,{clientSecurityPage:i}):t.log.error("Error getting routeName from clientSecurityPage")}}).request()}},"AbstractSecurity");e.exports=b},,,,,,,,,,,function(e,t,i){"use strict";function n(e){return e.filter(function(e){return-1!==g.indexOf(e.getExternalProviderDetails().getType())})}function a(){f.invalidate(v)}var o=i(100),s=i(122),r=i(99),l=i(200),c=i(224),u=i(213),d=i(394),h=i(105),p=h.ServerGetSocialSharingProviders,m=h.SocialSharingProvider,g=[1,15],_={fetchSharingProviders:function(e){var t,i=c.createProtoInstance(p,e);return(t=i,new Promise(function(e,i){new s(358,t).on(359,function(t,n){t||!n.getProviders()?i(t):e(n)}).request()})).then(function(e){var t=e.getProviders();return e.setProviders(n(t)),e})},getProviders:function(e,t){var i=e.photoId,n=e.userId,a=e.defaultPhotoId,o=e.context,r=e.sharingFlow,l=e.supportedSharingModes,c=e.streamId,u=(new p).setContext(o).setPhotoId(i);a&&u.setDefaultPhotoId(a),n&&u.setUserId(n),r&&u.setSharingFlow(r),l&&u.setSupportedSharingModes(l),c&&u.setStreamId(c),new s(358,u).on(359,t).request()},share:function(e,t,i){function n(e,t){o.isFunction(i)&&i(l,r,e,t||!1)}var s=e.getExternalProviderDetails(),r=s.getType(),l=s.getId(),c=t.uid;if(1===r){a();var h=function(){c&&r&&u.onProfileShared(c,l,r,{clientSource:t.clientSource,statsType:t.statsType}),n(!0)};new d({id:t.id,returnRoute:t.returnRoute,request:{method:d.METHODS.SHARE,href:e.getSharingUrl()}}).on(d.EVENTS.FINISH,h).on(d.EVENTS.ERROR,function(e){n(!1,e=e||new Error),a()}).on(d.EVENTS.NEEDS_LOGIN,function(e,t){f.put(v,{type:"share",provider:e.toJSON(),params:t},6e5,!1,!0)}.bind(null,e,t)).on(d.EVENTS.CANCEL,function(){200!==window._config.app_product_type?(n(!1),a()):h()}).send({noLoginAttempts:!!t.noLoginAttempts,popState:!!t.popState,shareEvenIfNotLoggedIn:!!t.shareEvenIfNotLoggedIn})}else if(15===r){var p=encodeURIComponent(e.getSharingDescription()),m=encodeURIComponent(e.getSharingUrl()),g="https://twitter.com/intent/tweet?url=".concat(m,"&text=").concat(p);c&&u.onProfileShared(c,l,r,{clientSource:t.clientSource,statsType:t.statsType});var _=window._badoo_noLoginPopup?null:window.open(g,"_system");n(!0),_?_.focus():window.location.href=g}else n(!1,"Provider id ".concat(l," share not implemented"))},checkPendingShares:function(e,t){var i=function(e){var t=f.get(v);if(t&&t.params.id===e){if("share"===t.type){var i=new m;if(!i.fromJSON(t.provider))return null;t.provider=i}return t}return null}(e);i&&(i.noLoginAttempts=!0,"share"===i.type?_.share(i.provider,i.params,t):_.sendFacebookInvites(i.params,t)),a()},sendFacebookInvites:function(e,t){a();var i=function(){o.isFunction(t)&&t(!1,e),a()};new d({id:e.id,returnRoute:e.returnRoute,referrer:e.referrer,notificationId:e.notificationId,request:{method:d.METHODS.APP_REQUESTS,message:r.get(141)}}).on(d.EVENTS.FINISH,function(){o.isFunction(t)&&t(!0,e)}).on(d.EVENTS.ERROR,i).on(d.EVENTS.NEEDS_LOGIN,function(e){f.put(v,{type:"invite",params:e},6e5,!1,!0)}.bind(null,e)).on(d.EVENTS.CANCEL,i).send({noLoginAttempts:!!e.noLoginAttempts,popState:!!e.popState})},filterSupportedProviders:n,supportsExternalProviderType:function(e){return g.includes(e)}};e.exports=_;var f=l.getInstance("SocialSharer"),v="pending-share"},,function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(210),r=i(338),l=i(120),c=l.P1,u=l.P2,d={direction:a.oneOf(["in","out"]),isContinuation:a.bool,status:a.object,notice:a.string,message:a.string,meta:a.string,actions:a.shape({primary:a.string,secondary:a.string,onClickPrimary:a.func,onClickSecondary:a.func}),innerRef:o.ref},h=function(e){var t=e.direction,i=e.isContinuation,a=e.status,o=e.notice,l=e.message,d=e.meta,h=e.actions,p=e.innerRef;return n.createElement(s,{width:"fixed",direction:t,isContinuation:i,status:a,innerRef:p},n.createElement(r,{direction:t,isContinuation:i,content:n.createElement("div",{className:"csms-chat-message-content-notification","data-qa-message-content-type":"notification"},o?n.createElement("div",{className:"csms-chat-message-content-notification__notice","data-qa":"message-notification-notice"},n.createElement(c,{dangerous:!0},o)):null,l?n.createElement("div",{className:"csms-chat-message-content-notification__message","data-qa":"message-notification-message"},n.createElement(c,{dangerous:!0,breakWords:!0},l)):null,d?n.createElement("div",{className:"csms-chat-message-content-notification__meta","data-qa":"message-notification-meta"},n.createElement(u,null,d)):null),actions:h}))};h.propTypes=d,e.exports=h},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(123)),c=n(i(116)),u=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).onSelect=i.onSelect.bind((0,l.default)(i)),i}return(0,c.default)(t,e),(0,o.default)(t,[{key:"onSelect",value:function(){this.props.onSelect&&this.props.onSelect(this.props.message)}},{key:"onClick",value:function(){var e=this.props.message;e.isMasked?this.props.onUnmask(e):this.props.onReport(e)}},{key:"getUpdatedMessage",value:function(){var e=this.props.message;return e.status&&!e.isYours()&&(e.status.onClick=this.onClick.bind(this)),e}}]),t}(i(98).Component);e.exports=u},function(e,t,i){"use strict";var n=i(113).isLoggedIn;e.exports=function(){return n()?2:1}},,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(126);e.exports=function(e){return self._badoo_same_domain_install_link?"https://".concat(window.location.hostname,"/aa/landto?install_ref=").concat(e):"https://mlink.".concat(n.get("partner_url"),"/aa/landto?install_ref=").concat(e)}},,,,function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(99),s={VERY_LOW:"verylow",LOW:"low",AVERAGE:"average",HIGH:"high",VERY_HIGH:"veryhigh"},r=(n={},(0,a.default)(n,4,99),(0,a.default)(n,3,999),n),l={getLevel:function(e){var t;switch(e){case 10:t=s.VERY_LOW;break;case 20:t=s.LOW;break;case 30:t=s.AVERAGE;break;case 40:t=s.HIGH;break;case 50:t=s.VERY_HIGH}return t},getLevelName:function(e){switch(this.getLevel(e)){case s.VERY_LOW:return o.get(264);case s.LOW:return o.get(265);case s.AVERAGE:return o.get(266);case s.HIGH:return o.get(267);case s.VERY_HIGH:return o.get(268)}},getPopularityCounters:function(e){if(e&&e.getReceivedActivity&&e.getReceivedActivity())return[6,1,7].map(function(t){var i=e.getReceivedActivity().find(function(e){return e.getType()===t});if(!i)return{};var n=i.getNumber();return r[t]&&n>r[t]&&(n="".concat(r[t],"+")),{value:String(n),label:i.getText()}})}};l.CLASSES=s,e.exports=l},function(e,t,i){"use strict";var n=i(100),a=i(129),o=i(113),s=i(284),r=i(128),l={DATA_LOADED:1},c=a.extend({allowSave:!0,view_:null,construct:function(e,t){c._super.construct.call(this),this.parent=e,this.parameters=t},onStart:function(){var e=this;c._super.onStart.apply(this,arguments),this.loadData_(this.parameters).then(function(t){return e.trigger(l.DATA_LOADED,t)})},onStop:function(){c._super.onStop.apply(this,arguments),this.view_=null},clear:n.noop,save:function(e,t,i){var n=this;return this.view_.showLoading(),this.getProfileField(t).then(function(a){return s.getInstance().set(e,t,i,a.getDisplayValue()).then(function(e){return n.view_.hideLoading(),e})})},getProfileField:function(e){return this.getUser().then(function(t){return t.getProfileFields([]).find(function(t){return t.getType()===e})})},getClientProfileOption:function(e){return s.getInstance().get(e,[this.profileOptionType_])},getUser:function(){return r.getInstance().get({id:o.getUserId()})},loadData_:Promise.resolve},"AbstractEditController");c.STATES=l,e.exports=c},function(e,t,i){"use strict";function n(e,t){return e.find(function(e){return e.getValue()===t})}var a,o=i(3),s=o(i(107)),r=o(i(4)),l=i(100),c=i(135),u=i(128),d=i(155),h=i(273),p=i(161),m=i(105),g=m.ServerPersonProfileEditForm,_=m.ProfileField,f=m.User,v=[2,3,4,13,15,6,7,8,9,11,10,21,12],E=c.extend({useCache_:!0,name:"ProfileEditForm",unitType_:null,getRequestMessageType:377,getResponseMessageType:378,get:function(e){var t=e||p.getSettings().getDefaultUnitType();this.unitType_=t;var i=(new g).setUnitType(t).setType(v);return E._super.get.call(this,i).then(function(e){return function(e,t){var i={unitType:t};return e.getOptions([]).forEach(function e(t){t.getType()&&(i[t.getType()]=t),t.getInputParts()&&t.getInputParts().forEach(e)}),i}((0,r.default)(e,1)[0],t)})},getCacheKey_:function(e){return"".concat(this.name,"-").concat(e!==this.getRequestMessageType?e:this.unitType_)},setUseCache:function(e){this.useCache_=e},set:function(e,t,i,n){var a=this,o=new f;return l.isString(e)?o.setProfileFields([(new _).setDisplayValue(e).setType(t).setValue(e)]):o.setProfileFields(e),h.trackAppearance((0,s.default)({},t,n),(0,s.default)({},t,e)),u.getInstance().set(o,[490]).then(function(i){return a.updateCache_(e,t),i})},updateCache_:function(e,t){var i=this;[1,2].forEach(function(a){var o=i.getCacheKey_(a),s=i.cache_.get(o);if(s&&s[0]){var r=d(s[0]),l=function e(t,i){for(var n=null,a=null,o=null,s=0;s<t.length;s++){if((o=t[s]).getType()===i){n=o;break}if((a=o.getInputParts())&&(n=e(a,i)))break}return n}(r.getOptions([]),t);if(!l)return;var c=n(l.getPossibleValues([]),e);c||(e=String(Number(e)+10),c=n(l.getPossibleValues([]),e)),l.setCurrentOptionId(e).setDisplayValue(c?c.getDisplayValue():e),i.cacheResponse_(o,i.getCacheTime_(),[r])}})}},"ProfileEditFormModel");E.getInstance=function(){return a||(a=new E)},e.exports=E},,,,function(e,t,i){"use strict";var n=i(3);t.__esModule=!0,t.MessageType=t.UrlPreviewItemStatus=t.Consumer=t.Provider=t.MessengerContext=void 0;var a=n(i(98)).default.createContext({}),o=a;t.MessengerContext=o;var s=a.Provider;t.Provider=s;var r,l,c=a.Consumer;t.Consumer=c,t.UrlPreviewItemStatus=r,function(e){e[e.IS_BLACKLISTED=0]="IS_BLACKLISTED",e[e.IS_NOT_BLACKLISTED=1]="IS_NOT_BLACKLISTED",e[e.IS_PREVIEW=2]="IS_PREVIEW"}(r||(t.UrlPreviewItemStatus=r={})),t.MessageType=l,function(e){e[e.REGULAR=0]="REGULAR",e[e.GIF=1]="GIF"}(l||(t.MessageType=l={}))},function(e,t,i){"use strict";function n(e){var t=_.render({inputFile:S,inputAlbumType:w}).appendTo(document.body);t.find(".file-picker").on("change",e),this.form=t.filter(".photo-form").get(0),this.input=t.find(".file-picker"),this.albumType=t.find(".album-type")}function a(){var e=document.createElement("iframe");e.classList.add("photo-form"),document.body.appendChild(e),this.iframe=e}var o=i(100),s=i(25),r=i(189),l=i(103),c=i(139),u=i(5),d=i(99),h=i(125),p=i(590),m=i(111),g=i(161),_=i(3201),f=i(3202),v=i(142).waitForPageTransitionFinish,E=h.getLogger("PhotoUpload"),b=m("START","FINISH","CANCEL","START_MULTIPLE","PROGRESS","SUCCESS","FAILURE","CAMERA_FAILURE"),y=u.supportsXHRFileUpload,k=Boolean(r.FileReader)&&Boolean(r.Image),S="file",w="album_type",C=function(){};o.extend(C.prototype,c,{isUploading_:!1,timeout:null,init:function(){this.EVENTS=b,y?this.fileInput_=new n(this.uploadXhr_.bind(this,null)):(this.onIframeMessage_=this.onIframeMessage_.bind(this),this.iframe_=new a),this.reset()},isPreview:function(e){return"preview-photo-id"===e},upload:function(e){e&&(this.file_=e,this.isUploading_=!0),this.isUploading_&&this.file_&&this.sendXHR_(this.file_)},start:function(e){var t=this,i=e.camera,n=e.uploadUrl,a=e.albumType,o=e.preview,s=e.multiple,c=e.replace;if(this.uploadUrl_=n,this.preview_=r.FileReader&&o,a||(a=2),i){if(p.supportsCamera){a&&this.fileInput_.albumType.val(a);var u=!p.requestedDuringSession;return void p.requestAccess().then(function(){i.onAccessGranted&&i.onAccessGranted(u),l.navigate("camera",c,{facingMode:i.facingMode,previewGestureUrl:i.previewGestureUrl,previewTooltip:i.previewTooltip,hasOverlay:i.hasOverlay,onTakePicture:function(e){v(function(){return t.uploadXhr_(e)}),l.back()},onCancelPicture:function(){v(function(){return t.trigger(b.CANCEL)})},onCameraError:function(){v(function(){return t.trigger(b.CAMERA_FAILURE)}),l.back()}})}).catch(function(){i.onAccessDenied&&i.onAccessDenied(u),t.trigger(b.CAMERA_FAILURE)})}if(!i.fallback)return void this.trigger(b.CAMERA_FAILURE)}if(y&&s?this.fileInput_.input.attr("multiple",""):this.fileInput_.input.removeAttr("multiple"),y)a&&this.fileInput_.albumType.val(a),this.fileInput_.input.click();else{r.addEventListener("message",this.onIframeMessage_),this.uploadUrl_=n="".concat(n,"&wa=1");var d=this.iframe_.iframe.contentDocument;d.getElementById("file-picker").addEventListener("change",this.startUpload_.bind(this)),d.getElementById("photo-form").setAttribute("action",n),a&&d.getElementById("album-type").setAttribute("value",a),d.getElementById("file-picker").click()}},uploadXhr_:function(e){if(e||""!==this.fileInput_.input.val())return this.uploadUrl_?void this.startUpload_(e):(this.reset(),void this.trigger(b.FINISH,null))},startUpload_:function(e){var t;if(e)t=[e];else{var i=this.fileInput_.input;t=i?Array.from(i.get(0).files):[]}if(t.length){var n=this.uploadQueue_&&this.uploadQueue_.isUploading();n&&(this.uploadQueue_.append(t),this.trigger(b.START_MULTIPLE,this.uploadQueue_.getFinishedUploads(),this.uploadQueue_.getTotalUploads())),this.isUploading_=!0,this.preview_?t.forEach(this.uploadFile_.bind(this)):n||(this.uploadQueue_=new f({files:t}),this.trigger(b.START_MULTIPLE,this.uploadQueue_.getFinishedUploads(),this.uploadQueue_.getTotalUploads()),
this.uploadNextFile_())}},checkImageBeforeUpload_:function(e){var t=this,i=function(){var e=g.getSettings();if(e&&e.getPhotoUploadSettings())return e.getPhotoUploadSettings().getMinPhotoSize()}();if(i){var n=9===parseInt(this.fileInput_.albumType.val(),10),a=new r.FileReader;a.onload=function(a){var o=new r.Image;o.addEventListener("load",function(){if((o.width<i.getWidth()||o.height<i.getHeight())&&!n){var s=d.get(574,i.getWidth(),i.getHeight()),r=new Error(s);t.trigger(b.FINISH,r),t.failUpload_(s,{error:r})}else t.preview_?(t.file_=e,t.trigger(b.FINISH,{photo_id:"preview-photo-id",photo_url:a.target.result})):t.sendXHR_(e);o=null}),o.addEventListener("error",function(){return t.sendXHR_(e)}),o.src=a.target.result},a.readAsDataURL(e)}else this.sendXHR_(e)},sendXHR_:function(e){var t=this;this.trigger(b.START),clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.currentRequest_&&t.currentRequest_.abort();var e=new Error("Photo upload timeout");t.failUpload_(e.message,{error:e,count:t.uploadQueue_&&t.uploadQueue_.getTotalUploads()})},6e4),this.currentRequest_=new XMLHttpRequest,this.currentRequest_.onreadystatechange=function(){if(t.currentRequest_.readyState===XMLHttpRequest.DONE)if(clearTimeout(t.timeout),200===t.currentRequest_.status){var e;try{e=JSON.parse(t.currentRequest_.responseText)}catch(e){return void t.failUpload_("Photo upload response parse error",{error:e,xhr:t.currentRequest_})}t.file_=t.isUploading_=!1,t.uploadQueue_&&(t.uploadQueue_.updateStatus({finished:!0,data:e}),t.uploadNextFile_()),t.trigger(b.FINISH,e)}else{var i=new Error("Photo upload failed");t.failUpload_(i.message,{error:i,xhr:t.currentRequest_,count:t.uploadQueue_&&t.uploadQueue_.getTotalUploads()})}};var i=new r.FormData;i.append(w,this.fileInput_.albumType.val()),i.append(S,e),this.currentRequest_.open("POST",this.uploadUrl_,!0),this.currentRequest_.send(i)},onIframeMessage_:function(e){var t=e.data||{},i=-1!==e.origin.indexOf(r.location.hostname);e&&i&&"photo-uploaded"===t.type&&(r.removeEventListener("message",this.onIframeMessage_),this.reset(),this.trigger(b.FINISH,t))},reset:function(){this.file_=this.isUploading_=!1,y?this.fileInput_.form.file&&(this.fileInput_.form.file.value=""):s(this.iframe_.iframe).attr("src","/photo-upload.html")},failUpload_:function(e,t){(t=t||{}).uploadUrl=this.uploadUrl_,E.error(e,t);var i=null;if(this.uploadQueue_){var n=t.error;this.uploadQueue_.updateStatus({finished:!0,error:n||!0}),this.uploadNextFile_()}else this.trigger(b.FAILURE,t),i={failedFile:this.file_},this.reset();this.trigger(b.FINISH,i)},uploadNextFile_:function(){if(this.uploadQueue_&&!this.uploadQueue_.isUploading()){this.trigger(b.PROGRESS,{count:this.uploadQueue_.getFinishedUploads(),total:this.uploadQueue_.getTotalUploads()});var e=this.uploadQueue_.getNextFile();if(e)this.uploadFile_(e);else{var t=this.uploadQueue_.getUploadedData();this.uploadQueue_.hasFailedUploads()?this.trigger(b.FAILURE,t):this.trigger(b.SUCCESS,t),this.uploadQueue_=null}}},uploadFile_:function(e){return k?void this.checkImageBeforeUpload_(e):this.sendXHR_(e)}});var T=new C;r.PHANTOMJS||T.init(),e.exports=T},function(e,t,i){"use strict";function n(e){var t=e.children,i=e.narrow,n=e.centered,o=e.description,r=e.isInvalid,l=e.errorMessage,c=e.dataQaErrorMessage,u=s({control:!0,"control--narrow":i,"control--centered":n});return a.createElement("div",{className:u},t,o&&!r?a.createElement("div",{className:"control__description"},o):null,r?a.createElement("div",{className:"control__error show-error","data-qa":c},l):null)}var a=i(98),o=i(104),s=i(117),r={narrow:o.bool,centered:o.bool,description:o.string,isInvalid:o.bool,errorMessage:o.string};n.propTypes=r,n.defaultProps={narrow:!1,centered:!1,description:"",isInvalid:!1,errorMessage:""},e.exports=n},function(e,t,i){"use strict";function n(){return o.findIndex(d,function(e){return e.object instanceof u&&4===e.object.getPromoBlockPosition()})}function a(e){return e instanceof c?"user__".concat(e.getUserId()):e instanceof s?"ctrl__".concat(e.name):"item__".concat(++m)}var o=i(100),s=i(129),r=i(125).getLogger("Connections"),l=i(105),c=l.User,u=l.PromoBlock,d=[],h=!1,p={getItems:function(){return d},getUsers:function(){return d.filter(function(e){return e.object instanceof c})},getControllers:function(){return d.filter(function(e){return e.object instanceof s})},initialise:function(){h=!0,d=[]},removeItem:function(e){var t;-1!==(t="number"==typeof e?e:this.findIndex(e))&&d.splice(t,1)},findIndex:function(e){return e instanceof s||e instanceof u?o.findIndex(d,function(t){return t.object===e}):e instanceof c?o.findIndex(d,function(t){return t.object instanceof c&&t.object.getUserId()===e.getUserId()}):"string"==typeof e?o.findIndex(d,function(t){return t.object instanceof c&&t.object.getUserId()===e}):-1},get:function(e){return d[e]},replaceItem:function(e,t){e.hasOwnProperty("key")||(e.key=a(e.object)),d[t]=e},removeUpdatedFlags:function(){for(var e=0;e<d.length;e++)delete d[e].isUpdate},addUpdates:function(e){var t=this;e.forEach(function(e){e.object instanceof c&&t.removeItem(e.object.getUserId())});var i=e.map(function(e){return{object:e,key:a(e),isUpdate:!0}});Array.prototype.unshift.apply(d,i),this.moveTopMostPromo()},addPage:function(e,t){var i=e.map(function(e){return{object:e,key:a(e)}});t&&(d=[]),Array.prototype.push.apply(d,i)},moveItemToTop:function(e,t){t&&this.removeItem(t),d.unshift(e),this.moveTopMostPromo()},moveTopMostPromo:function(){var e=n();if(e>-1){var t=d.splice(e,1)[0];d.unshift(t)}},replaceTopMostPromo:function(e){var t=n();if(t>-1){var i=d[t];i.object=e,this.replaceItem(i,t)}},replaceLikedYouPromo:function(e){var t=o.findIndex(d,function(e){return e.object instanceof u&&129===e.object.getPromoBlockType()&&2===e.object.getStatsVariationId()});if(t>-1){var i=d[t];i.object=e,this.replaceItem(i,t)}},updateUsers:function(e){var t=this;e.forEach(function(e){var i=t.findIndex(e),n=t.get(i);n?(n.object=e,t.replaceItem(n,i)):r.error("ConnectionsItems - Entry at index ".concat(i," is undefined."),d.length,e,h)})},hasTopMostPromo:function(){return-1!==n()},getTopMostPromo:function(){if(this.hasTopMostPromo()){var e=n();return this.get(e)}return null},removeTopMostPromo:function(){var e=this.getTopMostPromo();if(e){var t=e.object||e;this.removeItem(t)}}};e.exports=p;var m=0},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(109),a=i(392),o=i(111)("LANGUAGE_SELECT"),s=n.extend({events:{"click .js-language-input":"handleLanguageInputClick_"},render:function(e){var t=function(e){var t=e.languages.filter(function(e){return!e.hidden});return{navigationBar:e.navigationBar,languages:t&&t.map(function(t){return{id:t.id,name:t.name,uri:t.uri,selected:t.id===e.selectedLanguage}})}}(e),i=a.render(t);this.$el.html(i)},handleLanguageInputClick_:function(e){var t=Number(e.target.value);this.trigger(o.LANGUAGE_SELECT,t)}},"InterfaceLanguageView");e.exports=Object.assign(s,{EVENTS:o})},,function(e,t,i){"use strict";function n(e){20===e.getId()&&(s=void 0,a())}function a(){return s||(s=new Promise(function(e){new c(612,new u({products:[25]})).on(613,function(t,i){return t?(s=void 0,e({error:t})):(r=i.getProductConfigs([])[0],void e(r))}).request()}))}var o,s,r,l=i(167),c=i(122),u=i(105).ServerGetProductPaymentConfig;e.exports={start:function(e){void 0===o&&e.getLoginObserver(function(e){e.isAuthenticated?(s=void 0,o||(o=!0,l.getInstance().on(l.Type.SYSTEM_NOTIFICATION,n)),a()):o&&(o=!1,s=void 0,l.getInstance().off(l.Type.SYSTEM_NOTIFICATION,n))})},fetch:a,isCostRequired:function(){return!(!s||!r)&&r.getCostRequired()}}},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(103),s=i(132),r=i(124),l=i(243),c=i(213),u=i(111),d=i(102),h=i(171),p=i(382),m=i(140),g=i(128),_=i(2836),f=i(508),v=i(513),E=i(328),b=i(129),y=i(2852),k=i(2895),S=i(523),w=i(184),C=i(2900),T=i(101),P=T.ProfileInfoBottomReachedEvent,N=T.ShareProfileEvent,I=T.ViewProfileInfoEvent,x=T.ViewProfileEvent,A=T.ClickEvent,O=T.ViewElementEvent,V=T.ViewAdsEvent,R=_.CONTEXT,B=u("CLOSE","VOTE","CRUSH","CHAT","SMILE","BLOCKED","GALLERY_SLIDE_CHANGE","GALLERY_CLICK","GALLERY_CLOSE","ADJACENT_PROFILE_CLICK"),L=(n={},(0,a.default)(n,2,6),(0,a.default)(n,7,176),(0,a.default)(n,6,177),(0,a.default)(n,21,109),n),F=b.extend({profileData_:null,construct:function(e){var t=e.parent,i=e.reportUserContext,n=e.reload,a=e.isOwnProfile;F._super.construct.call(this),this.parent=t,this.reportUserContext_=i,this.reload_=n,this.isOwnProfile_=a},init:function(){F._super.init.apply(this,arguments);var e=this.registerView("PROFILE",new _({el:this.parent.get(0),showGoogleAds:this.showGoogleAds_()})).on(_.EVENTS.CLOSE,this.onCloseProfile_,this).on(_.EVENTS.PROFILE_INFO_BOTTOM_REACHED,this.onBottomReached_,this).on(_.EVENTS.PROFILE_INFO_OPENED,this.onProfileInfoOpen_,this).on(_.EVENTS.PROFILE_INFO_CLOSED,this.onProfileInfoClose_,this);this.view_=e;var t=this.registerController("GALLERY",new E).setGallery(e.getGalleryContainer()).on(E.ACTIONS.GALLERY_SLIDE_CHANGE,this.trigger.bind(this,B.GALLERY_SLIDE_CHANGE)).on(E.ACTIONS.CLICK,this.onGalleryClick_,this).on(E.ACTIONS.CRUSH,this.handleCrushInGallery_,this);this.galleryController_=t,this.fullScreenGalleryView_=this.registerView(new f).on(f.ACTIONS.CLICK,this.closeFullscreenGallery_,this);var i=this.registerController("INFO",new y(e.getInfoContainer(),this.reload_)).on(y.ACTIONS.SHARE,this.onShareCurrentProfile_,this).on(y.ACTIONS.BLOCK,this.onBlockUser_,this).on(y.ACTIONS.UNBLOCK,this.onUnblockUser_,this).on(y.ACTIONS.MESSAGE_SENT,this.onQuickChatSent_,this);this.infoController_=i;var n=new k(e.getActionsContainer());return this.buttonsController_=this.registerController("PROFILE_BUTTONS",n).on(k.EVENTS.VOTE_YES,this.onVoted_.bind(this,2)).on(k.EVENTS.VOTE_NO,this.onVoted_.bind(this,3)).on(k.EVENTS.VIEW_NEXT_PROFILE,this.viewNextProfile_,this).on(k.EVENTS.VIEW_PREV_PROFILE,this.viewPrevProfile_,this).on(k.EVENTS.CHAT,this.chatWithCurrent_,this).on(k.EVENTS.SMILE,this.trigger.bind(this,B.SMILE)).on(k.EVENTS.CRUSH,this.onCrushIconClick_,this),this},onVoted_:function(e){this.trigger(B.VOTE,{voteResult:e,photo:this.getCurrentPhoto(),profileData:this.profileData_})},onCrushIconClick_:function(){d.track(A,{element:18}),this.trigger(B.CRUSH,{photo:this.getCurrentPhoto(),profileData:this.profileData_})},handleCrushInGallery_:function(){this.trigger(B.CRUSH,{photo:this.getCurrentPhoto(),profileData:this.profileData_,seenExplanationScreen:!0})},hideCrushUpsellSlide:function(){this.profileData_.user.delPromoBlockAfterLastPhoto(),this.galleryController_.configure({profileData:this.profileData_})},requiresPortrait:function(){return!1},updateParameters:function(e){e instanceof l?(this.profileData_=e,this.setup_(),this.trackProfileView_(),"encounters"!==o.getLocation().routeName&&e.vote.allowSmile&&d.track(O,{element:227})):this.clear()},onStart:function(){F._super.onStart.apply(this,arguments),this.showGoogleAds_()&&w.refresh(w.placements.PROFILE)},onStop:function(){F._super.onStop.apply(this,arguments),this.fullScreenGalleryView_.showFullscreen(!1),this.isGoogleAdsRendered_=!1},setup_:function(){this.profileData_&&this.setupSections_()},setupSections_:function(){this.galleryController_.configure({profileData:this.profileData_}),this.infoController_.setProfileData(this.profileData_),this.view_.update(this.profileData_),this.profileData_.isOwnProfilePreview?this.ownProfileButtonsController_||(this.ownProfileButtonsController_=new C(this.view_.getActionsContainer()),this.registerController(this.ownProfileButtonsController_)):this.buttonsController_.updateParameters(this.profileData_)},clear:function(){return this.view_.clear(),this.infoController_.clear(),this.galleryController_.reset(),this.profileData_=null,this},onCloseProfile_:function(){this.trigger(B.CLOSE,{photo:this.galleryController_.getCurrentPhoto()}),d.track(A,{element:51}),w.destroy(w.placements.PROFILE)},scrollToPhoto:function(e){this.galleryController_.updateLayout(),this.galleryController_.scrollToPhoto(e)},chatWithCurrent_:function(){this.trigger(B.CHAT)},onBlockUser_:function(){if(this.profileData_&&this.profileData_.id){var e=this.blockOptionsController_;e||(e=this.registerController("BLOCK_OPTIONS",new v(this.reportUserContext_)).on(v.EVENTS.BLOCKED,this.onBlockedFolderUpdated_.bind(this,!0)),this.blockOptionsController_=e),e.setUserId(this.profileData_.id),e.show()}},onUnblockUser_:function(){this.profileData_&&this.profileData_.id&&m.getInstance().removeUserFromFolder({uid:this.profileData_.id,folder:9}).then(this.onBlockedFolderUpdated_.bind(this,!1))},onQuickChatSent_:function(){g.getInstance().invalidate(this.profileData_.id)},showError_:function(){r.showNotification({type:r.TYPES.ERROR})},onBlockedFolderUpdated_:function(e){e&&this.trigger(B.BLOCKED),g.getInstance().invalidate(this.profileData_.id),e||(h().scrollTop=0)},trackProfileView_:function(){function e(e){return function(t){return t.getType()===e&&(!t.getRequiredAction()||0===t.getRequiredAction())}}var t=this.profileData_,i=t.user,n=t.user.getProfileFields([]),a={encrypted_user_id:i.getUserId(),verified:i.getIsVerified(!1),photo_count:i.getPhotoCount(0),activation_place:t.activationPlace,chat_button_available:!!t.vote.allowChat,education_shown:n.some(e(10)),job_shown:n.some(e(12))},o=p.getProfileBadgeAndMutualCount(i,t.sessionUser),s=o.shownBadgeCount,r=o.mutualBadgeCount;a.lifestyle_badges_count=s,a.mutual_badges_count=r;var l=i.getCameFromProduct(),c=L[l];c&&(a.visiting_source=c),311===t.activationPlace&&(a={activation_place:t.activationPlace,encrypted_user_id:i.getUserId()}),d.track(x,a)},getCurrentPhoto:function(){return this.galleryController_.getCurrentPhoto()||this.galleryController_.getPhotoFromIndex(0)},profileOpened:function(){d.track(I,{encrypted_user_id:this.profileData_.id,activation_place:this.profileData_.activationPlace,gesture:4}),this.infoController_.onOpened(),this.galleryController_.currentPhotoViewed(),this.renderGoogleAds_()},onProfileInfoOpen_:function(){this.galleryController_.blockScrolling()},onProfileInfoClose_:function(){this.galleryController_.enableScrolling()},onBottomReached_:function(){this.profileData_&&d.track(P,{encrypted_user_id:this.profileData_.id})},onShareCurrentProfile_:function(){c.otherProfileShareButtonClicked(this.profileData_.id);var e=this.profileData_.isOwnProfile?9:10;d.track(N,{action_type:1,activation_place:e});var t=this.profileData_.user,i=this.getCurrentPhoto();o.navigate("share-profile",{userId:t.getUserId(),imageId:i?i.getId():null,user:t,returnRoute:o.getUrl()})},viewNextProfile_:function(){var e=this.profileData_.adjacentProfiles,t=e&&e.next;t&&this.trigger(B.ADJACENT_PROFILE_CLICK,t)},viewPrevProfile_:function(){var e=this.profileData_.adjacentProfiles,t=e&&e.prev;t&&this.trigger(B.ADJACENT_PROFILE_CLICK,t)},getUserId:function(){return this.profileData_?this.profileData_.id:null},getMetaContainer:function(){return this.view_.getMetaContainer()},getCurrentProfile:function(){return this.profileData_},isEmpty:function(){return!this.profileData_},onGalleryClick_:function(){this.trigger(B.GALLERY_CLICK,{photo:this.galleryController_.getCurrentPhoto()})},showFullscreenGallery:function(){if(s.getSync(1).getEnabled()){var e=this.profileData_.user,t=this.profileData_.isOwnProfilePreview?e.getAlbums([]).filter(function(e){return 4!==e.getAlbumType()}):e.getAlbums();if(t){var i=[];t.forEach(function(e){return e.getPhotos([]).forEach(function(t){return i.push({photo:t,album:e})})});var n=this.fullScreenGalleryView_;n.update({photos:i}),n.showFullscreen(!0);var a=this.getCurrentPhoto();a&&n.scrollToPhoto(a)}}},closeFullscreenGallery_:function(){this.scrollToPhoto(this.fullScreenGalleryView_.getCurrentPhoto().photo),this.fullScreenGalleryView_.showFullscreen(!1),this.trigger(B.GALLERY_CLOSE,{photo:this.galleryController_.getCurrentPhoto()})},showLoading:function(){this.view_.showLoading(),this.buttonsController_.setLoading(!0)},hideLoading:function(){this.view_.hideLoading(),this.buttonsController_.setLoading(!1)},showFullScreenLoading:function(){this.view_.showFullScreenLoading()},hideFullScreenLoading:function(){this.view_.hideFullScreenLoading()},showGoogleAds_:function(){return w.isEnabled()&&!this.isOwnProfile_},renderGoogleAds_:function(){if(this.showGoogleAds_()){if(d.track(O,{element:442}),this.isGoogleAdsRendered_)return;this.isGoogleAdsRendered_=!0;var e=w.create(w.placements.PROFILE);this.view_.$(".js-profile-preview-banner").html(S.render({adSlot:e,placement:"profile"})),w.render(),d.track(V,{activation_place:10,ad_aggregator:12,element:442,ad_placement:2,ad_unit_id:e})}}},"SingleProfile");F.CONTEXT=R,F.EVENTS=B,e.exports=F},function(e,t,i){"use strict";e.exports=function(e){var t=null;return{callback:function(i){null!==t?(e(t,i),t=i):t=i},reset:function(){t=null}}}},function(e,t,i){"use strict";function n(e){return 4===e.getAlbumType()}function a(e){var t=e.blocker;return t&&89===t.getPromoBlockType()}var o=i(100),s=i(132),r=i(2848),l=i(200),c=i(150),u=i(214),d=i(395),h=i(113),p=l.getInstance("GALLERY"),m=r.ACTIONS,g=d.TYPES,_=r.extend({showAddButton_:!0,layout:r.LAYOUT.VERTICAL,albumType:2,scrollDirection_:5,setGallery:function(e){return this.gallerySection=e,this.pageView_&&this.gallerySection.append(this.pageView_.getElement()),this},onStart:function(){_._super.onStart.apply(this,arguments),this.gallerySection&&this.gallerySection.append(this.pageView_.getElement()),this.latestUpdatedUserId_=null},configure:function(e){var t=this,i=e.profileData,n=e.scrollToPhoto,a=e.crushUpsellPointer,r=this.profileData_&&this.profileData_.id!==i.id;this.profileData_=i,this.isOwnProfile_=!1,this.isOwnProfilePreview_=i.isOwnProfilePreview,this.clientSource_=i.clientSource,this.template_=i.template,this.type_=i.type||g.PUBLIC,this.userGender_=i.gender,this.userId_=i.id,this.activationPlace_=i.activationPlace,this.upSell_=h.isLoggedIn()&&1===h.getUser().getGender()&&i.user.getPromoBlockAfterLastPhoto&&i.user.getPromoBlockAfterLastPhoto()||null,this.selectedPhoto_=null,this.accessLevel_=i.accessLevel;var l,c=p.get(this.userId_);c&&c.selectedPhoto&&(p.invalidate(this.userId_),this.selectedPhoto_=this.photos_.find(function(e){return e.photo.getId()===c.selectedPhoto})),o.isBoolean(i.showAddButton)&&(this.showAddButton_=i.showAddButton),this.showPrivatePhotosBlocker_=function(e){var t=e.isOwnProfile,i=e.accessLevel,n=e.privatePhotoAlbum;return!!t||!(!s.getSync(109).getEnabled()||!n||0===n.getCountOfPhotos())&&(20!==i&&4!==n.getAccessLevel())}({isOwnProfile:this.isOwnProfile_,privatePhotoAlbum:i.privateAlbum,accessLevel:this.accessLevel_}),i.albums&&(this.setAlbums_(i.albums),l=this.getGalleryData_(),this.albumTypeIds_=i.albums.map(function(e){return e.getAlbumType()}));var d=!!this.isOwnProfile_&&s.isAllowed(s.getSync(143)),m=Object.assign({allowAddVideo:u.getInstance().allowAddVideo(),crushUpsellPointer:a,currentSlideIndex:r?0:null,gender:this.userGender_,isOwnProfile:this.isOwnProfile_,photoCoaching:d,privatePlaceholderData:null,showAddButton:this.showAddButton_,showPrivatePhotosBlocker:this.showPrivatePhotosBlocker_,template:this.template_,type:this.type_,upSell:this.upSell_},l);this.updateMainGallery(m),n&&(this.selectedPhoto_=this.photos_.find(function(e){return e.photo.getId()===n.getId()})),this.scrollToInitialPosition_(),this.isOwnProfile_||this.isOwnProfilePreview_?(this.removeRestrictedClasses_(),this.viewPhotosAction_=null):this.onFeature_(s.getSync(1)),this.startEvents_(),this.showPrivatePhotosBlocker_&&h.isLoggedIn()&&this.getPrivatePlaceholderData_(i.privateAlbum).then(function(e){return t.updateMainGallery({privatePlaceholderData:e})})},onScrollBottomEdge_:function(){this.trigger(m.EXPAND_PROFILE)},reset:function(){_._super.reset.apply(this,arguments),this.stopEvents_()},startEvents_:function(){this.hasEvents_&&this.stopEvents_(),this.isOwnProfilePreview_||s.on(s.EVENTS.UPDATE,this.onFeature_,this),this.hasEvents_=!0},stopEvents_:function(){this.hasEvents_&&(this.isOwnProfilePreview_||s.off(s.EVENTS.UPDATE,this.onFeature_,this),this.hasEvents_=!1)},setAlbums_:function(e){o.isArray(e)||(e=[e]);var t=o.find(e,n);this.showPrivatePhotosBlocker_=this.shouldDisplayPrivatePlaceholder_(t),this.externalPhotoBlockers_=this.getExternalPhotoBlockers_(e),o.isEmpty(this.externalPhotoBlockers_)||c.getSupportedProviders({providerContext:14}),this.photos_=this.createGalleryPhotosFromMultipleAlbums_(e),(this.isOwnProfile_||this.isOwnProfilePreview_)&&(this.photos_=this.photos_.filter(function(e){return!e.private})),o.some(this.photos_,a)&&c.getSupportedProviders({providerContext:7})},getGalleryData_:function(){return{photos:this.photos_,showPrivatePhotosBlocker:this.showPrivatePhotosBlocker_,externalPhotoBlockers:this.externalPhotoBlockers_}},scrollToInitialPosition_:function(){this.selectedPhoto_&&this.selectedPhoto_.photo&&this.scrollToPhoto(this.selectedPhoto_.photo)},getPhotoFromIndex:function(e){var t=this.photos_[e];return t&&t.photo}},"VerticalGalleryController");_.ACTIONS=m,e.exports=_},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(100),s=i(113),r=i(105),l=r.ServerMultiUploadPhoto,c=r.UploadedPhoto,u=i(101),d=u.ImportPhotoEvent,h=u.AddVideosEvent,p=i(122),m=i(102),g=i(224),_=i(111),f=i(128),v=i(139),E=i(399),b=i(302),y=(n={},(0,a.default)(n,1,1),(0,a.default)(n,12,4),(0,a.default)(n,9,7),(0,a.default)(n,3,6),(0,a.default)(n,2,5),n),k=_("PHOTO","VIDEO"),S=_("PHOTO_UPLOADED"),w=Object.assign({},v,{uploadMedia:function(e){e.mediaType===k.VIDEO?function(e){e.photos.forEach(function(t){var i={video_id:t,num_added:1,num_videos:1},n=b[e.providerType];o.isUndefined(n)||(i.source=n);var a=y[e.providerType];o.isUndefined(a)||(i.import_source=a),o.isUndefined(e.activationPlace)||(i.activation_place=e.activationPlace),m.track(h,i)})}(e):function(e){e.photos.forEach(function(t){var i={photo_id:t},n=y[e.providerType];o.isUndefined(n)||(i.photo_import_method=n),o.isUndefined(e.activationPlace)||(i.activation_place=e.activationPlace),m.track(d,i)})}(e);var t={photos:e.photos.map(function(t){return g.createProtoInstance(c,{external_album_id:e.albumId,external_provider_id:e.providerId,photo_id:t,photo_source:3})})};t.album_type=e.albumType,e.requestedByUserId&&(t.requested_by_user_id=e.requestedByUserId);var i=g.createProtoInstance(l,t);return e.photoToReplace&&i.setPhotosToReplace([e.photoToReplace]),new Promise(function(t,n){new p(495,i).on(496,function(i,a){if(i)n(i);else{e.mediaType===k.PHOTO&&w.trigger(S.PHOTO_UPLOADED),e.mediaType===k.VIDEO&&(s.getUser().getVideoCount()>0||f.getInstance().invalidateAll()),E.trigger();var o=a.getAlbum();t(o)}}).request()})},MediaType:k,EVENTS:S});e.exports=w},function(e,t,i){"use strict";var n=i(100),a=i(155),o=i(129),s=i(103),r=i(146),l=i(113),c=i(103).navigate,u=i(2871),d=i(128),h=i(124),p=i(111),m=i(150),g=i(142).getCurrentPage,_=i(102),f=i(2872),v=i(215),E=i(516),b=i(101),y=b.ClickButtonEvent,k=b.ViewSocialVerifiedProfileEvent,S=b.ClickEvent,w="verification",C=p("REFRESH","OPTION_VERIFIED"),T=o.extend({methods_:null,construct:function(){T._super.construct.apply(this,arguments),this.parent=this.createElement()},init:function(){this.onAuthError_=this.onAuthError_.bind(this),this.onRequestAccess_=this.onRequestAccess_.bind(this)},onStart:function(){T._super.onStart.apply(this,arguments),m.on(m.EVENTS.AUTH_ERROR,this.onAuthError_),v.on(v.ACTIONS.SUCCESS,this.onSuccess_,this),v.on(v.ACTIONS.FAIL,this.onFail_,this);var e=this.getView(w);e&&e.hideLoading();var t=m.getStoredAuthData();t&&t.startVerification&&(t.provider&&(t.provider=a(t.provider)),v.setVerified({destination:t.destination},t),m.removeStoredAuthData())},onStop:function(){T._super.onStop.apply(this,arguments),this.methods_=this.ownMethods_=this.autoShowMethod_=null,m.off(m.EVENTS.AUTH_ERROR,this.onAuthError_),v.off(v.ACTIONS.SUCCESS,this.onSuccess_,this),v.off(v.ACTIONS.FAIL,this.onFail_,this)},onParametersUpdate:function(){var e=this,t=this.getParameter("verificationMethods"),i=this.getParameter("layout");if(!t)return this.isEmpty=!0,null;if(this.methods_=t.getMethods(),this.ownMethods_=this.getParameter("ownVerificationMethods")||this.methods_,this.getParameter("isOwnProfilePreview")&&(this.methods_=this.methods_.filter(function(e){return e.getIsConfirmed()})),this.isEmpty=!this.methods_.length,this.isEmpty)return null;var a=this.getView(w);if(null===a&&(a=this.registerView(w,new f)).on(f.ACTIONS.CLICK,this.onClick_,this).on(f.ACTIONS.REFRESH,this.trigger.bind(this,C.REFRESH)).appendTo(this.parent),v.registerProviders(this.ownMethods_),a.update(this.methods_,t.getVerificationStatus(),i,this.getParameter("allowConfigure"),this.getParameter("hideMessage")),this.autoShowMethod_){var o=n.findIndex(this.methods_,function(t){if(e.autoShowMethod_.getType()===t.getType()){if(!e.autoShowMethod_.hasExternalProviderData()&&!t.hasExternalProviderData())return!0;if(e.autoShowMethod_.hasExternalProviderData()&&t.hasExternalProviderData())return e.autoShowMethod_.getExternalProviderData().getType()===t.getExternalProviderData().getType()}});n.isNumber(o)&&this.methods_[o].hasAccessRequestPromo()&&this.showAccessPopup_(o),this.autoShowMethod_=null}},onClick_:function(e){var t=e.index,i=e.trackingIndex;if(!this.methods_)return null;if(!l.isLoggedIn())return c("landing"),!1;!function(e){_.track(S,{position:e,element:31})}(i);var n=this.methods_[t],a=5===n.getType();if(this.trackVerificationOptionClick_(n),a)v.verifyByPhoto();else{var o=n.getIsConfirmed(!1),s=n.getExternalProviderData();this.getParameter("isOwnProfile")?o?this.getParameter("allowConfigure")&&n.hasAccessRestrictions()&&v.configure(n.getType(),s&&s.getType()):this.verify_(n):n.hasAccessRequestPromo()?this.showAccessPopup_(t):n.hasExternalAccountUrl()&&(window.open(n.getExternalAccountUrl(),"_blank"),this.trackViewSocialVerifiedProfileEvent_(n,!1))}},onSuccess_:function(e){this.getView(w).hideLoading(),this.trigger(C.OPTION_VERIFIED,e)},onFail_:function(e){var t=this.getView(w);t&&t.hideLoading(),h.showNotification({type:h.TYPES.ERROR,text:e}),this.trigger(C.REFRESH)},onAuthError_:function(){var e=this.getView(w);e&&e.hideLoading()},verify_:function(e){var t=this,i=e.getExternalProviderData(),n=this.getParameter("verificationMethods"),a=this.getParameter("user"),o={screenName:g().getScreenName(),destination:this.getParameter("destination"),context:this.getParameter("context"),methodType:e.getType(),providerType:i&&i.getType(),isForced:n.getIsForced(),isNotification:n.getIsNotification(),verificationMethod:e,verifyForUser:a&&a.getUserId?a.getUserId():null};this.getView(w).showLoading(),v.verify(o),d.getInstance().once("invalidated",function(i){i.all||-1===i.keys.indexOf(l.getUserId())||(t.autoShowMethod_=e)})},showAccessPopup_:function(e){var t=this.getView("popup");t||(t=this.registerView("popup",new E).on(E.ACTIONS.NEXT,this.onRequestAccess_).on(E.ACTIONS.DISMISS,this.onRequestAccessDismiss_)),this.index_=e,t.update({accessRequest:!0,method:this.methods_[e],user:this.getParameter("user")})},onRequestAccess_:function(){var e,t=this,i=this.methods_[this.index_],a=i.getAccessRequestPromo(),o=this.getParameter("user").getUserId();switch(a.getOkAction()){case 63:d.getInstance().invalidate(o),s.navigate(r.getRouteFromRedirectPage(a.getRedirectPage())),e=77;break;case 64:u.getInstance().request(i,o).then(function(){d.getInstance().invalidate(o),!Number(o)&&o.length<20&&t.log.error("WRONG USER ID: ".concat(o," in onRequestAccess_")),s.navigate("messages",!1,{id:o})}),e=78;break;case 13:this.verify_(n.find(this.ownMethods_,function(e){if(i.getType()===e.getType()){if(!i.hasExternalProviderData()&&!e.hasExternalProviderData())return!0;if(i.hasExternalProviderData()&&e.hasExternalProviderData())return i.getExternalProviderData().getType()===e.getExternalProviderData().getType()}})),e=79}_.track(y,{button_name:e,screen_name:15})},onRequestAccessDismiss_:function(){_.track(y,{button_name:42,screen_name:15})},trackViewSocialVerifiedProfileEvent_:function(e,t){var i=this.getParameter("user").getUserId();_.track(k,{verified_social_network:v.createHotPanelVerificationMethod(e),access_request_sent:t,activation_place:10,encrypted_user_id:i})},trackVerificationOptionClick_:function(e){var t=v.getVerificationHotPanelElement(e);t&&_.track(S,{parent_element:299,element:t})}},"VerificationOptions");T.EVENTS=C,e.exports=T},,,,function(e,t,i){"use strict";var n=i(3)(i(144)),a=i(98),o=i(542),s=i(543),r=i(120),l=r.P1,c=r.P3;e.exports=function(e){var t=e.name,i=e.media,r=e.label,u=e.value,d=e.valueColor,h=e.isLoading,p=e.onClick,m=e.dataQa;return a.createElement("div",(0,n.default)({className:"own-profile-grid__item","data-qa":"own-profile-item-".concat(t),onClick:h?null:p},m),h?a.createElement("div",{className:"own-profile-grid__item-media"},a.createElement(o,null)):a.createElement("div",{className:"own-profile-grid__item-media","data-qa":"own-profile-item-media"},i),h?a.createElement("div",{className:"own-profile-grid__item-content"},a.createElement(s,null)):a.createElement("div",{className:"own-profile-grid__item-content"},a.createElement("div",{className:"own-profile-grid__item-label","data-qa":"own-profile-item-label"},a.createElement(c,{dangerous:!0},r)),a.createElement("div",{className:"own-profile-grid__item-value ".concat(d),"data-qa":"own-profile-item-value"},a.createElement(l,{dangerous:!0},u))))}},function(e,t,i){"use strict";var n=i(98),a=i(411);e.exports=function(){return n.createElement("div",{className:"view-loading-mask"},n.createElement("div",{className:"view-loading-centre"},n.createElement("div",{className:"view-loading-container"},n.createElement(a,{size:"large",color:"dark"}))))}},function(e,t,i){"use strict";function n(){y=h.getInstance("GifsModel"),S=p.getLogger("GifsModel")}function a(e){var t=r(e.providerType),i=(e.id||e.ids||e.query||"").trim(),n=null;return n=e.query&&i?d.GIF_API_REQUEST_TYPE.SEARCH:(e.id||e.ids)&&i?d.GIF_API_REQUEST_TYPE.SEARCH_BY_ID:d.GIF_API_REQUEST_TYPE.DEFAULT,d.getGifApiKeys(t,n,i)}function o(e){return new Promise(function(t,i){u.ajax({dataType:"json",fail:i,success:t,url:e})})}function s(e){var t=y.get(e);return t?t instanceof m||t instanceof g?t:t.image?m.fromJSON(t):g.fromJSON(t):null}function r(e){return(e=Number(e))&&_.isValid(e)?e:E}function l(e){for(var t in b)delete b[t];return S.error(e),Promise.reject(new Error(e))}function c(e,t){return new g(e,r(t.providerType))}var u=i(25),d=i(2997),h=i(200),p=i(125),m=i(385),g=i(2999),_=i(105).GifProviderType,f={},v=100,E=1,b={},y=null,k=null,S=null,w=null;n.prototype={cacheGif:function(e){return y.put(e.id,e,1728e5,!1),e},cacheGifCollection_:function(e,t){return t.length<3?e:(y.put(t,e,6e5,!0),e)},get:function(e){var t=(e=e||{}).query||"empty_request",i=s(t);return i?Promise.resolve(i):b[t]?b[t]:(b[t]=o(a(e)).then(function(i){var n=c(i,e);return function(e,t){return t instanceof m?k.cacheGif(t):void(t instanceof g&&k.cacheGifCollection_(t,e))}(t,n),delete b[t],n}).catch(l),b[t])},getById:function(e){var t=s((e=e||{}).id);return t?Promise.resolve(t):function(e){if(f[e.providerType]||(f[e.providerType]={}),!f[e.providerType][e.id]){var t=new Promise(function(t,i){f[e.providerType][e.id]={resolve:t,reject:i}});f[e.providerType][e.id].promise=t}return clearTimeout(w),w=setTimeout(function(){var e=function(e){var t,i=Object.keys(f[e]);(t={ids:i,providerType:r(e)},o(a({ids:t.ids.join(","),providerType:t.providerType})).then(function(e){var i=c(e,t);return i.results.forEach(function(e){return k.cacheGif(e)}),i}).catch(l)).then(function(t){t.results.forEach(function(t){var i=f[e][t.id];i&&(i.resolve(t),delete f[e][t.id])})}).catch(function(t){for(var i in f[e])f[e][i].promise.reject(t),delete f[e][i]})};for(var t in f)e(t)},v),f[e.providerType][e.id].promise}(e).catch(l)}},e.exports={getInstance:function(){return k||(k=new n),k}}},,function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r=i(562),l=i(120).P1,c={direction:o.oneOf(["in","out"]).isRequired,isContinuation:o.bool,nesting:o.oneOf(["top","middle","bottom"]),content:o.node,extra:o.node,actions:o.shape({primary:o.string,secondary:o.string,onClickPrimary:o.func,
onClickSecondary:o.func}),isLoading:o.bool,onClick:o.func},u=function(e){var t,i=e.direction,o=e.isContinuation,c=e.nesting,u=e.content,d=e.extra,h=e.actions,p=e.isLoading,m=e.onClick,g=s((t={"csms-chat-bubble":!0},(0,n.default)(t,"csms-chat-bubble--".concat(i),!0),(0,n.default)(t,"csms-chat-bubble--continuation",o),(0,n.default)(t,"csms-chat-bubble--nested-".concat(c),c),(0,n.default)(t,"csms-chat-bubble-complex",!0),t));return a.createElement("div",{className:g},a.createElement("div",{onClick:m,className:"csms-chat-bubble-complex__content"},u,p?a.createElement(r,null):null),d?a.createElement("div",{className:"csms-chat-bubble-complex__footer"},a.createElement("div",{className:"csms-chat-bubble-complex__extra","data-qa":"chat-message-extra"},d)):null,h?a.createElement("div",{className:"csms-chat-bubble-complex__footer"},a.createElement("div",{className:"csms-chat-bubble-complex__actions"},h.primary?a.createElement("div",{onClick:h.onClickPrimary,className:"csms-chat-bubble-complex__action csms-chat-bubble-complex__action--primary","data-qa":"chat-message-action-primary"},a.createElement(l,{ellipsis:!0},h.primary)):null,h.secondary?a.createElement("div",{onClick:h.onClickSecondary,className:"csms-chat-bubble-complex__action csms-chat-bubble-complex__action--secondary","data-qa":"chat-message-action-secondary"},a.createElement(l,{ellipsis:!0},h.secondary)):null)):null)};u.propTypes=c,u.defaultProps={isContinuation:!1,isLoading:!1},e.exports=u},,function(e,t,i){"use strict";var n=i(158);e.exports=function(){function e(e){o.visible!==e&&(o.visible=e,o.visible?(a.trigger(),t.trigger()):(a.trigger(),i.trigger()))}var t=n(),i=n(),a=n(),o={visible:!1,setVisible:e,show:function(){e(!0)},hide:function(){e(!1)},onChange:a.subscribe,unsubscribeFromChange:a.unsubscribe,onShow:t.subscribe,unsubscribeFromShow:t.unsubscribe,onHide:i.subscribe,unsubscribeFromHide:i.unsubscribe};return o}},function(e,t,i){"use strict";var n=i(100);e.exports=function(e,t){var i=n.keys(t),a=n.keys(e),o=n.difference(i,a),s=n.difference(a,i),r=n.pick(t,o),l=n.pick(e,s),c=n.omit(e,s),u={},d=!1;if(n.each(c,function(e,i){n.isEqual(t[i],e)||(d=!0,u[i]=t[i])}),o.length>0||s.length>0||d)return{added:r,removed:l,changed:u}}},function(e,t,i){"use strict";var n=i(25),a=i(103),o=i(99),s=i(146),r=i(141),l=i(125),c=i(3187),u=i(3188),d=i(586),h=i(3189),p=i(587),m=i(3190),g=[{test:/\{\{feedback_url\}\}/,path:"feedback"},{test:/\{\{guidelines_url\}\}/,path:"guidelines"},{test:/\{\{privacy_url\}\}/,path:"privacy"},{test:/\{\{terms_url\}\}/,path:"terms"},{test:/#legal-document-page\/terms/,path:"terms"},{test:/#legal-document-page\/privacy/,path:"privacy"},{test:new RegExp("http(s)?://".concat(window._partner_id,".*?/feedback")),path:"feedback"},{test:new RegExp("http(s)?://".concat(window._partner_id,".*?/guidelines")),path:"guidelines"},{test:new RegExp("http(s)?://".concat(window._partner_id,".*?/terms")),path:"terms"}],_={"faq-for-parents":h,guidelines:d,privacy:u,prize_draw:m,safetytips:p,terms:c},f=/^http/;e.exports={openLink:function(e){e.preventDefault();var t=e.target,i=t.getAttribute("href"),n=t.target,o=Boolean(s.getRoute(i));n||!o?window.open(i,n||"_self"):o&&a.navigate(i)},formatLink:function(e){var t=e.getAttribute("href");g.forEach(function(e){var i=e.test,n=e.path;i.test(t)&&(t=n)});var i=function(e){return f.test(e)}(t);if(t||i)i?e.target="_blank":e.href=t;else{var a=n(e);l.getLogger("LegalDocumentUtil").warn('It was not possible to map the href "'.concat(t,'" provided by server.')),a.replaceWith(r.createElement("span",a.text()))}},documentTitles:{guidelines:o.get(448),privacy:o.get(193),terms:o.get(194),"faq-for-parents":o.get(260)},getModelFromRouteName:function(e){return _[e]}}},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(121),o=i(146),s=i(103),r=i(3257),l=i(131),c=i(420),u=i(342),d=u.openLink,h=u.documentTitles,p=u.getModelFromRouteName,m=a.extend({document:"",init:function(){m._super.init.apply(this,arguments),this.registerView("view",new c).on("openLink",d)},open:function(e){var t=e.parameters;m._super.open.apply(this,arguments),this.document=t.document||o.extractRouteName(s.getUrl()),this.element.attr("data-qa-page",this.document),t.noNavigationBar&&this.getView(a.VIEWS.NAVIGATION_BAR).hide()},reset:function(){this.getView("view").update({content:""}),this.getView(a.VIEWS.NAVIGATION_BAR).update({title:""})},onStart:function(){m._super.onStart.apply(this,arguments),this.reset(),this.getView("view").update({loading:!0}),this.getView("view").appendTo(this.parent)},onReady:function(){m._super.onReady.apply(this,arguments),this.displayDocument_()},displayDocument_:function(){var e=this,t=p(this.document);t?t.getInstance().get().then(function(t){var i=(0,n.default)(t,1)[0];e.onDocumentReady_(null,{html:i.getValue()})}).catch(function(){e.onDocumentReady_(!0,null)}):r.getInstance().get({document:this.document,platform:l.getQueryParameters().platform}).then(function(t){e.onDocumentReady_(null,{html:t.html})}).catch(function(){s.back()})},onDocumentReady_:function(e,t){e?s.back():(this.getView("view").update({content:t.html,target:this.getParameter("target")||null}),this.getView(a.VIEWS.NAVIGATION_BAR).update({title:h[this.document]}))},onParametersUpdate:function(){this.getView(a.VIEWS.NAVIGATION_BAR).enable(),this.displayDocument_()}},"LegalDocument");e.exports=m},function(e,t,i){"use strict";function n(e){this._storageKey="SimpleCache::".concat(e),this._storedObject=null}var a=i(100),o=i(178);a.extend(n.prototype,{getAll:function(){return this._storedObject||(this._storedObject=o.getObject(this._storageKey)||{}),this._storedObject},setAll:function(e){o.saveObject(this._storageKey,e)},get:function(e){return this.getAll()[e]},set:function(e,t){var i=this.getAll();i[e]=t,this.setAll(i)},remove:function(e){var t=this.getAll();delete t[e],a.isEmpty(t)?o.remove(this._storageKey):this.setAll(t)},removeAll:function(){this.setAll({})}}),e.exports=n},function(e,t,i){"use strict";function n(e){return{age:e.getAge(),gender:e.getGender(),gift:e.getDisplayImage(),id:e.getUserId(),isCrush:e.getIsCrush(),isMatch:e.getIsMatch(),message:e.getDisplayMessage(),name:e.getName(),src:k.getUserPhoto(e)}}function a(e){if(!e)return null;var t,i=e.getGoalProgress();return{buttons:(t=e,t.getButtons([]).map(function(e){var t=e.getRedirectPage();return{action:e.getAction(),clientSource:t&&t.getRedirectPage(),text:e.getText(),type:e.getType()}})),goal:i&&i.getGoal()||1,header:e.getHeader(),message:e.getMssg(),pictures:e.hasPictures()&&o(e)||[],progress:i&&i.getProgress()+1||1}}function o(e){var t=function(e){var t=e.getGoalProgress();return 0===t.getProgress()?t.getGoal()-1:t.getGoal()-t.getProgress()}(e),i=e.getPictures().map(function(e){return s(e.getDisplayImages(),null,e.getBadgeType())});if(e.getGoalProgress().getProgress())for(var n=0;n<t;n++)i.push(s(null,null,"other"));else i.push(s(null,"+".concat(t)));return i}function s(e,t,i){return{text:t,type:i||2,src:e}}function r(e){return(e&&e.getPromoBanners([])||[]).find(function(e){return 13===e.getPromoBlockPosition()&&166===e.getPromoBlockType()})}function l(e){S.track(P,{encrypted_user_id:e.toPersonId,length:1===e.messageType?e.message.length:0,message_first:!0,send_giphy:36===e.messageType,send_location:!1,send_photo:19===e.messageType,send_sticker:23===e.messageType})}function c(e,t){var i=e.id;C.users=C.users.filter(function(e){return e.id!==i});var n=C.explanationPromoBanner;if(n){var a=C.goal,o=s(e.src,null,t?37:23),r=n.pictures,l=C.progress;if(r[l-1]=o,1===l)for(n.buttons[0].text=f.get(556),r.length=1;l<a;)l++,r.push(s(null,null,"other"))}u(),B.trigger(C,t)}function u(e){var t=C.progress,i=C.explanationPromoBanner;C.progress=e?t-1:t+1,i&&(i.progress=C.progress)}var d=i(3)(i(4)),h=i(122),p=i(140),m=i(157),g=i(158),_=i(103),f=i(99),v=i(113),E=i(124),b=i(207),y=i(208),k=i(131),S=i(102),w=18e5,C=null,T=null,P=i(101).SendMessageEvent,N=i(105),I=N.PromoBannerStats,x=N.RedirectPage,A=N.ServerAppStats,O={folderId:0,activityFilter:10,userFieldFilter:(new(0,N.UserFieldFilter)).setProjection([210,705,700,230,583,580,200,340])},V=g(),R=g(),B=g();v.on(v.EVENTS.LOGOUT,function(){T=null}),e.exports={onDismissExplanation:V,onGameEnd:R,onStatusChange:B,acceptFinal:function(e){var t=e.buttons[0],i=t.action,n=t.clientSource,a=(new x).setRedirectPage(n);T=null,y.handleAction((new b).setAction(i).setRedirectPage(a))},dismissFinal:function(){var e=(new A).setPromoBannerStats((new I).setEvent(4).setContext(141).setPromoBlockType(166).setPromoBlockPosition(13));new h(278,e).request(),T=null,_.back()},dismissExplanation:function(){V.trigger(C)},endGame:function(){T=null,R.trigger(C)},isEndOfGame:function(){return C&&C.finalPromoBanner?141!==C.finalPromoBanner.buttons[0].clientSource:null},getMiniGameConnections:function(){return T||(T=p.getInstance().fetch(O).then(function(e){return function(e){return setTimeout(function(){T=null},w),C=function(e){var t,i=a(((t=e)&&t.getPromoBanners([])||[]).find(function(e){return 13===e.getPromoBlockPosition()&&165===e.getPromoBlockType()})),o=e.getSection()[0].getUsers([]).map(n);return{explanationPromoBanner:i,finalPromoBanner:a(r(e)),goal:i?i.goal:o.length,progress:i?i.progress:1,users:o}}(e)}((0,d.default)(e,1)[0])}).catch(function(){throw T=null,new Error("Error while fetching mini game data from server.")})),T},skipUser:function(e){return p.getInstance().removeUsers({folderId:O.folderId,ids:[e.id],listSectionType:22}),c(e,!1),this.getCurrentUser()},sendTextMessage:function(e,t){return t.context=141,m.send(t.toPersonId,t).then(l).catch(function(){!function(e){var t=1!==C.progress,i=C.users;t?i.unshift(e):i.push(e),u(!0);var n=C.explanationPromoBanner;if(n)if(t)n.pictures=[s(e.src,null,1),s(null,"+".concat(i.length-1))];else{var a=n.pictures;a.push(s(null,null,"other")),n.pictures=a.filter(function(t){return t.src!==e.src})}}(e),E.showNotification({type:E.TYPES.ERROR})}),c(e,!0),this.getCurrentUser()},getCurrentUser:function(){return C.users[0]},getExplanation:function(){return this.getMiniGameConnections().then(function(e){return e.explanationPromoBanner})},getFinal:function(){return this.getMiniGameConnections().then(function(e){return e.finalPromoBanner})}}},function(e,t,i){"use strict";var n,a=i(100),o=i(135),s=i(113),r=i(128),l=i(273),c=i(105),u=c.InterestsUpdate,d=c.ServerInterestsGet,h=c.String,p=c.Interest,m=o.extend({name:"Interests",getRequestMessageType:233,getResponseMessageType:234,setRequestMessageType:236,setResponseMessageType:237,set:function(e,t,i){var n=this;return r.getInstance().get({id:s.getUserId(),clientSource:61}).spread(function(o){var s=o.getInterests([]).length;l.trackInterests(s,e?e.length:0,t?t.length:0);var r=new u;return i&&r.setSource(i),a.isArray(e)&&r.setAdd(a.map(e,function(e){return Number(e)})),a.isArray(t)&&r.setRemove(a.map(t,function(e){return Number(e)})),m._super.set.call(n,r)})},get:function(e,t,i){var n=new d;return e&&n.setGroupId(Number(e)),a.isNumber(t)&&n.setOffset(t),a.isNumber(i)&&n.setLimit(i),m._super.get.call(this,n)},getGroups:function(){return this.get_(231,232,null)},search:function(e){if(!a.isString(e)||e.length<1)return window.Proomise.reject(e);var t=(new h).setValue(e);return this.get_(235,234,t)},create:function(e){return e instanceof p?this.get_(238,239,e):Promise.reject(new Error("expected Badoo.bma.Interest"))},shouldCache_:function(e){return 238!==e&&236!==e}},"Interests");m.getInstance=function(){return n||(n=new m)},e.exports=m},,function(e,t,i){"use strict";function n(e){e(o)}var a,o,s=i(158),r=[],l=s();e.exports={onChange:l.subscribe,handleClientSampleFaces:function(e){o=e,a=!0,r.forEach(n),r=[],l.trigger(e)},getClientSampleFaces:function(){return o},getClientSampleFacesWhenAvailable:function(e){a?n(e):r.push(e)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(98),a=i(137),o=i(133),s=i(130),r=i(138);e.exports=i(108)("InterfaceLanguage",function(e){return n.createElement(o,null,e.navigationBar?n.createElement(r,null,n.createElement(a,{actions:e.navigationBar.actions,title:e.navigationBar.title})):null,n.createElement(s,null,n.createElement("div",{className:"settings-data-entry"},e.languages?n.createElement("ul",{className:"poll poll--radio"},e.languages.map(function(e){return n.createElement("li",{className:"poll__item",key:e.id},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-language-input",type:"radio",name:"relationship",value:e.id,checked:e.selected?"checked":void 0,readOnly:!0}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label is-bidi"},n.createElement("a",{href:"/".concat(e.uri)},e.name))))})):null)))})},,function(e,t,i){"use strict";function n(e){f(this),this.options_=e,(this.uiRequest_=e.request).method===S.SHARE?this.context_=3:this.context_=1,this.returnRoute_=s.isString(e.returnRoute)?e.returnRoute:h.getUrl(),this.referrer_=y.isValid(e.referrer)?e.referrer:null,this.notificationId_=e.notificationId||null,this.inviteFlow_=e.inviteFlow}function a(e){o(".fb_dialog.loading").toggleClass("hidden",!e)}var o=i(25),s=i(100),r=i(122),l=i(139),c=i(113),u=i(179),d=i(99),h=i(103),p=i(111),m=i(125),g=i(150),_=i(374),f=i(148),v=i(266).getInstance(),E=i(105),b=E.String,y=E.ClientSource,k=m.getLogger("FbUiRequests"),S={APP_REQUESTS:"apprequests",SHARE:"share"},w=p("FINISH","ERROR","CANCEL","NEEDS_LOGIN"),C=n.ERRORS={PROVIDER_NOT_FOUND:3,AUTH_ERROR:4,IMPORT_ERROR:5};s.extend(n.prototype,l,{appRequestMessage_:null,referrer_:null,notificationId_:null,importId_:null,options_:null,context_:null,uiRequest_:null,loginStatus_:null,permissions_:null,returnRoute_:"",complete_:function(){this.off(w.FINISH),this.off(w.ERROR),this.off(w.CANCEL),v.restartHistory()},send:function(e){var t=this;e=e||{},_.tryToLogin().then(function(i){e.status=i.status,t.send_(e)}).catch(function(e){t.trigger(w.ERROR,e)})},send_:function(e){return e.shareEvenIfNotLoggedIn||c.isLoggedIn()?void("connected"===e.status?this.performAction():this.trigger(w.CANCEL)):null},performAction:function(){switch(this.uiRequest_.method){case S.APP_REQUESTS:this.beginImport_();break;default:this.uiRequest_.mobile_iframe=!0,this.performUiRequest(this.onFbShare_)}},cancel:function(){this.acknowledgeCancellation_()},acknowledgeCancellation_:function(){if(s.isString(this.notificationId_)){var e=(new b).setValue(this.notificationId_);new r(159,e).request()}},performUiRequest:function(e){var t=this;e=s.isFunction(e)?e:s.identity;var i=function(){a(!1),u.trigger(u.FB_MODAL_CLOSE);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];e.apply(t,n)};_.get().then(function(n){n.getLoginStatus(function(o){o&&"connected"===o.status?(v.pauseHistory(),u.trigger(u.FB_MODAL_OPEN),a(!0),n.ui(t.uiRequest_,i)):e()})})},onFbShare_:function(e){var t=this.uiRequest_.method===S.SHARE,i=window.event&&window.event.data&&-1===window.event.data.indexOf('"cb":');(t||e&&e.post_id)&&!i?this.trigger(w.FINISH):this.trigger(w.CANCEL),this.complete_()},onAppRequest_:function(e){return s.isArray(e)&&(e={request:"-",to:e}),e&&e.request&&e.to?void this.onFinishAppRequest_(e):(this.acknowledgeCancellation_(),this.trigger(w.CANCEL),void this.complete_())},onFinishAppRequest_:function(e){return e.to&&0!==e.to.length?void g.finishFriendsImport(this.importId_,e.to,9,e.request).then(this.onAddFriends_):(this.acknowledgeCancellation_(),this.trigger(w.CANCEL),void this.complete_())},onAddFriends_:function(e){this.trigger(w.FINISH,e),this.complete_()},onError_:function(e){this.isWaitingForImport_=null,e||(e=C.AUTH_ERROR),this.acknowledgeCancellation_(),this.trigger(w.ERROR,e),this.complete_()},attemptImport:function(){return this.isWaitingForImport_?null:void this.beginImport_()},beginImport_:function(){this.isWaitingForImport_=!0,g.startImport({providerContext:this.context_,providerType:1,clientSource:this.referrer_,referrer:this.referrer_,returnRoute:h.getUrl(),inviteFlow:this.inviteFlow_}).then(this.onSuccessImport_,this.onError_.bind(this,C.IMPORT_ERROR))},onSuccessImport_:function(e){return!!e&&(this.isWaitingForImport_=null,this.importId_=e.getImportId(),this.performUiRequest(this.onAppRequest_),void 0)}}),n.METHODS=S,n.EVENTS=w,n.sendInviteRequest=function(e){return new Promise(function(t,i){function a(){o(4),i(new Error("FB Invite request failed"))}function o(e){r.then(function(t){return g.finishImport(t,null,e)}).catch(function(){return k.error("Failed to report FB import")})}var s={id:"Invites",inviteFlow:e.inviteFlow,request:{method:n.METHODS.APP_REQUESTS,message:d.get(141)},referrer:e.inviteContext},r=g.startImport({providerContext:1,providerType:1,providerId:e.providerId,inviteFlow:e.inviteFlow,importFlow:2}).then(function(e){return e.getImportId()});new n(s).on(n.EVENTS.FINISH,function(){o(3),t()}).on(n.EVENTS.ERROR,a).on(n.EVENTS.CANCEL,a).send({popState:!0})})},e.exports=n},function(e,t,i){"use strict";function n(e,t){if(t){var i=t.getButtons(),n=i.find(function(e){return 69===e.getAction()}),a=i.find(function(e){return 77===e.getAction()});return{photoId:e,header:t.getHeader(),message:t.getMssg(),addVideoButton:n.getText(),dismissButton:a&&a.getText()}}}function a(e){return"".concat(Math.round(e.centerPercentages.x),"% ").concat(Math.round(e.centerPercentages.y),"%")}function o(e){var t=e.getAttribute("data-src");t&&(p(e).parent().find(".js-item-photos-loader").removeClass("is-hidden"),b.preloadImage(t).then(function(t){var i=(0,c.default)(t,1)[0];e.style.backgroundImage="url('".concat(i,"')"),p(e).parent().find(".js-item-photos-loader").remove()}))}function s(e){if(e&&e.level)switch(e.level){case 1:case 2:return m.get(297);case 3:return m.get(298);case 5:return m.get(170)}}var r,l=i(3),c=l(i(4)),u=l(i(168)),d=l(i(107)),h=i(100),p=i(25),m=i(99),g=i(162),_=i(109),f=i(240),v=i(111),E=i(141),b=i(131),y=i(203),k=i(2838),S=i(2843),w=i(105).PromoBlock,C=i(2844),T={CONTAINER_VIEW:"container",STATUS_VIEW:"status"},P=v("PLAY_BUTTON_CLICKED","SCROLL_BOTTOM_EDGE","SCROLL_CHANGE","SLIDE_TYPE_CHANGED","VIDEO_BLOCKER_DISMISSED","VIDEO_BLOCKER_SHOWN"),N=v("ADD_PHOTOS","ADD_VIDEO","CLICK","CRUSH","DELETE_PHOTO","MAKE_PRIVATE","MENU_CLICK","PLAY_VIDEO","REPLACE","REQUEST_ACCESS_PRIVATE_PHOTOS","SEND_GIFT","SET_PROFILE","SHARE","SHOW_PRIVATE_PHOTOS","UPLOAD_EXTERNAL_PHOTOS"),I={PLACEHOLDER_PHOTO:"PLACEHOLDER_PHOTO",PRIVATE:"PRIVATE",PUBLIC:"PUBLIC",UPSELL:"UPSELL"},x=i(397),A=(r={},(0,d.default)(r,1,"facebook"),(0,d.default)(r,12,"instagram"),r),O=_.extend({galleryTemplate_:C,photos_:null,countItemsPerRow:0,showActions_:null,volume_:0,videoIsBeingPlayed:!1,isPlayPromiseSupported:!1,videoElements:[],videoElementsPresent:function(){return this.videoElements.length>0},initialButtonsCount_:0,currentSlideIndex_:0,stickyScroll_:null,upSell_:null,events:{"click .js-add-photos":"addPhotos_","click .js-item-photos":"viewPhoto_","click .js-video":"playbackPause","click .js-video-play":"playbackStart","click .js-video-sound-action":"toggleVolume_","click .js-private-photos-action":"viewPrivatePhoto_","click .js-external-photo-blocker-action":"onExternalPhotoBlockerAction_","click .js-add-video":"addVideo_","click .js-dismiss-video-blocker":"dismissVideoBlocker_","click .js-upsell-gift-action":"onUpSellAction_","click .js-upsell-crush-action":"onCrushUpsellAction_"},init:function(){this.carouselOverlay_=E.satisfy("div.slider-gallery-overlay.is-hidden"),this.$carouselOverlay_=p(this.carouselOverlay_),g.on(g.EVENTS.ORIENTATION_CHANGE,this.recalculateLayout_,this),g.on(g.EVENTS.RESIZE,this.recalculateLayout_,this),this.externalPhotoBlockers_=[],this.items=[],this.photos_=[],this.privateOverlayData_={}},getStatusView_:function(){return this.getChildView(T.STATUS_VIEW)||this.registerView(T.STATUS_VIEW,new k)},reset:function(){this.getStatusView_().reset(),this.carouselOverlayContent_=null,this.currentSlideIndex_=0,this.externalPhotoBlockers_.length=0,this.photos_.length=0,this.items.length=0,this.showPrivatePhotosBlocker_=!1,this.render_()},recalculateLayout_:function(){this.isEnabled()?(this.layoutNeedsUpdating_=!1,this.updateLayout()):this.layoutNeedsUpdating_=!0},scrollToSlide:function(e){this.currentSlideIndex_!==e&&(this.stickyScroll_.selectChild(e),this.setCurrentSlideIndex_(e))},scrollToPhoto:function(e){var t=e.getId(),i=h.findIndex(this.photos_,function(e){return e.photo.getId()===t});this.scrollToSlide(i)},scrollToItem:function(e){this.scrollToSlide(e)},getSlideType:function(e){var t=this.getItem(e);return t?t.type===x.VIDEO&&t.videoBlockerShown?x.VIDEO_BLOCKER:t.type||null:null},getItem:function(e){return this.items&&this.items[e]||null},getPhotoById_:function(e){return h.find(this.photos_,function(t){return t.photo.getId()===e})},setCurrentSlideIndex_:function(e){this.currentSlideIndex_!==e&&(this.currentSlideIndex_=e,this.onCurrentSlideChange_())},getCurrentSlideIndex:function(){return this.currentSlideIndex_},getCurrentPhoto:function(){return this.photos_[this.getCurrentSlideIndex()]},getPhotoByIndex:function(e){return this.photos_[e]},onCurrentSlideChange_:function(){this.getStatusView_().setPosition(this.currentSlideIndex_),this.loadImages(),this.updateCarouselOverlayVisibility_(),this.playbackPause()},onGalleryScroll_:function(e){var t=e.index,i=this.getCurrentSlideIndex()>t?4:5;this.setCurrentSlideIndex_(t),this.trigger(P.SCROLL_CHANGE,t,i)},onEnable:function(){this.updateLayout()},updateLayout:function(){this.stickyScroll_&&this.stickyScroll_.updateLayout()},initStickyScroll_:function(){this.stickyScroll_&&(this.removeView("sticky-scroller"),this.stickyScroll_.off(S.EVENTS.SCROLL_TO_POSITION).off(S.EVENTS.SCROLL_TO_CHILD).off(S.EVENTS.SCROLL_ON_EDGE).off(S.EVENTS.SCROLL_TO_CHILD_END));var e=new S({el:this.$(".js-sticky-scroller")[0]}).on(S.EVENTS.SCROLL_TO_POSITION,this.onScrollToPosition_,this).on(S.EVENTS.SCROLL_TO_CHILD,this.onScrollToChild_,this).on(S.EVENTS.SCROLL_ON_EDGE,this.onScrollOnEdge_,this).on(S.EVENTS.SCROLL_TO_CHILD_END,this.onScrollToChildEnd_,this);this.stickyScroll_=this.registerView("sticky-scroller",e),this.stickyScroll_.setScrollCallback(this.onGalleryScroll_,this).setActiveStyleName("is-active"),this.isEnabled_&&this.stickyScroll_.enable()},onScrollOnEdge_:function(e){e===S.EDGE.BOTTOM&&this.trigger(O.EVENTS.SCROLL_BOTTOM_EDGE)},onScrollToPosition_:function(e){this.getStatusView_().setPosition(e)},onScrollToChild_:function(){this.getStatusView_().setIsAnimated(!0)},onScrollToChildEnd_:function(){this.getStatusView_().setIsAnimated(!1)},update:function(e){this.updateView_(e);var t=!1;return h.isObject(e.privatePlaceholderData)&&!h.isEqual(this.privateOverlayData_,e.privatePlaceholderData)&&(this.privateOverlayData_=e.privatePlaceholderData,t=!0),(this.updateViewAndGallery_(e)||e.isDirty)&&this.render_(),t&&this.updatePrivatePlaceholder_(),this.updateScroll_(),this},updateView_:function(e){void 0!==e.crushUpsellPointer&&(this.crushUpsellPointer_=e.crushUpsellPointer),void 0!==e.photoCoaching&&(this.photoCoaching_=e.photoCoaching),h.isBoolean(e.isOwnProfile)&&(this.isOwnProfile_=e.isOwnProfile),e.gender&&(this.gender_=e.gender),h.isArray(e.externalPhotoBlockers)&&(this.externalPhotoBlockers_=e.externalPhotoBlockers),e.type&&(this.type_=e.type),h.isBoolean(e.showAddButton)&&(this.initialButtonsCount_=1,this.showAddButton_=e.showAddButton),h.isNumber(e.currentSlideIndex)&&(this.currentSlideIndex_=e.currentSlideIndex)},updateViewAndGallery_:function(e){var t=!1;return void 0!==e.upSell&&this.upSell_!==e.upSell&&(this.upSell_=e.upSell,t=!0),this.allowAddVideo_!==e.allowAddVideo&&void 0!==e.allowAddVideo&&(this.allowAddVideo_=e.allowAddVideo,t=!0),this.showActions_!==e.showActions&&h.isBoolean(e.showActions)&&(this.showActions_=e.showActions,t=!0),this.orientation!==g.isLandscape()&&(this.orientation=g.isLandscape(),t=!0),this.showPrivatePhotosBlocker_!==e.showPrivatePhotosBlocker&&h.isBoolean(e.showPrivatePhotosBlocker)&&(this.showPrivatePhotosBlocker_=e.showPrivatePhotosBlocker,t=!0),function(e,t){if(!h.isArray(e))return!1;var i=t.length,n=e.length,a=i>0&&n>0&&t[0].photo.getId()!==e[0].photo.getId();return n!==i||a}(e.photos,this.photos_)&&(this.photos_=e.photos,t=!0,this.videoBlockersDisabled_=!1),(e.carouselOverlayContent||null===e.carouselOverlayContent)&&e.carouselOverlayContent!==this.carouselOverlayContent_&&(this.configureCarouselOverlay_(e),t=!0),t},render_:function(){var e=E.removeForEdit(this.el),t=this.createGalleryViews();this.$el.html(t),this.createVideoElements(),this.initStickyScroll_(),e()},updateScroll_:function(){var e=this.getStatusView_();this.isEnabled_&&!e.isEnabled()&&e.enable(),this.$el.find(".js-slider-gallery").append(e.el),this.stickyScroll_.updateLayout(),this.currentSlideIndex_=Math.min(this.currentSlideIndex_,this.stickyScroll_.getItems().length-1),this.stickyScroll_.selectChild(this.currentSlideIndex_),this.onCurrentSlideChange_(),e.update({items:this.items,position:this.currentSlideIndex_,width:this.stickyScroll_.getItems().length})},addPhotos_:function(){this.trigger(N.ADD_PHOTOS)},viewPhoto_:function(e,t){var i=p(t).data(),n=this.getCurrentSlideIndex();this.trigger(N.CLICK,Object.assign({photoIndex:n},i))},viewPrivatePhoto_:function(e,t){this.isOwnProfile_?this.trigger(N.SHOW_PRIVATE_PHOTOS):this.$el.find(".js-private-photos-button").hasClass("disabled")||(this.trigger(N.REQUEST_ACCESS_PRIVATE_PHOTOS,{level:this.privateOverlayData_.level,url:this.privateOverlayData_.url}),p(t).addClass("disabled"))},onExternalPhotoBlockerAction_:function(e,t){var i=p(t),n=Number(i.attr("data-external-provider-type"));this.trigger(N.UPLOAD_EXTERNAL_PHOTOS,{externalProviderType:n})},createGalleryViews:function(){var e,t=this.items,i=[],n=null,a=h.isNumber(this.carouselOverlayThreshold_)?this.carouselOverlayThreshold_+1:1/0,o=this.photos_.map(function(e){return{data:new f(e.photo),galleryPhoto:e}});o.length||o.push(I.PLACEHOLDER_PHOTO),o.splice.apply(o,[o.length,0].concat((0,u.default)(this.externalPhotoBlockers_))),this.upSell_&&!this.showPrivatePhotosBlocker_&&this.photos_.length&&!this.carouselOverlayContent_&&o.push(this.upSell_),this.showPrivatePhotosBlocker_&&!this.carouselOverlayContent_&&o.push(I.PRIVATE),t.length=0;for(var s=0;s<o.length;s++)n="string"==typeof(e=o[s])||e instanceof w?this.getBlockerSlide_(e):this.getPhotoSlide_(e,s,a--<=0),t.push(n),i.push({item:[n],id:n.id,active:0===s});return this.galleryTemplate_.render({isOwnProfile:this.isOwnProfile_,wrap:i})},onUpSellAction_:function(){this.trigger(N.SEND_GIFT)},onCrushUpsellAction_:function(){this.trigger(N.CRUSH)},getPrivatePhotoLexem:function(){return this.privateOverlayData_&&this.privateOverlayData_.privatePhotosCount?1===this.privateOverlayData_.privatePhotosCount?m.get(302):m.get(296,this.privateOverlayData_.privatePhotosCount):m.get(299)},updatePrivatePlaceholder_:function(){var e=this.privateOverlayData_&&this.privateOverlayData_.message,t=s(this.privateOverlayData_);this.$(".js-private-photos-label").text(this.getPrivatePhotoLexem()),this.$(".js-private-photos-message").toggle(Boolean(e)).text(e),this.$(".js-private-photos-button").toggle(Boolean(t)).text(t).toggleClass("disabled",3===this.privateOverlayData_.level).toggleClass("hidden",1===this.privateOverlayData_.level)},configureCarouselOverlay_:function(e){this.carouselOverlayContent_=e.carouselOverlayContent&&e.carouselOverlayContent.cloneNode(!0),this.carouselOverlay_.innerHTML="",this.carouselOverlayContent_&&this.carouselOverlay_.appendChild(this.carouselOverlayContent_),this.carouselOverlayThreshold_=e.carouselOverlayThreshold,this.updateCarouselOverlayVisibility_()},updateCarouselOverlayVisibility_:function(){if(this.shouldShowCarouselOverlay_()){var e=window.getComputedStyle(this.carouselOverlay_,null).getPropertyValue("opacity");e&&"0"!==e?b.onTransitionEnd(this.carouselOverlay_,this.showCarouselOverlay_):this.showCarouselOverlay_()}else this.carouselOverlayShown_&&this.hideCarouselOverlay_()},hideCarouselOverlay_:function(){var e=this;this.$carouselOverlay_.addClass("is-hidden"),this.carouselOverlayShown_=!1,b.onTransitionEnd(this.carouselOverlay_,function(){return e.$carouselOverlay_.remove()})},shouldShowCarouselOverlay_:function(){var e=this.getSlideType(this.getCurrentSlideIndex()),t=e===x.PHOTO||e===x.VIDEO||e===x.GRID;return this.carouselOverlayContent_&&this.currentSlideIndex_>this.carouselOverlayThreshold_&&t&&1===this.getItemsPerSlide_()},showCarouselOverlay_:function(){var e=this;this.$el.append(this.carouselOverlay_),this.carouselOverlayShown_=!0,requestAnimationFrame(function(){return e.$carouselOverlay_.removeClass("is-hidden")})},loadImages:function(){if(this.stickyScroll_){var e=this.stickyScroll_.getItems(),t=this.currentSlideIndex_;e&&e[t]?[e[t+1],e[t-1],e[t]].filter(Boolean).forEach(function(e){if(!e.loaded){e.loaded=!0;var t=e.el.querySelectorAll(".js-item-photos");Array.prototype.forEach.call(t,o)}}):y(this.$(".js-item-photos"))}},destroyVideoElements:function(){var e=this;if(this.videoElementsPresent()){if(this.videoIsBeingPlayed){this.playbackStopped();var t=this.videoElements.currentVideoElem;t&&(this.isPlayPromiseSupported?t.play().then(function(){return t.pause()}):t.pause())}this.videoElements.forEach(function(t){t.removeEventListener("playing",e.playbackStarted,!1),t.removeEventListener("pause",e.playbackStopped,!1)}),this.videoElements=[]}},createVideoElements:function(){var e=this;this.destroyVideoElements(),this.videoIsBeingPlayed=!1,this.videoElements=this.$(".js-video"),this.videoElementsPresent()&&(this.videoElements.forEach(function(t){t.addEventListener("playing",e.playbackStarted,!1),t.addEventListener("pause",e.playbackStopped,!1)}),this.setVolume_(this.volume_),this.togglePlaybackState_())},getVolume:function(){return this.volume_},playbackPause:function(){var e=this;this.videoIsBeingPlayed&&(this.playbackStopped(),this.isPlayPromiseSupported?this.videoElements.currentVideoElem.play().then(function(){return e.videoElements.currentVideoElem.pause()}):this.videoElements.currentVideoElem.pause(),this.trigger(N.PLAY_VIDEO,{id:this.playingVideo_.photo.getId(),played:!1}))},playbackStarted:function(){this.videoIsBeingPlayed=!0,this.togglePlaybackState_()},playbackStopped:function(){this.videoIsBeingPlayed=!1,this.togglePlaybackState_()},playbackStart:function(e,t){if(this.videoElementsPresent()&&!this.carouselOverlayShown_){this.trigger(P.PLAY_BUTTON_CLICKED);var i=t.getAttribute("data-id"),n=this.getPhotoById_(i);n.blocker&&!this.videoBlockersDisabled_?(this.showVideoBlocker(i),this.trigger(P.VIDEO_BLOCKER_SHOWN,n)):this.playVideo_(i)}},playVideo_:function(e){var t=this,i=this.$('[data-id="'.concat(e,'"] .js-video'))[0];if(i){var n=this.getPhotoById_(e);this.playingVideo_=n,this.videoElements.currentVideoElem=i;var a=i.play();a?(this.isPlayPromiseSupported=!0,a.then(function(){t.trigger(N.PLAY_VIDEO,{id:e,played:!0})})):this.trigger(N.PLAY_VIDEO,{id:e,played:!0})}},setVolume_:function(e){this.volume_=e;var t=0===this.volume_;this.videoElements.forEach(function(i){i.volume=e,i.muted=t}),this.$(".js-video-sound").toggleClass("is-active",!t),this.$(".js-video-sound-on").toggleClass("hidden",t),this.$(".js-video-sound-off").toggleClass("hidden",!t)},togglePlaybackState_:function(){this.$el.toggleClass("is-playback",this.videoIsBeingPlayed)},toggleVolume_:function(){return!(!this.videoElementsPresent()||this.carouselOverlayShown_)&&void this.setVolume_(0===this.volume_?1:0)},getItemsPerSlide_:function(){return this.photos_.length?1:0},addVideo_:function(e,t){var i=p(t).attr("data-photo-id"),n=this.getPhotoById_(i);this.trigger(N.ADD_VIDEO,n)},blockScrolling:function(){this.stickyScroll_&&this.stickyScroll_.blockScrolling()},enable:function(){return O._super.enable.apply(this,arguments),this.layoutNeedsUpdating_&&this.recalculateLayout_(),this},enableScrolling:function(){this.stickyScroll_&&this.stickyScroll_.enableScrolling()},showVideoBlocker:function(e){var t=h.find(this.items,{id:e});t&&(t.videoBlockerShown||(this.$('.js-photo[data-id="'.concat(e,'"]')).addClass("is-blocked"),this.setVideoBlockerShown_(t,!0)))},disableVideoBlockers:function(){var e=this;
this.$(".js-video-blocker").removeClass("is-blocked"),h.forEach(this.items,function(t){e.setVideoBlockerShown_(t,!1)}),this.videoBlockersDisabled_=!0},setVideoBlockerShown_:function(e,t){if(e.videoBlockerShown!==t){var i=this.items.indexOf(e),n=this.getSlideType(i);e.videoBlockerShown=t;var a=this.getSlideType(i);a!==n&&this.trigger(P.SLIDE_TYPE_CHANGED,{index:i,type:a})}},dismissVideoBlocker_:function(e){e.preventDefault();var t=p(e.target).attr("data-photo-id");this.disableVideoBlockers();var i=this.getPhotoById_(t);this.trigger(P.VIDEO_BLOCKER_DISMISSED,i),this.playVideo_(t)},getBlockerSlide_:function(e){if(e instanceof w)switch(e.getPromoBlockType()){case 19:return n=(i=e).getButtons()[0],a=n&&n.getExternalProviderType(),o=A[a],s=n&&{actionText:n.getText(),actionType:n.getAction(),externalProviderType:a},{blockerExternalPhotos:{headerText:i.getHeader(),contentText:i.getMssg(),url:i.getImageId()[0],externalProviderIcon:o,button:s},externalProviderType:a,type:x.BLOCKER_EXTERNAL_PHOTOS};case 24:return this.getUpsellBlockerSlide_(e);case 96:return this.createCrushUpsellSlide_(e)}else switch(e){case I.PUBLIC:return this.type_===I.PUBLIC?{addPhotos:{textLabel:(t=this.allowAddVideo_,t?m.get(424):m.get(44))},type:x.ADD_PHOTOS}:{addPrivatePhotos:{textLabel:m.get(299)}};case I.PRIVATE:return this.getPrivateBlockerSlide_();case I.PLACEHOLDER_PHOTO:return{placeholder:{isFemale:2===this.gender_}}}var t,i,n,a,o,s},getPrivateBlockerSlide_:function(){if(this.type_===I.PUBLIC){var e=this.photos_.length&&new f(this.photos_[0].photo),t=this.privateOverlayData_&&this.privateOverlayData_.level;return{blockerPrivate:{url:e&&e.src,position:e&&a(e),textLabel:this.getPrivatePhotoLexem(),message:this.privateOverlayData_&&this.privateOverlayData_.message,button:!this.isOwnProfile_&&{disabled:3===t,actionText:s(this.privateOverlayData_)}},type:x.BLOCKER_PRIVATE}}return{addPrivatePhotos:{textLabel:this.getPrivatePhotoLexem()},type:x.ADD_PHOTOS}},getUpsellBlockerSlide_:function(e){return{blockerUpsell:{actionText:e.getAction(),header:e.getHeader(),image:(t=e.getPictures(),t[0]&&t[0].getDisplayImages()),message:e.getMssg()},type:x.BLOCKER_UPSELL};var t},createCrushUpsellSlide_:function(e){var t=e.toJSON();return{blockerUpsellCrush:{pointer:this.crushUpsellPointer_,header:t.header,message:t.mssg,creditsCost:t.credits_cost,button:h.find(t.buttons,{type:1}).text},type:x.BLOCKER_CRUSH_UPSELL}},getPhotoSlide_:function(e,t,i){var o=e.galleryPhoto,s=o.photo,r=s.getId(),l=s.getVideo(),c={galleryPhoto:o,id:r,isRestricted:i,type:l?x.VIDEO:x.PHOTO},u={id:r,index:t,isPrivateGranted:o.private,position:a(e.data),url:s.getLargeUrl()};if(l)c.video=Object.assign({blocker:n(r,o.blocker),isProcessing:l.getIsProcessing(),soundOn:!1,src:l.getUrl()},u);else{var d=this.photoCoaching_&&s.getPhotoCoaching&&s.getPhotoCoaching();c.photo=Object.assign({photoCoachingData:d&&d.toJSON()},u)}return c},getVoteExplanationWrapper:function(){var e=this.$(".js-vote-explanation");if(e.length>0)return e.eq(0)}},"GalleryView");Object.assign(O,{ACTIONS:N,EVENTS:P,GALLERY_SLIDE_TYPES:x,TYPES:I,VIEWS:T}),e.exports=O},,function(e,t,i){"use strict";var n=i(111);e.exports=n("ADD_PHOTOS","ADD_PRIVATE_PHOTOS","PHOTO","VIDEO","PLACEHOLDER","BLOCKER_UPSELL","BLOCKER_CRUSH_UPSELL","BLOCKER_PRIVATE","BLOCKER_EXTERNAL_PHOTOS","VIDEO_BLOCKER","GRID")},function(e,t,i){"use strict";function n(e,t){window.requestAnimationFrame(function(){e.css({transform:"translateX(".concat(t.translateX,"px) translateY(").concat(t.translateY,"px) translateZ(0) scale(").concat(t.scale,")"),"transform-origin":"0px 0px"})})}function a(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function o(e){var t=e.element,i=e.transform,n=e.deltaX,a=e.deltaY,o=e.deltaScale;o=o||0;var r=t.offset(),l=i.scale,c=l+o,u=Math.floor(r.height/l)-1,d=u*c,h=s(i.translateY+a,u-d,0),p=Math.floor(r.width/l)-1,m=p*c;return{scale:c,translateY:h,translateX:s(i.translateX+n,p-m,0)}}function s(e,t,i){return Math.min(i,Math.max(t,e))}var r=i(100),l=i(25),c=i(111),u=i(327),d=i(139),h=i(162),p=l.os.supportsTouch,m=c("ZOOM"),g=function(){if(p){var e,t=this.touchMove_.bind(this);this.moveBuffer_=u(t),this.touchMove_=(e=this.moveBuffer_.callback,function(t){t.preventDefault(),e(r.toArray(t.touches).map(function(e){return{x:e.pageX,y:e.pageY}}))}),this.touchEnd_=this.touchEnd_.bind(this),this.onClick_=this.onClick_.bind(this),this.reset=this.reset.bind(this)}};g.EVENTS=m,g.prototype=r.extend({},d,{maxScale:3,minScale:1,isEnabled_:!1,element_:null,transform_:null,isEnabled:function(){return this.isEnabled_},enable:function(e){e&&!this.isEnabled_&&p&&(this.isEnabled_=!0,this.element_=l(e),this.element_.on("touchmove",this.touchMove_),this.element_.on("touchend",this.touchEnd_),this.element_.on("click",this.onClick_),h.on(h.EVENTS.ORIENTATION_CHANGE,this.reset),this.reset())},disable:function(){this.isEnabled_&&p&&(this.isEnabled_=!1,this.element_.off("touchmove",this.touchMove_),this.element_.off("touchend",this.touchEnd_),this.element_.off("click",this.onClick_),h.off(h.EVENTS.ORIENTATION_CHANGE,this.reset),this.element_=null)},reset:function(){this.isEnabled_&&p&&this.element_&&(this.transform_={translateX:0,translateY:0,scale:1},n(this.element_,this.transform_),this.trigger(m.ZOOM,this.transform_.scale))},onClick_:function(e){1!==this.transform_.scale&&(e.preventDefault(),e.stopPropagation(),this.reset())},touchEnd_:function(e){Math.abs(1-this.transform_.scale)<.1&&this.reset(),this.moveBuffer_.reset()},touchMove_:function(e,t){var i,r,l,c,u,d,h,p={element:this.element_,transform:this.transform_};2===t.length&&2===e.length?(p.maxScale=this.maxScale,p.minScale=this.minScale,p.prevTouches=e,p.currTouches=t,this.transform_=function(e){var t=e.element,i=e.transform,n=e.prevTouches,r=e.currTouches,l=e.maxScale,c=e.minScale,u=a(r[0],r[1]),d=a(n[0],n[1]),h=(u-d)/d,p=s(i.scale+h,c,l)-i.scale,m=(r[0].x+r[1].x)/2,g=(r[0].y+r[1].y)/2;return o({element:t,transform:i,deltaX:-1*p*m,deltaY:-1*p*g,deltaScale:p})}(p),n(this.element_,this.transform_),this.trigger(m.ZOOM,this.transform_.scale)):1!==this.transform_.scale&&(p.prevTouch=e[0],p.currTouch=t[0],this.transform_=(r=(i=p).element,l=i.transform,c=i.prevTouch,u=i.currTouch,d=u.x-c.x,h=u.y-c.y,o({element:r,transform:l,deltaX:d,deltaY:h})),n(this.element_,this.transform_))}}),e.exports=g},function(e,t,i){"use strict";var n=i(158);e.exports=n()},function(e,t,i){"use strict";function n(){s.verifyByPhoto(),o.track(l,{element:31,position:1})}var a=i(129),o=i(102),s=i(215),r=i(2868),l=i(101).ClickEvent,c={REFRESH:0,OPTION_VERIFIED:1},u=a.extend({viewStyle_:r.STYLES.DEFAULT,getView_:function(){return this.view_?this.view_:(this.view_=this.registerView(new r({el:this.parent[0]})).on(r.ACTIONS.CLICK,n).on(r.ACTIONS.REFRESH,this.trigger.bind(this,c.REFRESH)),this.view_)},onStart:function(){u._super.onStart.apply(this,arguments),s.on(s.ACTIONS.SUCCESS,this.onSuccess_,this)},onStop:function(){u._super.onStop.apply(this,arguments),s.off(s.ACTIONS.SUCCESS,this.onSuccess_,this)},onSuccess_:function(){this.trigger(this,c.OPTION_VERIFIED)},setMixedStyle:function(e){this.viewStyle_=e?r.STYLES.MIXED:r.STYLES.DEFAULT},set:function(e){var t=function(e){return e.getMethods([]).find(function(e){return 5===e.getType()})}(e),i=this.getView_();i.style=this.viewStyle_,i.render(t&&s.createContextForMethod(t))}},"PhotoVerificationHandler");u.EVENTS=c,e.exports=u},function(e,t,i){"use strict";var n=i(113),a={};n.on(n.EVENTS.SESSION_CHANGED,function(){a={}}),e.exports={getMessage:function(e){return a[e]},saveMessage:function(e,t){a[e]=t},removeMessage:function(e){delete a[e]}}},function(e,t,i){"use strict";var n=i(178);e.exports=function(e,t){function i(){return n.getObject(e)}function a(){n.remove(e)}return{create:function(t){n.saveObject(e,{parameters:t})},exists:function(){return Boolean(i())},execute:function(){var e=i();if(e)return a(),t(e.parameters)},remove:a}}},,,function(e,t,i){"use strict";var n=i(100),a=i(113),o=i(132),s=i(103),r=i(129),l=i(99),c=i(187),u=i(199),d=i(111),h=i(102),p=i(257),m=i(165),g=i(228),_=i(313),f=i(149),v=i(175),E=i(128),b=i(219),y=i(524),k=i(124),S=i(316),w=i(307),C=i(105).ClientVoteResponse,T=i(101),P=T.ClickEvent,N=T.ClickButtonEvent,I=T.MatchEvent,x={FULL_VOTE:"Encounters/vote"},A=d("VOTE_ERROR","VOTE_COMPLETE","QUOTA_PROCESSING","QUOTA_PROCESSED"),O=r.extend({lastVotedProfile_:null,isInterrupted_:null,pendingRequiredAction_:null,quotaProcessedObserver_:null,quotaProcessingTimeout_:null,init:function(){this.pendingRequiredAction_=[],this.setIsInterrupted(!1),this.jinba=new c(x.FULL_VOTE)},onStart:function(){if("quota"===p.getInstance().getBackAction()){var e=p.getInstance().getObservable("result");this.quotaProcessedObserver_=this.observe(e,this.onQuotaPaymentResultChange_.bind(this)),p.getInstance().clear()}this.interruptionFinish_()},vote:function(e){var t=this,i=e.profileData,n=e.voteResult,r=e.photo;if(this.isInterrupted_)return this.log.error("Tried to vote when we were interrupted",arguments),Promise.reject(i);if(this.lastVotedProfile_=i,a.isLoggedIn()){var l=o.getSync(100);if(this.showingUndoneVotedProfile_&&!l.getEnabled()&&2===n){var c=l.getRequiredAction(),u=l.getProductType();return 0===c?k.showNotification({type:k.TYPES.ERROR}):this.onRequiredAction_({featureType:l.getFeature(),productType:u,actionType:c,userId:i.id}),Promise.reject(i)}return this.jinba.start(),this.submitVote_(n,i,r,i.isCached,i.clientSource).then(function(e){return t.showingUndoneVotedProfile_=!1,e})}return s.navigate("landing"),Promise.reject(i)},crushVote:function(e){var t=this,i=e.profileData,n=e.photo,a=e.seenExplanationScreen,o=e.isFromProfile,r={activationPlace:i.activationPlace,returnTo:s.getUrl()};return h.track(N,{button_name:76}),(a?function(e,t){var i=e.user.getPromoBlockAfterLastPhoto().toJSON(),n=i.ok_payment_product_type,a=i.promo_block_type;return new Promise(function(i,o){g.purchase({back:s.getUrl(),cost:t.cost,hotPanelData:t,userId:e.id,productType:n,promoBlockType:a,success:i,error:o})})}(i,r):u.buyCrush(i.id,r,n,o)).then(function(e){return t.showingUndoneVotedProfile_=!1,{vote:2,notification:e&&e.getNotification()}}).catch(function(e){return Promise.resolve({vote:1})})},undoVote:function(){var e=this.lastVotedProfile_;return h.track(P,{element:75}),this.showingUndoneVotedProfile_=!0,e},onVoteComplete_:function(e,t){this.trigger(A.VOTE_COMPLETE,e,t)},submitVote_:function(e,t,i,n,a){return v.getInstance().set({cached:n,id:t.id,photoId:i?i.getId():"",source:a||0,voteType:e}).then(this.voteSuccess_.bind(this,t,e,i)).catch(this.voteFailure_.bind(this,t,e))},voteSuccess_:function(e,t,i,n){var a=e.user,o=2===t,s=3===n.getVoteResponseType();return s&&this.onMutualAttraction_(e,n,i),o&&(this.obtainNotificationPermission_(e.name),a.setAllowCrush(!o),E.getInstance().updateCache(e.id,a),1===e.clientSource&&w.update(n.getGoalProgress())),{allowChat:n.hasCanChat()?n.getCanChat():e.vote.allowChat,allowCrush:!o,yourVote:t,isMatch:s}},obtainNotificationPermission_:function(e){this.notificationPermissionController_||(this.notificationPermissionController_=new y({place:"like",activationPlace:2}),this.registerController(this.notificationPermissionController_)),this.notificationPermissionController_.obtainPermission(l.get(493,e))},voteFailure_:function(e,t,i){var a;if(n.isObject(i)&&n.isFunction(i.getFeature)&&(a=i.getFeature()),a){var o=a.getDisplayImages();return this.onRequiredAction_({actionType:a.getRequiredAction(),productType:a.getProductType(),photoUrl:o&&o.length>0?o[0].getDisplayImages():""}),Promise.reject(e)}return i instanceof C&&6===i.getVoteResponseType()&&this.onDisplaySettingsMessage_({actionType:17,messageText:i.getMessage()}),Promise.reject(e)},trackMatchEvent_:function(e,t){var i=t.hasIsCrushMatch()&&t.isCrushMatch&&t.isCrushMatch();h.track(I,{encrypted_user_id:t.getPersonId(),mode:i?7:6})},onMutualAttraction_:function(e,t,i){if(e.user){var n=t.getPersonId();e.id!==n&&_.update(e.id,n),i=i||e.profilePhoto,this.trackMatchEvent_(e,t),7===e.activationPlace?s.back():S.showMatchScreen({singleProfileData:e,theirPicture:i.getLargeUrl(),message:t.getMessage(),isCrush:t.getIsCrushMatch(),withChat:t.getAllowChatFromMatchScreen(),chatSettings:t.getChatSettings()})}},onRequiredAction_:function(e){var t=e.actionType,i=e.productType,n=e.photoUrl,a=e.userId,o=e.messageText,s=e.featureType;if(this.isInterrupted_)this.pendingRequiredAction_.push({actionType:t,productType:i,photoUrl:n,userId:a,messageText:o});else switch(f.generate(),t){case 2:this.addPhotos_();break;case 17:this.onDisplaySettingsMessage_(o);break;case 6:this.onSppRequired_(a,s);break;case 9:case 4:this.onPaymentRequired_(i,n);break;case 0:break;default:return void this.log.error("Unhandled required action ".concat(t,", feature ").concat(s))}},onPaymentRequired_:function(e,t){p.getInstance().setBackRoute(s.getUrl()),p.getInstance().setBackAction("quota"),s.navigate("credit-intro",{productType:e,photo:t||"",source:s.getUrl()})},onSppRequired_:function(e,t){var i,n=this.getParameter("activationPlace");100===t&&(i=43);var a={productType:1,userId:e,promoBlockType:i,back:s.getUrl(),hotPanelData:{activationPlace:n}};m.navigateToPayment(a)},onDenyFilter_:function(){this.interruptionFinish_()},interruptionFinish_:function(){this.isInterrupted_=!1;for(var e=0,t=this.pendingRequiredAction_.length;e<t;e++)this.onRequiredAction_(this.pendingRequiredAction_.shift())},onDisplaySettingsMessage_:function(e){this.setIsInterrupted(!0),this.filterView_||(this.filterView_=this.registerView(new b).on(b.ACTIONS.YES,this.onEditFilter_).on(b.ACTIONS.NO,this.onDenyFilter_)),this.filterView_.update({message:e,yesText:l.get(6),noText:l.get(4)})},onEditFilter_:function(){s.navigate("settings-filter")},setIsInterrupted:function(e){e!==this.isInterrupted_&&(this.isInterrupted_=e,e||this.interruptionFinish_())},onQuotaPaymentResultChange_:function(e){e!==p.RESULTS.PENDING?e&&this.onQuotaProcessed_():this.onQuotaProcessing_()},onQuotaProcessing_:function(){this.trigger(A.QUOTA_PROCESSING),setTimeout(this.onQuotaProcessed_.bind(this),4e4)},onQuotaProcessed_:function(){this.quotaProcessedObserver_&&(setTimeout(this.trigger.bind(this,A.QUOTA_PROCESSED),1e3),this.quotaProcessedObserver_.stop(),this.quotaProcessedObserver_=null)},addPhotos_:function(){s.navigate("add-photos",{feature:15})}},"ProfileActionHandler");O.EVENTS=A,O.TIMING=x,e.exports=O},,function(e,t,i){"use strict";var n=i(100),a=i(111),o=i(139),s=a("SCROLLED","SCROLLED_TO_BOTTOM","VOTED","CRUSHED"),r={};n.extend(r,o),r.EVENTS=s,e.exports=r},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(123)),c=n(i(116)),u=i(98),d=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).innerRef=u.createRef(),i.onTouchStart=i.onTouchStart.bind((0,l.default)(i)),i}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.innerRef.current&&this.innerRef.current.addEventListener("touchstart",this.onTouchStart)}},{key:"componentWillUnmount",value:function(){this.innerRef.current&&this.innerRef.current.removeEventListener("touchstart",this.onTouchStart)}},{key:"render",value:function(){return u.createElement("div",{className:"profile-card-tutorial",ref:this.innerRef},this.props.children)}},{key:"onTouchStart",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onTouchStart&&this.props.onTouchStart(e)}}]),t}(u.Component);e.exports=d},function(e,t,i){"use strict";function n(e){var t=e.instance,i=e.id,n=e.title,s=e.value,u=e.clientProfileOptions,d=e.elementTracking,h=e.qaName,p=e.iconName;this.elementTracking=d,this.id=i,this.profileOptionType=u,this.title=n,this.value=s,this.iconName=p,t instanceof r||t instanceof l?(this._addChilds(t,u),this.title||(this.title=t.getName()),this.profileOptionType=t.getType(),this.value=t.getDisplayValue()||a.get(18)):t instanceof c&&(this.title||(this.title=t.getName()),this.id=t.getGroupId()),this.qaProfileOption=o[this.profileOptionType||h]}var a=i(99),o=i(2961),s=i(105),r=s.ProfileField,l=s.ClientProfileOption,c=s.Group;n.prototype._addChilds=function(e,t){if(t&&t[e.getType()]){var i=t[e.getType()].getInputParts();this.childs=i?i.filter(function(e){return e.getType()}).map(function(e){return new n(e,t)}):null}else this.childs=null},e.exports=n},function(e,t,i){"use strict";var n=i(100),a=i(99),o=[{level:1,title:a.get(95)},{level:2,title:a.get(93)},{level:3,title:a.get(94)},{level:4,title:a.get(96)}];e.exports={levels:o,getLevel:function(e){return n.find(o,{level:e})}}},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(117),s={small:"small",large:"large"},r={dark:"dark",grey:"grey",light:"light"};e.exports=function(e){var t,i=e.size,l=e.color,c=e.relative,u=e.extraClass,d=o((t={"loading-dots":!0,"loading-dots--centered":!c},(0,n.default)(t,s[i],!0),(0,n.default)(t,r[l],!0),t),u);return a.createElement("div",{className:d},a.createElement("div",{className:"first dot"}),a.createElement("div",{className:"second dot"}),a.createElement("div",{className:"third dot"}))}},function(e,t,i){"use strict";function n(e){return P.find(function(t){return e.getExternalProviderDetails().getType()===t})}function a(e){var t=e.element,i=e.url,n=e.onCopy,a=e.onError;if(t){t.value=i,t.select(),t.setSelectionRange(0,i.length);var o=function(){if("undefined"==typeof $)return!0;var e=Boolean($&&$.os&&$.os.ios),t=$&&$.os&&$.os.version||0;return!e||e&&t>9}();if("function"==typeof document.execCommand&&o){var s=function(e){"function"==typeof n&&n(e)};document.addEventListener("copy",s,!1);try{document.execCommand("copy")}catch(e){T.error("Failed to copy sharing URL",e),"function"==typeof a&&a(e)}finally{document.removeEventListener("copy",s,!1)}}else a()}}function o(){C.showNotification({type:C.TYPES.INFO,text:y.get(547)})}var s,r,l,c,u,d,h,p=i(3),m=p(i(168)),g=p(i(127)),_=p(i(107)),f=i(103),v=i(101),E=v.ClickEvent,b=v.PostEvent,y=i(99),k=i(213),S=i(102),w=i(125),C=i(124),T=w.getLogger("sharingUtils"),P=[28,17,26,35,1,15,36,2,23,3],N=(s={},(0,_.default)(s,1,"adaptor-facebook"),(0,_.default)(s,15,"adaptor-twitter"),(0,_.default)(s,26,"adaptor-copy"),(0,_.default)(s,28,"adaptor-whatsapp"),(0,_.default)(s,35,"adaptor-messenger"),(0,_.default)(s,17,"adaptor-sms"),(0,_.default)(s,36,"adaptor-other"),(0,_.default)(s,2,"adaptor-vkontakte"),(0,_.default)(s,23,"adaptor-youtube"),(0,_.default)(s,3,"adaptor-odnoklassniki"),s),I=(r={},(0,_.default)(r,1,"facebook"),(0,_.default)(r,15,"twitter"),(0,_.default)(r,26,"copy"),(0,_.default)(r,28,"whatsapp"),(0,_.default)(r,35,"messenger"),(0,_.default)(r,17,"sms"),(0,_.default)(r,36,"other"),(0,_.default)(r,2,"vkontakte"),(0,_.default)(r,23,"youtube"),(0,_.default)(r,3,"odnoklassniki"),r),x=f.platform&&/iPad|iPhone|iPod/.test(f.platform)?"&":"?",A=(l={},(0,_.default)(l,28,"whatsapp://send?text={MESSAGE}"),(0,_.default)(l,33,"https://t.me/share/url?url={MESSAGE}"),(0,_.default)(l,35,"fb-messenger://share/?link={MESSAGE}"),(0,_.default)(l,17,"sms:".concat(x,"body={MESSAGE}")),l),O=(0,g.default)({},A,(c={},(0,_.default)(c,2,"https://vk.com/share.php?url={url}&title={title}&comment={text}"),(0,_.default)(c,1,"https://www.facebook.com/sharer.php?u={url}"),(0,_.default)(c,3,"https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&st.shareUrl={url}"),(0,_.default)(c,15,"https://twitter.com/intent/tweet?url={url}&text={title}"),c)),V=(u={},(0,_.default)(u,1,2),(0,_.default)(u,15,7),(0,_.default)(u,26,11),(0,_.default)(u,28,13),(0,_.default)(u,35,14),(0,_.default)(u,17,10),(0,_.default)(u,36,18),(0,_.default)(u,2,5),(0,_.default)(u,23,23),(0,_.default)(u,3,4),u),R=(d={},(0,_.default)(d,311,26),(0,_.default)(d,313,27),(0,_.default)(d,341,27),d),B=(h={},(0,_.default)(h,2,178),(0,_.default)(h,3,179),(0,_.default)(h,1,120),(0,_.default)(h,12,44),(0,_.default)(h,15,201),(0,_.default)(h,18,315),(0,_.default)(h,26,428),(0,_.default)(h,28,165),(0,_.default)(h,33,430),(0,_.default)(h,35,429),(0,_.default)(h,17,164),(0,_.default)(h,36,182),h);e.exports.SHARE_ICONS=N,e.exports.SHARE_LINKS=A,e.exports.SOCIAL_MEDIA_ELEMENT=V,e.exports.CONTENT_TYPE=R,e.exports.PROVIDER_ELEMENT_MAP=B,e.exports.getTypeFromProvider=n,e.exports.back=function(e){e?f.navigate(e):f.back()},e.exports.sendAppStats=function(e,t){var i=t.getExternalProviderDetails();k.onProfileShared(e,i.getId(),i.getType(),{statsType:7})},e.exports.getPreparedSharingOptions=function(e){return e.reduce(function(e,t){var i=n(t);if(!i)return e;if(36===i&&!window.navigator.share)return e;var a=t.getExternalProviderDetails();return[].concat((0,m.default)(e),[{provider:I[i],externalProviderIcon:N[i],displayName:a.getDisplayName(),networkType:a.getType(),sharingDescription:t.getSharingDescription&&t.getSharingDescription()||"",isCopyLink:26===i,sharingUrl:t.getSharingUrl&&t.getSharingUrl()||""}])},[])},e.exports.doSharing=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.title,n=void 0===i?"":i,s=t.text,r=void 0===s?"":s,l=t.url,c=void 0===l?"":l,u=t.sharingInput,d=void 0===u?null:u,h=t.onCopyError,p=t.trackClickToAnalytics,m=t.trackPostToAnalytics,g=t.index,_=t.extraTrackingParams;if(p&&function(e,t){var i=(t||{}).position;S.track(E,{element:B[e],parentElement:371,position:i})}(e,{position:g}),m){var f=_||{},v=f.activationPlace,y=void 0===v?"":v,k=f.contentType;!function(e,t){var i=t||{},n=i.activationPlace,a=i.contentType;n&&a&&S.track(b,{social_media:V[e],activation_place:n,content_type:a})}(e,{activationPlace:y,contentType:void 0===k?"":k})}var w=36===e,C=26===e,P="function"==typeof window.navigator.share;w&&P?function(e){var t=e.title,i=void 0===t?"":t,n=e.text,a=void 0===n?"":n,o=e.url,s=void 0===o?"":o;window.navigator.share({title:i,text:a,url:s}).catch(function(e){console.warn("Native sharing has been failed",e)})}({title:n,text:r,url:c}):C?a({element:d,url:c,onCopy:o,onError:h}):O[e]?function(e,t){var i=t.url,n=t.title,a=t.text,o=encodeURIComponent(i),s=O[e].replace("{MESSAGE}",o).replace("{url}",o).replace("{title}",n).replace("{text}",a),r=window.document.createElement("a");r.target="_blank",r.href=s,r.click&&r.remove?(r.click(),r.remove()):window.open(s)}(e,{url:c,title:n,text:r}):T.error("We do not support sharing for chosen network",e)}},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(100),o=i(159),s=i(103),r=i(200),l=i(131),c=i(99),u=i(157),d=i(124),h=i(3023),p=i(148),m=o.BUTTONS,g=r.getInstance("Multimedia"),_={VIEW:"view",SHARE:"share"},f=o.extend({multimedia_:null,init:function(){f._super.init.apply(this,arguments),p(this),this.multimediaView_=this.registerView(new h).on(h.EVENTS.DELETE,this.onDeleteMultimedia_).on(h.EVENTS.DISMISS,this.onCancelMultimedia_)},onStart:function(e){f._super.onStart.apply(this,arguments),this.multimediaView_.toggleVisibilityFeature("true"!==e.blockTimer).appendTo(this.parent),this.updateNavigation(),this.src_=this.getParameter("source")},onReady:function(){if(f._super.onReady.apply(this,arguments),!a.isString(this.src_)||this.src_.length<1||!this.getParameter("id"))s.back();else{var e=this.getParameter("state");if(e===_.VIEW){var t={isTheirs:this.getParameter("isTheirs"),multimedia:this.src_,state:e,type:this.getParameter("type")};this.multimediaView_.update(t)}else e===_.SHARE&&u.getClientOpenChat(this.getParameter("id")).then(this.handleOpenChatResponse_).catch(s.back)}},onStop:function(){f._super.onStop.apply(this,arguments),this.multimediaView_.update({multimedia:""}),this.src_=null},handleOpenChatResponse_:function(e){var t=e.multimediaVisibility,i=!1;!0!==g.get("init-timer-flag")&&(i="true"!==this.getParameter("blockTimer"),g.put("init-timer-flag",!0,6048e5));var n={state:this.getParameter("state"),multimedia:this.src_,showInitialScreen:i,multimediaVisibility:t};this.multimediaView_.update(n)},getNavigationActions:function(){var e=this.getParameter("state");return e===_.SHARE?{link:{text:c.get(32),action:m.SEND},close:!0}:e===_.VIEW?{close:!0}:void 0},updateNavigation:function(){this.updateView(o.VIEWS.NAVIGATION_BAR,{actions:this.getNavigationActions()})},onNavigationAction:function(e){e!==m.SEND?f._super.onNavigationAction.apply(this,arguments):this.doSend_()},onDeleteMultimedia_:function(e){var t=this;u.deleteChatMessage(this.getParameter("chatUserId"),this.getParameter("id"),e||0).catch(function(e){t.log.error(e),d.showNotification({type:d.TYPES.ERROR})}),s.back()},onCancelMultimedia_:function(){s.back()},doSend_:function(){var e=this;l.preloadImage(this.src_).then(function(t){var i=(0,n.default)(t,3),a=i[0],o=i[1],r=i[2];g.put("multimedia",{height:r,src:a,visibility:e.multimediaView_.getVisibilityType(),width:o},1e4),s.back()})}},"Multimedia");h.STATES=f.STATES=_,f.FORMATS={IMAGE:"MULTIMEDIA_FORMAT_IMAGE"},f.invalidateCache=function(){g.invalidate("multimedia")},f.getCachedMultimedia=function(){return g.get("multimedia")},e.exports=f},,function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(117),r=i(106),l={src:a.string,format:a.oneOf(["image","video"]),onClick:a.func,innerVideoRef:o.ref},c=function(e){var t=e.src,i=e.format,a=e.onClick,o=e.innerVideoRef,l=s({"csms-sticker__content":!0,"csms-sticker__content--invisible":!t}),c=s({"csms-sticker__loader":!0,"csms-sticker__loader--invisible":t});return n.createElement("div",{className:"csms-sticker","data-qa":"sticker",onClick:a},n.createElement("div",{className:c},n.createElement(r,{name:"loading-dots",size:"lg"})),"video"===i?n.createElement("video",{className:l,src:t,muted:!0,loop:!0,autoPlay:!0,playsInline:!0,ref:o,"data-qa":"sticker-video"}):n.createElement("img",{className:l,src:t,"data-qa":"sticker-img"}))};c.propTypes=l,c.defaultProps={format:"image"},e.exports=c},,function(e,t,i){"use strict";var n=i(111);e.exports=n("MESSAGE","RECENT_STICKERS","GIFT","GIF","STICKER_PACK")},function(e,t,i){"use strict";function n(){var e=r();window.scrollTo(0,e.scrollHeight-window.innerHeight+1)}var a,o=i(25),s=i(125),r=i(171),l=s.getLogger("ChatKeyboardHacks");a=o.os.ios?function(){function e(){if(null!==t)return t;var e=window.screen.height,i=[[812,330],[736,360],[667,300],[568,210],[480,120],[1024,610],[896,415]].find(function(t){return t[0]===e});return i?t=i[1]:(t=0,l.error("Unknown iOS screen height: ".concat(e))),t}var t=null,i=!1,n=!0;return{onFocus:function(){i||(n=!0)},onBlur:function(){n=!1},onInput:function(){setTimeout(this.scrollToBottom_,10)},lockScrollPosition_:function(){if(document.activeElement!==document.body){var t=r().scrollHeight-e();o.os.ipad||window.scrollY===t||this.scrollToBottom_()}else this.onBlur()},scrollToBottom_:function(){var t=r().scrollHeight;window.scrollTo(0,t-e())},activateIosDeviceWakeHack:function(){n&&(i=!0,setTimeout(function(){i=!1},1e3),document.activeElement.blur())}}}():o.os.android&&o.os.chrome&&o.os.chromeVersion>=60?{onFocus:function(){var e=r().scrollHeight-window.innerHeight,t=window.scrollY;Math.abs(t-e)<10&&setTimeout(n,500)},onBlur:function(){},onInput:function(){}}:{onFocus:function(){},onBlur:function(){},onInput:function(){}},e.exports=a},function(e,t,i){"use strict";function n(e){var t,i=e.type,n=e.value,s=e.placeholder,l=e.extraClass,c=e.fieldExtraClass,u=e.autoFocus,d=e.autoComplete,h=e.autoCapitalize,p=e.autoCorrect,m=e.spellCheck,g=e.isInvalid,_=e.readOnly,f=e.onFocus,v=e.onChange,E=e.onBlur,b=e.innerRef,y=e.dataQa,k=r((t={input:!0},(0,a.default)(t,"".concat(l),l),(0,a.default)(t,"is-invalid",g),t)),S=r((0,a.default)({input__field:!0},"".concat(c),c));return o.createElement("div",{className:k},o.createElement("input",{className:S,type:i,value:n,placeholder:s,autoFocus:u,autoComplete:d,autoCapitalize:h,autoCorrect:p,spellCheck:m,readOnly:_,onFocus:f,onChange:v,onBlur:E,ref:b,"data-qa":y}))}var a=i(3)(i(107)),o=i(98),s=i(104),r=i(117),l={type:s.oneOf(["text","password","tel"]),value:s.oneOfType([s.string,s.number]),placeholder:s.string,extraClass:s.string,fieldExtraClass:s.string,autoFocus:s.bool,isInvalid:s.bool,readOnly:s.bool,onFocus:s.func,onChange:s.func,onBlur:s.func,innerRef:s.object};n.propTypes=l,n.defaultProps={type:"text",value:"",placeholder:"",extraClass:"",fieldExtraClass:"",autoFocus:!1,isInvalid:!1,readOnly:!1,onFocus:null,onChange:null,onBlur:null,innerRef:null},e.exports=n},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(162),s=i(342),r=a.extend({className:"terms-view",events:{"click a":"handleLinkClick_"},update:function(e){var t=this;return"string"==typeof e.content?(this.hideLoading(),this.el.innerHTML=e.content,n.forEach(this.$el.find("a"),s.formatLink),e.target&&setTimeout(function(){var i=t.getElement().find("a[name=".concat(e.target,"]"));i.length&&o.scrollTo(0,i.offset().top-o.HEADER_HEIGHT-10)},0)):e.loading&&(this.reset(),o.scrollToTop(),this.showLoading()),r._super.update.apply(this,arguments)},handleLinkClick_:function(e){s.openLink(e)}},"LegalDocument");e.exports=r},function(e,t,i){"use strict";function n(){this.onScrollEvent_=this.onScrollEvent_.bind(this),this.calcTresholds_=this.calcTresholds_.bind(this),this.processScrollPosition_=this.processScrollPosition_.bind(this),this.togglePagesVisibility_=this.togglePagesVisibility_.bind(this),this.pages_=[]}var a=i(171);n.prototype={isStarted_:!1,hasMore_:!1,displayHiddenPagesNumber_:0,scrollableElement_:null,contentElement_:null,nextPageLoaderElement_:null,prevPageLoaderElement_:null,turnPageEventHandler_:null,scrollEventHandler_:null,nextPageTreshold_:null,prevPageTreshold_:null,minPage_:1/0,maxPage_:-1/0,prevPageLoaderHidden_:!0,nextPageLoaderHidden_:!0,prevPageLoaderHeight_:0,nextPageLoaderHeight_:0,scrollableElementHeight_:0,lastScrollPosition_:0,layoutUpdated_:!1,toggleVisibilityTimeout_:0,toggleVisibilityScrollsSkipped_:0,scrollTimeout_:0,lastScrollTime_:null,destroy:function(){this.stop()},setScrollableElement:function(e){return this.scrollableElement_=e,this},setContentElement:function(e){return this.contentElement_=e,this},setLoaderElements:function(e,t){return this.nextPageLoaderElement_=e,this.prevPageLoaderElement_=t,this},setScrollEventHandler:function(e,t){return this.scrollEventHandler_={callback:e,context:t},this},setTurnPageEventHandler:function(e,t){return this.turnPageEventHandler_={callback:e,context:t},this},setPreLoadOffset:function(e){return this.preLoadOffset_=e,this},setHasMore:function(e){if(this.hasMore_=e,this.nextPageLoaderElement_){var t=this.nextPageLoaderHidden_=!this.hasMore_;this.nextPageLoaderElement_.style.display=t?"none":"block"}return this},setDisplayHiddenPages:function(e){return this.displayHiddenPagesNumber_=e,this},setMaxPagesLimit:function(e){return this.setDisplayHiddenPages(e)},updateLayout:function(){return this.layoutUpdated_=!1,this},canInsertPage:function(e){return e>0&&e===this.minPage_-1||e===this.maxPage_+1||0===this.pages_.length},stop:function(){return this.isStarted_&&(this.isStarted_=!1,this.hasMore_&&this.setHasMore(!1),this.lastScrollTime_=null,this.scrollTimeout_&&(clearTimeout(this.scrollTimeout_),this.scrollTimeout_=0),this.toggleVisibilityTimeout_&&(clearTimeout(this.toggleVisibilityTimeout_),this.toggleVisibilityTimeout_=0),this.scrollableElement_.removeEventListener("scroll",this.onScrollEvent_,!1)),this},start:function(){return this.isStarted_||(this.isStarted_=!0,this.processScrollPosition_(),this.scrollableElement_.addEventListener("scroll",this.onScrollEvent_,!1)),this},insert:function(e,t,i){var n=0===this.pages_.length,o=this.scrollableElement_===window?a():this.scrollableElement_;if(this.setHasMore(this.hasMore_),this.prevPageLoaderElement_){var s=1===this.minPage_;s!==this.prevPageLoaderHidden_&&(this.prevPageLoaderHidden_=s,this.prevPageLoaderElement_.style.display=s?"none":"block")}var r=[];i&&this.pages_[t-1]&&(r=this.pages_[t-1].elements,this.pages_[t-1]=null),(!n||e[0]&&!e[0].parentNode)&&this.insertBefore_(e,t),r.forEach(function(e){return e.remove()}),n&&!this.prevPageLoaderHidden_&&(o.scrollTop=this.prevPageLoaderHeight_),this.nextPageTreshold_=this.prevPageTreshold_=null,this.minPage_=Math.min(this.minPage_,t),this.maxPage_=Math.max(this.maxPage_,t);var l=this.pages_[t-2],c=this.pages_[t];return this.pages_[t-1]={visible:!0,elements:e,
top:l?l.bottom:0,bottom:c?c.top:this.contentElement_.offsetHeight},this.layoutUpdated_||this.updateLayout_(),setTimeout(this.calcTresholds_,100),this.start(),this},addElements:function(e,t){if(0===this.pages_.length)return this.insert(e,0,!0);var i=t&&t.page-1||0,n=t&&t.index||0;if(e&&0!==e.length&&this.pages_&&this.pages_[i]&&this.pages_[i].elements){this.pages_[i].elements.splice.apply(this.pages_[i].elements,[n,0].concat(e));var a=document.createDocumentFragment();return e.forEach(function(e){a.appendChild(e)}),this.contentElement_.insertBefore(a,this.pages_[i].elements[n+1]),this}},replaceElement:function(e,t){for(var i=-1,n=0;n<this.pages_.length;n++){var a=this.pages_[n]&&this.pages_[n].elements;if(a&&(i=a.indexOf(t))>-1){var o=t.parentNode;o.insertBefore(e,t),o.removeChild(t),a[i]=e,t.style.visibility&&(e.style.visibility="hidden");break}}i>-1&&(this.updateLayout_(),this.onScrollEvent_())},removeElementsFromPages:function(e,t){if(e&&!(e.length<1)){t="number"==typeof t?t:0;for(var i=0;i<this.pages_.length;i++)if(i!==t-1){var n=this.pages_[i]&&this.pages_[i].elements;if(n){for(var a=0;a<e.length;a++){var o=e[a],s=n.indexOf(o);-1!==s&&(n.splice(s,1),o.remove())}0===n.length&&(this.pages_.splice(i,1),this.maxPage_=this.pages_.length,i--)}}this.pages_.length>0&&this.pages_[0].elements&&this.pages_[0].elements.length>0&&(this.updateLayout_(),this.onScrollEvent_())}},calcTresholds_:function(){var e=this.scrollableElement_;e===window&&(e=a()),this.hasMore_&&(this.nextPageTreshold_=e.scrollHeight-this.scrollableElementHeight_,this.nextPageLoaderHidden_||(this.nextPageTreshold_-=this.nextPageLoaderHeight_),this.preLoadOffset_&&(this.nextPageTreshold_-=parseInt(this.scrollableElementHeight_*this.preLoadOffset_,10))),this.minPage_>1&&(this.prevPageTreshold_=0,this.prevPageLoaderHidden_||(this.prevPageTreshold_+=this.prevPageLoaderHeight_),this.preLoadOffset_&&(this.prevPageTreshold_+=parseInt(this.scrollableElementHeight_*this.preLoadOffset_,10)))},updateLayout_:function(){this.layoutUpdated_=!0,this.prevPageLoaderHeight_=this.prevPageLoaderElement_&&this.prevPageLoaderElement_.clientHeight,this.nextPageLoaderHeight_=this.nextPageLoaderElement_&&this.nextPageLoaderElement_.clientHeight,this.scrollableElementHeight_=this.scrollableElement_.innerHeight||this.scrollableElement_.clientHeight;for(var e=this.minPage_-1;e<this.maxPage_;e++){var t=this.pages_[e];if(t){var i=this.pages_[e-1],n=t.elements[0],a=t.elements[t.elements.length-1];t.visible=!1,t.top=i?i.bottom:0,t.bottom=t.top+a.offsetTop-n.offsetTop+a.clientHeight}}return this.calcTresholds_(),this},turnPage_:function(e){var t;if(e){if(null===this.nextPageTreshold_)return;t=this.maxPage_+1,this.nextPageTreshold_=null}else{if(null===this.prevPageTreshold_)return;t=this.minPage_-1,this.prevPageTreshold_=null}var i=this.turnPageEventHandler_;setTimeout(function(){return i.callback.call(i.context,t)},0)},onScrollEvent_:function(){if(this.isStarted_&&this.pages_&&0!==this.pages_.length){this.scrollTimeout_&&clearTimeout(this.scrollTimeout_),this.scrollTimeout_=setTimeout(this.processScrollPosition_,250);var e=Date.now();this.lastScrollTime_&&e-this.lastScrollTime_>=250&&(this.processScrollPosition_(),this.lastScrollTime_=null),null===this.lastScrollTime_&&(this.lastScrollTime_=e)}},processScrollPosition_:function(){this.layoutUpdated_||this.updateLayout_();var e=this.lastScrollPosition_=this.scrollableElement_.pageYOffset;void 0===e&&(e=this.scrollableElement_.scrollTop),null!==this.nextPageTreshold_&&e>=this.nextPageTreshold_&&this.turnPage_(!0),null!==this.prevPageTreshold_&&e<=this.prevPageTreshold_&&this.turnPage_(!1),clearTimeout(this.toggleVisibilityTimeout_),this.toggleVisibilityScrollsSkipped_++,this.toggleVisibilityScrollsSkipped_>5?(this.toggleVisibilityScrollsSkipped_=0,this.togglePagesVisibility_()):this.toggleVisibilityTimeout_=setTimeout(this.togglePagesVisibility_,500)},insertBefore_:function(e,t){var i=this.pages_[t]&&this.pages_[t].elements;i||(i=this.pages_[t-1]&&this.pages_[t-1].elements),i&&(i=t===this.minPage_?i[0]:i[i.length-1].nextSibling);var n=document.createDocumentFragment();e.forEach(function(e){return n.appendChild(e)}),this.contentElement_.insertBefore(n,i)},togglePagesVisibility_:function(){var e=this.getVisiblePages_(),t=e.firstVisiblePage,i=e.lastVisiblePage;t-=this.displayHiddenPagesNumber_,i+=this.displayHiddenPagesNumber_,this.displayHiddenPages_(t,i);var n=this.scrollEventHandler_;n&&n.callback.call(n.context,this.lastScrollPosition_)},getVisiblePages_:function(){var e,t,i=this.lastScrollPosition_,n=i+this.scrollableElementHeight_,a=1/0,o=0;for(t=this.minPage_-1;t<this.maxPage_;t++)if(e=this.pages_[t])if(i>=e.top&&i<=e.bottom||n>=e.top&&n<=e.bottom)t<a&&(a=t),t>o&&(o=t);else if(o>0)break;return{firstVisiblePage:a,lastVisiblePage:o}},displayHiddenPages_:function(e,t){var i,n,a;for(n=this.minPage_-1;n<this.maxPage_;n++)if((i=this.pages_[n])&&(a=n>=e&&n<=t,i.visible!==a)){for(var o=i.elements,s=0;s<o.length;s++)o[s].style.visibility=a?"":"hidden";i.visible=a}},hasScroll:function(){return!!this.nextPageTreshold_}},e.exports=n},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("NavigationBarPopularity",function(e){return e.popularity?n.createElement("div",{className:"navigation-bar__icon js-navigation","data-action":"popularity","data-qa":"navbar-popularity","data-popularity-level":e.popularity},n.createElement(a,{name:"speedometer-popularity-".concat(e.popularity)})):null})},function(e,t,i){"use strict";function n(e,t){var i=t.getDefaultProductUid();return e.find(function(e){return e.getUid()===i})||!a(t)&&e[0]}function a(e){return e&&161===e.getProvider()}function o(e){var t=e.backHistoryEntry,i=e.newNavigation,n=e.success,a=e.cancelled;if(t)return g.goToHistoryEntry(t,function(e,t){i&&(t(),g.navigate(i,!0,{paymentSuccess:n,paymentCancelled:a}))}),!0}var s=i(3),r=s(i(4)),l=s(i(127)),c=i(25),u=i(100),d=i(148),h=i(155),p=i(132),m=i(99),g=i(103),_=i(266).getInstance(),f=i(111),v=i(379),E=i(3389),b=i(257),y=i(216),k=i(211),S=i(124),w=i(126),C=i(3390),T=i(222),P=i(241),N=i(3391),I=i(121),x=i(3393),A=i(3395),O=i(3398),V=i(3400),R=i(315),B=i(197),L=i(3404),F=i(3406),M=i(136),D=i(341),U=i(142),j=U.PAGE_TRANSITIONS,G=U.waitForPageTransitionFinish,q=i(105),H=q.FeatureProductList,z=q.PurchaseTransactionSetupParams,Y=q.PurchaseTransactionFailed,$=q.ServerErrorMessage,W=i(101).ReceivePaymentExternalIdEvent,K=i(103),Q=K.getLocation,X=K.updateLocation,Z=i(122),J=i(102),ee=i(459),te=f("PAYMENTS"),ie=u.clone(I.VIEWS);ie.PARENT="parent",ie.CC_OVERLAY="cc_overlay";var ne=f("CAROUSEL","METHODS_OF_PAYMENT","PAYMENT_PACKAGES","PAYMENT_BOTTOM","TRANSACTIONS","ERROR_HANDLER","FLOATING_BUTTON"),ae=I.BUTTONS,oe={tnc:"terms",privacy:"privacy",payment_settings:"settings-payments",help:"help",feedback:"feedback"},se=I.extend({notificationScreenAccess:3,screenName:214,activationPlace:78,createElement:function(){return M({className:"pay"})},transition:j.NONE,hasSpp_:!1,title_:null,mode_:null,featureId_:null,productType_:null,pendingTransaction_:null,hotPanelPaymentFlowId_:null,selectedMOP_:null,selectedProduct_:null,defaultProvider_:null,storedMopText_:null,userWantsAutoTopup_:!0,ccOverlayActive_:!1,open:function(e){var t=e.parameters,i=t.hotPanelData,n=u.isString(i)?JSON.parse(i):i,a=(0,l.default)({},t,{hotPanelData:n});if(!u.get(n,"activationPlace")){var o=Q().routeName;a.hotPanelData=(0,l.default)({},n,{activationPlace:e.activationPlace||78}),X(o,a)}var s=this.parameters_;if(se._super.open.call(this,(0,l.default)({},e,{parameters:a})),a.purchase&&this.readyForTransaction_){var r=Q().routeName;return X(r,u.omit(a,"purchase")),void this.startTransaction_(a.purchase)}this.resetScreen_();var c=D(s,a);c&&u.isEmpty(c.added)&&u.isEmpty(c.changed)&&c.removed&&c.removed.hotPanelData||this.preparePayment_()},init:function(){se._super.init.apply(this,arguments),d(this),this.parentView_=this.registerView(ie.PARENT,new L),this.parentView_.appendTo(this.element),this.registerSubComponents_(),T.on(T.EVENTS.CHANGE,this.onCreditsUpdate_,this),this.pendingTransaction_=!1,this.configureNavigationBar_()},destroy:function(){se._super.destroy.apply(this,arguments),T.off(T.EVENTS.CHANGE,this.onCreditsUpdate_)},onStart:function(){se._super.onStart.apply(this,arguments),k.on(k.ACTIONS.WAKE_UP,this.onWakeup_,this)},onStop:function(){se._super.onStop.apply(this,arguments),this.title_=null,this.pendingTransaction_&&this.stopTransaction_(),this.hideCCOverlay(),k.off(k.ACTIONS.WAKE_UP,this.onWakeup_)},onWakeup_:function(){this.defaultProvider_&&this.onMopSelect_(this.defaultProvider_,!0)},preparePayment_:function(){var e=this.getParameter("productType")?parseInt(this.getParameter("productType"),10):null,t=parseInt(this.getParameter("promoBlockType"),10),i=this.getParameter("hotPanelData")||{},n=this.getParameter("paymentFlowId"),a=this.getParameter("userId");this.getReadyBeforeSetup_(e,t,a,i,n)},registerSubComponents_:function(){var e=this.parentView_,t=e.getSection(L.SECTIONS.HEADER),i=new V(t);this.promoBlocksCarousel_=this.registerController(ne.CAROUSEL,i).on(V.EVENTS.START_PAYMENT,this.showLoading_).on(V.EVENTS.END_PAYMENT,this.hideLoading_);var n=e.getSection(L.SECTIONS.METHODS_OF_PAYMENT);this.registerController(ne.METHODS_OF_PAYMENT,new N(n)).on(N.ACTIONS.SELECT_MOP,this.onMopSelect_);var a=e.getSection(L.SECTIONS.PAYMENT_PACKAGES),o=new O(a);this.registerController(ne.PAYMENT_PACKAGES,o).on(O.ACTIONS.CONFIRM_PACKAGE,this.onSubmit_,this).on(O.ACTIONS.SELECT_PACKAGE,this.onPackageSelect_,this);var s=e.getSection(L.SECTIONS.PAYMENT_BOTTOM),r=new x({container:s,onCancelButtonClick:function(){return g.back()}});this.registerController(ne.PAYMENT_BOTTOM,r).on(x.ACTIONS.AUTO_TOPUP_TOGGLE,this.onAutoTopupToggle_).on(x.ACTIONS.TERMS_CLICK,this.onTermsClick_),this.registerController(ne.TRANSACTIONS,new R({mode:R.MODES.NEW_LAYOUT})).on(R.EVENTS.SUCCESS,this.onPaymentSuccess_).on(R.EVENTS.FAILED,this.onPaymentFailed_).on(R.EVENTS.COMPLETE,this.onPaymentComplete_).on(R.ACTIONS.BACK,this.onTransactionSelectNewMOP_);var l=e.getSection(L.SECTIONS.FLOATING_BUTTON),c=new A(l);this.registerController(ne.FLOATING_BUTTON,c).on(A.ACTIONS.CLICK_SUBMIT,this.onSubmit_).on(A.ACTIONS.CLICK_SELECT_ANOTHER_METHOD,this.onCancel_),this.floatingButton_=c},getReadyBeforeSetup_:function(e,t,i,n,a){var o=this,s=this.getParameter("giftProductId");if(5===e&&!s)return this.log.error("Try to send gift without gift data provided"),void g.back();if(this.resetScreen_(),this.hotPanelData_=n,!e)return this.log.warn("No feature nor product type supplied to payment options page, going back."),g.back(),Promise.reject(new Error("No feature nor product type supplied to payment options page"));var r=n.activationPlace,l=y.trackStart(a,e,r,{bannerId:n.bannerId,isOneClickPayment:n.isOneClickPayment,objectId:s?String(s):void 0,product:n.product,spendingUid:n.spendingUid,eventVersion:this.hotPanelData_.eventVersion});this.setHotPanelPaymentFlowId(l),T.get().then(function(){if(o.isStarted()){var n=function(e,t){if(1===e){var i=t&&8!==t;return i?C.SPP_CONTEXTUAL:C.SPP}var n=12===e;return e&&13!==e||n?C.CREDITS_CONTEXTUAL:13===e?C.CREDITS:C.CREDITS_CONTEXTUAL}(e,t);return o.hasSpp_=p.getSync(19).getEnabled(),o.productType_=e,o.setup_(n,i,t)}}).catch(function(e){o.handleError_(e)})},handleError_:function(e){var t=this;if(!this.isStarted()){if(e instanceof Z.RpcError||e instanceof $)return;throw e}var i=B.handleError({error:e,screenName:this.getScreenName(),navigationBar:this.getNavigationBarContext()});if(!i)throw e;i.on(i.EVENTS.REFRESH,function(){return t.preparePayment_()})},setup_:function(e,t,i){var n=this.getParameter("transactionResult");if(n&&(n=h(n)),n instanceof H&&(this.featureProductList_=n),this.mode_=e,e!==C.SPP&&e!==C.SPP_CONTEXTUAL||this.onSppFeature_(p.getSync(19)),this.pendingTransaction_&&this.stopTransaction_(),this.featureProductList_&&e!==C.SPP_CONTEXTUAL)return this.displayContent_(this.featureProductList_);var a=this.getParameters(),o=a.chatMessage,s=a.cost,r=a.creditsForProduct,l=a.hotPanelData,c={cost:s||l&&l.cost,chatMessage:o,creditsForProduct:r,productType:this.productType_,promoBlockType:i};return t&&(c.userId=t),this.getProductList_(c)},getPageTitle_:function(e,t){return e===C.SPP?m.get(139):e===C.CREDITS?this.userHasEnoughCredits_()?m.get(383,T.getCredits().toLocaleString(null,{})):m.get(271):t||""},onSppFeature_:function(e){e&&!e.getEnabled()||this.onFail_(m.get(262))},getProductList_:function(e){var t=this;return P.getInstance().canUseInstantPaywall(this.productType_)?P.getInstance().getContextPayWall(this.productType_,e).then(function(e){var i=(0,r.default)(e,1)[0];return t.displayCarousel_(i)}):this.showLoading_(),P.getInstance().get(this.productType_,e).spread(this.displayContent_).catch(function(e){try{t.handleError_(e)}catch(e){if(e instanceof $)return void(t.isStarted()&&t.onFail_(e.getErrorMessage()));throw e}})},displayContent_:function(e){this.featureProductList_=null,this.products_=e.getProducts(),this.providers_=e.getProviderName(),this.fallbackPromo_=e.getFallbackPromo();var t=e.getServiceTitle(),i=this.getPageTitle_(this.mode_,t);this.setTitle(i),this.storedMopText_=E.getStoredMopText(e),this.topUpText_=e.getAutoTopUpText(),this.displayBottomPart_(),this.storedMopText_||this.displayMOPs_(e),this.defaultProvider_=E.getDefaultProvider(e),this.onMopSelect_(this.defaultProvider_,!0,e),this.displayCarousel_(e),this.getController(ne.TRANSACTIONS).checkPendingPayment()?this.showLoading_():this.hideLoading_(),this.trackViewPaymentWizard_(e),this.readyForVrt()},trackViewPaymentWizard_:function(e){var t=e.getSavedPaymentAvailable(),i=this.promoBlocksCarousel_.getCurrentPromoBlock(),n={autoTopup:!!this.getController(ne.PAYMENT_BOTTOM).getAutoTopupValue().checked,credits:T.getCredits(),hasSpp:this.hasSpp_,productId:this.selectedProduct_&&this.selectedProduct_.getUid(),providerId:this.selectedMOP_.getProviderId(),carouselBannerId:i&&i.bannerId};y.trackViewPaymentWizard(this.hotPanelPaymentFlowId_,t,n)},displayMOPs_:function(e){var t=E.getMopData_(e.getProducts(),e.getProviderName());this.getController(ne.METHODS_OF_PAYMENT).updateParameters({providers:t})},displayPackages_:function(e,t,i,n){var a=E.getPackagesData(e,t,i,n);this.getController(ne.PAYMENT_PACKAGES).updateParameters({packages:a,productType:this.productType_})},displayCarousel_:function(e){var t=function(e){if(e){var t=e.getProductPromos([]).filter(function(e){return 10===e.getPromoBlockPosition()}),i=e.getDefaultCarouselPromo();if(i){var n=u.findIndex(t,function(e){return e.getPromoBlockType()===i});if(n>0){var a=[t[n],t[0]];t[0]=a[0],t[n]=a[1]}}return t}}(e);if(t.length){var i=E.getContextualCarouselData(t);this.promoBlocksCarousel_.updateParameters({promoBlocks:i,productType:this.productType_})}},displayBottomPart_:function(){this.getController(ne.PAYMENT_BOTTOM).render({autoTopup:this.getAutoTopupData_(),mopText:this.getSavedPaymentText_(),unsubscribeInstructions:this.getUnsubscribeInstructions_(),termsLink:this.getTermsLink_(),cancelButton:this.selectedMOP_&&this.selectedMOP_.getExplicitCancel(),terms:this.getTerms_()})},getAutoTopupData_:function(){return this.selectedMOP_&&this.selectedMOP_.getShowTopUp()&&{text:this.topUpText_,enabled:this.providerProduct_&&this.providerProduct_.getIsTopUpPossible(),checked:this.providerProduct_&&this.providerProduct_.getTopUpDefaultState()&&this.userWantsAutoTopup_}},getSavedPaymentText_:function(){return this.selectedMOP_&&a(this.selectedMOP_)&&this.providerProduct_?this.providerProduct_.getSavedPaymentText():this.storedMopText_},getTermsLink_:function(){return this.selectedMOP_&&a(this.selectedMOP_)&&this.selectedMOP_.getShowDisclaimer()},getUnsubscribeInstructions_:function(){return this.selectedMOP_&&a(this.selectedMOP_)&&this.providerProduct_&&this.providerProduct_.getUnsubscribeInstructions()},getTerms_:function(){if(this.selectedMOP_){if(a(this.selectedMOP_))return this.selectedMOP_.getShortTnc();var e=this.providerProduct_&&this.providerProduct_.getUnsubscribeInstructions();return this.selectedMOP_.getShowDisclaimer()&&"{tnc|".concat(m.get(146),"}").concat(e?". ".concat(e):"")}},setTitle:function(e){this.title_=e,this.updateNavigationBar({title:e})},configureNavigationBar_:function(){this.updateNavigationBar({scrollToggleClass:"navigation-bar--shadow",scrollToggle:1}),this.getView(ie.NAVIGATION_BAR).attachToggleScroll()},stopTransaction_:function(){this.getController(ne.TRANSACTIONS).stop(),this.parentView_.unblockPayments(),this.showSubmitButtonState_(),this.pendingTransaction_=!1},resetScreen_:function(){this.resetViews_(),this.resetState_(),this.setTitle("")},resetViews_:function(){this.promoBlocksCarousel_.reset(),this.getController(ne.PAYMENT_PACKAGES).reset(),this.getController(ne.METHODS_OF_PAYMENT).reset(),this.getController(ne.PAYMENT_BOTTOM).reset()},resetState_:function(){this.selectedMOP_=null,this.selectedProduct_=null},onSubmit_:function(){var e=this.getController(ne.PAYMENT_BOTTOM).getAutoTopupValue(),t={autoTopup:e.enabled&&e.checked,chatMessage:this.getParameter("chatMessage"),creditsForProduct:this.getParameter("creditsForProduct"),livestreamMessage:this.getParameter("livestreamMessage"),photoId:this.getParameter("photoId"),productType:this.productType_,promoBlockVariantId:this.getParameter("promoBlockVariantId"),provider:this.selectedMOP_.getProvider(),providerId:this.selectedMOP_.getProviderId(),providerName:this.selectedMOP_.getProviderName(),stickerPackId:this.getParameter("stickerPackId"),uid:this.selectedProduct_.getUid(),userId:this.getParameter("userId"),priceToken:this.getPriceTokenFromSelectedProduct()};if(y.trackClickBuy(this.hotPanelPaymentFlowId_,this.selectedProduct_.getUid(),this.selectedMOP_.getProviderId(),this.isDefaultProduct(this.selectedProduct_),this.isDefaultProvider(this.selectedMOP_),this.getController(ne.PAYMENT_BOTTOM).getAutoTopupValue(),!!this.storedMopText_),E.getIsProductTrial(this.selectedProduct_)){var i={inviteContext:27,inviteFlow:2,triggerActivationPlace:this.activationPlace,triggerScreenName:214};g.navigate("invitations",i)}else this.readyForTransaction_=!0,!1===this.selectedMOP_.getStartTransactionToDisplayWizard()&&this.selectedMOP_.getPrefilledBillingInfo()?g.navigate("add-billing-info",{purchase:t,selectedProvider:this.selectedMOP_}):this.startTransaction_(t)},startTransaction_:function(e){var t=this;this.pendingTransaction_=!0,a(this.selectedMOP_)?this.showLoading_():(this.parentView_.blockPayments(),this.getController(ne.FLOATING_BUTTON).showSelectAnotherMethodState(this.selectedMOP_.getProviderName())),setTimeout(function(){var i=t.getController(ne.TRANSACTIONS);if(i.start(),2===t.selectedMOP_.getProviderId()&&ee.isActive()){t.getView(ie.NAVIGATION_BAR).hide(),t.getView(ie.PARENT).hide(),t.ccOverlayView_=t.registerView(ie.CC_OVERLAY,new F),t.ccOverlayView_.appendTo(t.element),t.ccOverlayView_.showLoading(),t.ccOverlayActive_=!0,_.pauseHistory();var n=t.ccOverlayView_.getIframe();window.addEventListener("message",t.onMessageFromIframe),n.onload=function(){t.ccOverlayView_&&t.ccOverlayView_.hideLoading()},i.updateParameters((0,l.default)({},e,{iframe:n}))}else i.updateParameters(e)},0)},onCancel_:function(){this.parentView_.unblockPayments(),this.showSubmitButtonState_()},onMopSelect_:function(e,t,i){this.userWantsAutoTopup_=!0,this.selectedMOP_=e,this.cachedFeatureProductList_=i||this.cachedFeatureProductList_;var a=e.getProviderId();this.displayPackages_(this.cachedFeatureProductList_,this.products_,this.providers_,a),this.displayBottomPart_(),this.getController(ne.METHODS_OF_PAYMENT).select(a);var o=n(this.products_,this.selectedMOP_);if(this.onPackageSelect_(o,!0),this.showSubmitButtonState_(),!t){var s=this.isDefaultProvider(this.selectedMOP_);y.trackChangePaymentMethodEvent(this.hotPanelPaymentFlowId_,a,s,!!this.storedMopText_,{productId:o&&o.getUid(),autoTopup:!!this.getController(ne.PAYMENT_BOTTOM).getAutoTopupValue().checked})}},showSubmitButtonState_:function(){this.floatingButton_.showSubmitState({disabled:!this.selectedProduct_,text:this.getSubmitButtonText_(),subText:this.getSubmitButtonSubtext_()})},getSubmitButtonText_:function(){if(this.selectedMOP_&&a(this.selectedMOP_))return this.providerProduct_&&this.providerProduct_.getServiceActionText()||this.selectedMOP_.getServiceAction()},getSubmitButtonSubtext_:function(){return this.providerProduct_&&a(this.selectedMOP_)&&this.providerProduct_.getServiceActionSubtext()},onPackageSelect_:function(e,t){if(this.selectedProduct_=e,e){var i=e.getUid(),a=this.selectedMOP_.getProviderId(),o=E.getIsProductTrial(e)?e.getProviders()[0]:u.find(e.getProviders(),function(e){return e.getProviderId()===a});if(o&&(this.providerProduct_=o,this.displayBottomPart_(),this.getController(ne.PAYMENT_PACKAGES).select(i),this.showSubmitButtonState_(),!t)){var s=n(this.products_,this.selectedMOP_),r=!!s&&s.getUid()===i,l=this.getController(ne.PAYMENT_BOTTOM).getAutoTopupValue();y.trackChangePaymentPackage(this.hotPanelPaymentFlowId_,i,r,l.enabled&&l.checked,!!this.storedMopText_,{providerId:a,isDefaultProvider:this.isDefaultProvider(this.selectedMOP_)})}}},onAutoTopupToggle_:function(e){this.userWantsAutoTopup_=e,y.trackChangeAutoTopup(this.hotPanelPaymentFlowId_,e)},onTermsClick_:function(e){if(a(this.selectedMOP_)){var t=oe[e];return t&&g.navigate(t),void("product_terms"===e&&this.openProductTerms_())}this.openProductTerms_()},openProductTerms_:function(){var e;switch(this.mode_){case C.CREDITS:case C.CREDITS_CONTEXTUAL:e=13;break;case C.SPP:case C.SPP_CONTEXTUAL:e=1;break;default:this.log.warn("What mode should we display T&C for? Let's default with Credits"),e=13}var t,i,n=this.getParameter("purchaseData");n&&(n.isInstantPayWall=P.getInstance().canUseInstantPaywall(e),i=(t=v(e,n))?t.getPurchaseParams():null);var a=this.getParameter("livestreamMessage"),o=this.getParameter("userId");a&&(i||(i=new z),i.setLivestreamMessage(a).setUserId(o)),g.navigate("payment-terms",{hotPanelData:{existingPaymentFlowId:this.hotPanelPaymentFlowId_},productType:e,providerId:this.selectedMOP_.getProviderId(),productUid:this.selectedProduct_?this.selectedProduct_.getUid():void 0,purchaseParams:i})},onNavigationAction:function(e){var t=this;if(e===ae.CLOSE&&this.hideCCOverlay(),e===ae.BACK||e===ae.CLOSE)if(y.trackPaymentResult(this.hotPanelPaymentFlowId_,y.RESULT.CANCELLED,this.hotPanelData_.eventVersion),this.setHotPanelPaymentFlowId(null),this.pendingTransaction_)this.stopTransaction_();else{var i={success:!1,cancelled:!0};o((0,l.default)({},this.getParameters(),i))||g.back(),this.executeCallback_(i),this.fallbackPromo_&&65===this.fallbackPromo_.getPromoBlockType()&&G(function(){g.navigate("spp-trial",{context:116,activationPlace:t.activationPlace})})}},executeCallback_:function(e){var t=this.getParameter("callback");t&&t(e)},onFail_:function(e){y.trackPaymentResult(this.hotPanelPaymentFlowId_,y.RESULT.FAILURE,this.hotPanelData_.eventVersion),this.setHotPanelPaymentFlowId(null),S.showNotification({type:S.TYPES.ERROR,text:e}),this.onNavigationAction(ae.BACK)},onPaymentFailed_:function(e){if(this.hideCCOverlay(),y.trackPaymentResult(this.hotPanelPaymentFlowId_,y.RESULT.FAILURE,this.hotPanelData_.eventVersion),e instanceof Y&&1===e.getType()){var t=e.getNotification();S.showNotification({type:S.TYPES.ERROR,text:t&&t.getMessage()}),P.getInstance().invalidateAll(),g.back()}this.executeCallback_({purchaseReceipt:e,success:!1}),this.stopTransaction_()},onPaymentSuccess_:function(e){if(1===this.hotPanelData_.eventVersion){var t=e.getHpExternalId();t&&J.track(W,{uuid:this.hotPanelPaymentFlowId_,external_id:t})}_.restartHistory(),this.pendingTransaction_=!1;var i={success:!0,purchaseReceipt:e};o((0,l.default)({},this.getParameters(),i))||g.goBackTo(b.getInstance().getBackRoute()||this.getParameter("back")||w.get("default.page"),this.getParameter("newNavigation"),!0),this.executeCallback_(i),this.hideCCOverlay(),this.parentView_.unblockPayments(),this.showSubmitButtonState_(),y.trackPaymentResult(this.hotPanelPaymentFlowId_,y.RESULT.SUCCESS,this.hotPanelData_.eventVersion),this.setHotPanelPaymentFlowId(null)},onPaymentComplete_:function(){this.hideLoading_()},onTransactionSelectNewMOP_:function(){this.hideCCOverlay(),this.stopTransaction_()},onCreditsUpdate_:function(){var e=this.getPageTitle_(this.mode_);e&&this.setTitle(e)},showLoading_:function(){this.parentView_.showLoading()},hideLoading_:function(){this.parentView_.hideLoading()},isDefaultProvider:function(e){return this.defaultProvider_&&this.defaultProvider_.getProviderId()===e.getProviderId()},isDefaultProduct:function(e){var t=E.getMostPopularProductForProvider(this.products_,this.selectedMOP_);return!!t&&t.getUid()===e.getUid()},userHasEnoughCredits_:function(){var e=T.getCredits();return void 0!==e&&e>=100},shouldDisplayTC_:function(e){return e.reduce(function(e,t){return e||t.getShowDisclaimer()},!1)},setHotPanelPaymentFlowId:function(e){this.hotPanelPaymentFlowId_=e,this.promoBlocksCarousel_.setHotPanelPaymentFlowId(e)},getPriceTokenFromSelectedProduct:function(){var e=this.selectedMOP_&&this.selectedMOP_.getProviderId(),t=this.selectedProduct_&&this.selectedProduct_.getProviders()||[],i=t.find(function(t){return t.getProviderId()===e}),n=i&&i.getPriceToken();return n||(this.log.error("Error getting price_token from selected product",{selectedMOP_:this.selectedMOP_,selectedProduct_:this.selectedProduct_,productProviders:t}),"")},hideCCOverlay:function(){if(this.ccOverlayActive_){if(c.os.ios&&this.isKeyboardVisible_){this.isKeyboardVisible_=!1;var e=c('<input type="text">');e.appendTo(c("body")),e.on("focus",function(){setTimeout(function(){e.blur(),e.remove()},300)}),e.focus()}this.getView(ie.NAVIGATION_BAR).show(),this.getView(ie.PARENT).show(),window.removeEventListener("message",this.onMessageFromIframe),this.ccOverlayView_.destroy(),this.ccOverlayActive_=!1}},onMessageFromIframe:function(e){e&&e.data&&(this.isKeyboardVisible_=e.data.isKeyboardVisible)}},"Payments");se.MODELS=te,se.VIEWS=ie,se.CONTROLLERS=ne,e.exports=se},function(e,t,i){"use strict";var n=i(25),a=i(131),o=i(171),s=i(109),r=50,l={TOUCH_START:"touch-start",TOUCH_MOVE:"touch-move",TOUCH_END:"touch-end",SCROLL_CHANGE:"scroll-change"},c={FORWARD:"forward",BACKWARD:"backward",NONE:"none"},u=s.extend({$el:null,innerContainer_:null,children_:null,childrenId_:null,touch_:null,isScrolling_:null,closest_:null,closestPrev_:null,active_:null,activeIndex_:0,position_:0,width_:0,delta_:0,index_:0,scrollCallback_:null,activeStyleName_:"",currX_:0,currY_:0,preventScrollCallbacks_:!1,isTouchStarted_:!1,events:{touchstart:"onTouchStart_",touchmove:"onTouchMove_",touchend:"onTouchEnd_"},init:function(e){this.innerContainer_=this.$el.find(".js-scrollable"),e&&e.handleBullets&&(this.bulletsContainer_=this.$(".js-bullets-container"),0===this.bulletsContainer_.length?this.bulletsContainer_=void 0:(this.handleBullets_=!0,this.innerContainer_.find(".js-carousel-page").each(function(e,t){n(t).data("index",e)}))),this.childrenId_={},this.children_=[],this.onTouchStart_=this.onTouchStart_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onScrollToChildEnd_=this.onScrollToChildEnd_.bind(this)},setActiveStyleName:function(e){return this.activeStyleName_=e,this},setScrollCallback:function(e,t){return this.scrollCallback_=e.bind(t),this},updateLayout:function(e,t){return this.width_=this.$el.offset().width,this.setChildren_(),this.closest_&&this.scrollToChild_(this.closest_,t),e&&this.onScrollToChildEnd_(),this.updateActiveStyle_(this.closest_||this.children_[0]),this},getItems:function(){return this.children_},selectNext:function(){this.selectChild((this.closest_?this.closest_.index:0)+1,!0)},selectPrev:function(){this.selectChild((this.closest_?this.closest_.index:this.children_.length)-1,!0)},selectChildById:function(e){this.selectChild(this.childrenId_[e])},selectChild:function(e,t,i){var n=this.children_[e];n&&this.scrollToChild_(n,t,i)},setChildren_:function(){var e=this,t="rtl"===window.language_direction,i=this.childrenId_,n=t?this.el.offsetWidth-this.innerContainer_.children()[0].offsetWidth:this.el.offsetLeft;if(this.children_.length=this.innerContainer_.children().length||0,this.children_.length){Array.prototype.forEach.call(this.innerContainer_.children(),function(t,a){e.children_[a]||(e.children_[a]={});var o=t.getAttribute("data-id");i[o]=a;var s=e.children_[a],r=t.offsetLeft-n;s.el=t,s.id=o,s.index=a,s.position=r,s.width=t.offsetWidth});var a=this.children_.length-1,o=this.children_[a];this.max_=o.position}},scrollToChild_:function(e,t,i){var n=this,o=function(e,t){return e?e.index<t.index?c.FORWARD:e.index>t.index?c.BACKWARD:c.NONE:c.FORWARD}(this.closest_,e);this.closestPrev_=this.closest_,this.closest_=e,this.index_=e.index;var s=this.innerContainer_;t&&s.addClass("is-animated"),this.scrollToPosition_(-e.position),t?a.onTransitionEnd(s[0],function(){return n.onScrollToChildEnd_(o,i)}):this.preventScrollCallbacks_=!1,this.updateActiveStyle_(this.closest_)},onScrollToChildEnd_:function(e,t){this.innerContainer_.removeClass("is-animated"),this.scrollCallback_&&this.closest_&&this.scrollCallback_(this.closest_,t),this.handleBullets_&&this.updateBullets(),this.preventScrollCallbacks_=!1,e!==c.NONE&&!0===t&&this.trigger(l.SCROLL_CHANGE,{direction:e})},updateActiveStyle_:function(e){this.active_!==e&&this.activeStyleName_&&(this.active_&&n(this.active_.el).removeClass(this.activeStyleName_),e&&(n(e.el).addClass(this.activeStyleName_),this.active_=e))},scrollToPosition_:function(e){var t="rtl"===window.language_direction,i=this.delta_>0;i&&(t?e<0:e>0)?e=0:!i&&(t?e<=this.max_:e<=-this.max_)&&(e=-this.max_);var n=this.innerContainer_;return!!n&&(n.css({transform:"translate3d(".concat(e,"px, 0, 0)")}),void(this.position_=e))},findClosest:function(e,t){if(this.children_&&this.children_.length){t<0?e-=this.width_:t>0&&(e+=this.width_);for(var i=this.children_[0],n=Math.abs(i.position-e),a=1;a<this.children_.length;a++)Math.abs(this.children_[a].position-e)<n&&(i=this.children_[a],n=Math.abs(i.position-e));return i}},onTouchStart_:function(e){if(!(this.children_.length<2||this.preventScrollCallbacks_)){var t=n.os.supportsTouch?e.touches[0]:e;this.preventMove_=!1,this.startX_=this.currX_=0,this.startY_=this.currY_=0,this.pointX_=t.pageX,this.pointY_=t.pageY,this.closest_&&(this.activeIndex_=this.closest_.index),this.isTouchStarted_=!0,this.trigger(l.TOUCH_START)}},onTouchMove_:function(e){if(!(this.children_.length<2||this.preventMove_||this.preventScrollCallbacks_)){if(!this.isTouchStarted_)return this.isTouchStarted_=!1,void this.onTouchStart_(e);var t=n.os.supportsTouch?e.touches[0]:e,i=t.pageX-this.pointX_,a=t.pageY-this.pointY_;this.currX_+=i,this.currY_+=a,this.pointX_=t.pageX,this.pointY_=t.pageY,this.distX_=this.currX_-this.startX_,this.distY_=this.currY_-this.startY_,a>0&&0===o().scrollTop&&e.preventDefault(),this.isScrolling_||(this.isScrolling_=Math.abs(i)>Math.abs(a)),this.isScrolling_?(e.preventDefault(),this.delta_=i,this.scrollToPosition_(this.position_+i)):this.preventMove_=!0;var s=this.getClosestIndex_(this.distX_)||this.activeIndex_;this.updateActiveStyle_(this.children_[s]),this.trigger(l.TOUCH_MOVE)}},onTouchEnd_:function(){if(!(this.children_.length<2||!this.isScrolling_||this.preventScrollCallbacks_)){this.preventScrollCallbacks_=!0,this.isTouchStarted_=!1;var e=this.getClosestIndex_(this.distX_);this.selectChild(e,!0,!0),this.isScrolling_=!1,this.trigger(l.TOUCH_END,e)}},getIndex:function(){return this.index_},getClosestIndex_:function(e){var t=function(e){var t=e<0,i="rtl"===window.language_direction;return t&&e<-r?i?c.BACKWARD:c.FORWARD:!t&&e>r?i?c.FORWARD:c.BACKWARD:c.NONE}(e);if(t===c.BACKWARD){for(var i=e,n=this.index_-1;n>=0&&!((i-=this.children_[n].width)<r);)n--;return Math.max(n,0)}if(t===c.FORWARD){for(var a=-e,o=this.index_+1;o<this.children_.length&&!((a-=this.children_[o].width)-r<r);)o++;return Math.min(o,this.children_.length-1)}return this.index_},updateBullets:function(){if(this.isEnabled()){
var e=this.bulletsContainer_.children();e.removeClass("is-active"),e.eq(n(this.closest_.el).data("index")).addClass("is-active")}}},"StickyScroll");u.EVENTS=l,u.DIRECTIONS=c,e.exports=u},function(e,t,i){"use strict";var n=i(25),a=i(173),o=i(111),s=i(3478),r=o("CONFIRM","CONTACT_SUPPORT","RETRY","LOGOUT","CHANGE_METHOD"),l=a.extend({template_:s,ACTIONS:r,events:Object.assign({"keyup .js-phone-digit":"onInput_"},a.prototype.events),getValue_:function(){return this.$(".js-phone-digit").get().map(function(e){return e.value}).join("")},onInput_:function(e,t){this.$(".show-error").removeClass("show-error"),this.$(".is-invalid").removeClass("is-invalid");var i=this.getValue_().length===this.$(".js-phone-digit").length;if(this.$(".js-confirm")[i?"removeAttr":"attr"]("disabled","disabled"),!(n.os.ios&&n.os.version<8)){var a=n(t),o=a.val();o&&o.length>0?a.parent().next().find(".js-phone-digit").focus():8===e.keyCode&&0===o.length&&a.parent().prev().find(".js-phone-digit").focus()}},onAction_:function(e){var t=n(e.target);return t.data("action")===r.CONFIRM&&t.data("value",this.getValue_()),l._super.onAction_.apply(this,arguments)}},"SMS");l.ACTIONS=r,e.exports=l},function(e,t,i){"use strict";var n=i(121),a=i(3591),o=i(102),s=i(103),r=i(239),l=i(126),c=i(101),u=c.ViewElementEvent,d=c.ClickEvent,h=n.extend({headerTemplate:null,waitingForAction_:!1,screenName:284,init:function(){h._super.init.apply(this,arguments),this.onboardingView=this.registerView(new a).on(a.EVENTS.BUTTON_CLICK,this.handleButtonClick_,this)},onStart:function(){if(h._super.onStart.apply(this,arguments),this.onboardingStepNumber_=Number(this.getParameter("onboardingStepNumber")),this.onboardingStep_=r.getOnboardingStep(this.onboardingStepNumber_),this.onboardingStep_){if(!this.isRelevant())return this.sendOnboardingPageEvent_(8),void this.next_();this.waitingForAction_=!1,this.onboardingView.appendTo(this.parent),this.onboardingView.render(this.onboardingStep_)}else s.navigate(l.get("default.page"))},isRelevant:function(){return!0},onReady:function(){h._super.onReady.apply(this,arguments),this.onboardingStep_?(this.trackElementView_(),this.sendOnboardingPageEvent_(2)):s.navigate(l.get("default.page"))},trackElementView_:function(){this.hotpanelElement&&o.track(u,{element:this.hotpanelElement,screen_name:this.screenName})},handleButtonClick_:function(e){var t=this.buttons[e.getAction()];this.trackButtonClick_(t);var i=t.action;i?this.performAction_(i):this.dismiss_()},performAction_:function(e){var t=this;this.waitingForAction_||(this.waitingForAction_=!0,e().then(function(){t.waitingForAction_&&(t.waitingForAction_=!1,t.sendOnboardingPageEvent_(10),t.next_())}))},next_:function(){r.next(this.onboardingStepNumber_)},dismiss_:function(){this.waitingForAction_=!1,this.sendOnboardingPageEvent_(4),this.next_()},trackButtonClick_:function(e){this.sendOnboardingPageEvent_(1),o.track(d,{element:e.element,parent_element:this.hotpanelElement})},sendOnboardingPageEvent_:function(e){r.sendOnboardingPageEvent({pageId:this.onboardingStep_.onboardingPage.getPageId(),event:e})}},"OnboardingStepController");e.exports=h},function(e,t,i){"use strict";var n=i(3),a=n(i(144)),o=n(i(110)),s=n(i(112)),r=n(i(114)),l=n(i(115)),c=n(i(123)),u=n(i(116)),d=i(98);e.exports=function(e,t,i){return function(n){function h(e){var t;return(0,o.default)(this,h),(t=(0,r.default)(this,(0,l.default)(h).call(this,e))).checkScrollState=t.checkScrollState.bind((0,c.default)(t)),t.state={scrollToggle:i||!1},t}return(0,u.default)(h,n),(0,s.default)(h,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.checkScrollState,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.checkScrollState,!1)}},{key:"checkScrollState",value:function(){this.setState({scrollToggle:window.pageYOffset>=(t||1)})}},{key:"render",value:function(){return d.createElement(e,(0,a.default)({scrollToggle:this.state.scrollToggle},this.props))}}]),h}(d.Component)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n,a=i(167),o=i(260),s=i(129),r=(i(132),i(2833)),l=i(148),c={INTERRUPTING:"interrupting"},u=s.extend({listening_:!1,referrer_:null,notificationId_:null,hideNext:!1,init:function(){l(this),o.checkPendingShares("Invites")},onStart:function(){this.listening_||(this.listening_=!0,r.getInstance().on(r.EVENTS.SEND_REQUESTS,this.onConfirm_,this).on(r.EVENTS.KEEP_PLAYING,this.cleanUp_,this).on(r.ACTIONS.DISMISS,this.onDismiss_,this),a.getInstance().on(a.Type.NOTIFICATION,this.onClientNotification_,this))},sendAppRequest:function(){o.sendFacebookInvites({id:"Invites",referrer:this.referrer_,notificationId:this.notificationId_},this.cleanUp_)},onStop:function(){u._super.onStop.apply(this,arguments),a.getInstance().off(a.Type.NOTIFICATION,this.onClientNotification_,this),r.getInstance().off(r.EVENTS.SEND_REQUESTS,this.onConfirm_,this).off(r.EVENTS.KEEP_PLAYING,this.cleanUp_,this).off(r.ACTIONS.DISMISS,this.onDismiss_,this),this.listening_=!1},shouldShowNotification_:function(e){var t=!0;return this.hideNext&&(this.hideNext=!1,t=!1),60===e&&(this.hideNext=!0,t=!1),!!e&&t},onClientNotification_:function(e){var t=e.getId(),i=e.getType();if(this.shouldShowNotification_(i)){var n;switch(i){case 7:n=39;break;default:return}this.trigger(c.INTERRUPTING,!0),this.referrer_=n,this.notificationId_=t,r.getInstance().update({show:!0,title:e.getTitle(),message:e.getMessage(),actionText:e.getActionText(),images:e.getImageUrls(),matchStyle:10===i})}},onConfirm_:function(){r.getInstance().update({loading:!0}),this.sendAppRequest()},cleanUp_:function(){r.getInstance().update({dismiss:!0})},onDismiss_:function(){this.trigger(c.INTERRUPTING,!1)}},"InvitesController");u.EVENTS=c,u.getInstance=function(){return n||(n=new u)},e.exports=u},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("Encounters",function(e){return n.createElement("div",{className:"encounters"},n.createElement("div",{className:"layout layout--stretched-content"},n.createElement("div",{className:"layout__header"},n.createElement("div",{className:"encounters__navigation-bar js-header-container"})),n.createElement("div",{className:"layout__content"},n.createElement("div",{className:"encounters__zero-case js-no-results-screen"}),n.createElement("div",{className:"encounters__cards js-encounters-cards"}),n.createElement("div",{className:"encounters__profile js-encounters-profile"}))),n.createElement("div",{className:"js-match-explanation-modal"}))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("EncountersItem",function(e){return n.createElement("div",{className:"encounters__card js-card-container"})})},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(318),s=i(507);e.exports=i(108)("EncountersCard",function(e){return n.createElement("div",{className:"encounters-card"+(e.isSkeleton?" is-skeleton":"")+" js-skeleton"},n.createElement("div",{className:"encounters-card__photos js-photo-gallery"}),e.encountersProfile?n.createElement("div",{className:"profile-card is-skeleton"},n.createElement("div",{className:"profile-card-extra"},n.createElement("div",{className:"profile-card-extra__content"},n.createElement("div",{className:"profile-card-extra__content-skeleton"},n.createElement("svg",{viewBox:"0 0 300 120"},n.createElement("rect",{width:"300",height:"18",y:"102",rx:"9"}),n.createElement("rect",{width:"300",height:"18",y:"62",rx:"9"}),n.createElement("rect",{width:"240",height:"28",x:"30",y:"0",rx:"16"})))),n.createElement("div",{className:"profile-card-extra__actions"},n.createElement("div",{className:"profile-card-content__actions-stub"})))):n.createElement("div",{className:"encounters-card__floating"},e.crushButton?n.createElement("div",{className:"encounters-card__crush js-encounters-crush-container"}):null,n.createElement("div",{className:"encounters-card__info js-announce"},n.createElement("svg",{viewBox:"0 0 510 116",className:"encounters-card__info-skeleton"},n.createElement("rect",{width:"180",height:"28"}),n.createElement("rect",{width:"510",height:"21",y:"55"}),n.createElement("rect",{width:"510",height:"21",y:"95"})),n.createElement("div",{className:"encounters-card__name"},n.createElement("div",{className:"profile-user-info"},n.createElement("div",{className:"profile-user-info__statuses"},e.showSppStatus?n.createElement("span",{className:"profile-user-info__icon js-spp-user"},n.createElement(a,{name:"badge-feature-premium",size:"md",color:"primary"})):null,e.showVerifiedStatus?n.createElement(n.Fragment,null,e.isFullyVerified?n.createElement("span",{className:"profile-user-info__icon js-profile-verification-badge"},n.createElement(s,{status:"full"})):null):null),n.createElement("div",{className:"profile-user-info__text"},n.createElement("span",{className:"profile-user-info__name"},e.name)),n.createElement("div",{className:"profile-user-info__meta"},e.age&&n.createElement("span",{className:"profile-user-info__age"},", ",e.age),n.createElement("div",{className:"profile-user-info__statuses"},e.online?n.createElement(o,{status:"online"}):null,e.idle?n.createElement(o,{status:"idle"}):null,e.offline?n.createElement(o,{status:"hidden"}):null)))),e.infoLines?n.createElement("div",{className:"encounters-card__announce"},e.infoLines.map(function(e){return[e?n.createElement("div",{key:e},e):null]})):null)))})},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r=i(106),l={size:o.oneOf(["xsm","sm","md","stretch"])},c=function(e){var t=e.size,i=s((0,n.default)({"csms-verification-status":!0},"csms-verification-status--".concat(t),!0));return a.createElement("div",{className:i,"data-qa-verification-status":"full"},a.createElement(r,{name:"badge-feature-verification-full"}))};c.propTypes=l,c.defaultProps={size:"md"},e.exports=c},function(e,t,i){"use strict";function n(e){var t=l(e).closest(".js-photo-coaching-explanation"),i=!!t.length;return{insideCoachingTooltip:i,coachingStatus:t.attr("data-coaching-status"),insideMenuTooltip:!i}}var a,o,s=i(3)(i(107)),r=i(100),l=i(25),c=i(225),u=i(477),d=i(395),h=i(2845),p=i(2846),m=i(398),g=d.ACTIONS,_=(a={},(0,s.default)(a,2,g.ADD_PHOTOS),(0,s.default)(a,53,g.SHARE),(0,s.default)(a,71,g.REPLACE),a),f=(o={},(0,s.default)(o,0,"camera-with-flash"),(0,s.default)(o,1,"hourglass-flowing-sand"),(0,s.default)(o,2,"lock"),(0,s.default)(o,3,"dancers"),(0,s.default)(o,4,"desert"),(0,s.default)(o,5,"confused"),(0,s.default)(o,6,"blush"),(0,s.default)(o,7,"heart-eyes"),o),v=d.extend({galleryTemplate_:h,showAddButton_:!1,className:"fullscreenView",events:r.extend({},d.prototype.events,{click:"onClickAnything_","click .js-photo-action-delete":"onDeletePhoto_","click .js-photo-action-make-default":"onMakeDefault_","click .js-video-sound-action":"toggleVolume_","click .js-coaching-button":"onCoachingClick_","click .js-menu-button":"onMenuClick_","click .js-photo-action-make-private":"onMakePrivate_","click .js-action-button":"onActionButton_"}),isActive_:!1,getFullscreenContainer_:function(){return document.getElementById(u.FULLSCREEN_ID)},ensureInDOM_:function(){var e=l(this.getFullscreenContainer_());e?(e.children().remove(),e.append(this.el)):this.log.error("No DOM element container for fullscreen gallery was found")},isActive:function(){return this.isActive_},reset:function(){v._super.reset.call(this),this.showFullscreen(!1)},toggle:function(){this.showFullscreen(!this.isActive_)},setActive:function(e){this.isActive_!==e&&(this.isActive_=e,this.stickyScroll_&&(this.stickyScroll_.isEnabled()||this.stickyScroll_.enable(),this.stickyScroll_.updateLayout()),(this.pinchToZoom_||this.isActive_)&&this.togglePinchToZoom_(this.isActive_),this.updatePhotoState_())},showFullscreen:function(e){this.isActive_!==e&&(this.ensureInDOM_(),this.setActive(e),l(document.body).toggleClass("fullscreen",this.isActive_),l(this.getFullscreenContainer_()).toggleClass("is-hidden",!this.isActive_))},onOrientationChange_:function(){if(this.stickyScroll_){var e=this.stickyScroll_.getIndex();this.stickyScroll_.updateLayout().selectChild(e)}},onCurrentSlideChange_:function(){v._super.onCurrentSlideChange_.apply(this,arguments),this.updatePhotoState_()},disableVideoBlockers:function(){v._super.disableVideoBlockers.apply(this,arguments),this.updatePhotoState_()},updatePhotoState_:function(){var e,t,i=this.photos_[this.currentSlideIndex_],n=this.$(".js-photo-actions-wrapper");if(n.empty(),this.showActions_&&i){var a=i.photo,o=a.getPhotoCoaching&&a.getPhotoCoaching(),s=!!a.getVideo(),r=!s&&o&&o.toJSON(),l=!s&&o&&f[o.getStatus()],u=this.isOwnProfile_&&a&&a.getCanSetAsProfilePhoto(),d=a&&a.getIsProfilePhoto(),h=function(e){var t=e&&e.status;return 5===t||6===t||7===t}(r),m=c.get("saw_photo_coaching_explanation"),g=h&&!m;g&&c.set("saw_photo_coaching_explanation",1);var _=u||d,v=this.isOwnProfile_&&"PRIVATE"!==this.type_&&!a.hasVideo(),E={photoCoachingData:r,photoCoachingIcon:l,showCoachingExplanation:g,showTooltip:g,showMenu:this.isOwnProfile_&&"PRIVATE"!==this.type_&&(_||v),isDefaultActive:d,showMakeDefault:_,showMakePrivate:v,unlockIcon:!this.photoCoaching_&&!this.isOwnProfile_&&i.private,deleteButton:this.isOwnProfile_,soundControl:a.hasVideo()&&(!i.blocker||this.videoBlockersDisabled_)};((e=E).photoCoachingData||e.unlockIcon||e.soundControl||(t=e.photoCoachingData)&&t.explanation&&t.explanation.ok_action||e.showMenu||e.deleteButton)&&n.append(p.render(E))}},onDeletePhoto_:function(e,t){this.trigger(v.ACTIONS.DELETE_PHOTO,n(t))},onMakeDefault_:function(e,t){l(t).closest(".js-photo-action-make-default").hasClass("is-active")||this.trigger(v.ACTIONS.SET_PROFILE,n(t))},onCoachingClick_:function(){var e=this.$(".js-photo-coaching-explanation");e.toggleClass("is-invisible"),e.toggleClass("is-visible"),this.hideMenuTooltip_()},onMenuClick_:function(){var e=this.$(".js-menu-tooltip");e.hasClass("is-invisible")&&this.trigger(v.ACTIONS.MENU_CLICK),e.toggleClass("is-invisible"),e.toggleClass("is-visible"),this.hideCoachingTooltip_()},onMakePrivate_:function(e,t){this.trigger(v.ACTIONS.MAKE_PRIVATE,n(t))},onActionButton_:function(e,t){var i=l(e.target).closest(".js-action-button").attr("data-action-type");this.trigger(_[i],n(t))},viewPhoto_:function(){this.isSomeTooltipOpen_()?(this.hideCoachingTooltip_(),this.hideMenuTooltip_()):this.getCurrentPhoto()&&v._super.viewPhoto_.apply(this,arguments)},onClickAnything_:function(e){var t=!!l(e.target).closest(".js-coaching-button").length,i=!!l(e.target).closest(".js-menu-button").length;t||i||(this.hideCoachingTooltip_(),this.hideMenuTooltip_())},isSomeTooltipOpen_:function(){var e=this.$(".js-photo-coaching-explanation"),t=this.$(".js-menu-tooltip");return e.hasClass("is-visible")||t.hasClass("is-visible")},hideCoachingTooltip_:function(){var e=this.$(".js-photo-coaching-explanation");e.addClass("is-invisible"),e.removeClass("is-visible")},hideMenuTooltip_:function(){var e=this.$(".js-menu-tooltip");e.addClass("is-invisible"),e.removeClass("is-visible")},onGalleryScroll_:function(e){v._super.onGalleryScroll_.apply(this,arguments);var t=this.getItem(e.index);this.togglePinchToZoom_(t.photo),this.pinchToZoom_.reset()},togglePinchToZoom_:function(e){this.pinchToZoom_||(this.pinchToZoom_=(new m).on(m.EVENTS.ZOOM,this.onPhotoZoomed_)),e?this.pinchToZoom_.enable(this.$(".js-photo-viewer")):this.pinchToZoom_.disable()},onPhotoZoomed_:function(e){this.$(".js-photo-actions-wrapper").toggle(1===e),this.stickyScroll_&&(1!==e?this.stickyScroll_.disable():this.stickyScroll_.isEnabled()||this.stickyScroll_.enable())}},"FullscreenGalleryView");e.exports=v},function(e,t,i){"use strict";var n=i(98),a=i(143),o=i(396),s=i(160),r=i(151),l=i(172),c=i(152),u=i(106);e.exports=function(e){return n.createElement(a,{isCompact:!0},n.createElement(l,null,n.createElement(u,{name:"generic-blocker-play",size:"xlg"})),n.createElement(r,{text:e.header,color:"white"}),n.createElement(c,{text:e.message,color:"white"}),e.addVideoButton?n.createElement(s,null,n.createElement("button",{className:"button button--inherited button--stroke button--narrow js-action js-touchable qa-button js-add-video","data-photo-id":e.photoId},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},e.addVideoButton)))):null,e.dismissButton?n.createElement(o,null,n.createElement("a",{href:"#",className:"js-dismiss-video-blocker","data-photo-id":e.photoId},e.dismissButton)):null)}},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=function(e){return n.createElement("div",{className:"cta-box cta-box--compact cta-box--inherited"},n.createElement("div",{className:"cta-box__media"},n.createElement(a,{name:"generic-blocker-lock",size:"xlg"})),n.createElement("div",{className:"cta-box__header js-private-photos-label"},e.textLabel),n.createElement("div",{className:"cta-box__content js-private-photos-message"},e.message),e.button?n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"button button--inherited button--stroke button--narrow js-action js-touchable qa-button ".concat(e.button.disabled?"disabled":""," js-private-photos-button js-private-photos-action")},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},e.button.actionText)))))):null)}},function(e,t,i){"use strict";var n=i(98),a=i(143),o=i(160),s=i(151),r=i(172),l=i(152),c=i(106);e.exports=function(e){return n.createElement(a,{isCompact:!0},n.createElement(r,null,{facebook:n.createElement(c,{name:"generic-blocker-facebook",size:"xlg"}),instagram:n.createElement(c,{name:"generic-blocker-instagram",size:"xlg"})}[e.externalProviderIcon]),n.createElement(s,{text:e.headerText,color:"white"}),n.createElement(l,{text:e.contentText,color:"white"}),e.button?n.createElement(o,null,n.createElement("button",{className:"button button--inherited button--stroke button--narrow js-action js-touchable qa-button js-external-photo-blocker-action","data-action-type":e.button.actionType,"data-external-provider-type":e.button.externalProviderType},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},e.button.actionText)))):null)}},function(e,t,i){"use strict";var n=i(98),a=i(143),o=i(160),s=i(151),r=i(172),l=i(152),c=i(106);e.exports=function(e){return n.createElement(a,{isCompact:!0},n.createElement(r,null,{facebook:n.createElement(c,{name:"generic-blocker-facebook",size:"xlg"}),instagram:n.createElement(c,{name:"generic-blocker-instagram",size:"xlg"})}[e.externalProviderIcon]),n.createElement(s,{text:e.header,color:"white"}),n.createElement(l,{text:e.message,color:"white"}),e.button?n.createElement(o,null,n.createElement("button",{className:"button button--inherited button--stroke button--narrow js-action js-touchable qa-button js-add-auto-sync","data-photo-id":e.button.photoId},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},e.button.actionText)))):null)}},function(e,t,i){"use strict";var n=i(179),a=i(129),o=i(103),s=i(140),r=i(2847),l="block-options",c={BLOCKED:1},u=a.extend({userId_:null,construct:function(e){this.reportUserContext_=e,u._super.construct.call(this)},setUserId:function(e){return this.userId_=e,this},show:function(){var e=this.getView(l);e||(e=this.registerView(l,new r(l))).on(r.ACTIONS.NEXT,this.onNextAction_.bind(this)),e.update()},block:function(){return s.getInstance().addUserToFolder({uid:this.userId_,folder:9}).then(this.onBlocked_.bind(this))},deleteChatHistory:function(){n.trigger(n.USER_CONVERSATION_DELETED,this.userId_),s.getInstance().removeUsers({folderId:0,ids:[this.userId_]}).then(this.onBlocked_.bind(this))},onNextAction_:function(e){switch(e){case r.BUTTONS.REPORT:o.navigate("report-user",!1,{userId:this.userId_,reportContext:this.reportUserContext_});break;case r.BUTTONS.BLOCK:this.block();break;case r.BUTTONS.DELETE:this.deleteChatHistory()}},onBlocked_:function(){this.getView(l)&&this.getView(l).dismiss(),n.trigger(n.USER_BLOCKED,this.userId_),this.trigger(c.BLOCKED)}},"BlockOptionsController");u.EVENTS=c,e.exports=u},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="modal"><div class="modal__item"><div class="modal-button modal-button--primary js-action" data-button="').f(t.getPath(!1,["BUTTONS","REPORT"]),t,"h").w('"><span class="modal-button__text">').h("t",t,{},{k:"28"},"h").w('</span></div></div><div class="modal__item"><div class="modal-button modal-button--destructive js-action" data-button="').f(t.getPath(!1,["BUTTONS","BLOCK"]),t,"h").w('"><span class="modal-button__text">').h("t",t,{},{k:"5"},"h").w('</span></div></div><div class="modal__item"><div class="modal-button modal-button--cancel js-action" data-button="').f(t.getPath(!1,["BUTTONS","CANCEL"]),t,"h").w('"><span class="modal-button__text">').h("t",t,{},{k:"19"},"h").w("</span></div></div></div>")}return e.register("modal.report",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(206),a=i(400),o=i(330),s=i(256),r=i(103),l=i(132),c=i(99),u=i(113),d=i(128),h=i(220),p=i(2876),m=n.extend({userId_:null,dataVersion_:0,init:function(){m._super.init.apply(this,arguments),this.setControllers_()},setControllers_:function(){this.getController("verification-options")||this.registerController("verification-options",new o).on(o.EVENTS.REFRESH,this.invalidateProfile_)},onStart:function(){m._super.onStart.apply(this,arguments);var e=this.getView("verification");e&&e.hideLoading()},extractData_:function(e){var t=this.getView("verification");null===t&&(t=this.registerView("verification",new p)),this.userId_=e.user.getUserId();var i=e.user.getVerifiedInformation(),n=i&&i.getMethods();return this.dataVersion_++,n?(this.isOwnProfile_()?this.updateVerifiedInfo_(e.user):u.isLoggedIn()?this.fetchOwnVerifiedInfo_(e.user):this.updateVerifiedInfo_(e.user),t.getElement()):null},fetchOwnVerifiedInfo_:function(e){var t=this,i=this.dataVersion_;h.getInstance().get({context:8}).spread(function(n){i===t.dataVersion_&&t.isStarted()&&t.updateVerifiedInfo_(e,n.getMethods())})},getVerificationHandlerController_:function(){return this.verificationHandler_?this.verificationHandler_:(this.verificationHandler_=this.registerController(new a).on(a.EVENTS.REFRESH,this.invalidateProfile_),this.verificationHandler_.setMixedStyle(!0),this.verificationHandler_)},updateVerifiedInfo_:function(e,t){var i,n=this.getView("verification"),a=e.getVerifiedInformation(),o=this.getParameter("isOwnProfile"),u=a&&s.fromUserVerifiedGet(a);this.setControllers_(),l.getSync(209).getEnabled()&&((i=this.getVerificationHandlerController_()).set(u),u.methods=u.methods.filter(function(e){return 5!==e.getType()}),u.methods.forEach(function(e){e.getIsConnected()||e.setDisplayMessage(c.get(464))}));var d=this.getController("verification-options").updateParameters({verificationMethods:u,ownVerificationMethods:t,user:e,isOwnProfile:o,isOwnProfilePreview:this.getParameter("isOwnProfilePreview"),allowConfigure:this.getParameter("isOwnProfile"),context:8,destination:r.getUrl()});a&&!d.isEmpty?n.render({verificationOptionsEl:d.parent,verificationHandlerEl:i&&i.parent,displayMessage:a.getDisplayMessage(),isOwnProfile:o,verificationStatus:a.getVerificationStatus()||e.getVerificationStatus()}):this.hideContent_()},invalidateProfile_:function(){d.getInstance().invalidate(this.userId_)},getName:function(){return"verification"},getHotPanelElement:function(){return 31}},"VerificationSection");e.exports=m},function(e,t,i){"use strict";var n=i(100),a=i(226),o=i(215),s=i(169),r=i(2874),l=i(2875),c=n.extend({},a.ACTIONS,{NEXT:1}),u=a.extend({className:"",events:{"click .js-action":"onAction_"},update:function(e){return!0===e.accessRequest?this.updateAccessRequest_(e):!0===e.removeVerify&&this.renderRemoveVerify_(),this.enable(),this.show(),this},updateAccessRequest_:function(e){var t=e.method.getAccessRequestPromo(),i={mssg:t.getMssg(),action:t.getAction(),verified:13!==t.getOkAction(),userpic:s.getPlaceholderForGender(e.user.getGender())},n=e.user.getProfilePhoto();n&&n.hasLargeUrl()&&(i.userpic={value:n.getLargeUrl(),type:"url"}),i[o.createKeyForMethod(e.method)]=!0,this.renderAccessRequest_(i)},renderAccessRequest_:function(e){this.$el.html(r.render(e))},renderRemoveVerify_:function(e){this.$el.html(l.render(e))},show:function(){u._super.show.apply(this,arguments),this.$el.parent().removeClass("modal-container").addClass("modal-wrapper")},onAction_:function(e,t){null!==t.getAttribute("data-next")&&this.trigger(c.NEXT),this.dismiss()}},"VerificationAccessPromo");u.ACTIONS=c,e.exports=u},function(e,t,i){"use strict";var n=i(100),a=i(103),o=i(102),s=i(206),r=i(128),l=i(2879),c=i(113),u=i(101).ClickEvent,d=s.extend({serverFeature_:null,init:function(){var e=s._super.init.apply(this,arguments),t=new l;return t.on(l.ACTIONS.DELETE,this.onDelete_).on(l.ACTIONS.SEND,this.onSend_.bind(this)).on(l.ACTIONS.OPEN,this.onOpen_.bind(this)),this.registerView("gifts-section-view",t),e},onParametersUpdate:function(){this.serverFeature_=c.isLoggedIn()?113:null,d._super.onParametersUpdate.apply(this,arguments)},extractData_:function(e){var t=e.user,i=e.isOwnProfilePreview,n=t.getReceivedGifts();if(!i||n.getGifts()){var a=this.getView("gifts-section-view");return a?(this.receivedGifts_=n,this.userId_=t.getUserId(),a.update({isOwnProfile:this.getParameter("isOwnProfile"),isOwnProfilePreview:this.getParameter("isOwnProfilePreview"),gifts:this.receivedGifts_}),a.getElement()):(this.log.warn("Where is the gift section view?"),null)}},verifyData_:function(e){var t=e.user,i=t&&t.getReceivedGifts();return this.getParameter("isOwnProfile")?i&&i.getGifts([]).length>0:!!i},onOpen_:function(e){if(!c.isLoggedIn())return a.navigate("landing"),!1;var t=n.find(this.receivedGifts_.getGifts(),function(t){return t.getPurchaseId()===e});t&&(a.navigate("gift",{purchasedGift:t.toJSON(),back:a.getUrl()}),o.track(u,{element:84,parent_element:32,has_parent:!0}))},onDelete_:function(e){r.getInstance().deleteGifts(e)},onSend_:function(e){return c.isLoggedIn()?(a.navigate("gift-store",{context:9,id:this.userId_,giftProductId:e,back:a.getUrl()}),void o.track(u,{element:46,parentElement:32})):(a.navigate("landing"),!1)},getHotPanelElement:function(){return 32},getName:function(){return"gifts"}},"GiftsSection");e.exports=d},,,,,,function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="google-ads-banner"><div id="').f(t.get(["adSlot"],!1),t,"h").w('" data-qa-ads="chat"></div></div>')}return e.register("google-ads/google-ad-banner",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(129),a=i(219),o=i(308),s=i(99),r=i(102),l=i(101),c=l.AlertEvent,u=l.RequestPermissionEvent,d=n.extend({construct:function(e){d._super.construct.call(this),this.place_=e.place,this.activationPlace_=e.activationPlace,this.confirmationPopup_=this.registerView(new a).on(a.ACTIONS.YES,this.requestPermission_,this).on(a.ACTIONS.NO,this.denyPermission_,this)},obtainPermission:function(e){o.inited&&void 0===o.getCurrentChoice()&&this.showConfirmationPopup_(e)},showConfirmationPopup_:function(e){this.confirmationPopup_.update({message:e,yesText:s.get(300)}),this.trackConfirmationPopupView_()},trackConfirmationPopupView_:function(){r.track(c,{alert_type:7,activation_place:this.activationPlace_})},requestPermission_:function(){var e=this;o.userWantsPushes(this.place_).then(function(t){return e.trackPermissionRequest_(t)})},denyPermission_:function(){o.userDeniesPushes(this.place_),this.trackPermissionRequest_(!1)},trackPermissionRequest_:function(e){r.track(u,{permission_type:2,permission_granted:e,activation_place:this.activationPlace_})}},"NotificationPermissionController");e.exports=d},function(e,t,i){"use strict";function n(e,t,i){return Math.min(i,Math.max(t,e))}function a(){return new Promise(function(e){return window.requestAnimationFrame(e)})}var o=i(25),s=i(109),r=i(139),l=i(111),c=i(327),u=i(102),d=i(505),h=i(2904),p=i(2905),m=i(131),g=i(298),_=l("SWIPE_LEFT","SWIPE_RIGHT","SWIPING"),f=i(101).ClickEvent,v=s.extend({events:{"touchstart .js-card-container":"onTouchStart_","touchmove .js-card-container":"onTouchMove_","touchend .js-card-container":"onTouchEnd_","click .js-vote-yes":"swipeRight","click .js-vote-no":"swipeLeft"},init:function(){v._super.init.apply(this,arguments),this.firstCard_=d.render(),this.secondCard_=d.render(),this.voteIndicator_=h.render(),g.isActive()||(this.voteButtons_=p.render()),this.$el.append(this.options.noResultsScreen,this.secondCard_,this.firstCard_,this.voteIndicator_,this.voteButtons_),this.secondCard_.addClass("is-below");var e=c(this.onTouchMove_);this.onTouchMove_=this.preventDefaultAndGetPoints_.bind(this,e.callback),this.resetMoveBuffer_=e.reset,this.transformDistance_=0},swapCards:function(){this.transformDistance_=0,this.resetMoveBuffer_(),this.firstCard_.addClass("is-dragged"),this.firstCard_.attr("style","");var e=this.firstCard_;this.firstCard_=this.secondCard_,this.secondCard_=e,this.firstCard_.removeClass("is-below").attr("style",""),this.secondCard_.addClass("is-below").insertBefore(this.firstCard_)},getFirstCardContainer:function(){return this.firstCard_},getSecondCardContainer:function(){return this.secondCard_},moveStarted_:function(e,t){var i=this.didMove_;return this.didMove_||(i=Math.sqrt(e*e+t*t)>7),i},onTouchStart_:function(e){if(r.isTouchEventTrusted(e)){if(0===o(e.target).closest(this.firstCard_).length)return e.preventDefault(),void this.log.warn("User trying to swipe second card");var t=o.os.supportsTouch?e.touches[0]:e;this.didMove_=!1,this.distX_=this.startX_=this.currX_=0,this.distY_=this.startY_=this.currY_=0,this.pointX_=t.pageX,this.pointY_=t.pageY,this.firstCard_.addClass("is-dragged"),this.voteIndicator_.attr("style","").removeClass("is-hidden"),this.touchStartTime_=Date.now(),this.movingHorizontally_=!1,this.trigger(_.SWIPING,this.movingHorizontally_)}},onTouchMove_:function(e,t){var i=this;this.transformDistance_+=t.x-e.x;var n=t.x-this.pointX_,a=t.y-this.pointY_;this.currX_+=n,this.currY_+=a,this.pointX_=t.x,this.pointY_=t.y;var o=this.currX_-this.startX_,s=this.currY_-this.startY_;this.updateStateAndDetermineIfPreventAnimation_(o,s)?this.transformDistance_=0:(this.distX_=o,this.distY_=s,window.requestAnimationFrame(function(){i.updateLayout_()}))},onTouchEnd_:function(e){if(r.isTouchEventTrusted(e)){if(0===o(e.target).closest(this.firstCard_).length)return e.preventDefault(),void this.log.warn("User trying to swipe second card");this.firstCard_.removeClass("is-dragged"),this.voteIndicator_.addClass("is-hidden"),this.resetMoveBuffer_(),this.doSwipeIfNeeded_()||(this.transformDistance_=0,this.movingHorizontally_=!1,this.trigger(_.SWIPING,this.movingHorizontally_),this.updateLayout_())}},updateStateAndDetermineIfPreventAnimation_:function(e,t){return!this.moveStarted_(e,t)||(this.didMove_||(this.movingHorizontally_=Math.abs(e)>Math.abs(t),this.trigger(_.SWIPING,this.movingHorizontally_)),this.didMove_=!0,!this.movingHorizontally_)},doSwipeIfNeeded_:function(){var e=this.transformDistance_/window.innerWidth,t=Math.abs(e),i=function(e){return 0==(e=+e)||isNaN(e)?Number(e):e>0?1:-1}(e),n=Math.abs(this.transformDistance_)/(Date.now()-this.touchStartTime_);return(t>=.2||n>1)&&(this.doSwipe_(i),!0)},updateLayout_:function(){var e=window.innerWidth,t=this.transformDistance_/e,i=Math.abs(t),a=n(35*t,-60,60);this.firstCard_.css({transform:"translate3d(".concat(this.transformDistance_,"px,0,0) rotate(").concat(a,"deg)")});var o=n(3*i,0,1);this.voteIndicator_.attr("data-type",t<0?"no":"yes"),this.voteIndicator_.css({opacity:String(o),transform:"scale3d(".concat(o,",").concat(o,",1)")})},moveFirstCardOut:function(){return this.firstCard_.addClass("is-dragged"),this.transformDistance_=-1*window.innerWidth,this.updateLayout_(),a()},moveFirstCardIn:function(){return this.resetPosition(),
a()},swipeRight:function(e){e&&!r.isTouchEventTrusted(e)||(e&&u.track(f,{element:619}),this.doSwipe_(1,void 0!==e))},swipeLeft:function(e){e&&!r.isTouchEventTrusted(e)||(e&&u.track(f,{element:618}),this.doSwipe_(-1,void 0!==e))},doSwipe_:function(e,t){var i=this;this.firstCard_.removeClass("is-dragged"),this.transformDistance_=e*window.innerWidth,this.updateLayout_(),this.disable(),m.onTransitionEnd(this.firstCard_,function(){i.enable(),i.trigger(e>0?_.SWIPE_RIGHT:_.SWIPE_LEFT,t)})},resetPosition:function(){this.firstCard_.removeClass("is-dragged"),this.firstCard_.attr("style",""),this.voteIndicator_.attr("style",""),this.transformDistance_=0},preventDefaultAndGetPoints_:function(e,t){g.isActive()&&!this.movingHorizontally_||(t.preventDefault(),t.stopPropagation());var i=t.touches&&t.touches[0];i||(i={pageX:t.pageX,pageY:t.pageY}),e({x:Math.max(0,i.pageX),y:Math.max(0,i.pageY)})}},"EncountersCardListView");v.EVENTS=_,e.exports=v},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(2907),s=i(506),r=a("EXPAND_PROFILE","CRUSH","CLICK_SPP"),l=n.extend({events:{"click .js-spp-user":"onClickSpp_","click .js-announce":"onExpandProfile_"},init:function(){var e=this;l._super.init.apply(this,arguments),this.crushView_=this.registerView(new o),this.crushView_.on(o.EVENTS.CRUSH,function(){return e.trigger(r.CRUSH)})},render:function(e){var t=e.profileData,i=e.crushButton,n=t.isMale&&t.isSppUser,a=4===t.user.getVerificationStatus(),o=!t.isSppUser&&t.isMale&&a,r=t.user.getOnlineStatus(4),l=Object.assign({},t,{showSppStatus:n,isFullyVerified:a,showVerifiedStatus:o,crushButton:i,online:1===r,idle:2===r,offline:4===r});this.$el.html(s.render(l)),i&&this.appendCrushView_(t)},appendCrushView_:function(e){this.crushView_.render(e),this.crushView_.appendTo(this.$(".js-encounters-crush-container"))},onClickSpp_:function(e){return e.stopPropagation(),this.trigger(r.CLICK_SPP),!1},onExpandProfile_:function(){this.trigger(r.EXPAND_PROFILE)},showCrushTooltip:function(){this.crushView_.showTooltip()},hideCrushTooltip:function(){this.crushView_.hideTooltip()},getGalleryContainer:function(){return this.$(".js-photo-gallery")}},"CardView");l.EVENTS=r,e.exports=l},,,,,function(e,t,i){"use strict";var n=i(99),a=i(103),o=i(102),s=i(141),r=i(2916),l=i(101),c=l.ViewElementEvent,u=l.ClickEvent,d={title:n.get(490),message:n.get(505),action:n.get(507),path:"people-nearby",element:69,buttonElement:56},h={title:n.get(490),message:n.get(504),action:n.get(503),path:"settings-filter",element:70,buttonElement:62};e.exports=function(e){function t(){o.track(u,{element:i.buttonElement,parent_element:i.element}),i===h?n():a.navigate(i.path)}var i,n=e.onExpandFilter;return{element:s.$satisfy("div"),setNotMoreSearchResults:function(e){i=e.getCanFilterExpand()?h:d,this.element.html(r.render(i)),this.element.delegate(".js-action","click",t)},trackView:function(){o.track(c,{element:i.element,screen_name:11})},clear:function(){i=null,this.element.empty()},isEmpty:function(){return!i}}}},function(e,t,i){"use strict";function n(){this.queue=[]}function a(e){r.preloadImages(e.slice(0,3).reduce(function(e,t){if(t instanceof l){var i=t.encountersPromoCard,n=i&&i.photo;n&&e.push(n);var a=i&&i.header,o=a&&a.logo;o&&e.push(o)}else{var s=t&&t.albums;if(s&&s.length>0){var r=s.find(function(e){return 7===e.getAlbumType()});if(r){var c=r.getPhotos();c&&c.length&&e.push(c[0].getLargeUrl())}}}return e},[]))}var o=i(139),s=i(111),r=i(131),l=i(245);n.EVENTS=s("NEED_MORE"),n.prototype=Object.assign({},o,{previousShiftedProfile_:null,set:function(e){Array.isArray(e)&&(this.previousShiftedProfile_=null,this.queue=e.slice(0),a(this.queue))},rollback:function(){this.previousShiftedProfile_&&this.queue.unshift(this.previousShiftedProfile_),this.previousShiftedProfile_=null},shift:function(){var e=this.queue.shift();return this.queue.length<=10&&this.trigger(n.EVENTS.NEED_MORE),a(this.queue),e instanceof l||(this.previousShiftedProfile_=e),e},get:function(e){return this.queue[e]},length:function(){return this.queue.length}}),e.exports=n},function(e,t,i){"use strict";var n=i(103),a=i(132),o=i(175),s=i(102),r=i(165),l=i(149),c=i(299),u=i(101).ClickEvent;e.exports=function(){if(l.generate(),s.track(u,{element:5}),c.hit(),c.isActive())n.navigate("liked-you");else if(a.getSync(19).getEnabled())n.navigate("connections/fans");else{var e={back:"connections/fans",productType:1,promoBlockType:7,callback:function(e){e.success&&o.getInstance().invalidate()},hotPanelData:{activationPlace:2}};r.navigateToPayment(e)}}},function(e,t,i){"use strict";function n(e){var t;return(t={},(0,o.default)(t,1,1),(0,o.default)(t,2,2),(0,o.default)(t,3,3),(0,o.default)(t,r.MAYBE,4),(0,o.default)(t,5,5),(0,o.default)(t,"crush",6),t)[e]}var a,o=i(3)(i(107)),s=i(102),r=i(105).VoteResultType,l=i(101),c=l.AlertEvent,u=l.VoteProfileEvent,d=l.UndoVoteEvent,h=l.ViewTooltipEvent,p=l.AlertTypeEnum,m=(a={},(0,o.default)(a,2,10),(0,o.default)(a,3,9),a);e.exports={trackUndo:function(e){var t={activation_place:2,encrypted_user_id:e.id};e.vote.yourVote&&(t.vote_result=n(e.vote.yourVote)),s.track(d,t)},trackUndotooltip:function(e){s.track(h,{tooltip_name:e?1:9})},trackVote:function(e,t,i){var a=i?3:2===e?2:1;s.track(u,{vote_result:n(e),activation_place:2,encrypted_user_id:t,gesture:a})},trackCardAlert:function(e){var t=m[e];p.isValid(t)&&s.track(c,{activation_place:2,alert_type:t})}}},function(e,t,i){"use strict";var n=i(113),a=i(132),o=i(99);e.exports=function(e){var t=e.voteNoCount,i=e.yourVote,s=e.theirVote;if(a.getSync(100)&&3===i){var r,l=2===s&&1===n.getUser().getGender();return l?r=o.get(500):20===t&&(r=o.get(498)),{showUndo:!0,undoTooltipText:r,missedMatch:l}}return{showUndo:!1,undoTooltipText:!1}}},function(e,t,i){"use strict";var n=i(3)(i(144)),a=i(98),o=i(106),s=i(137);e.exports=i(108)("EncountersNavigationBar",function(e){return a.createElement(s,(0,n.default)({},e,{extraClass:"navigation-bar--no-background is-custom",actions:e.navigationActions,logo:e.showLogo,hasWideSides:"true",noFake:"true",primary:a.createElement(a.Fragment,null,e.hasTabbar?null:a.createElement("div",{className:"navigation-bar__icon js-navigation","data-action":e.NAVIGATION_BUTTONS.MENU,"data-qa":"navbar-menu"},a.createElement(o,{name:"navigation-bar-menu"}),e.showBadge?a.createElement("span",{className:"navigation-bar__menu-notification"}):null),e.hasTabbar&&e.showUndo?a.createElement("div",{className:"navigation-bar__icon js-undo-vote","data-action":e.NAVIGATION_BUTTONS.SETTINGS,"data-qa":"navbar-settings"},a.createElement(o,{name:"navigation-bar-undo"}),e.undoTooltipText?a.createElement("div",{className:"tooltip tooltip--bl is-visible js-tooltip"},a.createElement("div",{className:"tooltip_"},a.createElement("div",{className:"tooltip__content"},a.createElement("div",null,e.undoTooltipText)))):null):null,e.likedYou?a.createElement("div",{className:"navigation-bar__icon js-liked-you","data-action":e.NAVIGATION_BUTTONS.SETTINGS,"data-qa":"navbar-liked-you"},a.createElement(o,{name:"navigation-bar-liked-you-indicator"})):null),secondary:a.createElement(a.Fragment,null,!e.hasTabbar&&e.showUndo?a.createElement("div",{className:"navigation-bar__icon js-undo-vote","data-action":e.NAVIGATION_BUTTONS.SETTINGS,"data-qa":"navbar-settings"},a.createElement(o,{name:"navigation-bar-undo"}),e.undoTooltipText?a.createElement("div",{className:"tooltip tooltip--br is-visible js-tooltip"},a.createElement("div",{className:"tooltip_"},a.createElement("div",{className:"tooltip__content"},a.createElement("div",null,e.undoTooltipText)))):null):null,a.createElement("div",{className:"navigation-bar__icon js-navigation","data-action":e.NAVIGATION_BUTTONS.OPEN_FILTER,"data-qa":"navbar-filter"},a.createElement(o,{name:"navigation-bar-filter"}))),content:e.progressBarProgress?a.createElement("div",{className:"heart-bar"},a.createElement("div",{className:"heart-bar__icon"},a.createElement(o,{name:"generic-heart",size:"md"})),a.createElement("div",{className:"heart-bar__progress"},a.createElement("div",{className:"progress-bar ".concat(e.tiny?" progress-bar--tiny ":""," ").concat(e.inherited?" progress-bar--inherited ":"")},a.createElement("div",{className:"progress-bar__fill",style:{minWidth:"".concat(e.progressBarProgress?e.progressBarProgress:0,"%")}},e.progressBarProgress?"".concat(e.progressBarProgress,"%"):"")))):null}))})},function(e,t,i){"use strict";var n=i(184),a=i(142),o=i(2917),s=0;e.exports=function(){if(n.isEnabled()&&++s===(Number(window._badoo_encounters_ads_votes)||10)){var e=a.getCurrentPage();a.openPage(new o(e)),s=0}}},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(116)),c=i(98),u=i(131),d=i(2921),h=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).state={leftImage:null,rightImage:null},i}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.preloadLeftImagePromise=u.preloadImage(this.props.leftImage),this.preloadLeftImagePromise.then(function(){return e.setState({leftImage:e.props.leftImage})}).catch(function(e){if(e instanceof Error&&!e.isCanceled)throw e}),this.preloadRightImagePromise=u.preloadImage(this.props.rightImage),this.preloadRightImagePromise.then(function(){return e.setState({rightImage:e.props.rightImage})}).catch(function(e){if(e instanceof Error&&!e.isCanceled)throw e})}},{key:"componentWillUnmount",value:function(){this.preloadLeftImagePromise.cancel(),this.preloadRightImagePromise.cancel()}},{key:"render",value:function(){var e=this.props,t=e.size,i=e.icon,n=this.state,a=n.leftImage,o=n.rightImage;return c.createElement(d,{size:t,leftImage:a,rightImage:o,icon:i})}}]),t}(c.Component);e.exports=h},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(123)),c=n(i(116)),u=i(98),d=i(540),h=i(2933),p=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).onCtaClick=i.onCtaClick.bind((0,l.default)(i)),i}return(0,c.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props,t=e.context,i=e.cardMode,n=e.cardRef,a=e.headerData,o=e.onPhotoClick,s=this.getCardData(),r=s.photo,l=s.title,c=s.text,p=s.ctaText,m=s.swipeText;return u.createElement(h,{cardMode:i,innerRef:n,headerBlock:a?u.createElement(d,{data:a,context:t}):null,photoUrl:r,title:l,text:c,swipeText:m,ctaText:p,onClick:o,onCtaClick:this.onCtaClick})}},{key:"getCardData",value:function(){var e=this.props.promoCard||{},t=e.key,i=e.photo,n=e.title,a=e.text,o=e.primaryCta,s=e.swipeUp,r={key:t,photo:i,title:n,text:a};return o&&(r.ctaText=o.text),s&&(r.swipeText=s.text),r}},{key:"onCtaClick",value:function(e){e.stopPropagation(),this.props.onCtaClick&&this.props.onCtaClick()}}]),t}(u.Component);e.exports=p},function(e,t,i){"use strict";function n(e,t){return t?(0,o.default)({},e.hotpanelData,{context:t}):e.hotpanelData}var a=i(3),o=a(i(127)),s=a(i(110)),r=a(i(112)),l=a(i(114)),c=a(i(115)),u=a(i(123)),d=a(i(116)),h=i(98),p=i(146),m=i(103),g=i(102),_=i(2932),f=i(180),v=i(281),E=i(332),b=i(333),y=i(231),k=i(101),S=k.ClickBannerEvent,w=k.ViewBannerEvent,C=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).state={showSponsoredModal:!1},i.onLogoClick=i.onLogoClick.bind((0,u.default)(i)),i.onSponsoredClick=i.onSponsoredClick.bind((0,u.default)(i)),i.onDismissModalClick=i.onDismissModalClick.bind((0,u.default)(i)),i}return(0,d.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props.data,t=e.header,i=e.sponsoredAlert;return t?h.createElement(h.Fragment,null,h.createElement(_,{logoUrl:t.logo,title:t.title,subtitle:t.subtitle,onLogoClick:this.onLogoClick,onSubtitleClick:this.onSponsoredClick}),this.state.showSponsoredModal?h.createElement(f,{isVisible:!0,allowClickOutside:!1},h.createElement(v,null,h.createElement(E,{text:i.header}),h.createElement(b,{text:i.text})),h.createElement(y,{text:i.ctaText,type:"primary",onClick:this.onDismissModalClick})):null):null}},{key:"onLogoClick",value:function(e){e.stopPropagation();var t,i=this.props.data.header;63===(t=i).action&&function(e){if(e)if(e.getUrl())window.open(e.getUrl(),"_blank","noopener");else{var t=p.getRouteFromRedirectPage(e);m.navigate(t)}}(t.redirectPage)}},{key:"onSponsoredClick",value:function(e){e.stopPropagation(),this.setState({showSponsoredModal:!0});var t=this.props,i=t.data,a=t.context;!function(e,t){g.track(S,n(e,t))}(i.sponsoredAlert,a),function(e,t){g.track(w,n(e,t))}(i.sponsoredAlert,a)}},{key:"onDismissModalClick",value:function(e){e.stopPropagation(),this.setState({showSponsoredModal:!1})}}]),t}(h.Component);e.exports=C},function(e,t,i){"use strict";var n,a=i(135),o=i(125).getLogger("UserSubstituteModel"),s=i(105),r=s.ServerGetUserSubstitute,l=s.ServerUserSubstituteAction,c=a.extend({name:"UserSubstitute",getRequestMessageType:696,getResponseMessageType:697,setRequestMessageType:582,setResponseMessageType:387,preventMultiple:!0,commitCache:!1,get:function(e){var t=e.id,i=(new r).setId(t);return c._super.get.call(this,i)},skipPromo:function(e){var t=e.id,i=e.context;this.set({id:t,context:i,action:1})},acceptPromo:function(e){var t=e.id,i=e.context;this.set({id:t,context:i,action:2})},set:function(e){var t=e.id,i=e.context,n=e.action;t&&i&&n||o.error("Missing some of the properties for ServerUserSubstituteAction",{id:t,context:i,action:n});var a=(new l).setId(t).setContext(i).setAction(n);return c._super.set.call(this,a)},shouldCache_:function(){return!1}},"UserSubstituteModel");c.getInstance=function(){return n||(n=new c)},e.exports=c},function(e,t,i){"use strict";var n=i(98);e.exports=function(){return n.createElement("div",{className:"own-profile__skeleton-media"})}},function(e,t,i){"use strict";var n=i(98);e.exports=function(){return n.createElement("div",{className:"own-profile__skeleton-text"})}},function(e,t,i){"use strict";var n=i(202),a=i(2967),o=i(410).levels;e.exports=function(e){var t=new n({preventClosing:!0});return a.render({levels:o},t.el),t.$el.find(".js-option").click(function(i){t.dismiss();var n=i.currentTarget.getAttribute("data-level"),a=n&&Number(n);e(a)}),t.show(),t}},function(e,t,i){"use strict";var n=i(109),a=i(546),o={CHANGE:1},s=n.extend({isPressed_:0,permille_:0,progressElement_:null,events:{touchstart:"onTouchStart_",touchmove:"onTouchMove_",touchend:"onTouchEnd_"},init:function(){var e=this;this.$el.on("qainput",function(t){return e.setPermille_(t.detail.permille)}),this.$el.attr("data-qa","slider-element")},update:function(e){return this.$el.html(a.render({percent:e&&e.permille/10||0})),this.progressElement_=this.$el.find(".js-progress"),this},onTouchStart_:function(e){this.isPressed_=!0,this.processTouch_(e)},onTouchEnd_:function(){this.isPressed_=!1},onTouchMove_:function(e){this.isPressed_&&this.processTouch_(e)},setPermille_:function(e){this.permille_=e,this.permille_<0?this.permille_=0:this.permille_>1e3&&(this.permille_=1e3),this.progressElement_.css("width","".concat(this.permille_/10,"%")),this.trigger(o.CHANGE,this.permille_)},processTouch_:function(e){if(e.touches){var t=this.$el.offset(),i=e.touches[0].pageX;this.setPermille_(parseInt(1e3*(i-t.left)/t.width,10))}}},"Slider");s.EVENTS=o,e.exports=s},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="input-slider"><div class="input-slider__meter"><div class="input-slider__fill js-progress" style="width: ').f(t.get(["percent"],!1),t,"h").w('%"><div class="input-slider__handle"></div></div></div></div>')}return e.register("input-slider",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=null,a=[],o=0;e.exports={set:function(e){var t=e.promo,i=e.users,s=e.scrollTop;n=t,a=i,o=s},get:function(){return{promo:n,users:a,scrollTop:o}},clear:function(){n=null,a=[],o=0},votedYes:function(e){a.forEach(function(t){t.user_id===e&&(t.isVotedYes=!0)})},votedNo:function(e){a.forEach(function(t){t.user_id===e&&(t.isVotedNo=!0)})}}},function(e,t,i){"use strict";var n=i(188),a=i(140),o=i(227),s=n.extend({screenOnboardingTips:!0,init:function(){s._super.init.apply(this,arguments),o.hasTooltipsToSee(!1,11)&&(this.onboardingTipsController_=o.getInstance().on(o.ACTIONS.PERFORM_ACTION,this.performActionTooltip_,this).on(o.ACTIONS.TOOLTIP_DISMISSED,this.allowNotifications_,this),this.registerController(this.onboardingTipsController_))},onStart:function(){s._super.onStart.apply(this,arguments),this.onboardingTipsController_&&this.onboardingTipsController_.setContext(2)},updateUser_:function(){s._super.updateUser_.apply(this,arguments),this.isStarted()&&this.profileData_.adjacentProfiles&&this.profileData_.adjacentProfiles.next&&o.hasTooltipsToSee(!1,11)&&(this.preventNotifications_(),this.onboardingTipsController_.showTooltipNextUser()||this.allowNotifications_())},performActionTooltip_:function(){var e=this.profileData_.adjacentProfiles,t=e&&e.next;t&&this.onAdjacentProfileClick(t)},preventNotifications_:function(){this.notificationScreenAccess=3},allowNotifications_:function(){this.notificationScreenAccess=1},getAdjacentProfiles:function(){this.folderModel_||(this.folderModel_=new a({folderId:this.folderType}));var e=this.getParameter("activityFilter"),t=this.getParameter("sectionId"),i=this.getParameter("id");return this.folderModel_.getAdjacentProfiles(i,t,e)},getNavigationParams_:function(e){return{id:e.getUserId(),sectionId:this.getParameter("sectionId"),activityFilter:this.getParameter("activityFilter"),onLoad:this.onLoad_}}},"NearbyPersonProfile");e.exports=s},function(e,t,i){"use strict";function n(e){var t=e.photoId,i=e.offset,n=e.clientTwins,o=a(t);void 0===i&&(o.users=[],o.version++,o.totalCount=n.getTotalCount()),function(e,t,i){var n=e.users;if(t>n.length)throw new Error("Unexpected offset, expected ".concat(n.length,"."));t<n.length&&(n.splice(t),e.version++),e.users=n.concat(i)}(o,i||0,n.getUsers())}function a(e){return r[e]||function(e){var t={users:[],version:0};return r[e]=t,t}(e)}var o=i(550),s=i(113),r={};s.on(s.EVENTS.USER_CHANGED,function(){r={}}),e.exports={updateLookalikeList:n,getAdjacentUsers:function(e){var t=e.photoId,i=e.userId,r=a(t);if(!r)return Promise.resolve();var l=function(e,t){var i=e.users,n=i.findIndex(function(e){return e.getUserId()===t});return i[n-1]}(r,i);return function(e,t,i){var a=t.users,r=a.findIndex(function(e){return e.getUserId()===i});return r===t.totalCount-1?Promise.resolve():r===a.length-1?function(e,t){var i=t.users;t.version++;var a=t.version,r=s.getUserId(),l=i.length;return new Promise(function(c){o({offset:l,limit:20,photoId:e,callback:function(o,u){r===s.getUserId()&&a===t.version?o?c():(n({photoId:e,offset:l,clientTwins:u}),i.length<=l&&c(),c(i[l])):c()}})})}(e,t):Promise.resolve(a[r+1])}(t,r,i).then(function(e){return{prev:l,next:e}})}}},function(e,t,i){"use strict";var n=i(122),a=i(105),o=a.ServerGetTwins,s=a.UserFieldFilter;e.exports=function(e){var t=e.offset,i=e.limit,a=e.photoId,r=e.callback,l=e.onCaptcha,c=(new s).setProjection([340,200,210,432,330]),u=(new o).setPhotoId(a).setLimit(i).setOffset(t).setUserFieldFilter(c);new n(577,u).on(578,r).on(1,function(e,t){e||15===t.getType()&&l(t)}).request()}},function(e,t,i){"use strict";var n,a=i(3)(i(107));e.exports=(n={},(0,a.default)(n,113,"gift"),(0,a.default)(n,70,"multimedia"),(0,a.default)(n,18,"text"),(0,a.default)(n,155,"gif"),(0,a.default)(n,111,"sticker"),n)},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(117),s={children:a.node,shadow:a.bool},r=function(e){var t=e.children,i=e.shadow,a=o({"csms-chat-controls":!0,"csms-chat-controls--shadow":i});return n.createElement("div",{className:a},t)};r.propTypes=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(554),r=i(2995),l={id:a.string,name:a.string,value:a.string,placeholder:a.string,extra:a.node,autoFocus:a.bool,onClick:a.func,onFocus:a.func,onKeyPress:a.func,onChange:a.func,onBlur:a.func,innerRef:o.ref},c=function(e){var t=e.id,i=e.name,a=e.value,o=e.placeholder,l=e.extra,c=e.autoFocus,u=e.onClick,d=e.onFocus,h=e.onKeyPress,p=e.onChange,m=e.onBlur,g=e.innerRef;return n.createElement(s,{type:"message",content:n.createElement(r,{id:t,name:i,value:a,placeholder:o,onKeyPress:h,onClick:u,onFocus:d,onChange:p,onBlur:m,autoFocus:c,innerRef:g}),extra:l})};c.propTypes=l,c.defaultProps={id:"chat-composer-input-message",autoFocus:!1},e.exports=c},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r={type:o.oneOf(["message","search"]).isRequired,content:o.node.isRequired,extra:o.node},l=function(e){var t,i=e.type,o=e.content,r=e.extra,l=s((t={"csms-chat-composer-input-wrapper":!0},(0,n.default)(t,"csms-chat-composer-input-wrapper--".concat(i),!0),(0,n.default)(t,"csms-chat-composer-input-wrapper--has-extra",r),t));return a.createElement("div",{className:l},o,r?a.createElement("div",{className:"csms-chat-composer-input-wrapper__extra"},r):null)};l.propTypes=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(554),r=i(3e3),l={id:a.string,name:a.string,value:a.string,placeholder:a.string,extra:a.node,autoFocus:a.bool,isDisabled:a.bool,onFocus:a.func,onChange:a.func,onBlur:a.func,innerRef:o.ref},c=function(e){var t=e.id,i=e.name,a=e.value,o=e.placeholder,l=e.extra,c=e.autoFocus,u=e.onFocus,d=e.onChange,h=e.onBlur,p=e.innerRef;return n.createElement(s,{type:"search",content:n.createElement(r,{id:t,name:i,value:a,placeholder:o,autoFocus:c,onFocus:u,onChange:d,onBlur:h,innerRef:p}),extra:l})};c.propTypes=l,c.defaultProps={id:"chat-composer-input-search",autoFocus:!1},e.exports=c},function(e,t,i){"use strict";function n(e,t,i){f.track(L,{banner_id:e,position_id:t,context:i})}function a(e,t,i){f.track(V,{banner_id:e,position_id:t,context:i,call_to_action_type:1})}function o(e,t){var i=(new T).setPromoBannerStats((new P).setEvent(t).setContext(45).setPromoBlockType(e.promo_block.promo_block_type).setPromoBlockPosition(e.promo_block.promo_block_position));new c(278,i).request()}var s,r=i(3)(i(107)),l=i(100),c=i(122),u=i(295),d=i(132),h=i(103),p=i(303),m=i(557),g=i(3005),_=i(199),f=i(102),v=i(216),E=i(558),b=i(228),y=i(149),k=i(124),S=i(105),w=S.String,C=S.RedirectPage,T=S.ServerAppStats,P=S.PromoBannerStats,N=i(101),I=N.ChangeUserNameEvent,x=N.ClickEvent,A=N.ClickButtonEvent,O=N.ClickPromoEvent,V=N.ClickBannerEvent,R=N.ViewElementEvent,B=N.ViewPromoEvent,L=N.ViewBannerEvent,F=i(103),M=F.getUrl,D=F.getLocation,U=F.updateLocation,j={"attention-boost-reminder":209,"spotlight-reminder":555,"extra-shows-reminder":69,"rise-up-reminder":70,"nice-name":118,"extra-shows-explanation":208,"crush-explanation":181,"riseup-explanation":70,"invisible-explanation":117,"mmg-promo":496,"encounters-extra-shows":143,"spotlight-explanation-visiting-source":205,"extra-shows-explanation-visiting-source":205,"rise-up-explanation-visiting-source":205,"attention-boost-explanation-visiting-source":205,"spotlight-explanation":204,"attention-boost-explanation":204,"video-chat-explanation":204,"bundle-sale-explanation":204,"new-user-substitute":11,"get-more-likes":143},G=(s={},(0,r.default)(s,69,91),(0,r.default)(s,70,91),(0,r.default)(s,209,91),(0,r.default)(s,555,91),s),q=i(302),H=m.extend({headerTemplate:null,pageMenuButtons:[],notificationScreenAccess:3,init:function(){H._super.init.apply(this,arguments),this.element.attr("data-qa-page",this.qaAttribute)},open:function(e){var t=e.parameters,i=e.activationPlace,n=l.clone(e);if(!t.activationPlace){var a=D().routeName,o=Object.assign({},t,{activationPlace:i||1});U(a,o),n.parameters=o}H._super.open.call(this,n)},onStart:function(e){H._super.onStart.apply(this,arguments),this.registerView(1,new g).on(g.ACTIONS.BACK,this.onBackClick_,this).on(g.ACTIONS.BUTTON_CLICK,this.onButtonClick_,this),this.debugInvalidArgumentsError_();var t=this.getViewData(e);if(l.isEmpty(t))return this.goBack();var i=e.activationPlace;if(t.featureType&&(this.hotPanelPaymentFlowId_=v.trackStart(null,t.productType,i,{cost:t.cost,promoOption:!0})),t.mode===p.MMG_PROMO&&(f.track(R,{element:14}),f.track(B,{promo_screen:84}),o(this.getParameter("notification"),2)),304===t.promoBlockType){var a=e.notification.promo_block;n(a.promo_block_type,a.promo_block_position)}if(326===t.promoBlockType){var s=e.promoBlock;n(s.promo_block_type,s.promo_block_position,3)}this.getView(1).appendTo(this.parent);var r=d.getSync(19);t.sppEnabled=r.getEnabled(),this.updateView(1,t),this.readyForVrt()},getViewData:function(e){var t=E.getDataFromCorrectSource(e.notification,e.prePurchaseInfo,e.promoBlock);if(!l.isEmpty(t)){var i=e.activationPlace;return t.mode=this.productMode,t.pageTitle=E.getTitle(t.pageTitle,this.productMode),t.userId=this.getParameter("userId"),t.activationPlace=i,t.from=M(),this.productMode===p.VIDEO_CHAT_EXPLANATION&&(t.src=e.src,t.externalUrl=e.externalUrl),this.getParameter("activationPlace")&&(t.activationPlace=this.getParameter("activationPlace")),t.mode===p.MMG_PROMO&&(t.buttons=t.buttons.filter(function(e){return 1===e.type})),304===t.promoBlockType&&(t.buttons=t.buttons.filter(function(e){return 1===e.type}),t.avatars[0].badgeName="badge-feature-live",t.pulseAnimation=!0),326===t.promoBlockType&&(t.avatars[1].badgeName="badge-feature-liked-you",t.hideCloseButton=!0),t}this.log.error("No data to render for the Promotion Page")},debugInvalidArgumentsError_:function(){var e,t=this;if(["notification","prePurchaseInfo","promoBlock"].every(function(i){var n=t.getParameter(i);return!l.isString(n)||(e={name:i,value:n},!1)}),e){var i=new Error('PromotionPage started with string parameter "'.concat(e.name,'"'));u.getInstance().sendError(i,{image_root:e.value})}},onButtonClick_:function(e){y.generate(),e.buttonName&&f.track(A,{button_name:e.buttonName});var t=G[this.getScreenName()];if(t&&f.track(x,{element:t}),165===e.promoBlockType&&(f.track(x,{element:288,parent_element:14}),f.track(O,{promo_screen:84})),304===e.promoBlockType){var i=this.getParameter("notification").promo_block;a(i.promo_block_type,i.promo_block_position)}if(326===e.promoBlockType){var n=this.getParameter("promoBlock");a(n.promo_block_type,n.promo_block_position,3)}switch(e.actionType){case 53:this.handleSpotlightForSharing(e.sharingPicture,e.from);break;case 60:this.handleAcceptPromo(e.notificationId,e.providerType);break;case 9:this.handleOneClickPayment(e);break;case 77:case 20:this.goBack();break;default:this.handlePromoBlockClick(e)}},handleOneClickPayment:function(e){var t=e.featureType,i=e.productType,n=e.activationPlace,a=e.cost,o=e.userId,s=e.from;if(t){var r={activationPlace:n,cost:a,existingPaymentFlowId:this.hotPanelPaymentFlowId_,feature:t,promoBlockType:i};b.purchase({back:s,cost:a,featureType:t,hotPanelData:r,popState:!0,productType:i,userId:o,paymentTransitionInFlow:!0,error:l.once(this.onFail_.bind(this)),success:l.once(this.onSuccess_.bind(this))})}else this.log.error("Invalid feature type")},handleSpotlightForSharing:function(e,t){E.trackSpotlightForSharingNotification(2),h.navigate("try-for-free",!0,{photoId:e,source:t})},handlePromoBlockClick:function(e){var t=e.actionType,i=e.activationPlace,n=e.cost,a=e.promoBlockType,o=e.productType,s=e.redirectPage,r=e.from,l={action:t,activationPlace:i,banner:a,cost:n,popState:!0,productType:o,paymentTransitionInFlow:!0};s&&(l.redirectPage=function(e){return(new C).setRedirectPage(e)}(s));var c={from:r};_.handlePromoSelected(l,c)},handleAcceptPromo:function(e,t){new c(402,(new w).setValue(e)).on(387,function(e){e&&k.showNotification({type:k.TYPES.ERROR})}).request(),f.track(I,{social_media:q[t]}),this.goBack()},onNavigationAction:function(){this.onBackClick_()},goBack:function(){this.productMode===p.MMG_PROMO&&(f.track(x,{element:65,parent_element:14}),o(this.getParameter("notification"),4)),this.notifyHandler(),this.isActive()&&h.back()},onBackClick_:function(){v.trackPaymentResult(this.hotPanelPaymentFlowId_,v.RESULT.CANCELLED);var e=this.getParameter("reject");e&&e("Navigation back by user."),this.goBack()},onFail_:function(e){v.trackPaymentResult(this.hotPanelPaymentFlowId_,v.RESULT.FAILURE);var t=this.getParameter("reject");t&&t(e),this.goBack()},onSuccess_:function(e){var t=this.getParameter("resolve");t&&t(e),this.goBack()},getScreenName:function(){var e=D().routeName;return j[e]||204}},"PromotionPage");e.exports=H},function(e,t,i){"use strict";var n=i(100),a=i(155),o=i(121),s=i(306),r=i(105).ClientNotification,l=o.extend({notification_:null,onStart:function(){n.isString(this.getParameter("notification"))||(this.notification_=this.getParameter("notification"),this.notification_&&(this.notification_=a(this.notification_))),l._super.onStart.apply(this,arguments)},notifyHandler:function(){this.notification_ instanceof r&&n.isString(this.notification_.getId())&&s.getInstance().notificationHandled(this.notification_.getId())}},"Notification");e.exports=l},function(e,t,i){"use strict";function n(e,t){return e.getSignificance(-1)<t.getSignificance(-1)?-1:e.getSignificance(-1)>t.getSignificance(-1)?1:0}function a(e){var t=1;return o.isFunction(e.getBadgeType)&&(t=e.getBadgeType(1)),t}var o=i(100),s=i(155),r=i(99),l=i(303),c=i(199),u=i(102),d=i(169),h=i(125),p=i(105).ClientNotification,m=i(101).NotificationEvent,g=h.getLogger("PromotionPageHelper"),_=[50],f={getTitle:function(e,t){var i="";switch(t){case l.SPOTLIGHT:case l.SPOTLIGHT_EXPLANATION:case l.PROMO_SPOTLIGHT_CAME_FROM_EXPLANATION:case l.SPOTLIGHT_FOR_SHARING:i=r.get(329);break;default:i=e}return i},trackSpotlightForSharingNotification:function(e){u.track(m,{notification_type:1,notification_action_type:e,activation_place:90})},getDataFromNotification:function(e){var t=e&&e.getImageUrls(),i=t&&t[0],n=e.getImportProviders(),a=n&&n.getProviders([])[0];return{avatars:[{significance:1,src:i}],imageUrl:i,providerType:a&&a.getType(),buttons:[{actionText:e.getActionText(),actionType:e.getAction(),type:1}],notificationId:e.getId(),titleText:e.getTitle(),messageText:e.getMessage(),actionType:e.getAction(),cancelActionText:e.getCancelActionText(),actionText:e.getActionText(),empathizedText:e.getDisplayComment()}},getDataFromPrepurchaseInfo:function(e){if(!e)return{};var t=e.getApplicationFeature(),i=t.getFeature();116===i&&t.setRequiredAction(9);var n=e.getAlbum(),s=n?o.map(n.getPhotos(),function(e){var t=a(e);return{src:e.getPreviewUrl(),badgeType:t,badgeName:d.getBadgeName(t),significance:2}}):[],r=o.map(t.getDisplayImages(),function(e){var t=a(e);return{src:e.getDisplayImages(),badgeType:t,badgeName:d.getBadgeName(t),significance:2}}),l=t.getProductType(),u=s.concat(r),h=c.getPromoBlockForProduct(l),p=u.slice(0,3),m=null;return 3===p.length&&((m=p[1]).badgeName=d.getBadgeTypeFromPromoBlock(h),m.significance=1),{avatars:p,buttons:[{actionText:t.getDisplayAction(),actionType:t.getRequiredAction(),type:1}],featureName:c.getFeatureName(h),costOfService:e.getCost(),cost:t.getPaymentAmount(),featureType:i,messageText:t.getDisplayMessage(),pageTitle:e.getHeader(),productType:l,sharingPicture:m?m.src:null,titleText:t.getDisplayTitle()}},getDataFromPromoBlock:function(e){var t=function(e){var t=e.getPictures([]).sort(n).map(function(e){var t=e.getBadgeType(1);return{badgeName:d.getBadgeName(t),badgeType:t,significance:e.getSignificance(-1),src:e.getDisplayImages()}});return 3===t.length&&(t=[t[2],t[0],t[1]]),t}(e),i=e.getPromoBlockType(),a=e.getOkPaymentProductType(),o=function(e){var t=e.getButtons([]);return t.length?t.filter(function(e){return 4!==e.getType()}).map(function(e){var t={actionText:e.getText(),actionType:e.getAction(),type:e.getType()},i=e.getRedirectPage();return i&&i.getRedirectPage&&(t.redirectPage=i.getRedirectPage()),t}):(t.push({actionText:e.getAction(),actionType:e.getOkAction()}),e.getOtherText()&&e.getOtherAction()&&t.push({actionText:e.getOtherText(),actionType:e.getOtherAction()}),t)}(e);return{avatars:t,buttonName:c.getButtonName(i),buttons:o,cost:e.getPaymentAmount(),costOfService:e.getCreditsCost(),featureName:c.getFeatureName(i),featureType:a&&c.getFeatureFromPaymentProductType(a),messageText:e.getMssg(),otherActionText:o[1],
pageTitle:e.getScreenHeader()||e.getHeader(),productType:e.getOkPaymentProductType(),sharingPicture:t.length?(t[1]||t[0]).src:null,titleText:e.getHeader(),promoBlockType:i,redirectPage:e.getRedirectPage()&&e.getRedirectPage().getRedirectPage()}},getDataFromCorrectSource:function(e,t,i){if(o.isString(e)||o.isString(t)||o.isString(i))return g.error("Invalid arguments, expected Notification, PrePurchaseInfo or PromoBlock object"),{};if(e){if(!((e=s(e))instanceof p))return{};var n=e.getType();return 81===n||89===n?this.getDataFromPromoBlock(e.getPromoBlock()):-1!==_.indexOf(n)?this.getDataFromNotification(e):this.getDataFromPrepurchaseInfo(e.getPurchaseInfo())}return t?this.getDataFromPrepurchaseInfo(s(t)):i?this.getDataFromPromoBlock(s(i)):void 0}};e.exports=f},function(e,t,i){"use strict";var n=i(557).extend({overlay:!0,createElement:function(){var e=n._super.createElement.call(this);return e.addClass("overlay-page"),e},getNavigationActions:function(){return{close:!0}},dismiss:function(){n.prototype.dismiss.apply(this,arguments),this.notifyHandler()}},"NotificationOverlay");e.exports=n},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(123)),c=n(i(116)),u=i(98),d=i(104),h=i(117),p=i(412).doSharing,m=i(3020),g=i(3021),_=i(145),f={trackClickToAnalytics:d.bool,trackPostToAnalytics:d.bool,link:d.string,sharingOptions:d.arrayOf(d.shape({resource:d.string,title:d.string,networkType:d.number,sharingDescription:d.string,link:d.string})),extraTrackingParams:d.shape({activationPlace:d.number,contentType:d.number})},v=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).handleClick=i.handleClick.bind((0,l.default)(i)),i.handleClipboardInputBlur=i.handleClipboardInputBlur.bind((0,l.default)(i)),i.handleCopyError=i.handleCopyError.bind((0,l.default)(i)),i.state={chosenSharingMethod:null,nativeCopyFailed:null},i.copyInputRef=u.createRef(),i.scrollList=u.createRef(),i}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.scrollList.current&&(this.scrollList.current.style.padding="0 16px")}},{key:"shareLink",value:function(e){var t=this.props,i=t.link,n=t.trackClickToAnalytics,a=t.trackPostToAnalytics,o=t.extraTrackingParams,s=e.networkType,r=e.index,l=e.sharingDescription,c=e.link,u=26===s?this.copyInputRef.current:null;p(s,{url:c||i,title:l,sharingInput:u,onCopyError:this.handleCopyError,trackClickToAnalytics:n,trackPostToAnalytics:a,index:r,extraTrackingParams:o})}},{key:"handleClick",value:function(e){var t=this,i=e.networkType;return function(){t.setState({chosenSharingMethod:i},function(){t.shareLink(e)})}}},{key:"handleClipboardInputBlur",value:function(){this.setState({chosenSharingMethod:null,nativeCopyFailed:null})}},{key:"handleCopyError",value:function(){var e=this;this.setState({nativeCopyFailed:!0},function(){e.copyInputRef.current.focus(),window.scrollTo(0,9999)})}},{key:"renderSocialsList",value:function(){var e=this,t=this.props.sharingOptions,i=void 0===t?[]:t;if(!i||!i.length)return null;var n=i.map(function(t,i){var n=t.resource,a=t.title,o={networkType:t.networkType,index:i,sharingDescription:t.sharingDescription,link:t.link};return u.createElement("div",{key:n,onClick:e.handleClick(o)},u.createElement(g,{resource:n,title:a,isActive:!0}))});return u.createElement(m,{layout:"horizontal",innerRef:this.scrollList},n)}},{key:"renderInputWithUrl",value:function(){var e=this.props,t=e.link,i=e.sharingOptions,n=this.state,a=n.chosenSharingMethod,o=n.nativeCopyFailed,s=26===a&&!0===o,r=h("share-copy-fallback-wrapper",{"share-copy-fallback-wrapper--visible":s}),l=i.find(function(e){return 26===e.networkType}),c=l&&l.link||t||"";return u.createElement("div",{className:r},u.createElement(_,{top:"lg",bottom:"lg"},u.createElement("input",{type:"text",className:"share-copy-fallback",readOnly:!s,ref:this.copyInputRef,defaultValue:c,onBlur:this.handleClipboardInputBlur})))}},{key:"render",value:function(){return u.createElement(u.Fragment,null,this.renderSocialsList(),this.renderInputWithUrl())}}]),t}(u.Component);v.propTypes=f,v.defaultProps={trackClickToAnalytics:!0,trackPostToAnalytics:!0},e.exports=v},function(e,t,i){"use strict";var n=i(98),a=i(109),o=i(3038),s=i(3040),r=i(3041),l=i(111),c=i(171),u=i(3078),d=i(267),h=l("APP_DOWNLOAD","CANCEL_UPLOAD","LOAD_PROFILE","MESSAGES_WERE_UPDATED","MULTIMEDIA_MESSAGE_SEEN","NEW_MESSAGE_SEEN","NEW_UNREAD_MESSAGE","REACHED_END","REPORT_MESSAGE","REPORT","SELECT_MESSAGE","VIEW_MULTIMEDIA","CLICK_MESSAGE"),p=a.extend({scroll_:null,events:{"click .js-appstore-link":"onDownloadAppClick_"},init:function(){var e=this;p._super.init.apply(this,arguments),this.scroll_={},this.$el.html(s.render()),this.onMessageViewed=function(t){return e.trigger(t.multimedia?h.MULTIMEDIA_MESSAGE_SEEN:h.NEW_MESSAGE_SEEN,t)},this.onNewUnreadMessage=this.trigger.bind(this,h.NEW_UNREAD_MESSAGE),this.onReport=this.trigger.bind(this,h.REPORT),this.onSelect=this.trigger.bind(this,h.SELECT_MESSAGE),this.onClickMessage=this.trigger.bind(this,h.CLICK_MESSAGE)},updateMatchMessageView_:function(e){if(!d.isActive()){var t=this.getView("MATCH_MESSAGE");t||(t=this.registerView("MATCH_MESSAGE",new o({el:this.$(".js-match-message")[0]})).on(o.ACTIONS.CLICK,this.trigger.bind(this,h.LOAD_PROFILE)).enable()),e.chatUser.getIsMatch(!1)?t.render(e.chatUser):t.reset()}},update:function(e){return this.updateMatchMessageView_(e),this.updateMessages_(e),this},updateMessages_:function(e){this.scrollPosition_=this.getScrollPosition_(e),this.renderReactView(n.createElement(r,{key:e.chatInstanceId,chatInstanceId:e.chatInstanceId,chatUser:e.chatUser,counter:e.counter,isSelectable:Boolean(e.isSelectable),messages:e.messages,promos:e.promoBanners,onMessageViewed:this.onMessageViewed,onNewUnreadMessage:this.onNewUnreadMessage,onReport:this.onReport,onSelect:this.onSelect,onClickMessage:this.onClickMessage,scrollPosition:this.scrollPosition_}),this.$(".js-chat-messages")[0])},destroy:function(){var e=this.$(".js-chat-messages")[0];this.removeReactView(e.getAttribute("data-react-view-id"))},onDownloadAppClick_:function(e,t){e.preventDefault(),this.trigger(h.APP_DOWNLOAD,t.href)},getSpacingStub:function(){return this.$(".js-chat-spacing-stub")},resetScroll:function(){this.scrollPosition_&&this.scrollPosition_.reset()},scrollToBottom:function(e){this.scrollPosition_&&this.scrollPosition_.scrollToBottom(e)},getScrollPosition_:function(e){var t=c();if(e.dummy)return new u(t);var i=e.chatInstanceId,n=this.scroll_[i],a=n||new u(t);return n||(this.scroll_[i]=a,a.isFirstScroll=!0,a.id=i),a}},"ChatMessages");p.EVENTS=h,e.exports=p},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r=i(106),l={background:o.oneOf(["transparent","gray"])},c=function(e){var t=e.background,i=s((0,n.default)({"csms-chat-message-loader":!0},"csms-chat-message-loader--".concat(t),!0));return a.createElement("div",{className:i,"data-qa":"chat-message-loader"},a.createElement(r,{name:"loading-dots",size:"xlg"}))};c.propTypes=l,c.defaultProps={background:"gray"},e.exports=c},function(e,t,i){"use strict";function n(e){var t=e.replace(/\*/g,"[^ ]+?").replace(/\./g,"\\.");return new RegExp("^(https?:\\/\\/)?".concat(t))}function a(e){d=!0,c=c.concat(e.map(n))}function o(e){return c.some(function(t){return t.test(e)})}var s=i(3);t.__esModule=!0,t.wildCardToRegexp=n,t.addBlackListedUrls=a,t.loadUrlPreviewConfig=function(e,t){var i=e.RPC,o=e.Logger,s=e.Protocol;if(i&&o&&s){var r=s.MessageType,l=r.SERVER_GET_RESOURCES,c=r.CLIENT_RESOURCES,p=s.ServerGetResources,m=s.ResourceRequest,g=s.ResourceReference,_=s.ClientSource.CLIENT_SOURCE_CHAT,f=s.ResourceType,v=f.RESOURCE_TYPE_CHAT_DOMAINS_BLACKLIST,E=f.RESOURCE_TYPE_CHAT_CLIENT_DOMAINS_WHITELIST;h=!0,new i(l,(new p).setRequests([(new m).setResourceType(v).setReference((new g).setContext(_)),(new m).setResourceType(E).setReference((new g).setContext(_))])).on(c,function(e,i){if(h=!1,e)return o&&o.error("Failed to fetch URL configuration",e),void t(!1);try{i.getResources().forEach(function(e){var t,i=e.getPayload().getUrls([]);e.getResourceType()===E?(t=i,d=!0,u=u.concat(t.map(n))):e.getResourceType()===v&&a(i)}),t(!0)}catch(e){o&&o.error("Failed to fetch URL configuration",e),t(!1)}}).request()}},t.isUrlConfigLoaded=function(){return d},t.isUrlConfigLoading=function(){return h},t.getUrlToPreviewMap=function(){return l},t.addUrlToPreview=function(e,t){l[e]=t},t.isUrlBlacklisted=o,t.getUrlsInString=function(e){var t=e.split(/\s/).map(r.default);if(!t)return null;var i=[],n=[];return t.forEach(function(e,t){if("string"==typeof e){var a=e.replace(/\s/g,"");o(a)?n.push({url:a,index:t}):i.push({url:a,index:t})}}),{cleanUrls:i,badUrls:n}};var r=s(i(564)),l={},c=[],u=[],d=!1,h=!1},function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e){if(!/[a-z]+/i.test(e)||!/^[a-z0-9$&+,\/:;=?@.\-!*'()%]+?\.[a-z0-9$&+,\/:;=?@.\-!*'()%]+?$/i.test(e))return null;try{var t=e;t.startsWith("http")||(t="http://".concat(t));var i=new URL(t);if(i&&!i.username&&-1===i.host.indexOf("..")&&!i.host.endsWith("."))return i.toString()}catch(e){return null}return null},e.exports=t.default},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r=i(562),l={direction:o.oneOf(["in","out"]).isRequired,isContinuation:o.bool,nesting:o.oneOf(["top","middle","bottom"]),content:o.node.isRequired,isLoading:o.bool},c=function(e){var t,i=e.direction,o=e.isContinuation,l=e.nesting,c=e.content,u=e.isLoading,d=s((t={"csms-chat-bubble":!0},(0,n.default)(t,"csms-chat-bubble--".concat(i),!0),(0,n.default)(t,"csms-chat-bubble--continuation",o),(0,n.default)(t,"csms-chat-bubble--nested-".concat(l),l),(0,n.default)(t,"csms-chat-bubble-liquid",!0),t));return a.createElement("div",{className:d},a.createElement("div",{className:"csms-chat-bubble-liquid__content"},c,u?a.createElement(r,null):null))};c.propTypes=l,c.defaultProps={isContinuation:!1,isLoading:!1},e.exports=c},function(e,t,i){"use strict";function n(e,t){return Math.max(e,t)/Math.min(e,t)}var a=i(3),o=a(i(4)),s=a(i(110)),r=a(i(112)),l=a(i(114)),c=a(i(115)),u=a(i(123)),d=a(i(116)),h=i(98),p=i(100),m=i(131),g=i(102),_=i(103),f=i(157),v=i(3068),E=i(263),b=i(101).ViewPhotoInChatEvent,y=function(e){function t(e){var i;(0,s.default)(this,t),i=(0,l.default)(this,(0,c.default)(t).call(this,e));var n=e.message.image||{};return i.checkVisibility=i.checkVisibility.bind((0,u.default)(i)),i.observe_=e.observe||p.noop,i.unobserve_=e.unobserve||p.noop,i.state={image:{height:n.height,ratio:n.ratio,width:n.width},isLoading:!1},i}return(0,d.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.observe_(this.el,this.checkVisibility)}},{key:"componentWillUnmount",value:function(){this.unobserve_(this.el)}},{key:"checkVisibility",value:function(e){e.isIntersecting&&(this.unobserve_(this.el),this.loadImage(this.props.message))}},{key:"loadImage",value:function(e){var t=this;this.setState({isLoading:!0}),m.preloadImage(e.image.src).then(function(i){var a=(0,o.default)(i,3),s=a[0],r=a[1],l=a[2];f.markMultimediaView(e),t.setState({image:{src:s,width:r,height:l,ratio:n(r,l)}})}).catch(function(i){throw e.image.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",t.setState({image:e.image}),i})}},{key:"viewPhoto",value:function(){var e=this.props.message,t=e.image,i=!e.isYours(),n=i?e.fromPersonId:e.toPersonId;g.track(b,{encryptedUser_id:e.fromPersonId,photo_id:e.id,time_limit:4}),_.navigate("multimedia",{chatUserId:n,id:e.id,isTheirs:i,source:t.src,state:"view",type:t.visibility})}},{key:"render",value:function(){var e=this,t=this.getUpdatedMessage();return h.createElement(v,{direction:this.props.direction,image:this.state.image,isContinuation:this.props.isContinuation,isLoading:this.state.isLoading,message:t.message,status:t.status,isSelectable:t.isSelectable&&!t.isYours(),isSelected:t.isSelected,onSelect:this.onSelect,onClickContent:this.viewPhoto.bind(this),innerRef:function(t){return e.el=t}})}}]),t}(E);e.exports=y},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(210),r=i(415),l={direction:a.oneOf(["in","out"]),isContinuation:a.bool,status:a.object,isNested:a.bool,isSelectable:a.bool,isSelected:a.bool,onSelect:a.func,content:a.shape({src:a.string,format:a.oneOf(["image","video"]),innerVideoRef:o.ref}),isLoading:a.bool,innerRef:o.ref},c=function(e){var t=e.direction,i=e.isContinuation,a=e.status,o=e.isNested,l=e.isSelectable,c=e.isSelected,u=e.onSelect,d=e.content,h=e.isLoading,p=e.innerRef;return n.createElement(s,{direction:t,isContinuation:i,status:a,isNested:o,isSelectable:l,isSelected:c,onSelect:u,innerRef:p},n.createElement("div",{className:"csms-chat-message-content-sticker","data-qa-message-content-type":"sticker"},n.createElement("div",{className:"csms-chat-message-content-sticker__image"},h||d?n.createElement(r,{src:h?null:d.src,format:d?d.format:null,innerVideoRef:d?d.innerVideoRef:null}):null)))};c.propTypes=l,e.exports=c},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r={direction:o.oneOf(["in","out"]).isRequired,isContinuation:o.bool,nesting:o.oneOf(["top","middle","bottom"]),content:o.node.isRequired},l=function(e){var t,i=e.direction,o=e.isContinuation,r=e.nesting,l=e.content,c=s((t={"csms-chat-bubble":!0},(0,n.default)(t,"csms-chat-bubble--".concat(i),!0),(0,n.default)(t,"csms-chat-bubble--continuation",o),(0,n.default)(t,"csms-chat-bubble--nested-".concat(r),r),(0,n.default)(t,"csms-chat-bubble-simple",!0),t));return a.createElement("div",{className:c},a.createElement("div",{className:"csms-chat-bubble-simple__content"},l))};l.propTypes=r,l.defaultProps={isContinuation:!1},e.exports=l},function(e,t,i){"use strict";var n=i(3081),a=i(570),o=i(571),s=i(572);e.exports={Test:n,Variation:o,Default:a,updateAll:function(){s.update()}}},function(e,t,i){"use strict";function n(e){return e.children||null}var a={children:i(104).node};n.propTypes=a,e.exports=n},function(e,t,i){"use strict";function n(e){var t=e.children;return t||null}var a=i(104),o={name:a.oneOfType([a.string,a.arrayOf(a.string)]).isRequired,children:a.node};n.propTypes=o,e.exports=n},function(e,t,i){"use strict";e.exports={callbacks_:[],add:function(e){this.callbacks_.push(e)},remove:function(e){for(var t=this.callbacks_,i=0;i<=t.length;i++)t[i]===e&&t.splice(i,1)},update:function(){this.callbacks_.forEach(function(e){return e()})}}},function(e,t,i){"use strict";e.exports={interval:null,stopped:!1,init:function(e,t){this.element=e,this.text=this.element.attr("data-placeholder")||t&&t.placeholder,this.destroy(),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.start=this.start.bind(this),this.stopped=!1,this.element.on("focus",this.onFocus).on("blur",this.onBlur),this.start()},start:function(){var e=this,t=0;clearInterval(this.interval),this.interval=setInterval(function(){e.stopped?clearInterval(e.interval):(t>e.text.length&&e.reload(),e.element.attr("placeholder",e.text.substr(0,t)),t++)},70)},reload:function(){clearInterval(this.interval),this.stopped||setTimeout(this.start,1e3)},onBlur:function(e){""===e.currentTarget.value&&(setTimeout(this.start,2e3),this.stopped=!1)},onFocus:function(){clearInterval(this.interval),this.element.attr("placeholder",this.text),this.stopped=!0},destroy:function(){this.element&&(clearInterval(this.interval),this.stopped=!0,this.element.off("focus",this.onFocus).off("blur",this.onBlur))}}},,,function(e,t,i){"use strict";function n(){p=null}function a(e){var t=function(e){var t=(e=e instanceof Array?e[0]:e).getStickerPacks([]).map(function(e){return new c(e)}).sort(function(e,t){return t.isEnabled-e.isEnabled}),i=e.getRecentStickers([]).map(function(e){return new l(e)});return{stickerPacks:t,recentStickers:i}}(e);return n(),function(e){return e.stickerPacks.forEach(o),h.recentStickers.length=0,e.recentStickers.forEach(function(e){return h.recentStickers.push(e)}),h}(t)}function o(e){var t,i,n=(t=e.id,(i||h.stickerPacks).find(function(e){return e.id===t}));if(n)for(var a in e)n[a]=e[a];else h.stickerPacks.push(e)}var s=i(135),r=i(113),l=i(577),c=i(3104),u=i(195),d=i(105).ServerGetStickerPacks,h={stickerPacks:[],recentStickers:[]},p=null,m=null,g=s.extend({commitCache:!1,useCache_:!1,getRequestMessageType:441,getResponseMessageType:442,name:"Stickers",get:function(e){return e=e||{},h.stickerPacks.length?Promise.resolve(h):this.fetch(e.context)},fetch:function(e){if(p)return p;var t=null;if(e&&(t=(new d).setContext(e)),u.isOnline())return g._super.fetch.call(this,t).then(a);var i=!!h.stickerPacks.length,o=function(){return p||(p=new Promise(function(e,t){u.on(u.EVENTS.ONLINE,function i(){g._super.fetch.call(g.getInstance(),null).then(a).then(function(t){u.off(u.EVENTS.ONLINE,i),e(t)}).catch(function(e){u.isOnline()&&(u.off(u.EVENTS.ONLINE,i),n(),t(e))})})})),p}();return i?Promise.resolve(h):o},updateRecent:function(e,t){var i=t.stickers.find(function(t){return t.id===e}),n=h.recentStickers,a=n.find(function(t){return t.id===e});if(a){var o=n.indexOf(a);n.splice(o,1)}n.unshift(i),n.splice(20,n.length)},setAsViewed:function(e){e.isNew=!1},unlockPack:function(e){e.isEnabled=!0,e.isLoading=!1,e.promoBlock=null;var t=h.stickerPacks.indexOf(e);h.stickerPacks.splice(t,1),h.stickerPacks.unshift(e)}},"StickerModel");g.getInstance=function(){return m||(m=new g,r.on(r.EVENTS.LOGOUT,function(){h.recentStickers.length=0,h.stickerPacks.length=0},m),r.on(r.EVENTS.USER_CHANGED,m.get,m)),m},e.exports=g},function(e,t,i){"use strict";e.exports=function(e,t){this.id=Number(e.getId()),this.packId=t,this.src=e.getImageId()}},function(e,t,i){"use strict";var n=i(340);e.exports=function(e){var t=n();return e.on("start",t.show),e.on("stop",t.hide),t}},function(e,t,i){"use strict";var n,a=i(135),o=i(122),s=i(105),r=s.ServerSendUserReport,l=s.ServerGetReportTypes,c=a.extend({name:"ReportUser",getRequestMessageType:68,getResponseMessageType:69,setRequestMessageType:70,setResponseMessageType:o.anyOf(387,605,280),get:function(e){var t=null;return e&&(t=new l,e.reportType&&t.setReportType(e.reportType),e.userId&&t.setUserId(e.userId),e.context&&t.setContext(e.context)),a.prototype.get.call(this,t)},set:function(e){var t=(new r).setReportTypeId(e.reportTypeId).setPersonId(e.userId);return e.comment&&t.setComment(e.comment),e.messageIdList&&t.setMessageIdList(e.messageIdList),void 0!==e.blockUser&&t.setBlockUser(e.blockUser),e.context&&t.setContext(e.context),e.reportType&&t.setReportType(e.reportType),e.messageId&&t.setMessageId(e.messageId),e.streamId&&t.setStreamId(e.streamId),a.prototype.set.call(this,t)}},"ReportUser");c.getInstance=function(){return n||(n=new c)},e.exports=c},function(e,t,i){"use strict";function n(e,t){var i={uid:e.getUserId(),folder:o.TYPES.FAVOURITES},n=null;return!0===e.getIsFavourite()?n=o.getInstance().addUserToFolder(i):(n=o.getInstance().removeUserFromFolder(i),t&&n.then(t)),n}var a=i(195),o=i(140),s=i(100),r=i(139),l={USER_CHANGED:"change",ONLINE:"online"},c=function(){this.EVENTS=l,this.init.apply(this,arguments)},u={};s.extend(c.prototype,r,{init:function(){a.on(a.EVENTS.ONLINE,this.backOnline,this)},backOnline:function(){var e=[];for(var t in u){var i=u[t];e.push(n(i.user,i.callback))}u={},this.trigger(l.ONLINE,Promise.all(e))},toggleFavouriteStatus:function(e,t){e.setIsFavourite(!e.getIsFavourite(!1)),this.trigger(l.USER_CHANGED,e),a.isOnline()?n(e,t):function(e,t){u[e.getUserId()]={user:e,callback:t}}(e,t)}}),e.exports=new c},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(109),s=i(3130),r=o.extend({events:{"click .js-goto":"openSettingPage_"},viewData_:{canManagePayments:!1,showBlockedUsers:!1,navigationActions:{back:!0}},update:function(e){this.viewData_=n.extend(this.viewData_,e||{}),this.$el.html(s.render(this.viewData_))},openSettingPage_:function(e,t){t=a(t),this.trigger("navigate",{to:t.data("destination")})}},"Settings");e.exports=r},function(e,t,i){"use strict";var n=i(25),a=i(100),o=i(126),s=i(5),r=i(109),l=i(99),c=i(141),u=i(111),d=s.supportsDateInput(),h=new Date,p=c.createElement,m=function(e,t){for(var i={name:"year",options:[]},n=h.getFullYear()-e,a=h.getFullYear()-t,o=n;o>=a;o--)i.options.push({value:o,label:o});return i},g=function(){for(var e={name:"month",options:[]},t=1;t<=12;t++)e.options.push({value:t<10?"0".concat(t):t,label:l.getTranslatedMonth(t)});return e},_=function(){for(var e={name:"day",options:[]},t=1;t<=31;t++)e.options.push({value:t<10?"0".concat(t):t,label:t});return e},f=function(e){return e.toISOString().substring(0,10)},v=u("BLUR","FOCUS","CHANGE"),E=r.extend({className:"date-select-singular",MIN_AGE:o.get("user.age.min"),MAX_AGE:99,dateSelect_:null,init:function(){var e=this;if(d){var t=new Date,i=new Date;t.setFullYear(t.getFullYear()-this.MAX_AGE),i.setFullYear(i.getFullYear()-this.MIN_AGE);var a=f(i);this.dateSelect_=n(p("input",{id:"input-date",type:"date",min:f(t),max:a,defaultValue:a}));var o=this.options.qaData;o&&this.dateSelect_.attr("data-qa",o)}else this.dateSelect_=n([this.day_=this.getSelectBox(_()),this.month_=this.getSelectBox(g()),this.year_=this.getSelectBox(m(this.MIN_AGE,this.MAX_AGE))]);this.dateSelect_.on("change",function(t){n.os.oldAndroid&&e.trigger(v.BLUR),e.handleInputChange_(t)}).on("focus",function(){return e.trigger(v.FOCUS)}).on("blur",function(t){e.trigger(v.BLUR),e.handleInputChange_(t)}),this.render()},destroy:function(){d&&this.dateSelect_.off("change"),E._super.destroy.apply(this,arguments)},getSelectBox:function(e){var t=p("select",{name:e.name},e.options.map(function(e){return p("option",{value:e.value,label:e.label,html:e.label})})),i=this.options.qaData;return i&&t.setAttribute("data-qa","".concat(i,"-").concat(e.name)),t},handleInputChange_:function(e){e.stopPropagation(),this.dateSelect_.toggleClass("has-date",""!==this.value()),this.trigger(v.CHANGE,this.value())},render:function(){this.$el.append(this.dateSelect_),d&&this.$el.append(p("span",{className:"placeholder"},l.get(117)))},value:function(){var e,t,i,n;return d?(e=this.dateSelect_.val().split("-"),e&&e.length&&3===e.length&&(t=e[0],i=1===e[1].length?"0".concat(e[1]):e[1],n=1===e[2].length?"0".concat(e[2]):e[2])):(t=this.year_.value||void 0,i=this.month_.value||void 0,n=this.day_.value||void 0),void 0===t?null:"".concat(t,"-").concat(i,"-").concat(n)},update:function(e){if(e.date){if(d)this.dateSelect_[0].value="",this.dateSelect_[0].value=e.date,this.dateSelect_.attr("defaultValue",e.date);else{var t=e.date.split("-");this.day_.value=t[2],this.month_.value=t[1],this.year_.value=t[0]}this.dateSelect_.addClass("has-date")}e.reset&&(this.dateSelect_.removeClass("has-date"),d?this.dateSelect_.val(""):(this.day_.value="",this.month_.value="",this.year_.value="")),a.isBoolean(e.disabled)&&(e.disabled?this.dateSelect_.attr("disabled",!0):this.dateSelect_.removeAttr("disabled"))},supportsDateInput:function(){return d}},"DateSelectView");E.EVENTS=v,e.exports=E},function(e,t,i){"use strict";var n=i(3);t.__esModule=!0,t.default=t.SpecialEventType=t.RpcErrorType=t.RpcAdapter=t.Rpc=void 0;var a=n(i(110)),o=n(i(112)),s=i(3143);t.RpcAdapter=s.RpcAdapter;var r=i(3144);t.RpcErrorType=r.RpcErrorType;var l=i(3145);t.SpecialEventType=l.SpecialEventType;var c=function(){function e(t,i){(0,a.default)(this,e),this.adapter=this.createRpcAdapter(t,i)}return(0,o.default)(e,[{key:"request",value:function(){return this.adapter.request(),this}},{key:"abort",value:function(){return this.adapter.abort(),this}},{key:"onResponse",value:function(e,t,i){return this.adapter.onResponse(e,t,i),this}},{key:"onError",value:function(e,t){return this.adapter.onError(e,t),this}},{key:"onSpecialEvent",value:function(e,t,i){return this.adapter.onSpecialEvent(e,t,i),this}},{key:"offResponse",value:function(e,t,i){return this.adapter.offResponse(e,t,i),this}},{key:"offError",value:function(e,t){return this.adapter.offError(e,t),this}},{key:"offSpecialEvent",value:function(e,t,i){return this.adapter.offSpecialEvent(e,t,i),this}}]),e}();t.Rpc=c;var u=c;t.default=u},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.s(t.get(["cities"],!1),t,{block:i},{})}function i(e,t){return e.w('<li data-id="').f(t.get(["id"],!1),t,"h").w('" data-name="').f(t.get(["name"],!1),t,"h").w('" class="js-city-item">').f(t.get(["name"],!1),t,"h").w("</li>")}return e.register("location-list-items",t),t.__dustBody=!0,i.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n,a=i(100),o=i(126),s=i(135),r=i(56),l=i(105),c=l.ServerHelpCenterGetSectionList,u=l.ServerHelpCenterGetQuestion,d=429,h=430,p=431,m=432,g=s.extend({name:"HelpCenter",getList:function(e){this.getRequestMessageType=d,this.getResponseMessageType=h;var t=(new c).setPlatform(r());return a.isString(e)&&e.length>2&&t.setFilter(e),this.get(t).then(this.mangleToOldList_.bind(this))},getQuestion:function(e){this.getRequestMessageType=p,this.getResponseMessageType=m;var t=(new u).setSectionId(e.section).setQuestionId(e.question);return this.get(t).then(this.mangleToOldQuestion_.bind(this))},getCacheKey_:function(e,t){var i="HelpCenter-".concat(o.get("platform"));return t instanceof u?i+="-question-".concat(t.getSectionId(),"-").concat(t.getQuestionId()):(i+="-list-",a.isFunction(t.getFilter)&&(i+=t.getFilter())),"".concat(i)},mangleToOldList_:function(e){var t=e&&e.length&&e[0].getSections([]);if(!t)return[];for(var i=[],n=0;n<t.length;n+=1){for(var a={id:t[n].getId(),name:t[n].getName()},o=t[n].getQuestions([]),s=[],r=0;r<o.length;r+=1)s.push({id:o[r].getId(),name:o[r].getName()});a.questions=s,i.push(a)}return{sections:i}},mangleToOldQuestion_:function(e){var t=e&&e.length&&e[0];return{question:{id:t.getId(),question:t.getName(),answer:t.getDescription()}}}},"HelpCenter");g.getInstance=function(){return n||(n=new g),n},e.exports=g},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerGetTerms,s=a.extend({name:"Guidelines",getRequestMessageType:76,getResponseMessageType:77,get:function(){var e=(new o).setContext(131).setType(6);return s._super.get.call(this,e)}},"Guidelines");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerGetTerms,s=a.extend({name:"SafetyTips",getRequestMessageType:76,getResponseMessageType:77,get:function(){var e=(new o).setContext(131).setType(8);return s._super.get.call(this,e)}},"SafetyTips");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n,a=i(135),o=i(122),s=i(105),r=s.String,l=s.SubscriptionType,c=s.ServerPaymentUnsubscribe,u=a.extend({name:"search-settings",useCache_:!1,getRequestMessageType:182,getResponseMessageType:183,setRequestMessageType:[],setResponseMessageType:[],removeAutoTopup:function(){return this.setRequestMessageType=195,this.setResponseMessageType=196,this.set()},removeStoredPayment:function(e){return this.setRequestMessageType=197,this.setResponseMessageType=198,this.set((new r).setValue(e))},get:function(){return u._super.get.apply(this,arguments).then(function(e){return e[0]})},unsubscribe:function(e,t){if(!l.isValid(e))return Promise.reject(new Error("Invalid SubscriptionType provided: ".concat(e)));var i=(new c).setType(e).setClientUnsubscribeAlternativeSupported(!!t);return new Promise(function(e,t){var n={},a=!1,s=function(e){if(e)return a=!0,t(e),!0};new o(464,i).on(387,s).on(483,function(e,t){s(e)||(n.unSubAlternative=t)}).on(o.SpecialEvent.ON_REQ_END,function(){a||e(n)}).request()})}},"PaymentSettings");u.getInstance=function(){return n||(n=new u),n},e.exports=u},function(e,t,i){"use strict";var n=i(3)(i(127)),a=i(98),o=i(25),s=i(136),r=i(121),l=i(3199),c=r.extend({headerTemplate:null,activationPlace:66,clientSource:108,notificationScreenAccess:3,createElement:function(){return s({className:"registration"})},onStart:function(){var e=this;c._super.onStart.apply(this,arguments),this.reactViewId_=this.renderReactView(a.createElement(l,{readyForVrt:this.readyForVrt.bind(this),avoidGenderScreen:this.getParameter("fromGenderSelection"),lookingFor:this.getParameter("lookingFor"),user:(0,n.default)({},this.getParameters()),countryId:this.getParameter("countryId"),step:this.getParameter("step"),onboardingPages:this.getParameter("onboardingPages"),onFocusInput:this.onFocusInput.bind(this),onBlurInput:this.onBlurInput.bind(this),onRegistrationCompleted:this.getParameter("callback"),screenNameRef:function(t){e.getScreenName=t}}),this.parent[0])},onStop:function(){c._super.onStop.apply(this,arguments),this.removeReactView(this.reactViewId_)},onFocusInput:function(){setTimeout(function(){o(".page.registration").addClass("not-stretched-layout")})},onBlurInput:function(){setTimeout(function(){o(".page.registration").removeClass("not-stretched-layout")})},trackHotPanelScreen:function(){},getScreenName:function(){}},"RegistrationPage");e.exports=c},function(e,t,i){"use strict";var n={supportsCamera:window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia,requestAccess:function(){return n.requestedDuringSession=!0,n.supportsCamera?new Promise(function(e,t){var i=!1;setTimeout(function(){i||t(new Error("Camera permission timed out"))},a),window.navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1}).then(function(t){i=!0,t.getVideoTracks()[0].stop(),e()}).catch(function(e){i=!0,t(e)})}):Promise.reject(new Error("Camera not supported"))},requestedDuringSession:!1},a=5e3;e.exports=n},function(e,t,i){"use strict";var n,a=i(135).extend({name:"Countries",getRequestMessageType:410,getResponseMessageType:[411],getCacheKey_:function(e){return e}},"Countries");a.getInstance=function(){return n||(n=new a)},e.exports=a},function(e,t,i){"use strict";var n,a,o=i(3)(i(107)),s=i(100),r=i(135),l=i(280),c=i(105).ServerValidateUserField,u=l.REG_FIELDS,d=[10,200,220,20],h=(n={},(0,o.default)(n,u.EMAIL,10),(0,o.default)(n,u.NAME,200),(0,o.default)(n,u.BIRTHDAY,220),(0,o.default)(n,u.PHONE,20),n),p=r.extend({name:"ValidateUserField",useCache_:!1,getRequestMessageType:488,getResponseMessageType:489,get:function(e){if(-1===d.indexOf(e.fieldType))return Promise.resolve(null);if(s.isUndefined(e.value)||s.isNull(e.value))return this.log.error("Value for fieldType ".concat(e.fieldType," can't be null or undefined")),Promise.resolve(null);var t=(new c).setFieldType(e.fieldType).setValue(e.value);return s.isUndefined(e.context)||t.setContext(e.context),p._super.get.call(this,t)}},"ValidateUserField");p.getInstance=function(){return a||(a=new p)},p.CLIENT_TO_SERVER_FIELD=h,e.exports=p},function(e,t,i){"use strict";function n(e,t,i){return{actionText:e,actionType:i||77,type:t||0}}var a=i(99),o=i(105).PromoBlock;e.exports=function(e){this.buttons=[],this.id=null,this.messageText="",this.titleText="",e instanceof o&&(this.buttons=function(e){var t=e.getButtons([]),i=t.map(function(e){return n(e.getText(),e.getType(),e.getAction())});if(!t.length&&(i.push(n(e.getAction(),null,e.getOkAction())),e.getOtherText()&&e.getOtherAction())){var o=n(e.getOtherText(),2,e.getOtherAction());i.push(o)}if(!i.find(function(e){return 4===e.type||77===e.actionType||20===e.actionType})){var s=e.getCancelText(a.get(328)),r=n(s,3);i.push(r)}return i}(e),this.id=e.getId(),this.messageText=e.getMssg(),this.titleText=e.getHeader())}},function(e,t,i){"use strict";var n=i(3)(i(144)),a=i(98),o=i(419);e.exports=function(e){return a.createElement(o,(0,n.default)({type:"text"},e))}},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(116)),c=i(98),u=i(99),d=i(3225),h=i(161),p=function(e){function t(e){var i,n;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).state={emailDomains:(n=h.getSettings(),n&&n.getEmailDomains([])||[])},i}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){if(!this.showSuggestions())return null;var e=this.getFilteredEmailDomains();return 0!==e.length||this.props.suggestedEmail?(this.props.suggestedEmail?this.onShowSuggestedEmail():this.onShowEmailDomainsList(),c.createElement(d,{suggestedEmail:this.getSuggestedEmail(),
emailDomains:e,onClickDidYouMeanEmail:this.props.onClickDidYouMeanEmail,onClickSuggestedDomain:this.props.onClickSuggestedDomain})):null}},{key:"onShowEmailDomainsList",value:function(){this.props.onShowEmailDomainsList&&this.props.onShowEmailDomainsList()}},{key:"onShowSuggestedEmail",value:function(){this.props.onShowSuggestedEmail&&this.props.onShowSuggestedEmail()}},{key:"getSuggestedEmail",value:function(){return this.props.suggestedEmail?u.get(793).replace("{0}",'<a class="link">'.concat(this.props.suggestedEmail,"</a>")):null}},{key:"showSuggestions",value:function(){return this.props.email.indexOf("@")>=1}},{key:"getFilteredEmailDomains",value:function(){var e=this.getUserEmailDomain();return this.state.emailDomains.filter(function(t){return t.startsWith(e)})}},{key:"getUserEmailDomain",value:function(){return this.props.email.split("@",2)[1]}}]),t}(c.PureComponent);e.exports=p},function(e,t,i){"use strict";var n=i(3)(i(144)),a=i(98),o=i(419);e.exports=function(e){return a.createElement(o,(0,n.default)({type:"password",fieldExtraClass:"input__field--secure"},e))}},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="photo-grid-liquid js-content-item">').s(t.get(["photos"],!1),t,{block:i},{}).w("</div>")}function i(e,t){return e.w('<label class="photo-grid-liquid__item js-select-photo"><div class="photo-grid-liquid__item-image needsclick" style="background-image: url(\'').f(t.get(["photoUrl"],!1),t,"h").w('\');"></div><div class="photo-grid-liquid__item-icon"><label class="checkbox-singular"><input type="checkbox" id="').f(t.get(["id"],!1),t,"h").w('" name="').f(t.get(["id"],!1),t,"h").w('" data-id="').f(t.get(["id"],!1),t,"h").w('"').x(t.get(["isImported"],!1),t,{block:n},{}).w('><div class="checkbox__inactive">').h("Icon",t,{},{name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w("</div></label></div></label>")}function n(e,t){return e.w(" checked disabled")}return e.register("photos/photo-import-photos",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(102),a=i(344),o=i(125),s=i(101),r=s.StartInviteFlowEvent,l=s.FinishInviteFlowEvent,c=new a("inviteFlowTracking"),u=o.getLogger("inviteFlowTracking"),d={start:function(e){var t=e.activationPlace,i=e.isDisplayingCounter;c.set("DID_FLOW_START",!0),c.set("INVITES_COUNT",0);var a={activation_place:t};i&&(a.screen_option=56),n.track(r,a)},finish:function(e){var t=e.activationPlace;c.get("DID_FLOW_START")||u.error("Trying to finish a not yet started invitation flow");var i=c.get("INVITES_COUNT");c.set("DID_FLOW_START",!1),c.set("INVITES_COUNT",0),n.track(l,{invites_sent:i,activation_place:t})},incrementInvitesCount:function(e){var t=c.get("INVITES_COUNT")+e;c.set("INVITES_COUNT",t)}};e.exports=d},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerGetInviteProviders,s=a.extend({name:"InviteProviders",useCache_:!1,getRequestMessageType:512,getResponseMessageType:513,get:function(e){var t=new o;return t.setContext(e.clientSource).setFlow(e.inviteFlow),s._super.get.call(this,t)}},"InviteProviders");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n=i(105),a=n.Interest,o=n.Group;e.exports=function(e){var t=e.instance,i=e.subTitle,n=e.title,s=e.id;this.id=s,this.title=n,this.subTitle=i,t instanceof a?(this.id=t.getInterestId(),this.title=t.getName()):t instanceof o&&(this.id=t.getGroupId(),this.title=t.getName())}},function(e,t,i){"use strict";function n(e){var t=e.notification;return!(!t||!t.promo_block)&&92===t.promo_block.promo_block_type}function a(){x.track(U,{element:342}),w.logout()}function o(){x.track(U,{element:281}),S.navigate("feedback",{category:"questions"})}function s(e){window.open(e)}function r(e){var t=e.getVerifiedSource();return(t?t.getMethods():[]).find(function(e){return 1===e.getType()})}function l(e){return e&&5===e.getPhoneNumberVerificationType()}function c(e,t,i){var n=k.map(e.getCountries(),function(e){return{id:e.getId(),name:e.getName(),prefix:e.getPhonePrefix()}});return(function(e,t,i){var n=i.getPhonePrefix(),a=k.find(e,{prefix:n,id:t});if(a)return a;var o=k.find(e,{prefix:n}),s=k.find(e,{id:t});return l(i)?i.getPhoneNumber()&&o?o:s||e[0]:o||s||e[0]}(n,t,i)).selected=!0,n}function u(e){var t=e.getVerificationPromo().getExtraTexts([]).find(function(e){return 3===e.getType()});return t?t.getText():""}function d(e){var t=e.getVerificationPromo().getExtraTexts([]).find(function(e){return 1===e.getType()});return t?t.getText():""}function h(e){var t=e.getVerificationPromo().getButtons().find(function(e){return 63===e.getAction()});if(t)return{text:t.getText(),url:t.getRedirectPage().getUrl(),openAction:A.ACTIONS.OPEN_TOS}}function p(e){var t=e.getVerificationPromo();return t?t.getButtons().find(function(e){return 13===e.getAction()}).getText():V.get(342)}function m(e){var t=e.getPhoneNumberVerificationType();return!e.getVerificationData()&&3===t}function g(e){return e&&{providerId:e.getProviderId(),msisdn:e.getPurchaseParams().getMsisdn()}}var _,f,v=i(3),E=v(i(127)),b=v(i(4)),y=v(i(107)),k=i(100),S=i(103),w=i(113),C=i(591),T=i(175),P=i(128),N=i(220),I=i(238),x=i(102),A=i(602),O=i(121),V=i(99),R=i(124),B=i(136),L=i(101),F=L.VerifyAccountEvent,M=L.FinishRegistrationEvent,D=L.VerifyPhoneNumberEvent,U=L.ClickEvent,j=L.ClickButtonEvent,G=L.ViewScreenEvent,q=i(105).ServerUserVerifiedGet,H=i(122),z=(_={},(0,y.default)(_,3,"call"),(0,y.default)(_,2,"sms"),(0,y.default)(_,5,"airpay"),_),Y=(f={},(0,y.default)(f,1,4),(0,y.default)(f,2,2),(0,y.default)(f,3,1),(0,y.default)(f,4,17),f),$={call:V.get(350),sms:V.get(354),airpay:V.get(354)},W=O.extend({notificationScreenAccess:3,createElement:function(){return B({qaAttribute:"phone-verification"})},page_:null,navigationBar_:null,countries_:null,lastPhoneNumber_:null,lastVerificationMethod_:null,isRetry_:!1,IMSIPhoneNumber_:{},init:function(){k.bindAll(this,["onViewActionVerify_","onViewActionReset_","onViewActionFallback_","onViewActionConfirm_"]),this.pollVerification_=k.debounce(this.pollVerification_.bind(this),1500),this.onFallbackData_=this.processVerification_.bind(this,"fallback"),this.onPollData_=this.processVerification_.bind(this,"poll"),W._super.init.apply(this,arguments),this.page_=this.registerView("view",new A),this.page_.on(A.ACTIONS.CONFIRM,this.onViewActionConfirm_.bind(this)).on(A.ACTIONS.VERIFY,this.onViewActionVerify_.bind(this)).on(A.ACTIONS.RESET,this.onViewActionReset_.bind(this)).on(A.ACTIONS.FALLBACK,this.onViewActionFallback_.bind(this)).on(A.ACTIONS.SKIP,this.navigateToDestination_.bind(this)).on(A.ACTIONS.LOGOUT,a).on(A.ACTIONS.CONTACT_SUPPORT,o).on(A.ACTIONS.CANCEL,function(){return S.back()}).on(A.ACTIONS.SHOW_NUMBER,this.showPhoneNumberScreen_.bind(this)).on(A.ACTIONS.OPEN_TOS,s),this.page_.appendTo(this.element),this.navigationBar_=this.getView(O.VIEWS.NAVIGATION_BAR),this.updateNavigationBar_()},open:function(e){var t=e.parameters;W._super.open.apply(this,arguments),clearTimeout(this.repeatAirpayVerificationRequestTimeout_),this.purchase_=t.purchase,this.backHistoryEntry_=t.backHistoryEntry,this.destination_=t.destination;var i=t.verificationMethod;i?(this.originalVerificationMethod_=i,this.openWithVerificationMethod_(i)):this.fetchVerificationMethodAndOpen_()},fetchVerificationMethodAndOpen_:function(){var e,t=this;this.page_.showLoading(),e=function(e,i){e?S.back():(t.originalVerificationMethod_=i,t.openWithVerificationMethod_(i))},function(e){var t=new q({context:53});new H(260,t).on(261,e).request()}(function(t,i){if(t)e(t);else{var n=i.getMethods().find(function(e){return 1===e.getType()});e(void 0,n)}})},openWithVerificationMethod_:function(e){var t=this;if(this.verificationMethod_=e,e.getIsConfirmed())this.navigateToDestination_();else{if(m(e))this.waitCall_();else if(this.page_.update(A.STEPS.RESET,this.getBaseContext_()),this.page_.showLoading(),l(e)){var i=e.getVerificationPromo();i&&this.updateNavigationBar_(i.getScreenHeader())}this.getParameter("requireVerification")&&!this.isOnboarding_()&&I({isExpected:!0}),l(e)?e.getIsConnected()?this.showConfirmPhoneNumberScreen_(e):this.showPhoneNumberScreen_(e):e.hasVerificationData()&&e.getIsConnected()?this.showConfirmPhoneNumberScreen_(e):e.getPhoneNumber()?(!m(e)&&3===e.getPhoneNumberVerificationType()&&this.waitCall_(),this.startVerificationProcess_(e.getPhonePrefix(),e.getPhoneNumber()).then(function(i){return t.processVerification_(void 0,i,{methodType:1,phonePrefix:e.getPhonePrefix(),token:e.getPhoneNumber(),reset:!0,verifyForUser:t.getParameter("verifyForUser"),verifyForPaymentProvider:k.get(t.purchase_,"provider")})})):this.showPhoneNumberScreen_(e)}},getNavigationBarContext:function(){return W._super.getNavigationBarContext.call(this,{title:V.get(340)})},trackHotPanelScreen:function(){},onStop:function(){W._super.onStop.apply(this,arguments),this.page_.update(A.STEPS.RESET,{isNeverLoseYourAccount:n(this.getParameters())})},updateNavigationBar_:function(e,t){this.navigationBar_.update({scrollToggle:1,scrollToggleClass:"navigation-bar--shadow",title:e,actions:t||{back:"true"!==this.getParameter("isNotification")&&!this.isOnboarding_()}}),this.navigationBar_.attachToggleScroll()},waitCall_:function(){this.page_.update(A.STEPS.WAIT,this.getBaseContext_()),this.updateNavigationBar_(""),this.screenName=this.isOnboarding_()?346:111,x.track(G)},showPhoneNumberScreen_:function(e){var t=this;return e||x.track(U,{element:389}),e=e||this.verificationMethod_,this.reset_(),this.page_.showLoading(),Promise.all([this.getDefaultCountryId_(e),C.getInstance().get()]).then(function(i){var n=(0,b.default)(i,2),a=n[0],o=n[1];t.verificationMethod_=e,t.screenName=t.isOnboarding_()?145:110;var s=t.getPhoneNumberScreenContext_(e,a,o[0]);t.renderPhoneNumberScreen(s),x.track(G)},function(e){if(S.back(),e instanceof Error)throw e})},renderPhoneNumberScreen:function(e){this.page_.update(A.STEPS.VERIFY,e),this.updateNavigationBar_(e.header)},getPhoneNumberScreenContext_:function(e,t,i){var n=e.getPhoneVerificationParams(),a=l(e);return(0,E.default)({},this.getBaseContext_(),{countries:c(i,t,e),introButtonText:a?p(e):V.get(342),disclaimerText:a?u(e):V.get(343)},function(e){var t=e.getPhonePrefix(),i=e.getPhoneNumber();return t&&i?{prefix:t,number:i}:e.hasPhoneNumber()&&e.hasPhonePrefix()?{prefix:"+".concat(e.getPhonePrefix()),number:e.getPhoneNumber()}:{}}(e),{header:a?e.getVerificationPromo().getScreenHeader():V.get(340),showCancel:n&&n.getExplicitCancel(),cancelAction:A.ACTIONS.CANCEL})},showConfirmPhoneNumberScreen_:function(e){var t=e.getPhoneNumberVerificationType(),i=e.getPhoneVerificationParams(),n=k.extend(this.getBaseContext_(),{verificationFlow:z[t],pinLength:e.getPinLength(),showCancel:i&&i.getExplicitCancel()});if(l(e)){var a=e.getVerificationPromo(),o=a.getButtons().find(function(e){return 89===e.getAction()});Object.assign(n,{message:a.getMssg(),introMessage:e.getVerificationPromo().getMssg(),verifyButtonText:a.getButtons().find(function(e){return 13===e.getAction()}).getText(),preDisclaimerText:d(e),disclaimerText:u(e),secondsToWait:e.getSecondsToWait(),termsLink:h(e),cancelAction:A.ACTIONS.CANCEL,tryAgainHtml:o&&o.getText(),pinLength:e.getPinLength(4)})}3===t&&k.extend(n,{verificationData:e.getVerificationData(),secondsToWait:e.getSecondsToWait(),myPhone:{prefix:e.getPhonePrefix(),number:e.getPhoneNumber()}}),this.page_.update(A.STEPS.CONFIRM,n),this.updateNavigationBar_(function(e){return l(e)?e.getVerificationPromo().getScreenHeader():$[z[e.getPhoneNumberVerificationType()]]}(e)),"call"===n.verificationFlow?(this.screenName=this.isOnboarding_()?499:111,x.track(G)):"sms"===n.verificationFlow&&(this.screenName=this.isOnboarding_()?348:112,x.track(G)),this.isRetry_=!1,this.lastPhoneNumber_=e.getPhonePrefix("")+e.getPhoneNumber(),this.lastVerificationMethod_=t,this.verificationMethod_=e},setConfirmed_:function(e){P.getInstance().invalidate(w.getUserId()),T.getInstance().invalidate();var t=e.getInfoText();t&&!this.isOnboarding_()&&R.showNotification({type:R.TYPES.INFO,text:t}),this.navigateToDestination_()},setFormError_:function(e){var t=k.extend(this.getBaseContext_(),{error:!0,message:e});this.page_.update(A.STEPS.FORM_ERROR,t)},setVerified_:function(e){var t=this.getParameter("verificationMethod");return t&&t.setPhonePrefix(e.phonePrefix||t.getPhonePrefix()).setPhoneNumber(e.token||t.getPhoneNumber()).setVerificationData("".concat(e.phonePrefix).concat(e.token)||t.getVerificationData()),N.getInstance().setVerified(e)},pollVerification_:function(e,t){this.isStarted()&&this.setVerified_({methodType:1,phonePrefix:e,token:t,verifyForUser:this.getParameter("verifyForUser"),verifyForPaymentProvider:k.get(this.purchase_,"provider")}).then(this.onPollData_)},getDefaultCountryId_:function(e){if(l(e)){var t=e.getPhoneVerificationParams(),i=t?t.getDefaultCountryId():null;if(i)return Promise.resolve(i)}return P.getInstance().get({id:w.getUserId(),requestedFields:[91],clientSource:"true"===this.getParameter("isNotification")?18:53}).then(function(e){return e.getCountry().getId()})},trackVerificationStep_:function(e,t){if(!l(this.verificationMethod_)){var i=t.hasForm();if("verify"===e)x.track(D,{verification:!i,activation_place:this.isOnboarding_()?66:this.activationPlace,phone_number:this.lastPhoneNumber_});else if("confirm"===e){var n=Y[this.lastVerificationMethod_];n?(x.track(F,{verification:!i,verification_method:n,retry:this.isRetry_,activation_place:this.isOnboarding_()?66:this.activationPlace}),!i&&t.getSuccess()&&this.isOnboarding_()&&x.track(M,{registration_method:n})):this.log.error("Invalid verification method"),this.isRetry_=!0}}},processVerification_:function(e,t,i){if(this.isStarted()){var n=r(t)||this.verificationMethod_;if(t.hasForm()&&this.setFormError_(t.getForm().getErrors()[0].getError()),this.trackVerificationStep_(e,t),6!==t.getAction()){if(t.hasVerifiedSource()){if(l(n)&&this.processAirpayVerification_(t,i))return;n.getIsConfirmed()?this.setConfirmed_(t):3!==n.getPhoneNumberVerificationType()||n.hasVerificationData()?this.showConfirmPhoneNumberScreen_(n):this.pollVerification_(n.getPhonePrefix(),n.getPhoneNumber())}}else this.navigateToDestination_(t.getPurchaseTransaction())}},processAirpayVerification_:function(e,t){var i=r(e);if(function(e){var t=r(e);return l(t)&&5===e.getAction()&&!1===t.getIsConnected()}(e)||function(e){var t=r(e);return l(t)&&5===e.getAction()&&!0===t.getIsConnected()&&!1===t.getIsConfirmed()}(e))this.setFormError_(e.getVerifiedSource().getDisplayMessage());else if(function(e){var t=r(e);return l(t)&&2===e.getAction()&&!1===t.getIsConnected()&&!1===t.getIsConfirmed()}(e))this.showPhoneNumberScreen_(i),this.setFormError_(e.getVerifiedSource().getDisplayMessage());else if(function(e){var t=r(e);return l(t)&&3===e.getAction()&&t.hasCheckAgainIn()}(e))this.repeatAirpayVerificationRequest_(t,i);else{if(!function(e){var t=r(e);return l(t)&&4===e.getAction()&&2===t.getPhoneNumberVerificationType()}(e))return!1;this.showConfirmPhoneNumberScreen_(i)}return!0},repeatAirpayVerificationRequest_:function(e,t){var i=this;this.repeatAirpayVerificationRequestTimeout_=setTimeout(function(){i.setVerified_(e).then(function(t){i.processVerification_(void 0,t,e)})},1e3*t.getCheckAgainIn())},onViewActionVerify_:function(e,t){var i=this;this.lastPhoneNumber_=e+t;var n={methodType:1,phonePrefix:e,token:t,verifyForUser:this.getParameter("verifyForUser"),verifyForPaymentProvider:k.get(this.purchase_,"provider"),reset:!0};this.setVerified_(n).then(function(e){i.processVerification_("verify",e,k.omit(n,"reset"))})},onViewActionConfirm_:function(e){var t=this;x.track(U,{element:288});var i={methodType:1,pin:e,verifyForUser:this.getParameter("verifyForUser"),verifyForPaymentProvider:k.get(this.purchase_,"provider")};this.setVerified_(i).then(function(e){t.processVerification_("confirm",e,i)})},reset_:function(){this.updateNavigationBar_(),this.page_.update(A.STEPS.RESET,this.getBaseContext_())},onViewActionReset_:function(){clearTimeout(this.repeatAirpayVerificationRequestTimeout_),x.track(j,{button_name:65}),this.reset_(),this.page_.showLoading(),this.openWithVerificationMethod_(this.originalVerificationMethod_)},onViewActionFallback_:function(e,t){x.track(U,{element:164}),this.lastVerificationMethod_=2,this.setVerified_({methodType:1,phoneVerificationType:2,phonePrefix:e.toString(),token:t.toString(),verifyForUser:this.getParameter("verifyForUser"),verifyForPaymentProvider:k.get(this.purchase_,"provider")}).then(this.onFallbackData_)},navigateToDestination_:function(e){var t=this,i=this.getParameter("callback");i&&i(),S.goToHistoryEntry(this.backHistoryEntry_,function(i,n){n(),t.purchase_?S.navigate(t.destination_,!0,{purchase:(0,E.default)({},t.purchase_,g(e))}):S.navigate(t.destination_||"own-profile",!0)})},getBaseContext_:function(){var e=w.getUser(),t=e.getEmail(),i=2===e.getGender(),a="";this.isOnboarding_()||(a=i?V.get(460,t):V.get(459,t));var o="true"===this.getParameter("requireVerification"),s="true"===this.getParameter("isNotification");return{skipText:V.get(7),skip:!o&&s,footer:o?{hint:a,contactSupportAction:A.ACTIONS.CONTACT_SUPPORT,signOut:e.getAccountConfirmed()}:null,isNeverLoseYourAccount:n(this.getParameters())}},startVerificationProcess_:function(e,t){return this.setVerified_({methodType:1,phonePrefix:e,token:t,reset:!0,verifyForUser:this.getParameter("verifyForUser"),verifyForPaymentProvider:k.get(this.purchase_,"provider")})},isOnboarding_:function(){return"true"===this.getParameter("isOnboarding")}},"PhoneVerification");e.exports=W},function(e,t,i){"use strict";var n,a=i(3),o=a(i(127)),s=a(i(107)),r=i(25),l=i(100),c=i(109),u=i(99),d=i(3315),h=i(3316),p={VERIFY:1,CONFIRM:2,FORM_ERROR:3,RESET:4,WAIT:5},m={VERIFY:"verify",CONFIRM:"cofirm",RESET:"reset",CANCEL:"cancel",FALLBACK:"fallback",SKIP:"skip",LOGOUT:"logout",CONTACT_SUPPORT:"contact-support",SHOW_NUMBER:"show_number",OPEN_TOS:"open-tos"},g=c.extend({template:d,className:"page-verification",events:(n={"click .js-pin-field":"onPinDigitClick_","click .js-submit":"onSubmit_","click .js-skip":"onSkip_","click .js-logout":"onLogout_","click a":"onHintClick_"},(0,s.default)(n,"click [data-action=".concat(m.CONTACT_SUPPORT,"]"),"onContactSuport_"),(0,s.default)(n,"click [data-action=".concat(m.OPEN_TOS,"]"),"onOpenTos_"),(0,s.default)(n,"click [data-action=".concat(m.CANCEL,"]"),"onCancel_"),n),currentStep_:null,phoneNumber_:null,init:function(){this.updateTimerNext_=l.debounce(this.updateTimer_.bind(this),1e3)},disable:function(){g._super.disable.apply(this,arguments),this.updateTimerNext_.cancel()},reset:function(){return this.updateTimerNext_.cancel(),this.input_&&this.input_.off("keyup",this.onInput_),this.prefixSelect_&&(this.prefixSelect_.off("change",this.onPrefixChange_),this.prefixSelect_.off("focus",this.onPrefixFocus_),this.prefixSelect_.off("blur",this.onPrefixFocus_)),this.digits_&&(this.digits_.off("keyup",this.onDigitInput_),this.digits_.off("keydown",this.onDigitInput_)),this.verificationForm_=null,this.digits_=null,this.inputFieldContainer_=null,this.prefixLabel_=null,this.timerHint_=null,this.input_=null,this.prefixSelect_=null,this.prefixLabel_=null,this.submitButton_=null,this.prevDigit_=null,this.$el.empty(),this},update:function(e,t){switch(this.template=t.isNeverLoseYourAccount?h:this.template,e){case p.RESET:return this.updateReset_();case p.WAIT:return this.updateWait_();case p.VERIFY:return this.updateVerification_(t);case p.CONFIRM:return this.updateConfirmation_(t);case p.FORM_ERROR:return this.updateFormError_(t)}},updateReset_:function(e){this.reset().$el.append(this.template.render(e))},updateWait_:function(){this.reset().$el.append(this.template.render({waiting:!0}))},updateFormError_:function(e){this.verificationForm_&&(this.verificationForm_.removeClass("is-blocked"),this.$el.find(".js-input-field-error-msg").addClass("show-error").html(e.message),this.inputFieldContainer_.addClass("is-invalid"),this.submitButton_.removeClass("is-loading").attr("disabled",!0)),this.showTryAgainBlock_()},updateVerification_:function(e){this.currentStep_=p.VERIFY,(e=l.extend(e,{verification:!0,selectedCountry:l.find(e.countries,{selected:!0})})).number&&(this.phoneNumber_=e.number),this.reset().$el.append(this.template.render(e)),this.verificationForm_=this.$el.find(".js-form"),this.submitButton_=this.$el.find(".js-submit"),this.prefixSelect_=this.$el.find(".js-prefix-select"),this.prefixLabel_=this.$el.find(".js-prefix-label"),this.input_=this.$el.find(".js-input-field"),this.inputFieldContainer_=this.$el.find('.js-input-field-container[data-field-type="phone"]'),this.prefixSelect_.on("change",this.onPrefixChange_),this.prefixSelect_.on("focus",this.onPrefixFocus_),this.prefixSelect_.on("blur",this.onPrefixFocus_),this.input_.on("keyup",this.onInput_)},updateConfirmation_:function(e){this.currentStep_=p.CONFIRM;var t=(0,o.default)({},e,{confirmation:!0,pinLength:l.range(e.pinLength),myPhone:e.myPhone});if(t["".concat(e.verificationFlow,"Flow")]=!0,t.callFlow){var i=e.verificationData.split(" "),n="+".concat(e.myPhone.prefix).concat(e.myPhone.number);l.extend(t,{message:u.get(364,n,e.pinLength),caller:{prefix:i[0],number:i[1]},verifyButtonText:u.get(400)}),this.secondsToWait_=e.secondsToWait}t.smsFlow&&(Object.assign(t,{message:u.get(355),verifyButtonText:u.get(400)}),this.secondsToWait_=e.secondsToWait),this.reset().$el.append(this.template.render(t)),this.verificationForm_=this.$el.find(".js-form"),this.submitButton_=this.$el.find(".js-submit"),(t.callFlow||t.airpayFlow)&&(this.timerHint_=this.$el.find(".js-timer-hint"),this.updateTimer_()),this.inputFieldContainer_=this.$el.find('.js-input-field-container[data-field-type="digits"]'),this.digits_=this.inputFieldContainer_.find(".js-input-field"),this.digits_.on("keydown",this.onDigitInput_),this.digits_.on("keyup",this.onDigitInput_)},onPrefixFocus_:function(e){this.$el.find(".js-select").toggleClass("is-focus","focus"===e.type)},updateTimer_:function(){var e;this.secondsToWait_>0?(e=this.secondsToWait_>1?u.get(348,this.secondsToWait_):u.get(358),this.timerHint_.html(e),this.secondsToWait_--,this.updateTimerNext_()):this.showTryAgainBlock_()},showTryAgainBlock_:function(){this.timerHint_&&this.timerHint_.addClass("is-hidden"),this.$el.find(".js-try-again").removeClass("is-hidden")},onPrefixChange_:function(){this.prefixLabel_.html("+".concat(this.prefixSelect_.val()))},onPinDigitClick_:function(e,t){this.prevDigit_===t&&(t.value=""),this.prevDigit_=t,t.oldValue=t.value},onDigitInput_:function(e){var t=e.target,i=parseInt(t.getAttribute("data-index"),10),n=this.digits_[i];if("keydown"!==e.type){var a=parseInt(n.value.substring(n.value.length-1,n.value.length),10);if(l.isNaN(a)&&(a=""),n.value=a,""===a){if(i>0&&""===t.oldValue&&!r.os.ios7){var o=r(this.digits_[i-1]);o.focus(),o.value=this.digits_[i-1].oldValue=""}}else i<this.digits_.length-1?r.os.ios7||r(this.digits_[i+1]).focus():r(n).blur();t.oldValue=n.value;var s=l.findIndex(this.digits_,function(e){return""!==e.value});this.inputFieldContainer_.toggleClass("has-value",-1!==s),-1===l.findIndex(this.digits_,function(e){return""===e.value})?this.submitButton_.removeAttr("disabled"):this.submitButton_.attr("disabled",!0)}else n.select()},onInput_:function(){var e=(this.input_.val()||"").replace(/\s\-\(\)/g,""),t=e&&e.match(/^\d+$/);this.phoneNumber_=e,this.inputFieldContainer_.toggleClass("has-value",e.length>0),t?this.submitButton_.removeAttr("disabled"):this.submitButton_.attr("disabled",!0)},onSubmit_:function(){if(!this.submitButton_.attr("disabled")&&!this.submitButton_.hasClass("is-loading"))if(this.verificationForm_.addClass("is-blocked"),this.submitButton_.addClass("is-loading"),this.currentStep_===p.VERIFY)this.trigger(m.VERIFY,this.prefixSelect_.val(),this.phoneNumber_);else if(this.currentStep_===p.CONFIRM){this.timerHint_&&this.timerHint_.addClass("is-hidden"),this.updateTimerNext_.cancel();var e=l.map(this.digits_,function(e){return e.value});this.trigger(m.CONFIRM,e.join(""))}},onHintClick_:function(e,t){e.preventDefault();var i=r(t.parentNode).data();switch(i.action){case"show_number":this.trigger(m.SHOW_NUMBER);break;case"reset":this.trigger(m.RESET);break;case"fallback":this.showLoading(),this.trigger(m.FALLBACK,i.prefix,i.number)}},onSkip_:function(){this.trigger(m.SKIP)},onLogout_:function(){this.trigger(m.LOGOUT)},onContactSuport_:function(){this.trigger(m.CONTACT_SUPPORT)},onOpenTos_:function(e,t){e.preventDefault(),this.trigger(m.OPEN_TOS,r(t).data("url"))},onCancel_:function(e){e.preventDefault(),this.trigger(m.CANCEL)}},"PhoneVerification");g.ACTIONS=m,g.STEPS=p,e.exports=g},function(e,t,i){"use strict";function n(){r.logout()}function a(){var e=r.getUser(),t=e.getEmail()?e.getEmail():e.getPhone();return 2===e.getGender()?f.get(460,t):f.get(459,t)}function o(e){var t=(e&&(e.getImageId()||e.getPictures())||[]).map(function(e){return e.getDisplayImages?e.getDisplayImages():e});return{gesturePhoto:t[0],uploadedPhoto:t[1]}}var s=i(100),r=i(113),l=i(103),c=i(159),u=i(3317),d=i(161),h=i(220),p=i(214),m=i(111),g=i(167),_=i(289),f=i(99),v=i(102),E=i(590),b=i(238),y=i(124),k=i(256),S=i(136),w=i(247),C=i(476).notifyVerificationPassed,T=i(105),P=T.PromoBlock,N=T.ServerUserVerifiedGet,I=i(101),x=I.RequestPermissionEvent,A=I.ClickButtonEvent,O=I.ClickEvent,V=I.AlertEvent,R=I.VerifyAccountEvent,B=I.ViewScreenEvent,L=i(122),F=m("BACK","CONTACT_SUPPORT","SIGNOUT","SKIP"),M=c.extend({transition:!1,headerTemplate:null,notificationScreenAccess:3,clientSource:102,createElement:function(){return S({qaAttribute:"photo-verification"})},uploadedPhotoId_:null,photoWasRejected_:!1,verificationMethod_:null,isNoPhotosStage_:!1,isProcessing_:!1,uploadingPhoto_:!1,errorContext_:null,isForced:!1,init:function(){M._super.init.apply(this,arguments),this.view_=this.registerView(new u({el:this.parent[0]})).on(81,this.onSendPhoto_,this).on(95,this.onNextPromo_,this).on(121,this.onPhotoUpload_,this).on(89,this.onRetakePhoto_,this).on(2,this.onAlbumUpload_,this).on(13,this.onAgreeVerification_,this).on(F.SKIP,this.onSkip_,this).on(F.SIGNOUT,n).on(F.CONTACT_SUPPORT,function(){l.navigate("feedback",{category:"questions"})})},onStart:function(){M._super.onStart.apply(this,arguments),this.showLoading_(),this.uploadedPhotoId_=null,this.failedFile_=null,this.photoWasRejected_=!1,g.getInstance().on(g.Type.SYSTEM_NOTIFICATION,this.checkPhotoVerificationFinished_,this),g.getInstance().on(g.Type.NOTIFICATION,this.checkPhotoVerificationUpdated_,this);var e=this.isForced;this.activationPlace=e?159:246,e&&b({isExpected:!0})},onReady:function(){M._super.onReady.apply(this,arguments),this.uploadingPhoto_||this.fetchAndRenderVerification_()},fetchAndRenderVerification_:function(){var e=this;if(this.isActive()){var t=parseInt(this.getParameter("clientSource"),10)||102;h.getInstance().get({context:t}).spread(function(t){return e.onVerificationMethods_(t.getMethods())}).catch(this.onLoadVerificationError_.bind(this))}},onStop:function(){M._super.onStop.apply(this,arguments),g.getInstance().off(g.Type.SYSTEM_NOTIFICATION,this.checkPhotoVerificationFinished_,this),g.getInstance().off(g.Type.NOTIFICATION,this.checkPhotoVerificationUpdated_,this)},trackHotPanelScreen:function(){},createContext_:function(e,t){if(e){var i,n,s,l=o(e),c=l.gesturePhoto,u=l.uploadedPhoto,d=this.getParameters().isNotification,h=e.getButtons([]),p=h[0],m=h[1],g=e.getExtraTexts([])[0];return{description:e.getMssg(),errorReasons:t,footer:d&&(i=this.isForced,n=this.verifiedByPhoneNumber_,s=r.getUser(),{text:i?f.get(78):f.get(7),action:i?F.SIGNOUT:F.SKIP,hint:i?a():"",contactSupportAction:F.CONTACT_SUPPORT,signOut:s.getAccountConfirmed()||n}),gesturePhoto:c,header:e.getHeader(),subDescription:g&&g.getText(),type:e.getPromoBlockType(),uploadedPhoto:u,primaryAction:p&&{action:p.getAction(),isDisabled:7===p.getType(),text:p.getText()},secondaryAction:m&&{action:m.getAction(),isDisabled:7===m.getType(),text:m.getText()},navigation:{actions:{back:!this.isForced&&d,close:!this.isForced&&!d}}}}},getContext_:function(e){return this.createContext_(this.getPromoBlock_(e))},getErrorContext_:function(e,t){return e.setPromoBlockType(134),Object.assign(this.createContext_(e,t),{primaryAction:{action:121,text:e.getAction()}})},getPreviewContext_:function(e){var t=this.getPromoBlock_(219)||this.getPromoBlock_(218),i=(t?o(t):this.errorContext_).gesturePhoto,n=new P({image_id:[i,e],buttons:[{action:81,text:f.get(624)},{action:89,text:f.get(385)}],mssg:f.get(384)});return this.createContext_(n)},getProcessingContext_:function(e){return e&&this.isProcessing_&&e.getButtons()[0].setType(7).setText(f.get(482)),this.createContext_(e)},getPromoBlock_:function(e){if(this.induction_)return this.induction_.find(function(t){return t.getPromoBlockType()===e})},onNextPromo_:function(){var e=this.getContext_(218);return v.track(O,{element:395}),e?void this.update(e):this.doPhotoUpload_(!1)},getScreenName:function(){var e=this.isForced||this.getParameter("isNotification");switch(this.promoBlockType_){case 217:return e?546:547;case 218:return e?183:130;case 134:return 132;default:return 131}},onVerificationMethods_:function(e){var t=e.find(function(e){return 5===e.getType()});if(t){var i=e.find(function(e){return 1===e.getType()});this.verifiedByPhoneNumber_=!!i&&i.getIsConnected()&&i.getIsConfirmed(),this.onVerificationMethod_(t)}else this.log.error("No photo verification method found"),this.returnToDestination_()},onVerificationMethod_:function(e){var t=this;this.verificationMethod_=e;var i=e.getPhotoVerification(),n=i&&i.getError(),a=e.getIsConnected(),o=e.getIsConfirmed(),s=this.getParameter("promo");if(a&&o)return C(),this.returnToDestination_();if(a&&!o)if(n)this.handleVerificationError_(e);else{if(!s)return void(this.timeout_=setTimeout(function(){t.returnToDestination_()},1500));this.timeout_&&clearTimeout(this.timeout_),this.update(this.getProcessingContext_(s))}else this.errorContext_=null,this.getParameter("isNotification")&&s?this.handleVerificationPromo_(s):this.handleNotVerified_(e)},update:function(e){this.promoBlockType_=e.type,this.uploadingPhoto_||v.track(B),this.view_.update(e),this.readyForVrt()},onLoadVerificationError_:function(e){this.log.error("Could not load verification info",e),y.showNotification({type:y.TYPES.ERROR}),this.returnToDestination_()},handleVerificationError_:function(e){var t=e.getPhotoVerification(),i=t.getError(),n=t.getErrorReasons(),a=this.errorContext_=this.getErrorContext_(i,n);this.photoWasRejected_=!0,this.activationPlace=163,this.update(a)},onAgreeVerification_:function(){this.handleNotVerified_(this.verificationMethod_)},handleVerificationPromo_:function(e){this.update(this.createContext_(e))},handleNotVerified_:function(e){var t=e.getPhotoVerification();if(t){this.induction_=t.getInduction([]);var i=this.getContext_(217)||this.getContext_(218);if(!i)return this.doPhotoUpload_(!0);this.update(i)}},onAlbumUpload_:function(){v.track(O,{element:613}),l.navigate("add-photos",{albumType:2})},onPhotoUpload_:function(){v.track(O,{element:613}),this.doPhotoUpload_()},doPhotoUpload_:function(e){var t=this,i=w(4),n=this.getContext_(219),a=Boolean(n),o=n||this.getContext_(218)||this.errorContext_,s=o.gesturePhoto,r=o.subDescription;this.uploadingPhoto_=!0,this.unbindPhotoUploadEvents(),_.on(_.EVENTS.FINISH,this.onPhotoUploaded_,this),_.on(_.EVENTS.START,this.showLoading_,this),_.on(_.EVENTS.CAMERA_FAILURE,this.onCameraFailure_,this),_.on(_.EVENTS.CANCEL,this.onCancelPhoto_,this),E.requestedDuringSession||this.trackAlertEvent_(12);var l=d.getSettings(),c=(l&&l.getDevFeatures([])||[]).find(function(e){return"mw__disable_gallery_uploads_from_photo_verification"===e.getId()});_.start({camera:{facingMode:"user",fallback:!Boolean(c&&c.getEnabled()),hasOverlay:a,previewGestureUrl:s,previewTooltip:a&&r,onAccessGranted:function(e){e&&t.trackCameraAccess_(!0)},onAccessDenied:function(e){e&&t.trackCameraAccess_(!1)}},uploadUrl:i,albumType:9,preview:!0,
replace:e})},unbindPhotoUploadEvents:function(){_.off(_.EVENTS.FINISH,this.onPhotoUploaded_,this),_.off(_.EVENTS.START,this.showLoading_,this),_.off(_.EVENTS.CAMERA_FAILURE,this.onCameraFailure_,this),_.off(_.EVENTS.CANCEL,this.onCancelPhoto_,this)},trackAlertEvent_:function(e){v.track(V,{alertType:5,activationPlace:this.activationPlace,actionType:e})},trackCameraAccess_:function(e){this.trackAlertEvent_(e?2:11),this.trackRequestPermissionEvent_(e)},trackRequestPermissionEvent_:function(e){v.track(x,{permissionType:6,permissionGranted:e,activationPlace:this.activationPlace})},processUploadData_:function(e){return!s.isEmpty(e)&&e.photo_id&&e.photo_url?(this.uploadedPhotoId_=e.photo_id,!0):(this.onUploadError_(e),!1)},onPhotoUploaded_:function(e){if(this.uploadingPhoto_=!1,this.unbindPhotoUploadEvents(),this.hideLoading_(),this.processUploadData_(e)){var t=this.getPreviewContext_(e.photo_url);this.activationPlace=160,this.update(t)}else this.fetchAndRenderVerification_()},onCancelPhoto_:function(){this.uploadingPhoto_=!1,this.unbindPhotoUploadEvents(),this.fetchAndRenderVerification_()},onCameraFailure_:function(){this.uploadingPhoto_=!1,this.unbindPhotoUploadEvents(),l.navigate("verification-app-blocker",!0,{isHardBlocker:Boolean(this.isForced)})},onUploadError_:function(e){_.reset(),(e=e||{}).failedFile&&(this.failedFile_=e.failedFile),this.log.error("Could not upload photo for verification",e);var t=f.get(75);s.isString(e.error)&&(t=e.error),e instanceof Error&&(t=e.message),y.showNotification({type:y.TYPES.ERROR,text:t}),this.hideLoading_()},onRetakePhoto_:function(){this.failedFile_=null,this.uploadedPhotoId_&&!_.isPreview(this.uploadedPhotoId_)&&(this.uploadedPhotoId_=null),v.track(A,{buttonName:43}),v.track(O,{element:64}),this.doPhotoUpload_()},onSendPhoto_:function(){v.track(O,{element:253}),this.sendPhotoForVerify_()},sendPhotoForVerify_:function(){var e=this;if(this.uploadedPhotoId_){if(this.showLoading_(),_.isPreview(this.uploadedPhotoId_))return _.once(_.EVENTS.FINISH,function(t){e.failedFile_=null,e.processUploadData_(t)&&e.sendPhotoForVerify_()}),void _.upload(this.failedFile_);this.isProcessing_=!0,p.getInstance().sendPhotoUploadConfirm({photoId:this.uploadedPhotoId_,albumType:9}).then(function(){return h.getInstance().setVerified({methodType:5,photoId:e.uploadedPhotoId_})}).then(function(t){return e.checkVerification_(t)}).catch(this.onUploadError_.bind(this)),v.track(A,{buttonName:41})}},checkVerification_:function(e){var t=this.getParameters(),i={verification:!0,verification_method:5,retry:this.photoWasRejected_,activation_place:this.errorContext_?163:this.activationPlace};if(t.activationPlace&&(i.activation_place=parseInt(t.activationPlace,10)),v.track(R,i),this.isForced){var n=e.getInfoText();y.showNotification({type:y.TYPES.INFO,text:n}),this.onVerificationMethods_(e.getVerifiedSource().getMethods())}else this.returnToDestination_()},onNavigationAction:function(e){if(e===c.BUTTONS.CLOSE||e===c.BUTTONS.BACK){if(this.uploadedPhotoId_=null,this.failedFile_=null,this.photoWasRejected_&&h.getInstance().remove({methodType:5}),this.isForced&&this.getParameter("promo"))return void this.handleNotVerified_(this.verificationMethod_);var t=this.getParameter("callback");t&&t(),v.track(O,{element:65})}M._super.onNavigationAction.apply(this,arguments)},checkPhotoVerificationFinished_:function(e){var t=this;5===e.getId()&&new L(260,new N({context:102})).on(261,function(e,i){if(e)t.returnToDestination_();else{t.isProcessing_=!1;var n=i.getMethods().find(function(e){return 5===e.getType()}),a=n.getIsConnected();n.getIsConfirmed()&&a?(C(),t.returnToDestination_()):t.onVerificationMethod_(n)}}).request()},checkPhotoVerificationUpdated_:function(e){this.isProcessing_=!1;var t=73===e.getType();if(this.isNoPhotosStage_="requested_force_verify_no_matching_photos"===e.getId(),t&&this.isNoPhotosStage_){var i=k.fromClientNotification(e).getPromo(),n=this.getProcessingContext_(i);this.update(n)}},onSkip_:function(){v.track(O,{element:65}),this.returnToDestination_()},returnToDestination_:function(){var e=this.getParameter("callback");e&&e();var t=this.getParameter("destination")||"own-profile";l.navigate(t,!0)},showLoading_:function(){this.view_.showLoading()},hideLoading_:function(){this.view_.hideLoading()}},"PhotoVerification");e.exports=M},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(99),s=i(111),r=i(176),l=s("ACTION_USER","MORE","OPEN_USER"),c=a.extend({toggleScroll_:null,events:{"click .js-select-user":"onSelectUser_","click .js-button-edit":"onToggleEdit_","click .js-more":"onMore_","click .js-action-button":"onAction_"},isEditMode_:!1,selectedUsers_:[],actionButtonText_:"",template:null,templateItem:null,getEditingTitle_:function(){},getButtonText_:function(){return this.isEditMode_?o.get(19):o.get(24)},onSelectUser_:function(e,t){var i=n(t),a=String(i.attr("data-user-id"));if(this.isEditMode_){var o=this.selectedUsers_.indexOf(a);-1===o?this.selectedUsers_.push(a):this.selectedUsers_.splice(o,1),i.toggleClass("is-checked",-1===o),this.setActionButton_()}else this.trigger(l.OPEN_USER,a)},onAction_:function(){this.trigger(l.ACTION_USER,this.selectedUsers_),this.resetToDefault_()},onToggleEdit_:function(){this.resetToDefault_(),this.isEditMode_||this.$(".is-checked").removeClass("is-checked")},resetToDefault_:function(){this.isEditMode_=!this.isEditMode_,this.$(".js-navigation-title").html(this.getEditingTitle_()),this.$(".js-button-edit").html(this.getButtonText_()),this.selectedUsers_=[],this.setActionButton_()},onMore_:function(){this.trigger(l.MORE)},setActionButton_:function(){this.$(".js-action").toggleClass("is-inactive",0===this.selectedUsers_.length).find(".js-button-text").html("".concat(this.actionButtonText_," (").concat(this.selectedUsers_.length,")"))},prepareUsers_:function(e){return e.map(function(e){var t=e.getProfilePhoto(),i=e.getOnlineStatus(),n={name:e.getName(),match:e.getIsMatch(),status:{},image:t&&t.getPreviewUrl(null),userId:e.getUserId(),time:e.getDisplayMessage(),isMale:1===e.getGender(),isFemale:2===e.getGender()};return 1===i?n.status.online=!0:2===i?n.status.idle=!0:4===i&&(n.status.offline=!0),n})},update:function(e){return this.render({description:e.description,title:this.getEditingTitle_(),buttonText:this.getButtonText_(),user:this.prepareUsers_(e.users),more:!!e.countMore&&{moreText:o.get(148,e.countMore)}}),this},insert:function(e){var t=e.users,i=e.countMore,n=this.$(".js-more");this.templateItem.render({user:this.prepareUsers_(t)}).insertBefore(n),this.$(".js-more-text").html(o.get(148,i)),i<1&&n.addClass("hidden")},clear:function(){this.selectedUsers_=[],this.isEditMode_=!1,this.$el.empty()},render:function(e){return this.$el.html(this.template.render(e)),this.toggleScroll_&&this.toggleScroll_.destroy(),this.toggleScroll_=new r(this.$el.find(".js-scroll-toggle")),this}},"EditableFolderView");c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";var n=i(100),a=i(140),o=i(121),s=i(124),r=i(103).navigate,l=o.BUTTONS,c=o.extend({userListCount_:40,folderId:null,users_:[],View_:null,profileRouteName_:null,init:function(){this.View&&this.registerView("view",new this.View).on(this.View.EVENTS.ACTION_USER,this.onAction_,this).on(this.View.EVENTS.OPEN_USER,this.onSelectUser_,this).on(this.View.EVENTS.MORE,this.onMore_,this).appendTo(this.parent)},onStart:function(){c._super.onStart.apply(this,arguments),this.folderId&&(this.users_=[],this.foldersModel_=new a({folderId:this.folderId,preferredCount:this.userListCount_}),this.foldersModel_.setClientSource(this.clientSource),this.getView("view").clear(),this.getView("view").showLoading(),this.getUsers_())},getUsers_:function(e){var t=this;this.foldersModel_.trackNext().fetch(e,!0).then(function(e){return t.onFolderReceived_(e)},function(e){return t.onError_(e)})},onAction_:function(e){this.getView("view").showLoading(),this.users_=[],this.foldersModel_.removeUsers({ids:e}).then(this.getUsers_.bind(this),this.onError_.bind(this))},onSelectUser_:function(e){r(this.profileRouteName_,{id:e})},onFolderReceived_:function(e){if((e=n.isArray(e)?e[0]:e)&&0===e.getTotalCount())this.onNavigationAction(l.BACK);else{var t=e&&e.getSection([])[0],i=t&&t.getUsers([]);this.users_=this.users_.concat(i);var a=0;t.getLastBlock()||(a=t.getTotalCount()-this.users_.length);var o=this.getView("view"),s={users:i,countMore:a,description:e.getDescription()};this.users_.length>this.userListCount_?o.insert(s):o.update(s),o.hideLoading(),this.readyForVrt()}},onError_:function(){s.showNotification({type:s.TYPES.ERROR})},onMore_:function(){this.getUsers_({offset:this.users_.length})}},"EditableFolderPage");e.exports=c},function(e,t,i){"use strict";var n=i(121),a=i(5),o=i(3330),s=i(3332),r=i(3342),l=i(279),c=i(221),u=i(102),d=i(244),h=i(184),p=i(101),m=p.ViewScreenEvent,g=p.ClickEvent,_=i(3364),f=i(100),v=i(113),E=i(3384),b=i(264),y=i(136),k=i(103).navigate,S=i(126),w=n.extend({transition:!1,discoverPage:!0,headerTemplate:null,createElement:function(){return y({className:"people-nearby"})},trackHotPanelScreen:function(){},construct:function(){var e=this;this.screenOnboardingTips="people-nearby"===this.getParameter("page"),w._super.construct.apply(this,arguments),this.jinba={start:function(t){"people-nearby"===e.getParameter("page")&&e.peopleNearbyController_.jinba.start(t)}},this.handleLookalikesFeatureStatusChange_=this.handleLookalikesFeatureStatusChange_.bind(this)},handleLookalikesFeatureStatusChange_:function(){this.isStarted()&&this.updateActiveTab_()},handleSessionChange_:function(){v.isLoggedIn()?c.show():c.hide()},getNavigationBarContext:function(){return{logo:!0,actions:{menu:!a.supportsTabBar,location:!0},noMenu:a.supportsTabBar,partner_id:S.get("partner_id")}},init:function(){var e=this;w._super.init.apply(this,arguments),this.headerController_=this.registerController(new r({page:this.getParameter("page"),getNavigationBarContext:function(){return e.getNavigationBarContext()},scrollPositionKeeper:this.scrollPositionKeeper,wasBack:function(){return e.wasBack()},onSearchingStateChange:this.handleSearchingStateChange_.bind(this)})),this.discoverPageView_=this.registerView(new o({header:this.headerController_.element})),this.discoverPageView_.appendTo(this.element),this.peopleNearbyController_=new s({getNavigationBarContext:function(){return e.getNavigationBarContext()},header:this.headerController_,onOpenFilter:function(){return e.openFilter_()},onClickPopularity:function(){return e.onNavigationAction("popularity")},preventNotifications:function(){return e.preventNotifications_()},allowNotifications:function(){return e.allowNotifications_()},onOnboardingTooltipShown:function(){return e.onOnboardingTooltipShown_()},isOnboardingTooltipShown:function(){return e.onboardingTooltipShown_},onInteractive:function(){return d(e,"People nearby interactive")},onScreenNameChange:this.onScreenNameChange_.bind(this)})},preventNotifications_:function(){this.notificationScreenAccess=3},allowNotifications_:function(){this.notificationScreenAccess=1},onOnboardingTooltipShown_:function(){this.onboardingTooltipShown_=!0},handleSearchingStateChange_:function(e){this.discoverPageView_.setFaded(e),e?this.scrollPositionKeeper.lockPosition():this.scrollPositionKeeper.unlockPosition()},getLookalikesController_:f.once(function(){var e=this,t=new _({getNavigationBarContext:function(){return e.getNavigationBarContext()},header:this.headerController_.getLookalikesHeader(),footerElement:this.getFooterElement()});return t.sharingObservable.changeEvent.subscribe(this.handleSharingChange_.bind(this)),t}),handleSharingChange_:function(e){this.isActive()&&(e?this.scrollPositionKeeper.lockPosition():this.scrollPositionKeeper.unlockPosition())},changeSearchState_:function(e){this.discoverPageView_.changeSearchState(e)},onStart:function(){w._super.onStart.apply(this,arguments),v.isLoggedIn()&&c.show(),this.updateActiveTab_(),this.activeTabController_&&!this.activeTabController_.isStarted()&&(this.activeTabController_.navigatedBack=this.wasBack(),this.activeTabController_.start()),v.on(v.EVENTS.SESSION_CHANGED,this.handleSessionChange_,this),E.onChange(this.handleLookalikesFeatureStatusChange_),this.wasBack()&&h.isEnabled()&&h.refresh(h.placements.PNB)},onStop:function(){w._super.onStop.apply(this,arguments),this.onboardingTooltipShown_=!1,c.hide(),this.searchCriteriaController_&&(this.searchCriteriaController_.stop(),this.activeTabController_.navigatedBack=!0,this.activeTabController_.start()),this.changeSearchState_(!1),this.activeTabController_&&this.activeTabController_.stop(),v.off(v.EVENTS.SESSION_CHANGED,this.handleSessionChange_,this),E.unsubscribeFromChange(this.handleLookalikesFeatureStatusChange_)},updateActiveTab_:function(){var e=this.getParameters();this.headerController_.updateActiveTab(e);var t=e.page;if(E.isEnabled())this.updateActiveTabInLookalikesVariation_();else{if("people-nearby"!==t)return void k("people-nearby",!0);this.clientSource=2,this.screenName=2,this.trackScreenView_(),this.peopleNearbyController_.navigatedBack=this.wasBack(),this.setActiveController_(this.peopleNearbyController_)}},updateActiveTabInLookalikesVariation_:function(){var e=this.getParameters().page;this.changeSearchState_(!1),"lookalikes"===e?(this.screenName=b(),this.trackScreenView_()):(this.screenName=2,this.trackScreenView_()),this.activeTabController_&&this.removeController(1),"people-nearby"===e?(this.clientSource=2,this.peopleNearbyController_.navigatedBack=this.wasBack(),this.setActiveController_(this.peopleNearbyController_)):(this.clientSource=138,this.setActiveController_(this.getLookalikesController_())),window.scrollTo(0,0)},setActiveController_:function(e){this.activeTabController_!==e&&(this.activeTabController_&&this.activeTabController_.isStarted()&&this.activeTabController_.stop(),this.activeTabController_=e,this.activationPlace=e.activationPlace,this.discoverPageView_.setContent(e.element),this.activeTabController_.start(this.getParameters()))},onParametersUpdate:function(){this.updateActiveTab_()},getScrollableElement:function(){return this.element.find(".js-screen-container")},getFooterElement:function(){return this.element.find(".js-footer-element")},onNavigationAction:function(e){e===n.BUTTONS.LOCATION?(this.openFilter_(),u.track(g,{element:94})):"popularity"===e?(k("popularity"),u.track(g,{element:63,screen_name:2})):w._super.onNavigationAction.apply(this,arguments)},openFilter_:function(){var e=this;this.searchCriteriaController_||(this.searchCriteriaController_=new l({onCloseButtonClick:function(){return e.closeFilter_()},onSaveButtonClick:function(){return e.saveFilter_()},searchType:"people-nearby"===this.getParameter("page")?2:1})),this.searchCriteriaController_.start(),this.headerController_.getLookalikesHeader().collapser.setEnabled(!1),this.scrollPositionKeeper.lockPosition(),this.activeTabController_.stop()},saveFilter_:function(){var e=this;this.searchCriteriaController_.save().then(function(){e.closeFilter_()})},closeFilter_:function(){this.headerController_.getLookalikesHeader().collapser.setEnabled(!0),this.scrollPositionKeeper.unlockPosition(),this.searchCriteriaController_.stop(),this.activeTabController_.navigatedBack=!0,this.activeTabController_.start()},onScreenNameChange_:function(e){this.screenName=e||2},trackScreenView_:function(){u.track(m,{screen_name:this.screenName})}},"DiscoverPage"),C=new w;e.exports=function(){return C}},function(e,t,i){"use strict";var n=i(98),a=i(137);e.exports=i(108)("PeopleNearbyHeader",function(e){return e.navigationBar?n.createElement(a,{logo:e.navigationBar.logo,partner_id:e.navigationBar.partner_id,actions:e.navigationBar.actions,extraClass:"navigation-bar--shadow",primary:e.navigationBar.noMenu?n.createElement("div",{className:"js-popularity"}):null}):null})},function(e,t,i){"use strict";var n=i(109),a=i(3338),o={ACTION:"ACTION"},s=n.extend({events:{"click .js-action":"onAction_"},update:function(e){s._super.update.apply(this,arguments),this.render(e)},clear:function(){this.$el.empty()},setButtonLoading:function(e){this.$(".js-action").toggleClass("is-loading",e)},render:function(e){return this.$el.html(a.render(e)),this},onAction_:function(e){if(e&&e.target){var t=parseInt(e.target.getAttribute("data-action"),10);this.trigger(o.ACTION,t)}else this.log.error("TODO broken button",e.target)}},"BlockingScreenView");s.EVENTS=o,s.TYPES={NO_PHOTO:"no-photo",NO_MESSAGES:"no-messages",NO_USERS:"no-users",IMPORT:"import"},e.exports=s},function(e,t,i){"use strict";var n=i(201)(!1);e.exports={setScrolling:n.setValue,isScrolling:function(){return n.value},onChange:n.onChange}},function(e,t,i){"use strict";var n,a=i(135),o=i(105),s=o.ServerGetNextPromoBlocks,r=o.PromoBlockRequestParams,l=a.extend({useCache_:!1,getRequestMessageType:460,getResponseMessageType:461,get:function(e){var t=(new r).setPosition(e.position).setCount(e.count);e.shownPromoBlocks&&t.setShownPromoBlocks(e.shownPromoBlocks),e.excludePromoBlocks&&t.setExcludePromoBlocks(e.excludePromoBlocks);var i=(new s).setContext(e.context).setPromoBlockRequestParams([t]);return l._super.get.call(this,i)}},"NextPromoBlocksModel");l.getInstance=function(){return n||(n=new l)},e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106),s=(i(99),i(248),i(134)),r=i(153);e.exports=i(108)("PeopleNearby",function(e){return n.createElement("div",{className:"people-nearby js-people-nearby"},n.createElement("div",{className:"people-nearby__counter js-people-nearby-counter"},n.createElement("div",{className:"people-nearby-counter"},n.createElement("div",{className:"people-nearby-counter__title",dangerouslySetInnerHTML:{__html:e.title}}),n.createElement("div",{className:"people-nearby-counter__counter"},e.counter))),n.createElement("div",{className:"people-nearby__content people-nearby-onboarding js-greeting-wrapper"}),n.createElement("div",{className:"people-nearby__content js-content"},r(e.section,e,function(t){return n.createElement(n.Fragment,{key:"".concat(t.sectionId,"-").concat(t.ndx)},n.createElement("div",{className:"users-folder users-folder--chess js-content-item","data-section-id":t.sectionId},n.createElement("div",{className:"users-folder__list js-list ".concat(t.hasPlaceholder?"has-placeholder":"")},t.users.map(function(e){return n.createElement(n.Fragment,{key:"".concat(e.ndx,"-").concat(e.id)},e.addPlaceholder?n.createElement("div",{className:"users-folder__item qa-profile-item"}):null,n.createElement("div",{className:"users-folder__item qa-profile-item"},n.createElement("div",{className:"users-folder__user js-user-avatar","data-user-id":e.id,"data-index":e.index?e.index:void 0},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},t.placeholderSection?n.createElement("div",{className:"brick__image"}):e.image?n.createElement("div",{className:"brick__image"},n.createElement("img",{src:"".concat(a({src:e.image,width:90})),alt:"",className:"js-user-image"})):e.styledPlaceholder?n.createElement("div",{className:"brick__placeholder brick__placeholder--variant-".concat(e.styledPlaceholder.index)},e.styledPlaceholder.letter):n.createElement("div",{className:"brick__icon"},e.male?n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}):e.female?n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}):n.createElement(o,{name:"avatar-placeholder-unknown",size:"stretch"})),e.showBumpedIcon?n.createElement("div",{className:"brick__badge brick__badge--bc js-badge-bump"},n.createElement(o,{name:"badge-feature-bump",size:"md"})):null,n.createElement("div",{className:"brick__text"},n.createElement("div",{className:"brick__name"},e.name),n.createElement("div",{className:"brick__status"},e.online?n.createElement("i",{className:"online-status online-status--online"}):"",e.offline?n.createElement("i",{className:"online-status online-status--offline"}):"",e.idle?n.createElement("i",{className:"online-status online-status--idle"}):""))))))}))),t.shareDivider?n.createElement("div",{className:"js-share-divider","data-index":t.shareDivider.index}):null,r(t.banner,e,function(e){return e.googleAd?n.createElement("div",{className:"people-nearby-banner people-nearby-banner-ad",key:"google-ad-".concat(e.ndx)},n.createElement("div",{id:e.adSlot,"data-qa-ads":"pnb"})):n.createElement("div",{className:"people-nearby-banner js-people-nearby-banner","data-index":e.index,"data-id":e.id,key:e.ndx},n.createElement("div",{className:"cta-box cta-box--compact"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick-wrapper brick-wrapper--s-m-s ".concat(e.icon?"brick-wrapper--padded":"")},e.leftImage?n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({src:e.leftImage,width:65}),"')")}}))):null,n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},"add-photo"===e.featureName?n.createElement("div",{className:"brick__icon"},n.createElement(o,{name:"badge-add-photos",size:"stretch",color:"primary"})):null,"spp-delayed"===e.featureName?n.createElement("div",{className:"brick__icon brick__icon--transparent"},n.createElement(o,{name:"generic-premium",size:"stretch"})):null,["add-photo","spp-delayed"].includes(e.featureName)?null:n.createElement(n.Fragment,null,e.middleImage?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({src:e.middleImage,width:90}),"')")}}):null,e.icon?n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(o,{size:"lg",color:"primary",shadow:!0,name:e.icon})):null)),e.pulseAnimation?n.createElement("div",{className:"pulse-animation pulse-animation--live is-animation"},n.createElement("svg",{viewBox:"0 0 50 50",className:"pulse-animation_"},n.createElement("circle",{className:"pulse-animation__circle pulse-animation__circle--first",fill:"currentColor",cx:"25",cy:"25",r:"25"}),n.createElement("circle",{className:"pulse-animation__circle pulse-animation__circle--second",fill:"currentColor",cx:"25",cy:"25",r:"25"}))):null),e.rightImage?n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({src:e.rightImage,width:65}),"')")}}))):null)),e.title?n.createElement("div",{className:"cta-box__header",dangerouslySetInnerHTML:{__html:e.title}}):null,n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.message}}),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{type:e.featureName,text:e.action,narrow:"true",extraClass:"".concat(e.isLoading?"is-loading":""," js-button")})))),e.cost?n.createElement("div",{className:"cta-box__additional js-show-credits".concat(e.showCredits?"":" hidden")},e.costOfService):null))}))})),n.createElement("div",{className:"people-nearby__zero js-zero-container"}),n.createElement("div",{className:"people-nearby__loader"},n.createElement("div",{className:"infinite-scroll-spinner js-next-page-loader"},n.createElement("div",{className:"loading-dots small dark ".concat(e.relative?"":"loading-dots--centered"," ").concat(e.extraClass)},n.createElement("div",{className:"first dot"}),n.createElement("div",{className:"second dot"}),n.createElement("div",{className:"third dot"})))))})},function(e,t,i){"use strict";var n=i(98),a=i(106),o=(i(99),i(248),i(134)),s=i(153);e.exports=i(108)("PeopleNearbyChunk",function(e){return s(e.section,e,function(t){return n.createElement(n.Fragment,{key:"".concat(t.sectionId,"-").concat(t.ndx)},n.createElement("div",{className:"users-folder users-folder--chess js-content-item","data-section-id":t.sectionId},n.createElement("div",{className:"users-folder__list js-list ".concat(t.hasPlaceholder?"has-placeholder":"")},t.users.map(function(e){return n.createElement(n.Fragment,{key:"".concat(e.ndx,"-").concat(e.id)},e.addPlaceholder?n.createElement("div",{className:"users-folder__item qa-profile-item"}):null,n.createElement("div",{className:"users-folder__item qa-profile-item"},n.createElement("div",{className:"users-folder__user js-user-avatar","data-user-id":e.id,"data-index":e.index?e.index:void 0},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},t.placeholderSection?n.createElement("div",{className:"brick__image"}):e.image?n.createElement("div",{className:"brick__image"},n.createElement("img",{"data-src":e.image,"data-width":"90",alt:"",className:"js-user-image"})):e.styledPlaceholder?n.createElement("div",{className:"brick__placeholder brick__placeholder--variant-".concat(e.styledPlaceholder.index)},e.styledPlaceholder.letter):n.createElement("div",{className:"brick__icon"},e.male?n.createElement(a,{name:"avatar-placeholder-male",size:"stretch"}):e.female?n.createElement(a,{name:"avatar-placeholder-female",size:"stretch"}):n.createElement(a,{name:"avatar-placeholder-unknown",size:"stretch"})),e.showBumpedIcon?n.createElement("div",{className:"brick__badge brick__badge--bc js-badge-bump"},n.createElement(a,{name:"badge-feature-bump",size:"md"})):null,n.createElement("div",{className:"brick__text"},n.createElement("div",{className:"brick__name"},e.name),n.createElement("div",{className:"brick__status"},e.online?n.createElement("i",{className:"online-status online-status--online"}):"",e.offline?n.createElement("i",{className:"online-status online-status--offline"}):"",e.idle?n.createElement("i",{className:"online-status online-status--idle"}):""))))))}))),t.shareDivider?n.createElement("div",{className:"js-share-divider","data-index":t.shareDivider.index}):null,s(t.banner,e,function(e){return e.googleAd?n.createElement("div",{className:"people-nearby-banner people-nearby-banner-ad",key:"google-ad-".concat(e.ndx)},n.createElement("div",{id:e.adSlot,"data-qa-ads":"pnb"})):n.createElement("div",{className:"people-nearby-banner js-people-nearby-banner","data-index":e.index,"data-id":e.id,key:e.id},n.createElement("div",{className:"cta-box cta-box--compact"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick-wrapper brick-wrapper--s-m-s ".concat(e.icon?"brick-wrapper--padded":"")},e.leftImage?n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__image js-user-image","data-src":e.leftImage,"data-width":"65"}))):null,n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},"add-photo"===e.featureName?n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"badge-add-photos",size:"stretch",color:"primary"})):null,"spp-delayed"===e.featureName?n.createElement("div",{className:"brick__icon brick__icon--transparent"},n.createElement(a,{name:"generic-premium",size:"stretch"})):null,["add-photo","spp-delayed"].includes(e.featureName)?null:n.createElement(n.Fragment,null,e.middleImage?n.createElement("div",{className:"brick__image js-user-image","data-src":e.middleImage,"data-width":"90"}):null,e.icon?n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(a,{size:"lg",color:"primary",shadow:!0,name:e.icon})):null)),e.pulseAnimation?n.createElement("div",{className:"pulse-animation pulse-animation--live is-animation"},n.createElement("svg",{viewBox:"0 0 50 50",className:"pulse-animation_"},n.createElement("circle",{className:"pulse-animation__circle pulse-animation__circle--first",fill:"currentColor",cx:"25",cy:"25",r:"25"}),n.createElement("circle",{className:"pulse-animation__circle pulse-animation__circle--second",fill:"currentColor",cx:"25",cy:"25",r:"25"}))):null),e.rightImage?n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__image js-user-image","data-src":e.rightImage,"data-width":"65"}))):null)),e.title?n.createElement("div",{className:"cta-box__header",dangerouslySetInnerHTML:{__html:e.title}}):null,n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.message}}),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{type:e.featureName,text:e.action,narrow:"true",extraClass:"".concat(e.isLoading?"is-loading":""," js-button")})))),e.cost?n.createElement("div",{className:"cta-box__additional js-show-credits".concat(e.showCredits?"":" hidden")},e.costOfService):null))}))})})},function(e,t,i){"use strict";var n=i(100),a=i(3348),o=i(102),s=i(101),r=s.ViewElementEvent,l=s.ClickEvent,c=i(264);e.exports=function(e){function t(){!function(e){m!==e&&(m=e,p.toggleClass("is-visible",e),e&&o.track(r,{element:453,screen_name:c()}))}(s.scrollLeft()>1125)}var i=e.container,s=e.scrollViewZepto,u=e.scrollViewVisibility,d=n.throttle(t,100);s.on("scroll",d);var h=a.render({},i),p=h.is(".js-return-chevron")?h:h.find(".js-return-chevron");p.click(function(){o.track(l,{element:453,parent_element:368,screen_name:c()}),s.scrollLeft(0)});var m=!1;u.onHide(t)}},function(e,t,i){"use strict";var n=i(98),a=i(209),o=i(106);e.exports=i(108)("Faces",function(e){return e.faces.map(function(e){return n.createElement("div",{className:"discover-tabs__tab discover-tabs__tab--stretch js-face","data-id":e.id,key:e.id},n.createElement("div",{className:"discover-tab discover-tab--user"},n.createElement("div",{className:"discover-tab__image"},n.createElement("div",{className:"brick brick--stretch is-loading","data-qa":"brick"},e.picture?n.createElement(a,{src:e.picture,size:"70"}):n.createElement("div",{className:"brick__loader"},n.createElement(o,{name:"loading-dots",size:"lg"})))),n.createElement("div",{className:"discover-tab__label"},e.title)))})})},function(e,t,i){"use strict";var n=i(122),a=i(105).ServerGetSampleFaces;e.exports=function(e){var t=e.offset,i=e.limit,o=e.searchString,s=e.photoId,r=e.callback,l=(new a).setContext(138).setLimit(i).setOffset(t);o&&l.setSearchString(o),s&&l.setPhotoId(s),new n(575,l).on(576,r).request()}},function(e,t,i){"use strict";var n=i(100),a=i(25);e.exports=function(e){var t=e.itemContainer,i=e.itemSelector,o=e.onItemView,s=n.throttle(function(){var e=t.scrollLeft();if(!(e<=r)){r=e;var n=t.find(i),s=function e(i,n,o){if(n>o)return-1;var s=Math.floor((n+o)/2);if(r=i[s],l=a(r).offset(),c=t.offset(),l.left+l.width<=c.left+c.width)return Math.max(s,e(i,s+1,o));var r,l,c;return e(i,n,s-1)}(n,l+1,n.length-1);s<=l||o(l=s)}},100);t.on("scroll",s);var r=0,l=-1;return{destroy:function(){t.off("scroll",s)}}}},function(e,t,i){"use strict";var n=i(100),a=i(25),o=8;e.exports=function(e){function t(){var e=i.offset();e&&i.find(s).forEach(function(t){t.style.visibility=function(e,t){return i=a(e).offset(),n=t,i.left+i.width<=n.left-n.width*o||i.left>=n.left+n.width*(o+1)?"hidden":null;var i,n}(t,e)})}var i=e.itemContainer,s=e.itemSelector;t();var r=n.throttle(t,1e3);return i.on("scroll",r),{destroy:function(){i.off("scroll",r)}}}},function(e,t,i){"use strict";function n(e){var t=a(e);Object.assign(t,{needsAppLogin:!0,provider:l[e],activationPlace:239}),s(t)}function a(e){return{providerContext:3,providerType:1,personId:e}}var o=i(150),s=o.login,r=o.getProvider,l={};n.preloadExternalProvider=function(e){if(!l[e]){var t=a(e);r(t).then(function(t){l[e]=t})}},e.exports=n},function(e,t,i){"use strict";var n=i(100),a=i(99),o=i(247),s=i(124),r=i(289),l=i(218),c=n.once(function(){return l(document.body)});e.exports=function(e){function t(){r.off(r.EVENTS.START,i),r.off(r.EVENTS.FINISH,l)}function i(){c().show()}function l(i){c().hide(),t(),n.get(i,"photo_id")?e(i):function(t){var i=a.get(75);t instanceof Error&&(i=t.message),
s.showNotification({type:s.TYPES.ERROR,text:i}),e()}(i)}r.on(r.EVENTS.START,i),r.on(r.EVENTS.FINISH,l);var u=o(19);return r.start({uploadUrl:u}),{stop:function(){c().hide(),t()}}}},function(e,t,i){"use strict";function n(e){var t=e.find(a)||e[0],i=t.getSharingUrl(),n=t.getSharingDescription();return"".concat(n," ").concat(i)}function a(e){return 28===e.getExternalProviderDetails().getType()}function o(e){return p[e.getExternalProviderDetails().getType()]}var s,r,l,c=i(3)(i(107)),u=i(102),d=i(101).PostEvent,h=(s={},(0,c.default)(s,1,120),(0,c.default)(s,15,201),s),p=(r={},(0,c.default)(r,1,2),(0,c.default)(r,15,7),r),m=(l={},(0,c.default)(l,1,"facebook"),(0,c.default)(l,15,"twitter"),(0,c.default)(l,28,"whatsapp"),l);e.exports={getShareLookalikesTemplateData:function(e){var t=e.clientSocialSharingProviders,i=e.sharingProviders;return{image:t.getPromo().getImageId()[0],sharingProviders:i.map(function(e,t){return{displayName:e.getExternalProviderDetails().getDisplayName(),logoUrl:m[e.getExternalProviderDetails().getType()],index:t}}),whatsappMessage:n(t.getProviders())}},trackPost:function(e){u.track(d,{social_media:o(e),activation_place:239})},getWhatsAppMessage:n,getSharingProviderElement:function(e){return h[e.getExternalProviderDetails().getType()]}}},function(e,t,i){"use strict";function n(e){s.isIOs&&(e?window.$(".modal-container").css("position","absolute"):window.$(".modal-container").css("position","fixed"))}var a=i(124),o=i(99),s=i(5);e.exports=function(e,t,i){function r(e){e.clipboardData?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",i),a.showNotification({type:a.TYPES.INFO,text:o.get(547)})):a.showNotification({type:a.TYPES.ERROR}),document.removeEventListener("copy",r),e.preventDefault()}var l=!1,c=e&&e.find(function(e){return 1===e.getExternalProviderDetails().getType()});if(i=i||c&&c.getSharingUrl(),s.supportsClipboard()&&document.queryCommandSupported("copy")){document.addEventListener("copy",r);try{l=document.execCommand("copy")}catch(e){document.removeEventListener("copy",r),l=!1}}l&&!window._badoo_forceShowLink||(n(!0),t.removeClass("is-hidden"),t.find(".js-copy-link-input").val(i).attr("data-qa","share-link").focus().one("blur",function(){t.addClass("is-hidden")}).get(0).setSelectionRange(0,i.length),n(!1))}},function(e,t,i){"use strict";var n=i(100),a=i(122),o=i(3380),s=i(105),r=s.ServerGetSharedUser,l=s.UserFieldFilter;e.exports=function(e,t){!function(e,t){var i=(new r).setSharedUserFieldFilter((new l).setProjection([])).setId(e);n.isString(t)&&i.setPhotoId(t),new a(586,i).on(587,n.noop).request()}(e,t);var i=o("?page=".concat(9,"&uid=",e,"&photo_id=").concat(t,"&lookalike"));window.open(i.replace("&redirect=true",""))}},,function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.x(t.get(["providers"],!1),t,{block:i},{})}function i(e,t){return e.w('<div class="tabs tabs--mops">').s(t.get(["providers"],!1),t,{block:n},{}).w("</div>")}function n(e,t){return e.w('<div class="tab ').x(t.get(["isSelected"],!1),t,{block:a},{}).w(' js-select-action" data-id="').f(t.get(["id"],!1),t,"h").w('">').h("select",t,{block:o},{key:p},"h").w('<div class="tab__label">').f(t.get(["name"],!1),t,"h").w("</div></div>")}function a(e,t){return e.w(" is-active ")}function o(e,t){return e.h("eq",t,{block:s},{value:t.getPath(!1,["PROVIDER_TYPE","FORTUMO"]),type:"number"},"h").h("eq",t,{block:r},{value:t.getPath(!1,["PROVIDER_TYPE","WEB"]),type:"number"},"h").h("eq",t,{block:l},{value:t.getPath(!1,["PROVIDER_TYPE","GOOGLE_WALLET"]),type:"number"},"h").h("eq",t,{block:c},{value:t.getPath(!1,["PROVIDER_TYPE","BOKU_WEB"]),type:"number"},"h").h("eq",t,{block:u},{value:t.getPath(!1,["PROVIDER_TYPE","PAYPAL"]),type:"number"},"h").h("eq",t,{block:d},{value:t.getPath(!1,["PROVIDER_TYPE","PAYMENT_PROVIDER_TYPE_CENTILI"]),type:"number"},"h").h("default",t,{block:h},{},"h")}function s(e,t){return e.w('<div class="tab__icon"><div class="mops-icon">').h("Icon",t,{},{name:"payment-method-mobile",size:"lg"},"h").w("</div></div>")}function r(e,t){return e.w('<div class="tab__icon"><div class="mops-icon">').h("Icon",t,{},{name:"payment-method-credit-card",size:"lg"},"h").w("</div></div>")}function l(e,t){return e.w('<div class="tab__icon"><div class="mops-icon">').h("Icon",t,{},{name:"payment-method-google-wallet",size:"lg"},"h").w("</div></div>")}function c(e,t){return e.w('<div class="tab__icon"><div class="mops-icon">').h("Icon",t,{},{name:"payment-method-mobile",size:"lg"},"h").w("</div></div>")}function u(e,t){return e.w('<div class="tab__icon"><div class="mops-icon">').h("Icon",t,{},{name:"payment-method-paypal",size:"lg"},"h").w("</div></div>")}function d(e,t){return e.w('<div class="tab__icon"><div class="mops-icon">').h("Icon",t,{},{name:"payment-method-mobile",size:"lg"},"h").w("</div></div>")}function h(e,t){return e.w('<div class="tab__icon tab__icon--inactive"><div class="mops-icon" style="background-image: url(\'').f(t.get(["image"],!1),t,"h").w('\')"></div></div><div class="tab__icon tab__icon--active"><div class="mops-icon" style="background-image: url(\'').f(t.get(["imageSelected"],!1),t,"h").w("')\"></div></div>")}function p(e,t){return e.f(t.get(["providerType"],!1),t,"h")}return e.register("payments/methods-of-payment",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.s(t.get(["autoTopup"],!1),t,{block:i},{}).x(t.get(["mopText"],!1),t,{block:o},{}).x(t.get(["terms"],!1),t,{block:s},{}).x(t.get(["unsubscribeInstructions"],!1),t,{block:r},{}).x(t.get(["termsLink"],!1),t,{block:l},{}).x(t.get(["cancelButton"],!1),t,{block:c},{})}function i(e,t){return e.w('<div class="payment-topup ').x(t.get(["checked"],!1),t,{block:n},{}).w(" ").nx(t.get(["enabled"],!1),t,{block:a},{}).w(' js-auto-topup-toggle-action"><div class="payment-topup__checkbox payment-topup__checkbox--active"><svg viewBox="0 0 64 64" class="icon-inline" data-qa-icon-name="payment-checkbox"><g fill="none" fill-rule="evenodd"><ellipse fill="#C8D0D7" cx="32" cy="32" rx="32" ry="32"/><path stroke="#FFF" stroke-width="4.8" stroke-linecap="round" d="M19.8 32.28l8.4 8.4 15.6-15.6"/></g></svg></div><div class="payment-topup__checkbox payment-topup__checkbox--inactive"></div><div class="payment-topup__text">').f(t.get(["text"],!1),t,"h").w("</div></div>")}function n(e,t){return e.w("is-selected")}function a(e,t){return e.w("is-disabled")}function o(e,t){return e.w('<div class="hint">').f(t.get(["mopText"],!1),t,"h").w("</div>")}function s(e,t){return e.w('<div class="hint">').f(t.get(["terms"],!1),t,"h",["s"]).w("</div>")}function r(e,t){return e.w('<div class="hint">').f(t.get(["unsubscribeInstructions"],!1),t,"h").w("</div>")}function l(e,t){return e.w('<div class="hint hint--link js-terms-link" data-link="product_terms">').h("t",t,{},{k:"146"},"h").w("</div>")}function c(e,t){return e.w('<div class="hint hint--link js-cancel-button">').h("t",t,{},{k:"19"},"h").w("</div>")}return e.register("payments/payment-bottom-part",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="payment-packages">').s(t.get(["packages"],!1),t,{block:i},{}).w("</div>")}function i(e,t){return e.w('<div class="payment-package ').x(t.get(["isLifeTime"],!1),t,{block:n},{}).w(" ").x(t.get(["isSelected"],!1),t,{block:a},{}).w(' js-select-action js-payment-package" data-id="').f(t.get(["id"],!1),t,"h").w('"><div class="spring-box"><div class="spring-box__content"><div class="payment-package__name">').x(t.get(["previousTitle"],!1),t,{block:o},{}).w('<span class="payment-package__name-normal">').f(t.get(["title"],!1),t,"h").w('</span></div><div class="payment-package__price">').f(t.get(["price"],!1),t,"h").w('</div></div><div class="spring-box__extra">').x(t.get(["isLifeTime"],!1),t,{else:s,block:m},{}).w("</div></div></div>")}function n(e,t){return e.w(" payment-package--lifetime ")}function a(e,t){return e.w(" is-selected ")}function o(e,t){return e.w('<span class="payment-package__name-previous">').f(t.get(["previousTitle"],!1),t,"h").w("</span>")}function s(e,t){return e.x(t.get(["isMostPopular"],!1),t,{else:r,block:c},{})}function r(e,t){return e.x(t.get(["discount"],!1),t,{block:l},{})}function l(e,t){return e.w('<div class="payment-package__discount">').f(t.get(["discount"],!1),t,"h").w("</div>")}function c(e,t){return e.w('<div class="payment-package__icon">').h("select",t,{block:u},{key:p},"h").w('<div class="payment-package__badge">').h("t",t,{},{k:"571"},"h").w("</div></div>")}function u(e,t){return e.h("eq",t,{block:d},{value:"spp"},"h").h("eq",t,{block:h},{value:"credits"},"h")}function d(e,t){return e.w('<svg viewBox="0 0 64 64" class="icon-inline" data-qa-icon-name="premium-potion"><g fill="none" fill-rule="evenodd"><g transform="matrix(-1 0 0 1 53.504 1.536)"><path fill="#00A2DB" d="M39.5730429,53.202473 C35.6983299,57.052969 30.7780808,59.2447898 25.7252139,59.7732762 C19.0625161,60.4704922 12.1570207,58.2833306 7.04889656,53.2071322 C1.94077239,48.1309338 -0.260144946,41.2685978 0.44145606,34.6475418 C0.968577771,29.6215962 3.17418361,24.7320986 7.04889656,20.8816026 C16.0270452,11.9595674 30.5902057,11.9595674 39.5730429,20.8862618 C48.55588,29.8129562 48.5511915,44.2804378 39.5730429,53.202473"/><path fill="#27D3FC" d="M25.7240083,59.7721114 C19.0613105,60.4693274 12.250255,58.1866522 7.04769095,53.2059674 C1.84713628,48.2269466 -0.361818486,41.6974106 0.440250445,34.646377 C7.10294831,33.949161 14.0084437,36.1363226 19.1165678,41.212521 C24.224692,46.2887194 26.4256093,53.1510554 25.7240083,59.7721114"/><path fill="#007EC2" d="M36.0686547,49.7208858 C33.0288302,52.7417114 29.1688525,54.461289 25.2043882,54.8759578 C19.977377,55.4227482 14.5598116,53.7068314 10.552481,49.7245466 C6.5448155,45.7422618 4.81810677,40.3582234 5.36867099,35.163881 C5.78226395,31.2208666 7.5126565,27.3850138 10.552481,24.3641882 C17.5959523,17.3647386 29.0214996,17.3647386 36.0686547,24.367849 C43.1158098,31.3709594 43.112126,42.7214362 36.0686547,49.7208858"/><path fill="#7000E3" d="M40.1492599,36.8696141 C39.0461221,39.1799117 36.2514393,40.2954573 33.6118121,40.2665037 C30.2725931,40.2298957 26.561308,39.5000653 23.3637489,38.5802061 C21.7401872,38.1129549 21.0181577,36.8503117 20.9833288,35.5497293 L5.26579184,35.5497293 C4.75775903,40.9474125 7.02665966,46.2209613 10.552414,49.7243469 C14.5597446,53.7069645 19.9776449,55.4228813 25.2046561,54.8757581 C29.1687855,54.4610893 33.0287632,52.7418445 36.0685877,49.7206861 C39.5765927,46.2349389 41.3371257,41.6699213 41.3515261,37.0999117 L41.3515261,35.5497293 L41.2373275,35.5497293 C41.0049117,36.0752205 40.640883,36.5364813 40.1492599,36.8696141"/><path fill="#AF61FF" d="M41.3513921,35.5496294 C41.0871615,37.1357542 39.8453779,38.6356838 37.3373636,39.7941606 C34.0306294,41.3220454 28.9787672,42.2981478 23.3113716,42.2981478 C17.6436411,42.2981478 12.5917789,41.3220454 9.28504465,39.7941606 C6.77200696,38.6356838 5.26599277,37.1573862 5.26599277,35.5496294 C5.26599277,31.8242662 12.9859481,29.3825126 29.298925,36.4265574 C38.4398317,40.3735654 41.5540024,34.3329126 41.3513921,35.5496294"/><path fill="#FFF" d="M31.840663 53.9866829C30.4371261 55.3817805 28.1611927 55.3817805 26.7573209 53.9866829 25.353784 52.5915853 25.353784 50.3302093 26.7573209 48.9351117 28.1611927 47.5403469 30.4371261 47.5403469 31.840663 48.9351117 33.2445348 50.3302093 33.2445348 52.5915853 31.840663 53.9866829M19.1151278 26.4709453C18.2892814 27.2919629 16.950044 27.2919629 16.1238628 26.4709453 15.2980164 25.6499277 15.2980164 24.3193933 16.1238628 23.4983757 16.950044 22.6776909 18.2892814 22.6776909 19.1151278 23.4983757 19.941309 24.3193933 19.941309 25.6499277 19.1151278 26.4709453"/><path fill="#27D3FC" d="M51.6203526,26.4971699 L32.4386816,7.43538432 L25.6939349,14.1376435 L25.6939349,14.1376435 C22.7237682,17.0895795 24.609886,23.7492403 29.906555,29.0131379 C35.2035589,34.2770355 41.9054392,36.1513651 44.875606,33.1997619 L44.875606,33.1997619 L51.6203526,26.4971699 Z"/><path fill="#3DDFF9" d="M47.3821132,22.289879 L36.1799397,33.422039 C34.0754715,32.478551 31.8926384,30.9839462 29.9073922,29.0111078 C27.9218112,27.0379366 26.4178063,24.869079 25.4687193,22.777431 L36.670558,11.6456038 L47.3821132,22.289879 Z"/><path fill="#FFF" d="M41.1373285,16.0776013 L29.0409903,28.0983373 C26.8949955,25.7194829 25.4231404,23.1269709 24.7583776,20.7617613 C24.685036,20.5068365 24.6254251,20.2562381 24.5748562,20.0053069 L34.8322964,9.81197568 L41.1373285,16.0776013 Z"/><path fill="#D2FFFF" d="M51.6203526,26.4971699 C48.6501859,29.4487731 41.9483055,27.5744435 36.6513017,22.3105459 C31.3542978,17.0469811 29.46818,10.3869875 32.4386816,7.43538432 C35.4088483,4.48344832 42.1107287,6.35777792 47.4077326,11.6216755 C52.7044015,16.8855731 54.5905194,23.5455667 51.6203526,26.4971699"/><path fill="#3DDFF9" d="M48.0386042,22.2022195 C47.2475867,22.9882931 46.003124,23.1863091 44.5868612,22.8728115 C42.9164145,22.5047347 41.013552,21.4271283 39.3484636,19.7727795 C37.6890684,18.1180979 36.6050195,16.2271283 36.2342928,14.5671219 C35.9188235,13.1597107 36.1127266,11.9230259 36.9037441,11.1369523 C38.6294481,9.42170112 42.5182266,10.5102899 45.5935498,13.5667251 C48.6692078,16.6228275 49.7643082,20.4873011 48.0386042,22.2022195"/><path fill="#00A2DB" d="M44.5868947,22.8729446 C42.916448,22.504535 41.0135855,21.4272614 39.3484971,19.7725798 C37.6891018,18.1178982 36.604718,16.2269286 36.2343263,14.5669222 C37.904773,14.9353318 39.8076355,16.018263 41.4670307,17.667287 C43.1321191,19.3219686 44.216168,21.2129382 44.5868947,22.8729446"/><path fill="#7000E3" d="M48.1071568,16.5903795 C48.1071568,17.6190643 47.2679147,18.4533939 46.2324253,18.4533939 C45.1972708,18.4533939 44.3580287,17.6190643 44.3580287,16.5903795 C44.3580287,15.5616947 45.1972708,14.7273651 46.2324253,14.7273651 C47.2679147,14.7273651 48.1071568,15.5616947 48.1071568,16.5903795"/><path fill="#AF61FF" d="M42.4484014,12.3625549 C42.4484014,13.3912397 41.6091593,14.2255693 40.5736699,14.2255693 C39.5385154,14.2255693 38.6992733,13.3912397 38.6992733,12.3625549 C38.6992733,11.3338701 39.5385154,10.4995405 40.5736699,10.4995405 C41.6091593,10.4995405 42.4484014,11.3338701 42.4484014,12.3625549"/><path fill="#7000E3" d="M47.2845924 8.37521152C47.2845924 9.40389632 46.4453503 10.2382259 45.4098609 10.2382259 44.3747064 10.2382259 43.5354643 9.40389632 43.5354643 8.37521152 43.5354643 7.34652672 44.3747064 6.51252992 45.4098609 6.51252992 46.4453503 6.51252992 47.2845924 7.34652672 47.2845924 8.37521152M39.5259904 19.8920218C40.8183428 21.176297 42.2828302 22.0439066 43.6029788 22.407657 43.7141633 22.034921 43.7751138 21.6408858 43.7751138 21.2315418 43.7751138 18.8759834 41.8534973 16.9660442 39.4827892 16.9660442 38.8180264 16.9660442 38.1931159 17.122793 37.6335096 17.3930266 38.0913084 18.2419994 38.72861 19.099625 39.5259904 19.8920218M42.3229839 1.2331904C42.3229839 1.6774784 41.9606296 2.037568 41.5135474 2.037568 41.0668 2.037568 40.7044457 1.6774784 40.7044457 1.2331904 40.7044457.7889024 41.0668.4288128 41.5135474.4288128 41.9606296.4288128 42.3229839.7889024 42.3229839 1.2331904M33.3952702 39.4761702C33.2020369 40.6456294 27.591908 40.7035366 20.8652455 39.6052966 14.1382482 38.5073894 8.84157923 36.6690022 9.03514743 35.499543 9.22838074 34.329751 14.8381748 34.2718438 21.5651721 35.3700838 28.2921694 36.4683238 33.5885035 38.306711 33.3952702 39.4761702"/><path fill="#AF61FF" d="M28.1928066,38.5102515 C28.1104229,39.0094515 25.0839942,38.9309107 21.4336596,38.3351987 C17.783325,37.7391539 14.8911883,36.8515763 14.973572,36.3523763 C15.0559557,35.8531763 18.0820496,35.9313843 21.7327191,36.5274291 C25.3830537,37.1231411 28.2751903,38.0110515 28.1928066,38.5102515"/></g><g transform="translate(35.072 40.448)"><path fill="#FFF" fill-rule="nonzero" d="M7.51294692,0.850239049 C7.81633058,0.567080963 8.21586299,0.4096 8.63085714,0.4096 L20.0411429,0.4096 C20.456137,0.4096 20.8556694,0.567080963 21.1590531,0.850239049 L27.7419102,6.99423905 C28.4195966,7.62674631 28.4380099,8.69503759 27.7825238,9.35052375 L15.4945238,21.6385238 C14.8546888,22.2783587 13.8173112,22.2783587 13.1774762,21.6385238 L0.88947625,9.35052375 C0.233990085,8.69503759 0.252403428,7.62674631 0.930089779,6.99423905 L7.51294692,0.850239049 Z"/><polygon fill="#FFDD4D" points="8.631 2.048 2.048 8.192 14.336 20.48 26.624 8.192 20.041 2.048"/><polygon fill="#FFC529" points="8.631 2.048 11.264 5.12 14.336 2.048 17.408 5.12 20.041 2.048"/><polygon fill="#FFA608" points="20.041 2.048 17.408 5.12 20.48 8.192 26.624 8.192"/><polygon fill="#FBB03B" points="20.48 8.192 20.041 2.048 17.408 5.12"/><polygon fill="#FFA608" points="11.264 5.12 8.631 2.048 2.048 8.192 8.192 8.192"/><polygon fill="#FFC529" points="8.192 14.336 14.336 20.48 11.264 14.336"/><polygon fill="#F9D022" points="10.167 12.142 8.192 14.336 11.264 14.336"/><polygon fill="#FFC629" points="17.408 14.336 14.336 20.48 20.48 14.336"/><polygon fill="#F9D023" points="17.408 14.336 20.48 14.336 18.505 12.142"/><polygon fill="#FFA608" points="11.264 14.336 14.336 20.48 17.408 14.336"/><polygon fill="#F9D023" points="14.336 8.192 20.48 8.192 17.408 5.12"/><polygon fill="#FFC529" points="14.336 8.192 18.505 12.142 20.48 8.192"/><polygon fill="#FFC529" points="8.192 8.192 10.167 12.142 14.336 8.192"/><polygon fill="#F9D023" points="11.264 5.12 8.192 8.192 14.336 8.192"/><polygon fill="#FBB03C" points="14.336 8.192 10.167 12.142 11.264 14.336 17.408 14.336 18.505 12.142"/><polygon fill="#FBB03B" points="8.192 8.192 8.631 2.048 11.264 5.12"/></g></g></svg>')}function h(e,t){return e.w('<svg viewBox="0 0 64 64" class="icon-inline" data-qa-icon-name="credits-handful"><g fill="none"><ellipse cx="32" cy="48.781" fill="#000" opacity=".05" rx="30.976" ry="2.309"/><ellipse cx="17.012" cy="47.005" fill="#FFBC00" rx="13.656" ry="4.085"/><polygon fill="#FFBC00" points="3.356 42.92 30.668 42.92 30.668 46.828 3.356 46.828"/><ellipse cx="17.012" cy="43.098" fill="#FFCE00" rx="13.656" ry="4.085"/><ellipse cx="17.345" cy="42.92" fill="#FFBC00" rx="7.328" ry="2.131"/><ellipse cx="45.989" cy="46.295" fill="#FFBC00" rx="13.656" ry="4.085"/><polygon fill="#FFBC00" points="32.333 42.21 59.645 42.21 59.645 46.117 32.333 46.117"/><ellipse cx="45.989" cy="42.742" fill="#FFCE00" rx="13.656" ry="4.085"/><ellipse cx="45.656" cy="42.21" fill="#FFBC00" rx="7.328" ry="2.131"/><ellipse cx="44.99" cy="40.966" fill="#FFBC00" rx="13.656" ry="4.085"/><polygon fill="#FFBC00" points="31.334 37.592 58.646 37.592 58.646 41.499 31.334 41.499"/><ellipse cx="44.99" cy="37.414" fill="#FFCE00" rx="13.656" ry="4.085"/><ellipse cx="45.323" cy="36.881" fill="#FFBC00" rx="7.328" ry="2.131"/><ellipse cx="47.655" cy="36.704" fill="#FFBC00" rx="13.656" ry="4.085"/><polygon fill="#FFBC00" points="33.998 32.619 61.311 32.619 61.311 36.526 33.998 36.526"/><ellipse cx="47.655" cy="33.151" fill="#FFCE00" rx="13.656" ry="4.085"/><ellipse cx="18.011" cy="42.032" fill="#FFBC00" rx="13.656" ry="4.085"/><polygon fill="#FFBC00" points="4.355 38.657 31.667 38.657 31.667 42.565 4.355 42.565"/><ellipse cx="18.011" cy="38.48" fill="#FFCE00" rx="13.656" ry="4.085"/><ellipse cx="18.344" cy="37.947" fill="#FFBC00" rx="7.328" ry="2.131"/><ellipse cx="17.012" cy="37.414" fill="#FFBC00" rx="13.656" ry="4.085"/><polygon fill="#FFBC00" points="3.356 33.329 30.668 33.329 30.668 37.237 3.356 37.237"/><ellipse cx="17.012" cy="33.507" fill="#FFCE00" rx="13.656" ry="4.085"/><ellipse cx="17.345" cy="33.329" fill="#FFBC00" rx="7.328" ry="2.131"/><ellipse cx="17.012" cy="31.375" fill="#FFBC00" rx="13.656" ry="4.085"/><polygon fill="#FFBC00" points="3.356 28.001 30.668 28.001 30.668 31.908 3.356 31.908"/><ellipse cx="17.012" cy="27.823" fill="#FFCE00" rx="13.656" ry="4.085"/><ellipse cx="17.345" cy="27.29" fill="#FFBC00" rx="7.328" ry="2.131"/><ellipse cx="18.011" cy="26.047" fill="#FFBC00" rx="13.656" ry="4.085"/><polygon fill="#FFBC00" points="4.355 21.962 31.667 21.962 31.667 25.869 4.355 25.869"/><ellipse cx="18.011" cy="22.495" fill="#FFCE00" rx="13.656" ry="4.085"/><ellipse cx="18.344" cy="21.962" fill="#FFBC00" rx="7.328" ry="2.131"/><ellipse cx="16.679" cy="21.429" fill="#FFBC00" rx="13.656" ry="4.085"/><polygon fill="#FFBC00" points="3.022 17.699 30.335 17.699 30.335 21.607 3.022 21.607"/><ellipse cx="16.679" cy="17.522" fill="#FFCE00" rx="13.656" ry="4.085"/><ellipse cx="16.345" cy="17.344" fill="#FFBC00" rx="7.328" ry="2.131"/><ellipse cx="21.675" cy="16.456" fill="#FFBC00" rx="13.656" ry="4.085"/><polygon fill="#FFBC00" points="8.019 12.371 35.331 12.371 35.331 16.278 8.019 16.278"/><ellipse cx="21.675" cy="12.193" fill="#FFCE00" rx="13.656" ry="4.085"/><ellipse cx="29.184" cy="56.576" fill="#000" opacity=".05" rx="10.752" ry="1.28"/><circle cx="29.184" cy="44.544" fill="#FFDA00" r="13.312"/><circle cx="29.184" cy="44.544" r="13.062" stroke="#FB0" stroke-width=".5"/><path fill="#FFB200" d="M32.3794189,39.424 C31.1199973,39.4239829 29.9348779,40.0041361 29.184,40.9882582 C28.1563282,39.658024 26.3711114,39.1144657 24.7477883,39.6375316 C23.1244653,40.1605976 22.0251412,41.6336105 22.016,43.2979258 C22.016,46.8009829 26.8223326,51.2 29.184,51.2 C31.5456674,51.2 36.352,46.7936389 36.352,43.2979258 C36.3478652,41.1629489 34.5729127,39.4320756 32.3794189,39.424 Z" opacity=".9"/><path fill="#FFBC00" d="M24.8814278 10.2429146C23.8454987 10.2123838 22.8135148 10.387908 21.8412043 10.7600089 20.8688938 10.387908 19.8369099 10.2123838 18.8009808 10.2429146 16.7126961 10.2429146 15.0131613 10.8168893 15.0131613 11.5253084 15.0131613 12.6887706 19.5884485 14.1469765 21.8412043 14.1469765 24.0939601 14.1469765 28.6692473 12.6887706 28.6692473 11.5253084 28.6692473 10.8065474 26.9697125 10.2429146 24.8814278 10.2429146zM50.8612988 30.490654C49.8253697 30.4601232 48.7933858 30.6356474 47.8210753 31.0077483 46.8487648 30.6356474 45.8167809 30.4601232 44.7808517 30.490654 42.6925671 30.490654 40.9930323 31.0646287 40.9930323 31.7730479 40.9930323 32.93651 45.5683195 34.3947159 47.8210753 34.3947159 50.0738311 34.3947159 54.6491183 32.93651 54.6491183 31.7730479 54.6491183 31.0646287 52.9495835 30.490654 50.8612988 30.490654z"/></g></svg>')}function p(e,t){return e.f(t.get(["productTypeName"],!1),t,"h")}function m(e,t){return e.w('<div class="payment-package__unit-price">').f(t.getPath(!1,["pricePerUnit","amount"]),t,"h").w('</div><div class="payment-package__unit-name">').f(t.getPath(!1,["pricePerUnit","unit"]),t,"h").w("</div>")}return e.register("payments/payment-packages",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(628),i(629),function(e){function t(e,t){return t=t.shiftBlocks(f),e.x(t.get(["singleMode"],!1),t,{else:i,block:n},{})}function i(e,t){return t=t.shiftBlocks(f),e.w('<div class="sticky-scroll js-sticky-scroller"><div class="carousel carousel--centered carousel--overlap qa-carousel sticky-scroll_ js-scrollable">').b(t.getBlock("pages"),t,{},{}).w('</div><div class="carousel-index js-bullets-container">').b(t.getBlock("index"),t,{},{}).w("</div></div>")}function n(e,t){return t=t.shiftBlocks(f),e.w('<div class="carousel qa-carousel">').b(t.getBlock("pages"),t,{},{}).w("</div>")}function a(e,t){return t=t.shiftBlocks(f),e.x(t.get(["skeleton"],!1),t,{else:o,block:c},{})}function o(e,t){return t=t.shiftBlocks(f),e.s(t.get(["promoBlocks"],!1),t,{block:s},{})}function s(e,t){return t=t.shiftBlocks(f),e.w('<div class="carousel-page carousel-page--hpadded carousel-page--vpadded js-carousel-page qa-carousel-page" data-index="').f(t.get(["$idx"],!1),t,"h").w('">').s(t.get(["isGift"],!1),t,{else:r,block:l},{}).w("</div>")}function r(e,t){return t=t.shiftBlocks(f),e.p("feature-card/simple",t,t,{})}function l(e,t){return t=t.shiftBlocks(f),e.p("feature-card/gift",t,t,{})}function c(e,t){return t=t.shiftBlocks(f),e.x(t.get(["singleMode"],!1),t,{else:u,block:d},{})}function u(e,t){return t=t.shiftBlocks(f),e.w('<div class="carousel-page carousel-page--hpadded carousel-page--vpadded"><div class="spring-box"><div class="spring-box__media"><div class="feature-card__skeleton-media"></div></div><div class="spring-box__content"><div class="feature-card__skeleton-text"></div></div></div></div><div class="carousel-page carousel-page--hpadded carousel-page--vpadded"><div class="spring-box"><div class="spring-box__media"><div class="feature-card__skeleton-media"></div></div><div class="spring-box__content"><div class="feature-card__skeleton-text"></div></div></div></div>')}function d(e,t){return t=t.shiftBlocks(f),e.w('<div class="carousel-page carousel-page--hpadded carousel-page--vpadded"><div class="spring-box"><div class="spring-box__media"><div class="feature-card__skeleton-media"></div></div><div class="spring-box__content"><div class="feature-card__skeleton-text"></div></div></div></div>')}function h(e,t){return t=t.shiftBlocks(f),e.x(t.get(["skeleton"],!1),t,{else:p,block:_},{})}function p(e,t){return t=t.shiftBlocks(f),e.s(t.get(["promoBlocks"],!1),t,{block:m},{})}function m(e,t){return t=t.shiftBlocks(f),e.w('<div class="carousel-index__item ').x(t.get(["isActive"],!1),t,{block:g},{}).w(' js-carousel-index"></div>')}function g(e,t){return t=t.shiftBlocks(f),e.w(" is-active ")}function _(e,t){return t=t.shiftBlocks(f),e.w('<div class="carousel-index__skeleton-item"></div><div class="carousel-index__skeleton-item"></div><div class="carousel-index__skeleton-item"></div>')}e.register("contextual-carousel",t);var f={pages:a,index:h};return t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,_.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return t=t.shiftBlocks(S),e.w('<div class="feature-card js-click-action js-feature-card" data-qa-feature-card><div class="feature-card__promo">').x(t.get(["picture"],!1),t,{block:i},{}).w('</div><div class="feature-card__content">').x(t.get(["titleText"],!1),t,{block:v},{}).x(t.get(["descriptionText"],!1),t,{block:E},{}).x(t.get(["cost"],!1),t,{block:y},{}).x(t.get(["action"],!1),t,{block:k},{}).w("</div></div>")}function i(e,t){return t=t.shiftBlocks(S),e.w('<div class="feature-card__promo-image">').x(t.getPath(!1,["picture","disableMasking"]),t,{else:n,block:c},{}).w("</div>")}function n(e,t){return t=t.shiftBlocks(S),e.w('<div class="brick brick--stretch" data-qa="brick">').h("select",t,{block:a},{key:r},"h").x(t.get(["processing"],!1),t,{block:l},{}).w('<div class="brick__badge brick__badge--br">').b(t.getBlock("extra"),t,{},{}).w("</div></div>")}function a(e,t){return t=t.shiftBlocks(S),e.h("eq",t,{block:o},{value:"url"},"h").h("eq",t,{block:s},{value:"symbol"},"h")}function o(e,t){return t=t.shiftBlocks(S),e.w('<div class="brick__image"><img src="').h("PhotoUrl",t,{},{width:70,src:t.getPath(!1,["picture","value"])},"h").w('" alt=""></div>')}function s(e,t){return t=t.shiftBlocks(S),e.w('<div class="brick__icon">').h("Icon",t,{},{size:"stretch",name:t.getPath(!1,["picture","value"]),branded:t.getPath(!1,["picture","branded"])},"h").w("</div>")}function r(e,t){return t=t.shiftBlocks(S),e.f(t.getPath(!1,["picture","type"]),t,"h")}function l(e,t){return t=t.shiftBlocks(S),e.w('<div class="brick__fade">').h("Icon",t,{},{name:"loading-dots",size:"lg"},"h").w("</div>")}function c(e,t){return t=t.shiftBlocks(S),e.w('<img src="').f(t.getPath(!1,["picture","value"]),t,"h").w('" alt="" height="70"><div class="feature-card__promo-badge">').b(t.getBlock("extra"),t,{},{}).w("</div>")}function u(e,t){return t=t.shiftBlocks(S),e.x(t.get(["badgeType"],!1),t,{block:d},{}).x(t.get(["mark"],!1),t,{block:m},{})}function d(e,t){return t=t.shiftBlocks(S),e.h("Icon",t,{name:h,block:p},{size:"md",color:"primary",shadow:"true"},"h")}function h(e,t){return t=t.shiftBlocks(S),e.f(t.get(["badgeType"],!1),t,"h")}function p(e,t){return t=t.shiftBlocks(S),e}function m(e,t){return t=t.shiftBlocks(S),e.h("select",t,{block:g},{key:f},"h")}function g(e,t){return t=t.shiftBlocks(S),e.h("eq",t,{block:_},{value:"double-credits-badge"},"h")}function _(e,t){return t=t.shiftBlocks(S),e.h("Mark",t,{},{color:"notification",text:t.getPath(!1,["mark","text"]),shadow:"true",extraClass:"js-mark"},"h")}function f(e,t){return t=t.shiftBlocks(S),e.f(t.getPath(!1,["mark","type"]),t,"h")}function v(e,t){return t=t.shiftBlocks(S),e.w('<div class="feature-card__title">').f(t.get(["titleText"],!1),t,"h",["s"]).w("</div>")}function E(e,t){return t=t.shiftBlocks(S),e.w('<div class="feature-card__text ').x(t.get(["smallText"],!1),t,{block:b},{}).w('">').f(t.get(["descriptionText"],!1),t,"h",["s"]).w("</div>")}function b(e,t){return t=t.shiftBlocks(S),e.w("feature-card__text--sm")}function y(e,t){return t=t.shiftBlocks(S),e.w('<div class="feature-card__cost">').f(t.get(["cost"],!1),t,"h").w("</div>")}function k(e,t){return t=t.shiftBlocks(S),e.w('<div class="feature-card__action js-action">').f(t.getPath(!1,["action","text"]),t,"h").w("</div>")}e.register("feature-card/simple",t);var S={extra:u};return t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,_.__dustBody=!0,f.__dustBody=!0,v.__dustBody=!0,E.__dustBody=!0,b.__dustBody=!0,y.__dustBody=!0,k.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="feature-card js-click-action js-feature-card" data-qa-feature-card><div class="feature-card__promo"><div class="gift"><div class="gift__image">').h("select",t,{block:i},{key:o},"h").w('</div></div></div><div class="feature-card__content">').x(t.get(["titleText"],!1),t,{block:s},{}).x(t.get(["descriptionText"],!1),t,{block:r},{}).x(t.get(["action"],!1),t,{block:l},{}).w("</div></div>")}function i(e,t){return e.h("eq",t,{block:n},{value:"url"},"h").h("eq",t,{block:a},{value:"symbol"},"h")}function n(e,t){return e.w('<img src="').f(t.getPath(!1,["picture","value"]),t,"h").w('" alt="">')}function a(e,t){return e.w('<svg class="img"><use xlink:href="#').f(t.getPath(!1,["picture","value"]),t,"h").w('"></use></svg>')}function o(e,t){return e.f(t.getPath(!1,["picture","type"]),t,"h")}function s(e,t){return e.w('<div class="feature-card__title">').f(t.get(["titleText"],!1),t,"h").w("</div>")}function r(e,t){return e.w('<div class="feature-card__text">').f(t.get(["descriptionText"],!1),t,"h",["s"]).w("</div>")}function l(e,t){return e.w('<div class="feature-card__action js-action">').f(t.getPath(!1,["action","text"]),t,"h").w("</div>")}return e.register("feature-card/gift",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(109),a=i(424),o=i(25),s=i(3436),r=i(111),l=i(176),c=i(162),u=i(3437),d=r("BUTTON_CLICK","SCROLL_CHANGE"),h=r("CAROUSEL"),p=n.extend({render:function(e){this.whatsNewPages_=e;var t=e.map(this.createSlide_,this),i=s.render({slides:t,multipleSlides:t.length>1});i.find(".js-carousel-page").each(function(e,i){o(i).html(t[e])}),this.$el.html(i),this.updateCarousel_(),this.toggleScroll_&&this.toggleScroll_.destroy(),this.toggleScroll_=new l(this.$el.find(".js-scroll-toggle"))},updateCarousel_:function(){this.removeView(h.CAROUSEL),
this.stickyScroll_=new a({el:this.el.querySelector(".js-carousel")}),this.stickyScroll_.on(a.EVENTS.SCROLL_CHANGE,this.onScrollChange_),this.registerView(h.CAROUSEL,this.stickyScroll_),this.updateCarouselBullets_(),this.stickyScroll_.setScrollCallback(this.updateCarouselBullets_,this),this.isEnabled()&&(this.stickyScroll_.enable(),this.stickyScroll_.updateLayout())},onScrollChange_:function(e){var t=this.whatsNewPages_[this.stickyScroll_.getIndex()];this.trigger(d.SCROLL_CHANGE,Object.assign({whatsNewPage:t},e))},enable:function(){p._super.enable.apply(this,arguments),c.on(c.EVENTS.ORIENTATION_CHANGE,this.onOrientationChange_,this),this.updateLayout()},disable:function(){p._super.disable.apply(this,arguments),c.off(c.EVENTS.ORIENTATION_CHANGE,this.onOrientationChange_,this)},updateLayout:function(){this.stickyScroll_&&this.stickyScroll_.updateLayout()},handleDoneButtonClick_:function(){this.trigger(d.DONE_BUTTON_CLICK)},updateCarouselBullets_:function(){var e=this.$el.find(".js-carousel-bullet");e.removeClass("is-active"),o(e[this.stickyScroll_.getIndex()]).addClass("is-active")},onOrientationChange_:function(){this.stickyScroll_&&this.stickyScroll_.updateLayout(!0)},getCurrentWhatsNewPage:function(){return this.stickyScroll_&&this.whatsNewPages_?this.whatsNewPages_[this.stickyScroll_.getIndex()]:null},createSlide_:function(e){var t=this;return u({whatsNewPage:e,onButtonClick:function(i){i=Object.assign({},i,{whatsNewPage:e}),t.trigger(d.BUTTON_CLICK,i)},showNextPromo:function(){var e=t.stickyScroll_.getIndex()+1;t.stickyScroll_.selectChild(e,!0)}})}},"WhatsNew");p.EVENTS=d,p.DIRECTIONS=a.DIRECTIONS,e.exports=p},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerStartProfileQualityWalkthrough,s=a.extend({useCache_:!1,clientSource_:8,visitingSource_:null,profileOption_:null,get:function(){var e=(new o).setContext(this.clientSource_);return this.profileOption_&&e.setProfileOption(this.profileOption_),this.visitingSource_&&e.setVisitingSource(this.visitingSource_),s._super.get.call(this,e)},fetchRequiredScreens:function(){return this.getRequestMessageType=514,this.getResponseMessageType=515,this.get()},fetchWalkthroughEnd:function(){return this.getRequestMessageType=516,this.getResponseMessageType=517,this.get()},setClientSource:function(e){return this.clientSource_=e,this},setVisitingSource:function(e){return this.visitingSource_=e,this},setProfileOption:function(e){return this.profileOption_=e,this}},"ProfileQualityModel");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";function n(e,t){return 12===e?41:t&&we[t]?we[t]:71}function a(e){return N.getCached().values[e]||0}function o(e,t){M.track(le,{banner_id:e.getPromoBlockType(),position_id:e.getPromoBlockPosition(),context:127,call_to_action_type:t})}var s,r,l,c,u=i(3),d=u(i(127)),h=u(i(4)),p=u(i(168)),m=u(i(107)),g=i(100),_=i(122),f=i(179),v=i(113),E=i(132),b=i(99),y=i(291),k=i(3555),S=i(121),w=i(3556),C=i(221),T=i(128),P=i(140),N=i(212),I=i(157),x=i(314),A=i(124),O=i(207),V=i(245),R=i(103),B=R.navigate,L=R.getUrl,F=i(208),M=i(102),D=i(187),U=i(244),j=i(167),G=i(195),q=i(197),H=i(3561),z=i(3583),Y=i(184),$=i(341),W=i(3589),K=i(227),Q=i(580),X=i(313),Z=i(149),J=i(299),ee=i(105),te=ee.UserFieldFilter,ie=ee.PromoBlockType,ne=ee.User,ae=ee.PromoBlock,oe=ee.ServerAppStats,se=ee.FolderFilterStats,re=i(101),le=re.ClickBannerEvent,ce=re.ClickConnectionEvent,ue=re.ClickEvent,de=re.DeleteChatContactEvent,he=re.FavoriteEvent,pe=re.LiveSearchEvent,me=re.ScrollElementEvent,ge=re.ViewFilterListEvent,_e=re.ViewScreenEvent,fe=re.ViewBannerEvent,ve=re.ViewConnectionsEvent,Ee=re.ViewElementEvent,be=i(136),ye=i(492),ke=i(5),Se={clientSource:127,preferredCount:18,userFieldFilter:(new te).setProjection([200,230,700,340,650,640,280,583,580,250,610,560,611,759,630,270,330,871,920,763,820,830,1120])},we=(s={},(0,m.default)(s,8,187),(0,m.default)(s,6,188),(0,m.default)(s,4,190),(0,m.default)(s,0,189),s),Ce=(r={},(0,m.default)(r,P.TYPES.FAVOURITES,8),(0,m.default)(r,P.TYPES.WANT_TO_MEET_YOU,13),(0,m.default)(r,P.TYPES.VISITORS,9),(0,m.default)(r,P.TYPES.MESSAGES,6),(0,m.default)(r,P.TYPES.COMBINED_CONNECTIONS_ALL,163),r),Te=[57,9,1,10,56],Pe=(l={},(0,m.default)(l,12,68),(0,m.default)(l,9,63),(0,m.default)(l,61,57),(0,m.default)(l,66,56),(0,m.default)(l,88,63),(0,m.default)(l,8,130),l),Ne=(c={},(0,m.default)(c,P.TYPES.MESSAGES,26),(0,m.default)(c,P.TYPES.FAVOURITES,23),(0,m.default)(c,P.TYPES.WANT_TO_MEET_YOU,3),(0,m.default)(c,P.TYPES.VISITORS,22),c),Ie=[{activationPlace:210,elementType:97,param:"",count:null,isDefault:!0,folderType:P.TYPES.COMBINED_CONNECTIONS_ALL,model:{folderId:P.TYPES.COMBINED_CONNECTIONS_ALL}},{activationPlace:27,elementType:98,param:"chats",count:null,folderType:P.TYPES.MESSAGES,model:{folderId:P.TYPES.MESSAGES}},{activationPlace:209,elementType:11,param:"conversations",count:null,folderType:P.TYPES.MESSAGES,model:{activityFilter:3,folderId:P.TYPES.MESSAGES}},{activationPlace:245,elementType:377,param:"unreplied",count:null,folderType:P.TYPES.MESSAGES,model:{activityFilter:9,folderId:P.TYPES.MESSAGES}},{activationPlace:235,elementType:354,param:"matches",count:null,folderType:15,model:{folderId:15}},{activationPlace:212,elementType:6,param:"visitors",count:null,folderType:P.TYPES.VISITORS,model:{folderId:P.TYPES.VISITORS,sectionId:"1"}},{activationPlace:211,elementType:5,param:"fans",count:null,folderType:P.TYPES.WANT_TO_MEET_YOU,model:{folderId:P.TYPES.WANT_TO_MEET_YOU,sectionId:"1"}},{activationPlace:24,elementType:55,param:"favourites",count:null,folderType:P.TYPES.FAVOURITES,model:{folderId:P.TYPES.FAVOURITES}},{activationPlace:250,elementType:406,param:"online",count:null,folderType:P.TYPES.MESSAGES,model:{folderId:P.TYPES.MESSAGES,activityFilter:0}}],xe=[1,2],Ae=S.extend({transition:!1,headerTemplate:!1,activationPlace:191,screenName:243,clientSource:127,screenOnboardingTips:!0,previousFilterIndex_:NaN,selectedFilterIndex_:NaN,readItems_:[],hasSpp_:null,hasPhoto_:null,emptyPromo_:null,searchText_:null,forceFetch_:!1,offset_:0,visibleUserIds_:{},userIds_:{},folderSyncActive_:!1,lastBlock_:!1,sendStats_:!1,savedRemoveUserIds:[],createElement:function(){return be({className:"connections"})},construct:function(){Ae._super.construct.apply(this,arguments),ye.onFavoriteStateChange(this.updateFavoriteState_.bind(this)),this.handleAdsEnabledChange_=this.handleAdsEnabledChange_.bind(this),this.usersToRemove_=[],Q.on(Q.EVENTS.USER_CHANGED,this.updateCurrentUser,this).on(Q.EVENTS.ONLINE,this.backOnline,this),this.userSubstitutes_={},X.subscribe(this.onUserIdExchanged_,this),I.on(I.EVENTS.NEW_OFFLINE_MESSAGE,this.onNewOfflineMessage_,this)},updateFavoriteState_:function(e,t){if(!this.isStarted()){var i=y.findIndex(e);if(-1!==i)if(this.getSelectedFilter_().folderType!==P.TYPES.FAVOURITES||t){var n=y.get(i).object;n.setIsFavourite(t),this.connectionsView_.update({updatedItem:n,index:i})}else this.removeUserWhenOpened_(e)}},init:function(){var e=this;this.onFolderResult_=this.onFolderResult_.bind(this),this.onFolderError_=this.onFolderError_.bind(this),this.updateFolderIfEmpty_=this.updateFolderIfEmpty_.bind(this),this.fetchFolderUpdates_=g.throttle(this.fetchFolderUpdates_,1e3,{leading:!0}),this.jinba=new D("CombinedConnections"),Ae._super.init.apply(this,arguments),this.searchFolder_=g.debounce(this.fetchFolder_.bind(this),200),f.on(f.USER_BLOCKED,function(t){return e.removeBlockedUser_(t)}).on(f.VOTED_NO,function(t){return e.removeUserWhenOpened_(t)}).on(f.USER_CONVERSATION_DELETED,function(t){var i=e.getSelectedFilter_().param;i&&"chats"!==i||e.removeUserWhenOpened_(t)}),this.connectionsView_=this.registerView("view",new H({el:this.parent.get(0),trackScroll:this.trackScroll.bind(this),getUserSubstitute:this.getUserSubstitute.bind(this)})).setFilters(Ie).on(H.EVENTS.BLOCKING_ACTION,this.onBlockingAction_,this).on(H.EVENTS.SELECT_FILTER,this.onSelectFilter_,this).on(H.EVENTS.TOGGLE_FILTERS,this.onToggleFilter_,this).on(H.EVENTS.CLOSE_FILTER,this.onSelectFilter_.bind(this,0)).on(H.EVENTS.SELECT_ITEM,this.onSelectItem_,this).on(H.EVENTS.FAVOURITE,this.onFavourite_,this).on(H.EVENTS.ITEM_VISIBLE,this.onItemVisible_,this).on(H.EVENTS.BANNER_VISIBLE,this.onBannerVisible_,this).on(H.EVENTS.START_SEARCH,this.onStartSearch_,this).on(H.EVENTS.SEARCH,this.onSearch_,this).on(H.EVENTS.CANCEL_SEARCH,this.onCancelSearch_,this).on(H.EVENTS.RESET_SEARCH,this.onResetSearch_,this).on(H.EVENTS.NEED_PAGE,this.onNeedPage_,this).on(H.EVENTS.UPDATE,this.updateFrozenList_.bind(this)).on(H.EVENTS.REMOVE_USERS,this.onRemoveUsers_,this).on(H.EVENTS.EDIT_MODE_OPENED,this.disableFolderSync_,this).on(H.EVENTS.EDIT_MODE_CANCELLED,this.editModeCancelled_,this).on(H.EVENTS.PROMO_VIDEO_SEEN,this.promoVideoSeen_,this),E.getSync(34).getEnabled()&&this.registerController("spotlight",new w(void 0)),this.registerController("update_connections",new k).on(k.EVENTS.MESSAGE,this.updateUser_,this),this.onboardingTipsController_=this.registerController(K.getInstance()),this.banners_=new z({getController:this.getController.bind(this),registerController:this.registerController.bind(this),removeController:this.removeController.bind(this),onControllerStart:function(t){return e.once("start",t)},onPromoClick:function(){return e.unfreeze_()},onBannersUpdated:function(){return e.connectionsView_.updateList()},getActivationPlace:this.getActivationPlace_.bind(this),getElementType:this.getElementType_.bind(this),getFolderType:function(){return e.getSelectedFilter_().folderType}})},onStart:function(){var e=this;Ae._super.onStart.apply(this,arguments),C.show(),N.on(N.EVENTS.CHANGE,this.onBadgeChanged_,this).on(N.EVENTS.INVALIDATED,this.onBadgeInvalidated_,this);var t=this.getParameter("filter"),i=g.findIndex(Ie,{param:t});-1===i&&(i=0);var n=W.value,a=E.getSync(1).getEnabled(),o=!this.forceFetch_&&n===this.hasSpp_&&a===this.hasPhoto_&&(i===this.selectedFilterIndex_||this.wasBack()&&this.previousFilterIndex_>-1);if(this.hasSpp_=n,this.hasPhoto_=a,this.forceFetch_=!1,!o){var s=this.connectionsView_;this.previousFilterIndex_>-1&&(this.previousFilterIndex_=NaN,this.searchText_=null,s.update({cancelSearch:!0})),s.render(g.extend({},this.getNavigationBarContext(),{spotlightEnabled:E.getSync(34).getEnabled()})),this.getController("spotlight")&&this.getController("spotlight").setParent(s.$(".js-spotlight"))}this.fetchPopularity_();var r=this.usersToRemove_.splice(0);this.shouldFetchOnStart(o)?(this.setFilter_(i),this.fetchFolder_({preventLoading:!0})):(r.forEach(function(t){return e.removeUser_(t)}),this.wasBack()&&!this.isFrozen_&&(this.getController("update_connections").clearActivityCount(),this.fetchFolderUpdates_())),this.readItems_.length>0&&(this.readItems_.forEach(function(e){e.setIsUnread(!1).setUnreadMessagesCount(0)}),this.connectionsView_.updateUnreadBadges(this.readItems_),this.readItems_=[]),N.trackNext().get(!0).then(this.setBadgeCounters_.bind(this)),W.changeEvent.subscribe(this.handleSuperPowersEnabledChange_,this),this.getController("update_connections").on(k.EVENTS.FROZEN,this.freeze_,this),this.enableFolderSync_(),M.track(_e),this.connectionsView_.actuallyReady(),Y.enabledChangeEvent.subscribe(this.handleAdsEnabledChange_),K.hasTooltipsToSee(this.clientSource)&&(this.onboardingTipsController_.setContext(this.clientSource),this.onboardingTipsController_.on(K.ACTIONS.REQUEST_SHOW_TOOLTIP,this.showNextOnboardingTooltip_,this).on(K.ACTIONS.PERFORM_ACTION,this.performActionTooltip_,this).on(K.ACTIONS.TOOLTIP_DISMISSED,this.allowNotifications_,this)),J.hit()},shouldFetchOnStart:function(e){var t=(!this.wasBack()||!e)&&isNaN(this.previousFilterIndex_),i=0===y.getItems().length&&!this.emptyPromo_&&!this.loading_;return t||i},removeBlockedUser_:function(e){-1!==y.findIndex(e)&&this.removeUserWhenOpened_(e)},removeUserWhenOpened_:function(e){this.isStarted()?this.removeUser_(e):this.usersToRemove_.push(e)},setBadgeCounters_:function(e){var t=e.values,i=e.notices,n=this.getDataFromNotice_(i);this.getController("update_connections").setCache(t),this.connectionsView_.update({updatedBadges:n})},handleSuperPowersEnabledChange_:function(e){this.hasSpp_=e,this.fetchFolder_()},onStop:function(){Ae._super.onStop.apply(this,arguments),C.hide(),this.markPeopleViewed_(),N.off(N.EVENTS.CHANGE,this.onBadgeChanged_,this).off(N.EVENTS.INVALIDATED,this.onBadgeInvalidated_,this),W.changeEvent.unsubscribe(this.handleSuperPowersEnabledChange_,this),this.getController("update_connections").off(k.EVENTS.FROZEN,this.freeze_,this),this.folderSyncActive_&&this.disableFolderSync_(),Y.enabledChangeEvent.unsubscribe(this.handleAdsEnabledChange_),this.onboardingTipsController_&&this.onboardingTipsController_.off(K.ACTIONS.REQUEST_SHOW_TOOLTIP,this.showNextOnboardingTooltip_,this).off(K.ACTIONS.PERFORM_ACTION,this.performActionTooltip_,this).off(K.ACTIONS.TOOLTIP_DISMISSED,this.allowNotifications_,this)},start:function(){Ae._super.start.apply(this,arguments),this.connectionsView_.update({attached:!0})},onParametersUpdate:function(){var e=this.getParameters(),t=$(this.currentParameters_,e);if(this.currentParameters_=e,this.isFrozen_&&(this.unfreeze_(),this.fetchFolderUpdates_()),t){var i=t.changed.filter;if(void 0!==i){var n=g.findIndex(Ie,function(e){return e.param===i});n!==this.selectedFilterIndex_&&(this.previousFilterIndex_=NaN,this.searchText_=null,this.connectionsView_.update({cancelSearch:!0}),this.setFilter_(n),this.fetchFolder_())}}},getNavigationActions:function(){return{menu:!ke.supportsTabBar}},getNavigationBarContext:function(){return Ae._super.getNavigationBarContext.call(this,{title:b.get(486)})},onNavigationAction:function(e){return"popularity"===e?(B("popularity"),void M.track(ue,{element:63})):void Ae._super.onNavigationAction.apply(this,arguments)},onRemoveUsers_:function(e){if(e&&e.length){this.removeUsers_(e),this.connectionsView_.setEditMode(!1);var t,i=this.getSelectedFilter_().activationPlace;e.forEach(function(e){M.track(de,{encrypted_user_id:e,activation_place:i,mode_connection:6})}),G.isOnline()||(t=this.savedRemoveUserIds).push.apply(t,(0,p.default)(e));var n=[P.getInstance().removeUsers({activationPlace:i,folderId:31,ids:e})];this.getSelectedFilter_().folderType===P.TYPES.FAVOURITES&&n.push(P.getInstance().removeUsers({activationPlace:this.getSelectedFilter_().activationPlace,folderId:4,ids:e,avoidHotpanelTracking:!0})),Promise.all(n).then(this.updateFolderIfEmpty_)}},resendStoredRequests:function(){this.savedRemoveUserIds.length>0&&(this.onRemoveUsers_(this.savedRemoveUserIds.concat([])),this.savedRemoveUserIds=[])},removeUsers_:function(e){var t=this;e.forEach(function(e){t.userIds_[e]=!1,y.removeItem(e),I.invalidate(e),t.userSubstitutes_[e]&&V.reportEventDismiss({promoCard:t.userSubstitutes_[e].contentModePromoCards[0],context:26})})},getSelectedFilter_:function(){return Ie[this.selectedFilterIndex_]},onStartSearch_:function(){this.searchText_=null,this.inSearch_=!0,this.previousFilterIndex_=this.selectedFilterIndex_,this.setFilter_(g.findIndex(Ie,function(e){return"chats"===e.param})),C.hide(),M.track(Ee,{element:90})},onSearch_:function(e){this.searchFolder_.cancel(),e.length<3?(null===this.searchText_&&this.connectionsView_.showLoading(),this.connectionsView_.update({folderIsEmpty:!0})):(this.connectionsView_.showLoading(),this.searchText_=e,this.searchFolder_())},onResetSearch_:function(){M.track(ue,{element:96,parentElement:90}),this.searchText_=null},onCancelSearch_:function(){this.inSearch_=!1,this.setFilter_(this.previousFilterIndex_||0),this.previousFilterIndex_=NaN,this.searchText_=null,C.show(),this.fetchFolder_(),M.track(ue,{element:51,parentElement:90})},onNeedPage_:function(){this.loading_||this.fetchFolder_({shouldGetNextPage:!0})},trackScroll:function(e){var t=y.getItems();M.track(me,{direction:5,element:this.getElementType_(),reached_end:e>t.length-1,position:e})},onItemVisible_:function(e){var t=e.getOriginFolder();this.visibleUserIds_[t]||(this.visibleUserIds_[t]=[]),-1===this.visibleUserIds_[t].indexOf(e.getUserId())&&this.visibleUserIds_[t].push(e.getUserId()),this.readItems_.push(e)},markPeopleViewed_:function(){var e=this;Object.keys(this.visibleUserIds_).forEach(function(t){var i=e.visibleUserIds_[t];P.getInstance().markPeopleViewed({context:22,folderId:Number(t),peopleIds:i},!0)}),this.visibleUserIds_={}},onBannerVisible_:function(e){var t,i,n,a;t=e.getPromoBlock?e.getPromoBlock():e,i=t&&t.getPromoBlockType&&t.getPromoBlockType(),n=t&&t.getPromoBlockPosition&&t.getPromoBlockPosition(),a=function(e){var t=e&&e.getPromoBlockType&&e.getPromoBlockType(),i=e&&e.getContext&&e.getContext();if(!i)switch(t){case 21:i=127}return i}(t),ie.isValid(i)&&M.track(fe,{banner_id:i,position_id:n,context:a})},getDataFromNotice_:function(e){var t=[];return e.forEach(function(e){if(e&&e.getFolder&&e.getIntValue){var i=e.getFilterDisplayValues();i&&i.forEach(function(i){t.push({folder:e.getFolder(),value:i.getIntValue(),filter:i.getFilter()})}),t.push({folder:e.getFolder(),value:e.getIntValue()})}}),t},onBadgeChanged_:function(e){var t=this.getDataFromNotice_([e]);this.emptyPromo_&&this.fetchFolder_({preventLoading:!0}),this.connectionsView_.update({updatedBadges:t})},onBadgeInvalidated_:function(){N.fetch()},updateUser_:function(e,t,i,n){this.connectionsView_.updateUser(e,t,i,n,Boolean(this.isFrozen_))},removeUser_:function(e){-1!==y.findIndex(e)?(this.userIds_[e]=!1,y.removeItem(e),this.connectionsView_.updateList(),this.updateFolderIfEmpty_()):this.log.error("Connections - Removing a user which doesnt exist in our connections (userIds value is ".concat(this.userIds_[e],")"))},updateFolderIfEmpty_:function(){0===y.getUsers().length&&this.fetchFolder_()},setFilter_:function(e){if(Ie[e]||(e=0),e!==this.selectedFilterIndex_){var t=Ie[e];this.selectedFilterIndex_=e,this.activationPlace=t.activationPlace,this.folderId_=t.model.folderId,t.screenName&&(this.screenName=t.screenName),this.connectionsView_.update({selectedFilterIndex:this.selectedFilterIndex_}),t&&t.folderType===P.TYPES.WANT_TO_MEET_YOU&&J.isActive()?B("liked-you"):B("connections",!0,{filter:Ie[e].param}),this.inSearch_?(!this.folderSupportsSync_()&&this.folderSyncActive_||this.inSearch_)&&this.disableFolderSync_():this.enableFolderSync_()}},clearFolderSyncVariables_:function(){this.sortTimestamp_=null,this.updateTimestamp_=null,this.mostRecentSortTimestamp_=null,this.lastUserIdForwards_=null,this.lastUserIdBackwards_=null},updateFrozenList_:function(){this.unfreeze_(),this.fetchFolder_()},fetchFolder_:function(e){var t=this;this.loading_=!0;var i=(e=e||{}).shouldGetNextPage;if(i)this.connectionsView_.showNextPageLoading();else{e.preventLoading||this.connectionsView_.showLoading();var n=y.getControllers();g.each(n,function(e){t.removeController(e.object.name)})}this.fetchFolderRequest_(i).then(function(e){var n=(0,h.default)(e,1)[0];t.onFolderResult_({shouldGetNextPage:i,previousFilterIndex:t.selectedFilterIndex_,clientUserList:n})}).catch(this.onFolderError_),this.fetchBanners_()},fetchBanners_:function(){var e=this,t=this.banners_.getShownPromoBlocks();this.folderSupportsSync_()&&this.banners_.fetch({shownPromoBlocks:t}).then(function(t){var i=(0,h.default)(t,1)[0];e.banners_.setPromoBlocks({promos:i.getPromoBlocks([])}),e.banners_.appendBanners(),e.connectionsView_.updateList()})},fetchFolderRequest_:function(e){e||(this.clearFolderSyncVariables_(),this.offset_=0,this.emptyPromo_=null,this.banners_.reset(),Y.destroy(Y.placements.CONNECTIONS));var t={promoBlockRequestParams:[{shownPromoBlocks:this.banners_.getShownPromoBlocks(),position:1,count:2},!e&&{position:8,count:1}].filter(Boolean)};this.folderSupportsSync_()?(e?(t.sortTimestamp=this.sortTimestamp_,this.lastUserIdBackwards_&&(t.lastUserId=this.lastUserIdBackwards_)):t.sortTimestamp=0,t.direction=1):t.offset=this.offset_;var i=g.extend(t,Se,this.getSelectedFilter_().model);return this.previousFilterIndex_>-1&&(i.search=this.searchText_),P.getInstance().fetch(i,!0,!0)},backOnline:function(e){this.resendStoredRequests(),this.folderSyncActive_&&e&&e.then(this.fetchFolderUpdates_.bind(this))},fetchFolderUpdates_:function(){var e=this;if(!this.loading_&&!this.inSearch_&&this.folderSupportsSync_()&&!this.isFrozen_)if(this.updateTimestamp_){this.loading_=!0;var t={direction:2,includeTransient:!1,updateTimestamp:this.updateTimestamp_};this.lastUserIdForwards_&&(t.lastUserId=this.lastUserIdForwards_);var i=g.extend(t,Se,this.getSelectedFilter_().model);P.getInstance().fetch(i,!0,!0).then(function(t){var i=(0,h.default)(t,1)[0];e.isFrozen_||e.onFolderResult_({previousFilterIndex:e.selectedFilterIndex_,clientUserList:i,isUpdates:!0})}).catch(this.onFolderError_)}else this.fetchFolder_()},folderSupportsSync_:function(){var e=this.getSelectedFilter_().model.hasOwnProperty("activityFilter"),t=E.getSync(Ce[this.getSelectedFilter_().folderType]);return t&&t.getFolderConfig()&&t.getFolderConfig().getSyncSupported()&&!e},setTimestamps_:function(e,t,i){var n=e.getSortTimestamp();if((!this.mostRecentSortTimestamp_||n>this.mostRecentSortTimestamp_)&&(this.mostRecentSortTimestamp_=n),i||!t){var a=e.getUpdateTimestamp();(!this.updateTimestamp_||a>this.updateTimestamp_)&&(this.updateTimestamp_=a)}i||(!this.sortTimestamp_||n<this.sortTimestamp_)&&(this.sortTimestamp_=n)},fetchPopularity_:function(){var e=this;T.getInstance().get({id:v.getUserId(),clientSource:127,requestedFields:[690]}).then(function(t){e.connectionsView_.update({popularityLevel:t.getPopularityLevel()}),K.hasTooltipsToSee(e.clientSource)&&e.showNextOnboardingTooltip_()})},onFolderResult_:function(e){var t=this,i=e.shouldGetNextPage,o=e.previousFilterIndex,s=e.clientUserList,r=e.isUpdates;if(this.isStarted()){if(o===this.selectedFilterIndex_){var l=this.getSelectedFilter_();i||r||(this.userIds_={},null!==this.searchText_?M.track(pe,{num_results:s&&s.getTotalCount()||0,activation_place:210}):(M.track(Ee,{element:this.getElementType_()}),l&&l.folderType===P.TYPES.COMBINED_CONNECTIONS_ALL&&M.track(ve,{num_admirers_unread:a(6),num_favourited_you_unread:a(4),num_matches_unread:a(15),num_visited_you_unread:a(8),total_unread:a(0)})));var c=this.folderSupportsSync_();c||r||this.banners_.setPromoBlocks({promos:s.getPromoBanners([])});var u=[];this.banners_.process({items:u,clientUserList:s,shouldGetNextPage:i,isActive:this.isActive(),isUpdates:r});var d=null;s.getSection([]).forEach(function(e){t.addUserSubstitutes_(e.getUserSubstitutes([]));var n=e.getUsers([]).filter(function(e){return!t.userIds_[e.getUserId()]&&!e.getIsRemoved()});if(c&&n.sort(function(e,t){return t.getSortTimestamp()-e.getSortTimestamp()}),r){n=n.filter(function(e){return e.getSortTimestamp()>=t.mostRecentSortTimestamp_});var a=e.getUsers([]).filter(function(e){return t.userIds_[e.getUserId()]}),o=a.filter(function(e){return e.getIsRemoved()&&e.getUserId()});t.removeUsers_(o);var s=a.filter(function(e){return!e.getIsRemoved()});y.getItems().length>0&&y.updateUsers(s)}n.forEach(function(e){t.setTimestamps_(e,i,r),t.userIds_[e.getUserId()]=!0}),t.banners_.processUsers({items:u,users:n}),c||(t.offset_+=n.length),d=e.getSectionType(),r||(t.lastBlock_=e.getLastBlock())}),c&&r?this.lastUserIdForwards_=s.getLastUserId():c&&(this.lastUserIdBackwards_=s.getLastUserId()),this.emptyPromo_=!i&&g.find(s.getPromoBanners(),function(e){return 13===e.getPromoBlockPosition()||20===e.getPromoBlockPosition()});var h=s.getFiltersConfig(),p=Boolean(h&&h.getAutoOpen());this.connectionsView_.updateAutoOpenFilters(p);var m,_,f,E=this.emptyPromo_&&20===this.emptyPromo_.getPromoBlockPosition();if(this.sendStats_=h.getSendStats()&&!E,this.sendStats_&&this.sendFolderFilterStats(!0),this.emptyPromo_)this.connectionsView_.update({folderIsEmpty:this.emptyPromo_,filters:h?h.getFilters():[]}),m=this.emptyPromo_,_=l&&l.folderType,f=n(m.getPromoBlockType(),_),M.track(Ee,{element:f}),Y.render();else{null!==this.searchText_&&(this.isLastBlock=!0),this.getController("update_connections").setFilterIndex(l&&l.model.folderId);var b=v.getUser().getHasSpp();r?y.addUpdates(this.banners_.prependBanner(u)):(y.addPage(u,!i),this.banners_.appendBanners());var k=this.connectionsView_;k.update({hideEditButton:!b&&8===d,hasMore:!this.lastBlock_,shouldGetNextPage:i,hasItems:u.length>0,filters:h?h.getFilters():[],selectedFilterIndex:this.selectedFilterIndex_,isUpdates:r}),i||r||k.setEditMode(!1),this.jinba.stop()}this.connectionsView_.hideLoading(),this.loading_=!1,Y.render(),this.readyForVrt(),U(this,"Connections interactive")}}else this.loading_=!1},handleAdsEnabledChange_:function(){v.isLoggedIn()&&this.fetchFolder_()},onFolderError_:function(e){if(this.connectionsView_.hideLoading(),this.loading_=!1,this.isStarted())if(e&&g.isFunction(e.getType)&&e.getType()===_.ErrorType.OFFLINE)this.log.error("Fetching connections while offline");else if(!q.handleError({error:e,screenName:this.getScreenName(),navigationBar:this.getNavigationBarContext()}))throw e},onToggleFilter_:function(e,t){if(e){var i=t?8:3;M.track(ue,{element:94,parentElement:this.getElementType_()}),M.track(Ee,{element:94}),M.track(ge,{gesture:i,activation_place:this.activationPlace}),this.sendStats_&&this.sendFolderFilterStats(!1)}},onSelectFilter_:function(e){this.searchText_=null,this.markPeopleViewed_(),this.setFilter_(e),this.fetchFolder_(),0!==e&&M.track(ue,{element:this.getElementType_(),parentElement:94})},editModeCancelled_:function(){this.enableFolderSync_()},promoVideoSeen_:function(){},enableFolderSync_:function(){!this.folderSyncActive_&&this.folderSupportsSync_()&&(this.folderSyncActive_=!0,this.getController("update_connections").on(k.EVENTS.ACTIVITY,this.fetchFolderUpdates_,this),j.getInstance().on(j.Type.SYSTEM_NOTIFICATION,this.onSystemNotification_,this),E.on(E.EVENTS.UPDATE,this.onFeatureUpdate_,this))},disableFolderSync_:function(){this.folderSyncActive_&&(this.folderSyncActive_=!1,this.getController("update_connections").off(k.EVENTS.ACTIVITY,this.fetchFolderUpdates_,this),j.getInstance().off(j.Type.SYSTEM_NOTIFICATION,this.onSystemNotification_,this),E.off(E.EVENTS.UPDATE,this.onFeatureUpdate_,this))},onSystemNotification_:function(e){var t=e.getId();21===t?this.fetchFolderUpdates_():25===t&&this.onUserIdExchanged_(e.getPreviousId(),e.getCurrentId())},onFeatureUpdate_:function(e){19===e.getFeature()&&this.fetchFolderUpdates_()},onBlockingAction_:function(e){var t=e.promoBlock,i=e.buttonIndex,n=this.getSelectedFilter_();this.trackBlockingScreenClick(t,n&&n.folderType,i||0),this.handlePromoBlock_(t,i||0)},onSelectItem_:function(e,t){var i=99;e instanceof ne&&(e.getIsConversation()?i=11:e.getIsCrush()?i=18:e.getFavouritedYou()?i=9:e.getIsInvisible()?i=93:6===e.getOriginFolder()?i=5:e.getIsMatch()?i=354:e.getIsVisitor()?i=6:e.getIsFavourite()&&(i=13)),Z.generate(),M.track(ue,{element:i,parentElement:this.getElementType_(),position:t}),this.handleItem_(e)},handleItem_:function(e){if(e instanceof ne){var t=e.getUserId(),i=this.userSubstitutes_[t];if(i){if(function(e){e&&M.track(le,(0,d.default)({},e.hotpanelData,{context:127}))}(i.connectionPromoCard),i.connectionPromoCard&&i.connectionPromoCard.showOnTap)return void B("promo-cards-gallery",{userSubstitute:i,context:26})}else M.track(ce,{activation_place:this.getActivationPlace_(),encrypted_user_id:t});if(e.getIsInvisible())B("invisible-explanation",{promoBlock:this.banners_.getInvisiblePromo().toJSON(),activationPlace:106});else if(e.hasProfileBlockerPromo()){var n=e.getProfileBlockerPromo();120===n.getOkAction()?this.revealUser_(e):this.handlePromoBlock_(n)}else this.chatWithUser_(e)}else if(e instanceof ae){if(function(e,t){var i=function(e){switch(e.getPromoBlockType()){case 131:return 10;case 129:return 100;case 130:return 101;case 165:return 14}}(e);i&&M.track(ue,{element:i,parentElement:t||97})}(e,this.getElementType_()),o(e,1),129===e.getPromoBlockType()&&1===e.getPromoBlockPosition()&&2===e.getStatsVariationId())return void B("liked-you");if(326===e.getPromoBlockType()&&1===e.getPromoBlockPosition())return void x.getInstance().get(e.getOkPaymentProductType(),v.getUserId(),null,this.clientSource,e.getPromoBlockType()).then(function(e){var t=(0,h.default)(e,1)[0].getPromo();B("get-more-likes",{promoBlock:t.toJSON()})});if(e.hasRedirectPage()){var a=e.getRedirectPage().getRedirectPage(),s=Number(g.findKey(Ne,function(e){return e===a})),r=g.findIndex(Ie,{folderType:s});-1!==r&&(this.setFilter_(r),this.fetchFolder_())}this.handlePromoBlock_(e)}},revealUser_:function(e){var t=this,i=e&&e.getUserId();P.getInstance().revealUser({personId:i,folderId:this.getSelectedFilter_().folderType}).then(function(e){var n=(0,h.default)(e,1)[0],a=n&&n.getSection();if(a){var o=(0,h.default)(a,1)[0],s=o&&o.getUsers(),r=(0,h.default)(s,1)[0];t.replaceRevealedUser_(i,r&&r.getUserId())}else t.log.error("Error revealing user: Server did not return any sections")}).catch(function(e){t.log.error("Error revealing user:",e),A.showNotification({type:A.TYPES.ERROR})})},replaceRevealedUser_:function(e,t){var i=this;return this.fetchFolderRequest_().then(function(n){var a=(0,h.default)(n,1)[0],o=a&&a.getSection(),s=(0,h.default)(o,1)[0],r=s&&s.getUsers(),l=r&&r.find(function(e){return e.getUserId()===t});if(l){var c=y.findIndex(e),u=y.get(c);u&&(u.object=l,y.replaceItem(u,c),i.connectionsView_.updateList())}})},handlePromoBlock_:function(e,t){e.getPromoBlockType||this.log.error("I cannot handle the promo block after block action because getPromoBlockType is not a function",{typeOfPromoBlock:typeof e,promoBlock:e}),this.unfreeze_();var i=e.getButtons([])[t],n=i?i.getAction():e.getOkAction(),a=i?i.getRedirectPage():e.getRedirectPage(),o=e.getPromoBlockType();this.forceFetch_=165===o;var s=(new O).setAction(n).setRedirectPage(a).setProductType(e.getOkPaymentProductType()).setPromoBlockType(o).setPromoBlock(e).setBack(L()).setHotPanelData({activationPlace:this.getActivationPlace_()});12===o&&s.setCallback(this.fetchFolder_.bind(this)),F.handleAction(s)},chatWithUser_:function(e){var t=e.getOriginFolder(),i=Ne[t];e.setIsUnread(!1).setUnreadMessagesCount(0),this.connectionsView_.update({updatedItem:e});var n=e.getUserId(),a=this.userSubstitutes_[n];!Number(n)&&n.length<20&&this.log.error("WRONG USER ID: ".concat(n," from chatWithUser_")),B("messages",{chatUser:e,id:e.getUserId(),folderId:t,context:26,clientSource:i,toClientSource:i,fromConnectionsList:!0,userSubstitute:a})},isRemoveFromFolderAction:function(e){var t=this.getSelectedFilter_();return t&&t.folderType===P.TYPES.FAVOURITES&&!e.getFavouritedYou()},onFavourite_:function(e){var t=this,i=y.findIndex(e),n=this.isRemoveFromFolderAction(e);Q.toggleFavouriteStatus(e,function(){n&&t.removeUser_(e.getUserId())}),M.track(he,{action_type:!0===e.getIsFavourite()?6:7,activation_place:this.getActivationPlace_(),encrypted_user_id:e.getUserId()}),M.track(ue,{element:!0===e.getIsFavourite()?85:86,parentElement:this.getElementType_(),position:i})},updateCurrentUser:function(e){if(!this.isRemoveFromFolderAction(e)){var t=y.findIndex(e);this.connectionsView_.update({updatedItem:e,index:t})}},onNewOfflineMessage_:function(e,t){var i=y.findIndex(t);t.setDisplayMessage(e),this.connectionsView_.update({updatedItem:t,index:i})},getElementType_:function(){return null===this.searchText_?this.getSelectedFilter_().elementType:90},getActivationPlace_:function(){return null!==this.searchText_?213:this.getSelectedFilter_().activationPlace},trackHotPanelScreen:function(){},freeze_:function(){this.isFrozen_=!0,this.connectionsView_.toggleUpdateButton(!0),this.disableFolderSync_()},unfreeze_:function(){this.isFrozen_=!1,this.connectionsView_.toggleUpdateButton(!1),this.enableFolderSync_()},sendFolderFilterStats:function(e){new _(278,(new oe).setFolderFilterStats((new se).setEvent(2).setFilterId(this.selectedFilterIndex_).setAutoOpen(e))).request()},showNextOnboardingTooltip_:function(){this.isStarted()&&(this.preventNotifications_(),this.onboardingTipsController_.showNextTooltip()||this.allowNotifications_())},performActionTooltip_:function(e){switch(e){case 8:this.onNavigationAction("popularity")}},preventNotifications_:function(){this.notificationScreenAccess=3;
},allowNotifications_:function(){this.notificationScreenAccess=1},trackBlockingScreenClick:function(e,t,i){e.getPromoBlockType||this.log.error("I cannot track ClickEvent after block action because getPromoBlockType is not a function",{typeOfPromoBlock:typeof e,promoBlock:e});var a=e.getPromoBlockType();Te.includes(a)&&2===e.getButtons([]).length&&void 0!==i&&xe[i]&&o(e,xe[i]);var s=Pe[a];if(s){var r=n(a,t);M.track(ue,{element:s,parentElement:r})}},addUserSubstitutes_:function(e){var t=this;e.forEach(function(e){t.userSubstitutes_[e.getId()]=new V({userSubstitute:e})})},getUserSubstitute:function(e){return this.userSubstitutes_[e]},onUserIdExchanged_:function(e,t){if(void 0!==this.userIds_[e]){this.userIds_[t]=this.userIds_[e],delete this.userIds_[e];var i=y.findIndex(e);if(-1===i)return;var n=y.get(i).object;n.setUserId(t),this.isStarted()&&this.connectionsView_.update({updatedItem:n,index:i})}}},"ConnectionsPage");Ae.FILTERS=Ie,e.exports=Ae},,,,,,,,,,,,,function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="control"><div class="control__error ').x(t.get(["show_error"],!1),t,{block:i},{}).w('">').x(t.get(["error_message"],!1),t,{else:n,block:a},{}).w('</div><div class="control__inputs"><div class="input ').f(t.get(["field_status"],!1),t,"h").w(" ").x(t.get(["field_value"],!1),t,{block:o},{}).w('"><input class="input__field ').f(t.get(["field_extracss"],!1),t,"h").w(" ").x(t.get(["field_focus"],!1),t,{block:s},{}).w('" type="text" value="').f(t.get(["field_value"],!1),t,"h").w('" ').x(t.get(["disabled"],!1),t,{block:r},{}).w(' /><label class="control__label">This is the label</label><div class="input__mask"><span class="input__mask-data">').f(t.get(["mask_data"],!1),t,"h").w('</span><span class="input__mask-stub">').f(t.get(["mask_stub"],!1),t,"h").w("</span></div></div></div></div>")}function i(e,t){return e.w(" show-error ")}function n(e,t){return e.w("This is the error message")}function a(e,t){return e.f(t.get(["error_message"],!1),t,"h")}function o(e,t){return e.w(" has-value ")}function s(e,t){return e.w(" is-focused ")}function r(e,t){return e.w(" disabled ")}return e.register("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="control control--select "><div class="control__inputs"><div class="select ').f(t.get(["field_status"],!1),t,"h").w('"><select class="select__field ').x(t.get(["field_focus"],!1),t,{block:i},{}).w('" ').x(t.get(["disabled"],!1),t,{block:n},{}).w('><option value="Lorem ipsum">Lorem ipsum</option><option value="Dolor sit amet" selected="selected">Dolor sit amet</option><option value="Consectetur adipisicing">Consectetur adipisicing</option><option value="Quasi consectetur numquam">Quasi consectetur numquam</option><option value="Veniam iste">Veniam iste</option><option value="Possimus facere">Possimus facere</option></select>').nx(t.get(["hide_arrow"],!1),t,{block:a},{}).w('<div class="select__surrogate">').x(t.get(["field_value"],!1),t,{else:o,block:s},{}).w("</div>").x(t.get(["field_label"],!1),t,{block:r},{}).w('</div></div><div class="control__error ').x(t.get(["show_error"],!1),t,{block:l},{}).w('">This is the control error message</div></div>')}function i(e,t){return e.w(" is-focused ")}function n(e,t){return e.w(" disabled ")}function a(e,t){return e.w('<span class="select__arrow"></span>')}function o(e,t){return e.w("Dolor sit amet")}function s(e,t){return e.f(t.get(["field_value"],!1),t,"h")}function r(e,t){return e.w('<label class="control__label">').f(t.get(["field_label"],!1),t,"h").w("</label>")}function l(e,t){return e.w(" show-error ")}return e.register("dust-styleguide/styleguide-partials/includes/forms/control--select",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="control control--textarea "><div class="control__inputs"><div class="textarea ').f(t.get(["field_status"],!1),t,"h").w(" ").x(t.get(["field_value"],!1),t,{block:i},{}).w('"><div class="textarea__mirror">').f(t.get(["field_value"],!1),t,"h").w('</div><textarea class="textarea__field ').x(t.get(["field_focus"],!1),t,{block:n},{}).w('" rows="1" ').nx(t.get(["field_label"],!1),t,{block:a},{}).w(" ").x(t.get(["disabled"],!1),t,{block:o},{}).w(">").f(t.get(["field_value"],!1),t,"h").w("</textarea>").x(t.get(["field_label"],!1),t,{block:s},{}).w("</div>").x(t.get(["show_counter"],!1),t,{block:r},{}).w('</div><div class="control__error ').x(t.get(["show_error"],!1),t,{block:l},{}).w('">This is the control error message</div></div>')}function i(e,t){return e.w(" has-value ")}function n(e,t){return e.w(" is-focused ")}function a(e,t){return e.w('placeholder="This is the native placeholder"')}function o(e,t){return e.w(" disabled ")}function s(e,t){return e.w('<label class="control__label">').f(t.get(["field_label"],!1),t,"h").w("</label>")}function r(e,t){return e.w('<div class="textarea__counter" data-qa="textarea-counter">1000 characters</div>')}function l(e,t){return e.w(" show-error ")}return e.register("dust-styleguide/styleguide-partials/includes/forms/control--textarea",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,t}(i(118)))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(100),a=i(122),o=i(103),s=i(102),r=i(238),l=i(121),c=i(2828),u=i(142).PAGE_TRANSITIONS,d=i(148),h=i(105),p=h.ServerCaptchaAttempt,m=h.ServerGetCaptcha,g=i(101),_=g.ClickEvent,f=g.ViewElementEvent,v=g.EnterCaptchaEvent,E=g.ErrorEvent,b=g.ScreenNameEnum,y={signup:66,"onboarding-email":303,"confirm-email":303},k={"phone-verification":c.PRODUCTS.REGISTRATION,"onboarding-email":c.PRODUCTS.NEVER_LOSE_ACCESS,"confirm-email":c.PRODUCTS.NEVER_LOSE_ACCESS,"never-loose-account":c.PRODUCTS.NEVER_LOSE_ACCESS},S=l.extend({transition:u.FORWARD,headerTemplate:null,isStandalone:!1,construct:function(){!1===this.header&&(this.isStandalone=!0),S._super.construct.apply(this,arguments)},init:function(){S._super.init.apply(this,arguments),d(this);var e=this.registerView("captcha",new c({isStandalone:this.isStandalone,product:k[this.getRouteName()]}));e.on(c.ACTIONS.REQUEST_NEW_CAPTCHA,this.onRequestNewCaptcha_),e.on(c.ACTIONS.SUBMIT,this.onSubmitCaptcha_)},onStart:function(){S._super.onStart.apply(this,arguments),s.track(f,{element:468}),this.onParametersUpdate()},onParametersUpdate:function(){var e=this.getParameter("captchaId");if(n.isString(e)&&0!==e.length){var t=this.getParameter("serverError");r({error:t,isExpected:!0}),this.getView("captcha").appendTo(this.parent),this.onRequestNewCaptcha_({uid:e,forceNew:!1})}else o.back()},onRequestNewCaptcha_:function(e){e.isRefresh&&s.track(_,{element:680,parent_element:468}),this.requestData_={uid:e.uid||"",forceNew:!n.isBoolean(e.forceNew)||e.forceNew};var t=new m;t.setUid(this.requestData_.uid),t.setForceNew(this.requestData_.forceNew),new a(340,t).on(341,this.onGetCaptcha_).request()},onGetCaptcha_:function(e,t){this.getView("captcha").update({uid:this.requestData_.uid,imageId:t.getCaptcha().getImageId(),product:k[this.getRouteName()]}),this.readyForVrt()},onSubmitCaptcha_:function(e){s.track(_,{element:395,parent_element:468}),this.attemptData_=e;var t=new p;t.setUid(e.uid),t.setImageId(e.imageId),t.setAnswer(e.answer),new a(342,t).on(343,this.onCaptchaConfirm_).request()},onCaptchaConfirm_:function(e,t){var i=t&&t.getSuccess();if(this.trackEnterCaptchaEvent(i),i){var n=this.getParameter("callback");n&&n(),o.back()}else this.getView("captcha").update({uid:this.attemptData_.uid,imageId:t&&t.getCaptcha().getImageId(),product:k[this.getRouteName()],error:!0}),this.trackErrorEvent()},trackErrorEvent:function(){s.track(E,{event_type:22,field_name:43,error_type:28})},trackEnterCaptchaEvent:function(e){var t=y[this.getRouteName()]||1,i=this.getAbusedField();1!==t&&i&&s.track(v,{activation_place:t,field_name:i,captcha_type:1,is_correct:Boolean(e)})},trackHotPanelScreen:function(){},getScreenName:function(){var e=this.getParameter("screenName");return b.isValid(e)&&204!==e?e:159},getRouteName:function(){var e=this.getParameter("previousLocation");return e&&e.routeName},getAbusedField:function(){var e=this.getParameter("previousLocation");if("signup"===(e&&e.routeName))switch(e&&e.parameters||{}){case"details":return 16;case"phone":return 12}}},"Captcha");e.exports=S},function(e,t,i){"use strict";var n=i(109),a=i(2829),o=i(148),s={REQUEST_NEW_CAPTCHA:"REQUEST_NEW_CAPTCHA",SUBMIT:"SUBMIT"},r=n.extend({className:"captcha-view",events:{"click .js-captcha-reload":"onTryDifferent_","click .js-captcha-action":"onSubmitCaptcha_","click .js-captcha-input":"scrollIntoView_"},init:function(){r._super.init.apply(this,arguments),o(this);var e={isStandalone:this.options.isStandalone,product:this.options.product};return this.$el.append(a.render(e)),this.captchaInput_=this.$el.find(".js-captcha-input"),this.captchaInputRoot_=this.$el.find(".js-input-field-container"),this.imgContainer_=this.$el.find(".js-captcha-image"),this.submitButton_=this.$el.find(".js-captcha-action"),this.errorMsg_=this.$el.find(".js-input-field-error-msg"),this.captchaInput_.on("keyup",this.onInput_),this},update:function(e){return this.uid_=e.uid,e.imageId&&(this.imageUrl_=e.imageId),this.error_=e.error,this.render(),r._super.update.apply(this,arguments)},render:function(){this.submitButton_.removeClass("is-loading"),this.captchaInputRoot_.toggleClass("is-invalid",!0===this.error_),this.errorMsg_.toggleClass("show-error",!0===this.error_),this.captchaInput_.val(""),this.imgContainer_.css({"background-image":"url(".concat(this.imageUrl_,")")}),this.onInput_()},onInput_:function(){var e=this.captchaInput_.val().length>0;this.captchaInputRoot_.toggleClass("has-value",e),e?this.submitButton_.removeAttr("disabled"):this.submitButton_.attr("disabled",!0)},onTryDifferent_:function(){this.trigger(s.REQUEST_NEW_CAPTCHA,{uid:this.uid_,isRefresh:!0})},onSubmitCaptcha_:function(){this.submitButton_.addClass("is-loading"),this.trigger(s.SUBMIT,{uid:this.uid_,imageId:this.imageUrl_,answer:this.captchaInput_.val()})},scrollIntoView_:function(e){e.preventDefault(),e.stopPropagation(),window.scrollTo(0,this.imgContainer_.offset().top-15)}},"Captcha");r.ACTIONS=s,r.PRODUCTS={REGISTRATION:"REGISTRATION",NEVER_LOSE_ACCESS:"NEVER_LOSE_ACCESS"},e.exports=r},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout layout--centered-content ').x(t.get(["isStandalone"],!1),t,{block:i},{}).w('"><div class="layout__content layout__content--vpadded layout__content--hpadded"><div class="form-uniform js-form"><div class="form__title">').h("t",t,{},{k:"212"},"h").w('</div><div class="control control--captcha control--centered"><div class="control__extra"><div class="captcha"><div class="captcha__image js-captcha-image"></div><div class="captcha__reload js-captcha-reload">').h("Icon",t,{},{name:"generic-spinning-arrows",size:"md"},"h").w('</div></div></div><div class="control__error js-input-field-error-msg">').h("t",t,{},{k:"374"},"h").w('</div><div class="control__inputs"><div class="input input--captcha js-input-field-container"><input type="text" id="captcha" name="captcha"class="input__field js-input-field js-captcha-input" maxlength="8" autocomplete="off"autocapitalize="none" autocorrect="off" spellcheck="false"><label for="captcha" class="control__label">').h("t",t,{},{k:"677"},"h").w('</label></div></div></div><div class="form__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("select",t,{block:n},{key:p},"h").w("</div></div></div></div></div></div>")}function i(e,t){return e.w(" layout--with-fake-nav ")}function n(e,t){return e.h("eq",t,{block:a},{value:"REGISTRATION"},"h").h("eq",t,{block:r},{value:"NEVER_LOSE_ACCESS"},"h").h("default",t,{block:u},{},"h")}function a(e,t){return e.h("Button",t,{text:o,block:s},{type:"verification",narrow:t.get(["true"],!1),extraClass:"js-captcha-action"},"h")}function o(e,t){return e.h("t",t,{},{k:"687"},"h")}function s(e,t){return e}function r(e,t){return e.h("Button",t,{text:l,block:c},{type:"never-loose-account",narrow:t.get(["true"],!1),extraClass:"js-captcha-action"},"h")}function l(e,t){return e.h("t",t,{},{k:"687"},"h")}function c(e,t){return e}function u(e,t){return e.h("Button",t,{text:d,block:h},{type:"primary",narrow:t.get(["true"],!1),extraClass:"js-captcha-action"},"h")}function d(e,t){return e.h("t",t,{},{k:"687"},"h")}function h(e,t){return e}function p(e,t){return e.f(t.get(["product"],!1),t,"h")}return e.register("captcha",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(100),a=i(126),o=i(218),s=i(121),r=i(155),l=i(150),c=i(102),u=i(113),d=i(103).navigate,h=s.extend({headerTemplate:null,controllerType:s.TYPES.TRANSITION,onStart:function(){h._super.onStart.apply(this,arguments),l.on(l.EVENTS.AUTH_ERROR,this.navigateDefault_,this);var e=l.getStoredAuthData();return this.getParameter("success")?(o(this.element[0]).show(),e&&e.startImport&&u.isLoggedIn()?(l.removeStoredAuthData(),d(e.returnRoute,!0,n.extend({importPromise:l.startImportProgress(e)},e))):void(e?(this.sendGenericEvent_(e.directReferral),e.provider&&(e.provider=r(e.provider)),l.processOauthState(e,!0)):this.navigateDefault_())):e&&e.returnRoute?d(e.returnRoute,!0,e):this.navigateDefault_()},onStop:function(){h._super.onStop.apply(this,arguments),l.off(l.EVENTS.AUTH_ERROR,this.navigateDefault_,this)},navigateDefault_:function(){d(a.get("default.page"),!0)},sendGenericEvent_:function(e){e&&c.sendGenericEvent(c.GENERIC_EVENTS.DIRECT_FACEBOOK_REFERRAL,{directReferral:e},!0)}},"ExternalProviderLogin");e.exports=h},function(e,t,i){"use strict";var n,a,o=i(5),s=i(102),r=i(101).GenericEventEvent;n=o.supportsEncountersCards,s.track(r,{event_name:"mw_encounters_mode",p1:n?"cards":"legacy"}),a=i(o.supportsEncountersCards?2832:2934),e.exports=a},function(e,t,i){"use strict";var n=i(3),a=n(i(127)),o=n(i(4)),s=i(98),r=i(113),l=i(5),c=i(175),u=i(212),d=i(128),h=i(275),p=i(221),m=i(121),g=i(503),_=i(251),f=i(307),v=i(126),E=i(325),b=i(167),y=i(2835),k=i(326),S=i(405),w=i(2903),C=i(279),T=i(531),P=i(532),N=i(187),I=i(244),x=i(533),A=i(534),O=i(535),V=i(316),R=i(197),B=i(243),L=i(245),F=i(536),M=i(537),D=i(136),U=i(227),j=i(2919),G=i(2922),q=i(298),H=i(105),z=H.NoMoreSearchResults,Y=H.UserSubstitute,$=m.extend({encountersPage:!0,transition:!1,headerTemplate:F,hasRendered_:!1,sessionUser:null,activationPlace:2,clientSource:1,screenName:11,screenOnboardingTips:!0,showTabBar:!0,createElement:function(){return D({className:"encounters",qaAttribute:"encounters"})},construct:function(){var e=this;$._super.construct.apply(this,arguments),this.searchCriteriaController_=new C({onCloseButtonClick:function(){return e.closeFilter_()},onSaveButtonClick:function(){return e.saveFilter_()},onBackButtonClick:function(){return e.handleFilterBackClick_()},searchType:1,activationPlace:this.activationPlace,enableActivityCriteria:!1,enableLocationCriteria:!1,enableDistanceCriteria:!0})},init:function(){$._super.init.apply(this,arguments),l.supportsTabBar&&this.updateNavigationBar({navigationActions:{menu:!1},hasTabbar:!0}),this.noResultsScreen_=T({onExpandFilter:this.searchCriteriaController_.start.bind(this.searchCriteriaController_)});var e=this.view_=this.registerView(new y({el:this.parent.get(0),noResultsScreen:this.noResultsScreen_.element})).on(y.EVENTS.UNDO_VOTE,this.onUndoVote_,this).on(y.EVENTS.VIEW_LIKED_YOU,x);this.actionHandler_=this.registerController("ACTION_HANDLER",new S).on(S.EVENTS.QUOTA_PROCESSING,this.showLoading_,this).on(S.EVENTS.QUOTA_PROCESSED,this.hideLoading_,this),q.hit();var t=q.isActive()?G:w;this.encountersCards_=this.registerController("ENCOUNTERS_CARDS",new t(e.getCardsContainer())).on(t.EVENTS.VOTE,this.onVoteCard_,this).on(t.EVENTS.CRUSH,this.onCrushCard_,this).on(t.EVENTS.EXPAND_PROFILE,this.expandProfile_,this).on(t.EVENTS.SCREEN_NAME_CHANGED,this.screenNameChanged_,this),this.profileController_=this.registerController("PROFILE",new k({reportUserContext:1,parent:e.getProfileContainer()})).on(k.EVENTS.CLOSE,this.collapseProfile_,this).on(k.EVENTS.VOTE,this.onVoteProfile_,this).on(k.EVENTS.CRUSH,this.onCrushProfile_,this).on(k.EVENTS.BLOCKED,this.onBlockProfile_,this).on(k.EVENTS.GALLERY_CLOSE,this.onGalleryClose_,this).on(k.EVENTS.GALLERY_CLICK,this.onGalleryClick_,this),this.invitesController_=this.registerController("INVITES",g.getInstance()).on(g.EVENTS.INTERRUPTING,this.onInviteInterrupt_,this),this.queueManager_=(new P).on(P.EVENTS.NEED_MORE,this.onQueueNeedMore_,this),u.on(u.EVENTS.CHANGE,this.onBadgeChanged_,this),c.getInstance().on(c.EVENTS.INVALIDATED,this.onEncountersInvalidated_,this),this.onboardingTipsController_=this.registerController(U.getInstance()),q.isActive()&&this.onboardingTipsController_.skipVotingTooltip(),this.voteNoCount_=0,this.jinba=new N("Encounters"),this.voteTimer=new N("Encounters/vote")},onNavigationAction:function(e){return e===m.BUTTONS.OPEN_FILTER?(this.onboardingTipsController_&&this.onboardingTipsController_.skipFiltersTooltips(),void this.searchCriteriaController_.start()):void $._super.onNavigationAction.apply(this,arguments)},onStart:function(){var e=this;$._super.onStart.apply(this,arguments),this.view_.isExpanded()||p.show(),this.removeLikedYou_&&(this.removeLikedYou_=!1,this.allowLikedYou_=!1,this.updateLikedYouEntry_(0)),b.getInstance().on(b.Type.NOTIFICATION,this.onNotificationReceived_,this),this.voteGoalProgress=f.get(),f.subscribeOnChange(this.onChangeProgressBar,this),this.buyingCrush_=!1,this.updateNavigationBar({showUndo:!1}),E.start(r),this.view_.showZeroCase(!1),this.hasRendered_||this.noResultsScreen_.clear(),this.showLoading_();var t=h.getInstance().get(h.TYPE.SPOKEN).then(function(e){return e[0]});Promise.all([d.getInstance().get({id:r.getUserId(),clientSource:this.clientSource}),t]).then(function(t){var i=(0,o.default)(t,2),n=i[0],a=i[1];e.sessionUser=n,e.clientLanguages=a,e.encountersCards_.setClientLanguages(a),e.currentProfileData&&(e.currentProfileData.sessionUser=n),e.onParametersUpdate().then(function(){e.isStarted()&&e.showTabBar&&e.encountersCards_.updateLayout()})}),this.invitesController_.updateParameters({returnRoute:"encounters"}),U.hasTooltipsToSee(this.clientSource)&&(this.onboardingTipsController_.setContext(this.clientSource),this.onboardingTipsController_.on(U.ACTIONS.REQUEST_SHOW_TOOLTIP,this.showNextOnboardingTooltip_,this).on(U.ACTIONS.PERFORM_ACTION,this.performActionTooltip_,this).on(U.ACTIONS.TOOLTIP_DISMISSED,this.allowNotifications_,this)),this.matchExplanationModal_&&this.scheduleMatchExplanationModal(this.matchExplanationModal_),this.fetchBadgeCounters_()},onReady:function(){$._super.onReady.apply(this,arguments),this.hasRendered_&&U.hasTooltipsToSee(this.clientSource)&&this.showNextOnboardingTooltip_()},onStop:function(){$._super.onStop.apply(this,arguments),p.hide(),b.getInstance().off(b.Type.NOTIFICATION,this.onNotificationReceived_,this),this.onboardingTipsController_&&this.onboardingTipsController_.off(U.ACTIONS.REQUEST_SHOW_TOOLTIP,this.showNextOnboardingTooltip_,this).off(U.ACTIONS.PERFORM_ACTION,this.performActionTooltip_,this).off(U.ACTIONS.TOOLTIP_DISMISSED,this.allowNotifications_,this),this.searchCriteriaController_.stop(),this.clearUndoVoteTimeout_(),f.unsubscribeFromChange(this.onChangeProgressBar,this)},onParametersUpdate:function(){return this.hasRendered_?(this.hideLoading_(),this.encountersCards_.resetPosition(),this.encountersCards_.updateLayout(),Promise.resolve()):this.loadEncounters_()},getNavigationActions:function(){return{menu:!l.supportsTabBar}},onQueueNeedMore_:function(){this.loading_||this.loadEncounters_()},showLoading_:function(){this.loadingVisualState_=!0,this.view_.showLoading(),this.profileController_.showLoading()},hideLoading_:function(){this.loadingVisualState_=!1,this.view_.hideLoading(),this.profileController_.hideLoading()},loadEncounters_:function(e){var t=this;return this.loading_=!0,Promise.all([c.getInstance().trackNext().get({context:this.clientSource}),E.fetch()]).then(function(i){var n=(0,o.default)(i,1)[0];t.onDataReceived_(e,n),t.loading_=!1},function(e){t.onDataError_(e),t.loading_=!1})},onDataReceived_:function(e,t){var i=this;if(this.isStarted()){if(!t||t instanceof z)return this.noResultsScreen_.setNotMoreSearchResults(t),this.queueManager_.length()||!this.profileController_.isEmpty()&&this.hasRendered_||this.showNoResultsScreen_(),void this.hideLoading_();var n=t.encounters,a=t.isCached,o=t.hasLikedYouEntry,s=n.map(function(e){return e instanceof Y?new L({userSubstitute:e}):new B({activationPlace:i.activationPlace,clientSource:i.clientSource,isCached:a,searchResult:e,sessionUser:i.sessionUser})}),r=this.encountersCards_;if(e){var l=r.getCurrentProfile();l&&l.id!==s[0].id&&s.unshift(l)}this.queueManager_.set(s);var c=this.queueManager_.shift();this.currentProfileData=c,r.updateParameters({firstProfile:c,secondProfile:this.queueManager_.get(0)}),this.profileController_.updateParameters(c),this.setQaAttributes_(c),null!==o&&(this.allowLikedYou_=o),this.fetchBadgeCounters_(),this.view_.showZeroCase(!1),this.hideLoading_(),U.hasTooltipsToSee(this.clientSource)&&this.showNextOnboardingTooltip_(),this.hasRendered_=!0,this.jinba.waitForImage(c.largeProfilePhoto).stop().then(function(){i.readyForVrt(),I(i,"Encounters interactive")})}},onEncountersInvalidated_:function(e){var t=e.fromWatchdog;this.hasRendered_=!1,this.queueManager_.set([]),this.isStarted()?this.loadEncounters_(t):this.allowLikedYou_&&(this.removeLikedYou_=!0,this.allowLikedYou_=!1)},setQaAttributes_:function(e){this.element.attr({"data-qa-user-id":e.id,"data-qa-user-gender":e.gender})},fetchBadgeCounters_:function(){var e=this;u.get().then(function(t){t&&e.updateLikedYouEntry_(t[6])})},updateLikedYouEntry_:function(e){this.updateNavigationBar({likedYou:this.allowLikedYou_&&e>0})},onBadgeChanged_:function(e,t){6===e.getFolder()&&t>0&&(this.allowLikedYou_=e.getIntValue()>0,this.updateLikedYouEntry_(e.getIntValue()))},onVoteCard_:function(e){var t=this,i=e.profileData,n=e.voteResult,a=e.photo,o=e.fromButton;if(!this.loadingVisualState_&&i)if(i instanceof L&&c.getInstance().removeBlockedUser(i.id),i.isAnonymous&&r.isLoggedIn())this.voteTimer.abort();else{this.voteTimer.start(),this.clearUndoVoteTimeout_();var s=this.queueManager_.shift();if(i instanceof L||(3===n&&this.voteNoCount_++,this.updateHeader_(i,n)),_.regenerateId(),this.trackHotPanelScreen(),s){var l=this.queueManager_.get(0);this.sessionUser&&l&&(l.sessionUser=this.sessionUser),this.currentProfileData=l,this.encountersCards_.showNextProfile(l),this.profileController_.updateParameters(s),this.setQaAttributes_(s),this.voteTimer.waitForImage(s.largeProfilePhoto).stop()}else this.hasRendered_=!1,this.encountersCards_.showNextProfile(null),this.profileController_.clear(),this.voteTimer.abort(),this.noResultsScreen_.isEmpty()?this.showLoading_():this.showNoResultsScreen_();i instanceof L||(this.actionHandler_.vote({profileData:i,voteResult:n,photo:a}).catch(function(e){if(t.voteTimer.abort(),t.queueManager_.rollback(),!(e instanceof B))throw e;t.encountersCards_.unshiftProfile(e),t.profileController_.updateParameters(e),t.setQaAttributes_(e)}),A.trackVote(n,i.id,o),M())}},updateHeader_:function(e,t){var i=this,n=e.vote.theirVote,o=O({voteNoCount:this.voteNoCount_,yourVote:t,theirVote:n});o.undoTooltipText&&A.trackUndotooltip(o.missedMatch),this.updateNavigationBar(o),o.undoTooltipText&&(this.clearUndoVoteTimeout_(),this.headerToolTipHideTimeout_=setTimeout(function(){i.updateNavigationBar((0,a.default)({},o,{undoTooltipText:!1}))},5e3))},clearUndoVoteTimeout_:function(){clearTimeout(this.headerToolTipHideTimeout_)},showNoResultsScreen_:function(){this.view_.showZeroCase(!0),this.noResultsScreen_.trackView()},onVoteProfile_:function(e){var t=e.voteResult,i=e.photo,n=e.profileData;this.voteTimer.start(),this.onVoteCard_({profileData:n,voteResult:t,photo:i,fromButton:!0}),window.scrollTo(0,0)},onCrushCard_:function(e){var t=this,i=e.profileData,n=e.photo,a=e.seenExplanationScreen,o=e.fromButton;if(!this.buyingCrush_){this.buyingCrush_=!0;var s=E.isCostRequired()&&!o;s&&this.view_.showFullScreenLoading(),this.actionHandler_.crushVote({profileData:i,photo:n,seenExplanationScreen:a,isFromProfile:o}).then(function(e){if(t.buyingCrush_=!1,s&&t.view_.hideFullScreenLoading(),2===e.vote){var i=function(){t.encountersCards_.voteCrush(n).then(function(){return t.encountersCards_.voteYes(n)})};t.view_.isExpanded()?(t.collapseProfile_({photo:n}),setTimeout(i,300)):i()}},function(){t.buyingCrush_=!1,s&&t.view_.hideFullScreenLoading()}),A.trackVote("crush",i.id,!0)}},onCrushProfile_:function(e){var t=e.photo,i=e.profileData,n=e.seenExplanationSceen;this.onCrushCard_({photo:t,profileData:i,seenExplanationSceen:n,fromButton:!0})},onBlockProfile_:function(){var e=this.queueManager_.shift();this.encountersCards_.showNextProfile(this.queueManager_.get(0)),this.updateNavigationBar({showUndo:!1}),this.profileController_.updateParameters(e),this.setQaAttributes_(e),_.regenerateId(),c.getInstance().removeBlockedUser(e.id),window.scrollTo(0,0)},expandProfile_:function(e){var t=e.photo;this.view_.expandProfile(),this.showTabBar=!1,p.hide();var i=this.profileController_;i.scrollToPhoto(t),i.profileOpened();var n=this.encountersCards_.getCurrentProfile();this.profileController_.updateParameters(n),this.setQaAttributes_(n)},screenNameChanged_:function(e){this.screenName=e||11},collapseProfile_:function(e){var t=e.photo;this.encountersCards_.scrollToPhoto(t),this.showTabBar=!0,p.show(),this.view_.collapseProfile(),this.encountersCards_.updateLayout(),this.updateNavigationBar()},onUndoVote_:function(){var e=this.actionHandler_.undoVote();clearTimeout(this.headerToolTipHideTimeout_),this.view_.showZeroCase(!1),this.encountersCards_.unshiftProfile(e),this.profileController_.updateParameters(e),this.setQaAttributes_(e),this.queueManager_.rollback(),this.updateNavigationBar({showUndo:!1}),A.trackUndo(e)},onDataError_:function(e){var t=this;if(this.isStarted()){var i=R.handleError({error:e,screenName:this.getScreenName(),navigationBar:{logo:!0,actions:this.getNavigationActions()}});if(!i)throw e;i.on(i.EVENTS.REFRESH,function(){return t.loadEncounters_()})}},attachHeaderView_:function(e){e.appendTo(this.view_.getHeaderContainer())},onInviteInterrupt_:function(e){this.actionHandler_.setIsInterrupted(e)},onGalleryClick_:function(e){var t=e.photo,i=r.getUser().getGender();2===i?this.collapseProfile_({photo:t}):1===i&&this.profileController_.showFullscreenGallery()},onGalleryClose_:function(e){var t=e.photo;this.encountersCards_.scrollToPhoto(t)},showNextOnboardingTooltip_:function(e){this.isStarted()&&!this.view_.isExpanded()&&((e=e||{}).voteExplanationWrapper=this.encountersCards_.getVoteExplanationWrapper(),this.preventNotifications_(),this.onboardingTipsController_.showNextTooltip(e)||this.allowNotifications_())},preventNotifications_:function(){this.notificationScreenAccess=3},allowNotifications_:function(){this.notificationScreenAccess=1},performActionTooltip_:function(e){switch(e){case 9:this.onNavigationAction(m.BUTTONS.OPEN_FILTER)}},saveFilter_:function(){var e=this;this.searchCriteriaController_.save().then(function(){e.closeFilter_()})},closeFilter_:function(){this.searchCriteriaController_.stop(),this.trackHotPanelScreen()},updateNavigationBar:function(e){if((e=e||{}).progressBarProgress=null,this.voteGoalProgress){var t=this.voteGoalProgress.progress;e.progressBarProgress=100*this.voteGoalProgress.progress/this.voteGoalProgress.goal,e.showLogo=!1,t>1&&e.progressBarProgress<100&&!this.view_.isExpanded()&&this.onboardingTipsController_.hasToShowTooltipEncountersVoteProgress()&&this.onboardingTipsController_.showTooltipEncountersVoteProgress()}e.hasOwnProperty("showLogo")||(e.showLogo=!0),e.partner_id||(e.partner_id=v.get("partner_id")),$._super.updateNavigationBar.call(this,e)},onChangeProgressBar:function(e){this.voteGoalProgress=e,this.updateNavigationBar()},getScreenName:function(){return this.matchExplanationModalViewId_?618:this.screenName},onNotificationReceived_:function(e){81===e.getType()&&61===e.getPromoBlock().getPromoBlockType()&&this.scheduleMatchExplanationModal(e)},scheduleMatchExplanationModal:function(e){this.matchExplanationModal_=e,setTimeout(this.showMatchExplanationModal.bind(this,e),V.DELAY_SHOW_SCREEN+1e3)},showMatchExplanationModal:function(e){var t=this;this.isStarted_&&(this.matchExplanationModal_=!1,this.matchExplanationModalViewId_=this.renderReactView(s.createElement(j,{notification:e,onClosed:function(){t.removeReactView(t.matchExplanationModalViewId_),t.matchExplanationModalViewId_=null}}),this.view_.getModalWrapper()),this.trackHotPanelScreen())}},"EncountersPage");e.exports=$},function(e,t,i){"use strict";var n,a=i(226),o=i(2834),s=i(470),r={SEND_REQUESTS:"send-requests",KEEP_PLAYING:"keep-playing"},l=a.extend({className:"invites-promo popup-action modal-content",events:{"click .js-send-requests":"onSendRequests_","click .js-keep-playing":"onKeepPlaying_"},update:function(e){e.loading?(this.disable(),this.showLoading()):e.dismiss?(this.hideLoading(),this.dismiss()):e.show&&(e.images&&e.images.length>3&&(e.images=e.images.slice(0,3)),this.$el.html(o.render(e)),this.enable(),this.show())},onSendRequests_:function(){this.trigger(r.SEND_REQUESTS);
},onKeepPlaying_:function(){this.trigger(r.KEEP_PLAYING)},getBackdropType:function(){return s.TRANSPARENT}},"InvitesPromoView");l.getInstance=function(){return n||(n=new l)},l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout layout--centered-content"><div class="layout__content layout__content--vpadded layout__content--hpadded"><div class="cta-box"><div class="cta-box__media"><div class="brick-wrapper brick-wrapper--m-m-m brick-wrapper--padded">').s(t.get(["images"],!1),t,{block:i},{}).w('</div></div><div class="cta-box__header cta-box__header--sm">').f(t.get(["title"],!1),t,"h").w('</div><div class="cta-box__content">').f(t.get(["message"],!1),t,"h",["s"]).w('</div><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{attrs:a,block:o},{type:"primary",text:t.get(["actionText"],!1),extraClass:"js-send-requests"},"h").w('</div><div class="button-wrapper__item">').h("Button",t,{text:s,attrs:r,block:l},{type:"secondary",extraClass:"js-keep-playing"},"h").w("</div></div></div></div></div></div>")}function i(e,t){return e.w('<div class="brick-wrapper__item"><div class="brick brick--stretch" data-qa="brick"><div class="brick__image" style="background-image: url(\'').h("PhotoUrl",t,{},{width:"90",src:t.getPath(!0,[])},"h").w("')\"></div>").x(t.get(["matchStyle"],!1),t,{block:n},{}).w("</div></div>")}function n(e,t){return e.w('<div class="brick__badge brick__badge--bc">').h("Icon",t,{},{name:"badge-feature-liked-you",size:"md",shadow:"true"},"h").w("</div>")}function a(e,t){return e.w('data-id="send-requests"')}function o(e,t){return e}function s(e,t){return e.h("t",t,{},{k:"185"},"h")}function r(e,t){return e.w('data-id="keep-playing"')}function l(e,t){return e}return e.register("invites-promo",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(504),s=i(505),r=i(506),l=i(298),c=a("UNDO_VOTE","VIEW_LIKED_YOU"),u=n.extend({events:{"click .js-undo-vote":"onUndoVote_","click .js-liked-you":"onLikedYou_"},init:function(){u._super.init.apply(this,arguments),this.render(),this.originalClass_=this.el.className},isExpanded:function(){return this.$el.hasClass("is-expanded")},expandProfile:function(){this.$el.addClass("is-expanded")},collapseProfile:function(){this.$el.removeClass("is-expanded")},getCardsContainer:function(){return this.$el.find(".js-encounters-cards")},getProfileContainer:function(){return this.$el.find(".js-encounters-profile")},getHeaderContainer:function(){return this.$el.find(".js-header-container")},onUndoVote_:function(){this.trigger(c.UNDO_VOTE)},onLikedYou_:function(){this.trigger(c.VIEW_LIKED_YOU)},showFullScreenLoading:function(){u._super.showLoading.apply(this)},hideFullScreenLoading:function(){u._super.hideLoading.apply(this)},showLoading:function(){this.cardSkeleton_||(this.cardSkeleton_=s.render(),this.cardSkeleton_.filter(".js-card-container").addClass("is-skeleton").append(r.render({isSkeleton:!0,encountersProfile:l.isActive()}))),this.getCardsContainer().append(this.cardSkeleton_)},hideLoading:function(){this.cardSkeleton_.remove()},render:function(){u._super.render.apply(this,arguments),this.$el.html(o.render()),this.$el.find(".js-no-results-screen").html(this.options.noResultsScreen)},showZeroCase:function(e){this.$el.toggleClass("is-zero-case",e)},getModalWrapper:function(){return this.$(".js-match-explanation-modal").get(0)}},"EncountersView");u.EVENTS=c,e.exports=u},function(e,t,i){"use strict";var n=i(162),a=i(109),o=i(111),s=i(171),r=i(2837),l=o("PROFILE_INFO_OPENED","PROFILE_INFO_CLOSED","PROFILE_INFO_BOTTOM_REACHED","CLOSE"),c=a.extend({className:"",topWasOpen_:null,events:{"click .js-close":"onClose_"},init:function(e){var t=e.showGoogleAds;c._super.init.apply(this,arguments);var i=r.render({googleAd:t});this.$el.html(i)},disable:function(){c._super.disable.apply(this,arguments),this.stopUIEvents_()},enable:function(){c._super.enable.apply(this,arguments),this.startUIEvents_()},update:function(e){var t=e.isOwnProfile;this.getActionsContainer().toggleClass("is-hidden",t),this.getActionsStubContainer().toggleClass("is-hidden",t)},startUIEvents_:function(){this.hasUIEvents_&&this.stopUIEvents_(),n.on(n.EVENTS.SCROLL,this.onScroll_,this),n.on(n.EVENTS.SCROLL_BOTTOM,this.onBottomReached_,this),this.hasUIEvents_=!0},stopUIEvents_:function(){this.hasUIEvents_&&(n.off(n.EVENTS.SCROLL,this.onScroll_,this),n.off(n.EVENTS.SCROLL_BOTTOM,this.onBottomReached_,this),this.hasUIEvents_=!1)},onScroll_:function(){var e=this.$el.find(".js-photo-gallery").offset();e&&(s().scrollTop>parseInt((e.top+e.height)/2,10)?this.topWasOpen_||(this.topWasOpen_=!0,this.trigger(l.PROFILE_INFO_OPENED)):this.topWasOpen_&&(this.trigger(l.PROFILE_INFO_CLOSED),this.topWasOpen_=!1))},onBottomReached_:function(){this.topWasOpen_&&this.trigger(l.PROFILE_INFO_BOTTOM_REACHED)},clear:function(){this.topWasOpen_=null},onClose_:function(){this.trigger(l.CLOSE)},getGalleryContainer:function(){return this.$el.find(".js-photo-gallery")},getInfoContainer:function(){return this.$el.find(".js-profile-info")},getActionsContainer:function(){return this.$el.find(".js-profile-actions")},getActionsStubContainer:function(){return this.$el.find(".js-profile-actions-stub")},getMetaContainer:function(){return this.$el.find(".js-top-meta")},showLoading:function(){this.$el.find(".js-profile-preview").addClass("is-skeleton")},hideLoading:function(){this.$el.find(".js-profile-preview").removeClass("is-skeleton")},showFullScreenLoading:function(){c._super.showLoading.apply(this)},hideFullScreenLoading:function(){c._super.hideLoading.apply(this)}},"SingleProfile");c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("ProfilePreview",function(e){return n.createElement("div",{className:"profile-preview ".concat(e.googleAd?"has-profile-banner":""," js-profile-preview")},n.createElement("div",{className:"layout js-screen-container"},n.createElement("div",{className:"layout__content"},n.createElement("div",{className:"profile-preview__close js-close"},n.createElement(a,{name:"generic-close"})),n.createElement("div",{className:"profile-preview__photos"},n.createElement("div",{className:"js-photo-gallery"}),n.createElement("div",{className:"profile-preview__photos-skeleton"},n.createElement(a,{name:"loading-dots",size:"xlg"})),n.createElement("div",{className:"profile-preview__meta js-top-meta"})),n.createElement("div",{className:"profile-preview__info"},n.createElement("svg",{viewBox:"0 0 550 280",className:"profile-preview__info-skeleton"},n.createElement("rect",{width:"350",height:"40"}),n.createElement("rect",{width:"240",height:"36",y:"70"}),n.createElement("rect",{width:"550",height:"20",y:"140"}),n.createElement("rect",{width:"500",height:"20",y:"180"}),n.createElement("rect",{width:"550",height:"20",y:"220"}),n.createElement("rect",{width:"500",height:"20",y:"260"})),n.createElement("div",{className:"profile-info js-profile-info qa-profile-profile-info-wrapper"})),n.createElement("div",{className:"profile-preview__actions js-profile-actions"}),n.createElement("div",{className:"profile-preview__actions-stub js-profile-actions-stub"},n.createElement("div",{className:"profile-actions"},n.createElement("div",{className:"profile-actions__item"},n.createElement("div",{className:"profile-action-button"})))),e.googleAd?n.createElement("div",{className:"profile-preview__banner js-profile-preview-banner"}):null)))})},function(e,t,i){"use strict";var n=i(2839);e.exports=n},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(2840),s=i(2841),r={width:1,currentPos:0},l=a.extend({currentPos_:r.currentPos,update:function(e){return this.items_=e.items,this.currentPos_=n.isNumber(e.position)?e.position:r.currentPos,this.fps_=new s({numIndicators:e.items.length,visibleIndicators:Math.min(5,e.items.length)}),this.render(e),this},setPosition:function(e){var t=this.items_?this.items_.length-1:0;return e<0?e=0:e>t&&(e=t),e===this.currentPos_?this:(this.currentPos_=e,this.movePaginator_(),this)},render:function(e){var t=n.extend({},e,{currentPos:this.currentPos_});return this.$el.html(o.render(t)),this.movePaginator_(),this},movePaginator_:function(){if(this.fps_){var e,t=this.$(".js-paginator-indicator"),i=this.fps_.scrollTo(this.currentPos_);i.length&&((e=this.currentPos_)===Math.floor(e)&&(this.$(".js-paginator-moving-target > .is-active").removeClass("is-active"),this.$(".js-paginator-indicator:nth-child(".concat(this.currentPos_+1,")")).addClass("is-active")),i.forEach(function(e,i){t[i]&&(t[i].style.opacity=e.opacity)}),this.$(".js-paginator-moving-target").css({transform:"translateY(".concat(i[0].transform/i.length,"%)")}))}},setIsAnimated:function(e){this.$(".js-paginator-moving-target").toggleClass("is-animated",e)},reset:function(){this.height_=r.height,this.currentPos_=r.currentPos,this.update({items:[]})}},"VerticalPaginator");e.exports=l},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("VerticalPaginator",function(e){return n.createElement("div",{className:"gallery-vertical-paginator"},n.createElement("div",{className:"paginator-moving-target js-paginator-moving-target"},e.items.map(function(e,t){return n.createElement("div",{className:"gallery-vertical-paginator__indicator-container trigger-gallery-paginator-icon js-paginator-indicator","data-qa":"paginator",key:t},n.createElement("div",{className:"gallery-vertical-paginator__indicator"},e.video?n.createElement("svg",{viewBox:"0 0 64 64",className:"gallery-paginator-icon"},n.createElement("g",{className:"gallery-paginator-icon__figure",strokeWidth:"6.4",stroke:"currentColor",fill:"transparent"},n.createElement("path",{d:"M50.53 25.4c6.1 3.57 6.04 9.36 0 12.9l-29.9 17.48c-6.1 3.56-11.03.73-11.03-6.37V14.3c0-7.07 4.98-9.9 11.02-6.36l29.9 17.5z"}))):n.createElement("svg",{viewBox:"0 0 64 64",className:"gallery-paginator-icon"},n.createElement("g",{className:"gallery-paginator-icon__figure",strokeWidth:"6.4",stroke:"currentColor",fill:"transparent"},n.createElement("circle",{cx:"32",cy:"32",r:"22.4"})))))})))})},function(e,t,i){"use strict";function n(e){var t=e.numIndicators,i=e.visibleIndicators;this._numIndicators=t,this._visibleIndicators=i}var a=i(2842),o={invisible:0,ready:0,visible:1,current:1};n.prototype={scrollTo:function(e){return function(e,t){if(i=e,i===Math.floor(i))return!1;var i,n=t-2;return a=Math.floor(e),o=n,!!a&&a%o==0;var a,o}(e,this._visibleIndicators)?(this._state=null,this._decimalScrollTo(e)):(this._state||(this._state=this._integerScrollTo(e)),this._state)},_integerScrollTo:function(e){return a({numIndicators:this._numIndicators,visibleIndicators:this._visibleIndicators,selectedIndicator:e}).map(function(e){return{opacity:o[e.state],transform:100*e.index}})},_decimalScrollTo:function(e){var t=Math.floor(e),i=t+1,n=this._integerScrollTo(t),a=this._integerScrollTo(i),o=e-t,s=1-o;return n.map(function(e,t){var i=a[t];return{opacity:e.opacity*s+i.opacity*o,transform:e.transform*s+i.transform*o}})}},e.exports=n},function(e,t,i){"use strict";e.exports=function(e){for(var t,i=e.numIndicators,n=e.selectedIndicator,a=e.visibleIndicators,o=[],s=a-2,r=function(e){var t=e.selectedIndicator,i=e.offset,n=e.numIndicators;if(!i)return i;t===n-1&&(t-=1);var a=t/i,o=Math.floor(a),s=o;return o===a&&(s-=1),s<0&&(s=0),-i*s}({selectedIndicator:n,offset:s,numIndicators:i}),l=0;l<i;l++){var c=l+r;t=c<0?c>=-s?"ready":"invisible":c>=a?c<a+s?"ready":"invisible":l===n?"current":"visible",o.push({state:t,index:l+r})}return o}},function(e,t,i){"use strict";var n=i(25),a=i(100),o=i(131),s=i(171),r=i(109),l=i(162),c=50,u={TOUCH_START:"touch-start",TOUCH_MOVE:"touch-move",TOUCH_END:"touch-end",SCROLL_TO_POSITION:"scroll-to-position",SCROLL_TO_CHILD:"scroll-to-child",SCROLL_ON_EDGE:"scroll-on-edge",SCROLL_TO_CHILD_END:"scroll-to-child-end"},d={FORWARD:"forward",BACKWARD:"backward",NONE:"none"},h={TOP:"top",BOTTOM:"bottom"},p=r.extend({$el:null,innerContainer_:null,children_:null,childrenId_:null,touch_:null,closest_:null,closestPrev_:null,active_:null,activeIndex_:0,position_:0,height_:0,delta_:0,index_:0,scrollCallback_:null,activeStyleName_:"",currX_:0,currY_:0,preventScrollCallbacks_:!1,isTouchStarted_:!1,didMove_:!1,events:{touchstart:"onTouchStart_",touchmove:"onTouchMove_",touchend:"onTouchEnd_"},init:function(){var e=this;this.childrenId_={},this.children_=[],this.onTouchStart_=this.onTouchStart_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onScrollToChildEnd_=this.onScrollToChildEnd_.bind(this),this.resizeHandler_=function(){return e.updateLayout()}},onEnable:function(){this.updateLayout(),l.on(l.EVENTS.RESIZE,this.resizeHandler_)},onDisable:function(){l.off(l.EVENTS.RESIZE,this.resizeHandler_)},setActiveStyleName:function(e){return this.activeStyleName_=e,this},setScrollCallback:function(e,t){return this.scrollCallback_=e.bind(t),this},updateLayout:function(e,t){return this.height_=this.$el.offset().height,this.setChildren_(),this.closest_&&(this.selectChild(this.closest_.index,t),this.scrollToChild_(this.closest_,t)),e&&this.onScrollToChildEnd_(),this.updateActiveStyle_(this.closest_||this.children_[0]),this},getItems:function(){return this.children_},selectNext:function(){this.selectChild((this.closest_?this.closest_.index:0)+1,!0)},selectPrev:function(){this.selectChild((this.closest_?this.closest_.index:this.children_.length)-1,!0)},selectChildById:function(e){this.selectChild(this.childrenId_[e])},selectChild:function(e,t){var i=this.children_[e];i&&(this.index_=e,this.scrollToChild_(i,t))},setChildren_:function(){var e=this.el.offsetTop;if(this.children_.length=this.$el.children().length||0,this.children_.length){this.children_=a.map(this.$el.children(),function(t,i){var n=t.getAttribute("data-id");return{el:t,id:n,index:i,position:t.offsetTop-e,height:t.offsetHeight}}),this.childrenId_=a.reduce(this.children_,function(e,t){return e[t.id]=t.index,e},{});var t=this.children_.length-1,i=this.children_[t];this.max_=i.position}},scrollToChild_:function(e,t){this.closest_=e;var i=this.$el;t&&(i.addClass("is-animated"),this.trigger(u.SCROLL_TO_CHILD)),this.scrollToPosition_(-e.position),t?o.onTransitionEnd(i[0],this.onScrollToChildEnd_.bind(this)):this.preventScrollCallbacks_=!1,this.updateActiveStyle_(this.closest_)},onScrollToChildEnd_:function(){this.$el.removeClass("is-animated"),this.trigger(u.SCROLL_TO_CHILD_END),this.scrollCallback_&&this.closest_&&this.scrollCallback_(this.closest_),this.preventScrollCallbacks_=!1},updateActiveStyle_:function(e){this.active_!==e&&this.activeStyleName_&&(this.active_&&n(this.active_.el).removeClass(this.activeStyleName_),e&&(n(e.el).addClass(this.activeStyleName_),this.active_=e))},scrollToPosition_:function(e){var t=this.$el;if(!t)return!1;this.position_=e;var i=e;e>0?i=e/2:e<=-this.max_&&(i=(e+this.max_)/2-this.max_),t.css({transform:"translate3d(0, ".concat(i,"px, 0)")});var n=this.children_.length?this.children_.length-1:0,a=this.children_[n].height;this.trigger(u.SCROLL_TO_POSITION,-this.position_/(this.max_+a)*this.children_.length)},findClosest:function(e,t){if(this.children_&&this.children_.length){t<0?e-=this.height_:t>0&&(e+=this.height_);for(var i=this.children_[0],n=Math.abs(i.position-e),a=1;a<this.children_.length;a++)Math.abs(this.children_[a].position-e)<n&&(i=this.children_[a],n=Math.abs(i.position-e));return i}},onTouchStart_:function(e){var t=n.os.supportsTouch?e.touches[0]:e;this.distX_=this.startX_=this.currX_=0,this.distY_=this.startY_=this.currY_=0,this.pointX_=t.pageX,this.pointY_=t.pageY,this.didMove_=!1,this.scrollBlocked_=!1,this.resetPermanentBlock_&&(this.scrollPermanentlyBlocked_=!1,this.resetPermanentBlock_=!1),this.closest_&&(this.closestPrev_=this.closest_,this.activeIndex_=this.closest_.index),this.isTouchStarted_=!0,this.touchPrevented_=!1,this.trigger(u.TOUCH_START)},onTouchMove_:function(e){if(!this.isTouchStarted_)return this.isTouchStarted_=!1,void this.onTouchStart_(e);var t=n.os.supportsTouch?e.touches[0]:e,i=t.pageX-this.pointX_,a=t.pageY-this.pointY_;this.currX_+=i,this.currY_+=a,this.pointX_=t.pageX,this.pointY_=t.pageY;var o=this.currX_-this.startX_,r=this.currY_-this.startY_;if(this.updateStateAndDetermineIfPreventAnimation_(o,r))this.touchPrevented_=!0;else{this.distX_=o,this.distY_=r;var l=s().scrollTop;a>0&&0===l&&e.preventDefault();var c=this.position_===-this.max_&&a<=0;c?(this.scrollToPosition_(this.position_+a),this.scrollBlocked_=!0,this.trigger(u.SCROLL_ON_EDGE,c?h.BOTTOM:h.TOP)):(e.preventDefault(),this.delta_=a,this.scrollToPosition_(this.position_+a));var d=this.getClosestIndex_(this.distX_)||this.activeIndex_;this.updateActiveStyle_(this.children_[d]),this.trigger(u.TOUCH_MOVE)}},updateStateAndDetermineIfPreventAnimation_:function(e,t){return!(!this.scrollBlocked_&&!this.scrollPermanentlyBlocked_&&(this.didMove_||(this.movingVertically_=Math.abs(e)<Math.abs(t)),this.didMove_=!0,this.movingVertically_))},onTouchEnd_:function(){this.preventScrollCallbacks_=!0,this.isTouchStarted_=!1;var e=this.getClosestIndex_(this.distY_);this.selectChild(e,!this.touchPrevented_),this.trigger(u.TOUCH_END,e),this.scrollBlocked_=!1},moveStarted_:function(e,t){var i=this.didMove_;return this.didMove_||(i=Math.sqrt(e*e+t*t)>7),i},getIndex:function(){return this.index_},blockScrolling:function(){this.scrollPermanentlyBlocked_=!0},enableScrolling:function(){this.resetPermanentBlock_=!0},getClosestIndex_:function(e){var t=function(e){var t=e<0;return t&&e<-c?d.FORWARD:!t&&e>c?d.BACKWARD:d.NONE}(e),i=this.index_||0;if(t===d.BACKWARD)for(var n=e,a=i-1;a>=0;a--){var o=this.children_[a];if((n-=o.height)<c||0===o.index){i=o.index;break}}else if(t===d.FORWARD)for(var s=-e,r=i+1;r<this.children_.length;r++){var l=this.children_[r];if((s-=l.height)-c<c){i=l.index;break}}return i}},"VerticalStickyScroll");p.EVENTS=u,p.DIRECTIONS=d,p.EDGE=h,e.exports=p},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(509),s=i(510),r=i(511),l=i(512);e.exports=i(108)("Gallery",function(e){return n.createElement("div",{className:"slider-gallery js-slider-gallery"},n.createElement("div",{className:"slider-gallery__pages js-sticky-scroller js-scrollable"},e.wrap.map(function(t,i){return n.createElement("div",{className:"slider-gallery__page ".concat(t.active?"is-active":""),"data-id":t.id,key:i},t.item.map(function(t,c){return n.createElement(n.Fragment,{key:c},t.photo&&n.createElement("div",{className:"multimedia ".concat(t.isRestricted?"is-restricted":""),"data-slide-index":t.photo.index,"data-id":t.photo.id},n.createElement("div",{className:"multimedia__image js-item-photos","data-src":t.photo.url,style:{backgroundPosition:t.photo.position},"data-id":t.photo.id}),t.photo.isPrivateGranted?n.createElement("div",{className:"multimedia__icon multimedia__icon--br"},n.createElement(a,{name:"generic-lock-opened",size:"md"})):null,n.createElement("div",{className:"multimedia__loader is-hidden js-item-photos-loader"},n.createElement("div",{className:"loading-dots small grey ".concat(t.photo.relative?"":"loading-dots--centered"," ").concat(t.photo.extraClass)},n.createElement("div",{className:"first dot"}),n.createElement("div",{className:"second dot"}),n.createElement("div",{className:"third dot"})))),t.video&&n.createElement("div",{className:"multimedia ".concat(t.isRestricted?"is-restricted":""," ").concat(t.video.blocker?"multimedia--add-video js-video-blocker":""," js-photo"),"data-slide-index":t.video.index,"data-id":t.video.id},n.createElement("div",{className:"multimedia__image js-item-photos",style:{backgroundPosition:t.video.position},"data-src":t.video.url,"data-id":t.video.id}),n.createElement("video",{className:"multimedia-video js-video","webkit-playsinline":"true",playsInline:!0,preload:"none",src:t.video.src,"data-src":t.video.url,loop:!0}),n.createElement("div",{className:"multimedia__play js-video-play","data-id":t.video.id},n.createElement(a,{name:"generic-media-play"})),n.createElement("div",{className:"multimedia__icon ".concat(t.video.isProcessing?"is-loading":""," js-video-sound-action")},n.createElement("div",{className:"multimedia__icon-loader"},n.createElement(a,{name:"loading-dots"})),n.createElement("div",{className:"multimedia__icon-content ".concat(e.soundOn?"is-active":""," js-video-sound")},n.createElement("div",{className:"js-video-sound-on ".concat(e.soundOn?"":"hidden")},n.createElement(a,{name:"generic-media-volume-on",size:"md",supportsRtl:!0})),n.createElement("div",{className:"js-video-sound-off ".concat(e.soundOn?"hidden":"")},n.createElement(a,{name:"generic-media-volume-off",size:"md",supportsRtl:!0})))),t.video.blocker&&n.createElement("div",{className:"multimedia__content"},n.createElement(o,t.video.blocker)),n.createElement("div",{className:"multimedia__loader is-hidden js-item-photos-loader"},n.createElement("div",{className:"loading-dots small grey ".concat(t.video.relative?"":"loading-dots--centered"," ").concat(t.video.extraClass)},n.createElement("div",{className:"first dot"}),n.createElement("div",{className:"second dot"}),n.createElement("div",{className:"third dot"})))),t.blockerPrivate&&n.createElement("div",{className:"multimedia multimedia--private-photos"},n.createElement("div",{className:"multimedia__image",style:{backgroundImage:"url('".concat(t.blockerPrivate.url,"')"),backgroundPosition:t.blockerPrivate.position}}),n.createElement("div",{className:"multimedia__content"},n.createElement(s,t.blockerPrivate))),t.blockerExternalPhotos&&n.createElement("div",{className:"multimedia multimedia--external-photos"},n.createElement("div",{className:"multimedia__image",style:{backgroundImage:"url('".concat(t.blockerExternalPhotos.url,"')"),backgroundPosition:t.blockerExternalPhotos.position}}),n.createElement("div",{className:"multimedia__content"},n.createElement(r,t.blockerExternalPhotos))),t.blockerAutoImport&&n.createElement("div",{className:"multimedia multimedia--auto-import"},n.createElement("div",{className:"multimedia__image js-item-photos","data-src":t.blockerAutoImport.url,"data-id":t.blockerAutoImport.id}),n.createElement("div",{className:"multimedia__content"},n.createElement(l,t.blockerAutoImport))),t.blockerUpsell&&n.createElement("div",{className:"multimedia multimedia--upsell-gift"},n.createElement("div",{className:"multimedia__content"},n.createElement("div",{className:"cta-box cta-box--compact cta-box--inherited"},n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"multimedia-upsell__icon"},n.createElement("img",{src:t.blockerUpsell.image,alt:""}))),n.createElement("div",{className:"cta-box__header triggered-hide"},t.blockerUpsell.header),n.createElement("div",{className:"cta-box__content triggered-hide"},t.blockerUpsell.message),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"button button--inherited button--stroke button--narrow js-action js-touchable qa-button js-upsell-gift-action"},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},t.blockerUpsell.actionText))))))))),t.blockerUpsellCrush&&n.createElement("div",{className:"multimedia multimedia--upsell-crush"},n.createElement("div",{className:"multimedia__content"},n.createElement("div",{className:"cta-box cta-box--compact cta-box--inherited"},n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"multimedia-upsell__icon","data-qa-icon-name":"upsell-crush-icon"},n.createElement("svg",{viewBox:"0 0 64 64"},n.createElement("path",{d:"M13.73 37.53a8.53 8.53 0 0 0-13.4 9.15C2.46 54.12 15.05 60.6 19.94 59.2c4.89-1.4 12.13-13.58 10-21.01a8.56 8.56 0 0 0-16.21-.66zM54.2 24.12a6.72 6.72 0 0 0-12.63-1.93c-2.77 5.43 1 15.93 4.57 17.75 3.57 1.82 14.27-1.3 17.04-6.74a6.74 6.74 0 0 0-8.98-9.08zM20.5 6.97a4.48 4.48 0 0 0-7.99 2.96c.15 4.05 5.73 8.95 8.4 8.86 2.67-.1 7.9-5.37 7.76-9.43a4.5 4.5 0 0 0-8.17-2.4z"})))),n.createElement("div",{className:"cta-box__header"},t.blockerUpsellCrush.header),n.createElement("div",{className:"cta-box__content"},t.blockerUpsellCrush.message),t.blockerUpsellCrush.pointer?n.createElement(n.Fragment,null,t.blockerUpsellCrush.creditsCost&&n.createElement("div",{className:"cta-box__additional"},t.blockerUpsellCrush.creditsCost),n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"multimedia-upsell__crush-pointer"},n.createElement("svg",{viewBox:"0 0 100 100",className:"is-flipped"},n.createElement("path",{d:"M75.18 89.41l3.07-.84a47 47 0 0 0 3.4-.63c1.2-.22 2.32-.5 3.31-.89 1.29-.39 2.57-.84 3.86-1.36.44-.17.73-.46.92-.78 1.31 1.32 3.2-.36 2.67-1.9a1.36 1.36 0 0 0-.22-.68l-2.84-4.1a29.14 29.14 0 0 0-3.52-5.09l-3.84-5.54c-1.09-1.57-3.4-.55-3.2 1.03a1.5 1.5 0 0 0-.06 1.76c2.1 3.28 4.37 6.4 6.77 9.44 0 .25-.02.5-.08.73-8.95-2.53-15.53-9.61-21.07-17.04C58.55 55.74 53 48 51.05 38.37c-.28-1.41-2.3-.96-2.4.32l-.15 1.83c-.03.35.2.61.49.75 1.8 10.46 9.23 19.85 15.73 27.95 5.02 6.27 10.95 11.51 18.3 14.06-.42.22-.86.43-1.33.6l-1.3.23c-1.25.26-2.46.64-3.66 1.07-1.11.2-2.15.36-2.97.5-1.57.28-1.54 2.46-.39 3.13.34.52.96.84 1.81.6z"}))))):n.createElement(n.Fragment,null,n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"button button--inherited button--stroke button--narrow js-action js-touchable qa-button js-upsell-crush-action"},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},t.blockerUpsellCrush.button)))))),t.blockerUpsellCrush.creditsCost&&n.createElement("div",{className:"cta-box__additional"},t.blockerUpsellCrush.creditsCost))))),t.placeholder&&n.createElement("div",{className:"multimedia multimedia--placeholder-image","data-slide-index":"0"},t.placeholder.isFemale?n.createElement(a,{name:"avatar-placeholder-female",size:"stretch"}):n.createElement(a,{name:"avatar-placeholder-male",size:"stretch"})),0===i&&n.createElement("div",{className:"js-vote-explanation"}))}))})))})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106),s=i(509),r=i(510),l=i(511),c=i(512);e.exports=i(108)("FullscreenGallery",function(e){return n.createElement("div",{className:"photo-viewer js-photo-viewer"},n.createElement("div",{className:"slider-gallery js-slider-gallery"},n.createElement("div",{className:"slider-gallery__pages js-sticky-scroller js-scrollable"},e.wrap.map(function(e,t){return n.createElement("div",{className:"slider-gallery__page ".concat(e.active?"is-active":""),"data-id":e.id,key:t},e.item.map(function(e,t){return n.createElement(n.Fragment,{key:t},e.photo?n.createElement("div",{className:"multimedia","data-slide-index":e.photo.index,"data-id":e.photo.id},n.createElement("div",{className:"multimedia__image js-item-photos","data-src":e.photo.url,"data-id":e.photo.id}),n.createElement("div",{className:"multimedia__loader is-hidden js-item-photos-loader"},n.createElement("div",{className:"loading-dots small grey ".concat(e.photo.relative?"":"loading-dots--centered"," ").concat(e.photo.extraClass)},n.createElement("div",{className:"first dot"}),n.createElement("div",{className:"second dot"}),n.createElement("div",{className:"third dot"})))):null,e.video&&n.createElement("div",{className:"multimedia ".concat(e.video.blocker?"multimedia--add-video js-video-blocker":""," ").concat(e.video.isProcessing?"is-processing":""," js-photo"),"data-slide-index":e.video.index,"data-id":e.video.id},n.createElement("div",{className:"multimedia__image js-item-photos","data-src":e.video.url,"data-id":e.video.id}),n.createElement("video",{className:"multimedia-video js-video","webkit-playsinline":"true",playsInline:!0,preload:"none",src:e.video.src,"data-src":e.video.url,loop:!0}),e.video.isProcessing?a.get(357):n.createElement("div",{className:"multimedia__play js-video-play","data-id":e.video.id},n.createElement(o,{name:"generic-media-play"})),e.video.blocker&&n.createElement("div",{className:"multimedia__content"},n.createElement(s,e.video.blocker)),n.createElement("div",{className:"multimedia__loader is-hidden js-item-photos-loader"},n.createElement("div",{className:"loading-dots small grey ".concat(e.video.relative?"":"loading-dots--centered"," ").concat(e.video.extraClass)},n.createElement("div",{className:"first dot"}),n.createElement("div",{className:"second dot"}),n.createElement("div",{className:"third dot"})))),e.blockerPrivate?n.createElement("div",{className:"multimedia multimedia--private-photos js-private-photos ".concat(e.blockerPrivate.isOwnProfile?"js-private-photos-action":""),"data-id":"private_photo_blocker"},n.createElement("div",{className:"multimedia__image js-item-photos","data-src":e.blockerPrivate.url,"data-id":e.blockerPrivate.id}),n.createElement("div",{className:"multimedia__content"},n.createElement(r,e.blockerPrivate))):null,e.blockerExternalPhotos&&n.createElement("div",{className:"multimedia multimedia--external-photos"},n.createElement("div",{className:"multimedia__image js-item-photos","data-src":e.blockerExternalPhotos.url,"data-id":e.blockerExternalPhotos.id}),n.createElement("div",{className:"multimedia__content"},n.createElement(l,e.blockerExternalPhotos))),e.blockerAutoImport&&n.createElement("div",{className:"multimedia multimedia--auto-import"},n.createElement("div",{className:"multimedia__image js-item-photos","data-src":e.blockerAutoImport.url,"data-id":e.blockerAutoImport.id}),n.createElement("div",{className:"multimedia__content"},n.createElement(c,e.blockerAutoImport))))}))}))),n.createElement("div",{className:"js-photo-actions-wrapper"}))})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106);e.exports=i(108)("PhotoActions",function(e){return n.createElement("div",{className:"photo-actions js-photo-actions"},n.createElement("div",{className:"photo-actions__section"},e.photoCoachingData&&n.createElement("div",{className:"photo-action photo-action--transparent js-coaching-button"},n.createElement("i",{className:"icon-emoji icon-emoji--".concat(e.photoCoachingIcon," icon-emoji--lg")}),e.photoCoachingData.explanation&&n.createElement("div",{className:"tooltip tooltip--with-blocker ".concat(e.showCoachingExplanation?"tooltip--complex":""," ").concat(e.showTooltip?"is-visible":"is-invisible"," js-photo-coaching-explanation"),"data-coaching-status":e.photoCoachingData.explanation.status},n.createElement("div",{className:"tooltip_"},n.createElement("div",{className:"tooltip__content"},n.createElement("div",{className:"cta-box cta-box--compact"},n.createElement("div",{className:"cta-box__media"},n.createElement("i",{className:"icon-emoji icon-emoji--".concat(e.photoCoachingIcon," icon-emoji--xlg")})),n.createElement("div",{className:"cta-box__header cta-box__header--xsm"},e.photoCoachingData.explanation.header),n.createElement("div",{className:"cta-box__content"},e.photoCoachingData.explanation.mssg),!e.showCoachingExplanation&&e.photoCoachingData.explanation.ok_action?n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"button button--transparent js-action js-touchable qa-button js-action-button","data-action-type":e.photoCoachingData.explanation.ok_action},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},e.photoCoachingData.explanation.action)))))):null)),e.showCoachingExplanation?n.createElement("div",{className:"tooltip__content"},n.createElement("div",{className:"photo-coaching-explanation"},n.createElement("div",{className:"photo-coaching-explanation__item"},n.createElement("div",{
className:"photo-coaching-explanation__item-icon"},n.createElement("i",{className:"icon-emoji icon-emoji--heart-eyes"})),n.createElement("div",{className:"photo-coaching-explanation__item-label"},a.get(439))),n.createElement("div",{className:"photo-coaching-explanation__item"},n.createElement("div",{className:"photo-coaching-explanation__item-icon"},n.createElement("i",{className:"icon-emoji icon-emoji--blush"})),n.createElement("div",{className:"photo-coaching-explanation__item-label"},a.get(440))),n.createElement("div",{className:"photo-coaching-explanation__item"},n.createElement("div",{className:"photo-coaching-explanation__item-icon"},n.createElement("i",{className:"icon-emoji icon-emoji--confused"})),n.createElement("div",{className:"photo-coaching-explanation__item-label"},a.get(442))))):null))),e.unlockIcon?n.createElement("div",{className:"photo-action photo-action--transparent"},n.createElement("i",{className:"icon-emoji icon-emoji--unlock icon-emoji--lg"})):null,e.soundControl?n.createElement("div",{className:"photo-action ".concat(e.isProcessing?"is-loading":""," js-video-sound-action")},n.createElement("div",{className:"photo-action__loader"},n.createElement(o,{name:"loading-dots"})),n.createElement("div",{className:"photo-action__content ".concat(e.soundOn?"is-active":""," js-video-sound")},n.createElement("div",{className:"js-video-sound-on ".concat(e.soundOn?"":"hidden")},n.createElement(o,{name:"generic-media-volume-on",size:"md",supportsRtl:!0})),n.createElement("div",{className:"js-video-sound-off ".concat(e.soundOn?"hidden":"")},n.createElement(o,{name:"generic-media-volume-off",size:"md",supportsRtl:!0})))):null),n.createElement("div",{className:"photo-actions__section"},e.photoCoachingData&&e.photoCoachingData.explanation&&e.photoCoachingData.explanation.ok_action?n.createElement("div",{className:"photo-action js-action-button","data-action-type":e.photoCoachingData.explanation.ok_action},n.createElement("div",{className:"photo-action__label"},e.photoCoachingData.explanation.action)):null,e.showMenu?n.createElement("div",{className:"photo-action js-menu-button"},n.createElement(o,{name:"generic-ellipsis",size:"md"}),n.createElement("div",{className:"tooltip tooltip--tr tooltip--with-blocker is-invisible js-menu-tooltip"},n.createElement("div",{className:"tooltip_"},n.createElement("div",{className:"tooltip__content"},n.createElement("div",{className:"photo-action__menu"},e.showMakeDefault?n.createElement("div",{className:"photo-action__menu-item ".concat(e.isDefaultActive?"is-active":""," js-touchable js-photo-action-make-default")},n.createElement("div",{className:"photo-action__menu-icon"},n.createElement(o,{name:"generic-photo-default"})),n.createElement("div",{className:"photo-action__menu-label"},e.isDefaultActive?a.get(436):a.get(434))):null,e.showMakePrivate?n.createElement("div",{className:"photo-action__menu-item js-touchable js-photo-action-make-private"},n.createElement("div",{className:"photo-action__menu-icon"},n.createElement(o,{name:"generic-lock-opened"})),n.createElement("div",{className:"photo-action__menu-label"},a.get(435))):null,n.createElement("div",{className:"photo-action__menu-item js-touchable js-photo-action-delete"},n.createElement("div",{className:"photo-action__menu-icon"},n.createElement(o,{name:"generic-trash"})),n.createElement("div",{className:"photo-action__menu-label"},a.get(46)))))))):e.deleteButton?n.createElement("div",{className:"photo-action js-photo-action-delete"},n.createElement(o,{name:"generic-trash",size:"md"})):null))})},function(e,t,i){"use strict";var n=i(100),a=i(226),o=i(514),s=n.extend(a.ACTIONS,{NEXT:1}),r={REPORT:"report",BLOCK:"block",CANCEL:"cancel",DELETE:"delete"},l=a.extend({className:"",events:{"click .js-action":"onAction_"},onAction_:function(e,t){this.dismiss(),this.trigger(s.NEXT,t.getAttribute("data-button"))},getContentElement:function(){return o.render({BUTTONS:r})},getTitleElement:function(){return null},show:function(){l._super.show.apply(this,arguments),this.$el.parent().removeClass("modal-container").addClass("modal-wrapper")}},"BlockOptions");l.ACTIONS=s,l.BUTTONS=r,e.exports=l},function(e,t,i){"use strict";function n(e,t){return{photo:e,album:t,private:Boolean(t.getAccessType())}}function a(e){if(e){if(1===e.externalProviderType)return 34;if(12===e.externalProviderType)return 35;var t=K[e.coachingStatus],i=e.insideCoachingTooltip;return i&&t?t:i?45:void 0}}function o(e){return 8===e.album.getAccessLevel()?77:76}function s(e){k.track(F,{element:e,parentElement:42})}function r(e){k.track(j,{action_type:e,activation_place:244})}var l,c,u=i(3),d=u(i(4)),h=u(i(107)),p=i(100),m=i(124),g=i(129),_=i(103),f=i(99),v=i(146),E=i(200),b=i(111),y=i(150),k=i(102),S=i(225),w=i(389),C=i(214),T=i(161),P=i(175),N=i(140),I=i(128),x=i(2849),A=i(219),O=i(508),V=i(395),R=i(113),B=i(101),L=B.ClickButtonEvent,F=B.ClickEvent,M=B.DeletePhotoEvent,D=B.DeleteVideoEvent,U=B.EndVideoEvent,j=B.PhotoSetPrivateEvent,G=B.PlayVideoEvent,q=B.ScrollElementEvent,H=B.ViewProfileVideoEvent,z=B.ViewElementEvent,Y=B.ViewScreenEvent,$=E.getInstance("GALLERY"),W={CLICK:"CLICK",CRUSH:"CRUSH",EXPAND_PROFILE:"EXPAND_PROFILE",GALLERY_SLIDE_CHANGE:"GALLERY_SLIDE_CHANGE",PLAY_VIDEO:"PLAY_VIDEO",SHARE:"SHARE"},K=(l={},(0,h.default)(l,0,43),(0,h.default)(l,3,48),(0,h.default)(l,4,47),(0,h.default)(l,5,50),(0,h.default)(l,6,44),(0,h.default)(l,7,49),l),Q=(c={},(0,h.default)(c,30,2),(0,h.default)(c,2,0),c),X=i(397),Z=V.TYPES,J=b("FULLSCREEN","VERTICAL"),ee=g.extend({allowViewPhotos_:!0,viewPhotosAction_:null,isOwnProfile_:null,photos_:null,index_:0,albumType:2,albumTypeIds_:null,activationPlace:9,blockersState_:null,screenName:12,scrollDirection_:5,upSell_:null,userId_:null,init:function(){this.reset(),this.createView(),ee._super.init.apply(this,arguments)},createView:function(){var e=function(e){switch(e){case J.FULLSCREEN:return O;default:return V}}(this.layout),t=V.ACTIONS,i=V.EVENTS,n=this.parent?this.parent[0]:null;this.pageView_=this.registerView(new e({el:n}).on(t.ADD_PHOTOS,this.addPhotos_,this).on(t.ADD_VIDEO,this.addVideo_,this).on(t.CLICK,this.click_,this).on(t.CRUSH,this.crush_,this).on(t.DELETE_PHOTO,this.deletePhoto_,this).on(t.MAKE_PRIVATE,this.makePrivate_,this).on(t.MENU_CLICK,this.menuClick_,this).on(t.PLAY_VIDEO,this.playVideo_,this).on(t.REPLACE,this.replace_,this).on(t.REQUEST_ACCESS_PRIVATE_PHOTOS,this.requestAccessPrivatePhotos_,this).on(t.SEND_GIFT,this.sendGift_,this).on(t.SET_PROFILE,this.setProfile_,this).on(t.SHARE,this.share_,this).on(t.SHOW_PRIVATE_PHOTOS,this.showPrivatePhotos_,this).on(t.UPLOAD_EXTERNAL_PHOTOS,this.uploadExternalPhotos_,this).on(i.PLAY_BUTTON_CLICKED,this.onPlayButtonClicked_,this).on(i.SCROLL_BOTTOM_EDGE,this.onScrollBottomEdge_,this).on(i.SCROLL_CHANGE,this.onScrollChange_,this).on(i.SLIDE_TYPE_CHANGED,this.onSlideTypeChanged_,this).on(i.VIDEO_BLOCKER_DISMISSED,this.onVideoBlockerDismissed_,this).on(i.VIDEO_BLOCKER_SHOWN,this.onVideoBlockerShown_,this))},updateLayout:function(){this.getActiveGallery().updateLayout()},onScrollBottomEdge_:function(){},onStart:function(){S.get("fetch_user")&&(this.invalidateCache_(),S.remove("fetch_user"))},addPhotos_:function(e){var t={button_name:51},i=a(e);i&&(t.screen_option=i),s(41),k.track(L,t),this.navigateToAddPhotosPage_({screenName:this.screenName,activationPlace:this.activationPlace})},addVideo_:function(e){var t=e.photo.getId();$.put(this.userId_,{selectedPhoto:t},6e5),function(e){var t=o(e),i={button_name:116};t&&(i.screen_option=t),k.track(L,i)}(e),s(26);var i={activationPlace:29,albumType:this.albumType,allAlbums:!0,limit:3,providerContext:7,providerType:12};y.startImport(p.extend(i,{returnRoute:v.encodeRoute("external-provider-albums",i)})),S.set("fetch_user",1)},click_:function(e){var t=e.photoIndex;!this.allowViewPhotos_&&t>Q[this.viewPhotosAction_]?this.onAllowViewPhotoClick_():this.trigger(W.CLICK)},crush_:function(){this.trigger(W.CRUSH),k.track(F,{element:381})},deletePhoto_:function(e){var t=this.getCurrentGalleryPhoto_();if(t&&this.isOwnProfile_){var i=this.getDeleteConfirmPopupView_(),n=this.getDeleteConfirmMsg_(t);i.update({message:n}),this.trackPhotoDelete({actionType:1,eventData:e,galleryPhoto:t})}},makePrivate_:function(e){if(this.getCurrentPhoto()&&this.isOwnProfile_){var t=a(e),i=this.getPrivateConfirmPopupView_(),n=2===this.userGender_?f.get(438):f.get(437);i.update({message:n});var o={button_name:102};t&&(o.screen_option=t),k.track(L,o),r(1)}},playVideo_:function(e){if(e.played){var t={video_id:e.id};this.activationPlace_&&(t.activation_place=this.activationPlace_),this.userId_&&(t.encrypted_user_id=this.userId_),k.track(G,t)}else k.track(U,{video_id:e.id,encrypted_user_id:this.userId_,sound:0!==this.getActiveGallery().getVolume()})},menuClick_:function(){k.track(L,{button_name:1})},replace_:function(e){var t=this.getCurrentGalleryPhoto_();if(t&&this.isOwnProfile_){var i=a(e),n={button_name:52};i&&(n.screen_option=i),k.track(L,n),this.trackPhotoDelete({actionType:1,eventData:e,galleryPhoto:t}),this.navigateToAddPhotosPage_({photoToReplace:t.photo.getId(),activationPlace:41})}},requestAccessPrivatePhotos_:function(e){p.isObject(e)&&(w.getInstance().getAccess(this.userId_).then(this.onAlbumAccessReceived_.bind(this)),s(27))},setProfile_:function(e){if(this.getCurrentPhoto()&&this.isOwnProfile_){var t=f.get(199),i=a(e);this.getSetProfileImageView_().update({message:t});var n={button_name:103};i&&(n.screen_option=i),k.track(L,n)}},share_:function(){_.navigate("share-profile",{imageId:this.getCurrentPhoto().getId(),returnRoute:_.getUrl(),userId:this.userId_})},sendGift_:function(){var e={back:_.getUrl(),id:this.userId_},t=v.getRouteFromRedirectPage(this.upSell_.getRedirectPage(),e);_.navigate(t,e),k.track(L,{button_name:34}),s(23)},isCurrentSlideCrushUpsell:function(){var e=this.getActiveGallery(),t=e.getCurrentSlideIndex();return e.getSlideType(t)===X.BLOCKER_CRUSH_UPSELL},showPrivatePhotos_:function(){_.navigate("private-photos")},uploadExternalPhotos_:function(e){var t=a(e),i=34===t?25:24,n={activationPlace:this.isOwnProfile_?9:29,albumType:this.albumType,allAlbums:!0,limit:3,providerContext:2,providerType:e.externalProviderType};n.returnRoute=v.encodeRoute("external-provider-albums",n),y.startImport(n),S.set("fetch_user",1),s(i);var o={button_name:48};t&&(o.screen_option=t),k.track(L,o)},onPlayButtonClicked_:function(){k.track(L,{button_name:96})},onScrollChange_:function(e,t){this.handleSlideChange_(e,t),this.trackSlideEvent_(e)},onSlideTypeChanged_:function(e){e.index===this.getActiveGallery().getCurrentSlideIndex()&&this.trigger(W.GALLERY_SLIDE_CHANGE,{type:e.type,index:e.index})},onVideoBlockerDismissed_:function(e){!function(e){var t=o(e),i={button_name:47};t&&(i.screen_option=t),k.track(L,i)}(e)},onVideoBlockerShown_:function(e){!function(e){var t=o(e),i={};t&&(i.screen_option=t),k.track(Y,i)}(e)},blockScrolling:function(){this.getActiveGallery().blockScrolling()},onError_:function(e){this.log.error("Error performing gallery action",e),m.showNotification({type:m.TYPES.ERROR})},createGalleryPhotosFromSingleAlbum_:function(e){var t=e.getPhotos();return function(e){return 11===e.getAlbumType()}(e)?p.map(t,function(t){var i=n(t,e);return i.blocker=e.getAlbumBlocker(),i}):p.map(t,function(t){return n(t,e)})},createGalleryPhotosFromMultipleAlbums_:function(e){return p(e).map(this.createGalleryPhotosFromSingleAlbum_).flatten().value()},currentPhotoViewed:function(){var e=this.getActiveGallery(),t=e.getCurrentSlideIndex(),i=e.getItem(t),n=e.getSlideType(t);if(n===X.VIDEO)k.track(H,{encrypted_user_id:this.userId_,video_id:i.video.id});else{var a;switch(n){case X.BLOCKER_UPSELL:a=23;break;case X.ADD_PRIVATE_PHOTOS:case X.BLOCKER_PRIVATE:a=27;break;case X.BLOCKER_EXTERNAL_PHOTOS:a=1===i.externalProviderType?25:24;break;case X.VIDEO_BLOCKER:a=26;break;case X.ADD_PHOTOS:a=41}a&&k.track(z,{element:a})}},enableScrolling:function(){this.getActiveGallery().enableScrolling()},invalidateCache_:function(){C.getInstance().invalidate(this.userId_),I.getInstance().invalidate(this.userId_),N.getInstance().invalidate(),P.getInstance().invalidate(),T.invalidate()},isShowingPrivatePhotosOverlay_:function(){return!1},getActiveGallery:function(){return this.pageView_||this.createView(),this.pageView_},getCurrentPhoto:function(){var e=this.getCurrentGalleryPhoto_();return e?e.photo:null},getCurrentGalleryPhoto_:function(){return this.getActiveGallery().getCurrentPhoto()},getCurrentSlideIndex:function(){return this.index_||0},getExternalPhotoBlockers_:function(e){return 20===this.accessLevel_||this.isOwnProfile_?[]:C.getInstance().getExternalPhotoBlockers(e)},getSetProfileImageView_:function(){return this.getView("set-photo")||this.registerView("set-photo",new A).on(A.ACTIONS.YES,this.setDefaultCurrentImage_,this)},mapPrivatePlaceholderData_:function(e,t){if(!(e=p.isArray(e)?e[0]:e))return{privatePhotosCount:null,level:null,message:"",url:""};var i=!this.isOwnProfile_&&p.isFunction(e.getErrorMessage);return{privatePhotosCount:t?t.getCountOfPhotos():null,level:e.getLevel(null),message:i?e.getErrorMessage():"",url:e.getUrl("")}},hasVideos_:function(){return p.some(this.photos_,function(e){return e.photo.hasVideo()})},setCurrentSlideIndex:function(e){this.index_=p.isNumber(e)?e:this.getCurrentSlideIndex()},handleSlideChange_:function(e,t){var i=this.getActiveGallery().getSlideType(e);this.setCurrentSlideIndex(e),this.trigger(W.GALLERY_SLIDE_CHANGE,{type:i,index:e}),this.onSlideView_(t)},scrollToPhoto:function(e){var t=e&&e.getId();this.setCurrentSlideIndex(t?Math.max(p.findIndex(this.photos_,function(e){return e.photo.getId()===t}),0):0),this.getActiveGallery().scrollToItem(this.index_)},setAlbumType:function(e){return this.albumType=e,this},setDefaultCurrentImage_:function(){var e=this;C.getInstance().setAsDefault(this.getCurrentPhoto().getId()).then(function(t){var i=(0,d.default)(t,1)[0];i.getSuccess()?e.invalidateCache_():m.showNotification({type:m.TYPES.ERROR,text:i.getErrorMessage()})}).catch(function(t){return e.onError_(t)})},setFeatureProps_:function(e){this.allowViewPhotos_=e.getEnabled(),this.viewPhotosAction_=this.allowViewPhotos_?null:e.getRequiredAction(),this.viewPhotosUrl_=this.allowViewPhotos_?null:e.getUrl()},setRestrictedByFeature_:function(e){if(this.allowViewPhotos_)this.removeRestrictedClasses_();else{var t=(this.getView("photo-block-overlay")||this.registerView("photo-block-overlay",new x)).update(e).getElement(),i=Q[e.getRequiredAction()];this.updateMainGallery({carouselOverlayContent:this.allowViewPhotos_?null:t[0],carouselOverlayThreshold:i},!0)}},shouldDisplayPrivatePlaceholder_:function(e){return!(20===this.accessLevel_||e&&4===e.getAccessLevel()||e&&(e.getPhotos()||!e.getCountOfPhotos()))},updateMainGallery:function(e,t){t&&(e.currentSlideIndex=this.getCurrentSlideIndex()),this.setCurrentSlideIndex(e.currentSlideIndex),this.getActiveGallery().update(e),this.setCurrentSlideIndex(this.getActiveGallery().getCurrentSlideIndex())},getPrivatePlaceholderData_:function(e){return w.getInstance().getAccessLevel(this.userId_).then(this.onPrivateAlbumDataReceived_.bind(this,e))},onAlbumAccessReceived_:function(){var e=this;R.isLoggedIn()&&this.getPrivatePlaceholderData_(this.profileData_.privateAlbum).then(function(t){e.updateMainGallery({privatePlaceholderData:t},!0)})},onFeature_:function(e){1===e.getFeature()&&(this.setFeatureProps_(e),this.setRestrictedByFeature_(e))},onSlideView_:function(e){this.currentPhotoViewed(e)},onPrivateAlbumDataReceived_:function(e,t){return this.mapPrivatePlaceholderData_(t,e)},onConfirmDelete_:function(){var e=this,t=this.getCurrentGalleryPhoto_(),i=t.photo;return i&&i.getVideo()&&k.track(D,{video_id:i.getId(),is_deleted:!0}),this.trackPhotoDelete({actionType:2,galleryPhoto:t}),C.getInstance().deletePhoto(i.getId()).then(function(t){var i=(0,d.default)(t,1)[0];return e.onPhotoDeleted_(i)}).catch(function(t){return e.onError_(t)})},onPhotoDeleted_:function(){var e=this.hasVideos_(),t=this.getCurrentSlideIndex();this.photos_.splice(t,1);var i=Math.min(t,Math.max(0,this.photos_.length-1));this.updateMainGallery({currentSlideIndex:i,isDirty:!0,photos:this.photos_}),e&&!this.hasVideos_()&&I.getInstance().invalidateAll(),this.invalidateCache_()},onCancelDelete_:function(){var e=this.getCurrentGalleryPhoto_(),t=e.photo;t&&t.getVideo()&&k.track(D,{video_id:t.getId(),is_deleted:!1}),this.trackPhotoDelete({actionType:5,galleryPhoto:e})},reset:function(){this.albumTypeIds_=[this.albumType],this.photos_=[],this.userId_=null,this.setCurrentSlideIndex(0),this.pageView_&&this.pageView_.reset()},removeRestrictedClasses_:function(){this.updateMainGallery({carouselOverlayContent:null,carouselOverlayThreshold:1/0},!0)},navigateToAddPhotosPage_:function(e){var t=this;e=e||{};var i={albumType:this.albumType,callback:function(){return t.invalidateCache_()},feature:15};e.activationPlace&&(i.replaceActivationPlace=e.activationPlace),e.photoToReplace&&(i.photoToReplace=e.photoToReplace),_.navigate("add-photos",i)},trackSlideEvent_:function(e){var t=this.upSell_?this.photos_.length:this.photos_.length-1;k.track(q,{direction:this.scrollDirection_,element:42,position:e,reached_end:e===t})},getVoteExplanationWrapper:function(){return this.pageView_.getVoteExplanationWrapper()},getDeleteConfirmMsg_:function(e){return e.photo.hasVideo()?f.get(377):f.get(45)},getDeleteConfirmPopupView_:function(){return this.getView("delete-photo")||this.registerView("delete-photo",new A).on(A.ACTIONS.YES,this.onConfirmDelete_,this).on(A.ACTIONS.NO,this.onCancelDelete_,this)},trackPhotoDelete:function(e){var t=e.actionType,i=e.eventData,n=e.galleryPhoto,o=n.photo,s={action_type:t,activation_place:41,photo_id:o.getId(),private_photo:n.private||!1},r=o.getPhotoCoaching(),l=r&&r.getStars();if(p.isNumber(l)&&(s.stars=l),k.track(M,s),1===t){s={button_name:101};var c=a(i);c&&(s.screen_option=c),k.track(L,s)}},getPrivateConfirmPopupView_:function(){return this.getView("private_confirm")||this.registerView("private_confirm",new A).on(A.ACTIONS.YES,this.onConfirmMakePrivate_,this).on(A.ACTIONS.NO,this.onCancelMakePrivate_,this)},onAllowViewPhotoClick_:function(){2===this.viewPhotosAction_?this.navigateToAddPhotosPage_():this.log.error("Unhandled actionType required to view photos")},onCancelMakePrivate_:function(){r(5)},onConfirmMakePrivate_:function(){var e=this;return r(2),C.getInstance().makePrivate(this.getCurrentPhoto().getId()).then(function(){return e.invalidateCache_()}).catch(function(t){return e.onError_(t)})}},"GalleryController");Object.assign(ee,{ACTIONS:W,LAYOUT:J,TYPES:Z}),e.exports=ee},function(e,t,i){"use strict";var n=i(173),a=i(2850),o=i(2851),s=n.extend({template_:a,update:function(e){if(!e)return s._super.update.apply(this,arguments);var t={icon:this.getIconFromFeature_(e),title:e.getDisplayTitle(),message:e.getDisplayMessage(),actions:this.getButtonFromFeature_(e)};return s._super.update.call(this,t)},getIconFromFeature_:function(e){switch(e.getRequiredAction()){case 30:return"get-the-app";default:return"add-photos"}},getButtonFromFeature_:function(e){return[o.getButtonDataFromFeature(e)]}},"BlockOverlayView");s.ACTIONS=null,e.exports=s},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(143),s=i(160),r=i(151),l=i(172),c=i(152),u=i(106);e.exports=i(108)("BlockerPhotosOverlay",function(e){return e.data?n.createElement(o,{isCompact:!0},n.createElement(l,null,n.createElement(u,{name:"generic-blocker-camera",size:"xlg"})),e.data.title?n.createElement(r,{text:e.data.title,color:"white"}):null,n.createElement(c,{text:e.data.message,color:"white"}),e.data["add-photos"]||e.data.actions?n.createElement(s,null,e.data["add-photos"]?n.createElement("button",{className:"button button--inherited button--stroke button--narrow js-action js-touchable qa-button",key:"add-photos"},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},a.get(72)))):e.data.actions&&e.data.actions.map(function(e,t){var i=e&&e.action||"action_".concat(t);return n.createElement("button",{className:"button button--inherited button--stroke button--narrow js-action js-touchable qa-button","data-action":e.action,"data-feature":e.feature,key:i},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},e.text)))})):null):null})},function(e,t,i){"use strict";var n=i(105).ApplicationFeature,a=i(199);e.exports={getButtonDataFromFeature:function(e){if(!(e instanceof n))return null;var t=e.getProductType(),i=t?a.getPromoBlockForProduct(t):null;return{text:e.getDisplayAction(),action:e.getRequiredAction(),feature:e.getFeature(),promoBlockType:i}}}},function(e,t,i){"use strict";var n,a=i(3),o=a(i(168)),s=a(i(127)),r=a(i(107)),l=i(129),c=i(2853),u=i(100),d=i(102),h=i(111),p=i(2854),m=i(2859),g=i(2862),_=i(2865),f=i(515),v=i(517),E=i(2883),b=i(2885),y=i(2886),k=i(2889),S=i(2892),w=i(101).ScrollElementEvent,C=h("SHARE","BLOCK","UNBLOCK","MESSAGE_SENT"),T=-1,P=-3,N=(n={},(0,r.default)(n,1,{Constructor:g,params:{type:[g.TYPE.WORK,g.TYPE.EDUCATION]}}),(0,r.default)(n,2,{Constructor:_}),(0,r.default)(n,5,{Constructor:m,params:{type:m.TYPE.UNCOMMON}}),(0,r.default)(n,6,{Constructor:v}),(0,r.default)(n,16,{Constructor:E}),(0,r.default)(n,7,{Constructor:p}),(0,r.default)(n,8,{Constructor:g,params:{type:g.TYPE.LOCATION}}),(0,r.default)(n,10,{Constructor:f}),(0,r.default)(n,9,null),(0,r.default)(n,12,null),(0,r.default)(n,17,{Constructor:b,ActionMapping:(0,r.default)({},C.MESSAGE_SENT,b.ACTIONS.MESSAGE_SENT)}),(0,r.default)(n,P,{Constructor:y}),n),I=l.extend({sections_:null,clientSource:null,id_:null,token_:null,hasBeenOpened_:!1,construct:function(e,t){I._super.construct.call(this),this.parent=e,this.reload_=t},init:function(){I._super.init.apply(this,arguments),this.view_=this.registerView(new c({el:this.parent.get(0)})).on(c.EVENTS.SCROLLED,this.onProfileScrolled_,this),this.headlineSection_=this.registerController(new k).on(k.ACTIONS.SHARE,this.trigger.bind(this,C.SHARE)),this.blockReportSection_=this.registerController(new S).on(S.ACTIONS.BLOCK,this.trigger.bind(this,C.BLOCK)).on(S.ACTIONS.UNBLOCK,this.trigger.bind(this,C.UNBLOCK)).on(S.ACTIONS.SHARE,this.trigger.bind(this,C.SHARE))},setup_:function(){return this.verifyState_()?(this.onProfileReceived_(),!0):(this.clear(),!1)},setProfileData:function(e){this.profileData_=e,this.setup_()},verifyState_:function(){var e=this.profileData_;return!(!e||(this.clientSource=e.clientSource?parseInt(e.clientSource,10):this.clientSource,e.id?(this.id_=e.id,this.token_=null):e.token&&(this.id_=null,this.token_=e.token),!u.isNumber(this.clientSource)||!this.id_&&!this.token_&&(this.log.warn("Failed to start profile info because no id or token supplied"),1)))},clear:function(){if(this.sections_)return this.sections_.forEach(function(e){e.clear()}),!0},onProfileReceived_:function(){var e=this.profileData_.user;e&&(this.id_===e.getUserId()?(this.populateSections_(),this.hasBeenOpened_=!1):this.log.error("We don't care about this profile any more",this.id_,e.getUserId()))},populateSections_:function(){var e=this,t=this.profileData_.user,i=(0,s.default)({},this.profileData_,{source:this.profileData_.clientSource}),n=t.getQuickChat();if(!n){var a=t.getSections([]).filter(function(e){return 17!==e.getType()});t.setSections(a)}var r=[T,P].concat((0,o.default)(t.getSections([]).map(function(e){return e.getType()})),[-2]);n&&t.getSections([]).find(function(e){return 17===e.getType()})&&(r=[17].concat((0,o.default)(r.filter(function(e){return 17!==e})))),this.sections_=r.map(function(t){if(t===T)return e.headlineSection_;if(-2===t)return e.blockReportSection_;var n=N[t];if(n){var a=e.getController(t);if(!a){var o=n.Constructor;a=e.registerController(t,new o(e.reload_));var s=n.ActionMapping;if(s)for(var r in s)a.on(s[r],e.trigger.bind(e,r))}return a.updateParameters(Object.assign({},i,n.params)),a}}).filter(Boolean),this.headlineSection_&&this.headlineSection_.updateParameters(i),this.blockReportSection_&&this.blockReportSection_.updateParameters(i),this.renderSections_(),this.view_.hideLoading()},renderSections_:function(){var e=this.view_.$el;e.empty(),this.sections_.forEach(function(t){e.append(t.parent)})},getCurrentUser:function(){return this.id_||this.token_},onOpened:function(){this.hasBeenOpened_||(this.hasBeenOpened_=!0,this.sections_.forEach(function(e){e.isEnabled()&&e.onOpened()}))},onProfileScrolled_:function(){d.track(w,{direction:5,element:40,reached_end:!1})}},"ProfileInfo");I.ACTIONS=C,e.exports=I},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(171),s=a("SCROLLED"),r=n.extend({events:{touchstart:"onTouchStart_",touchend:"onTouchEnd_"},onTouchStart_:function(){this.initialTop_=o().scrollTop},onTouchEnd_:function(){var e=o().scrollTop;this.initialTop_!==e&&this.trigger(s.SCROLLED)}},"ProfileInfoView");r.EVENTS=s,e.exports=r},function(e,t,i){"use strict";var n=i(99),a=i(102),o=i(206),s=i(2856),r=i(101).ClickEvent,l=o.extend({serverFeature_:92,extractData_:function(e){if(e.user.hasBumpedIntoPlaces()){var t=this.getView("child-bumped-into");return null===t&&((t=this.registerView("child-bumped-into",new s)).on(s.EVENTS.CLICK_MAP,this.onMapClick_,this),t.on(s.EVENTS.REFRESH,this.trigger.bind(this,o.EVENTS.REFRESH))),t.update(e.user.getBumpedIntoPlaces()[0],n.get(248)),t.getElement()}return null},focus:function(){var e=this.getView("child-bumped-into");e&&e.focus()},getHotPanelElement:function(){return 1},onMapClick_:function(){a.track(r,{element:83,parent_element:1,has_parent:!0})},getName:function(){return"bumped"}},"BumpedSection");e.exports=l},function(e,t,i){"use strict";var n=i(162),a=i(109),o=i(171),s={REFRESH:"refresh",FOCUS:"focus"},r=a.extend({className:"profile-info__section",hasSubscription:!1,update:function(e){this.sectionElement=e,this.render()},render:function(){return this.sectionElement?void this.$el.html(this.sectionElement):(this.$el.empty(),null)},enable:function(){r._super.enable.apply(this,arguments),this.startUIEvents_()},disable:function(){r._super.disable.apply(this,arguments),this.stopUIEvents_()},startUIEvents_:function(){this.hasUIEvents_&&this.stopUIEvents_(),n.on(n.EVENTS.SCROLL,this.checkFocus,this),this.hasUIEvents_=!0},stopUIEvents_:function(){this.hasUIEvents_&&(n.off(n.EVENTS.SCROLL,this.checkFocus,this),this.hasUIEvents_=!1)},checkFocus:function(){var e=o().scrollTop,t=window.innerHeight+e+20;this.$el.offset().top<t&&this.trigger(s.FOCUS)}},"ProfileInfoSection");r.EVENTS=s,e.exports=r},function(e,t,i){"use strict";var n=i(100),a=i(141),o=i(2857),s=i(131),r=i(102),l=i(109),c=i(99),u=i(2858),d=l.extend({date_:null,displayImage_:null,description_:null,currentLocation_:null,notifyLocation_:!0,isFocused_:!1,mapLoaded_:!1,events:{"click .js-map":"onMapClick_"},init:function(e){return d._super.init.apply(this),n.isBoolean(e)&&(this.notifyLocation_=e),this},update:function(e,t){if(this.mapLoaded_=!1,!n.isObject(e))return this;this.isFocused_=!1,this.title=t;var i=e.getLocation();return i?this.isSameLocation_(i)?this:(this.currentLocation_=i,n.isObject(this.currentLocation_)?(this.date_=e.getDate(),this.displayImage_=this.currentLocation_.getDisplayImage(),this.description_=this.currentLocation_.getDescription(),this.render(),this):this):this},isSameLocation_:function(e){return this.currentLocation_&&this.currentLocation_.getLatitude()===e.getLatitude()&&this.currentLocation_.getLongitude()===e.getLongitude()},descriptionFound_:function(e,t){return!(!t||!e||e!==this.currentLocation_||(this.description_=t,this.$el.find(".js-description").html("".concat(c.get(249,this.description_),"<br/>").concat(this.date_)),this.triggerRefresh(),0))},render:function(){var e=a.removeForEdit(this.$el);return this.$el.html(u.render({title:this.title,description:this.description_,date:this.date_})),e(),this},triggerRefresh:function(){this.trigger(d.EVENTS.REFRESH)},focus:function(){if(!this.isFocused_&&this.currentLocation_)return this.isFocused_=!0,this.description_||o.getLocationDescription(this.currentLocation_.getLatitude(),this.currentLocation_.getLongitude(),this.notifyLocation_).then(this.descriptionFound_.bind(this,this.currentLocation_)).catch(n.noop),r.sendGenericEvent(r.GENERIC_EVENTS.GEOLOCATE_BUMPED_INTO,{lat:this.currentLocation_.getLatitude(),lng:this.currentLocation_.getLongitude()}),this},onImageLoad_:function(){this.mapLoaded_=!0,this.$el.find(".js-tap-map").remove();var e=this.$el.find(".map");e&&(e.attr("style",'background-image: url("'.concat(this.displayImage_,'");')),this.triggerRefresh())},onMapClick_:function(){this.trigger(d.EVENTS.CLICK_MAP),this.mapLoaded_||s.preloadImage(this.displayImage_).then(this.onImageLoad_)}},"BumpedInto");d.EVENTS={REFRESH:"refresh",CLICK_MAP:"click_map"},e.exports=d},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(122),s=i(26),r=i(105).GeoLocation,l={googleKeys_:[{name:"street",keys:["route","bus_station","transit_station","establishment"]},{name:"area",keys:["neighborhood","sublocality_level_1"]},{name:"locality",keys:["locality"]},{name:"town",keys:["postal_town","administrative_area_level_1"]},{name:"country",keys:["country"]}],getFirst_:function(e,t){for(var i=0;i<e.length;i+=1)for(var n=e[i].address_components,a=0;a<n.length;a+=1)for(var o=n[a].types,s=0;s<o.length;s+=1)if(t.indexOf(o[s])>-1)return n[a].short_name;return null},getLowestFrom_:function(e,t){for(var i=t;i<this.googleKeys_.length;i+=1){var n=this.getFirst_(e,this.googleKeys_[i].keys);if(n)return{value:n,index:i}}return null},getLowest_:function(e){return this.getLowestFrom_(e,0)},obtainReadableDescription_:function(e){var t=this.getLowest_(e);if(!t)return null;var i="street"===this.googleKeys_[t.index].name,n=this.getLowestFrom_(e,t.index+1);if(!n)return null;var a=i?null:this.getLowestFrom_(e,n.index+1);a&&a.value===n.value&&(a=this.getLowestFrom_(e,a.index+1));var o="".concat(t.value,", ").concat(n.value);return a?"".concat(o,", ").concat(a.value):o},onDescriptionSuccess_:function(e,t,i){if("OK"!==i.status)return t(i.status),null;var n=this.obtainReadableDescription_(i.results);return n?(e(n),n):(t(new Error("Geolocation failed without decription")),null)},onDescriptionError_:function(e,t,i){return t(i),i},fetchLocationDescription_:function(e,t){var i=this;return new Promise(function(n,o){a.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json",data:{latlng:"".concat(e,",").concat(t),language:s.getCurrentLanguageCode()},success:i.onDescriptionSuccess_.bind(i,n,o),error:i.onDescriptionError_.bind(i,n,o)})})},notifyServerDescription_:function(e,t,i){var a=(new r).setLatitude(e).setLongitude(t).setDescription(i);return new o(389,a).on(387,n.identity).request(),i},getLocationDescription:function(e,t,i){var n=this.fetchLocationDescription_(e,t);return i?n.then(this.notifyServerDescription_.bind(this,e,t)):n}};e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(120).Header2;e.exports=i(108)("ProfileSectionBumps",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"profile-info__title"},n.createElement(o,null,e.title)),n.createElement("div",{className:"profile-info__content js-description"},e.description?n.createElement(n.Fragment,null,e.description,e.date?n.createElement(n.Fragment,null,n.createElement("br",null),e.date):null):null),n.createElement("div",{className:"profile-info__content"},n.createElement("div",{className:"map qa-map js-map"},n.createElement("div",{className:"map__label js-tap-map"},a.get(727)))))})},function(e,t,i){"use strict";var n=i(206),a=i(103),o=i(99),s=i(2860),r={ALL:"all",UNCOMMON:"uncommon",COMMON:"common"},l=n.extend({extractData_:function(e){var t=e.user.getInterests();if(t&&t.length&&2===t[0].getGroupId()&&t.shift(),!(t&&t.length||this.getParameter("isOwnProfile")))return null;if(this.getParameter("isOwnProfile")){if(this.type_===r.COMMON)return null}else{for(var i=!1,a=0;a<t.length;a+=1)if(t[a].getIsMatched()){i=!0;break}if(this.type_===r.COMMON&&!i)return null;if(this.type_===r.UNCOMMON&&i)return null}var l=this.getView("interests");
return null===l&&((l=this.registerView("interests",new s)).on(s.ACTIONS.OPEN_INTERESTS,this.userAction_),l.on(s.ACTIONS.TOGGLE_CHANGE,this.trigger.bind(this,n.EVENTS.REFRESH))),l.update({interests:t||null,commonInterestMessage:this.type_===r.COMMON?e.user.getDisplayMessage():null,isOwnProfile:this.getParameter("isOwnProfile"),title:o.get(58),buttonText:this.getParameter("isOwnProfile")&&o.get(24)}),l.getElement()},userAction_:function(){a.navigate("own-interests")},getName:function(){return"interests"},getHotPanelElement:function(){return 34}},"InterestsSection");l.TYPE=r,e.exports=l},function(e,t,i){"use strict";var n=i(109),a=i(2861),o=n.extend({interests_:null,isExpanded_:!1,events:{"click .js-profile-section-interests":"toggleInterests_"},toggleInterests_:function(){this.isExpanded_=!this.isExpanded_,this.render({isExpanded:this.isExpanded_}),this.trigger(o.ACTIONS.TOGGLE_CHANGE)},update:function(e){return this.interests_=null===e.interests?[]:e.interests||this.interests_||[],this.title=e.title,this.render({}),this},render:function(e){var t=e.isExpanded;this.interests_.length<=10&&(t=!0);var i=t?this.interests_:this.interests_.slice(0,10),n=i.map(function(e){return e.getName()}).join(", ");return this.$el.html(a.render({title:this.title,isMasked:!i.length,more:!t,interestsText:n})),this}},"Interests");o.ACTIONS={CLICK:"CLICK",TOGGLE_CHANGE:"TOGGLE_CHANGE",OPEN_INTERESTS:"OPEN_INTERESTS"},e.exports=o},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(120).Header2;e.exports=i(108)("ProfileSectionInterests",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"profile-info__title"},n.createElement(o,null,e.title)),n.createElement("div",{className:"profile-info__content ".concat(e.isMasked?" is-masked js-profile-section-masked ":""," js-profile-interests")},n.createElement("div",{className:"profile-interests js-profile-section-interests"},e.interestsText,e.more?n.createElement("span",{className:"profile-interests__ellipsis"},"… "):null,e.more&&n.createElement("div",{className:"profile-interests__more js-ellipsis qa-ellipsis"},a.get(494)))))})},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(100),s=i(103),r=i(99),l=i(206),c=i(2863),u={LOCATION:"location",WORK:"work",EDUCATION:"education"},d=(n={},(0,a.default)(n,u.LOCATION,"location"),(0,a.default)(n,u.WORK,"work-and-education"),(0,a.default)(n,u.EDUCATION,"work-and-education"),n),h=l.extend({isMasked_:!1,source_:null,verifyData_:function(e){return!(!h._super.verifyData_.apply(this,arguments)||this.type_!==u.LOCATION&&this.shouldHideWorkAndEducation_(e))},extractData_:function(e){o.isArray(this.type_)||(this.type_=[this.type_]);var t=this.type_[0],i=this.getView("profile-field");null===i&&(i=this.registerView("profile-field",new c)).on(c.EVENTS.CLICK_MASKED,this.goToWorkEducation_,this);var n,a,s,r,l,u,d=[],h=(n=e.user,a=this.type_,s=n.getProfileFields([]),r={},a.forEach(function(e){var t=s.find(function(t){return t.getId()===e});t&&(r[e]=t)}),r),p=[];for(var m in this.isMasked_=!1,h){(l=h[m]).getDisplayValue()&&d.push(m),this.isMasked_=!(!o.isFunction(l.getRequiredAction)||!l.getRequiredAction());var g=this.getDisplayValue_(t,l,e.user);if(g&&(p.push({type:m,value:g}),m===t&&(u=l.getName()),this.isMasked_))break}return this.isWorkAndEducationInEncounters_(e)&&!this.isMasked_?null:0===p.length?null:(i.update({title:this.getTitle_(t,l,u,d),content:p,type:t,isMasked:this.isMasked_}),i.getElement())},isWorkAndEducationInEncounters_:function(e){return o.isArray(this.type_)&&(this.type_[0]===u.WORK||this.type_[0]===u.EDUCATION)&&20===e.user.getAccessLevel()},goToWorkEducation_:function(){s.navigate("own-profile-work-and-educations")},getTitle_:function(e,t,i,n){switch(e){case u.WORK:case u.EDUCATION:i=this.isMasked_||n.length===this.type_.length?r.get(282):n.indexOf(u.WORK)>-1?r.get(285):n.indexOf(u.EDUCATION)>-1?r.get(286):r.get(282)}return i},getDisplayValue_:function(e,t,i){var n=t.getDisplayValue();if("*****"===n)return null;if(e===u.LOCATION){var a=i.getDistanceShort()||null;null!==a&&a!==t.getDisplayValue()&&(n+=" (".concat(o.unescape(r.get(34,a)),")"))}return n},getHotPanelElement:function(){switch(this.type_[0]){case u.LOCATION:return 33;case u.WORK:case u.EDUCATION:return 22}},shouldHideWorkAndEducation_:function(e){if(!o.isArray(this.type_))return!1;var t=e.user.getProfileFields();if(!t)return!0;for(var i=0;i<t.length;i++){var n=t[i];if("work"===n.getId()||"education"===n.getId())return!1}return!0},getName:function(){return d[this.type_[0]]}},"ProfileFieldSection");h.TYPE=u,e.exports=h},function(e,t,i){"use strict";var n=i(109),a=i(2864),o={CLICK_MASKED:"masked",REFRESH:"refresh"},s=n.extend({events:{"click .js-profile-section-masked":"onClickMasked_"},update:function(e){return this.data=e,this.render(),this},render:function(){return this.reset(),this.data[this.data.type]=!0,this.$el.html(a.render(this.data)),this.data.element&&this.$el.find(".js-profile-section").html(this.data.element),this},onClickMasked_:function(){"work"===this.data.type&&this.trigger(o.CLICK_MASKED,{type:this.type_})}},"ProfileField");s.EVENTS=o,s.ACTIONS={SELECT:"select"},e.exports=s},function(e,t,i){"use strict";var n=i(98),a=i(120).Header2;e.exports=i(108)("ProfileSectionGeneral",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"profile-info__title"},n.createElement(a,null,e.title)),n.createElement("div",{className:"profile-info__content ".concat(e.isScrollable?"profile-info__content--scrollable":""," ").concat(e.isMasked?"is-masked js-profile-section-masked":""," js-profile-section")},e.content?n.createElement("div",{className:"profile-info__content-line"},e.content.map(function(e){return n.createElement("span",{key:e.type,"data-qa":e.type},e.value)})):null))})},function(e,t,i){"use strict";var n=i(206),a=i(2866),o=i(102),s=i(103),r=i(275),l=i(383),c=i(101).ClickEvent,u=n.extend({extractData_:function(e){var t=e.user,i=e.sessionUser?e.sessionUser:null,n=t.getProfileFields(),o=[],s=null;if(n.forEach(function(e){2===e.getType()&&(o.push(e.getDisplayValue()),s=e.getDisplayValue())}),0===n.filter(function(e){return-1!==l.FIELDS.indexOf(e.getType())&&e.getDisplayValue()}).length&&!s)return null;var c=this.view_;return c||(c=this.view_=this.registerView(new a)).on(a.ACTIONS.OPEN_PROFILE_WALKTHROUGH,this.openProfileWalkthrough_),r.getInstance().get(r.TYPE.SPOKEN).then(function(e){return e[0]}).then(function(e){c.update({aboutMeLines:o,user:t,sessionUser:i,clientLanguages:e})}),c.getElement()},openProfileWalkthrough_:function(e){if(this.data_.sessionUser&&100!==this.data_.sessionUser.getProfileCompletePercent()){var t={activationPlace:this.getParameter("activationPlace")};t.activationPlace||"encounters"===s.getUrl()&&(t.activationPlace=2),e&&(t.profileOption=e),s.navigate("profile-quality",!1,t),o.track(c,{element:942})}},getHotPanelElement:function(){return 35},getName:function(){return"personal-info"}},"PersonalInfoSection");e.exports=u},function(e,t,i){"use strict";var n=i(109),a=i(2867),o=n.extend({events:{"click .js-profile-info-badge":"onClickBadge"},onClickBadge:function(e){var t=this.$(e.target);t.hasClass(".js-profile-info-badge")||(t=t.parents(".js-profile-info-badge").first());var i=parseInt(t.data("profile-option-type"),10);this.trigger(o.ACTIONS.OPEN_PROFILE_WALKTHROUGH,i)},update:function(e){this.$el.html(a.render(e))}},"PersonalInfo");o.ACTIONS={OPEN_PROFILE_WALKTHROUGH:"OPEN_PROFILE_WALKTHROUGH"},e.exports=o},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(496),s=i(145),r=i(120),l=r.Header2,c=r.P2;e.exports=i(108)("ProfileSectionAbout",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"profile-info__title",key:"title",onClick:function(){return e.onClickBadge(2)}},n.createElement(l,null,a.get(80))),e.aboutMeLines?n.createElement("div",{className:"profile-info__content ".concat(e.isMasked?"is-masked js-profile-section-masked":""," js-profile-section"),key:"about-me"},e.aboutMeLines.map(function(e,t){return n.createElement(s,{top:t>0?"sm":null,key:t},n.createElement(c,{color:"gray-60",breakWords:!0},e))})):null,n.createElement("div",{className:"profile-info__content"},n.createElement(o,{user:e.user,sessionUser:e.sessionUser,clientLanguages:e.clientLanguages,key:"profile-badges"})))})},function(e,t,i){"use strict";function n(e,t){return"".concat(e.message," ").concat(t)}var a=i(109),o=i(2869),s=i(2870),r=i(111),l=r("CLICK","REFRESH"),c=r("DEFAULT","MIXED"),u=a.extend({events:{"click .js-verification-button":"click_"},style:c.DEFAULT,timerId_:null,click_:function(){this.trigger(l.CLICK)},getTemplate_:function(){return this.style===c.MIXED?s:o},update:function(e){this.$(".js-verification-loader-text").text(e)},render:function(e){if(e){var t=this.getTemplate_();e.isStillToBeVerified=!e.verified&&!e.isProcessing&&!e.verificationError,this.$el.html(t.render(e)),this.handleIsProcessing_(e)}else this.$el.empty()},disable:function(){u._super.disable.apply(this,arguments),clearInterval(this.timerId_)},handleIsProcessing_:function(e){var t=this,i=e?e.secondsToWait:0;clearInterval(this.timerId_),e.isProcessing&&(this.update(n(e,i)),this.timerId_=setInterval(function(){t.update(n(e,--i)),i<=0&&(clearInterval(t.timerId_),t.update(e.message),t.trigger(l.REFRESH))},1e3))}},"PhotoVerificationHandlerView");u.ACTIONS=l,u.STYLES=c,e.exports=u},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(134);e.exports=i(108)("VerificationBlockSimple",function(e){return n.createElement("div",{className:"verification-block-simple"},e.isProcessing?n.createElement("div",{className:"verification-block-loader"},n.createElement("div",{className:"verification-block-loader__icon"},n.createElement("div",{className:"icon-spinning-arrows-animated"},n.createElement(a,{name:"generic-spinning-arrows",size:"md"}))),n.createElement("div",{className:"verification-block-loader__text js-verification-loader-text"},e.message)):n.createElement("div",{className:"verification-block-button"},n.createElement(o,{type:"verification",narrow:"true",extraClass:"js-verification-button",icon:n.createElement(a,{name:"generic-button-verification",size:"md"}),text:e.message})))})},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(134);i(153),e.exports=i(108)("VerificationCircleButton",function(e){return e.isStillToBeVerified?n.createElement(o,{type:"verification",extraClass:"js-verification-button",icon:n.createElement(a,{name:"generic-button-verification",size:"md"}),text:e.message}):n.createElement("div",{className:"verification-options verification-options--vertical qa-profile-verifications"},n.createElement("div",{className:"verification-option js-verification-button ".concat(e.isProcessing?" is-processing ":""," ").concat(e.isInactive?" is-inactive ":"")},e.verified?n.createElement("div",{className:"verification-option__icon"},n.createElement("div",{className:"brick"},n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"adaptor-verification",size:"stretch"})))):n.createElement("div",{className:"verification-option__icon"},n.createElement("div",{className:"brick"},n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"adaptor-verification-inactive",size:"stretch"})),e.verificationError?n.createElement("div",{className:"brick__badge brick__badge--br"},n.createElement(a,{name:"badge-attention",size:"md",shadow:!0})):null,e.isProcessing?n.createElement("div",{className:"brick__badge brick__badge--br"},n.createElement("div",{className:"icon-spinning-arrows-animated"},n.createElement(a,{name:"badge-spinning-arrows",size:"md",shadow:!0}))):null)),n.createElement("div",{className:"verification-option__description"},n.createElement("div",{className:"verification-option__name"},e.name),e.hideMessage?null:n.createElement("div",{className:"verification-option__message js-verification-loader-text"},e.message,n.createElement("span",{className:"js-countdown"}))),n.createElement("div",{className:"b-link qa-verification-method js-verification-method","data-type":"photo","data-index":e.index})))})},function(e,t,i){"use strict";function n(){this.name="Access"}var a,o=i(157),s=i(105).VerificationAccessObject;n.prototype={request:function(e,t){var i=(new s).setType(e.getType());return e.hasExternalProviderData()&&i.setProviderType(e.getExternalProviderData().getType()),o.accessRequest(t,1,i)}},n.getInstance=function(){return a||(a=new n)},e.exports=n},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(215),s=i(111),r=i(2873),l=s("CLICK","REFRESH"),c=a.extend({className:"verification-view",events:{"click .js-verification-method":"onVerificationMethodClick_"},photoVerificationTimer_:null,onVerificationMethodClick_:function(e,t){var i=Number(n(t).data("index")),a=this.$el.find(".js-verification-method").indexOf(t);this.trigger(l.CLICK,{index:i,trackingIndex:a})},update:function(e,t,i,n,a){var s=null,r=[];a=a||!1;for(var l=0;l<e.length;l++){var c=e[l],u=c.getType(),d=o.createContextForMethod(c,n,a);d&&(d.index=l,5===u?s=d:r.push(d))}var h={layout:i=i||"vertical",otherVerificationMethods:r,photoVerificationMethod:s,isNotVerified:1===t,isFullyVerified:4===t};return this.render(h)},render:function(e){var t=this;this.$el.attr("class","verification-options-parent-".concat(e.layout)),this.$el.html(r.render(e));var i=e.photoVerificationMethod?e.photoVerificationMethod.secondsToWait:0;return i>0&&setTimeout(function(){t.trigger(l.REFRESH)},1e3*i),this},handleVerificationCountDown_:function(e){var t=this.photoVerificationTimer_;clearInterval(t);var i=this.$el.find(".js-countdown"),n=function(){return e<=0?(i.text(""),void clearInterval(t)):void i.text(" (".concat(e--,")"))};t=this.photoVerificationTimer_=setInterval(n,1e3),n()}},"Verification");c.ACTIONS=l,e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(153);e.exports=i(108)("VerificationOptions",function(e){return n.createElement("div",{className:"verification-options verification-options--".concat(e.layout," qa-profile-verifications")},o(e.photoVerificationMethod,e,function(t){return n.createElement("div",{className:"verification-option ".concat(t.isProcessing?"is-processing":t.isInactive?" is-inactive ":"")},t.verified?n.createElement("div",{className:"verification-option__icon"},n.createElement("div",{className:"brick"},n.createElement("div",{className:"brick__icon","data-qa":"icon-verified"},n.createElement(a,{name:"adaptor-verification",size:"stretch"})))):n.createElement("div",{className:"verification-option__icon"},n.createElement("div",{className:"brick"},n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"adaptor-verification-inactive",size:"stretch"})),e.verificationError?n.createElement("div",{className:"brick__badge brick__badge--br","data-qa":"icon-exclamation"},n.createElement(a,{name:"badge-attention",size:"md",shadow:!0})):null,e.isProcessing?n.createElement("div",{className:"brick__badge brick__badge--br","data-qa":"icon-spinning"},n.createElement("div",{className:"icon-spinning-arrows-animated"},n.createElement(a,{name:"badge-spinning-arrows",size:"md",shadow:!0}))):null)),n.createElement("div",{className:"verification-option__description"},n.createElement("div",{className:"verification-option__name"},t.name),t.hideMessage?null:n.createElement("div",{className:"verification-option__message"},t.message,n.createElement("span",{className:"js-countdown"}))),n.createElement("div",{className:"b-link qa-verification-method js-verification-method","data-type":"photo","data-index":t.index}))}),o(e.otherVerificationMethods,e,function(e){return n.createElement("div",{className:"verification-option ".concat(e.isInactive?"is-inactive":""),key:e.index},n.createElement("div",{className:"verification-option__icon"},n.createElement("div",{className:"brick"},n.createElement("div",{className:"brick__icon"},e.photo&&(e.photo.verified?n.createElement(a,{name:"adaptor-verification",size:"stretch"}):n.createElement(a,{name:"adaptor-verification-inactive",size:"stretch"})),e.facebook&&(e.facebook.verified?n.createElement(a,{name:"adaptor-facebook",size:"stretch"}):n.createElement(a,{name:"adaptor-facebook-inactive",size:"stretch"})),e.vkontakte&&(e.vkontakte.verified?n.createElement(a,{name:"adaptor-vkontakte",size:"stretch"}):n.createElement(a,{name:"adaptor-vkontakte-inactive",size:"stretch"})),e.odnoklassniki&&(e.odnoklassniki.verified?n.createElement(a,{name:"adaptor-odnoklassniki",size:"stretch"}):n.createElement(a,{name:"adaptor-odnoklassniki-inactive",size:"stretch"})),e.google&&(e.google.verified?n.createElement(a,{name:"adaptor-google",size:"stretch"}):n.createElement(a,{name:"adaptor-google-inactive",size:"stretch"})),e.instagram&&(e.instagram.verified?n.createElement(a,{name:"adaptor-instagram",size:"stretch"}):n.createElement(a,{name:"adaptor-instagram-inactive",size:"stretch"})),e.linkedin&&(e.linkedin.verified?n.createElement(a,{name:"adaptor-linkedin",size:"stretch"}):n.createElement(a,{name:"adaptor-linkedin-inactive",size:"stretch"})),e.twitter&&(e.twitter.verified?n.createElement(a,{name:"adaptor-twitter",size:"stretch"}):n.createElement(a,{name:"adaptor-twitter-inactive",size:"stretch"})),e.phone&&(e.phone.verified?n.createElement(a,{name:"adaptor-phone",size:"stretch",supportsRtl:!0}):n.createElement(a,{name:"adaptor-phone-inactive",size:"stretch",supportsRtl:!0})),e.spp&&(e.spp.verified?n.createElement(a,{name:"adaptor-premium",size:"stretch",color:"primary"}):n.createElement(a,{name:"adaptor-premium-inactive",size:"stretch"}))))),n.createElement("div",{className:"verification-option__description"},n.createElement("div",{className:"verification-option__name"},e.name),e.hideMessage?null:n.createElement("div",{className:"verification-option__message"},n.createElement("bdi",null,e.message))),e.isConfigurable?n.createElement("div",{className:"verification-option__chevron"},n.createElement(a,{name:"generic-chevron-right",size:"sm",supportsRtl:!0})):null,n.createElement("div",{className:"b-link qa-verification-method js-verification-method","data-type":e.className,"data-index":e.index}))}))})},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106),s=i(134),r=i(99);e.exports=i(108)("Modal.accessRequest",function(e){return n.createElement("div",{className:"modal modal--compact modal--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},e.verified?n.createElement("div",{className:"brick-wrapper brick-wrapper--padded"},n.createElement("div",{className:"brick brick--xxlg","data-qa":"brick"},"url"==e.userpic.type&&n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({width:100,src:e.userpic.value}),"')")}}),"symbol"==e.userpic.type&&n.createElement("div",{className:"brick__icon"},n.createElement(o,{size:"stretch",name:e.userpic.value})),n.createElement("div",{className:"brick__badge brick__badge--bc"},e.facebook&&n.createElement(o,{name:"adaptor-facebook",size:"lg",shadow:!0}),e.vkontakte&&n.createElement(o,{name:"adaptor-vkontakte",size:"lg",shadow:!0}),e.vkontakte&&n.createElement(o,{name:"adaptor-vkontakte",size:"lg",shadow:!0}),e.google&&n.createElement(o,{name:"adaptor-google",size:"lg",shadow:!0}),e.instagram&&n.createElement(o,{name:"adaptor-instagram",size:"lg",shadow:!0}),e.linkedin&&n.createElement(o,{name:"adaptor-linkedin",size:"lg",shadow:!0}),e.twitter&&n.createElement(o,{name:"adaptor-twitter",size:"lg",shadow:!0}),e.phone&&n.createElement(o,{name:"adaptor-phone",size:"lg",shadow:!0,supportsRtl:!0})))):n.createElement("div",{className:"brick brick--sm"},n.createElement("div",{className:"brick__icon"},e.facebook&&n.createElement(o,{name:"adaptor-facebook",size:"stretch"}),e.vkontakte&&n.createElement(o,{name:"adaptor-vkontakte",size:"stretch"}),e.odnoklassniki&&n.createElement(o,{name:"adaptor-odnoklassniki",size:"stretch"}),e.google&&n.createElement(o,{name:"adaptor-google",size:"stretch"}),e.instagram&&n.createElement(o,{name:"adaptor-instagram",size:"stretch"}),e.linkedin&&n.createElement(o,{name:"adaptor-linkedin",size:"stretch"}),e.twitter&&n.createElement(o,{name:"adaptor-twitter",size:"stretch"}),e.phone&&n.createElement(o,{name:"adaptor-phone",size:"stretch",supportsRtl:!0})))),n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.mssg}}),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{text:e.action,extraClass:"js-action",type:"".concat(e.facebook?"facebook":"").concat(e.vk?"vkontakte":"").concat(e.ok?"odnoklassniki":"").concat(e.google?"google":"").concat(e.instagram?"instagram":"").concat(e.linkedin?"linkedin":"").concat(e.twitter?"twitter":"").concat(e.phone?"phone":""),attrs:{"data-next":!0}})))),n.createElement("div",{className:"cta-box__additional js-action"},r.get(20))))})},function(e,t,i){"use strict";var n=i(98),a=i(99);e.exports=i(108)("Modal.removeVerify",function(e){return n.createElement("div",{className:"modal"},n.createElement("div",{className:"modal__item"},n.createElement("div",{className:"modal-header"},a.get(175)),n.createElement("div",{className:"modal-text"},a.get(176))),n.createElement("div",{className:"modal__item"},n.createElement("div",{className:"modal-button modal-button--destructive js-action","data-next":!0},n.createElement("span",{className:"modal-button__text"},a.get(174)))),n.createElement("div",{className:"modal__item"},n.createElement("div",{className:"modal-button modal-button--cancel js-action"},n.createElement("span",{className:"modal-button__text"},a.get(19)))))})},function(e,t,i){"use strict";var n=i(132),a=i(109),o=i(2877),s=i(2878),r=a.extend({render:function(e){var t=e.verificationStatus,i=e.displayMessage,a=e.isOwnProfile,r=e.verificationOptionsEl,l=e.verificationHandlerEl,c=a?o:s,u={displayMessage:i,isOwnProfile:a,isPhotoOnlyVerification:n.getSync(209).getEnabled(),isNotVerified:1===t,isFullyVerified:4===t};this.$el.html(c.render(u)),this.$(".js-verification-handler").html(l),this.$(".js-profile-section").html(r)}},"Verification");e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(99);e.exports=i(108)("OwnProfileVerification",function(e){return n.createElement("div",{className:"own-profile-edit__block"},e.isPhotoOnlyVerification?n.createElement(n.Fragment,null,n.createElement("h2",{className:"own-profile-edit__title"},a.get(255)),n.createElement("div",{className:"js-verification-handler"}),n.createElement("h2",{className:"own-profile-edit__title"},a.get(612)),n.createElement("div",{className:"js-profile-section"})):n.createElement(n.Fragment,null,n.createElement("h2",{className:"own-profile-edit__title"},a.get(255)),n.createElement("div",{className:"js-profile-section"})))})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(120).Header2;e.exports=i(108)("ProfileSectionVerification",function(e){return e.isPhotoOnlyVerification?n.createElement(n.Fragment,null,e.isFullyVerified&&n.createElement(n.Fragment,null,n.createElement("div",{className:"profile-info__title"},n.createElement(o,null,a.get(255))),n.createElement("div",{className:"profile-info__content"},n.createElement("div",{className:"js-verification-handler"}))),n.createElement("div",{className:"profile-info__title"},n.createElement(o,null,a.get(612))),n.createElement("div",{className:"profile-info__content"},n.createElement("div",{className:"js-profile-section"}))):n.createElement(n.Fragment,null,n.createElement("div",{className:"profile-info__title"},n.createElement(o,null,a.get(255))),n.createElement("div",{className:"profile-info__content"},n.createElement("div",{className:"profile-section__intro",dangerouslySetInnerHTML:{__html:e.displayMessage}}),n.createElement("div",{className:"js-profile-section"})))})},function(e,t,i){"use strict";var n=i(25),a=i(100),o=i(109),s=i(99),r=i(102),l=i(2880),c=i(2881),u=i(2882),d=i(101).ClickEvent,h={SEND:"send",OPEN:"open",DELETE:"delete"},p=o.extend({events:{"click .js-item":"onSelect_","click .js-edit":"onEdit_","click .js-send":"onSend_"},scrollableEl_:null,isEditing_:!1,isOwnProfile_:!1,update:function(e){this.isOwnProfile_=e.isOwnProfile,this.isEditing_=!1,this.render(this.getTemplateContext_(e))},render:function(e){this.scrollableEl_&&(this.scrollableEl_.off("scroll",this.onScroll_),this.scrollableEl_=null);var t=e.canEdit?c:l;this.$el.html(t.render(e)),this.$(".js-image").one("load",function(e){n(e.currentTarget).closest(".js-item").removeClass("is-loading")}),this.scrollableEl_=this.$(".js-profile-section-scrollable"),this.scrollableEl_&&this.scrollableEl_.on("scroll",this.onScroll_)},getTemplateContext_:function(e){var t=e.gifts.getGifts([]).map(this.processGift_,this),i=e.gifts.getSuggestedGift();return{title:this.processTitle_(t.length),canEdit:e.isOwnProfile,canSend:!e.isOwnProfilePreview,gifts:t,suggestedGift:i&&{image:i.getThumbUrl(),id:i.getProductId()}}},onScroll_:function(e){var t=n(e.target).closest(".js-profile-section");n(e.target).scrollLeft()>10?t.removeClass("is-decorated"):t.addClass("is-decorated")},processTitle_:function(e){return e?s.get(372,e):s.get(371)},processGift_:function(e){return{image:u.getThumbImage(e),private:e.getIsPrivate(),id:e.getPurchaseId()}},onSelect_:function(e,t){var i=n(t),a=i.data("id");this.isEditing_?i.toggleClass("is-active"):this.trigger(h.OPEN,a.toString())},onEdit_:function(){if(this.isEditing_=!this.isEditing_,this.$(".js-edit-text").html(this.isEditing_?s.get(23):s.get(24)),this.$(".js-gifts").toggleClass("is-editing",this.isEditing_),!1===this.isEditing_){var e=a.map(this.$(".is-active"),function(e){return(e=n(e)).parent().remove(),e.data("id")});if(0===e.length)return;var t=this.$(".js-item").length;t>0?this.$(".js-title").html(this.processTitle_(t)):this.$el.addClass("hidden"),this.trigger(h.DELETE,e)}else r.track(d,{element:46,parent_element:32})},onSend_:function(e,t){this.trigger(h.SEND,n(t).data("id"))}},"GiftsSectionView");p.ACTIONS=h,e.exports=p},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(259),s=i(191),r=i(193),l=i(192),c=i(261),u=i(106),d=i(145),h=i(120),p=h.Header2,m=h.P2;e.exports=i(108)("ProfileSectionGifts",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"profile-info__title"},n.createElement(p,null,e.title)),n.createElement("div",{className:"profile-info__content js-profile-section"},e.gifts&&e.gifts.length?n.createElement(n.Fragment,null,n.createElement("div",{className:"js-gifts"},n.createElement(o,{spacing:"xlg",hpadded:!0},e.suggestedGift&&n.createElement("div",{className:"gift js-send","data-id":e.suggestedGift.id},n.createElement("div",{className:"gift__image"},n.createElement("img",{src:e.suggestedGift.image,alt:""})),n.createElement("div",{className:"gift__icon gift__icon--br is-shown"},n.createElement(u,{name:"badge-plus",size:"md"}))),e.gifts.map(function(e){return n.createElement("div",{className:"gift is-loading js-item","data-id":e.id,key:e.id},n.createElement("div",{className:"gift__image"},n.createElement("div",{className:"gift__image-loader"},n.createElement(c,null)),n.createElement("img",{src:e.image,alt:"",className:"js-image"})),e.private?n.createElement("div",{className:"gift__private"},a.get(380)):null)}))),e.suggestedGift?n.createElement(d,{top:"sm"},n.createElement(m,{color:"primary"},n.createElement("span",{className:"js-send","data-qa":"profile-no-gifts","data-id":e.suggestedGift.id},a.get(280)))):null):n.createElement("div",{className:"profile-no-gifts ".concat(e.canSend?"js-send":""),"data-id":e.suggestedGift.id,"data-qa":"profile-no-gifts"},n.createElement(s,null,n.createElement(r,null,n.createElement("div",{className:"gift"},n.createElement("div",{className:"gift__image"},n.createElement("img",{src:e.suggestedGift.image,alt:""})),n.createElement("div",{className:"gift__icon gift__icon--br is-shown"},n.createElement(u,{name:"badge-plus",size:"md"})))),n.createElement(l,null,n.createElement(m,{color:"primary"},a.get(280)))))))})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(259),s=i(261),r=i(106),l=i(120),c=l.Header2,u=l.P1;e.exports=i(108)("OwnProfileSectionGifts",function(e){return n.createElement("div",{className:"own-profile-edit__block"},n.createElement("div",{className:"own-profile-edit__title own-profile-edit__title--flex"},n.createElement("div",{className:"own-profile-edit__title-text"},n.createElement(c,{ellipsis:!0},n.createElement("span",{className:"js-title"},a.get(371)))),e.canEdit?n.createElement("div",{className:"own-profile-edit__title-link js-edit"},n.createElement(u,{color:"primary"},n.createElement("span",{className:"js-edit-text"},a.get(24)))):null),n.createElement("div",{className:"js-gifts"},n.createElement(o,{spacing:"xlg",hpadded:!0},e.gifts.map(function(e){return n.createElement("div",{className:"gift "+(e.isLoading?"is-loading":"")+" js-item","data-id":e.id,key:e.id},n.createElement("div",{className:"gift__image"},n.createElement("div",{className:"gift__image-loader"},n.createElement(s,null)),n.createElement("img",{src:e.image,alt:"",className:"js-image"})),e.private?n.createElement("div",{className:"gift__private"},a.get(380)):null,n.createElement("div",{className:"gift__icon"},n.createElement(r,{name:"elements-input-clear",size:"md",color:"primary"})))}))))})},function(e,t,i){"use strict";var n=i(113),a={getThumbImage:function(e){var t=e.getBoxThumbUrl(),i=e.getGift().getThumbUrl();if(!t||!i)return i||t;var a=n.getUserId(),o=e.getFromUserId()===a,s=e.getToUserId()===a,r=s&&e.getIsBoxed(),l=e.getIsPrivate()&&!o&&!s;return r||l?t:i}};e.exports=a},function(e,t,i){"use strict";var n=i(206),a=i(173),o=i(2884),s=i(103),r=s.navigate,l=s.getHistoryEntryId,c=i(102),u=i(113),d=i(101).ClickEvent,h=n.extend({serverFeature_:181,construct:function(){n._super.construct.apply(this,arguments),this.view_=this.registerView(new a).setActions({OPEN_LOOKALIKES:"open-lookalikes"}).setTemplate(o).on("open-lookalikes",this.onAction_,this)},extractData_:function(e){var t=e.user.getLookalikesInfo().getMessage();return this.view_.update({message:t}).getElement()},onAction_:function(){var e=this.data_.user.getLookalikesInfo().getPhotoId();return u.isLoggedIn()?(r("lookalikes",{photoId:e,backHistoryEntry:l()}),void c.track(d,{parentElement:40,element:this.getHotPanelElement()})):(r("landing"),!1)},getHotPanelElement:function(){return 367}},"LookalikesSection");e.exports=h},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(191),s=i(193),r=i(192),l=i(277),c=i(106),u=i(120).Header2;e.exports=i(108)("ProfileSectionLookalikes",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"profile-info__title"},n.createElement(u,null,a.get(560))),n.createElement("div",{className:"profile-info__content","data-action":e.actions.OPEN_LOOKALIKES},n.createElement(o,null,n.createElement(s,null,n.createElement("div",{className:"brick brick--md"},n.createElement("div",{className:"brick__icon"},n.createElement(c,{name:"connections-folder-lookalikes"})))),n.createElement(r,null,e.data.message),n.createElement(l,null,n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0})))))})},function(e,t,i){"use strict";var n=i(100),a=i(98),o=i(99),s=i(5),r=i(103),l=r.getUrl,c=r.getLocation,u=r.updateLocation,d=i(146),h=i(157),p=i(124),m=i(165),g=i(102),_=i(111),f=i(149),v=i(206),E=i(322),b=i(101),y=b.ViewElementEvent,k=b.QuickChatEvent,S=b.ClickEvent,w=b.SendMessageEvent,C=i(401),T=i(402),P=i(271),N=i(218),I=i(141).$satisfy,x=_("MESSAGE_SENT"),A=v.extend({user_:null,initialChatScreen_:null,construct:function(e){A._super.construct.apply(this,arguments),this.reload_=e,this.sendMessageAfterTopUpCallback_=T("send_instant_message_after_top_up",this.sendMessageAfterTopUp_.bind(this)),this.finishMessageSendingCallback_=T("finish_instant_message_sending",this.finishMessageSending_.bind(this)),this.element=I("div"),this.loader_=N(this.element[0])},extractData_:function(e){var t=e.user,i=e.source;return g.track(y,{element:410}),this.configure_(t,i)},configure_:function(e,t){if(this.user_=e,this.context_=t,this.initialChatScreen_=function(e){
var t=e.getQuickChat();return t&&t.getInitialChatScreen()}(e),this.currentMessage_="",this.initialChatScreen_){var i,n=e.getUserId();return this.hasNoEnoughCredits_()||(i=n,g.track(k,{encrypted_user_id:i})),this.renderQuickChat_(),this.processUnfinishedMessageSending_(),this.processPendingMessage_(),this.element}},renderQuickChat_:function(){var e=this.getUserId_();this.quickChatId_=this.renderReactView(a.createElement("div",{className:"profile-info__content profile-info__content--with-bottom-border"},a.createElement(E,{key:e,type:"bare-bones",value:C.getMessage(e)||"",placeholder:this.initialChatScreen_.getMessage(),toPersonId:e,onChange:this.handleInputChange_.bind(this),onSend:this.handleSendClick_.bind(this),onFocus:this.scrollInfoView_.bind(this)})),this.element[0])},processPendingMessage_:function(){var e=c(),t=e.routeName,i=e.parameters;if("1"===i.paymentFlow){if(!this.waitingForTopUpConfirmation_){var a=n.omit(i,"paymentFlow");u(t,a),this.sendMessageAfterTopUpCallback_.execute()}}else this.loader_.hide()},sendMessageAfterTopUp_:function(e){var t=this,i=e.chatMessage;this.hasNoEnoughCredits_()?this.reload_().then(function(e){e&&(t.configure_(e),t.hasNoEnoughCredits_()||t.send_(i))}):this.send_(i)},processUnfinishedMessageSending_:function(){var e=c(),t=e.routeName,i=e.parameters;if("2"===i.paymentFlow){var a=n.omit(i,"paymentFlow");u(t,a),this.finishMessageSendingCallback_.execute()}},getUserId_:function(){return this.user_.getUserId()},topUpCredits_:function(e,t){var i=this.initialChatScreen_.getBlockingFeature();m.navigateToPayment({back:l(),newNavigation:t,userId:this.getUserId_(),productType:i.getCreditsForProduct(),hotPanelData:{activationPlace:10},callback:e})},handleInputChange_:function(e){this.currentMessage_=e,C.saveMessage(this.getUserId_(),this.currentMessage_)},handleSendClick_:function(e){var t=this;if(f.generate(),g.track(S,{element:253,parent_element:410}),this.hasNoEnoughCredits_()){this.sendMessageAfterTopUpCallback_.create({chatMessage:e});var i=d.encodeRoute(l(),{paymentFlow:"1"});return this.waitingForTopUpConfirmation_=!0,void this.topUpCredits_(function(e){var i=e.success,n=e.purchaseReceipt;i?(t.loader_.show(),P.subscribeToNotificationShow(n,function(){t.waitingForTopUpConfirmation_=!1,t.loader_.hide(),t.sendMessageAfterTopUpCallback_.execute()})):(t.waitingForTopUpConfirmation_=!1,t.sendMessageAfterTopUpCallback_.remove())},i)}this.send_(e)},send_:function(e){var t=this,i=this.getUserId_(),n=e.message;e.context=this.context_;var a=this.initialChatScreen_.getBlockingFeature();this.finishMessageSendingCallback_.create({userId:this.getUserId_(),messageLength:n.length});var o=d.encodeRoute(l(),{paymentFlow:"2"});(a?function(){return h.payToSend(i,e,l(),o,a)}:function(){return h.send(i,e)})().then(function(){t.removeReactView(t.quickChatId_),t.finishMessageSendingCallback_.execute()}).catch(function(){t.removeReactView(t.quickChatId_),t.finishMessageSendingCallback_.remove(),t.renderQuickChat_()})},finishMessageSending_:function(e){var t,i,n=e.messageLength,a=e.userId;this.currentMessage_="",C.removeMessage(this.getUserId_()),this.getUserId_()===a&&(this.removeReactView(this.quickChatId_),this.trigger(x.MESSAGE_SENT)),p.showNotification({type:p.TYPES.INFO,text:o.get(529)}),t=n,i=this.getUserId_(),g.track(w,{length:t,encrypted_user_id:i,quick_chat:!0})},hasNoEnoughCredits_:function(){if(19!==this.initialChatScreen_.getType())return!1;var e=this.initialChatScreen_.getBlockingFeature();return e&&4===e.getRequiredAction()},scrollInfoView_:function(){var e=this;s.isAndroid&&setTimeout(function(){var t=e.parent.offset();window.scrollTo(0,t.top+t.height/2-window.innerHeight/2)},700)}},"QuickChatSection");A.ACTIONS=x,e.exports=A},function(e,t,i){"use strict";function n(e,t){o.navigate("livestream",{id:e,streamId:t,fromProfile:!0})}var a=i(99),o=i(103),s=i(102),r=i(206),l=i(2887),c=i(388),u=i(321),d=i(101),h=d.ViewElementEvent,p=d.ClickEvent,m=d.ScrollElementEvent,g=r.extend({extractData_:function(e){var t,i=e.user.getLivestreamRecordList(),n=i&&i.getRecords([]);if(i&&n.length)return this.user_=e.user,this.records_=n.map(function(e){return{streamId:e.getStreamId(),finishedAt:c.profileLivestreamSection(1e3*e.getLivestreamFinishedAt()),previewSrc:e.getPreview().getPreviewUrl(),viewersCount:e.getViewersCount()}}),this.view_||(this.view_=this.registerView(new l),this.view_.on(l.ACTIONS.CLICK,this.onClick_).on(l.ACTIONS.SCROLL,this.onScroll_)),this.view_.update({records:this.records_}),t=n.length,s.track(h,{element:897,count:t}),this.view_.getElement()},onClick_:function(e){var t=this.user_.getUserId(),i=u.get(),o=i.id,r=i.name;if(o&&o!==t){var l="".concat(a.get(736).replace("{0}",r)," ").concat(a.get(737));window.confirm(l)&&n(t,e)}else n(t,e);!function(e){s.track(p,{element:764,parent_element:897,position:e})}(this.records_.findIndex(function(t){return t.streamId==="".concat(e)}))},onScroll_:function(e){!function(e,t){s.track(m,{direction:6,reached_end:e,element:897,position:t})}(e.reachedEnd,e.position)},getName:function(){return"live-streams"}},"LivestreamsSection");e.exports=g},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(100),o=i(109),s=i(2888),r={CLICK:"click",SCROLL:"scroll"},l=o.extend({events:(0,n.default)({},"click ".concat(".js-recorded-stream"),"onClick_"),update:function(e){this.$el.html(s.render(e)),this.scrollContainer_=this.$(".js-recorded-streams-container")[0],this.onScrollThrottled_=a.throttle(this.onScroll_,300),this.scrollContainer_.addEventListener("scroll",this.onScrollThrottled_)},onDestroy:function(){this.scrollContainer_.removeEventListener("scroll",this.onScrollThrottled_)},onClick_:function(e,t){this.trigger(r.CLICK,t.dataset.id)},onScroll_:function(){var e=this.scrollContainer_.scrollLeft+document.body.clientWidth,t=this.scrollContainer_.scrollWidth-e==0,i=this.$(".js-recorded-stream")[0].scrollWidth,n=Math.ceil(e/(i+8))-1;this.trigger(r.SCROLL,{reachedEnd:t,position:n})}},"LivestreamsView");l.ACTIONS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(518),s=i(519),r=i(520),l=i(521),c=i(522),u=i(106),d=i(120),h=d.Header2,p=d.P3;e.exports=i(108)("ProfileSectionLivestreamRecordList",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"profile-info__title"},n.createElement(h,null,a.get(770))),n.createElement("div",{className:"profile-info__content"},n.createElement(o,{layout:{type:o.layoutTypes.ROW,size:o.sizeTypes.SMALL},extraClass:"js-recorded-streams-container"},e.records&&e.records.map(function(e){return n.createElement(s,{key:e.streamId},n.createElement(r,{src:e.previewSrc}),n.createElement(l,{extraClass:"js-recorded-stream",dataId:e.streamId},n.createElement(u,{name:"generic-media-play-hollow",size:"md"})),n.createElement(c,{position:c.positionTypes.OUTSET,extra:n.createElement("div",{className:"profile-livestream-record-label"},n.createElement(p,{align:"center",dangerous:!0},e.finishedAt))}))}))))})},function(e,t,i){"use strict";function n(e,t){var i=e.getProfileFields([]).find(function(e){return e.getType()===t&&0===e.getRequiredAction(0)});return i?i.getDisplayValue():null}function a(){if(!s.getSync(19).getEnabled()){p.generate(),l.track(b,{element:130});var e={productType:1,back:o.getUrl()};u.navigateToPayment(e,{existingPaymentFlowId:h.trackStart(null,null,2,{product:6})})}}var o=i(103),s=i(132),r=i(131),l=i(102),c=i(15),u=i(165),d=i(215),h=i(216),p=i(149),m=i(140),g=i(128),_=i(206),f=i(2890),v=i(142).getCurrentPage,E=i(101),b=E.ClickEvent,y=E.FavoriteEvent,k={SHARE:"share",VERIFY:"verify"},S=_.extend({viewData_:null,init:function(){S._super.init.apply(this,arguments),this.registerView("headline-section",new f).on(f.ACTIONS.FAVOURITE,this.onFavourite_,this).on(f.ACTIONS.FOLLOW,this.onFollow_,this).on(f.ACTIONS.VERIFY,this.onVerify_,this).on(f.ACTIONS.SHARE,this.onShare_,this).on(f.EVENTS.REFRESH,this.trigger.bind(this,_.EVENTS.REFRESH)).on(f.EVENTS.CLICK_SPP,a)},onParametersUpdate:function(){this.setup_()},onShare_:function(){this.trigger(k.SHARE)},onVerify_:function(){d.verifyByPhoto({activationPlaces:228}),this.trigger(k.VERIFY),l.track(b,{element:270})},extractData_:function(e){var t=this.getView("headline-section");if(!t)return null;var i=this.user_=e.user;this.activationPlace_=this.getParameter("activationPlace");var a=i.getOnlineStatus(4),o=4===i.getVerificationStatus(),s=i.getHasSpp()&&1===i.getGender()&&function(){var e=v();return!!e&&11===e.getScreenName()}(),l=this.viewData_={name:r.getTruncatedName(i.getName(""),20),age:i.getAge(),showVerifiedStatus:o,showSharing:g.canBeShared(i),isFavourite:i.getIsFavourite(!1),showFavourite:this.getParameter("showFavourite"),showSppStatus:s,isFemale:2===i.getGender(),showLikeStatus:2===e.vote.yourVote&&!e.vote.isMatch,showDislikeStatus:3===e.vote.yourVote,showMatchStatus:e.vote.isMatch,showLiveStatus:c.isSupported()&&1===i.getLivestreamStatus(),showFollow:c.isSupported()&&i.hasLivestreamFollowedByMe(),isFollowedByMe:i.getLivestreamFollowedByMe(),animateStatusIconsAfterVote:e.animateStatusIconsAfterVote,online:1===a,idle:2===a,offline:4===a};return 20===i.getAccessLevel()&&(l.infoLines=function(e){return[n(e,12),n(e,10)]}(i)),t.update(l),t.getElement()},getName:function(){return"headline"},onFavourite_:function(){var e=this.user_.getIsFavourite(!1),t={uid:this.user_.getUserId(),folder:4},i=this.successfulFavourite_.bind(this,!e),n=this.setFavourite_.bind(this,e);e?m.getInstance().removeUserFromFolder(t).then(i,n):m.getInstance().addUserToFolder(t).then(i,n),this.setFavouriteData_(!e),l.track(b,{element:55,parent_element:40,has_parent:!0})},onFollow_:function(){var e=this.user_.getLivestreamFollowedByMe(),t={uid:this.user_.getUserId(),folder:34};e?m.getInstance().removeUserFromFolder(t):m.getInstance().addUserToFolder(t),this.user_.setLivestreamFollowedByMe(!e),g.getInstance().updateCache(this.user_.getUserId(),"livestreamFollowedByMe",!e)},setFavouriteData_:function(e){this.user_.setIsFavourite(e),g.getInstance().updateCache(this.user_.getUserId(),"isFavourite",e),m.getInstance().invalidateFolder(m.TYPES.FAVOURITES)},setFavourite_:function(e){this.setFavouriteData_(e),this.getView("headline-section").setFavourite(e)},successfulFavourite_:function(e){m.getInstance().invalidateFolder(m.TYPES.MESSAGES);var t=e?6:7;l.track(y,{encrypted_user_id:this.user_.getUserId(),action_type:t,activation_place:this.getParameter("activationPlace")||10})}},"HeadlineSection");S.ACTIONS=k,e.exports=S},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(25),o=i(109),s=i(2891),r=i(102),l=i(101).ViewElementEvent,c=o.extend({events:{"click .js-favourite-icon-button":"onFavouriteClick_","click .js-follow-icon-button":"onFollowClick_","click .js-profile-verification-badge":"onProfileVerificationBadgeClick_","click .js-sharing-icon-button":"onSharingClick_","click .js-spp-user":"onClickSpp_"},update:function(e){e.animateStatusIconsAfterVote?this.animateStatusIconsShow_(e):(e.showVerifiedStatus&&r.track(l,{element:270}),this.render(e))},render:function(e){var t=s.render(e);this.$el.html(t),this.triggerRefresh()},animateStatusIconsShow_:function(e){var t=this;[["showLikeStatus",".js-like-icon"],["showDislikeStatus",".js-dislike-icon"],["showMatchStatus",".js-match-icon"]].forEach(function(i){var a=(0,n.default)(i,2),o=a[0],s=a[1];e[o]&&t.animateIconShow_(e,s)})},animateIconShow_:function(e,t){var i=this.$(t);0===i.length&&(this.render(e),(i=this.$(t)).addClass("is-hidden"),setTimeout(function(){i.removeClass("is-hidden")},20))},triggerRefresh:function(){this.trigger(c.EVENTS.REFRESH)},onFavouriteClick_:function(e,t){a(t).toggleClass("is-active"),this.trigger(c.ACTIONS.FAVOURITE)},onFollowClick_:function(e,t){a(t).toggleClass("is-active"),this.trigger(c.ACTIONS.FOLLOW)},onSharingClick_:function(){this.trigger(c.ACTIONS.SHARE)},onProfileVerificationBadgeClick_:function(){this.trigger(c.ACTIONS.VERIFY)},onClickSpp_:function(){this.trigger(c.EVENTS.CLICK_SPP)}},"HeadlineSection");c.EVENTS={REFRESH:"refresh",CLICK_SPP:"click_spp"},c.ACTIONS={FAVOURITE:"favourite",FOLLOW:"follow",SHARE:"share",VERIFY:"verify"},e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106),s=i(507),r=i(230),l=i(120).Header1,c=i(404),u=function(e){return e.online?"online":e.idle?"idle":void 0};e.exports=i(108)("ProfileTitle",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"profile-info__title"},n.createElement("div",{className:"profile-title"},n.createElement("div",{className:"profile-title__user qa-headline-text"},n.createElement("div",{className:"profile-title__statuses"},e.showDislikeStatus?n.createElement("span",{className:"profile-title__icon profile-title__icon--dynamic js-dislike-icon"},n.createElement(o,{name:"floating-action-no-inverted"})):null,e.showLikeStatus?n.createElement("span",{className:"profile-title__icon profile-title__icon--dynamic js-like-icon"},n.createElement(o,{name:"floating-action-yes-inverted"})):null,e.showMatchStatus?n.createElement("span",{className:"profile-title__icon profile-title__icon--dynamic js-match-icon"},n.createElement(o,{name:"badge-feature-match"})):null,e.showSppStatus?n.createElement("span",{className:"profile-title__icon js-spp-user"},n.createElement(o,{name:"badge-feature-premium",size:"md",color:"primary"})):null,e.showVerifiedStatus?n.createElement("span",{className:"profile-title__icon"},n.createElement("div",{className:"js-profile-verification-badge","data-qa-verify-status":"full"},n.createElement(s,{status:"full",size:"md"}))):null),n.createElement("div",{className:"profile-title__profile-info"},n.createElement(l,null,n.createElement(r,{name:e.name,age:e.age,status:{online:u(e)}}))),e.showLiveStatus?n.createElement("div",{className:"profile-title__statuses"},n.createElement(c,{size:"md",color:"red",content:a.get(720)})):null),n.createElement("div",{className:"profile-title__actions"},e.showFollow?n.createElement("div",{className:"profile-title__actions-item js-follow-icon-button ".concat(e.isFollowedByMe?"is-active":""),"data-qa":"follow"},n.createElement("div",{className:"icon__content--inactive"},n.createElement(o,{name:"navigation-bar-follow",size:"md"})),n.createElement("div",{className:"icon__content--active"},n.createElement(o,{name:"navigation-bar-followed",size:"md",color:"primary"}))):null,e.showFavourite?n.createElement("div",{className:"profile-title__actions-item ".concat(e.isFavourite?"is-active":""," js-favourite-icon-button"),"data-qa":"favourite"},n.createElement("div",{className:"icon__content--inactive"},n.createElement(o,{name:"generic-star-outlined",size:"md"})),n.createElement("div",{className:"icon__content--active"},n.createElement(o,{name:"generic-star",size:"md",color:"primary"}))):null,e.showSharing?n.createElement("div",{className:"profile-title__actions-item js-sharing-icon-button","data-qa":"sharing"},n.createElement(o,{name:"generic-share",size:"md"})):null))),e.infoLines?n.createElement("div",{className:"profile-info__content"},e.infoLines.map(function(e){return e?n.createElement("div",{key:e},e):null})):null)})},function(e,t,i){"use strict";var n=i(99),a=i(113),o=i(128),s=i(102),r=i(111),l=i(206),c=i(2893),u=i(101).ClickEvent,d=r("BLOCK","UNBLOCK","SHARE"),h=l.extend({extractData_:function(e){if(!e.isOwnProfilePreview&&a.isLoggedIn()){var t=this.view_;t||(t=this.view_=this.registerView(new c).on(d.UNBLOCK,this.trigger.bind(this,d.UNBLOCK)).on(d.BLOCK,this.onBlock_,this).on(d.SHARE,this.onShare_,this));var i=e.user,s=2===i.getGender()?n.get(253):n.get(252);return t.update(Object.assign({ACTIONS:d,sharingText:s,showSharing:o.canBeShared(i),showUnblock:i.getIsBlocked(),showBlock:!i.getIsBlocked()&&!e.isOwnProfile},e)),t.getElement()}},onBlock_:function(){this.trigger(d.BLOCK),s.track(u,{element:49,parent_element:40,has_parent:!0})},onShare_:function(){this.trigger(d.SHARE),s.track(u,{element:50,parent_element:40,has_parent:!0})},getName:function(){return"block-report-share"}},"BlockReportShareSection");h.ACTIONS=d,e.exports=h},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(111),s=i(2894),r=o("BLOCK","UNBLOCK","SHARE"),l=a.extend({events:{"click .js-action":"onClickAction_"},update:function(e){this.$el.html(s.render(e))},onClickAction_:function(e,t){this.trigger(n(t).data("action"))}},"BlockReportShareSection");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(99);e.exports=i(108)("ProfileSectionBlockReportShare",function(e){return n.createElement("div",{className:"profile-info__content js-profile-section"},n.createElement("div",{className:"profile-preview__block qa-additional-actions"},n.createElement("div",{className:"button-wrapper"},e.showSharing?n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"button button--primary button--stroke js-action js-touchable qa-button","data-action":e.ACTIONS.SHARE,disabled:e.isOwnProfilePreview?"disabled":void 0},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},e.sharingText)))):null,e.showBlock?n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"button button--transparent js-action js-touchable qa-button","data-action":e.ACTIONS.BLOCK,disabled:e.isOwnProfilePreview?"disabled":void 0},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},a.get(216))))):null,e.showUnblock?n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"button button--transparent button--stroke js-action js-touchable qa-button","data-action":e.ACTIONS.UNBLOCK,disabled:e.isOwnProfilePreview?"disabled":void 0},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},a.get(8))))):null)))})},function(e,t,i){"use strict";var n=i(129),a=i(111),o=i(2896),s=a("VOTE_YES","VOTE_NO","VIEW_NEXT_PROFILE","VIEW_PREV_PROFILE","CHAT","CRUSH","SMILE"),r=n.extend({loading_:!1,construct:function(e){r._super.construct.call(this),this.parent=e,this.view_=this.registerView("ACTIONS",new o).on(o.EVENTS.VOTE_YES,this.trigger.bind(this,s.VOTE_YES)).on(o.EVENTS.VOTE_NO,this.trigger.bind(this,s.VOTE_NO)).on(o.EVENTS.VIEW_NEXT_PROFILE,this.trigger.bind(this,s.VIEW_NEXT_PROFILE)).on(o.EVENTS.VIEW_PREV_PROFILE,this.trigger.bind(this,s.VIEW_PREV_PROFILE)).on(o.EVENTS.CHAT,this.trigger.bind(this,s.CHAT)).on(o.EVENTS.CRUSH,this.trigger.bind(this,s.CRUSH)).on(o.EVENTS.SMILE,this.trigger.bind(this,s.SMILE)),this.view_.appendTo(this.parent)},updateParameters:function(e){(this.loading_||this.singleProfileData_!==e)&&(r._super.updateParameters.apply(this,arguments),this.singleProfileData_=e,this.render_())},render_:function(){this.view_.update({profileData:this.singleProfileData_,loading:this.loading_})},setLoading:function(e){this.loading_!==e&&(this.loading_=e,this.render_())},swapSmileForChat:function(){this.view_.swapSmileForChat()}},"ProfileButtonsController");r.EVENTS=s,e.exports=r},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(139),s=i(102),r=i(111),l=i(2897),c=i(2899),u=i(101).ClickEvent,d=r("VOTE_YES","VOTE_NO","VIEW_NEXT_PROFILE","VIEW_PREV_PROFILE","CHAT","SMILE","CRUSH"),h=a.extend({viewData_:null,smileAnimationActive_:!1,sections_:null,events:{"click [data-action]":"onProfileAction_"},update:function(e){var t=this.getViewData_(e);this.render(t)},getViewData_:function(e){var t=e.profileData;if(e.loading||!t)return{};var i=t.vote;return{animateButtonsAfterVote:t.animateButtonsAfterVote,showVoteYes:i.allowYes&&2!==i.yourVote&&!i.isMatch,showPrevious:t.adjacentProfiles&&{isDisabled:!t.adjacentProfiles.prev},showNext:t.adjacentProfiles&&{isDisabled:!t.adjacentProfiles.next},ACTIONS:d,showChat:i.allowChat&&!i.allowSmile,showVoteNo:!i.allowChat&&i.allowNo&&3!==i.yourVote,showCrush:i.allowCrush&&(!i.yourVote||1===i.yourVote),showSmile:i.allowSmile}},render:function(e){if(e.animateButtonsAfterVote)this.updateButtonsVisibility_(this.$el,e);else{var t=c.render(e);this.updateButtonsVisibility_(t,e),this.$el.html(t)}},updateButtonsVisibility_:function(e,t){e.find(".js-vote-yes-button").toggleClass("is-hidden",!t.showVoteYes),e.find(".js-vote-no-button").toggleClass("is-hidden",!t.showVoteNo),e.find(".js-crush-button").toggleClass("is-hidden",!t.showCrush),e.find(".js-chat-button").toggleClass("is-hidden",!t.showChat),e.find(".js-smile-button").toggleClass("is-hidden",!t.showSmile)},onProfileAction_:function(e,t){var i=this;if(o.isTouchEventTrusted(e)){var a=n(t).data("action");if(a===d.SMILE){if(this.smileAnimationActive_)return;var r=l({containerEl:n(".js-profile-action-smile-animation"),icon:"badge-smiley",size:"xlg",delay:50}),c=r.start,h=r.stop;setTimeout(function(){h(),setTimeout(function(){i.swapSmileForChat(),i.smileAnimationActive_=!1},500)},700),c(),this.smileAnimationActive_=!0}this.trigger(a),function(e){var t;switch(e){case d.VOTE_YES:case d.VOTE_NO:t=54;break;case d.VIEW_NEXT_PROFILE:t=53;break;case d.VIEW_PREV_PROFILE:t=52;break;case d.CHAT:t=43;break;case d.SMILE:s.track(u,{element:227})}t&&s.track(u,{element:t})}(a)}},swapSmileForChat:function(){n(".js-smile-button").addClass("is-hidden"),n(".js-chat-button").removeClass("is-hidden")},showTooltip:function(){this.$el.find(".js-tooltip").removeClass("is-invisible")},hideTooltip:function(){this.$el.find(".js-tooltip").addClass("is-invisible")}},"ProfileButtonsView");h.EVENTS=d,e.exports=h},function(e,t,i){"use strict";var n=i(100),a=i(2898);e.exports=function(e){function t(){var e;!function(){if(u.length>=40){var e=u.splice(0,20);n.invokeMap(e,"remove")}}(),e=a.render({icon:r,size:l}),u.push(e),s.append(e),i=setTimeout(t,Math.random()*(c||500))}var i,o,s=e.containerEl,r=e.icon,l=e.size,c=e.delay,u=[];return{start:function(){o||(o=!0,t())},stop:function(){o&&(o=!1,clearTimeout(i))}}}},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="sprinkle-animation__icon">').h("Icon",t,{},{name:t.get(["icon"],!1),size:t.get(["size"],!1)},"h").w("</div>")}return e.register("icon-sprinkle/sprinkle-animation-item",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("ProfileActions",function(e){return e.stub?n.createElement("div",{className:"profile-actions"},n.createElement("div",{className:"profile-actions__item"},n.createElement("div",{className:"profile-action-button"}))):e.ACTIONS&&n.createElement("div",{className:"profile-actions"},e.showPrevious&&n.createElement("div",{className:"profile-actions__item profile-actions__item--prev ".concat(e.showPrevious.isDisabled?"is-disabled":""),"data-action":e.ACTIONS.VIEW_PREV_PROFILE},n.createElement("div",{className:"profile-action-button js-touchable","data-qa-profile-action":"prev"},n.createElement(a,{name:"floating-action-prev",supportsRtl:!0}))),n.createElement("div",{className:"profile-actions__item js-vote-no-button","data-action":e.ACTIONS.VOTE_NO},n.createElement("div",{className:"profile-action-button js-touchable","data-qa-profile-action":"no"},n.createElement(a,{name:"floating-action-no"}))),n.createElement("div",{className:"profile-actions__item js-chat-button","data-action":e.ACTIONS.CHAT},n.createElement("div",{className:"profile-action-button js-touchable","data-qa-profile-action":"chat"},n.createElement(a,{name:"floating-action-chat"}))),n.createElement("div",{className:"profile-actions__item js-smile-button","data-action":e.ACTIONS.SMILE},n.createElement("div",{className:"sprinkle-animation js-profile-action-smile-animation"}),n.createElement("div",{className:"profile-action-button js-touchable","data-qa-profile-action":"smile"},n.createElement(a,{name:"floating-action-smile"}))),n.createElement("div",{className:"profile-actions__item js-crush-button","data-action":e.ACTIONS.CRUSH},n.createElement("div",{className:"profile-action-button js-touchable","data-qa-profile-action":"crush"},n.createElement(a,{name:"floating-action-crush"}))),n.createElement("div",{className:"profile-actions__item js-vote-yes-button","data-action":e.ACTIONS.VOTE_YES},n.createElement("div",{className:"profile-action-button js-touchable","data-qa-profile-action":"yes"},n.createElement(a,{name:"floating-action-yes"}))),e.showNext&&n.createElement("div",{className:"profile-actions__item profile-actions__item--next ".concat(e.showNext.isDisabled?"is-disabled":""),"data-action":e.ACTIONS.VIEW_NEXT_PROFILE},n.createElement("div",{className:"profile-action-button js-touchable","data-qa-profile-action":"next"},n.createElement(a,{name:"floating-action-next",supportsRtl:!0}))))})},function(e,t,i){"use strict";var n=i(129),a=i(2901),o=i(102),s=i(103).navigate,r=i(101).ClickEvent,l=n.extend({construct:function(e){l._super.construct.call(this),this.parent=e,this.view_=this.registerView("ACTIONS",new a).on(a.EVENTS.ADD_PHOTOS,this.onAddPhoto_,this).on(a.EVENTS.EDIT_PROFILE,this.onEditProfile_,this),this.view_.appendTo(this.parent)},onStart:function(){this.view_.render()},onAddPhoto_:function(){o.track(r,{element:126}),s("add-photos")},onEditProfile_:function(){o.track(r,{element:127}),s("own-profile-edit")}},"OwnProfileButtonsController");e.exports=l},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(2902),s=a("ADD_PHOTOS","EDIT_PROFILE"),r=n.extend({events:{"click .js-add-photos":"onClickAddPhotos_","click .js-edit-profile":"onClickEditProfile_"},render:function(){this.$el.html(o.render())},onClickAddPhotos_:function(){this.trigger(s.ADD_PHOTOS)},onClickEditProfile_:function(){this.trigger(s.EDIT_PROFILE)}},"OwnProfileButtonsView");r.EVENTS=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("OwnProfileActions",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"profile-actions"},n.createElement("div",{className:"profile-actions__item js-add-photos"},n.createElement("div",{className:"profile-action-button js-touchable"},n.createElement(a,{name:"floating-action-add-photos",color:"primary",size:"stretch"}))),n.createElement("div",{className:"profile-actions__item js-edit-profile"},n.createElement("div",{className:"profile-action-button js-touchable"},n.createElement(a,{name:"floating-action-edit-profile",size:"stretch"})))))})},function(e,t,i){"use strict";var n=i(129),a=i(111),o=i(525),s=i(2906),r=a("EXPAND_PROFILE","VOTE","CRUSH","SCREEN_NAME_CHANGED"),l=n.extend({construct:function(e){l._super.construct.call(this),this.parent=e},init:function(){l._super.init.apply(this,arguments),this.view_=this.registerView("CARD_LIST_VIEW",new o({el:this.parent.get(0)})).on(o.EVENTS.SWIPE_LEFT,this.onVoted_.bind(this,3)).on(o.EVENTS.SWIPE_RIGHT,this.onVoted_.bind(this,2)),this.firstCard_=this.registerCardController_("FIRST_CARD",this.view_.getFirstCardContainer()),this.secondCard_=this.registerCardController_("SECOND_CARD",this.view_.getSecondCardContainer())},updateParameters:function(e){var t=e.firstProfile,i=e.secondProfile;this.resetPosition(),this.firstCard_.updateParameters(t),this.secondCard_.updateParameters(i),this.firstCard_.wasOpened()},resetPosition:function(){this.view_.resetPosition()},unshiftProfile:function(e){var t=this,i=this.firstCard_.getProfileData(),n=this.firstCard_.getCurrentPhoto();this.secondCard_.updateParameters(i,n),this.view_.moveFirstCardOut().then(function(){t.firstCard_.updateParameters(e)}).then(function(){return t.view_.moveFirstCardIn()})},onVoted_:function(e){var t={voteResult:e,profileData:this.firstCard_.getProfileData(),photo:this.firstCard_.getCurrentPhoto()};this.trigger(r.VOTE,t)},showNextProfile:function(e){this.swapCards_(),this.firstCard_.wasOpened(),this.secondCard_.updateParameters(e)},voteYes:function(e){e&&this.scrollToPhoto(e),this.view_.swipeRight()},voteCrush:function(e){var t=this;return this.scrollToPhoto(e),this.isStarted()?Promise.resolve():new Promise(function(i){setTimeout(function(){return i(t.voteCrush(e))},666)})},scrollToPhoto:function(e){e&&this.firstCard_.scrollToPhoto(e)},onCrush_:function(e){this.trigger(r.CRUSH,e)},onExpandProfile_:function(e){this.trigger(r.EXPAND_PROFILE,{photo:this.firstCard_.getCurrentPhoto(),profileData:e.getProfileData()})},swapCards_:function(){var e=this.firstCard_;this.firstCard_=this.secondCard_,this.secondCard_=e,this.view_.swapCards()},getCurrentProfile:function(){return this.firstCard_.getProfileData()},setClientLanguages:function(e){this.clientLanguages=e},updateLayout:function(){this.firstCard_.updateLayout(),this.secondCard_.updateLayout()},registerCardController_:function(e,t){var i=this.registerController(e,new s(t));return i.on(s.EVENTS.EXPAND_PROFILE,this.onExpandProfile_.bind(this,i)),i.on(s.EVENTS.CRUSH,this.onCrush_,this),i},getVoteExplanationWrapper:function(){return this.firstCard_.getVoteExplanationWrapper()}},"EncountersCardListController");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("EncountersVoteIndicator",function(e){return n.createElement("div",{className:"encounters-vote-indicator is-hidden","data-type":"yes"},n.createElement("div",{className:"encounters-vote-indicator__icon encounters-vote-indicator__icon--yes"},n.createElement("div",{className:"floating-icon floating-icon--stretch"},n.createElement(a,{name:"floating-action-yes"}))),n.createElement("div",{className:"encounters-vote-indicator__icon encounters-vote-indicator__icon--no"},n.createElement("div",{className:"floating-icon floating-icon--stretch"},n.createElement(a,{name:"floating-action-no"}))))})},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("EncountersButtons",function(e){return n.createElement("div",{className:"encounters-buttons js-intro-buttons"},n.createElement("div",{className:"encounters-buttons__item encounters-buttons__item--no js-vote-no"},n.createElement("div",{className:"floating-icon floating-icon--stretch"},n.createElement(a,{name:"floating-action-no"}))),n.createElement("div",{className:"encounters-buttons__item encounters-buttons__item--yes js-vote-yes"},n.createElement("div",{className:"floating-icon floating-icon--stretch"},n.createElement(a,{name:"floating-action-yes"}))))})},function(e,t,i){"use strict";function n(){if(!r.getSync(19).getEnabled()){p.generate(),c.track(v,{element:130});var e={productType:1,back:s.getUrl()};d.navigateToPayment(e,{existingPaymentFlowId:h.trackStart(null,null,2,{product:6})})}}var a=i(129),o=i(113),s=i(103),r=i(132),l=i(128),c=i(102),u=i(111),d=i(165),h=i(216),p=i(149),m=i(526),g=i(328),_=i(101),f=_.ViewElementEvent,v=_.ClickEvent,E=u("EXPAND_PROFILE","CRUSH"),b=a.extend({construct:function(e){b._super.construct.call(this),this.parent=e,this.view_=this.registerView(new m({el:this.parent.get(0)})).on(m.EVENTS.EXPAND_PROFILE,this.onExpandProfile_,this).on(m.EVENTS.CRUSH,this.onCrushIconClick_,this).on(m.EVENTS.CLICK_SPP,n),this.gallery_=this.registerController("GALLERY",new g).on(g.ACTIONS.EXPAND_PROFILE,this.onExpandProfileFromGallery_,this).on(g.ACTIONS.CLICK,this.onGalleryClick_,this).on(g.ACTIONS.CRUSH,this.onCrush_,this).on(g.ACTIONS.GALLERY_SLIDE_CHANGE,this.onGallerySlideChange_,this)},updateParameters:function(e,t){if(this.profileData_=e,this.profileData_){var i=e.vote?e.vote.allowCrush:null;this.view_.render({profileData:e,crushButton:i}),e.isSppUser&&e.isMale&&c.track(f,{element:130}),this.gallery_.setGallery(this.view_.getGalleryContainer()),this.gallery_.configure({profileData:e,scrollToPhoto:t,crushUpsellPointer:i})}else this.parent.empty()},scrollToPhoto:function(e){this.gallery_.scrollToPhoto(e)},getProfileData:function(){return this.profileData_},getCurrentPhoto:function(){return this.gallery_.getCurrentPhoto()||this.gallery_.getPhotoFromIndex(0)},onCrushIconClick_:function(){c.track(v,{element:18}),this.onCrush_()},onCrush_:function(){this.trigger(E.CRUSH,this.getCrushParameters())},getCrushParameters:function(){return{profileData:this.profileData_,photo:this.getCurrentPhoto(),seenExplanationScreen:this.gallery_.isCurrentSlideCrushUpsell()}},onExpandProfile_:function(){this.trigger(E.EXPAND_PROFILE,{profileData:this.profileData_
})},checkCrushTooltipStatus_:function(){var e=this.profileData_,t=e.vote.allowCrush,i=e.user;t&&function(e){if(!o.isLoggedIn())return!1;if(!e.getAllowCrush())return!1;var t=l.getInstance();if(o.getIsFirstLogin())return t.markCrushTooltipAsViewed(),!1;if(1!==o.getUser().getGender())return!1;var i=t.canShowCrushTooltip();return t.markCrushTooltipAsViewed(),i}(i)&&!this.gallery_.isCurrentSlideCrushUpsell()&&this.view_.showCrushTooltip()},onGallerySlideChange_:function(){this.gallery_.isCurrentSlideCrushUpsell()&&this.view_.hideCrushTooltip()},onGalleryClick_:function(){2===o.getUser().getGender()&&this.onExpandProfile_()},wasOpened:function(){this.profileData_&&(this.gallery_.currentPhotoViewed(),this.checkCrushTooltipStatus_())},onExpandProfileFromGallery_:function(){2===o.getUser().getGender()&&this.onExpandProfile_()},updateLayout:function(){this.gallery_.updateLayout()},getVoteExplanationWrapper:function(){return this.gallery_.getVoteExplanationWrapper()}},"EncountersCardController");b.EVENTS=E,e.exports=b},function(e,t,i){"use strict";var n=i(100),a=i(2908),o=i(99),s=i(109),r=i(139),l=i(111),c=i(325),u=i(222),d=l("CRUSH"),h=s.extend({events:{"click .js-crush":"onCrushClick_"},init:function(){var e=this;u.on(u.EVENTS.CHANGE,function(){e.profileData_&&e.render(e.profileData_)}),u.get().catch(n.noop)},render:function(e){var t=this;this.profileData_=e;var i={showBigTooltip:!0,tooltipCostText:void 0,buttonCost:""};c.fetch().then(function(e){if(e&&e.error)t.log.error("Fetching of oneClickCrush failed");else{var n=e&&e.getCostRequired(),s=e&&e.getCost();i.oneClickCrush=n&&{cost:s,costText:o.get(338,s)}}t.$el.html(a.render(i))})},showTooltip:function(){var e=this;setTimeout(function(){return e.setTooltipExpanded_(!0)},750),setTimeout(function(){return e.setTooltipExpanded_(!1)},4500)},hideTooltip:function(){this.setTooltipExpanded_(!1)},showCrushAnimation:function(){var e=this;return setTimeout(function(){return e.setAnimationExpanded_(!0)},375),new Promise(function(t){setTimeout(function(){e.setAnimationExpanded_(!1),t()},2250)})},setTooltipExpanded_:function(e){this.isExpanded_=e,this.$(".js-encounters-crush").toggleClass("is-expanded",!1)},setAnimationExpanded_:function(e){this.isExpanded_=e,this.$(".js-encounters-crush-animation").toggleClass("is-expanded",e)},onCrushClick_:function(e){r.isTouchEventTrusted(e)&&this.trigger(d.CRUSH)}},"EncountersCrushView");h.EVENTS=d,e.exports=h},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106);e.exports=i(108)("EncountersCrush",function(e){return n.createElement("div",{className:"encounters-crush js-encounters-crush ".concat(e.oneClickCrush?" is-expanded-test":"")},e.showBigTooltip?n.createElement("div",{className:"encounters-crush__tooltip"},n.createElement("div",{className:"encounters-crush__description"},a.get(572)),n.createElement("div",{className:"encounters-crush__icon js-tooltip-crush"},n.createElement(o,{name:"floating-action-crush"}))):null,n.createElement("div",{className:"encounters-crush__button js-crush"},e.oneClickCrush?n.createElement("div",{className:"crush-cost crush-cost--tooltip"},n.createElement("div",{className:"crush-cost__icon"},n.createElement(o,{name:"generic-coin"})),n.createElement("div",{className:"crush-cost__text"},e.oneClickCrush.cost)):null,n.createElement("div",{className:"floating-icon js-touchable"},n.createElement(o,{name:"floating-action-crush"}))))})},,,,,,,,function(e,t,i){"use strict";var n=i(98),a=i(133),o=i(130),s=i(143),r=i(160),l=i(151),c=i(172),u=i(152),d=i(106);e.exports=i(108)("EncountersNoResults",function(e){return n.createElement(a,null,n.createElement(o,{hpadded:!0,vpadded:!0,align:"center"},n.createElement(s,null,n.createElement(c,null,n.createElement(d,{name:"zero-encounters",size:"jumbo-lg"})),n.createElement(l,{text:e.title}),n.createElement(u,{text:e.message}),n.createElement(r,null,n.createElement("button",{className:"button button--transparent button--lg js-action js-touchable qa-button"},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"},e.action)))))))})},function(e,t,i){"use strict";var n=i(159),a=i(173),o=i(102),s=i(2918),r=i(142),l=r.openPage,c=r.getCurrentPage,u=i(184),d=i(101).ClickEvent,h=n.extend({transition:!1,headerTemplate:null,construct:function(e){this.returnPage_=e,h._super.construct.apply(this,arguments)},init:function(){h._super.init.apply(this,arguments),this.view_=this.registerView(new a),this.view_.setTemplate(s),this.view_.render({adSlot:u.create(u.placements.INTERSTITIAL)})},onStart:function(){var e;h._super.onStart.apply(this,arguments),this.screenName=(e=c())&&e.getScreenName()||204,this.view_.appendTo(this.parent),u.render()},onStop:function(){u.destroy(u.placements.INTERSTITIAL)},onNavigationAction:function(){o.track(d,{element:51,parent_element:438}),l(this.returnPage_,this.returnPage_.getParameters())}},"ExternalAdsFullscreenController");e.exports=h},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout layout--stretched-content"><div class="layout__header">').h("NavigationBar",t,{},{close:t.get(["true"],!1),logo:t.get(["true"],!1),hasWideSides:t.get(["true"],!1)},"h").w('</div><div class="layout__content"><div class="encounters__cards"><div class="encounters__card"><div class="encounters-card"><div id="').f(t.getPath(!1,["data","adSlot"]),t,"h").w('" class="encounters-card__ad" data-qa-ads="interstitial"></div></div></div></div></div></div>')}return e.register("google-ads/google-ad-fullscreen",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";function n(e){return o(e,0)}function a(e){return o(e,1)}function o(e,t){var i=e.getPictures([])[t];return i?b.getImageUrlForSize(i.getDisplayImages(),200,200):null}function s(e){var t=l(e,1);return t&&t.getText()}function r(e){var t=l(e,2);return t&&t.getText()}function l(e,t){return e.getButtons([]).find(function(e){return e.getType()===t})}var c,u=i(3),d=u(i(110)),h=u(i(112)),p=u(i(114)),m=u(i(115)),g=u(i(116)),_=u(i(107)),f=i(98),v=i(102),E=i(306),b=i(169),y=i(2920),k=i(101).ClickEvent,S=(c={},(0,_.default)(c,1,288),(0,_.default)(c,2,65),c),w=function(e){function t(){var e;return(0,d.default)(this,t),(e=(0,p.default)(this,(0,m.default)(t).call(this))).state={isVisible:!0},e}return(0,g.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this.props,t=e.notification,i=e.onClosed,o=t.getPromoBlock();return f.createElement(y,{isVisible:this.state.isVisible,leftImage:n(o),rightImage:a(o),titleText:o.getHeader(),messageText:o.getMssg(),primaryButton:{text:s(o),onClick:this.hideModal.bind(this,1)},secondaryButton:{text:r(o),onClick:this.hideModal.bind(this,2)},secondaryButtonText:r(o),onClosed:i})}},{key:"hideModal",value:function(e){var t=S[e];t&&v.track(k,{element:t}),E.getInstance().notificationHandled(this.props.notification.getId()),this.setState({isVisible:!1})}}]),t}(f.Component);e.exports=w},function(e,t,i){"use strict";var n=i(98),a=i(180),o=i(143),s=i(172),r=i(151),l=i(152),c=i(160),u=i(154),d=i(145),h=i(538);e.exports=function(e){var t=e.isVisible,i=e.leftImage,p=e.rightImage,m=e.titleText,g=e.messageText,_=e.primaryButton,f=e.secondaryButton,v=e.onClosed;return n.createElement(a,{allowClickOutside:!1,isVisible:t,onAnimationOutComplete:v},n.createElement(d,{top:"xlg",bottom:"md",right:"md",left:"md"},n.createElement(o,{isCompact:!0},n.createElement(s,null,n.createElement(h,{size:"md",leftImage:i,rightImage:p,icon:"badge-feature-match"})),n.createElement(r,{text:m}),n.createElement(l,{text:g}),n.createElement(c,null,n.createElement(u,{narrow:!0,color:"liked-you",text:_.text,onClick:_.onClick}),n.createElement(u,{narrow:!0,color:"gray-dark",type:"link",text:f.text,onClick:f.onClick})))))}},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r=i(106),l=i(163),c={size:o.oneOf(["md","lg","xlg"]).isRequired,leftImage:o.string,rightImage:o.string,icon:o.string},u=function(e){var t=e.size,i=e.icon,o=e.leftImage,c=e.rightImage,u=s((0,n.default)({"csms-match-photos":!0},"csms-match-photos--".concat(t),!0));return a.createElement("div",{className:u},a.createElement("div",{className:"csms-match-photos__image csms-match-photos__image--left"},a.createElement(l,{shape:"squared",size:t,image:{src:o}})),a.createElement("div",{className:"csms-match-photos__image csms-match-photos__image--right"},a.createElement(l,{shape:"squared",size:t,image:{src:c}})),a.createElement("div",{className:"csms-match-photos__icon"},a.createElement(r,{name:i,shadow:!0})))};u.propTypes=c,e.exports=u},function(e,t,i){"use strict";var n=i(98),a=i(139),o=i(129),s=i(103),r=i(102),l=i(245),c=i(111),u=i(407),d=i(525),h=i(2923),p=i(2931),m=i(101).ClickEvent,g=c("EXPAND_PROFILE","VOTE","CRUSH","SCREEN_NAME_CHANGED"),_=o.extend({screenName:423,construct:function(e){_._super.construct.call(this),this.parent=e},init:function(){_._super.init.apply(this,arguments),this.promoCardRef=n.createRef(),this.view_=this.registerView("CARD_LIST_VIEW",new d({el:this.parent.get(0)})).on(d.EVENTS.SWIPE_LEFT,this.onVoted_.bind(this,3)).on(d.EVENTS.SWIPE_RIGHT,this.onVoted_.bind(this,2)).on(d.EVENTS.SWIPING,this.onSwiping_,this)},first:function(e){var t=this;this.firstProfileData_=e,e instanceof l?(l.reportEventShow({promoCard:e.encountersPromoCard,context:1}),this.firstCardId_=this.renderReactView(n.createElement(p,{ref:this.promoCardRef,profileData:e,onVoteNo:this.voteNo.bind(this),onVoteYes:this.voteYes.bind(this)}),this.view_.getFirstCardContainer()[0])):this.firstCardId_=this.renderReactView(n.createElement(h,{profileData:e,clientLanguages:this.clientLanguages,onVoteNo:this.voteNo.bind(this),onCrush:this.onCrush_.bind(this),onVoteYes:this.voteYes.bind(this),onScreenNameChange:function(e){return t.trigger(g.SCREEN_NAME_CHANGED,e)},onClickProfileBadge:function(t){if(e.sessionUser&&100!==e.sessionUser.getProfileCompletePercent()){var i={activationPlace:2};t&&(i.profileOption=t),s.navigate("profile-quality",!1,i),r.track(m,{element:942})}}}),this.view_.getFirstCardContainer()[0])},second:function(e){this.secondProfileData_=e,this.secondCardId_=e instanceof l?this.renderReactView(n.createElement(p,{profileData:e}),this.view_.getSecondCardContainer()[0]):this.renderReactView(n.createElement(h,{profileData:e,clientLanaguages:this.clientLanguages,isDummy:!0}),this.view_.getSecondCardContainer()[0])},updateParameters:function(e){var t=e.firstProfile,i=e.secondProfile;this.resetPosition(),this.first(t),this.second(i)},resetPosition:function(){this.view_.resetPosition()},unshiftProfile:function(e){var t=this;this.second(this.firstProfileData_),this.view_.moveFirstCardOut().then(function(){t.first(e)}).then(function(){return t.view_.moveFirstCardIn()})},onVoted_:function(e,t){var i={voteResult:e,profileData:this.firstProfileData_,fromButton:t};this.promoCardRef.current&&(3===e?this.promoCardRef.current.skipPromo():2===e&&this.promoCardRef.current.acceptPromo()),this.trigger(g.VOTE,i),u.trigger(u.EVENTS.VOTED)},onSwiping_:function(e){var t=this.promoCardRef.current;t&&t.setIsSwiping(e)},showNextProfile:function(e){this.removeReactView(this.firstCardId_),this.view_.swapCards(),this.first(this.secondProfileData_),this.second(e)},voteYes:function(e){e&&!a.isTouchEventTrusted(e)||this.view_.swipeRight(e)},voteNo:function(e){e&&!a.isTouchEventTrusted(e)||this.view_.swipeLeft(e)},voteCrush:function(e){var t=this;return this.isStarted()?Promise.resolve():new Promise(function(i){setTimeout(function(){return i(t.voteCrush(e))},666)})},onCrush_:function(){this.trigger(g.CRUSH,{profileData:this.firstProfileData_})},setClientLanguages:function(e){this.clientLanguages=e},getCurrentProfile:function(){return this.firstProfileData_},updateLayout:function(){this.first(this.firstProfileData_)},getVoteExplanationWrapper:function(){return null}},"EncountersCardComponentController");_.EVENTS=g,e.exports=_},function(e,t,i){"use strict";function n(e,t){var i=e.find(function(e){return e.getType()===t&&(!e.getRequiredAction()||0===e.getRequiredAction())});return i&&i.getDisplayValue()}function a(e){g.track(T,{direction:5,reachedEnd:e||!1,parentElement:40})}var o=i(3),s=o(i(110)),r=o(i(112)),l=o(i(114)),c=o(i(115)),u=o(i(123)),d=o(i(116)),h=i(98),p=i(100),m=i(139),g=i(102),_=i(407),f=i(149),v=i(240),E=i(386),b=i(387),y=i(495),k=i(2924),S=i(2928),w=i(2930),C=i(101),T=C.ScrollElementEvent,P=C.ReachBottomEvent,N=C.ViewProfileInfoEvent,I=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).state={titleOpacity:1,scaleButtons:1},i.onScroll=i.onScroll.bind((0,u.default)(i)),i.onVoteYes=i.onVoteYes.bind((0,u.default)(i)),i.onVoteNo=i.onVoteNo.bind((0,u.default)(i)),i.trackScroll=p.throttle(a,300),i.seenProfileInfo=!1,i.reachedBottom=!1,i}return(0,d.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=this.props,i=t.profileData,a=t.clientLanguages,o=t.isDummy,s=t.onCrush,r=t.onScreenNameChange,l=t.onClickProfileBadge;if(!i)return null;var c=i.user.getProfileFields([]),u=n(c,12),d=n(c,10);return o?h.createElement(w,{profileData:i,work:u,education:d,actions:h.createElement(S,{isCrushAllowed:i.vote.allowCrush})}):h.createElement(k,{isMale:1===i.user.getGender(),isCrushAllowed:i.vote.allowCrush},function(t){var n=t.tutorialScrolling,o=t.tutorialVoting,c=t.tutorialCrush;return h.createElement(h.Fragment,null,h.createElement(E,{photo:i.profilePhoto.toJSON(),faceCenter:v.computeFaceCenterPosition(i.profilePhoto),onScroll:e.onScroll,isAnimation:n,content:h.createElement(y,{user:i.user,sessionUser:i.sessionUser,clientLanguages:a,profilePhoto:i.profilePhoto,albumType:7,onBlocked:e.onVoteNo,onScreenNameChange:r,onClickProfileBadge:l})}),h.createElement(b,{user:i.user.toJSON(),work:u,education:d,titleOpacity:e.state.titleOpacity,isCrushAllowed:i.vote.allowCrush,isTutorialScrolling:Boolean(n),isTutorialVoting:Boolean(o),isTutorialCrush:Boolean(c),actions:h.createElement(S,{scaleButtons:e.state.scaleButtons,isCrushAllowed:i.vote.allowCrush,isTutorialScrolling:Boolean(n),isTutorialVoting:Boolean(o),isTutorialCrush:Boolean(c),onVoteNo:e.onVoteNo,onCrush:function(){f.generate(),_.trigger(_.EVENTS.CRUSHED),s()},onVoteYes:e.onVoteYes})}),n,o,c)})}},{key:"onScroll",value:function(e){var t,i=e.scrollTop,n=e.scrollBottom,a=100-Math.min(100,Math.round(100*i/130)),o=Math.max(0,Math.round(100*(70-n)/70));this.seenProfileInfo||(t=this.props.profileData.user.getUserId(),g.track(N,{encryptedUserId:t,gesture:4,activationPlace:2,modeConnection:6}),this.seenProfileInfo=!0),100===o?(_.trigger(_.EVENTS.SCROLLED_TO_BOTTOM),this.reachedBottom||(g.track(P),this.reachedBottom=!0),this.trackScroll(!0)):(_.trigger(_.EVENTS.SCROLLED),this.trackScroll());var s=Math.round(Math.min(a,100)/10)/10,r=Math.round(Math.min(Math.max(a,o),100)/10)/10;s===this.state.titleOpacity&&r===this.state.scaleButtons||this.setState({titleOpacity:s,scaleButtons:r})}},{key:"onVoteYes",value:function(e){m.isTouchEventTrusted(e)&&(_.trigger(_.EVENTS.VOTED),this.props.onVoteYes(e))}},{key:"onVoteNo",value:function(e){e&&!m.isTouchEventTrusted(e)||(_.trigger(_.EVENTS.VOTED),this.props.onVoteNo(e))}}]),t}(h.Component);e.exports=I},function(e,t,i){"use strict";function n(e){m.track(y,{tooltipName:e})}var a=i(3),o=a(i(110)),s=a(i(112)),r=a(i(114)),l=a(i(115)),c=a(i(123)),u=a(i(116)),d=i(98),h=i(178),p=i(407),m=i(102),g=i(2925),_=i(2926),f=i(2927),v="EncountersTutorial::Scrolling",E="EncountersTutorial::Voting",b="EncountersTutorial::Crush",y=i(101).ViewTooltipEvent,k=function(e){function t(){var e;return(0,o.default)(this,t),(e=(0,r.default)(this,(0,l.default)(t).call(this))).state={scrollingVisible:!1,votingVisible:!1,crushVisible:!1,seenScrolling:h.hasKey(v),seenVoting:h.hasKey(E),seenCrush:h.hasKey(b)},e.skipVoting=e.skipVoting.bind((0,c.default)(e)),e.skipCrush=e.skipCrush.bind((0,c.default)(e)),e.dismiss=e.dismiss.bind((0,c.default)(e)),e.onScrolled=e.onScrolled.bind((0,c.default)(e)),e.onScrollToBottom=e.onScrollToBottom.bind((0,c.default)(e)),e}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.state.seenScrolling&&this.state.seenCrush||p.on(p.EVENTS.SCROLLED,this.onScrolled),this.state.seenVoting||p.on(p.EVENTS.VOTED,this.skipVoting),this.state.seenCrush||p.on(p.EVENTS.CRUSHED,this.skipCrush),p.on(p.EVENTS.SCROLLED_TO_BOTTOM,this.onScrollToBottom),this.state.seenScrolling||(this.scrollingTimeoutId=setTimeout(this.showScrollingTutorial.bind(this),2e3))}},{key:"componentWillUnmount",value:function(){p.off(p.EVENTS.SCROLLED,this.onScrolled),p.off(p.EVENTS.VOTED,this.skipVoting),p.off(p.EVENTS.CRUSHED,this.skipCrush),p.off(p.EVENTS.SCROLLED_TO_BOTTOM,this.onScrollToBottom),clearTimeout(this.scrollingTimeoutId)}},{key:"showScrollingTutorial",value:function(){var e=this;this.setState({scrollingVisible:!0}),n(64),this.scrollingTimeoutId=setTimeout(function(){e.setState({scrollingVisible:!1}),e.scrollingTimeoutId=setTimeout(e.showScrollingTutorial.bind(e),3e3)},2e3)}},{key:"render",value:function(){return this.props.children({tutorialCrush:this.state.crushVisible&&d.createElement(f,{onDismiss:this.skipCrush,isMale:this.props.isMale}),tutorialScrolling:this.state.scrollingVisible&&d.createElement(g,{onDismiss:this.dismiss}),tutorialVoting:this.state.votingVisible&&d.createElement(_,{onDismiss:this.dismiss})})}},{key:"onScrolled",value:function(){this.state.seenScrolling||(clearTimeout(this.scrollingTimeoutId),this.setState({scrollingVisible:!1,seenScrolling:!0}),h.saveString(v,1)),this.state.crushVisible&&this.skipCrush(),this.setState({votingVisible:!1})}},{key:"skipVoting",value:function(){this.setState({votingVisible:!1,seenVoting:!0}),h.saveString(E,1)}},{key:"skipCrush",value:function(){this.setState({crushVisible:!1,seenCrush:!0}),h.saveString(b,1)}},{key:"dismiss",value:function(){this.setState({scrollingVisible:!1,votingVisible:!1,crushVisible:!1})}},{key:"onScrollToBottom",value:function(){this.state.seenVoting?!this.state.seenCrush&&this.props.isCrushAllowed&&(this.setState({crushVisible:!0}),n(16)):(this.setState({votingVisible:!0}),n(65))}}]),t}(d.Component);e.exports=k},function(e,t,i){"use strict";var n=i(98),a=i(408);e.exports=function(e){var t=e.onDismiss;return n.createElement(a,{onTouchStart:t},n.createElement("div",{className:"tutorial-scrolling"},n.createElement("div",{className:"tutorial-scrolling__pointer"},n.createElement("svg",{viewBox:"0 0 120 160"},n.createElement("path",{fill:"#fff",d:"M49.27 31a12.81 12.81 0 0 0-12.76 12.78v43.99c-1.97-4.28-5.52-8.9-9.96-10.04-6.05-1.65-13.46 3.2-15.15 8.84-.86 3.14-.3 6.71 1.4 11.08 8.28 19.96 18.48 39.12 30.89 53.67a3.23 3.23 0 0 0 2.4 1.1h43.04a3.2 3.2 0 0 0 1.9-.65c4.59-3.4 8.29-9.2 11.36-16.12a91.92 91.92 0 0 0 6.63-22.77c1.2-7.83 1.2-15.16-.5-21.67-1.64-6.28-6.06-11.5-12.66-12.28-1.55 0-3.2.13-4.58.45a10.68 10.68 0 0 0-3.4-4.64 11.35 11.35 0 0 0-6.77-2.2c-1.88.03-3.6.72-5.13 1.8-.69-1.05-1.4-2.14-2.3-2.8a11.58 11.58 0 0 0-6.87-2.2c-1.65 0-3.25.46-4.78 1.1V43.78c-.14-8.55-6.87-12.8-12.76-12.78zm0 6.39a6.3 6.3 0 0 1 6.38 6.4v33.54a3.3 3.3 0 0 0 2.47 3.16c1.41.33 3-.45 3.6-1.76.71-1.47 3.37-3 5.09-3 .77 0 2.21.33 3.14 1 .93.68 1.64 1.47 1.64 3.8a3.3 3.3 0 0 0 2.45 3.1 3.29 3.29 0 0 0 3.58-1.65c1.3-2.6 2-3.02 3.6-3.05.43 0 1.98.29 2.98 1 1 .7 1.75 1.53 1.75 3.8-.01 1.24.77 2.45 1.91 2.95s2.57.24 3.47-.61c1.2-.6 2.4-.78 3.93-.75 3.8.48 5.78 2.87 7.13 7.64 1.36 4.8 1.41 11.68.3 18.92a86.36 86.36 0 0 1-6.13 21.17c-2.64 5.94-5.87 10.58-8.72 12.98H47.63c-11.2-13.23-21.89-33.55-28.86-50.68-1.45-3.74-1.58-5.88-1.24-7.09a6.99 6.99 0 0 1 7.32-4.39c3.4 1.28 4.23 3.55 5.68 6.14l6.33 12.73a3.28 3.28 0 0 0 3.59 1.66 3.3 3.3 0 0 0 2.44-3.1V43.78a6.3 6.3 0 0 1 6.38-6.39z"}),n.createElement("path",{fill:"#fff",opacity:".5",d:"M36.65 48.2a22 22 0 1 1 25.51-.58v-3.48c-.13-8.55-6.86-12.8-12.75-12.78a12.81 12.81 0 0 0-12.76 12.78v4.07z"})))))}},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(408),s=i(120).P1;e.exports=function(e){var t=e.onDismiss;return n.createElement(o,{onTouchStart:t},n.createElement("div",{className:"tutorial-voting"},n.createElement("div",{className:"tutorial-voting-yes"},n.createElement("div",{className:"tutorial-voting__text"},n.createElement(s,{align:"center",color:"white"},a.get(788))),n.createElement("div",{className:"tutorial-voting__pointer"},n.createElement("svg",{viewBox:"0 0 128 100"},n.createElement("path",{fill:"#fff",d:"M63.8 81.48a1.95 1.95 0 0 1-2.34 1.47A1.98 1.98 0 0 1 60 80.56c.15-.6.28-1.22.4-1.84a1.95 1.95 0 0 1 2.27-1.57 1.98 1.98 0 0 1 1.56 2.3 44.5 44.5 0 0 1-.43 2.03zM65 69.15c.03 1.1-.8 2-1.89 2.05a1.96 1.96 0 0 1-2.01-1.91c-.02-.63-.06-1.26-.1-1.9a1.97 1.97 0 0 1 1.8-2.11 1.96 1.96 0 0 1 2.09 1.82c.05.69.09 1.37.1 2.05zM63.2 57a1.98 1.98 0 0 1-1.4 2.4 1.95 1.95 0 0 1-2.37-1.42 63.05 63.05 0 0 0-.5-1.84c-.3-1.05.3-2.15 1.33-2.45a1.95 1.95 0 0 1 2.42 1.34L63.2 57zm-3.97-11.47c.44 1 0 2.17-1 2.61a1.94 1.94 0 0 1-2.57-1.01 87.05 87.05 0 0 0-.78-1.76 1.99 1.99 0 0 1 .94-2.63 1.94 1.94 0 0 1 2.59.95c.28.62.56 1.23.82 1.85zm-5.49-10.76a2 2 0 0 1-.69 2.7 1.94 1.94 0 0 1-2.67-.7l-.99-1.66a2 2 0 0 1 .65-2.72 1.94 1.94 0 0 1 2.68.66c.35.57.7 1.15 1.02 1.72zM47.2 24.69a2 2 0 0 1-.41 2.76 1.93 1.93 0 0 1-2.73-.41 96.47 96.47 0 0 0-1.15-1.55 2 2 0 0 1 .35-2.77 1.93 1.93 0 0 1 2.74.36l1.2 1.6zm-7.73-9.27a2 2 0 0 1-.03 2.8c-.77.76-2 .75-2.76-.03a68.62 68.62 0 0 0-1.34-1.36 2 2 0 0 1-.05-2.8 1.93 1.93 0 0 1 2.76-.04c.47.47.95.94 1.42 1.43zM30.27 7.5a2 2 0 0 1 .5 2.75 1.94 1.94 0 0 1-2.71.5c-.52-.36-1.04-.71-1.57-1.05a2 2 0 0 1-.6-2.73 1.94 1.94 0 0 1 2.7-.6 53.3 53.3 0 0 1 1.68 1.13zm-10.8-5.74a1.98 1.98 0 0 1 1.16 2.54 1.94 1.94 0 0 1-2.5 1.17 39.65 39.65 0 0 0-1.77-.6 1.98 1.98 0 0 1-1.27-2.49 1.95 1.95 0 0 1 2.45-1.29c.65.2 1.29.43 1.93.67z"})))),n.createElement("div",{className:"tutorial-voting-no"},n.createElement("div",{className:"tutorial-voting__text"},n.createElement(s,{align:"center",color:"white"},a.get(789))),n.createElement("div",{className:"tutorial-voting__pointer"},n.createElement("svg",{viewBox:"0 0 128 100"},n.createElement("path",{fill:"#fff",d:"M64.2 81.48c-.17-.67-.3-1.34-.44-2.02a1.95 1.95 0 1 1 3.83-.74c.12.62.25 1.23.4 1.84a1.98 1.98 0 0 1-1.45 2.38 1.95 1.95 0 0 1-2.35-1.46zM63 69.15c.02-.68.06-1.36.11-2.05a1.96 1.96 0 0 1 2.1-1.82 1.97 1.97 0 0 1 1.8 2.11c-.06.64-.09 1.27-.1 1.9a1.96 1.96 0 0 1-2.02 1.9A1.97 1.97 0 0 1 63 69.16zM64.8 57c.16-.66.34-1.31.52-1.97a1.95 1.95 0 0 1 2.42-1.34c1.04.3 1.63 1.4 1.33 2.45a63.05 63.05 0 0 0-.5 1.84 1.95 1.95 0 0 1-2.38 1.42 1.98 1.98 0 0 1-1.4-2.4zm3.97-11.47l.82-1.84a1.94 1.94 0 0 1 2.6-.95 1.99 1.99 0 0 1 .93 2.63 87.05 87.05 0 0 0-.78 1.76 1.94 1.94 0 0 1-2.57 1.01 1.99 1.99 0 0 1-1-2.6zm5.49-10.76c.33-.57.67-1.15 1.02-1.72a1.94 1.94 0 0 1 2.68-.66 2 2 0 0 1 .65 2.72l-1 1.67a1.94 1.94 0 0 1-2.66.7 2 2 0 0 1-.7-2.71zm6.55-10.08l1.2-1.6a1.93 1.93 0 0 1 2.74-.37 2 2 0 0 1 .35 2.77 96.47 96.47 0 0 0-1.15 1.55 1.93 1.93 0 0 1-2.73.42 2 2 0 0 1-.4-2.77zm7.73-9.27A72.55 72.55 0 0 1 89.96 14a1.93 1.93 0 0 1 2.76.05 2 2 0 0 1-.05 2.8c-.45.44-.9.89-1.34 1.35a1.93 1.93 0 0 1-2.76.03 2 2 0 0 1-.03-2.8zm9.18-7.92a53.3 53.3 0 0 1 1.7-1.14 1.94 1.94 0 0 1 2.69.61 2 2 0 0 1-.6 2.73c-.53.34-1.05.69-1.57 1.05a1.94 1.94 0 0 1-2.71-.5 2 2 0 0 1 .5-2.75zm10.81-5.74c.64-.24 1.28-.46 1.93-.67a1.95 1.95 0 0 1 2.45 1.3 1.98 1.98 0 0 1-1.27 2.47 39.65 39.65 0 0 0-1.76.61 1.94 1.94 0 0 1-2.5-1.17 1.98 1.98 0 0 1 1.15-2.54z"}))))))}},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(408),s=i(120).P1;e.exports=function(e){var t=e.isMale,i=e.onDismiss;return n.createElement(o,{onTouchStart:i},n.createElement("div",{className:"tutorial-crush"},n.createElement("div",{className:"tutorial-crush__text"},n.createElement(s,{align:"center",color:"white"},t?a.get(790):a.get(791))),n.createElement("div",{className:"tutorial-crush__pointer"},n.createElement("svg",{viewBox:"0 0 2 40"},n.createElement("path",{fill:"#fff",d:"M2 38.5a1 1 0 0 1-2 0v-1a1 1 0 0 1 2 0v1zm0-6a1 1 0 0 1-2 0v-1a1 1 0 0 1 2 0v1zm0-6a1 1 0 0 1-2 0v-1a1 1 0 0 1 2 0v1zm0-6a1 1 0 0 1-2 0v-1a1 1 0 0 1 2 0v1zm0-6a1 1 0 0 1-2 0v-1a1 1 0 0 1 2 0v1zm0-6a1 1 0 1 1-2 0v-1a1 1 0 1 1 2 0v1zm0-6a1 1 0 1 1-2 0v-1a1 1 0 1 1 2 0v1z"})))))}},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(116)),c=i(98),u=i(325),d=i(390),h=i(2929),p=i(500),m=i(391),g=i(125),_=g.getLogger("EncountersCardActions"),f=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).state={oneClickCrushCost:null},i}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=this;u.fetch().then(function(t){if(t&&t.error)_.error("Fetching oneClickCrush failed",t);else{var i=t&&t.getCostRequired(),n=t&&t.getCost();i&&n&&e.setState({oneClickCrushCost:n})}})}},{key:"render",value:function(){var e=this.props,t=e.scaleButtons,i=e.isCrushAllowed,n=e.isTutorialVoting,a=e.isTutorialCrush,o=e.onVoteYes,s=e.onVoteNo,r=e.onCrush,l=.38*t+.62;return c.createElement(p,null,c.createElement(m,{scale:l,isHighlighted:n},c.createElement(d,{type:d.Type.NO,onClick:s})),i?c.createElement(m,{scale:l,isHidden:n,isHighlighted:a},c.createElement(d,{type:d.Type.CRUSH,onClick:r}),this.state.oneClickCrushCost?c.createElement(h,{text:this.state.oneClickCrushCost}):null):null,c.createElement(m,{scale:l,isHighlighted:n},c.createElement(d,{type:d.Type.YES,onClick:o})))}}]),t}(c.Component);e.exports=f},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(120).P3;e.exports=function(e){var t=e.text;return n.createElement("div",{className:"profile-action-badge"},n.createElement("div",{className:"profile-action-crush-price"},n.createElement("div",{className:"profile-action-crush-price__media"},n.createElement(a,{name:"generic-coin",size:"xsm"})),n.createElement("div",{className:"profile-action-crush-price__content"},n.createElement(o,{color:"white"},t))))}},function(e,t,i){"use strict";var n=i(98),a=i(386),o=i(387),s=i(240);e.exports=function(e){var t=e.profileData,i=e.work,r=e.education,l=e.actions;return n.createElement(n.Fragment,null,n.createElement(a,{photo:t.profilePhoto.toJSON(),faceCenter:s.computeFaceCenterPosition(t.profilePhoto),isDummy:!0}),n.createElement(o,{user:t.user.toJSON(),vote:t.vote,work:i,education:r,actions:l,isDummy:!0}))}},function(e,t,i){"use strict";function n(e){var t=e.touches&&e.touches[0];return t||(t={pageX:e.pageX,pageY:e.pageY}),t}function a(e){return(0,s.default)({},e.hotpanelData,{context:1})}var o=i(3),s=o(i(127)),r=o(i(110)),l=o(i(112)),c=o(i(114)),u=o(i(115)),d=o(i(123)),h=o(i(116)),p=i(98),m=i(103),g=i(327),_=i(102),f=i(142).waitForPageTransitionFinish,v=i(539),E=i(541),b=i(245),y=i(101),k=y.ClickBannerEvent,S=y.ViewBannerEvent,w=function(e){function t(e){var i;(0,r.default)(this,t),(i=(0,c.default)(this,(0,u.default)(t).call(this,e))).cardRef=p.createRef(),i.onCtaClick=i.onCtaClick.bind((0,d.default)(i)),i.onPhotoClick=i.onPhotoClick.bind((0,d.default)(i)),i.onTouchStart=i.onTouchStart.bind((0,d.default)(i)),i.onTouchMove=i.onTouchMove.bind((0,d.default)(i)),i.onTouchEnd=i.onTouchEnd.bind((0,d.default)(i));var a,o=g(i.onTouchMove);return i.onTouchMove=(a=o.callback,function(e){e.preventDefault();var t=n(e);a({x:Math.max(0,t.pageX),y:Math.max(0,t.pageY)})}),i.resetMoveBuffer=o.reset,i}return(0,h.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e;this.bindTouchEvents(),e=this.props.profileData.encountersPromoCard,_.track(S,a(e))}},{key:"componentWillUnmount",value:function(){this.unbindTouchEvents()}},{key:"render",value:function(){var e=this.props.profileData;return p.createElement(v,{context:1,cardMode:!0,cardRef:this.cardRef,headerData:e.getHeaderData(),promoCard:e.encountersPromoCard,onCtaClick:this.onCtaClick,onPhotoClick:this.onPhotoClick})}},{key:"skipPromo",value:function(){E.getInstance().skipPromo({id:this.props.profileData.encountersPromoCard.id,context:1}),b.reportEventSkip({promoCard:this.props.profileData.encountersPromoCard,context:1})}},{key:"acceptPromo",value:function(){E.getInstance().acceptPromo({id:this.props.profileData.id,context:1})}},{key:"onCtaClick",value:function(){var e=this.props.profileData,t=e.encountersPromoCard;!function(e){_.track(k,a(e))}(t),e.performPrimaryCta({promoCard:t,context:1})}},{key:"onPhotoClick",value:function(){this.goToPromoCardsGallery()}},{key:"goToPromoCardsGallery",value:function(){m.navigate("promo-cards-gallery",{userSubstitute:this.props.profileData,context:1})}},{key:"onTouchStart",value:function(e){var t=n(e);this.didMove=!1,this.isSwipedUp=!1,this.distX=this.startX=this.currX=0,this.distY=this.startY=this.currY=0,this.pointX=t.pageX,this.pointY=t.pageY}},{key:"onTouchMove",value:function(e,t){var i=t.x-this.pointX,n=t.y-this.pointY;this.currX+=i,this.currY+=n,this.pointX=t.x,this.pointY=t.y;var a=this.currX-this.startX,o=this.currY-this.startY;this.navigateIfSwipedUp(a,o)||(this.distX=a,this.distY=o)}},{key:"onTouchEnd",value:function(){this.resetMoveBuffer()}},{key:"navigateIfSwipedUp",value:function(e,t){var i=this;return this.didMove||(this.isSwipedUp=Math.abs(e)<50&&Math.abs(t)>50&&t<0),!!this.isSwipedUp&&(this.didMove=!0,this.unbindTouchEvents(),this.goToPromoCardsGallery(),f(function(){i.bindTouchEvents()}),!0)}},{key:"setIsSwiping",value:function(e){e?this.unbindTouchEvents():this.bindTouchEvents()}},{key:"bindTouchEvents",value:function(){var e=this.cardRef.current;e.addEventListener("touchstart",this.onTouchStart),e.addEventListener("touchmove",this.onTouchMove),e.addEventListener("touchend",this.onTouchEnd)}},{key:"unbindTouchEvents",value:function(){var e=this.cardRef.current;e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),e.removeEventListener("touchend",this.onTouchEnd)}}]),t}(p.Component);e.exports=w},function(e,t,i){"use strict";function n(e){var t=e.logoUrl,i=e.title,n=e.subtitle,o=e.onLogoClick,r=e.onSubtitleClick;return a.createElement("div",{className:"campaign-header"},t?a.createElement("div",{className:"campaign-header__media"},a.createElement(s,{size:"xxsm",image:{src:t},onClick:o})):null,a.createElement("div",{className:"campaign-header__content"},a.createElement("div",{className:"campaign-header__title"},i),n?a.createElement("div",{className:"campaign-header__subtitle"},a.createElement("span",{onClick:r},n)):null))}t.__esModule=!0,t.default=void 0;var a=i(98),o=i(104),s=i(163),r={logoUrl:o.string,title:o.string.isRequired,subtitle:o.string,onLogoClick:o.func,onSubtitleClick:o.func};n.propTypes=r;var l=n;t.default=l,e.exports=t.default},function(e,t,i){"use strict";function n(e){var t=e.cardMode,i=e.innerRef,n=e.headerBlock,o=e.title,_=e.text,f=e.photoUrl,v=e.onClick,E=e.ctaText,b=e.onCtaClick,y=e.swipeText,k=e.isLoading,S=e.isDisabled,w=s({"promo-card":!0,"promo-card--card-mode":t}),C=!!o||!!_||!!y,T=E&&b;return a.createElement("div",{className:w,ref:i,onClick:v},a.createElement(g,{type:g.TYPES.IMAGE,image:{src:f,fit:g.FIT.COVER,preload:!0}}),C?a.createElement("div",{className:"promo-card__media-shadow"}):null,a.createElement("div",{className:"promo-card__inner"},n?a.createElement(a.Fragment,null,a.createElement("div",{className:"promo-card__top-shadow"}),a.createElement("div",{className:"promo-card__header"},n)):null,a.createElement("div",{className:"promo-card__content"},a.createElement(l,null,a.createElement(c,{text:o,color:"white"}),a.createElement(u,{text:_,color:"white"}),T?a.createElement(d,null,a.createElement(m,{color:"white",text:E,isLoading:k,isDisabled:S,onClick:b,dataQA:{"data-qa":"promo-card-cta"}})):null,y?a.createElement(h,null,a.createElement("div",{className:"promo-card__swipe"},T?null:a.createElement(p,{name:"generic-chevron-up",size:"md"}),a.createElement(r,null,y))):null))))}var a=i(98),o=i(104),s=i(117),r=i(120).P3,l=i(143),c=i(151),u=i(152),d=i(160),h=i(396),p=i(106),m=i(154),g=i(258),_={cardMode:o.bool,headerBlock:o.node,title:o.string,text:o.string,photoUrl:o.string.isRequired,onClick:o.func,ctaText:o.string,onCtaClick:o.func,swipeText:o.string,isLoading:o.bool,
isDisabled:o.bool,innerRef:o.any};n.propTypes=_,e.exports=n},function(e,t,i){"use strict";var n=i(3)(i(127)),a=i(113),o=i(175),s=i(212),r=i(128),l=i(121),c=i(503),u=i(251),d=i(126),h=i(2935),p=i(326),m=i(405),g=i(279),_=i(531),f=i(532),v=i(187),E=i(244),b=i(533),y=i(534),k=i(535),S=i(197),w=i(243),C=i(124),T=i(536),P=i(537),N=i(136),I=i(105).NoMoreSearchResults,x=l.extend({encountersPage:!0,transition:!1,headerTemplate:T,hasRendered_:!1,activationPlace:2,clientSource:1,screenName:11,createElement:function(){return N({className:"encounters"})},construct:function(){var e=this;x._super.construct.apply(this,arguments),this.searchCriteriaController_=new g({onCloseButtonClick:function(){return e.closeFilter_()},onSaveButtonClick:function(){return e.saveFilter_()},searchType:1,activationPlace:this.activationPlace,enableActivityCriteria:!1,enableLocationCriteria:!1,enableDistanceCriteria:!0})},init:function(){x._super.init.apply(this,arguments),this.noResultsScreen_=_({onExpandFilter:this.searchCriteriaController_.start.bind(this.searchCriteriaController_)});var e=this.view_=this.registerView(new h({el:this.parent.get(0),noResultsScreen:this.noResultsScreen_.element})).on(h.EVENTS.UNDO_VOTE,this.onUndoVote_,this).on(h.EVENTS.VIEW_LIKED_YOU,b);this.actionHandler_=this.registerController("ACTION_HANDLER",new m).on(m.EVENTS.QUOTA_PROCESSING,this.onPaymentProcessing_,this).on(m.EVENTS.QUOTA_PROCESSED,this.onPaymentProcessed_,this),this.profileController_=this.registerController("PROFILE",new p({reportUserContext:1,parent:e.getProfileContainer()})).on(p.EVENTS.VOTE,this.onVoteProfile_,this).on(p.EVENTS.CRUSH,this.onCrushProfile_,this).on(p.EVENTS.GALLERY_CLICK,this.onGalleryClick_,this).on(p.EVENTS.BLOCKED,this.onBlockProfile_,this),this.invitesController_=this.registerController("INVITES",c.getInstance()).on(c.EVENTS.INTERRUPTING,this.onInviteInterrupt_,this),this.queueManager_=(new f).on(f.EVENTS.NEED_MORE,this.loadEncounters_,this),s.on(s.EVENTS.CHANGE,this.onBadgeChanged_,this),o.getInstance().on(o.EVENTS.INVALIDATED,this.onEncountersInvalidated_,this),this.voteNoCount_=0,this.jinba=new v("Encounters"),this.voteTimer=new v("Encounters/vote")},onStart:function(){x._super.onStart.apply(this,arguments),this.buyingCrush_=!1,this.updateNavigationBar({showUndo:!1}),this.hasRendered_||this.noResultsScreen_.clear(),this.view_.showZeroCase(!1),this.showLoading_(),this.onParametersUpdate(),this.invitesController_.updateParameters({returnRoute:"encounters"})},onStop:function(){x._super.onStop.apply(this,arguments),this.searchCriteriaController_.stop(),this.clearUndoVoteTimeout_()},onNavigationAction:function(e){e!==l.BUTTONS.OPEN_FILTER?x._super.onNavigationAction.apply(this,arguments):this.searchCriteriaController_.start()},showLoading_:function(){this.loadingVisualState_=!0,this.view_.showLoading(),this.profileController_.showLoading()},hideLoading_:function(){this.loadingVisualState_=!1,this.view_.hideLoading(),this.profileController_.hideLoading()},onParametersUpdate:function(){var e=this;this.hasRendered_?setTimeout(function(){e.hideLoading_()},200):this.loadEncounters_()},getNavigationActions:function(){return{menu:!0}},loadEncounters_:function(){var e=this;this.sessionUser||!a.isLoggedIn()?o.getInstance().trackNext().get({context:this.clientSource}).then(this.onDataReceived_.bind(this),this.onDataError_.bind(this)):r.getInstance().get({id:a.getUserId(),clientSource:this.clientSource}).then(function(t){e.sessionUser=t,e.loadEncounters_()})},onDataReceived_:function(e){var t=this;if(this.isStarted()){if(!e||e instanceof I)return this.noResultsScreen_.setNotMoreSearchResults(e),this.queueManager_.length()||!this.profileController_.isEmpty()&&this.hasRendered_||this.showNoResultsScreen_(),void this.hideLoading_();var i=e.encounters,n=e.isCached,a=e.hasLikedYouEntry,o=i.map(function(e){return new w({activationPlace:t.activationPlace,clientSource:t.clientSource,sessionUser:t.sessionUser,isCached:n,searchResult:e})});this.queueManager_.set(o);var r=this.queueManager_.shift();this.profileController_.updateParameters(r),this.profileController_.profileOpened(),this.view_.showZeroCase(!1),this.allowLikedYou_=a,s.get().then(function(e){e&&t.updateLikedYouEntry_(e[6])}),this.hideLoading_(),this.hasRendered_=!0,this.jinba.waitForImage(r.largeProfilePhoto).stop().then(function(){t.readyForVrt(),E(t,"Encounters interactive (legacy)")})}},onEncountersInvalidated_:function(){this.hasRendered_=!1,this.queueManager_.set([]),this.isStarted()&&this.loadEncounters_()},setQaAttributes_:function(e){this.element.attr({"data-qa-user-id":e.id,"data-qa-user-gender":e.gender})},updateLikedYouEntry_:function(e){this.updateNavigationBar({likedYou:this.allowLikedYou_&&e>0})},onBadgeChanged_:function(e,t){6===e.getFolder()&&t>0&&this.updateLikedYouEntry_(e.getIntValue())},onVoteProfile_:function(e){var t=this,i=e.voteResult,n=e.photo,o=e.profileData;if(!this.loadingVisualState_)if(this.voteTimer.start(),this.clearUndoVoteTimeout_(),o.isAnonymous&&a.isLoggedIn())this.voteTimer.abort();else{this.voteTimer.start(),this.actionHandler_.vote({profileData:o,voteResult:i,photo:n}).catch(function(e){if(t.voteTimer.abort(),!(e instanceof w))throw e;t.profileController_.updateParameters(e),t.setQaAttributes_(e)}),y.trackVote(i,o.id,!0);var s=this.queueManager_.shift();3===i&&this.voteNoCount_++,this.updateHeader_(o,i),u.regenerateId(),this.trackHotPanelScreen(),s?(this.profileController_.updateParameters(s),this.profileController_.profileOpened(),this.setQaAttributes_(s),this.voteTimer.waitForImage(s.largeProfilePhoto).stop()):(this.hasRendered_=!1,this.profileController_.clear(),this.voteTimer.abort(),this.noResultsScreen_.isEmpty()?this.showLoading_():this.showNoResultsScreen_()),window.scrollTo(0,0),P()}},updateHeader_:function(e,t){var i=this,a=e.vote.theirVote,o=k({voteNoCount:this.voteNoCount_,yourVote:t,theirVote:a});o.undoTooltipText&&y.trackUndotooltip(o.missedMatch),this.updateNavigationBar(o),o.undoTooltipText&&(this.clearUndoVoteTimeout_(),this.headerToolTipHideTimeout_=setTimeout(function(){i.updateNavigationBar((0,n.default)({},o,{undoTooltipText:!1}))},5e3))},clearUndoVoteTimeout_:function(){clearTimeout(this.headerToolTipHideTimeout_)},showNoResultsScreen_:function(){this.view_.showZeroCase(!0),this.noResultsScreen_.trackView()},onCrushProfile_:function(e){var t=this,i=e.photo,n=e.profileData,a=e.seenExplanationScreen;this.buyingCrush_||(this.buyingCrush_=!0,this.actionHandler_.crushVote({profileData:n,photo:i,seenExplanationScreen:a}).then(function(e){t.buyingCrush_=!1;var i=e.notification?e.notification.getMessage():null;2===e.vote&&(t.onVoteProfile_({profileData:n,voteResult:e.vote,photo:t.profileController_.getCurrentPhoto()}),i&&C.showNotification({type:C.TYPES.INFO,text:i}))},function(){t.buyingCrush_=!1}),y.trackVote("crush",n.id,!0))},onBlockProfile_:function(){var e=this.queueManager_.get(0);this.updateNavigationBar({showUndo:!1}),this.profileController_.updateParameters(e),this.profileController_.profileOpened(),this.setQaAttributes_(e),u.regenerateId(),o.getInstance().removeBlockedUser(e.id),window.scrollTo(0,0)},onUndoVote_:function(){var e=this.actionHandler_.undoVote();this.queueManager_.rollback(),this.profileController_.updateParameters(e),this.profileController_.profileOpened(),this.setQaAttributes_(e),this.view_.showZeroCase(!1),this.updateNavigationBar({showUndo:!1}),y.trackUndo(e)},onPaymentProcessing_:function(){this.showLoading_()},onPaymentProcessed_:function(){this.hideLoading_()},onDataError_:function(e){var t=this,i=S.handleError({error:e,screenName:this.getScreenName(),navigationBar:{logo:!0,actions:this.getNavigationActions()}});if(!i)throw e;i.on(i.EVENTS.REFRESH,function(){return t.loadEncounters_()})},attachHeaderView_:function(e){e.appendTo(this.view_.getHeaderContainer())},onInviteInterrupt_:function(e){this.actionHandler_.setIsInterrupted(e)},onGalleryClick_:function(){1===a.getUser().getGender()&&this.profileController_.showFullscreenGallery()},saveFilter_:function(){var e=this;this.searchCriteriaController_.save().then(function(){e.closeFilter_()})},closeFilter_:function(){this.searchCriteriaController_.stop(),this.trackHotPanelScreen()},updateNavigationBar:function(e){(e=e||{}).hasOwnProperty("showLogo")||(e.showLogo=!0),e.partner_id||(e.partner_id=d.get("partner_id")),x._super.updateNavigationBar.call(this,e)}},"EncountersPage");e.exports=x},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(504),s=a("UNDO_VOTE","VIEW_LIKED_YOU"),r=n.extend({events:{"click .js-undo-vote":"onUndoVote_","click .js-liked-you":"onLikedYou_"},init:function(){r._super.init.apply(this,arguments),this.$el.append(o.render({navigationActions:{menu:!0}})),this.$el.find(".js-no-results-screen").html(this.options.noResultsScreen),this.$el.addClass("is-legacy"),this.originalClass_=this.el.className},getProfileContainer:function(){return this.$el.find(".js-encounters-profile")},showZeroCase:function(e){this.$el.toggleClass("is-zero-case",e)},showProfileView:function(){this.getProfileContainer().show()},hideProfileView:function(){this.getProfileContainer().hide()},getHeaderContainer:function(){return this.$el.find(".js-header-container")},showFullScreenLoading:function(){r._super.showLoading.apply(this)},hideFullScreenLoading:function(){r._super.hideLoading.apply(this)},onUndoVote_:function(){this.trigger(s.UNDO_VOTE)},onLikedYou_:function(){this.trigger(s.VIEW_LIKED_YOU)}},"EncountersView");r.EVENTS=s,e.exports=r},function(e,t,i){"use strict";var n=i(159),a=i(2937),o=n.extend({transition:!1,headerTemplate:null,pageView_:null,screenName:21,init:function(){o._super.init.apply(this,arguments),this.gallery_=this.registerController(new a(this.parent))},onStart:function(e){this.activationPlace=Number(e.activationPlace),this.screenName=Number(e.screenName),this.gallery_.configure({albums:e.albums,photoId:e.photoId,showPrivate:"1"===e.showPrivate,userId:e.userId}),o._super.onStart.apply(this,arguments)}},"FullscreenGalleryPage");e.exports=o},function(e,t,i){"use strict";var n=i(132),a=i(103),o=i(113),s=i(214),r=i(128),l=i(328),c=l.extend({headerTemplate:null,pageView_:null,layout:l.LAYOUT.FULLSCREEN,construct:function(e){c._super.construct.call(this),this.parent=e},configure:function(e){var t=this,i=e.userId,n=e.photoId,a=e.showPrivate,s=e.albums;return this.userId_=i,this.isOwnProfile_=o.getUserId()===i,this.getActiveGallery().reset(),function(e,t){return e?Promise.resolve(e):r.getInstance().get({id:t}).then(function(e){return e.getAlbums([])})}(s,i).then(function(e){return t.configureGallery_(e,n,a)})},configureGallery_:function(e,t,i){var a=this.photos_=[],o=e.filter(function(e){return 4!==e.getAlbumType()})||[],r=e.find(function(e){return 4===e.getAlbumType()});(i?[r]:o).forEach(function(e){return e.getPhotos([]).forEach(function(t){return a.push({photo:t,album:e,private:i})})});var c=r?r.getCountOfPhotos():0,u=a.find(function(e){return e.photo.getId()===t});this.updateMainGallery({allowAddVideo:s.getInstance().allowAddVideo(),currentSlideIndex:Math.max(a.indexOf(u),0),externalPhotoBlockers:s.getInstance().getExternalPhotoBlockers(e),isOwnProfile:this.isOwnProfile_,photoCoaching:n.isAllowed(n.getSync(143)),photos:a,privatePlaceholderData:{privatePhotosCount:c},showActions:!0,showAddButton:this.isOwnProfile_,showPrivatePhotosBlocker:!i&&c>0,type:i?l.TYPES.PRIVATE:l.TYPES.PUBLIC})},click_:function(){a.back()},onScrollChange_:function(){if(this.isStarted()){c._super.onScrollChange_.apply(this,arguments);var e=this.getCurrentPhoto();if(e){var t={userId:this.userId_,photoId:e.getId()};a.navigate(a.getUrl(),!0,t)}}},onPhotoDeleted_:function(){c._super.onPhotoDeleted_.apply(this,arguments),this.photos_.length||a.back()},onConfirmMakePrivate_:function(){c._super.onConfirmMakePrivate_.apply(this,arguments),a.back()}},"FullscreenGallery");e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(100),o=i(187),s=i(136),r=i(221),l=i(121),c=i(2939),u=i(103),d=u.getLocation,h=u.updateLocation,p=l.extend({transition:!1,headerTemplate:null,activationPlace:9,clientSource:8,screenName:12,createElement:function(){return s({className:"own-profile"})},open:function(e){var t=e.parameters,i=e.activationPlace,n=a.clone(e);if(!t.activationPlace){var o=d().routeName,s=Object.assign({},t,{activationPlace:i||1});h(o,s),n.parameters=s}p._super.open.call(this,n)},init:function(){p._super.init.apply(this,arguments),this.jinba=new o("ProfileOwn")},onStart:function(){p._super.onStart.apply(this,arguments),r.show(),this.reactViewId_=this.renderReactView(n.createElement(c,{readyForVrt:this.readyForVrt.bind(this),jinba:this.jinba,activationPlace:this.getParameter("activationPlace")}),this.parent[0])},onStop:function(){p._super.onStop.apply(this,arguments),r.hide(),this.removeReactView(this.reactViewId_)}},"OwnProfile");e.exports=p},function(e,t,i){"use strict";function n(e){var t={productType:e,back:I.getUrl(),hotPanelData:{activationPlace:9}};L.navigateToPayment(t)}function a(){q.generate(),V.track(X,{element:130}),O.getSync(19).getEnabled()?I.navigate("spp-features",!1):n(1)}function o(){T.open(),V.track(te,{buttonName:1})}function s(){q.generate(),V.track(X,{element:129}),n(13)}function r(){V.track(X,{element:63}),I.navigate("popularity")}function l(){V.track(X,{element:128}),I.navigate("settings")}function c(){V.track(X,{element:163}),I.navigate("own-profile-edit")}function u(){V.track(X,{element:126}),I.navigate("add-photos")}function d(e){V.track(X,{element:136}),I.navigate("add-photos",{async:!0}),e.stopPropagation()}function h(e){return{value:e||0,isLoading:!1}}function p(e){var t=e.hasProfilePhoto()&&""!==e.getProfilePhoto().getPreviewUrl()&&B.getImageUrlForSize(e.getProfilePhoto().getPreviewUrl(),150);return{name:e.getName(),age:e.getAge().toString(10),gender:A.getGenderString(e.getGender()),photoUrl:t,popularity:e.getPopularityLevel(),hasSpp:e.getHasSpp(),isLoading:!1}}var m,g,_,f=i(3),v=f(i(110)),E=f(i(112)),b=f(i(114)),y=f(i(115)),k=f(i(123)),S=f(i(116)),w=f(i(107)),C=i(98),T=i(376),P=i(99),N=i(126),I=i(103),x=i(113),A=i(131),O=i(132),V=i(102),R=i(254),B=i(169),L=i(165),F=i(282),M=i(5),D=i(197),U=i(207),j=i(208),G=i(215),q=i(149),H=i(128),z=i(222),Y=i(2940),$=i(161),W=i(125).getLogger("OwnProfile"),K=i(2941),Q=i(101),X=Q.ClickEvent,Z=Q.ViewElementEvent,J=Q.ViewBannerEvent,ee=Q.ClickBannerEvent,te=Q.ClickButtonEvent,ie=Q.ViewMyProfileEvent,ne=[13,68,65,149,195,165,199],ae=(m={},(0,w.default)(m,2,K.ELEMENTS.SPP),(0,w.default)(m,1,K.ELEMENTS.CREDITS),(0,w.default)(m,4,K.ELEMENTS.ADD_PHOTO),(0,w.default)(m,3,K.ELEMENTS.POPULARITY),m),oe=(g={},(0,w.default)(g,13,K.BANNER_FEATURES_MEDIA.ADD_MORE_PHOTOS),(0,w.default)(g,68,K.BANNER_FEATURES_MEDIA.GET_VERIFIED),(0,w.default)(g,65,K.BANNER_FEATURES_MEDIA.SPP_DELAYED),(0,w.default)(g,149,K.BANNER_FEATURES_MEDIA.CREDITS),(0,w.default)(g,195,K.BANNER_FEATURES_MEDIA.SECURITY_WALKTHROUGH),(0,w.default)(g,165,K.BANNER_FEATURES_MEDIA.MESSENGER_MINI_GAME),(0,w.default)(g,199,K.BANNER_FEATURES_MEDIA.QUALITY_WALKTHROUGH),g),se=(_={},(0,w.default)(_,K.ELEMENTS.CREDITS,38),(0,w.default)(_,K.ELEMENTS.SPP,19),_),re=function(e){function t(e){var i;(0,v.default)(this,t),i=(0,b.default)(this,(0,y.default)(t).call(this,e));var n=$.getSettings().getOwnProfileSettings().getLayoutElements(),a={slot1:n.length>=1&&ae[n[0].getType()],slot2:n.length>=2&&ae[n[1].getType()],slot3:n.length>=3&&ae[n[2].getType()]},o=x.getUser();return i.state={layout:a,user:{name:o.getName(),age:o.getAge().toString(10),gender:A.getGenderString(o.getGender()),isLoading:!0},credits:{value:0,isLoading:!0},promo:{isLoading:!0}},i.onClickBanner=i.onClickBanner.bind((0,k.default)(i)),i.onClickProfilePreview=i.onClickProfilePreview.bind((0,k.default)(i)),i}return(0,S.default)(t,e),(0,E.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.isMounted_=!0,H.getInstance().on(H.EVENTS.INVALIDATED,this.onUserInvalidated,this),z.on(z.EVENTS.CHANGE,this.onCreditsUpdated,this),O.on(O.EVENTS.UPDATE,this.onFeaturesUpdate,this),this.fetchPromoBlock(),this.updateUser().then(function(t){t&&(V.track(ie,{photo_count:t.getPhotoCount(0),activation_place:e.props.activationPlace}),H.getInstance().sendVisiting({fromCache:t.fromCache,id:x.getUserId(),source:8}))})}},{key:"componentWillUnmount",value:function(){this.isMounted_=!1,H.getInstance().off(H.EVENTS.INVALIDATED,this.onUserInvalidated,this),z.off(z.EVENTS.CHANGE,this.onCreditsUpdated,this),O.off(O.EVENTS.UPDATE,this.onFeaturesUpdate,this)}},{key:"updateUser",value:function(e){var t=this;return function(e){var t=H.getInstance(),i={id:x.getUserId(),clientSource:8,userFieldFilter:R.getOwnProfileFilter()};return t.trackNext(),e?t.fetch(i):t.get(i)}(e).then(function(e){return z.trackNext().get().then(function(i){if(t.isMounted_){var n={user:p(e),credits:h(i)};return t.setState(n),t.props.readyForVrt(),t.props.jinba.stop(),n.user.photoUrl||V.track(Z,{element:639}),e}})}).catch(function(e){t.isMounted_&&t.handleUserUpdateError(e)})}},{key:"fetchPromoBlock",value:function(){var e=this;return Y.getInstance().get({context:8,position:11,types:ne}).then(function(t){if(e.isMounted_){var i=null;t.length>=1&&t[0].hasPromoBlocks()&&(i=t[0].getPromoBlocks()[0]),e.promoBlock=i;var n=function(e){if(O.getSync(208).getEnabled())return V.track(Z,{element:623}),{media:K.BANNER_FEATURES_MEDIA.DAILY_REWARDS,isLoading:!1,text:P.get(784)};if(!e)return{media:oe[13],isLoading:!1,text:P.get(660)};var t=e.getPromoBlockType(),i={media:oe[t],isLoading:!1,text:e.getMssg()};if(199===t){var n=e.getGoalProgress();i.progress={value:n.getProgress()}}return i}(i);e.setState({promo:n}),V.track(J,{banner_id:i?i.getPromoBlockType():13,position_id:i?i.getPromoBlockPosition():11})}})}},{key:"onUserInvalidated",value:function(e){var t=e.all,i=e.keys;this.isMounted_&&(t||i.includes(x.getUserId()))&&this.updateUser()}},{key:"onFeaturesUpdate",value:function(e){var t=e.getFeature();this.isMounted_&&[103,36,19].includes(t)&&this.updateUser(!0)}},{key:"onCreditsUpdated",value:function(e){this.isMounted_&&this.setState({credits:h(e)})}},{key:"onClickBanner",value:function(){if(this.state.promo&&this.state.promo.media===K.BANNER_FEATURES_MEDIA.DAILY_REWARDS)return I.navigate("daily-rewards"),void V.track(X,{element:623});if(!this.promoBlock)return I.navigate("add-photos"),void V.track(ee,{banner_id:13,position_id:11});var e=this.promoBlock.getPromoBlockType();if(V.track(ee,{banner_id:e,position_id:this.promoBlock.getPromoBlockPosition()}),65!==e)if(68!==e)if(149!==e){var t=this.promoBlock.getButtons([])[0],i=(new U).setAction(t.getAction()).setBack(I.getUrl()).setClientSource(8).setActivationPlace(9);t.hasRedirectPage()&&i.setRedirectPage(t.getRedirectPage()),t.hasInviteFlow()&&i.setInviteFlow(t.getInviteFlow()),j.handleAction(i)}else n(13);else G.verifyByPhoto({destination:"own-profile-edit/verification"});else I.navigate("spp-trial",!1,{context:8,activationPlace:9,fromBanner:!0})}},{key:"onClickProfilePreview",value:function(){this.state.user.photoUrl?(I.navigate("own-profile-card-preview"),V.track(X,{element:115})):(I.navigate("add-photos"),V.track(X,{element:639}))}},{key:"handleUserUpdateError",value:function(e){var t=this,i=D.handleError({error:e,navigationBar:{title:!1,actions:{menu:!M.supportsTabBar}}});if(!i)throw e;i.on(i.EVENTS.REFRESH,function(){return t.updateUser()})}},{key:"render",value:function(){var e={hasSpp:this.state.user.hasSpp,isLoading:this.state.user.isLoading},t={level:F.getLevel(this.state.user.popularity),value:F.getLevelName(this.state.user.popularity),isLoading:this.state.user.isLoading};if(!t.isLoading&&!t.level){var i=O.isAllowed(O.getSync(103));W.error("OwnProfile - undefined popularitylevel - state.user.popularity is: ".concat(this.state.user.popularity," - popularityEnabled: ").concat(i)),t.isLoading=!0}var n,h={name:this.state.user.name,age:this.state.user.age,gender:this.state.user.gender,photo:this.state.user.photoUrl?{src:this.state.user.photoUrl}:null},p=(n=this.state.layout,Object.keys(n).reduce(function(e,t){var i=n[t],a=se[i];return a&&!O.isAllowed(O.getSync(a))||(e[t]=i),e},{}));return C.createElement(K,{partnerId:N.get("partner_id"),hasTabbar:M.supportsTabBar,userInfo:h,popularity:t,spp:e,promo:this.state.promo,credits:this.state.credits,layout:p,onClickMenu:o,onClickSpp:a,onClickCredits:s,onClickPopularity:r,onClickProfilePreview:this.onClickProfilePreview,onClickSettings:l,onClickEditProfile:c,onClickAddPhotos:u,onClickBanner:this.onClickBanner,onClickAddPhotosBadge:d})}}]),t}(C.Component);e.exports=re},function(e,t,i){"use strict";var n,a=i(135),o=i(105),s=o.ServerGetPromoBlocks,r=o.SupportedPromoBlockTypes,l=a.extend({useCache_:!1,getRequestMessageType:583,getResponseMessageType:584,get:function(e){var t=(new r).setContext(e.context).setPosition(e.position).setTypes(e.types),i=(new s).setRequestedPromos([t]);return l._super.get.call(this,i)}},"PromoBlocksModel");l.getInstance=function(){return n||(n=new l)},e.exports=l},function(e,t,i){"use strict";function n(e){var t,i=e.partnerId,n=e.hasTabbar,v=e.userInfo,E=e.promo,b=e.popularity,y=e.spp,k=e.credits,S=e.layout,w=e.onClickMenu,C=e.onClickSettings,T=e.onClickEditProfile,P=e.onClickBanner,N=e.onClickPopularity,I=e.onClickSpp,x=e.onClickCredits,A=e.onClickAddPhotos,O=e.onClickProfilePreview,V=e.onClickAddPhotosBadge,R=!n,B=(t={},(0,a.default)(t,f.POPULARITY,o.createElement(c,{popularity:b,onClick:N})),(0,a.default)(t,f.SPP,o.createElement(u,{spp:y,onClick:I})),(0,a.default)(t,f.CREDITS,o.createElement(l,{credits:k,onClick:x})),(0,a.default)(t,f.ADD_PHOTO,o.createElement(d,{user:v,onClick:A})),t),L=B[S.slot1],F=B[S.slot2],M=B[S.slot3];return o.createElement("div",{className:"layout layout--centered-content ".concat(n?"h-tabbar-affected":null)},o.createElement("div",{className:"layout__header"},o.createElement(h,null,o.createElement(p,{isWide:R},R?o.createElement(_,{name:"navigation-bar-menu",onClick:w}):o.createElement(_,{name:"navigation-bar-settings",onClick:C})),o.createElement(g,null,o.createElement("svg",{className:"own-profile__navigation-logo"},o.createElement("use",{xlinkHref:"#logo-".concat(i)}))),o.createElement(m,{isWide:R},R?o.createElement(_,{name:"navigation-bar-settings",onClick:C}):null,o.createElement(_,{name:"navigation-bar-edit-profile",onClick:T})))),o.createElement("div",{className:"layout__content"},o.createElement(s,{userInfo:v,onClickUserDetails:O,onClickAddPhotosBadge:V})),o.createElement("div",{className:"layout__content"},o.createElement(r,{promo:E,onClick:P})),o.createElement("div",{className:"layout__footer"},o.createElement("div",{className:"own-profile__grid"},o.createElement("div",{className:"own-profile-grid__slot1","data-qa":"own-profile-grid-slot1"},L),o.createElement("div",{className:"own-profile-grid__slot2","data-qa":"own-profile-grid-slot2"},F),o.createElement("div",{className:"own-profile-grid__slot3","data-qa":"own-profile-grid-slot3"},M))))}var a=i(3)(i(107)),o=i(98),s=i(2942),r=i(2943),l=i(2948),c=i(2949),u=i(2950),d=i(2951),h=i(170),p=i(182),m=i(198),g=i(246),_=i(181),f={POPULARITY:"POPULARITY",SPP:"SPP",CREDITS:"CREDITS",ADD_PHOTO:"ADD_PHOTO"};n.ELEMENTS=f,n.BANNER_FEATURES_MEDIA=r.FEATURES_MEDIA,e.exports=n},function(e,t,i){"use strict";var n=i(3)(i(127)),a=i(98),o=i(99),s=i(230),r=i(163),l=i(120),c=l.Header2,u=l.P3,d=i(204),h={position:"br",icon:{name:"badge-add-photos",size:"xxlg",color:"primary"}};e.exports=function(e){var t=e.userInfo,i=e.onClickUserDetails,l=e.onClickAddPhotosBadge;return a.createElement("div",{className:"own-profile__user-details",onClick:i},a.createElement("div",{className:"own-profile__user-photo","data-qa":"own-profile-user-photo"},a.createElement(d,{src:t.photo&&t.photo.src,render:function(e){var i=e.src;return a.createElement(r,{shape:"circle",size:"stretch",user:(0,n.default)({},t,{photo:i?{src:i}:null}),badge:h,onClickBadge:l})}})),a.createElement("div",{className:"own-profile__user-info","data-qa":"own-profile-profile-info"},a.createElement(c,null,a.createElement(s,{name:t.name,age:String(t.age)}))),a.createElement("div",{className:"own-profile__tap2see"},a.createElement(u,null,t.photo?o.get(577):o.get(660))))}},function(e,t,i){"use strict";function n(e){var t,i,n=e.promo,m=e.onClick,g=n.media||{};return n.isLoading?(t=a.createElement(o,null),i=a.createElement(s,null)):(g.icon&&(t=a.createElement(h,{name:g.icon,size:"stretch",color:g.colorIcon})),g.giftWrap&&(t=a.createElement(d,{variant:g.colorGiftWrap})),n.progress&&(t=a.createElement(r,{progressValue:n.progress.value})),i=a.createElement(p,null,n.text)),a.createElement("div",{className:"own-profile__banner",onClick:n.isLoading?null:m,"data-qa":"own-profile-banner","data-qa-profile-banner":g.dataQa},a.createElement(l,{color:g.colorBackground},a.createElement(c,null,a.createElement("div",{className:"own-profile__banner-media"},t)),a.createElement(u,null,i)))}var a=i(98),o=i(542),s=i(543),r=i(2944),l=i(2945),c=i(2946),u=i(2947),d=i(261),h=i(106),p=i(120).P1;n.FEATURES_MEDIA={INVITE_FRIENDS:{icon:"badge-invite-friends",colorBackground:"white",dataQa:"invite-friends"},ADD_MORE_PHOTOS:{icon:"badge-add-photos-hollow",colorIcon:"white",colorBackground:"billing",dataQa:"add-photos"},GET_VERIFIED:{icon:"generic-verification-hollow",colorBackground:"verification",dataQa:"verify"},SPP_DELAYED:{icon:"generic-premium",colorBackground:"primary",dataQa:"spp-delayed"},CREDITS:{icon:"generic-coin",colorBackground:"primary",dataQa:"credits"},SECURITY_WALKTHROUGH:{icon:"badge-feature-liked-you",colorBackground:"white",dataQa:"security-walkthrough"},MESSENGER_MINI_GAME:{icon:"generic-chat",colorIcon:"primary",colorBackground:"white",dataQa:"mmg"},QUALITY_WALKTHROUGH:{colorBackground:"white",dataQa:"quality-walkthrough"},DAILY_REWARDS:{giftWrap:!0,colorGiftWrap:"1",colorBackground:"white",dataQa:"daily-rewards"}},e.exports=n},function(e,t,i){"use strict";var n=i(98);e.exports=function(e){var t=e.progressValue;return n.createElement("div",{className:"own-profile-progress-circle"},n.createElement("svg",{viewBox:"0 0 100 100",className:"own-profile-progress-circle__svg"},n.createElement("circle",{className:"own-profile-progress-circle__bar",cx:"50%",cy:"50%",r:45.5,fill:"none",stroke:"currentColor",strokeWidth:9}),n.createElement("circle",{className:"own-profile-progress-circle__progress",cx:"50%",cy:"50%",r:45.5,fill:"none",stroke:"currentColor",strokeWidth:9,strokeDasharray:285.8849175,strokeDashoffset:285.8849175*(100-t)/100,strokeLinecap:"round"})),t?n.createElement("div",{className:"own-profile-progress-circle__text","data-qa":"own-profile-progress-text",style:{fontSize:"10px"}},t,"%"):null)}},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r=i(191),l=i(277),c=i(106),u={children:o.node.isRequired,color:o.oneOf(["white","primary","billing","verification"])},d=function(e){var t=e.children,i=e.color,o=s((0,n.default)({"csms-placard-banner":!0},"csms-placard-banner--color-".concat(i),!0));return a.createElement("div",{className:o},a.createElement(r,{isCompact:!0},t,a.createElement(l,null,a.createElement("div",{className:"csms-placard-banner__chevron"},a.createElement(c,{name:"generic-chevron-right",size:"sm"})))))};d.propTypes=u,d.defaultProps={color:"white"},e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(193),s={children:a.node.isRequired},r=function(e){var t=e.children;return n.createElement(o,null,t)};r.propTypes=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(192),s={children:a.node.isRequired},r=function(e){var t=e.children;return n.createElement(o,null,t)};r.propTypes=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(334),s=i(163);e.exports=function(e){var t,i=e.credits,r=e.onClick;0===i.value&&(t={icon:{name:"badge-plus-inverted",size:"sm"}});var l=n.createElement(s,{icon:{name:"generic-coin",size:"stretch",color:"primary"},badge:t}),c=function(e){return e&&Boolean(e.value)}(i);return n.createElement(o,{name:"credits",media:l,label:a.get(79),value:c?i.value.toString(10):a.get(631),valueColor:c?"":"branded",onClick:r})}},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(334),s=i(106);e.exports=function(e){var t=e.popularity,i=e.onClick,r=n.createElement(s,{name:"speedometer-popularity-".concat(t.level),size:"stretch"}),l={"data-popularity-level":t.level};return n.createElement(o,{name:"popularity",media:r,label:a.get(263),value:t.value,valueColor:"popularity-".concat(t.level),isLoading:t.isLoading,onClick:i,dataQa:l})}},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(334),s=i(163);e.exports=function(e){var t,i=e.spp,r=e.onClick;i.hasSpp||(t={icon:{name:"badge-plus-inverted",size:"sm"}});var l=n.createElement(s,{icon:{name:"badge-feature-premium",size:"stretch",color:"primary"},badge:t});return n.createElement(o,{name:"spp",media:l,label:a.get(92),value:i.hasSpp?a.get(67):a.get(256),valueColor:i.hasSpp?"":"branded",isLoading:i.isLoading,onClick:r})}},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(334),s=i(163);e.exports=function(e){var t=e.user,i=e.onClick,r=n.createElement(s,{icon:{name:"badge-add-photos",size:"stretch",color:"primary"}});return n.createElement(o,{name:"photos",media:r,label:"male"===t.gender?a.get(579):a.get(578),value:a.get(674),isLoading:!1,onClick:i})}},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(121),s=i(2953),r=i(25),l=i(103),c=i(102),u=i(2955),d=i(2958),h=i(2962),p=i(2965),m=i(2969),g=i(156),_=i(101).ClickEvent,f=(n={},(0,a.default)(n,11,272),(0,a.default)(n,5,275),(0,a.default)(n,13,275),(0,a.default)(n,14,275),(0,a.default)(n,15,275),(0,a.default)(n,16,275),(0,a.default)(n,17,275),(0,a.default)(n,9,280),(0,a.default)(n,7,276),(0,a.default)(n,6,277),(0,a.default)(n,3,278),(0,a.default)(n,4,279),(0,a.default)(n,8,281),(0,a.default)(n,2,288),n),v=o.extend({headerTemplate:null,pageView_:null,init:function(){v._super.init.apply(this,arguments),this.pageView_=this.registerView(new s({el:this.parent.get(0)})),this.pageView_.on(s.EVENTS.CLEAR,this.clear_,this).render()},onStart:function(){v._super.onStart.apply(this,arguments),this.controller_=this.createController_()},onParametersUpdate:function(){v._super.onParametersUpdate.apply(this,arguments),this.controller_=this.createController_(),this.trackHotPanelScreen()},onStop:function(){v._super.onStop.apply(this,arguments),this.pageView_.showLoading().render(),this.controller_=null,this.removeController("ScreenController")},onNavigationAction:function(e,t){switch(e){case g.SAVE:c.track(_,{element:117}),this.controller_.save().then(function(){l.back()});break;case g.ABOUT_YOU:l.navigate("own-profile-about",r(t).data());break;default:v._super.onNavigationAction.apply(this,arguments)}},clear_:function(){this.controller_.clear()},createController_:function(){var e,t=this,i=this.getProfileOptionType(),n=!1;return this.screenName=f[i]||204,u.isSupport(i)?e=new u(this.pageView_.getContainer(),{profileOptionType:i}):h.isSupport(i)?e=new h(this.pageView_.getContainer(),{profileOptionType:i}):p.isSupport(i)?e=new p(this.pageView_.getContainer(),{profileOptionType:i}):m.isSupport(i)?(n=!0,e=new m(this.pageView_.getContainer(),{profileOptionType:i})):d.isSupport(i)&&(e=new d(this.pageView_.getContainer(),{profileOptionType:i})),e?(this.registerController("ScreenController",e).on(m.STATES.DATA_LOADED,function(i){t.pageView_.update({showFooter:n,allowSave:e.allowSave,title:i.getName("")}),t.readyForVrt()}),e):void this.log.error("Edit profile field id ".concat(i," not supported or not implemented."))},getProfileOptionType:function(){return Number(this.getParameter("profileOptionType"))}},"OwnProfileAboutPage");e.exports=v},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(2954),s=i(156),r=a("CLEAR"),l=n.extend({events:{"click .js-footer":"clear_"},init:function(){l._super.init.apply(this,arguments),this.render()},render:function(){return this.$el.html(o.render({NAVIGATION_ACTIONS:s,title:"...",navigationActions:{back:!0}})),this},clear_:function(){this.trigger(r.CLEAR)},update:function(e){this.$(".js-footer").parent().toggleClass("hidden",!e.showFooter),this.$(".js-save").toggleClass("hidden",!e.allowSave),
this.$(".js-navigation-title").html(e.title)},getTitle:function(e){return e&&e.profileField&&e.profileField.getName()||""},getContainer:function(){return this.$(".js-content")}},"OwnProfileEditView");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137);e.exports=i(108)("OwnProfileAbout",function(e){return n.createElement("div",{className:"layout"},n.createElement("div",{className:"layout__header"},n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:e.title,secondary:n.createElement("div",{className:"navigation-bar__button-text js-save js-navigation","data-action":e.NAVIGATION_ACTIONS.SAVE,"data-qa":"navbar-profile-save"},a.get(30))})),n.createElement("div",{className:"layout__content"},n.createElement("div",{className:"settings-data-entry js-content"})),n.createElement("div",{className:"layout__footer layout__footer--vpadded layout__footer--hpadded"},n.createElement("div",{className:"hint js-footer"},a.get(451))))})},function(e,t,i){"use strict";var n=i(283),a=i(2956),o=[2],s=a.EVENTS,r=n.extend({value_:null,unsaved_:!1,save:function(){var e=this.value_;return e.length>1e3?Promise.reject(new Error("Max size of ".concat(1e3," characters exceeded!"))):(this.unsaved_=!1,r._super.save.call(this,e,this.profileOptionType_))},loadData_:function(e){var t=this,i=e.profileOptionType;return this.profileOptionType_=i,this.getProfileField(i).then(function(e){return t.initView_(e)})},initView_:function(e){var t=e.getDisplayValue(""),i={el:this.parent.get(0),max:1e3,value:t};return this.value_=t,this.view_=this.registerView("MAIN",new a(i)),this.view_.on(a.EVENTS.CHANGE,this.onChange_,this),e},onChange_:function(e){this.value_=e,this.unsaved_=!0}},"AboutYouController");r.isSupport=function(e){return o.includes(e)},r.EVENTS=s,e.exports=r},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(99),s=i(2957),r={CHANGE:"change"},l=a.extend({textareaContainer_:null,textInput_:null,textMirror_:null,counter_:null,max_:1e3,init:function(e){var t=this.$el;return t.html(s.render({MAX_ALLOWED_CHARACTERS_COUNT:e.max})),this.max_=e.max,this.onInput_=this.onInput_.bind(this),this.onInputDebounced_=n.debounce(this.onInput_.bind(this),300),this.textareaContainer_=t.find(".js-textarea-container"),this.textMirror_=t.find(".js-textarea-mirror"),this.counter_=t.find(".js-counter"),this.textInput_=t.find(".js-textarea-input"),this.textInput_.on("keyup",this.onInput_).on("paste",this.onInputDebounced_),this.setValue(e.value||""),l._super.init.apply(this,arguments)},setValue:function(e){this.textInput_.val(e||""),this.textareaContainer_.toggleClass("has-value",""!==e),this.textMirror_.html("".concat(n.escape(e.substring(0,this.max_)),"&#x200b;")),window.scrollTo(0,this.counter_.position().top+this.counter_.height()),this.updateCounter_(e)},onInput_:function(){var e=this.textInput_.val();this.setValue(e),this.trigger(r.CHANGE,e)},updateCounter_:function(e){var t=this.max_-e.length;this.counter_.text(o.get(453,t)),this.counter_.toggleClass("is-overflow",t<1)}},"AboutYouView");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(99);e.exports=i(108)("AboutYou",function(e){return n.createElement("form",{className:"form-uniform",action:""},n.createElement("div",{className:"control control--textarea "},n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"textarea js-textarea-container"},n.createElement("div",{className:"textarea__mirror js-textarea-mirror"}),n.createElement("textarea",{className:"textarea__field js-textarea-input",rows:"1",maxLength:e.MAX_ALLOWED_CHARACTERS_COUNT}),n.createElement("label",{className:"control__label"},a.get(452))),n.createElement("div",{className:"textarea__counter js-counter","data-qa":"textarea-counter"}))))})},function(e,t,i){"use strict";var n=i(283),a=i(2959),o=i(409),s=[5],r=a.EVENTS,l=n.extend({allowSave:!1,profileOptionType_:null,view_:null,loadData_:function(e){var t=this;return this.getClientProfileOption().then(function(i){return t.initView_(i[e.profileOptionType],i.unitType)})},initView_:function(e){return e?(this.profileOptionType_=e.getType(),this.view_=this.registerView("MAIN",new a(this.getViewData_({clientProfileOption:e})))):this.log.error("ProfileOptionChildsController initialized with no clientProfileOption"),e},getViewData_:function(e){var t=e.clientProfileOption,i=t.getInputParts([]).map(function(e){return new o({instance:e})});return{clientProfileOption:t,el:this.parent.get(0),childs:i}}},"ProfileOptionChildsController");l.isSupport=function(e){return s.includes(e)},l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n=i(109),a=i(2960),o=i(156),s=n.extend({events:{},init:function(e){return this.$el.html(a.render({childs:e.childs,NAVIGATION_ACTIONS:o})),s._super.init.apply(this,arguments)}},"ProfileOptionChildsView");s.EVENTS=n.EVENTS,s.NAVIGATION_ACTIONS=o,e.exports=s},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(153);e.exports=i(108)("ProfileOptionChilds",function(e){return o(e.childs,e,function(e){return n.createElement("div",{className:"selector js-navigation","data-action":e.NAVIGATION_ACTIONS.ABOUT_YOU,"data-profile-option-type":e.profileOptionType?e.profileOptionType:void 0,"data-tracking_element":e.elementTracking?e.elementTracking:void 0,"data-qa":e["data-qa"]?e["data-qa"]:void 0,"data-qa-option-type":e["data-qa-option-type"]?e["data-qa-option-type"]:void 0,"data-id":e.id?e.id:void 0},e.iconName?n.createElement("div",{className:"selector__icon selector__icon--label"},n.createElement(a,{name:e.iconName,size:"md"})):null,n.createElement("div",{className:"selector__label"},n.createElement("div",{className:"truncated-text"},n.createElement("div",{className:"truncated-text__full"},e.title),n.createElement("div",{className:"truncated-text__trim selector__label--secondary"},e.value))),e.mode?null:n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(a,{name:"generic-chevron-right",size:"sm",supportsRtl:"true"})))})})},function(e,t,i){"use strict";var n,a=i(3)(i(107));e.exports=(n={name:"name"},(0,a.default)(n,0,"unknown"),(0,a.default)(n,1,"location"),(0,a.default)(n,2,"about_me"),(0,a.default)(n,3,"relationship"),(0,a.default)(n,4,"sexuality"),(0,a.default)(n,5,"appearance"),(0,a.default)(n,6,"living"),(0,a.default)(n,7,"children"),(0,a.default)(n,8,"smoking"),(0,a.default)(n,9,"drinking"),(0,a.default)(n,10,"education"),(0,a.default)(n,11,"languages"),(0,a.default)(n,12,"work"),(0,a.default)(n,13,"height"),(0,a.default)(n,14,"weight"),(0,a.default)(n,15,"body_type"),(0,a.default)(n,16,"eye_color"),(0,a.default)(n,17,"hair_color"),(0,a.default)(n,18,"work_job"),(0,a.default)(n,19,"work_company"),(0,a.default)(n,20,"work_income"),(0,a.default)(n,21,"interested_in"),(0,a.default)(n,22,"work_general"),(0,a.default)(n,10001,"exp_facebook_institution"),(0,a.default)(n,10002,"exp_facebook_graduation_year"),(0,a.default)(n,10003,"exp_facebook_profession"),(0,a.default)(n,10004,"exp_facebook_company_name"),n)},function(e,t,i){"use strict";var n=i(283),a=i(2963),o=[].concat([15,16,17],[7,9,6,3,4,8]),s=a.EVENTS,r=n.extend({profileOptionType_:null,view_:null,save:function(){var e=this.view_.getData();return r._super.save.call(this,e,this.profileOptionType_)},loadData_:function(e){var t=this;return this.profileOptionType_=e.profileOptionType,this.getClientProfileOption().then(function(e){return e[t.profileOptionType_]}).then(function(e){return t.initView_(e)})},initView_:function(e){var t=this,i={profileEditForm:e,el:this.parent.get(0)};return this.view_=this.registerView("MAIN",new a(i)),this.view_.on(s.ITEM_SELECT,function(){return t.trigger(s.ITEM_SELECT,t.view_.getData())}),e}},"SelectController");r.isSupport=function(e){return o.includes(e)},r.EVENTS=s,e.exports=r},function(e,t,i){"use strict";var n=i(100),a=i(111),o=i(109),s=i(99),r=i(2964),l=a("ITEM_SELECT"),c=o.extend({events:{"click .js-input":"onOptionSelect_"},init:function(e){var t=function(e){if(!e||!e.getPossibleValues)return null;var t=e.getPossibleValues().map(function(e){return{value:e.getValue(),displayValue:e.getDisplayValue()||s.get(451)}});return t.length>0?t:null}(e.profileEditForm),i={groupType:e.profileEditForm.getType(),selected:e.profileEditForm.getCurrentOptionId()};!function(e){var t=n.findIndex(e,{value:"None"});t>=0&&(e.push(e[t]),e.splice(t,1))}(t),this.$el.html(r.render({data:i,options:t}))},getData:function(){return this.$el.find("input:checked").val()},onOptionSelect_:function(){this.trigger(l.ITEM_SELECT)}},"SelectView");c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("Select",function(e){return n.createElement("ul",{className:"poll poll--radio"},e.options.map(function(t){return n.createElement("li",{className:"poll__item js-select-option"},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"radio",name:"select-".concat(e.data.groupType),value:t.value,checked:t.value==e.data.selected?"checked":void 0}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},t.displayValue)))}))})},function(e,t,i){"use strict";var n=i(3),a=n(i(168)),o=n(i(4)),s=i(283),r=i(2966),l=i(100),c=i(275),u=[11],d=r.EVENTS,h=s.extend({save:function(){return h._super.save.call(this,this.getData_(),this.profileOptionType_)},loadData_:function(e){var t=this,i=e.profileOptionType;this.profileOptionType_=i;var n=c.getInstance().get(c.TYPE.SPOKEN_MULTILANGUAGE).then(function(e){return e[0]}),a=this.getProfileField(i),s=this.getUser().then(function(e){return e.getSpokenLanguages()});return Promise.all([a,n,s]).then(function(e){var i=(0,o.default)(e,3),n=i[0],a=i[1],s=i[2];return t.updateLevels_(a,s),t.initView_(n,a)})},initView_:function(e,t){var i=this,n={data:t,el:this.parent.get(0)};return this.view_=this.registerView("MAIN",new r(n)),this.view_.on(d.LANGUAGE_SELECT,function(){return i.trigger(d.LANGUAGE_SELECT,i.getData_())}),e},getData_:function(){return this.view_.getData()},updateLevels_:function(e,t){t=t||[];var i=(e=e||[]).getLanguages([]),n=t.map(function(e){return e.getUid()}),o=l.filter(i,function(e){return!n.includes(e.getUid())});return e.setLanguages([].concat((0,a.default)(t),(0,a.default)(o))),e}},"AboutYouController");h.isSupport=function(e){return u.includes(e)},h.EVENTS=d,e.exports=h},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(102),s=i(111),r=i(109),l=i(544),c=i(410).getLevel,u=i(2968),d=i(105).ProfileField,h=i(101).ClickEvent,p=s("LANGUAGE_SELECT"),m=r.extend({events:{"click .js-select-option":"onLanguageSelect_"},init:function(e){var t=e.data.getLanguages().map(function(e){return{displayValue:e.getName(),level:c(e.getLevel()),value:e.getUid()}});this.$el.html(u.render({languages:t}))},getData:function(){var e=this.$el.find("input");return n.map(e,function(e){var t=(e=a(e)).data("level"),i=(new d).setDisplayValue("").setId(e.val()).setType(11);return t&&i.setValue(String(t)),i})},onLanguageSelect_:function(e,t){var i=this;e.preventDefault();var n=this.$el.find(".js-select-option").indexOf(t);o.track(h,{position:n,element:150});var s=a(t).find(".js-input").val();l(function(e){return i.updateLevelForSelection_(s,e)})},updateLevelForSelection_:function(e,t){var i=this.$el.find(".js-languages-".concat(e)),n=!!t,a=n?c(t).level:null,o=n?c(t).title:"";i.find(".js-extra .js-text").text(o),i.find(".js-extra").toggleClass("hidden",!n),i.find(".js-input").prop("checked",n).data("level",a),this.trigger(p.LANGUAGE_SELECT)}},"SelectLanguagesView");m.EVENTS=p,e.exports=m},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="modal">').s(t.get(["levels"],!1),t,{block:i},{}).w('<div class="modal__item js-option"><div class="modal-button modal-button--cancel"><span class="modal-button__text">').h("t",t,{},{k:"19"},"h").w("</span></div></div></div>")}function i(e,t){return e.w('<div class="modal__item js-option" data-level="').f(t.get(["level"],!1),t,"h").w('"><div class="modal-button"><span class="modal-button__text">').f(t.get(["title"],!1),t,"h").w("</span></div></div>")}return e.register("modal.language-level",t),t.__dustBody=!0,i.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(153);e.exports=i(108)("SelectLanguages",function(e){return n.createElement("ul",{className:"poll poll--checkbox"},o(e.languages,e,function(e){return n.createElement("li",{className:"poll__item js-languages-".concat(e.value," js-select-option")},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"checkbox",name:"languages",value:e.value,"data-action":e.action,checked:e.level?"checked":void 0,"data-level":e.level?e.level.level:void 0}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.displayValue)),n.createElement("div",{className:"poll__extra ".concat(e.level?"":"hidden"," js-extra")},n.createElement("div",{className:"language-level"},n.createElement("span",{className:"language-level__text js-text"},e.level?e.level.title:""),n.createElement("div",{className:"language-level__icon"},n.createElement(a,{name:"generic-chevron-right",size:"xsm"})))))}))})},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(283),o=i(2970),s=i(113),r=[13,14],l=o.EVENTS,c=a.extend({appearanceData_:null,profileOptionType_:null,view_:null,save:function(){var e=this.values_[this.selectedIndex_].getValue();return c._super.save.call(this,e,this.profileOptionType_,this.unitType_)},loadData_:function(e){var t=this;return this.getClientProfileOption(this.unitType_).then(function(i){return t.initView_(i[e.profileOptionType],i.unitType)})},initView_:function(e,t){var i;return this.unitType_=t,this.profileOptionType_=e.getType(),this.appearanceData_=(i={},(0,n.default)(i,1,null),(0,n.default)(i,2,null),i),this.view_=this.registerView("MAIN",new o(this.getViewData_({clientProfileOption:e}))).on(o.EVENTS.CHANGE,this.onChange_,this).on(o.EVENTS.SWITCH_UNIT,this.onSwitchUnit_,this),this.onProfileFormData_(e),e},getUserValue_:function(e){var t=e.getCurrentOptionId("0");return e.getPossibleValues([]).find(function(e){return e.getValue()===t})},getViewData_:function(e){var t=e.clientProfileOption,i=e.value;return{clientProfileOption:t,el:this.parent.get(0),gender:s.getUser().getGender(),index:this.selectedIndex_,unit:this.unitType_,value:i}},onChange_:function(e){var t=Math.round(e*(this.values_.length-2)/1e3);t<0?t=0:t>=this.values_.length-1&&(t=this.values_.length-1),this.selectedIndex_=t+1,this.view_.update({value:this.values_[this.selectedIndex_].getDisplayValue()})},onSwitchUnit_:function(){var e=this;1===this.unitType_?this.unitType_=2:this.unitType_=1;var t=this.appearanceData_[this.unitType_];t?this.onProfileFormData_(t):(this.view_.showLoading(),this.getClientProfileOption(this.unitType_).then(function(t){return e.onProfileFormData_(t[e.profileOptionType_])}))},clear:function(){this.selectedIndex_=0,this.view_.update({value:"",reset:!0})},onProfileFormData_:function(e){var t=this.getUserValue_(e),i=t?t.getDisplayValue():e.getDisplayValue();this.appearanceData_[this.unitType_]=e,this.values_=e.getPossibleValues([]),this.selectedIndex_=t?this.values_.indexOf(t):0,this.view_.update(this.getViewData_({value:i,clientProfileOption:e})),this.view_.hideLoading()}},"UnitRangeController");c.isSupport=function(e){return r.includes(e)},c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";var n,a,o,s=i(3)(i(107)),r=i(100),l=i(109),c=i(99),u=i(545),d=i(2971),h={CHANGE:"change",SWITCH_UNIT:"switch"},p=(o={},(0,s.default)(o,13,(n={},(0,s.default)(n,1,c.get(449)),(0,s.default)(n,2,c.get(450)),n)),(0,s.default)(o,14,(a={},(0,s.default)(a,1,c.get(457)),(0,s.default)(a,2,c.get(458)),a)),o),m=l.extend({events:{"click .js-switch-unit":"onSwitchUnit_"},init:function(e){return this.type_=e.clientProfileOption.getType(),this.$el.html(d.render({lexeme:p[this.type_][e.unit]})),this.registerView("slider",new u).on(u.EVENTS.CHANGE,this.trigger.bind(this,h.CHANGE)).appendTo(this.$(".js-slider")).update({permille:this.getPermille(e.index,e.clientProfileOption)}),m._super.init.apply(this,arguments)},update:function(e){"value"in e&&this.$(".js-value").html(e.value||"--"),(e.reset||r.isNumber(e.index))&&this.getView("slider").update({permille:this.getPermille(e.index,e.clientProfileOption)}),e.unit&&this.$(".js-switch-unit").html(p[this.type_][e.unit])},getPermille:function(e,t){if(e&&t){var i=t.getPossibleValues();if(i)return 1e3*e/(i.length-1)}return 500},onSwitchUnit_:function(){this.trigger(h.SWITCH_UNIT)}},"UnitRangeView");m.EVENTS=h,e.exports=m},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("UnitSlider",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"appearance-measure"},n.createElement("div",{className:"appearance-measure__value js-value"},"--"),n.createElement("div",{className:"appearance-measure__extra js-switch-unit"},e.lexeme)),n.createElement("div",{className:"js-slider"}))})},function(e,t,i){"use strict";var n,a=i(3),o=a(i(4)),s=a(i(107)),r=i(25),l=i(100),c=i(113),u=i(103).navigate,d=i(121),h=i(517),p=i(515),m=i(2973),g=i(128),_=i(284),f=i(171),v=i(156),E=i(136),b=(n={},(0,s.default)(n,v.ABOUT_YOU,{name:"own-profile-about"}),(0,s.default)(n,v.ADD_PHOTOS,{name:"add-photos"}),(0,s.default)(n,v.BASIC_INFO,{name:"settings-basic-info"}),(0,s.default)(n,v.FULLSCREEN,{name:"gallery"}),(0,s.default)(n,v.LOCATION,{name:"settings-location"}),(0,s.default)(n,v.PREVIEW,{name:"own-profile-preview"}),(0,s.default)(n,v.PRIVATE_PHOTOS,{name:"private-photos"}),(0,s.default)(n,v.WORK_EDUCATION,{name:"own-profile-work-and-educations"}),(0,s.default)(n,v.ADD_INTERESTS,{name:"own-interests"}),n),y=d.extend({headerTemplate:null,pageView_:null,screenName:271,createElement:function(){return E({qaAttribute:"own-profile-edit"})},init:function(){this.onFetched_=this.onFetched_.bind(this),y._super.init.apply(this,arguments),this.pageView_=this.registerView(new m({el:this.parent.get(0)})),g.getInstance().on(g.EVENTS.INVALIDATED,this.onUserInvalidated_,this),this.registerController("gifts",new h),this.registerController("verification",new p)},onStart:function(){y._super.onStart.apply(this,arguments),this.fetch_(),this.pageView_.reset(),this.pageView_.screenName=this.getScreenName()},onStop:function(){l.isNumber(this.scrollTopBackup_)&&(f().scrollTop=this.scrollTopBackup_,this.scrollTopBackup_=null),y._super.onStop.apply(this,arguments)},onReady:function(){var e=this;y._super.onReady.apply(this,arguments),this.fetchPromise_.then(function(){e.scrollToAnchor_(),e.reFetch&&(e.reFetch=!1,e.fetch_())})},scrollToAnchor_:function(){var e=this.getParameter("anchor");e&&(this.scrollTopBackup_=f().scrollTop,this.pageView_.scrollToAnchor(e))},onNavigationAction:function(e,t){var i=b[e];if(i){var n=l.extend({},i.params,r(t).data());"gallery"===i.name&&Object.assign(n,{screenName:this.screenName}),"add-photos"===i.name&&Object.assign(n,{async:!0}),u(i.name,i.replace,n)}else y._super.onNavigationAction.apply(this,arguments)},fetch_:function(){this.pageView_.showLoading();var e=g.getInstance().get({id:c.getUserId(),clientSource:this.clientSource}),t=_.getInstance().get();this.fetchPromise_=Promise.all([e,t]).then(this.onFetched_)},onFetched_:function(e){var t=(0,o.default)(e,2),i=t[0],n=t[1];this.pageView_.render({clientProfileOptions:n,user:i,giftsSectionElement:this.renderGiftsSection_(i),verificationSectionElement:this.renderVerificationSection_(i)}),this.readyForVrt()},onUserInvalidated_:function(e){this.isActive()?(e.all||e.keys.indexOf(c.getUserId())>-1)&&this.fetch_():this.fetchPromise_&&(this.reFetch=!0)},renderGiftsSection_:function(e){if(e.getReceivedGifts())return this.renderController_("gifts",e)},renderVerificationSection_:function(e){if(e.getVerifiedInformation())return this.renderController_("verification",e)},renderController_:function(e,t){var i=this.getController(e);return i.updateParameters({activationPlace:this.activationPlace,isOwnProfile:!0,source:this.clientSource,user:t}),i.parent}},"OwnProfileEditPage");e.exports=y},function(e,t,i){"use strict";function n(e,t){var i=[];return I.forEach(function(n){var a=e[n];if(a){if(2===n)return;var o=A[n],s={instance:a,clientProfileOptions:t,elementTracking:o,iconName:x[n]};11===n&&(s.title=h.get(82)),i.push(new _(s))}}),i}function a(e,t){var i=e[12],n=e[10],a=[];if(i){var o=A[12];a.push(new _({instance:i,clientProfileOptions:t,elementTracking:o}))}if(n){var s=A[10];a.push(new _({instance:n,clientProfileOptions:t,elementTracking:s}))}return a.length>0?a:null}function o(){p.track(w,{direction:5})}var s,r,l=i(3)(i(107)),c=i(25),u=i(100),d=i(162),h=i(99),p=i(102),m=i(171),g=i(242),_=i(409),f=i(203),v=i(274),E=i(2974),b=i(101),y=b.ElementEnum,k=b.ClickEvent,S=b.ViewElementEvent,w=b.ScrollScreenEvent,C=b.ScrollElementEvent,T=6,P=i(156),N={ACCOUNT:125,ADD_INTERESTS:146,ADD_PHOTO:126,COMPLETENESS_SCORE:131,EDIT_PROFILE_ICON:163,PHOTO:21,POPULARITY:63,PREVIEW:115,PROFILE_PHOTO:42,SETTINGS:128,UPLOAD_PHOTO_CTA:149,UPLOAD_PHOTO_ICON:121,VERIFICATION:31},I=[2,3,4,13,15,6,7,8,9,11],x=(s={},(0,l.default)(s,3,"profile-badge-relationship-small"),(0,l.default)(s,4,"profile-badge-sexuality-small"),(0,l.default)(s,13,"profile-badge-appearance-height-small"),(0,l.default)(s,15,"profile-badge-appearance-body-type-small"),(0,l.default)(s,6,"profile-badge-living-small"),(0,l.default)(s,7,"profile-badge-children-small"),(0,l.default)(s,8,"profile-badge-smoking-small"),(0,l.default)(s,9,"profile-badge-drinking-small"),(0,l.default)(s,11,"profile-badge-languages-small"),s),A=(r={},(0,l.default)(r,2,35),(0,l.default)(r,13,490),(0,l.default)(r,15,491),(0,l.default)(r,7,139),(0,l.default)(r,9,140),(0,l.default)(r,11,28),(0,l.default)(r,6,141),(0,l.default)(r,3,142),(0,l.default)(r,4,143),(0,l.default)(r,8,144),(0,l.default)(r,12,36),(0,l.default)(r,10,37),r),O=g.extend({events:{"click .js-show-more-interests":"onShowMoreInterests_","click .js-click-tracking":"onClickTracking_","touchend .js-scroller-element":"onGalleryScrollEnd_"},init:function(){O._super.init.apply(this,arguments),this.reset()},scrollToAnchor:function(e){var t=this.$('[data-anchor="'.concat(encodeURIComponent(e),'"]'));t&&t.offset()&&d.scrollTo(0,t.offset().top-50-10,150)},startUIEvents_:function(){this.hasUIEvents_&&this.stopUIEvents_(),d.on(d.EVENTS.SCROLL,this.onScroll_,this),d.once(d.EVENTS.SCROLL,o),this.hasUIEvents_=!0},stopUIEvents_:function(){this.hasUIEvents_&&(d.off(d.EVENTS.SCROLL,this.onScroll_,this),this.hasUIEvents_=!1)},render:function(e){var t,i=this,o=e.user,s=e.clientProfileOptions,r=u.reduce(o.getProfileFields(),function(e,t){return e[t.getType()]=t,e},{}),l=function(e){return e?{text:e.getDisplayValue(),profileOptionType:e.getType(),action:P.ABOUT_YOU,elementTracking:A[e.getType()]}:null}(r[2]);this.$el.html(E.render({NAVIGATION_ACTIONS:P,userId:o.getUserId(),aboutYouFields:n(r,s),aboutMeField:l,aboutMeEmpty:1===o.getGender()?h.get(812):h.get(813),basicInfo:new _({title:"".concat(o.getName(),", ").concat(o.getAge()),elementTracking:116,qaName:"name"}),location:new _({title:"".concat(o.getCity().getName(),", ").concat(o.getCountry().getName()),elementTracking:33}),media:v.createMedia(o.getAlbums([]),{viewSize:{width:90,height:125}}),workAndEducation:a(r,s),interests:(t=o.getInterests(),u.map(t,function(e,t){var i={name:e.getName(),visible:t+1<=T};return i})),hasMoreInterests:o.getInterests([]).length>T,ELEMENTS:N,hasVerification:!!e.verificationSectionElement,navigationActions:{back:!0}})),e.giftsSectionElement&&this.$(".js-gifts-placeholder").replaceWith(e.giftsSectionElement),e.verificationSectionElement&&this.$(".js-verification-placeholder").html(e.verificationSectionElement),f(this.$el.find(".js-preload")),this.attachToggleScroll(),this.startUIEvents_(),setTimeout(function(){return i.onScroll_()},1e3)},onGalleryScrollEnd_:function(){var e=this.$el.find(".js-scroller-position-reference")[0],t=this.$el.find(".js-scroller-element")[0],i=this.$el.find(".js-scrolling-item")[0];if(e&&t&&i){var n=e.getBoundingClientRect().left,a=i.getBoundingClientRect().width,o=t.scrollLeft-n-20+d.getScreenDimensions().width,s=Math.ceil(o/(a+5))-1;if(u.isNumber(s)&&!u.isNaN(s)){var r=s===this.$el.find(".js-scrolling-item").length-1;p.track(C,{element:42,reached_end:r,position:s})}}},onShowMoreInterests_:function(e,t){c(t).parent().addClass("is-expanded")},onClickTracking_:function(e,t){var i=c(t).data(),n=i.tracking_element,a=i.tracking_parent,o=i.index;if(y.isValid(n)){var s={};if(s.element=n,21===n){var r=Number(o);u.isNaN(r)||(s.position=r)}y.isValid(a)&&(s.parent_element=a),p.track(k,s)}},onScroll_:function(){var e=this;u.forEach(this.$el.find(".js-view-tracking"),function(t){var i=c(t),n=i.data().tracking_element;if(!e.viewedElements_.includes(n)){var a=m().scrollTop,o=window.innerHeight+a-20;i.offset().top<o&&(e.viewedElements_.push(n),y.isValid(n)&&p.track(S,{element:n}))}})},onDestroy:function(){this.stopUIEvents_()},reset:function(){this.viewedElements_=[]}},"OwnProfileEditView");O.NAVIGATION_ACTIONS=P,e.exports=O},function(e,t,i){"use strict";var n=i(3)(i(127)),a=i(98),o=i(99),s=i(137),r=i(106),l=i(134),c=i(153),u=i(2975);e.exports=i(108)("OwnProfileEdit",function(e){return a.createElement("div",{className:"layout js-screen-container"},a.createElement("div",{className:"layout__header"},a.createElement(s,{actions:e.navigationActions,logo:!1,hasWideSides:!0,scrollToggle:"10",scrollToggleClass:"navigation-bar--shadow",title:o.get(497),secondary:a.createElement("div",{className:"navigation-bar__button-text js-navigation js-click-tracking","data-tracking_element":e.ELEMENTS.PREVIEW,"data-action":e.NAVIGATION_ACTIONS.PREVIEW,"data-qa":"navbar-profile-preview"},o.get(73))})),a.createElement("div",{className:"layout__content"},a.createElement("div",{className:"own-profile-edit__block js-scroller-position-reference"},e.media?a.createElement("div",{className:"own-profile-edit__scroller js-scroller-element"},a.createElement("div",{className:"own-media-gallery"},c(e.media.photoOfMeCards,(0,n.default)({},e,e.media),u),c(e.media.otherCards,(0,n.default)({},e,e.media),u))):a.createElement("div",{className:"own-profile-edit__no-photos js-click-tracking js-navigation","data-tracking_element":e.ELEMENTS.UPLOAD_PHOTO_ICON,"data-tracking_parent":e.ELEMENTS.PROFILE_PHOTO,"data-action":e.NAVIGATION_ACTIONS.ADD_PHOTOS,"data-qa":"own-profile-edit__no-photos"},a.createElement(r,{name:"zero-photos",size:"xxlg"})),a.createElement(l,{type:"stroke",extraClass:"js-navigation js-click-tracking",text:o.get(44),attrs:{"data-action":e.NAVIGATION_ACTIONS.ADD_PHOTOS,"data-tracking_element":e.ELEMENTS.UPLOAD_PHOTO_CTA,"data-qa":"add-photos"}})),c(e.basicInfo,e,function(e){return a.createElement("div",{className:"own-profile-edit__block"},a.createElement("div",{className:"selector js-view-tracking js-click-tracking js-navigation","data-action":e.NAVIGATION_ACTIONS.BASIC_INFO,"data-profile-option-type":e.profileOptionType?e.profileOptionType:void 0,"data-tracking_element":e.elementTracking?e.elementTracking:void 0,"data-qa":e["data-qa"]?e["data-qa"]:void 0,"data-qa-option-type":e.qaProfileOption,"data-id":e.id?e.id:void 0},e.iconName?a.createElement("div",{className:"selector__icon selector__icon--label"},a.createElement(r,{name:e.iconName,size:"md"})):null,a.createElement("div",{className:"selector__label"},a.createElement("div",{className:"truncated-text"},a.createElement("div",{className:"truncated-text__full"},e.title),a.createElement("div",{className:"truncated-text__trim selector__label--secondary"},e.value))),e.mode?null:a.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},a.createElement(r,{name:"generic-chevron-right",size:"sm",supportsRtl:"true"}))))}),e.workAndEducation?a.createElement("div",{className:"own-profile-edit__block"},c(e.workAndEducation,e,function(e){return a.createElement("div",{className:"selector js-view-tracking js-click-tracking js-navigation","data-action":e.NAVIGATION_ACTIONS.WORK_EDUCATION,"data-profile-option-type":e.profileOptionType?e.profileOptionType:void 0,"data-tracking_element":e.elementTracking?e.elementTracking:void 0,"data-qa":e["data-qa"]?e["data-qa"]:void 0,"data-qa-option-type":e.qaProfileOption,"data-id":e.id?e.id:void 0},e.iconName?a.createElement("div",{className:"selector__icon selector__icon--label"},a.createElement(r,{name:e.iconName,size:"md"})):null,a.createElement("div",{className:"selector__label"},a.createElement("div",{className:"truncated-text"},a.createElement("div",{className:"truncated-text__full"},e.title),a.createElement("div",{className:"truncated-text__trim selector__label--secondary"},e.value))),e.mode?null:a.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},a.createElement(r,{name:"generic-chevron-right",size:"sm",supportsRtl:"true"})))})):null,a.createElement("div",{className:"own-profile-edit__block"},a.createElement("h2",{className:"own-profile-edit__title"},o.get(496)),c(e.aboutMeField,e,function(e){return a.createElement("div",{className:"selector selector--about-me js-navigation","data-action":e.action,"data-profile-option-type":e.profileOptionType?e.profileOptionType:void 0,"data-tracking_element":e.elementTracking?e.elementTracking:void 0,"data-qa":e["data-qa"]?e["data-qa"]:void 0,"data-qa-option-type":e["data-qa-option-type"]?e["data-qa-option-type"]:void 0,"data-id":e.id?e.id:void 0},e.text?a.createElement("div",{className:"selector__label"},e.text):a.createElement("div",{className:"selector__label selector__label--secondary"},o.get(510)))}),c(e.aboutYouFields,e,function(e){return a.createElement("div",{className:"selector js-view-tracking js-click-tracking js-navigation","data-action":e.NAVIGATION_ACTIONS.ABOUT_YOU,"data-profile-option-type":e.profileOptionType?e.profileOptionType:void 0,"data-tracking_element":e.elementTracking?e.elementTracking:void 0,"data-qa":e["data-qa"]?e["data-qa"]:void 0,"data-qa-option-type":e.qaProfileOption,"data-id":e.id?e.id:void 0},e.iconName?a.createElement("div",{className:"selector__icon selector__icon--label"},a.createElement(r,{name:e.iconName,size:"md"})):null,a.createElement("div",{className:"selector__label"},a.createElement("div",{className:"truncated-text"},a.createElement("div",{className:"truncated-text__full"},e.title),a.createElement("div",{className:"truncated-text__trim selector__label--secondary"},e.value))),e.mode?null:a.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},a.createElement(r,{name:"generic-chevron-right",size:"sm",supportsRtl:"true"})))})),a.createElement("div",{className:"own-profile-edit__block"},a.createElement("h2",{className:"own-profile-edit__title"},o.get(58)),a.createElement("div",{className:"interests"},e.interests.map(function(e){return a.createElement("div",{className:"interest".concat(e.visible?"":" interest--additional")},e.name)}),e.hasMoreInterests?a.createElement("div",{className:"interest interest--more js-show-more-interests"},a.createElement(r,{name:"generic-ellipsis",size:"sm"})):null),a.createElement(l,{type:"stroke",extraClass:"js-navigation js-click-tracking",text:o.get(57),attrs:{"data-tracking_element":e.ELEMENTS.ADD_INTERESTS,"data-action":e.NAVIGATION_ACTIONS.ADD_INTERESTS,"data-qa":"add-interests"}})),c(e.location,e,function(e){return a.createElement("div",{className:"own-profile-edit__block js-view-tracking","data-tracking_element":e.elementTracking},a.createElement("h2",{className:"own-profile-edit__title"},o.get(188)),a.createElement("div",{className:"selector js-view-tracking js-click-tracking js-navigation","data-action":e.NAVIGATION_ACTIONS.LOCATION,"data-profile-option-type":e.profileOptionType?e.profileOptionType:void 0,"data-tracking_element":e.elementTracking?e.elementTracking:void 0,"data-qa":"location","data-qa-option-type":"location","data-id":e.id?e.id:void 0},e.iconName?a.createElement("div",{className:"selector__icon selector__icon--label"},a.createElement(r,{name:e.iconName,
size:"md"})):null,a.createElement("div",{className:"selector__label"},a.createElement("div",{className:"truncated-text"},a.createElement("div",{className:"truncated-text__full"},e.title),a.createElement("div",{className:"truncated-text__trim selector__label--secondary"},e.value))),e.mode?null:a.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},a.createElement(r,{name:"generic-chevron-right",size:"sm",supportsRtl:"true"}))))}),a.createElement("div",{className:"own-profile-edit__block js-gifts-placeholder"}),e.hasVerification?a.createElement("div",{className:"js-view-tracking js-verification-placeholder","data-anchor":"verification","data-tracking_element":e.ELEMENTS.VERIFICATION}):null))})},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(153);e.exports=function(e){return n.createElement("div",{className:"own-media-gallery__item js-scrolling-item\n                  ".concat(e.isVideo?"own-media-gallery__item--video":"own-media-gallery__item--photo","\n                  ").concat(e.isLoading?"is-loading":"","\n                  ").concat(e.isProfileImage?"own-media-item--highlight":"","\n                  ").concat(e.isPrivate?"own-media-item--private":"","\n                  ").concat(e.isProcessing?"is-processing":"")},n.createElement("div",{className:"own-media-item__image js-preload","data-src":e.src,style:{backgroundPosition:e.centerPercentages?"".concat(e.centerPercentages.x,"% ").concat(e.centerPercentages.y,"%"):void 0}}),o(e.photoCoachingData,e,function(e){return n.createElement("div",{className:"own-media-item__icon-coaching"},0==e.status?n.createElement("i",{className:"icon-emoji icon-emoji--camera-with-flash"}):null,1==e.status?n.createElement("i",{className:"icon-emoji icon-emoji--hourglass-flowing-sand"}):null,2==e.status?n.createElement("i",{className:"icon-emoji icon-emoji--lock"}):null,3==e.status?n.createElement("i",{className:"icon-emoji icon-emoji--dancers"}):null,4==e.status?n.createElement("i",{className:"icon-emoji icon-emoji--desert"}):null,5==e.status?n.createElement("i",{className:"icon-emoji icon-emoji--confused"}):null,6==e.status?n.createElement("i",{className:"icon-emoji icon-emoji--blush"}):null,7==e.status?n.createElement("i",{className:"icon-emoji icon-emoji--heart-eyes"}):null)}),e.isPrivate?n.createElement("div",{className:"own-media-item__overlay js-navigation","data-action":e.NAVIGATION_ACTIONS.PRIVATE_PHOTOS},n.createElement(a,{name:"generic-lock",size:"lg"}),n.createElement("div",{className:"own-media-item__overlay-text"},e.privatePhotosText)):n.createElement("div",{className:"b-link js-navigation js-click-tracking","data-tracking_element":e.ELEMENTS.PHOTO,"data-tracking_parent":e.ELEMENTS.PROFILE_PHOTO,"data-action":e.NAVIGATION_ACTIONS.FULLSCREEN,"data-user-id":e.userId,"data-photo-id":e.id,"data-index":e.ndx}),e.isVideo?e.isProcessing?n.createElement(n.Fragment,null,n.createElement("div",{className:"own-media-item__overlay"}),n.createElement("div",{className:"own-media-item__loading"},n.createElement(a,{name:"loading-dots",size:"stretch"}))):n.createElement("div",{className:"own-media-item__icon-video"},n.createElement(a,{name:"generic-media-play",size:"xsm"})):null,n.createElement("div",{className:"own-media-item__loading"},n.createElement(a,{name:"loading-dots",size:"stretch"})))}},function(e,t,i){"use strict";var n=i(113),a=i(188),o=i(136),s=a.extend({isOwnProfile:!0,screenName:312,createElement:function(){return o({qaAttribute:"own-profile-preview"})},getParameter:function(e){return"id"===e?n.getUserId():a._super.getParameter.apply(this,arguments)},getProfileDataContext_:function(){var e=s._super.getProfileDataContext_.apply(this,arguments);return e.isOwnProfilePreview=!0,e}},"OwnProfilePreview");e.exports=s},function(e,t,i){"use strict";var n=i(142).openPage,a=i(2978);e.exports=function(){var e=new a;n(e)}},function(e,t,i){"use strict";function n(){s.navigate(r.get("default.page"),!0)}var a=i(121),o=i(2979),s=i(103),r=i(126),l=a.extend({headerTemplate:null,transition:!1,trackHotPanelScreen:function(){},construct:function(){l._super.construct.apply(this,arguments),this.createNotFoundPageView()},createNotFoundPageView:function(){var e=(new o).on(o.EVENTS.NOT_FOUND_ACTION,n).appendTo(this.element);this.registerView(e)}},"NotFoundPageController");e.exports=l},function(e,t,i){"use strict";function n(e,t,i,n){e.webkitTransform=t,e.MozTransform=i,e.transform=n}var a=i(173),o=i(2980),s=i(111)("NOT_FOUND_ACTION"),r=a.extend({events:{"click .js-not-found-action":"onNotFoundAction_"},init:function(){r._super.init.apply(this,arguments),this.render(),this.middleCloudStyle_=this.getElementStyle_(".middle-cloud"),this.frontCloudStyle_=this.getElementStyle_(".front-cloud"),this.logoStyle_=this.getElementStyle_(".logo-wrapper"),this.updateLayout=this.updateLayout.bind(this)},getElementStyle_:function(e){return this.el.querySelector(e).style},render:function(){this.$el.html(o.render())},enable:function(){return window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",this.updateLayout,!1),r._super.enable.apply(this,arguments)},disable:function(){return window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.updateLayout,!1),r._super.disable.apply(this,arguments)},updateLayout:function(e){var t=e.gamma,i=e.beta,a=function(e,t){return"translate3d(".concat(e,"px, ").concat(t,"px, 0)")}(t*=.1,i*=-.2);n(this.frontCloudStyle_,a,a,a),t*=-.6,i*=-.6,n(this.middleCloudStyle_,a,a,a),i*=.5;var o="rotate(".concat(t*=.5,"deg) rotate3d(1,0,0, ").concat(i,"deg)");this.logoStyle_.webkitTransform=o,this.logoStyle_.MozTransform="rotate(".concat(t,"deg)"),this.logoStyle_.transform=o},onNotFoundAction_:function(){this.trigger(s.NOT_FOUND_ACTION)}},"NotFoundView");r.EVENTS=s,e.exports=r},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="not-found-page"><div class="header"><div class="logo-wrapper"><div class="logo"><svg><use xlink:href="#logo-').f(t.get(["partner_id"],!1),t,"h").w('"></use></svg></div></div><div class="ufo"><svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet" viewBox="0 0 81 70"><path fill="#F25940" d="M4.7 51.8C1.8 50.9-5.55111512e-17 48.6.6 46.7 1.2 44.7 4 43.9 6.9 44.9 9.8 45.8 11.6 48.1 11 50 10.4 51.9 7.7 52.7 4.7 51.8zM29.4 69.2C26.5 68.3 24.7 66 25.3 64.1 25.9 62.1 28.7 61.3 31.6 62.3 34.5 63.2 36.3 65.5 35.7 67.4 35.1 69.3 32.3 70.1 29.4 69.2zM59.6 69.2C56.7 68.3 54.9 66 55.5 64.1 56.1 62.1 58.9 61.3 61.8 62.3 64.7 63.2 66.5 65.5 65.9 67.4 65.3 69.3 62.5 70.1 59.6 69.2z"></path><path fill="#3C3642" d="M5.9 49.4C5.83333333 49.4 5.66666667 49.3 5.4 49.1 5.2 49 5 48.7 4.9 48.5 4.8 48.2 4.9 48 5 47.8L22.5 18.7C22.8 18.2 23.4 18.1 23.8 18.4L31.1 22.7C31.4 22.9 31.5 23.1 31.6 23.4 31.6 23.7 31.5 24 31.3 24.2L6.9 49.2C6.6 49.4 6.2 49.5 5.9 49.4zM60 66.5C59.7 66.4 59.4 66.1 59.3 65.7L53.6 31.3C53.6 31 53.6 30.7 53.8 30.5 54 30.3 54.3 30.2 54.6 30.2L63 30.8C63.5 30.8 63.9 31.3 63.9 31.9L61.5 65.7C61.5 66 61.4 66.2 61.2 66.4 61 66.6 60.7 66.7 60.5 66.6 60.2333333 66.5333333 60.0666667 66.5 60 66.5zM30.2 66.6C29.7 66.4 29.4 66 29.5 65.5L36.3 31C36.4 30.7 36.5 30.5 36.8 30.3 37 30.2 37.3 30.1 37.6 30.2L45.1 32.6C45.4 32.7 45.6 32.9 45.7 33.1 45.8 33.4 45.8 33.6 45.7 33.9L31.4 66C31.2 66.5 30.7 66.8 30.2 66.6z"></path><path fill="#F25940" d="M47.3,12.5 C26.1,5.8 7,8.1 4,17.7 C1,27.3 15.2,40.2 36.4,46.9 C57.6,53.6 76.7,51.3 79.7,41.7 C82.8,32 68.6,19.2 47.3,12.5 Z"></path><path fill="#FFB000" d="M69.1,34.7 C67,41.3 53.6,43 39.1,38.5 C24.7,33.9 14.6,24.9 16.7,18.2 C18.8,11.6 32.2,9.9 46.7,14.4 C61.2,19 71.2,28.1 69.1,34.7 Z"></path><path fill="#58A5BF" d="M50.6,2.1 C37.7,-2 23.9,5.2 19.9,18.1 C18,24.2 26.7,32.1 39.8,36.3 C52.9,40.4 64.7,38.9 66.6,32.9 C70.6,20 63.5,6.2 50.6,2.1 Z"></path><path fill="#FFB000" d="M28.5,20.4 C31.2,11.7 38.5,5.9 46.3,5.3 C37.3,4.1 28.6,9.5 25.8,18.4 L25.8,18.4 C25,20.8 26.8,23.7 30.1,26.4 C28.5,24.4 27.9,22.3 28.5,20.4 Z"></path><path fill="#3C3642" d="M37.4,43.9 C35.8,43.4 34.8,42 35.2,40.7 C35.6,39.4 37.2,38.8 38.9,39.3 C40.5,39.8 41.5,41.2 41.1,42.5 C40.7,43.8 39,44.4 37.4,43.9 Z"></path><path fill="#FFB000" d="M38.3,41.2 C37.6,41 37.1,41.2 37.1,41.3 C37.1,41.4 37.3,41.9 38,42.1 C38.7,42.3 39.2,42.1 39.2,42 C39.2,41.8 39,41.4 38.3,41.2 Z"></path><path fill="#3C3642" d="M72.3,40.2 C70.7,39.7 69.7,38.3 70.1,37 C70.5,35.7 72.1,35.1 73.8,35.6 C75.4,36.1 76.4,37.5 76,38.8 C75.6,40.1 74,40.7 72.3,40.2 Z"></path><path fill="#FFB000" d="M73.2,37.4 C72.5,37.2 72,37.4 72,37.5 C72,37.6 72.2,38.1 72.9,38.3 C73.6,38.5 74.1,38.3 74.1,38.2 C74.1,38.1 73.9,37.6 73.2,37.4 Z"></path><path fill="#3C3642" d="M11,20.8 C9.4,20.3 8.4,18.9 8.8,17.6 C9.2,16.3 10.8,15.7 12.5,16.2 C14.1,16.7 15.1,18.1 14.7,19.4 C14.2,20.7 12.6,21.3 11,20.8 Z"></path><path fill="#FFB000" d="M11.8,18 C11.1,17.8 10.6,18 10.6,18.1 C10.6,18.2 10.8,18.7 11.5,18.9 C12.2,19.1 12.7,18.9 12.7,18.8 C12.8,18.7 12.5,18.2 11.8,18 Z"></path></svg></div><div class="front-cloud"><svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet" viewBox="0 0 53 8"><path fill="#FFFFFF" d="m14.5 3.9c0.5-0.1 1-0.2 1.5-0.2 2.4 0 4.4 1.6 5 3.8 0.4-0.2 0.8-0.2 1.2-0.2 0.5 0 1.1 0.1 1.5 0.4 0.9-2.3 3.1-3.9 5.7-3.9 1.2 0 2.3 0.3 3.2 0.9 0.9-2.4 3.3-4.1 6-4.1 3.2 0 5.9 2.4 6.3 5.4 0.9 0.1 1.7 0.3 2.4 0.7 0.8-0.7 1.8-1.1 2.9-1.1 1.2 0 2.3 0.5 3.1 1.4l0 1.1 -53.3 0 0-4c0.4 0.1 0.7 0.3 1.1 0.5 0.9-0.9 2.2-1.6 3.5-1.7 0.9-1.7 2.7-2.9 4.7-2.9 2.5 0 4.6 1.7 5.2 3.9z"></path></svg><div class="cloud-bottom"></div></div><div class="middle-cloud"><svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet" viewBox="0 0 32 12"><path fill="#E2EDFC" d="m30.6 1.9c-0.9 0-1.7 0.4-2.2 1 -0.5-0.8-1.5-1.4-2.6-1.4 -1.1 0-2 0.5-2.5 1.3 -0.4-0.2-0.8-0.3-1.2-0.3 -0.6 0-1.2 0.2-1.6 0.6 -0.5-1-1.5-1.8-2.8-1.8 -1.1 0-2 0.6-2.6 1.4 -0.4-0.6-1.2-1.1-2.1-1.1 -0.5 0-1 0.2-1.4 0.4 -0.7-1.2-2-2-3.5-2 -1.7 0.1-3.2 1.2-3.7 2.8 -0.4-0.2-0.8-0.3-1.2-0.3 -0.9 0-1.6 0.4-2.2 1 -0.3-0.4-0.6-0.8-1-1l0 5.3 0 4.3 32.5 0 0-4.7 0-4.8c-0.5-0.4-1.1-0.7-1.9-0.7z"></path></svg><div class="cloud-bottom"></div></div></div><div class="cta-box cta-box--hpadded"><div class="cta-box__header">').h("t",t,{},{k:"309"},"h").w('</div><div class="cta-box__content">').h("t",t,{},{k:"310"},"h").w('</div><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{text:i,block:n},{type:"primary",extraClass:"js-not-found-action"},"h").w("</div></div></div></div></div>")}function i(e,t){return e.h("t",t,{},{k:"311"},"h")}function n(e,t){return e}return e.register("not-found",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(113),a=i(159),o=i(2982),s=i(328),r=i(128),l=i(243),c=i(102),u=i(103).navigate,d=i(136),h=i(101).ClickEvent,p=a.extend({headerTemplate:null,screenName:518,createElement:function(){return d({className:"overlay-page",qaAttribute:"own-profile-card-preview"})},init:function(){p._super.init.apply(this,arguments),this.view_=this.registerView(new o({el:this.parent.get(0)})).on(o.EVENTS.ADD_PHOTOS,this.onAddPhoto_,this).on(o.EVENTS.EDIT_PROFILE,this.onEditProfile_,this).on(o.EVENTS.EXPAND_PROFILE,this.onExpandProfile_,this),this.gallery_=this.registerController("GALLERY",new s).on(s.ACTIONS.CLICK,this.onGalleryClick_,this),this.userModel_=r.getInstance()},onStart:function(){p._super.onStart.apply(this,arguments),this.view_.showLoading(),this.userModel_.on(r.EVENTS.INVALIDATED,this.retrieveUser_,this),this.userModel_.get({id:this.getParameter("id")}).then(this.onUserRetrieved_.bind(this))},onStop:function(){p._super.onStop.apply(this,arguments),this.userModel_.off(r.EVENTS.INVALIDATED,this.retrieveUser_,this)},retrieveUser_:function(){this.userModel_.get({id:this.getParameter("id")}).then(this.onUserRetrieved_.bind(this))},onUserRetrieved_:function(e){this.profileData_=new l({protoUser:e,clientSource:this.clientSource,activationPlace:this.activationPlace,isOwnProfilePreview:!0}),this.profileData_.user=e,this.updateView_()},updateView_:function(){this.view_.update({profileData:this.profileData_}),this.gallery_.setGallery(this.view_.getGalleryContainer()),this.gallery_.configure({profileData:this.profileData_}),this.view_.hideLoading()},getParameter:function(e){return"id"===e?n.getUserId():p._super.getParameter.apply(this,arguments)},onAddPhoto_:function(){var e=this;c.track(h,{element:126}),u("add-photos",{callback:function(){e.isStarted()&&e.userModel_.invalidate()}})},onEditProfile_:function(){c.track(h,{element:127}),u("own-profile-edit")},onExpandProfile_:function(){c.track(h,{element:40}),u("own-profile-preview")},onGalleryClick_:function(){c.track(h,{element:42}),u("own-profile-preview")}},"OwnProfileCardPreview");e.exports=p},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(526),s=i(2983),r=a("ADD_PHOTOS","EDIT_PROFILE","EXPAND_PROFILE"),l=n.extend({events:{"click .js-add-photos":"onClickAddPhotos_","click .js-edit-profile":"onClickEditProfile_"},init:function(){this.$el.html(s.render({navigationActions:{close:!0}})),this.cardView_=this.registerView(new o({el:this.$(".js-card-preview").get(0)})).on(o.EVENTS.EXPAND_PROFILE,this.onExpandProfile_,this)},update:function(e){this.render(e)},render:function(e){this.cardView_.render(e)},getCardPreviewContainer:function(){return this.$(".js-card-preview")},onClickAddPhotos_:function(){this.trigger(r.ADD_PHOTOS)},onClickEditProfile_:function(){this.trigger(r.EDIT_PROFILE)},onExpandProfile_:function(){this.trigger(r.EXPAND_PROFILE)},getGalleryContainer:function(){return this.cardView_.getGalleryContainer()}},"OwnProfileCardPreviewView");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(137),o=i(99);e.exports=i(108)("OwnProfileCardPreview",function(e){return n.createElement("div",{className:"own-profile-card-preview"},n.createElement("div",{className:"layout layout--stretched-content"},n.createElement("div",{className:"layout__header"},n.createElement(a,{actions:e.navigationActions,logo:!0,extraClass:"navigation-bar--no-background navigation-bar--static"})),n.createElement("div",{className:"layout__content"},n.createElement("div",{className:"own-profile-card-preview__card js-card-preview"})),n.createElement("div",{className:"layout__footer"},n.createElement("div",{className:"own-profile-card-preview__actions"},n.createElement("div",{className:"own-profile-card-preview__action"},n.createElement("div",{className:"inline-button inline-button--primary js-add-photos"},n.createElement("div",{className:"inline-button__text"},o.get(678)))),n.createElement("div",{className:"own-profile-card-preview__action"},n.createElement("div",{className:"inline-button inline-button--primary js-edit-profile"},n.createElement("div",{className:"inline-button__text"},o.get(679))))))))})},function(e,t,i){"use strict";function n(e){e&&!a.isString(e)&&(e=e.getForm().getFailure().getErrorMessage()),r.showNotification({type:r.TYPES.ERROR,text:e})}var a=i(100),o=i(103),s=i(150),r=i(124),l=i(102),c=i(121),u=i(2985),d=i(175),h=i(284),p=i(128),m=i(136),g=i(105),_=g.ProfileField,f=g.User,v=i(101).ClickEvent,E=c.extend({screenName:230,headerTemplate:null,importedData_:null,pageView_:null,createElement:function(){return m({qaAttribute:"own-profile-work-and-educations"})},init:function(){var e=this;E._super.init.apply(this,arguments),this.pageView_=this.registerView(new u({el:this.parent.get(0)})).on(u.EVENTS.SN_CONNECT,this.onConnect_,this).on(u.EVENTS.SAVE,this.save_,this),this.pageView_.setButtonLoading(!0),s.getSupportedProviders({providerContext:6}).then(function(){return e.pageView_.setButtonLoading(!1)})},onStart:function(){var e=this;E._super.onStart.apply(this,arguments);var t=this.getParameter("importPromise");t?t.then(function(t){return e.onImportDone_(t)},function(t){return e.onImportReject_(t)}).catch(n):h.getInstance().get().then(function(t){return e.onProfileField_(t)}).catch(n)},onImportDone_:function(e){var t={};e.getPersonProfileEditForm().getOptions([]).forEach(function(e){t[e.getType()]=e}),this.onProfileField_(t)},onImportReject_:function(e){n(e),o.navigate("work-education",!0,{notFound:!0})},onProfileField_:function(e){var t={education:e[10],work:e[12]};Boolean(t.education.getPossibleValues()||t.work.getPossibleValues())?(this.pageView_.render(t),this.pageView_.hideLoading()):o.navigate("work-education",!0,{notFound:null})},onConnect_:function(){var e=this;return l.track(v,{element:118,immediate:!0}),s.startImport({providerContext:6,providerType:1}).then(function(t){return e.onImportDone_(t)},function(t){return e.onImportReject_(t)}).catch(n)},save_:function(e){var t=this;this.pageView_.showLoading();var i=[];this.importedData_=null,"work"in e&&i.push((new _).setDisplayValue(e.work).setValue(e.work).setType(12)),"education"in e&&i.push((new _).setDisplayValue(e.education).setValue(e.education).setType(10));var n=(new f).setProfileFields(i);p.getInstance().set(n,[490]).then(function(){t.pageView_.hideLoading(),h.getInstance().invalidate(),p.getInstance().invalidate(),d.getInstance().updateFields([490]),o.back()}).catch(function(e){t.pageView_.hideLoading(),t.log.error("Error while saving work and education on profile edit: ",e)})}},"OwnProfileWorkAndEducation");e.exports=E},function(e,t,i){"use strict";function n(e){var t=e.getDisplayValue()||l.get(499),i=e.getPossibleValues([]),n=e.getCurrentOptionId(),o=[];return o.push.apply(o,(0,a.default)(i.map(function(e){return{value:e.getValue(),label:e.getDisplayValue(),selected:e.getValue()===n}}))),!n&&0===i.length&&e.hasHint()&&(o.isDisabled=!0,o.push(p),t=e.getHint()),{label:t,defaultOptions:o}}var a=i(3)(i(168)),o=i(100),s=i(25),r=i(109),l=i(99),c=i(111),u=i(2986),d=c("SN_CONNECT","SAVE"),h={title:l.get(282),navigationActions:{back:!0},connect:[{connectText:l.get(284),type:"facebook"}]},p={label:l.get(487,"Facebook"),value:"noValue"},m=r.extend({events:{"click .js-ns-connect":"connectSN_","click .js-save":"onSave_"},render:function(e){var t,i,a;this.$el.html(u.render((i=n((t=e).work),a=n(t.education),Object.assign({educationOptions:a.defaultOptions,selectedEducation:a.label,selectedWork:i.label,workOptions:i.defaultOptions},h)))),this.$("select").on("change",this.onChange_)},setButtonLoading:function(e){this.$(".js-ns-connect").toggleClass("is-loading",e)},connectSN_:function(e,t){this.trigger(d.SN_CONNECT,s(t).data("sn"))},onChange_:function(e){s(e.target).parent(".js-control").find(".js-label").text(s(e.target.selectedOptions[0]).text())},onSave_:function(){var e=o.reduce(this.$el.find("select").get(),function(e,t){var i=t.options[t.selectedIndex];return i&&"noValue"!==i.value&&(e[t.getAttribute("data-field")]=t.options[t.selectedIndex].value),e},{});this.trigger(d.SAVE,e)}},"OwnProfileWorkAdnEducationEditView");m.EVENTS=d,e.exports=m},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(134),r=i(133),l=i(130),c=i(138);e.exports=i(108)("WorkAndEducation",function(e){return n.createElement(r,null,n.createElement(c,null,n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:e.title,secondary:n.createElement("div",{className:"navigation-bar__button-text js-save","data-qa":"navbar-profile-save"},a.get(30))})),n.createElement(l,null,n.createElement("div",{className:"settings-text"},a.get(283)),n.createElement("div",{className:"settings-block"},e.connect?n.createElement("div",{className:"button-wrapper"},e.connect.map(function(e){return n.createElement("div",{className:"button-wrapper__item",key:e.type},n.createElement(s,{type:e.type,text:e.connectText,extraClass:"js-ns-connect",attrs:{"data-sn":e.type}}))})):null),n.createElement("div",{className:"settings-data-entry"},n.createElement("form",{className:"form-uniform"},e.workOptions?n.createElement("div",{className:"control control--select "},n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"select js-control"},n.createElement("select",{"data-field":"work",className:"select__field",disabled:e.workOptions.isDisabled?"disabled":void 0},e.workOptions.length>1?e.workOptions.map(function(e){return n.createElement("option",{selected:e.selected?"selected":void 0,value:e.value,key:e.value},e.label)}):null),e.workOptions.length>1?n.createElement("span",{className:"select__arrow"}):null,n.createElement("div",{className:"select__surrogate js-label"},e.selectedWork),n.createElement("label",{className:"control__label"},a.get(285))))):null,e.educationOptions?n.createElement("div",{className:"control control--select "},n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"select js-control"},n.createElement("select",{"data-field":"education",className:"select__field",disabled:e.educationOptions.isDisabled?"disabled":void 0},e.educationOptions.length>1?e.educationOptions.map(function(e){return n.createElement("option",{selected:e.selected?"selected":void 0,value:e.value,key:e.value},e.label)}):null),e.educationOptions.length>1?n.createElement("span",{className:"select__arrow"}):null,n.createElement("div",{className:"select__surrogate js-label"},e.selectedEducation),n.createElement("label",{className:"control__label"},a.get(286))))):null))))})},function(e,t,i){"use strict";var n=i(188),a=i(549),o=i(103).navigate,s=n.extend({getAdjacentProfiles:function(){var e=this.getParameters(),t=e.id,i=e.photoId;return a.getAdjacentUsers({userId:t,photoId:i})},onAdjacentProfileClick:function(e){var t=this.getParameters().photoId;o("lookalike",!0,{id:e.getUserId(),photoId:t})}},"LookalikePage");e.exports=s},function(e,t,i){"use strict";function n(e){return[void 0,"male","female"][e]||"male"}var a,o,s=i(3),r=s(i(4)),l=s(i(107)),c=i(99),u=i(103),d=i(113),h=i(188),p=i(2989),m=i(326),g=i(314),_=i(397),f=(a={},(0,l.default)(a,2,"spotlight-explanation-visiting-source"),(0,l.default)(a,7,"rise-up-explanation-visiting-source"),(0,l.default)(a,6,"extra-shows-explanation-visiting-source"),(0,l.default)(a,21,"attention-boost-explanation-visiting-source"),a),v=(o={},(0,l.default)(o,2,{featureName:"spotlight",captions:{male_female:{text:c.get(466),cta:c.get(477)},male_male:{text:c.get(474),cta:c.get(467)},female_male:{text:c.get(475),cta:c.get(467)},female_female:{text:c.get(476),cta:c.get(477)}}}),(0,l.default)(o,7,{featureName:"riseup",captions:{male:{text:c.get(468),cta:c.get(469)},female:{text:c.get(478),cta:c.get(469)}}}),(0,l.default)(o,6,{featureName:"extra-shows",captions:{male:{text:c.get(470),cta:c.get(471)},female:{text:c.get(479),cta:c.get(471)}}}),(0,l.default)(o,21,{featureName:"attention-boost",captions:{male:{text:c.get(472),cta:c.get(473)},female:{text:c.get(480),cta:c.get(473)}}}),o),E=h.extend({init:function(){E._super.init.apply(this,arguments),this.sourceView_=this.registerView(new p).on(p.EVENTS.BUY_MORE,this.buyMore_,this),this.profileController_.on(m.EVENTS.GALLERY_SLIDE_CHANGE,this.manageSourceWidgetVisibility_,this)},addVisitingSourceBadge_:function(){var e=this.profileData_.user,t=e.getCameFromProductPromo();if(t){var i=t.getOkPaymentProductType(),a=e.getGender(),o=d.getUser().getGender(),s=this.sourceView_;s.appendTo(this.profileController_.getMetaContainer()),s.update(function(e,t,i){t=n(t),i=n(i);var a=v[e],o=a.captions["".concat(t,"_").concat(i)]||a.captions[t];return{featureName:a.featureName,explanationPage:a.explanationPage,text:o.text,cta:o.cta}}(i,a,o)),s.show()}},manageSourceWidgetVisibility_:function(e){this.sourceView_.show(),e.type!==_.PHOTO&&this.sourceView_.hide()},updateUser_:function(){E._super.updateUser_.apply(this,arguments),this.addVisitingSourceBadge_()},buyMore_:function(){var e=this.profileData_.user.getCameFromProductPromo().getOkPaymentProductType(),t=f[e];e&&t&&g.getInstance().get(e,this.getParameter("id"),4,this.clientSource).then(function(e){var i=(0,r.default)(e,1)[0],n=i.getPromo();i.getScreenHeader()&&n.setScreenHeader(i.getScreenHeader()),u.navigate(t,{promoBlock:n.toJSON(),context:{activationPlace:10}})})}},"VisitorProfilePage");e.exports=E},function(e,t,i){"use strict";var n=i(111),a=i(131),o=i(109),s=i(2990),r=n("BUY_MORE"),l=o.extend({id:"visiting-source-view",runningAnimation_:null,animationDone_:!1,events:{"click .js-visiting-widget":"buyMore_"},update:function(e){this.render(e),this.animate_()},render:function(e){this.$el.html(s.render(e))},onDisable:function(){this.$el.empty()},animate_:function(){var e=this,t=this.$el.find(".js-visiting-text1"),i=this.$el.find(".js-visiting-text2"),n=this.$el.find(".js-visiting-icon");t.addClass("hidden"),i.addClass("hidden"),this.runningAnimation_=a.timedSequence([{atTime:0,action:function(){t.removeClass("hidden"),i.addClass("is-above")}},{atTime:2e3,action:function(){t.addClass("is-below"),i.removeClass("hidden")}},{atTime:2500,action:function(){i.removeClass("is-above")}},{atTime:5e3,action:function(){i.addClass("is-below")}},{atTime:5500,action:function(){i.addClass("is-above").removeClass("is-below"),n.addClass("is-glowing"),e.animationDone_=!0}}])},buyMore_:function(){this.trigger(r.BUY_MORE)}},"VisitingSourceInfoView");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("VisitingSource",function(e){return n.createElement("div",{className:"visiting-source visiting-source--".concat(e.featureName," js-visiting-widget")},n.createElement("div",{className:"visiting-source__icon js-visiting-icon"},n.createElement(a,{name:"badge-feature-".concat(e.featureName)})),n.createElement("div",{className:"visiting-source__content-wrapper"},n.createElement("div",{className:"visiting-source__content js-visiting-text1"},n.createElement("span",null,e.text)),n.createElement("div",{className:"visiting-source__content js-visiting-text2"},n.createElement("span",null,e.cta)," ",n.createElement(a,{name:"generic-chevron-right",size:"xsm"}))))})},function(e,t,i){"use strict";var n=i(98),a=i(136),o=i(121),s=i(2992),r=o.extend({transition:!1,screenName:123,headerTemplate:null,createElement:function(){return a({className:"mutual-attraction",qaAttribute:"mutual-attraction"})},onStart:function(){var e=this.getParameters(),t=e.back,i=e.chatSettings,a=e.matchDetails,o=e.message,l=e.singleProfileData,c=e.withChat;r._super.onStart.apply(this,arguments),this.reactViewId_=this.renderReactView(n.createElement(s,{key:l.id,readyForVrt:this.readyForVrt.bind(this),jinba:this.jinba,backUrl:t,chatSettings:i,matchDetails:a,message:o,singleProfileData:l,withChat:c,onClose:this.onCloseComponent.bind(this)}),this.parent[0])},onCloseComponent:function(){this.destroyComponent_=!0},onStop:function(){r._super.onStop.apply(this,arguments),this.destroyComponent_&&(this.destroyComponent_=!1,this.destroy())}},"MutualAttractionController");e.exports=r},function(e,t,i){"use strict";function n(){return 2===f.getUser().getGender()}function a(){v.track(w,{element:51}),p.back()}var o=i(3),s=o(i(110)),r=o(i(112)),l=o(i(114)),c=o(i(115)),u=o(i(123)),d=o(i(116)),h=i(98),p=i(103),m=i(132),g=i(99),_=i(146),f=i(113),v=i(102),E=i(124),b=i(157),y=i(177),k=i(2993),S=i(101),w=S.ClickEvent,C=S.ClickGiftEvent,T=S.MatchEvent,P=S.SendMessageEvent,N=S.ViewElementEvent,I=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).state={isChatInputActive:!1,isSending:!1},i.onBrowserNavigation=i.onBrowserNavigation.bind((0,u.default)(i)),i.onClickChatIntro=i.onClickChatIntro.bind((0,u.default)(i)),i.onClickFader=i.onClickFader.bind((0,u.default)(i)),i.onFocusMessageInput=i.onFocusMessageInput.bind((0,u.default)(i)),i.onBeforeSendMessage=i.onBeforeSendMessage.bind((0,u.default)(i)),i.onSentMessage=i.onSentMessage.bind((0,u.default)(i)),i.onSentGiftMessage=i.onSentGiftMessage.bind((0,u.default)(i)),i.onErrorSentMessage=i.onErrorSentMessage.bind((0,u.default)(i)),i}return(0,d.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){p.navigationEvent.subscribe(this.onBrowserNavigation),v.track(T,{encrypted_user_id:this.props.singleProfileData.id,mode:3===this.props.singleProfileData.clientSource?6:void 0,vote_result:this.props.matchDetails.isCrush?6:2,activation_place:this.props.singleProfileData.activationPlace}),v.track(N,{element:51}),this.isChatEnabled()&&(v.track(N,{element:43}),v.track(N,{element:252}))}},{key:"componentWillUnmount",value:function(){p.navigationEvent.unsubscribe(this.onBrowserNavigation)}},{key:"render",value:function(){var e=this.props,t=e.backUrl,i=e.chatSettings,n=e.matchDetails,o=e.message,s=e.singleProfileData,r=this.isChatEnabled();return h.createElement(k,{heading:this.getHeadingLexeme(),message:o,chatMessagePlaceholder:this.getChatMessagePlaceholderLexeme(),chatSendText:g.get(32),backUrl:t,chatSettingsProto:i,matchDetails:n,singleProfileData:s,withChat:r,autoFocusChatInput:this.state.isChatInputActive,isChatInputActive:this.state.isChatInputActive,isSending:this.state.isSending,actions:this.getActions(r),onClickChatIntro:this.onClickChatIntro,onClickFader:this.onClickFader,onClickClose:a,onFocusMessageInput:this.onFocusMessageInput,onBeforeSendMessage:this.onBeforeSendMessage,onSentMessage:this.onSentMessage,onErrorSentMessage:this.onErrorSentMessage})}},{key:"isChatEnabled",value:function(){return this.props.withChat&&!n()}},{key:"getHeadingLexeme",value:function(){return g.get(506,this.props.singleProfileData.name)}},{key:"getChatMessagePlaceholderLexeme",value:function(){return this.props.singleProfileData?2===this.props.singleProfileData.gender?g.get(527):g.get(528):g.get(258)}},{key:"getActions",value:function(e){if(!e){var t={primary:this.getPrimaryButton()};if(m.isAllowed(m.getSync(113))){var i=this.getSecondaryButton();i&&(t.secondary=i)}return t}}},{key:"getPrimaryButton",value:function(){var e=n();return{dataQA:e?"match-smile":"match-chat",onClick:e&&this.props.withChat?this.sendSmile.bind(this):this.navigateToChat.bind(this),text:e?g.get(637):g.get(184)}}},{key:"getSecondaryButton",value:function(){if(!n())return{dataQA:"match-gift",onClick:this.navigateToGiftStore.bind(this),text:g.get(416)}}},{key:"onClickChatIntro",value:function(){v.track(w,{element:252}),this.setState({isChatInputActive:!0})}},{key:"onClickFader",value:function(){this.setState({isChatInputActive:!1}),v.track(w,{element:52,parent_element:252})}},{key:"onFocusMessageInput",value:function(){this.setState({isChatInputActive:!0})}},{key:"onBeforeSendMessage",value:function(){return v.track(w,{element:253,parent_element:252}),this.setState({isSending:!0}),!0}},{key:"onSentMessage",value:function(e){if(e&&e.statusType===e.STATUS.FAILED)this.onErrorSentMessage();else{var t,i=10===e.messageType;v.track(P,{activation_place:5,encrypted_user_id:e.toPersonId,length:1===e.messageType?e.message.length:0,message_first:!0,send_smile:22===e.messageType,send_giphy:36===e.messageType,send_sticker:23===e.messageType,send_gift:i}),this.props.onClose&&this.props.onClose(),i||(t=this.props.backUrl,"encounters"===_.extractRouteName(t)?(this.showMessageSentNotification(this.props.singleProfileData.id),p.back()):this.navigateToChat())}}},{key:"onErrorSentMessage",value:function(){this.setState({isSending:!1}),E.showNotification({type:E.TYPES.ERROR})}},{key:"showMessageSentNotification",value:function(){E.showNotification({picture:this.props.matchDetails.theirPicture,redirectPage:{redirectPage:10,userId:this.props.singleProfileData.id},text:g.get(529),type:E.TYPES.MESSAGE})}},{key:"navigateToChat",value:function(){v.track(w,{element:43}),p.navigate("messages",!0,{id:this.props.singleProfileData.id,userInitiated:!0,context:4})}},{key:"sendSmile",value:function(){var e=this.props.singleProfileData.id,t=new y({context:123,messageType:22,toPersonId:e});v.track(w,{element:227}),b.send(e,t).then(this.onSentMessage).catch(this.onErrorSentMessage)}},{key:"navigateToGiftStore",value:function(){var e=this.props.singleProfileData.id;v.track(w,{element:32}),v.track(C,{encryptedUserId:e,giftButton:7,messageFirst:!0}),p.navigate("gift-store",{context:4,id:e,onSendMessage:this.onSentGiftMessage,back:this.props.backUrl})}},{key:"onSentGiftMessage",value:function(e,t){e?this.onErrorSentMessage():this.onSentMessage(t);
}},{key:"onBrowserNavigation",value:function(e){e&&e.browserNavigation&&e.back&&this.props.onClose&&this.props.onClose()}}]),t}(h.Component);e.exports=I},function(e,t,i){"use strict";function n(e){var t=e.actions;if(!t)return null;var i=[],n=t.primary,o=t.secondary;return n&&i.push(a.createElement(f,{dataQA:{"data-qa":n.dataQA},key:"mutual-attraction-primary",text:n.text,type:"filled",color:"white",onClick:n.onClick})),o&&i.push(a.createElement(f,{dataQA:{"data-qa":o.dataQA},key:"mutual-attraction-secondary",text:o.text,type:"stroke",color:"white",onClick:o.onClick})),a.createElement(_,null,i)}var a=i(98),o=i(133),s=i(138),r=i(130),l=i(185),c=i(170),u=i(182),d=i(181),h=i(143),p=i(172),m=i(151),g=i(152),_=i(160),f=i(154),v=i(335),E=i(2994),b=i(538);e.exports=function(e){var t=e.heading,i=e.message,_=e.backUrl,f=e.matchDetails,y=e.singleProfileData,k=e.actions,S=e.withChat,w=e.autoFocusChatInput,C=e.isChatInputActive,T=e.isSending,P=e.chatSettingsProto,N=e.chatMessagePlaceholder,I=e.chatSendText,x=e.onFocusMessageInput,A=e.onClickChatIntro,O=e.onClickFader,V=e.onClickClose,R=e.onBeforeSendMessage,B=e.onSentMessage,L=e.onErrorSentMessage,F=y&&y.id;return a.createElement(o,null,a.createElement(s,null,a.createElement(c,{position:"fixed",transparent:!0,inverted:!0},a.createElement(u,null,a.createElement(d,{name:"navigation-bar-close",onClick:V})))),a.createElement(r,{align:"center",hpadded:!0,vpadded:!0},a.createElement(h,null,a.createElement(m,{color:"white",text:t}),a.createElement(p,null,a.createElement(b,{size:"lg",leftImage:f.theirPicture,rightImage:f.ourPicture,icon:"badge-feature-".concat(f.isCrush?"crush":"match")})),a.createElement(g,{color:"white",text:i}),a.createElement(n,{actions:k}))),S?a.createElement(l,null,a.createElement("div",{className:"promo-match-chat-stub"}),C?a.createElement("div",{className:"promo-match-chat-fader",onClick:O}):null,a.createElement("div",{className:"promo-match-chat-input","data-qa":"chat-input"},a.createElement(a.Fragment,null,C?a.createElement("div",{className:"promo-match-chat-full"},a.createElement(E,{autoFocus:w,backUrl:_,chatSettingsProto:P,placeholder:N,chatSendText:I,toPersonId:F,onFocusMessageInput:x,onBeforeSend:R,onAfterSend:B,onErrorSend:L})):a.createElement("div",{className:"promo-match-chat-intro",onClick:A},a.createElement("div",{className:"promo-match-chat-intro__label"},N),a.createElement("div",{className:"promo-match-chat-intro__send"},I))))):null,T?a.createElement(v,null):null)}},function(e,t,i){"use strict";var n=i(3),a=n(i(127)),o=n(i(110)),s=n(i(112)),r=n(i(114)),l=n(i(115)),c=n(i(123)),u=n(i(116)),d=i(98),h=i(104),p=i(126),m=i(103),g=i(99),_=i(102),f=i(157),v=i(177),E=i(551),b=i(552),y=i(553),k=i(2996),S=i(3001),w=i(101).ClickEvent,C={initialValue:h.string,backUrl:h.string.isRequired,chatSettingsProto:h.object.isRequired,autoFocus:h.bool,onFocusMessageInput:h.func,onChangeMessageInput:h.func,onBeforeSend:h.func,onSend:h.func,onAfterSend:h.func},T=function(e){function t(e){var i;return(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).state={value:e.initialValue||"",switchers:i.getInitialSwitchers(),selectedGifResult:null},i.onFocusMessageInput=i.onFocusMessageInput.bind((0,c.default)(i)),i.onChangeMessageInput=i.onChangeMessageInput.bind((0,c.default)(i)),i.onSend=i.onSend.bind((0,c.default)(i)),i.onSuccessSentMessage=i.onSuccessSentMessage.bind((0,c.default)(i)),i.onErrorSentMessage=i.onErrorSentMessage.bind((0,c.default)(i)),i.onClickSearchResult=i.onClickSearchResult.bind((0,c.default)(i)),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidUpdate",value:function(e,t){!t.selectedGifResult&&this.state.selectedGifResult&&this.onSend(null,!0)}},{key:"render",value:function(){return d.createElement(b,null,this.showMessageInput()?d.createElement(y,{placeholder:this.props.placeholder,value:this.state.value,autoFocus:this.props.autoFocus,onFocus:this.onFocusMessageInput,onChange:this.onChangeMessageInput}):null,d.createElement(S,{actions:this.state.switchers,sendText:this.props.chatSendText||g.get(32),isSendDisabled:this.isSendDisabled(),onSend:this.onSend}),this.showGifSearch()?d.createElement(k,{autoFocus:!1,onClickResult:this.onClickSearchResult}):null)}},{key:"showMessageInput",value:function(){return!this.showGifSearch()}},{key:"showGifSearch",value:function(){return this.state.switchers.find(function(e){return 155===e.featureType&&e.isActive})}},{key:"onFocusMessageInput",value:function(e){this.props.onFocusMessageInput&&this.props.onFocusMessageInput(e)}},{key:"onChangeMessageInput",value:function(e){var t=e.target.value;this.setState({value:t}),this.props.onChange&&this.props.onChange(t)}},{key:"onClickSearchResult",value:function(e){this.setState({selectedGifResult:e})}},{key:"getMessage",value:function(){return this.state.selectedGifResult?this.getGifMessage():this.state.switchers.find(function(e){return 18===e.featureType&&e.isActive})?this.getTextMessage():void 0}},{key:"getTextMessage",value:function(){return new v({context:this.props.context,message:this.state.value,messageType:1,streamId:this.props.streamId,toPersonId:this.props.toPersonId})}},{key:"getGifMessage",value:function(){return new v({context:this.props.context,gif:this.state.selectedGifResult,message:this.state.selectedGifResult.url,messageType:36,streamId:this.props.streamId,toPersonId:this.props.toPersonId})}},{key:"onSend",value:function(e,t){if(t||!this.isSendDisabled()){var i=this.getMessage();this.props.onBeforeSend&&!this.props.onBeforeSend(i)||(this.props.onSend?this.props.onSend(i):f.send(i.toPersonId,i).then(this.onSuccessSentMessage).catch(this.onErrorSentMessage))}}},{key:"onSuccessSentMessage",value:function(e){e&&e.statusType===e.STATUS.FAILED?this.onErrorSentMessage(e):(this.props.onAfterSend&&this.props.onAfterSend(e),this.setState({value:""}))}},{key:"onErrorSentMessage",value:function(e){this.setState({selectedGifResult:null}),this.props.onErrorSend&&this.props.onErrorSend(e)}},{key:"clearStateValue",value:function(){this.setState({value:"",selectedGifResult:null})}},{key:"isSendDisabled",value:function(){return this.props.isSendDisabled?this.props.isSendDisabled(this.state.value):""===this.state.value}},{key:"getInitialSwitchers",value:function(){var e=this,t=this.props.chatSettingsProto,i=t&&t.getInputSettings(),n=i&&i.getInputFeatures()||[],a=[];return n.forEach(function(t,i){var n=t.getFeature(),o=E[n];if(o){var s=t.getEnabled();a.push({featureType:n,isActive:0===i&&s,isDisabled:!s,onClick:e.getOnClickInputFeature(n),name:o})}}),a}},{key:"getOnClickInputFeature",value:function(e){switch(e){case 113:return this.navigateToGiftStore.bind(this);case 111:return this.navigateToStickers.bind(this);case 155:return this.enableGifSearch.bind(this);case 18:return this.enableMessageInput.bind(this)}}},{key:"navigateToStickers",value:function(){var e=this;_.track(w,{element:269}),m.navigate("stickers",{userId:this.props.toPersonId,onSendMessage:function(t,i){return e.onSuccessSentMessage(i)}})}},{key:"navigateToGiftStore",value:function(){var e=this;_.track(w,{element:350}),m.navigate("gift-store",{context:this.props.context,id:this.props.toPersonId,onSendMessage:function(t,i){var n;t&&e.onErrorSentMessage(t),e.onSuccessSentMessage(i),(n=e.props.backUrl)?m.navigate(n):m.navigate(p.get("default.page"))},back:this.props.backUrl})}},{key:"enableGifSearch",value:function(){_.track(w,{element:358}),this.enableSwitcherByType(155)}},{key:"enableMessageInput",value:function(){_.track(w,{element:252}),this.enableSwitcherByType(18)}},{key:"enableSwitcherByType",value:function(e){this.setState(function(t){return{switchers:t.switchers.map(function(t){return(0,a.default)({},t,{isActive:!t.isDisabled&&t.featureType===e})})}})}}]),t}(d.Component);T.propTypes=C,T.defaultProps={initialValue:"",autoFocus:!1,onFocusMessageInput:null,onChangeMessageInput:null,onBeforeSend:null,onSend:null,onAfterSend:null},e.exports=T},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s={id:a.string,name:a.string,value:a.string,placeholder:a.string,autoFocus:a.bool,onClick:a.func,onFocus:a.func,onKeyPress:a.func,onChange:a.func,onBlur:a.func,innerRef:o.ref},r=function(e){var t=e.id,i=e.name,a=e.value,o=e.placeholder,s=e.autoFocus,r=e.onClick,l=e.onFocus,c=e.onKeyPress,u=e.onChange,d=e.onBlur,h=e.innerRef;return n.createElement("div",{className:"csms-chat-controls-base-input-message"},n.createElement("div",{className:"csms-chat-controls-base-input-message__mirror"},a),n.createElement("textarea",{className:"csms-chat-controls-base-input-message__field",id:t,name:i,value:a,placeholder:o,onKeyPress:c,onClick:r,onFocus:l,onChange:u,onBlur:d,autoFocus:s,ref:h,"data-qa":"chat-input-textarea"}))};r.propTypes=s,r.defaultProps={id:"chat-controls-base-input-textarea",autoFocus:!1,onChange:function(){}},e.exports=r},function(e,t,i){"use strict";var n=i(3),a=n(i(127)),o=n(i(110)),s=n(i(112)),r=n(i(114)),l=n(i(115)),c=n(i(123)),u=n(i(116)),d=i(98),h=i(104),p=i(100),m=i(99),g=i(102),_=i(336),f=i(555),v=666,E=i(101).ClickEvent,b={autoFocus:h.bool,onFocusSearchInput:h.func,onChangeSearchInput:h.func},y=function(e){function t(e){var i;return(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).onFocusSearchInput=i.onFocusSearchInput.bind((0,c.default)(i)),i.onChangeSearchInput=i.onChangeSearchInput.bind((0,c.default)(i)),i.getGifs=p.debounce(i.getGifs.bind((0,c.default)(i)),v),i.state={searchInput:{value:"",autoFocus:e.autoFocus,placeholder:m.get(485),onChange:i.onChangeSearchInput},isLoading:!0,gifs:[]},i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.getGifs()}},{key:"componentDidUpdate",value:function(e,t){t.searchInput.value!==this.state.searchInput.value&&this.getGifs()}},{key:"render",value:function(){return d.createElement(f,{search:this.state.searchInput,results:this.state.gifs,noResultsText:m.get(488),isLoading:this.state.isLoading})}},{key:"onFocusSearchInput",value:function(e){this.props.onFocusSearchInput&&this.props.onFocusSearchInput(e)}},{key:"onChangeSearchInput",value:function(e){var t=e.target.value;this.props.onChangeSearchInput&&this.props.onChangeSearchInput(e),this.setState(function(e){return{isLoading:!0,searchInput:(0,a.default)({},e.searchInput,{value:t})}})}},{key:"getGifs",value:function(){var e=this;_.getInstance().get({query:this.state.searchInput.value}).then(function(t){e.setState({gifs:e.gifResponseToResults(t),isLoading:!1})})}},{key:"gifResponseToResults",value:function(e){var t=this;return Array.isArray(e.results)?e.results.map(function(e,i){return{key:e.id,src:e.image.preview,onClick:t.onClickResult.bind(t,e,i)}}):[]}},{key:"onClickResult",value:function(e,t){this.props.onClickResult&&this.props.onClickResult(e),g.track(E,{element:250,parent_element:358,position:t+1})}}]),t}(d.Component);y.propTypes=b,y.defaultProps={autoFocus:!1,onFocusSearchInput:null,onChangeSearchInput:null},e.exports=y},function(e,t,i){"use strict";var n=i(2998),a=i(161);e.exports={GIF_API_REQUEST_TYPE:{DEFAULT:"DEFAULT",SEARCH_BY_ID:"SEARCH_BY_ID",SEARCH:"SEARCH"},getGifApiKeys:function(e,t,i,a){var o=n[e],s={key:o.KEY,limit:a||30,value:i||""};return 2===e&&(s.key=this.getTenorAppKey()),o[t](s)},getTenorAppKey:function(){var e=a.getSettings();return(e&&e.getSdkIntegrations([]).find(function(e){return 9===e.getType()})).getAppKey()}}},function(e,t,i){"use strict";var n,a=i(3)(i(107));e.exports=(n={},(0,a.default)(n,1,{KEY:"3otOKQTJB2NH4V6iHK",KEY_DEBUG:"dc6zaTOxFJmzC",DEFAULT:function(e){var t=e.key,i=e.limit;return"https://api.giphy.com/v1/gifs/trending?api_key=".concat(t,"&limit=").concat(i)},SEARCH:function(e){var t=e.key,i=e.limit,n=e.value;return"https://api.giphy.com/v1/gifs/search?q=".concat(n,"&api_key=").concat(t,"&limit=").concat(i)},SEARCH_BY_ID:function(e){var t=e.key,i=e.value;return"https://api.giphy.com/v1/gifs?api_key=".concat(t,"&ids=").concat(i)}}),(0,a.default)(n,2,{DEFAULT:function(e){var t=e.key,i=e.limit;return"https://api.tenor.com/v1/trending?key=".concat(t,"&media_filter=minimal&limit=").concat(i)},SEARCH:function(e){var t=e.key,i=e.limit,n=e.value;return"https://api.tenor.com/v1/search?q=".concat(n,"&key=").concat(t,"&media_filter=minimal&limit=").concat(i)},SEARCH_BY_ID:function(e){var t=e.key,i=e.value;return"https://api.tenor.com/v1/gifs?ids=".concat(i,"&key=").concat(t,"&media_filter=minimal")}}),n)},function(e,t,i){"use strict";function n(e,t){this.count=0,this.page=null,this.provider=t,this.results=[],this.setup_(e)}var a=i(100),o=i(385),s=i(125).getLogger("GifCollection");n.fromJSON=function(e){var t=new n;return a.extend(t,a.pick(e,Object.keys(t))),Array.isArray(e.results)&&e.results.forEach(function(e,i){t.results[i]=o.fromJSON(e)}),t},n.prototype.setup_=function(e){var t=this;if(e)if(1===this.provider){if(!e.pagination)return void s.error("Incorrect response in GifCollection",{response:e});this.count=e.pagination.count,this.page=e.pagination.offset,this.results=e.data.map(function(e){return new o(e,t.provider)})}else 2===this.provider&&(this.results=e.results.map(function(e){return new o(e,t.provider)}))},e.exports=n},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(106),r={id:a.string,name:a.string,value:a.string,placeholder:a.string,autoFocus:a.bool,isDisabled:a.bool,onFocus:a.func,onChange:a.func,onBlur:a.func,innerRef:o.ref},l=function(e){var t=e.id,i=e.name,a=e.value,o=e.placeholder,r=e.autoFocus,l=e.onFocus,c=e.onChange,u=e.onBlur,d=e.innerRef;return n.createElement("label",{className:"csms-chat-controls-base-input-search"},n.createElement("div",{className:"csms-chat-controls-base-input-search__icon"},n.createElement(s,{name:"elements-input-search",size:"md"})),n.createElement("input",{className:"csms-chat-controls-base-input-search__field",type:"search",id:t,name:i,value:a,placeholder:o,autoFocus:r,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onFocus:l,onChange:c,onBlur:u,ref:d}))};l.propTypes=r,l.defaultProps={onChange:function(){}},e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(117),s=i(106),r=i(120).P1,l={actions:a.arrayOf(a.shape({name:a.oneOf(["gif","gift","location","multimedia","sticker","text","voice"]).isRequired,isDisabled:a.bool,isActive:a.bool,onClick:a.func})),sendText:a.string,isSendDisabled:a.bool,onSend:a.func},c=function(e){var t=e.actions,i=e.sendText,a=e.isSendDisabled,l=e.onSend,c=o({"csms-chat-controls-toolbar__submit":!0,"csms-chat-controls-toolbar__submit--is-disabled":a});return n.createElement("div",{className:"csms-chat-controls-toolbar"},n.createElement("div",{className:"csms-chat-controls-toolbar__actions"},t.map(function(e){var t=o({"csms-chat-controls-toolbar__actions-item":!0,"csms-chat-controls-toolbar__actions-item--is-active":e.isActive,"csms-chat-controls-toolbar__actions-item--is-disabled":e.isDisabled});return n.createElement("div",{className:t,"data-qa":"chat-switcher-".concat(e.name),key:e.name,onClick:e.onClick},n.createElement(s,{name:"chat-control-switcher-".concat(e.name)}))})),n.createElement("div",{className:c,onClick:l},i?n.createElement(r,{weight:"medium",ellipsis:!0},i):n.createElement("div",{className:"csms-chat-controls-toolbar__submit-icon"},n.createElement(s,{name:"chat-send-circle"}))))};c.propTypes=l,c.defaultProps={actions:[],isSendDisabled:!1},e.exports=c},function(e,t,i){"use strict";var n=i(100),a=i(103),o=i(159),s=i(101).ClickButtonEvent,r=i(150),l=i(146),c=i(102),u=i(3003),d=o.extend({headerTemplate:null,activationPlace:168,screenName:191,init:function(){d._super.init.apply(this,arguments),r.getSupportedProviders({providerContext:7})},onStart:function(){d._super.onStart.apply(this,arguments);var e=this.getParameter("clientNotification");if(e&&e.promo_block.buttons&&e.import_providers){var t=e.promo_block,i={buttonText:t.buttons[0].text,contentText:t.mssg,headerText:t.header,providerType:e.import_providers.providers[0].type,src:this.getParameter("src")};this.registerView(1,new u).appendTo(this.parent).on(u.ACTIONS.CLICK_BUTTON,this.onClickButton_,this).on(u.ACTIONS.CLOSE,function(){a.back()}).update(i)}else a.back()},onStop:function(){d._super.onStop.apply(this,arguments),this.removeView(1)},onClickButton_:function(e,t){c.track(s,{button_name:t});var i={providerContext:7,providerType:e,activationPlace:this.activationPlace,albumType:2,replaceCurrentUrl:!0,allAlbums:!0,limit:3};r.startImport(n.extend(i,{returnRoute:l.encodeRoute("external-provider-albums",i)}))}},"UploadVideo");e.exports=d},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(156),s=i(101).ButtonNameEnum,r=i(3004),l=a("CLICK_BUTTON","CLOSE"),c=n.extend({events:{"click .js-action":"onClickButton_"},providerType_:null,update:function(e){this.providerType_=e.providerType,e.NAVIGATION_BUTTONS=o,this.$el.html(r.render(e))},onClickButton_:function(e,t){var i=12===this.providerType_?107:s.BUTTON_NAME_TAKE_VIDEO;this.trigger(l.CLICK_BUTTON,this.providerType_,i)}},"UploadVideo");c.ACTIONS=l,e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(134),s=i(99);e.exports=i(108)("PromoUploadVideo",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__header"},n.createElement("div",{className:"promo-upload-video"},n.createElement("div",{className:"promo-upload-video__media"},n.createElement("div",{className:"multimedia"},n.createElement("div",{className:"multimedia__image",style:{backgroundImage:"url('".concat(e.src,"')")}}))),n.createElement("div",{className:"promo-upload-video__icon"},n.createElement("div",{className:"brick brick--stretch js-action","data-qa":"brick"},n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"adaptor-instagram",size:"stretch",shadow:!0})))))),n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__header cta-box__header--sm"},e.headerText),n.createElement("div",{className:"cta-box__content"},e.contentText),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{type:"add-photo",text:e.buttonText,narrow:"true",extraClass:"js-action"})),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm js-navigation","data-action":e.NAVIGATION_BUTTONS.CLOSE},n.createElement("span",{className:"inline-button__text"},s.get(328)))))))))})},function(e,t,i){"use strict";var n,a,o=i(3)(i(107)),s=i(25),r=i(303),l=i(156),c=i(242),u=i(131),d=i(113),h=i(3006),p=i(3007),m=i(3008),g=i(3009),_={BACK:1,BUTTON_CLICK:2},f={FACEBOOK:1,VKONTAKTE:2,ODNOKLASSNIKI:3,GOOGLE:4,TWITTER:15,INSTAGRAM:12,LINKEDIN:14},v=(n={},(0,o.default)(n,r.INVISIBLE_MODE,p),(0,o.default)(n,r.NICE_NAME,m),(0,o.default)(n,r.VIDEO_CHAT_EXPLANATION,g),n),E=(a={},(0,o.default)(a,1,"facebook"),(0,o.default)(a,12,"instagram"),a),b=c.extend({events:{"click .js-action":"onButtonClick_",'click .js-navigation[data-action="back"]':"onBackClick_","click .js-app-store":"onButtonStoreClick_"},render:function(e){e.NAVIGATION_BUTTONS=l,e.PROVIDER_TYPES=f,e.gender=u.getGenderString(d.getUser().getGender());var t=e.avatars;e.hasBadges=t.some(function(e){return!!e.badgeName}),e.hasSameSignificance=t.every(function(e){return e.significance===t[0].significance}),e.hasOneAvatar=1===t.length,e.providerType&&(e.providerName=E[e.providerType]);var i=this.getTemplateForMode_(e.mode);e.mode===r.VIDEO_CHAT_EXPLANATION&&(e.externalButton=u.createAppStoreBadgeUrl()),this.$el.html(i.render(e)),this.$el.addClass(e.mode),this.attachToggleScroll()},update:function(e){this.render(e)},onButtonClick_:function(e,t){t=s(t),this.lockButton(t),this.trigger(_.BUTTON_CLICK,t.data())},onBackClick_:function(){this.trigger(_.BACK)},getTemplateForMode_:function(e){return v[e]||h},lockButton:function(e){e.removeClass("js-action").addClass("is-loading"),this.$el.find("button").not(e).attr("disabled",!0)},onButtonStoreClick_:function(e,t){window.open(s(t).attr("data-external-url"),"_blank"),this.trigger(_.BACK)}},"PromotionView");b.ACTIONS=_,e.exports=b},function(e,t,i){"use strict";function n(e,t){return{"data-action-type":e.actionType,"data-activation-place":e.activationPlace,"data-button-name":e.buttonName,"data-cost":e.cost,"data-feature-type":e.featureType,"data-from":e.from,"data-product-type":e.productType,"data-promo-block-type":e.promoBlockType,"data-redirect-page":e.redirectPage,"data-sharing-picture":e.sharingPicture,"data-user-id":e.userId,"data-qa-button":t?"secondary":e.featureName}}var a=i(3)(i(144)),o=i(98),s=i(209),r=i(106),l=i(134),c=i(99),u=i(153);e.exports=i(108)("PromoGeneric",function(e){return o.createElement("div",{className:"layout layout--centered-content"},o.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},o.createElement("div",{className:"cta-box"},o.createElement("div",{className:"cta-box__media"},o.createElement("div",{className:"brick-wrapper\n                        ".concat(e.hasOneAvatar?" brick-wrapper--xxxlg":e.hasSameSignificance?" brick-wrapper--m-m-m":" brick-wrapper--m-b-m","\n                        ").concat(e.hasBadges?" brick-wrapper--padded":"")},u(e.avatars,e,function(e){return o.createElement("div",{className:"brick-wrapper__item",key:e.src},o.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},e.hasOneAvatar?o.createElement(s,{src:e.src,size:130}):e.hasSameSignificance?o.createElement(s,{src:e.src,size:90}):(e.significance,o.createElement(s,{src:e.src,size:80})),e.badgeName?o.createElement("div",{className:"brick__badge brick__badge--bc"},o.createElement(r,{branded:!0,size:"lg",shadow:!0,name:"function"==typeof e.badgeName?e.badgeName():e.badgeName})):null),e.pulseAnimation?o.createElement("div",{className:"pulse-animation pulse-animation--live is-animation"},o.createElement("svg",{viewBox:"0 0 50 50",className:"pulse-animation_"},o.createElement("circle",{className:"pulse-animation__circle pulse-animation__circle--first",fill:"currentColor",cx:"25",cy:"25",r:"25"}),o.createElement("circle",{className:"pulse-animation__circle pulse-animation__circle--second",fill:"currentColor",cx:"25",cy:"25",r:"25"}))):null)}))),o.createElement("div",{className:"cta-box__header qa-title",dangerouslySetInnerHTML:{__html:e.titleText}}),o.createElement("div",{className:"cta-box__content qa-message",dangerouslySetInnerHTML:{__html:e.messageText}}),o.createElement("div",{className:"cta-box__buttons"},o.createElement("div",{className:"button-wrapper"},u(e.buttons,e,function(t){return o.createElement("div",{className:"button-wrapper__item",key:t.actionText},function(e,t){return 0==t.ndx?o.createElement(l,{type:t.featureName,text:t.actionText,narrow:"true",extraClass:"js-action",attrs:n(t)}):e.hideCloseButton?o.createElement("button",(0,a.default)({className:"inline-button inline-button--sm js-navigation js-action"},n(t,!0)),o.createElement("span",{className:"inline-button__text"},t.actionText)):o.createElement(l,{type:"secondary",text:t.actionText,narrow:"true",extraClass:"js-action",attrs:n(t,!0)})}(e,t))}),e.hideCloseButton?null:o.createElement("div",{className:"button-wrapper__item"},o.createElement("button",{className:"inline-button inline-button--sm js-navigation","data-action":e.NAVIGATION_BUTTONS.CLOSE},o.createElement("span",{className:"inline-button__text"},c.get(328)))))))),e.costOfService?o.createElement("div",{className:"layout__footer layout__footer--vpadded layout__footer--hpadded layout__footer--limited"},o.createElement("div",{className:"hint"},e.costOfService)):null)})},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(134),s=i(99),r=i(153);e.exports=i(108)("PromoInvisibleMode",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--xxlg","data-qa":"brick"},n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"badge-feature-invisible-mode",size:"stretch"})))),n.createElement("div",{className:"cta-box__header qa-title"},e.titleText),n.createElement("div",{className:"cta-box__content qa-message"},e.messageText),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},r(e.buttons,e,function(e){return n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{type:"invisible-mode",text:e.actionText,narrow:"true",extraClass:"js-action",attrs:{"data-product-type":e.productType,"data-promo-block-type":e.promoBlockType,"data-action-type":e.actionType,"data-activation-place":e.activationPlace,"data-from":e.from,"data-redirect-page":e.redirectPage}}))}),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm js-navigation","data-action":e.NAVIGATION_BUTTONS.CLOSE},n.createElement("span",{className:"inline-button__text"},s.get(328)))))))),e.costOfService?n.createElement("div",{className:"layout__footer layout__footer--vpadded layout__footer--hpadded layout__footer--limited"},n.createElement("div",{className:"hint"},e.costOfService)):null)})},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout layout--centered-content"><div class="layout__content layout__content--hpadded layout__content--vpadded"><div class="cta-box"><div class="cta-box__media"><div class="brick-wrapper brick-wrapper--padded"><div class="brick-wrapper__item"><div class="brick brick--stretch" data-qa="brick">').x(t.get(["imageUrl"],!1),t,{block:i},{}).w('<div class="brick__badge brick__badge--bc">').h("select",t,{block:n},{key:v},"h").w('</div></div></div></div></div><div class="cta-box__header">').f(t.get(["titleText"],!1),t,"h").w('</div><div class="cta-box__content">').f(t.get(["messageText"],!1),t,"h",["s"]).w('</div><div class="cta-box__content"><b>').f(t.get(["empathizedText"],!1),t,"h").w('</b></div><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{attrs:E,block:b},{type:t.get(["providerName"],!1),text:t.get(["actionText"],!1),narrow:"true",extraClass:"js-action"},"h").w('</div><div class="button-wrapper__item"><button class="inline-button inline-button--sm js-navigation" data-action="').f(t.getPath(!1,["NAVIGATION_BUTTONS","CLOSE"]),t,"h").w('"><span class="inline-button__text">').f(t.get(["cancelActionText"],!1),t,"h").w("</span></button></div></div></div></div></div></div>")}function i(e,t){return e.w('<div class="brick__image" style="background-image: url(\'').h("PhotoUrl",t,{},{src:t.get(["imageUrl"],!1),width:"100"},"h").w("')\"></div>")}function n(e,t){return e.h("eq",t,{block:a},{value:o},"h").h("eq",t,{block:s},{value:r},"h").h("eq",t,{block:l},{value:c},"h").h("eq",t,{block:u},{value:d},"h").h("eq",t,{block:h},{value:p},"h").h("eq",t,{block:m},{value:g},"h").h("eq",t,{block:_},{value:f},"h")}function a(e,t){return e.h("Icon",t,{},{name:"adaptor-facebook",size:"lg",shadow:"true"},"h")}function o(e,t){return e.f(t.getPath(!1,["PROVIDER_TYPES","FACEBOOK"]),t,"h")}function s(e,t){return e.h("Icon",t,{},{name:"adaptor-vkontakte",size:"lg",shadow:"true"},"h")}function r(e,t){return e.f(t.getPath(!1,["PROVIDER_TYPES","VKONTAKTE"]),t,"h")}function l(e,t){return e.h("Icon",t,{},{name:"adaptor-odnoklassniki",size:"lg",shadow:"true"},"h")}function c(e,t){return e.f(t.getPath(!1,["PROVIDER_TYPES","ODNOKLASSNIKI"]),t,"h")}function u(e,t){return e.h("Icon",t,{},{name:"adaptor-google",size:"lg",shadow:"true"},"h")}function d(e,t){return e.f(t.getPath(!1,["PROVIDER_TYPES","GOOGLE"]),t,"h")}function h(e,t){return e.h("Icon",t,{},{name:"adaptor-twitter",size:"lg",shadow:"true"},"h")}function p(e,t){return e.f(t.getPath(!1,["PROVIDER_TYPES","TWITTER"]),t,"h")}function m(e,t){return e.h("Icon",t,{},{name:"adaptor-instagram",size:"lg",shadow:"true"},"h")}function g(e,t){return e.f(t.getPath(!1,["PROVIDER_TYPES","INSTAGRAM"]),t,"h")}function _(e,t){return e.h("Icon",t,{},{name:"adaptor-linkedin",size:"lg",shadow:"true"},"h")}function f(e,t){return e.f(t.getPath(!1,["PROVIDER_TYPES","LINKEDIN"]),t,"h")}function v(e,t){return e.f(t.get(["providerType"],!1),t,"h")}function E(e,t){return e.w('data-action-type="').f(t.get(["actionType"],!1),t,"h").w('"data-activation-place="').f(t.get(["activationPlace"],!1),t,"h").w('"data-button-name="').f(t.get(["buttonName"],!1),t,"h").w('"data-cost="').f(t.get(["cost"],!1),t,"h").w('"data-feature-type="').f(t.get(["featureType"],!1),t,"h").w('"data-from="').f(t.get(["from"],!1),t,"h").w('"data-notification-id="').f(t.get(["notificationId"],!1),t,"h").w('"data-product-type="').f(t.get(["productType"],!1),t,"h").w('"data-promo-block-type="').f(t.get(["promoBlockType"],!1),t,"h").w('"data-provider-type="').f(t.get(["providerType"],!1),t,"h").w('"data-redirect-page="').f(t.get(["redirectPage"],!1),t,"h").w('"data-sharing-picture="').f(t.get(["sharingPicture"],!1),t,"h").w('"data-user-id="').f(t.get(["userId"],!1),t,"h").w('"')}function b(e,t){return e}return e.register("nice-name/nice-name",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,_.__dustBody=!0,f.__dustBody=!0,v.__dustBody=!0,E.__dustBody=!0,b.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106),s=i(99);e.exports=i(108)("PromoVideoCallsExplanation",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick-wrapper brick-wrapper--padded"},n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch"},n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({src:e.src,width:100}),"')")}}),n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(o,{name:"badge-video",size:"lg",shadow:!0})))))),n.createElement("div",{className:"cta-box__header"},e.titleText),n.createElement("div",{className:"cta-box__content"},e.messageText),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("div",{className:"badge-appstore js-app-store","data-external-url":e.externalUrl},n.createElement("img",{src:e.externalButton}))),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm js-navigation","data-action":e.NAVIGATION_BUTTONS.CLOSE,"data-qa":"dismiss"},n.createElement("span",{className:"inline-button__text"},s.get(19)))))))))})},function(e,t,i){"use strict";var n=i(98),a=i(136),o=i(121),s=i(3011),r=i(142).waitForPageTransitionFinish,l=o.extend({overlay:!0,headerTemplate:null,notificationScreenAccess:3,screenName:460,createElement:function(){return a({className:"promo-gallery-page overlay-page"})},onStart:function(){l._super.onStart.apply(this,arguments),this.reactViewId_=this.renderReactView(n.createElement(s,{readyForVrt:this.readyForVrt.bind(this),userSubstitute:this.getParameter("userSubstitute"),context:this.getParameter("context")}),this.parent[0])},onStop:function(){var e=this;l._super.onStop.apply(this,arguments),r(function(){e.removeReactView(e.reactViewId_)})}},"PromoGalleryPage");e.exports=l},function(e,t,i){"use strict";function n(){f.back()}function a(e){var t=e.touches;return t||(t=[{
pageX:e.pageX,pageY:e.pageY}]),t}var o=i(3),s=o(i(127)),r=o(i(110)),l=o(i(112)),c=o(i(114)),u=o(i(115)),d=o(i(123)),h=o(i(116)),p=i(98),m=i(25),g=i(111),_=i(131),f=i(103),v=i(398),E=i(102),b=i(162),y=i(245),k=i(539),S=i(3012),w=i(540),C=50,T=g("DOWNWARD","UPWARD","NONE"),P=i(101),N=P.ClickBannerEvent,I=P.ScrollElementEvent,x=P.ViewBannerEvent,A=function(e){function t(e){var i;(0,r.default)(this,t),(i=(0,c.default)(this,(0,u.default)(t).call(this,e))).state={activeSlideIndex:0};var n=i.props.userSubstitute.contentModePromoCards;return i.cardsRefs=n.map(function(){return p.createRef()}),i.wrapperRef=p.createRef(),i.onTouchStart=i.onTouchStart.bind((0,d.default)(i)),i.onTouchMove=i.onTouchMove.bind((0,d.default)(i)),i.onTouchEnd=i.onTouchEnd.bind((0,d.default)(i)),i.currentPosition=0,i}return(0,h.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.props.readyForVrt(),this.bindTouchEvents(),b.on(b.EVENTS.RESIZE,this.onResize,this),this.updateMaxPosition(),m.os.samsungBrowser||(this.pinchToZoom=(new v).on(v.EVENTS.ZOOM,this.onPhotoZoomed,this)),this.enablePinchToZoom(),this.reportPromoCardEventShow({trackHotpanelEvent:!0})}},{key:"componentWillUnmount",value:function(){this.unbindTouchEvents(),this.disablePinchToZoom(),b.off(b.EVENTS.RESIZE,this.onResize,this)}},{key:"render",value:function(){var e=this,t=this.props.userSubstitute.contentModePromoCards;return p.createElement(S,{activeSlideIndex:this.state.activeSlideIndex,innerRef:this.wrapperRef,headerBlock:p.createElement(w,{data:this.props.userSubstitute.getHeaderData()}),onCloseClick:n},t.map(function(t,i){return p.createElement(k,{key:t.key,cardRef:e.cardsRefs[i],onPhotoClick:n,promoCard:t,onCtaClick:e.onCtaClick.bind(e,i)})}))}},{key:"onCtaClick",value:function(e){var t=this.props.userSubstitute.contentModePromoCards[e];this.props.userSubstitute.performPrimaryCta({promoCard:t,context:this.props.context,replaceNavigation:!0}),E.track(N,(0,s.default)({},t.hotpanelData,{context:this.props.context}))}},{key:"onTouchStart",value:function(e){var t=a(e);if(t.length>1)return e.preventDefault(),void e.stopPropagation();var i=t[0];this.distX=this.startX=this.currX=0,this.distY=this.startY=this.currY=0,this.pointX=i.pageX,this.pointY=i.pageY,this.didMove=!1,this.scrollBlocked=!1,this.resetPermanentBlock&&(this.scrollPermanentlyBlocked=!1,this.resetPermanentBlock=!1),this.closestSlide&&(this.closestPrev=this.closestSlide),this.isTouchStarted=!0,this.touchPrevented=!1}},{key:"onTouchMove",value:function(e){if(!this.isTouchStarted)return this.isTouchStarted=!1,void this.onTouchStart(e);var t=a(e);if(1===t.length)this.disablePinchToZoom();else if(t.length>1)return e.preventDefault(),void e.stopPropagation();var i=t[0],n=i.pageX-this.pointX,o=i.pageY-this.pointY;this.currX+=n,this.currY+=o,this.pointX=i.pageX,this.pointY=i.pageY;var s=this.currX-this.startX,r=this.currY-this.startY;this.updateStateAndDetermineIfPreventAnimation(s,r)?this.touchPrevented=!0:(this.distX=s,this.distY=r,e.preventDefault(),this.delta=o,this.scrollToPosition(this.currentPosition+o))}},{key:"updateStateAndDetermineIfPreventAnimation",value:function(e,t){return!(!this.scrollBlocked&&!this.scrollPermanentlyBlocked&&(this.didMove||(this.movingVertically=Math.abs(e)<Math.abs(t)),this.didMove=!0,this.movingVertically))}},{key:"onTouchEnd",value:function(e){if(a(e).length>1)return e.preventDefault(),e.stopPropagation(),void(this.isTouchStarted=!1);this.isTouchStarted=!1;var t=this.getClosestIndex(this.distY);this.selectCard(t,!this.touchPrevented,{fromTouchEvent:!0}),this.enablePinchToZoom(),this.scrollBlocked=!1}},{key:"moveStarted",value:function(e,t){var i=this.didMove;return this.didMove||(i=Math.sqrt(e*e+t*t)>7),i}},{key:"getClosestIndex",value:function(e){var t=function(e){var t=e<0;return t&&e<-C?T.DOWNWARD:!t&&e>C?T.UPWARD:T.NONE}(e),i=this.state.activeSlideIndex||0;return t===T.UPWARD?--i<0&&(i=0):t===T.DOWNWARD&&++i>this.cardsRefs.length-1&&(i=this.cardsRefs.length-1),i}},{key:"selectCard",value:function(e,t,i){var n=this.getCardByIndex(e);if(n){this.setState({activeSlideIndex:e}),this.scrollToCard(n,e,t);var a=i&&i.fromTouchEvent;this.reportPromoCardEventShow({trackHotpanelEvent:a}),a&&E.track(I,{element:971,direction:5,position:e})}}},{key:"scrollToCard",value:function(e,t,i){this.closestSlide=e;var n=this.wrapperRef.current;i&&n.classList.add("is-animated"),this.scrollToPosition(-n.offsetHeight*t),i&&_.onTransitionEnd(n,this.onScrollToCardEnd.bind(this))}},{key:"onScrollToCardEnd",value:function(){this.wrapperRef.current&&this.wrapperRef.current.classList.remove("is-animated")}},{key:"scrollToPosition",value:function(e){var t=this.wrapperRef.current;if(!t)return!1;this.currentPosition=e;var i=e;e>0?i=e/2:e<=-this.maxPosition&&(i=(e+this.maxPosition)/2-this.maxPosition),t.style.transform="translate3d(0, ".concat(i,"px, 0)")}},{key:"getCardByIndex",value:function(e){return this.cardsRefs[e].current}},{key:"getCurrentCard",value:function(){return this.getCardByIndex(this.state.activeSlideIndex)}},{key:"updateMaxPosition",value:function(){var e=this.wrapperRef.current;this.maxPosition=e.offsetHeight*(this.cardsRefs.length-1)}},{key:"onResize",value:function(){this.updateMaxPosition(),this.selectCard(this.state.activeSlideIndex,!0)}},{key:"onPhotoZoomed",value:function(e){1===e?this.enableScrolling():this.disableScrolling()}},{key:"reportPromoCardEventShow",value:function(e){var t=e.trackHotpanelEvent,i=this.props.userSubstitute.contentModePromoCards[this.state.activeSlideIndex];y.reportEventShow({promoCard:i,context:this.props.context}),t&&E.track(x,(0,s.default)({},i.hotpanelData,{context:this.props.context}))}},{key:"disableScrolling",value:function(){this.scrollPermanentlyBlocked=!0,this.unbindTouchEvents()}},{key:"enableScrolling",value:function(){this.resetPermanentBlock=!0,this.bindTouchEvents()}},{key:"enablePinchToZoom",value:function(){this.pinchToZoom&&!this.pinchToZoom.isEnabled()&&this.pinchToZoom.enable(this.getCurrentCard())}},{key:"disablePinchToZoom",value:function(){this.pinchToZoom&&this.pinchToZoom.isEnabled()&&this.pinchToZoom.disable()}},{key:"bindTouchEvents",value:function(){var e=this.wrapperRef.current;e.addEventListener("touchstart",this.onTouchStart),e.addEventListener("touchmove",this.onTouchMove),e.addEventListener("touchend",this.onTouchEnd)}},{key:"unbindTouchEvents",value:function(){var e=this.wrapperRef.current;e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),e.removeEventListener("touchend",this.onTouchEnd)}}]),t}(p.Component);e.exports=A},function(e,t,i){"use strict";function n(e){var t=e.innerRef,i=e.headerBlock,n=e.children,o=e.activeSlideIndex,c=e.onCloseClick,u=e.onShareClick,d=e.isDragged,h={contentInner:s({"promo-gallery__content-inner":!0,"is-animated":d})};return a.createElement("div",{className:"promo-gallery"},a.createElement("div",{className:"promo-gallery__content"},a.createElement("div",{className:h.contentInner,ref:t},a.Children.map(n,function(e){return a.createElement("div",{className:"promo-gallery__content-slide"},e)}))),i||c||u?a.createElement(a.Fragment,null,a.createElement("div",{className:"promo-gallery__top-shadow"}),a.createElement("div",{className:"promo-gallery__header"},i?a.createElement("div",{className:"promo-gallery__header-logo"},i):null,c||u?a.createElement("div",{className:"promo-gallery__header-actions"},u?a.createElement("div",{className:"promo-gallery__header-actions-item",onClick:u},a.createElement(r,{name:"navigation-bar-share",size:"lg"})):null,c?a.createElement("div",{className:"promo-gallery__header-actions-item",onClick:c},a.createElement(r,{name:"navigation-bar-close",size:"lg"})):null):null)):null,a.Children.count(n)>1?a.createElement("div",{className:"promo-gallery__pagination"},a.Children.map(n,function(e,t){return a.createElement("div",{className:"promo-gallery__pagination-item"},a.createElement(l,{isActive:t===o}))})):null)}var a=i(98),o=i(104),s=i(117),r=i(106),l=i(3013),c={children:o.any.isRequired,headerBlock:o.any,activeSlideIndex:o.number,isDragged:o.bool,onCloseClick:o.func,onShareClick:o.func};n.propTypes=c,e.exports=n},function(e,t,i){"use strict";function n(e){var t=e.isActive,i=e.onClick,n=s({"promo-gallery-pagination-item":!0,"is-active":t});return a.createElement("div",{className:n,onClick:i})}var a=i(98),o=i(104),s=i(117),r={isActive:o.bool,onClick:o.func};n.propTypes=r,e.exports=n},function(e,t,i){"use strict";var n=i(100),a=i(124),o=i(113),s=i(150),r=i(99),l=i(213),c=i(128),u=i(559),d=i(3015),h=i(103),p=i(105),m=p.FinishPhotoImport,g=p.ServerFinishExternalProviderImport,_=p.Photo,f="NEW_SOCIAL_PHOTOS",v=u.extend({headerTemplate:null,activationPlace:85,screenName:77,clientSource:88,init:function(){v._super.init.apply(this,arguments),this.registerView(f,new d).on(d.ACTIONS.ADD_PHOTOS,n.bind(this.onAddPhotos_,this)).on(d.ACTIONS.CHECK_OTHER,n.bind(this.onCheckOther_,this))},onStart:function(){if(v._super.onStart.apply(this,arguments),this.notification_&&this.notification_.getImportProviders){var e=this.notification_.getImportProviders();if(this.provider_=e&&n.isArray(e.getProviders())&&e.getProviders()[0],this.provider_){var t=this.notification_.getPhotoNotificationInfo();this.savedImportProgress_=t&&t.getImportProgress();var i=this.savedImportProgress_&&this.savedImportProgress_.getPhotoImportProgressData(),a=i&&n.isArray(i.getAlbums())&&i.getAlbums()[0];if(a){this.albumId_=a.getUid();var o=n.map(a.getPhotos(),function(e,t){return{photoUrl:e.getPreviewUrl(),photoId:e.getId(),index:t}});this.updateView(f,{addPhotos:this.notification_.getActionText(),checkOther:r.get(333),header:{title:this.notification_.getTitle()},content:{message:this.notification_.getMessage()},photos:o,addPhotosButton:!!o.length,providerType:this.provider_.getType()}),s.on(s.EVENTS.AUTH_ERROR,this.onError_),this.getView(f).appendTo(this.parent)}else this.onError_({leaveScreen:!0})}else h.back()}else h.back()},onStop:function(){v._super.onStop.apply(this,arguments),this.savedImportProgress_=null,this.provider_=null,s.off(s.EVENTS.AUTH_ERROR,this.onError_)},onAddPhotos_:function(e){this.getView(f).showLoading();var t=new m;t.setPhotos(e.map(function(e){return(new _).setId(e)}));var i=new g;i.setFinishPhotoImportData(t),s.finishImport(this.savedImportProgress_.getImportId(),i).then(this.onSuccess_.bind(this,e),this.onError_),l.sendNewSocialPhotoClick(1,this.notification_.getId())},onCheckOther_:function(){h.navigate("add-photos",{feature:102,albumType:2}),l.sendNewSocialPhotoClick(9,this.notification_.getId())},onError_:function(e){e=e||{},this.getView(f).hideLoading(),a.showNotification({type:a.TYPES.ERROR,text:e.message&&e.message}),e.leaveScreen&&h.back()},onSuccess_:function(e){this.getView(f).hideLoading(),a.showNotification({type:a.TYPES.INFO,text:1===e.length?r.get(335):r.get(334)}),c.getInstance().invalidate(o.getUserId()),h.back()}},"NewSocialPhotos");e.exports=v},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(176),s=i(156),r=i(3016),l={ADD_PHOTOS:"ADD_PHOTOS",CHECK_OTHER:"CHECK_OTHER"},c={1:"facebook",12:"instagram"},u=[],d=a.extend({events:{"click .js-photo-item":"onCheckPhoto_","click .js-add-photos":"onAddPhotos_","click .js-check-other":"onCheckOther_"},render:function(e){e.NAVIGATION_BUTTONS=s,this.$el.html(r.render(e)),this.toggleScroll_&&this.toggleScroll_.destroy(),this.toggleScroll_=new o(this.$el.find(".js-scroll-toggle"))},update:function(e){e.providerType&&(e.providerName=c[e.providerType]),this.render(e),this.getPhotoIds_()},onCheckPhoto_:function(){this.getPhotoIds_()},getPhotoIds_:function(){u=n.map(this.$el.find("input.js-photo-item:checked"),function(e){var t=e.getAttribute("data-photo-id");return t&&t.toString()}),this.$el.find(".js-add-photos").prop("disabled",!u.length)},onAddPhotos_:function(){this.trigger(l.ADD_PHOTOS,u)},onCheckOther_:function(e,t){var i=t.getAttribute("data-provider-type");i&&this.trigger(l.CHECK_OTHER,{providerType:i})}},"NewSocialPhotos");d.ACTIONS=l,e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(166),s=i(134),r=i(99),l=i(153);e.exports=i(108)("NewSocialPhotos",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__content layout__content--vpadded layout__content--hpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--lg","data-qa":"brick"},n.createElement("div",{className:"brick__icon"},n.createElement(a,{size:"stretch",name:"adaptor-".concat(e.providerName)})))),n.createElement("div",{className:"cta-box__header cta-box__header--xsm"},e.header.title),n.createElement("div",{className:"cta-box__content"},e.content.message),n.createElement("div",{className:"cta-box__content cta-box__content--wide"},n.createElement("div",{className:"photo-grid-liquid photo-grid-liquid--centered"},l(e.photos,e,function(e){return n.createElement("label",{className:"photo-grid-liquid__item"},n.createElement("div",{className:"photo-grid-liquid__item-image needsclick",style:{backgroundImage:"url('".concat(o({src:e.photoUrl,width:100}),"')")}}),n.createElement("div",{className:"photo-grid-liquid__item-icon"},n.createElement("label",{className:"checkbox-singular"},n.createElement("input",{type:"checkbox",name:"",id:e.photoId,className:"js-photo-item","data-photo-id":e.photoId,checked:!0}),n.createElement("div",{className:"checkbox__inactive"},n.createElement(a,{name:"elements-input-checkbox"})),n.createElement("div",{className:"checkbox__active"},n.createElement(a,{name:"elements-input-checkbox-selected"})))))}))),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},e.addPhotosButton&&n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{type:e.providerName,text:e.addPhotos,extraClass:"js-add-photos"})),n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{type:e.providerName,stroke:"true",text:e.checkOther,extraClass:"js-check-other",attrs:{"data-provider-type":e.providerType}})),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm js-navigation","data-action":e.NAVIGATION_BUTTONS.CLOSE,"data-qa":"navbar-close"},n.createElement("span",{className:"inline-button__text"},r.get(328)))))))))})},function(e,t,i){"use strict";var n=i(103),a=i(99),o=i(113),s=i(128),r=i(260),l=i(159),c=i(3018),u=i(124),d=i(122),h=i(102),p=i(412),m=i(105),g=m.User,_=m.ServerErrorMessage,f=i(101),v=f.ClickEvent,E=f.PostEvent,b=p.SOCIAL_MEDIA_ELEMENT,y=p.CONTENT_TYPE,k=p.back,S=p.getPreparedSharingOptions,w=l.extend({notificationScreenAccess:3,headerTemplate:null,whatsappMessage_:"",screenName:369,photoId_:void 0,construct:function(){w._super.construct.apply(this,arguments),this.mainView_=this.registerView(new c).on(c.ACTIONS.CANCEL,this.onCancel_,this).appendTo(this.element)},open:function(e){var t=this,i=this.isStarted();if(w._super.open.apply(this,arguments),!i||e.userId!==this.displayedUserId_)return this.mainView_.reset().showLoading(),this.displayedUserId_=void 0,this.returnRoute_=this.getParameter("returnRoute"),this.getUser_().then(function(e){return t.user_=e,t.fetchProviders_()}).then(function(e){t.providers_=e,t.photoId_=e.getPromo().getImageId()[0],t.displayPage_()}).catch(function(e){if(k(t.returnRoute_),u.showNotification({type:u.TYPES.ERROR,error:e}),!(e instanceof d.RpcError||e instanceof _))throw e})},getUser_:function(){var e=this.getParameter("user");return e?Promise.resolve(e):s.getInstance().get({id:this.getParameter("userId")})},displayPage_:function(){var e=this.user_;if(e instanceof g){this.displayedUserId_=e.getUserId();var t=this.getCopyStrings_(e),i=t.title,n=t.subtitle,a={name:e.getName(),age:e.getAge(),location:this.getUserLocation(),title:i,subtitle:n,imageId:this.photoId_,shareOptions:this.getShareOptions()};this.mainView_.update(a),this.mainView_.hideLoading()}else k(this.returnRoute_)},getCopyStrings_:function(e){var t=e.getUserId()===o.getUserId(),i=this.providers_.getPromo().getHeader();return{title:t?a.get(465):e.getName(),subtitle:i}},getUserLocation:function(){var e="";return this.user_.getCity()&&this.user_.getCity().getName()&&(e=this.user_.getCity().getName()),this.user_.getCountry()&&this.user_.getCountry().getName()&&(e="".concat(e,", ").concat(this.user_.getCountry().getName())),e},getShareOptions:function(){var e=this.providers_.getProviders([]);return S(e)},onCancel_:function(){h.track(v,{screen_name:this.screenName,element:113}),n.back()},fetchProviders_:function(){var e=this,t=this.user_.getUserId(),i=t===o.getUserId(),n=this.getParameter("context");return n||(n=i?8:9),new Promise(function(i,a){r.getProviders({userId:t,photoId:e.getParameter("imageId"),streamId:e.getParameter("streamId"),context:n,sharingFlow:e.getParameter("sharingFlow"),supportedSharingModes:e.getParameter("supportedSharingModes")},function(e,t){return e?a(e):void i(t)})})},trackPost:function(e){var t=b[e],i=this.getParameter("activationPlace");t&&i&&h.track(E,{social_media:t,activation_place:i,content_type:y[i],encrypted_user_id:this.user_.getUserId()})}},"ShareProfile");e.exports=w},function(e,t,i){"use strict";var n=i(98),a=i(100),o=i(3019),s=i(173),r=i(111),l=i(102),c=i(560),u=r("SHARE","CANCEL"),d=i(101).ScrollElementEvent,h=s.extend({events:{"click .js-dismiss":"onDismiss_"},init:a.noop,template_:o,scroller_:void 0,renderData_:null,socialSharingReactViewId_:null,ACTIONS:u,onDisable:function(){this.scroller_&&this.scroller_.off("scroll")},update:function(e){this.renderData_=e,h._super.update.apply(this,arguments)},render:function(){h._super.render.apply(this,arguments),this.grabScroller_(),this.renderSocialSharing_()},grabScroller_:function(){this.scroller_=this.$el.find(".js-scroller"),this.scroller_.on("scroll",a.debounce(this.onListScroll.bind(this),300))},renderSocialSharing_:function(){var e=(this.renderData_||{}).shareOptions,t=(void 0===e?[]:e).map(function(e){var t=e.sharingDescription,i=e.networkType,n=e.sharingUrl,a=e.displayName;return{resource:e.provider,title:a,networkType:i,sharingDescription:t,link:n}});this.socialSharingReactViewId_=this.renderReactView(n.createElement(c,{sharingOptions:t,trackPostToAnalytics:!1}),this.$el.find(".js-react-social-sharing")[0])},onDismiss_:function(){this.trigger(u.CANCEL),this.socialSharingReactViewId_&&this.removeReactView(this.socialSharingReactViewId_)},onListScroll:function(){l.track(d,{screen_name:369,element:371,direction:6})}},"ShareProfile");h.ACTIONS=u,e.exports=h},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout layout--centered-content"><div class="layout__content layout__content--vpadded layout__content--hpadded"><div class="sharing-media"><div class="sharing-media__blur"><div class="multimedia"><div class="multimedia__image" style="background-image: url(\'').f(t.getPath(!1,["data","imageId"]),t,"h").w('\')"></div></div></div><div class="sharing-media__multimedia"><div class="multimedia"><div class="multimedia__image" style="background-image: url(\'').f(t.getPath(!1,["data","imageId"]),t,"h").w('\')"></div></div></div></div></div><div class="layout__content layout__content--vpadded layout__content--hpadded"><div class="cta-box"><div class="cta-box__header">').f(t.getPath(!1,["data","subtitle"]),t,"h",["s"]).w('</div><div class="cta-box__buttons cta-box__buttons--wide js-react-social-sharing"></div><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item"><button class="inline-button js-dismiss" data-qa-hint="cancel"><span class="inline-button__text">').h("t",t,{},{k:"19"},"h").w("</span></button></div></div></div></div></div></div>")}return e.register("share-profile",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r=i(337),l=i(259),c={children:o.node.isRequired,layout:o.oneOf(["vertical","columns","horizontal","grid"]),hpadded:o.bool,innerRef:l.propTypes.innerRef},u=function(e){var t=e.children,i=e.layout,o=e.hpadded,c=e.innerRef,u=s((0,n.default)({"csms-adaptors-list":!0},"csms-adaptors-list--".concat(i),!0));switch(i){case"horizontal":return a.createElement(l,{spacing:"xlg",align:"center",hpadded:o,innerRef:c},t);case"grid":return a.createElement(r,{centered:!0,shape:"content",spacing:"lg"},t);default:return a.createElement("div",{className:u},a.Children.map(t,function(e){return a.createElement("div",{className:"csms-adaptors-list__item"},a.cloneElement(e,{layout:"horizontal"}))}))}};u.propTypes=c,u.defaultProps={layout:"vertical"},e.exports=u},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r=i(285),l=i(286),c=i(287),u=i(191),d=i(193),h=i(192),p=i(277),m=i(163),g=i(106),_=i(120),f=_.P1,v=_.P3,E={layout:o.oneOf(["horizontal","vertical"]),resource:o.oneOf(["facebook","vkontakte","odnoklassniki","google","gmail","instagram","linkedin","messenger","telegram","trustpilot","twitter","whatsapp","verification","phone","premium","photo-gallery","sms","copy","other"]).isRequired,isActive:o.bool,title:o.string,message:o.string,action:o.string,status:o.oneOf(["processing","error"]),isConfigurable:o.bool},b=function(e){var t,i=e.layout,o=e.resource,_=e.isActive,E=e.title,b=e.message,y=e.action,k=e.status,S=e.isConfigurable,w=s((0,n.default)({"csms-adaptor":!0},"csms-adaptor--".concat(i),!0));switch(k){case"error":t="badge-attention";break;case"processing":t="badge-spinning-arrows";break;default:t=null}var C=_?"adaptor-".concat(o):"adaptor-".concat(o,"-inactive");switch(i){case"horizontal":return a.createElement("div",{className:w,key:o},a.createElement(u,null,a.createElement(d,null,a.createElement(m,{size:"sm",icon:{name:C,color:"primary"},badge:t?{icon:{name:t,size:"md"}}:null})),a.createElement(h,null,a.createElement("div",{className:"csms-adaptor__name"},a.createElement(f,{breakWords:!0},E)),b?a.createElement("div",{className:"csms-adaptor__message"},a.createElement(f,{breakWords:!0},b)):null,y?a.createElement("div",{className:"csms-adaptor__action"},a.createElement(f,{breakWords:!0},y)):null),S?a.createElement(p,null,a.createElement("div",{className:"csms-adaptor__chevron"},a.createElement(g,{name:"generic-chevron-right",size:"sm"}))):null));case"vertical":return a.createElement("div",{className:w,key:o},a.createElement(r,null,a.createElement(l,null,a.createElement(m,{size:"sm",icon:{name:C,color:"primary"},badge:t?{icon:{name:t,size:"md"}}:null})),a.createElement(c,null,E?a.createElement("div",{className:"csms-adaptor__name"},a.createElement(v,{breakWords:!0},E)):null,y?a.createElement("div",{className:"csms-adaptor__action"},a.createElement(v,{breakWords:!0},y)):null)))}};b.propTypes=E,b.defaultProps={layout:"vertical",isActive:!1,isConfigurable:!1},e.exports=b},function(e,t,i){"use strict";function n(e){return Z.isContactsForCredits(e)}function a(e){return 1===e?"male":2===e?"female":"unknown"}function o(e){return B.getUserPhoto(e)}function s(e){return Oe=e.find(function(e){return 24===e.getPromoBlockType()&&6===e.getPromoBlockPosition()})||Oe}var r=i(3)(i(4)),l=i(100),c=i(304),u=i(132),d=i(103),h=i(99),p=i(146),m=i(113),g=i(103),_=g.getUrl,f=g.getLocation,v=g.updateLocation,E=g.back,b=i(400),y=i(207),k=i(208),S=i(149),w=i(122),C=i(148),T=i(494),P=i(105),N=P.ClientPurchaseReceipt,I=P.ClientUserVerify,x=P.ClientVoteResponse,A=P.ServerEncountersVote,O=P.ServerErrorMessage,V=i(218),R=i(402),B=i(131),L=i(102),F=i(187),M=i(271),D=i(257),U=i(382),j=i(165),G=i(215),q=i(203),H=i(313),z=i(413),Y=i(121),$=i(330),W=i(513),K=i(197),Q=i(3028),X=i(3032),Z=i(157),J=i(220),ee=i(541),te=i(177),ie=i(124),ne=i(256),ae=i(245),oe=i(3035),se=i(561),re=i(3105),le=i(524),ce=i(3108),ue=i(3109),de=i(3115),he=i(578),pe=i(361),me=i(101),ge=me.BlockProfileEvent,_e=me.ChatScreenEvent,fe=me.ClickBannerEvent,ve=me.ClickEvent,Ee=me.ClickGiftEvent,be=me.ClickStickersEvent,ye=me.FavoriteEvent,ke=me.InitialChatEvent,Se=me.SendMessageEvent,we=me.ViewBannerEvent,Ce=me.ViewElementEvent,Te=me.ViewScreenEvent,Pe=me.VoteProfileEvent,Ne=i(401),Ie=oe.EVENTS,xe=Y.BUTTONS,Ae=Y.VIEWS.NAVIGATION_BAR,Oe=null,Ve=i(3118),Re=i(3119),Be=i(267),Le=i(580),Fe=Y.extend({notificationScreenAccess:3,transition:!1,folderId_:0,headerTemplate:ce,promoBanners_:null,theirId_:null,didRender_:!1,isSelectable_:!1,selectedMessages_:null,showAdTimeout_:null,screenName:20,miniProfileIsDown_:!0,construct:function(){var e=this;Fe._super.construct.apply(this,arguments),this.messages_=[],this.loader_=V(this.element[0]),this.sendMessageAfterTopUpCallback_=R("send_instant_message_after_top_up",this.sendMessageAfterTopUp_.bind(this)),this.chatMultimediaComponent_=de({getClientSource:function(){return e.getClientSource()},getStreamId:function(){return e.getParameter("streamId")},onSendMessage:this.handleMultimediaMessageSend_.bind(this)}),C(this),this.promoBanners_=[],this.registerController("block-options",new W).on(W.EVENTS.BLOCKED,this.onUserBlocked_);var t=this.chatControls_=ue({visibility:he(this),onInputMethodSelected:function(t){return e.handleInputMethodSelected_(t)},onInputUpdate:function(){return e.handleInputUpdate_()},onWriting:function(){return e.notifyWriting_()},onGiftInputMethodClick:function(){return e.onSendGift_("input")},onStickerInputMethodClick:function(){return e.onSendSticker_("input")},onGifInputMethodClick:function(){return e.onSendGif_()},onSubmit:function(t){return e.handleSendTextMessage_(t)},onMultimediaInputMethodClick:function(){return e.handleMultimediaInputMethodClick_()},onInputActivate:function(t){return e.onUserInputActivated_(t)},onInputBlur:this.onBlurInput.bind(this)}),i=this.chatView_=this.registerView("chat",new oe({chatControls:t,needsPayment:this.needsPayment_.bind(this),onInputUpdate:this.handleInputUpdate_.bind(this),onFocusInput:this.onUserInputActivated_.bind(this),onBlurInput:this.onBlurInput.bind(this),onSendTextMessage:this.handleSendTextMessage_.bind(this),onClickCamera:this.handleMultimediaInputMethodClick_.bind(this),onSelectGif:this.onSelectGif_.bind(this)})).on(Ie.APP_DOWNLOAD,this.onPhotoAppBannerClick_).on(Ie.BLOCK_USER,this.onBlockUser_).on(Ie.BLOCKER_ACTION,this.onBlockerAction_).on(Ie.DISMISS_INITIAL_SCREEN,this.onDismissInitialScreen_).on(Ie.LOAD_PROFILE,this.loadProfilePage_).on(Ie.SEND_DIRECT_GIFT,this.onSendGiftDirect_).on(Ie.SEND_GIFT,this.onSendGift_).on(Ie.SEND_SMILE,this.onSendSmile_).on(Ie.SHOW_GIFT,this.onShowGift_).on(Ie.VOTE,this.onVote_).on(Ie.CANCEL_REPORT,this.onToggleReportMode_,this).on(Ie.SEND_REPORT,this.onSendReportMessage_,this);i.getMessagesView().on(se.EVENTS.REPORT,this.onReport_).on(se.EVENTS.SELECT_MESSAGE,this.onSelectMessage_,this).on(se.EVENTS.CLICK_MESSAGE,this.onClickMessage_,this),this.notificationPermissionController_=new le({place:"message",activationPlace:11}),this.registerController(this.notificationPermissionController_),this.jinba=new F("Chat"),i.appendTo(this.element),this.element.append(this.chatMultimediaComponent_.zepto),Le.on(Le.EVENTS.USER_CHANGED,this.updateCurrentUser,this)},updateChatView:function(){var e=this.getParameters().chatUser,t=Z.getCachedClientOpenChat(this.theirId_);t.dummy&&e&&(t.chatUser=e),this.handleResponse_(t)},open:function(e){var t=this,i=e.parameters,n=e.activationPlace,a=e.transition,o=l.clone(e),s=i.id,r=this.theirId_===s;if(!s||!Number(s)&&s.length<20)return this.log.error("Cannot load chat page without a valid id"),this.showErrorMessage_(),void E();if(this.setTheirId_(s),r&&Object.assign(i,this.parameters_),!i.activationPlace){var c=Object.assign({},i,{activationPlace:l.get(i,"hotPanelData.inappId")?165:n||1});v("messages",c),o.parameters=c}Fe._super.open.call(this,o),this.currentUserId_=m.getUserId(),this.getController("block-options").setUserId(this.theirId_),this.processUnfinishedMessageSending_(),this.processPendingMessage_(),this.chatMultimediaComponent_.checkPendingMultimedia(),a.whenFinished(function(){var i=Z.getCachedClientOpenChat(s),n=l.last(d.getHistory()),a=n&&["gallery","gift","multimedia"].includes(n.routeName),o=i&&!i.dummy&&e.navigatedBack&&a;t.updateChatView(),t.finishOpening_({openChat:!o}),t.canShowMiniProfile()&&r&&(t.miniProfileIsDown_?t.shiftProfileDown_():t.shiftProfileTop_())})},handleMultimediaMessageSend_:function(e){e&&this.onMessageSendFail_(e)},handleInputUpdate_:function(){var e=this;setTimeout(function(){return e.chatView_.updateStub()},0)},notifyWriting_:function(){c.getInstance().notifyWriting(this.theirId_)},onStart:function(){Fe._super.onStart.apply(this,arguments),this.isSelectable_=!1,this.selectedMessages_=[],G.on(G.ACTIONS.SUCCESS,this.updateVerifiedInfo_,this),Z.on(Z.EVENTS.FLUSH,this.getClientOpenChat_,this).on(Z.EVENTS.HISTORY_UPDATED,this.onHistoryUpdated_,this).on(Z.EVENTS.MESSAGE_FROM_ME,this.onMessageFromMe_,this).on(Z.EVENTS.MESSAGE_FROM_USER,this.onChatMessageReceived_,this)},onStop:function(){Fe._super.onStop.apply(this,arguments),this.shiftProfileDown_(),this.isSelectable_=!1,this.chatView_.getMessagesView().destroy(),this.chatView_.removeGoogleAds(),G.off(G.ACTIONS.SUCCESS,this.updateVerifiedInfo_,this),Z.off(Z.EVENTS.FLUSH,this.getClientOpenChat_,this).off(Z.EVENTS.HISTORY_UPDATED,this.onHistoryUpdated_,this).off(Z.EVENTS.MESSAGE_FROM_ME,this.onMessageFromMe_,this).off(Z.EVENTS.MESSAGE_FROM_USER,this.onChatMessageReceived_,this)},setTheirId_:function(e){this.theirId_!==e&&(this.theirId_&&(this.reset_(),Z.ignoreUser(this.theirId_)),this.theirId_=e,this.decryptedUserId_=void 0,Z.watchUser(e))},reset_:function(){z.invalidateCache(),this.multimediaBannerViewTracked_=!1,Ne.saveMessage(this.theirId_,this.chatControls_.getText()),this.chatView_.reset();var e=this.getMiniProfileView_();e&&e.reset(),this.messages_=[],this.didRender_=!1,this.noMoreMessages_=void 0,this.isSelectable_=!1,this.selectedMessages_=[]},finishOpening_:function(e){var t=e.openChat;this.checkQuotaPayment_()||(t?this.openChat_():this.trackHotPanelScreen(!0))},checkQuotaPayment_:function(){var e;return"quota"===D.getInstance().getBackAction()&&(D.getInstance().getResult()===D.RESULTS.PENDING&&(this.onQuotaProcessing_(),e=!0),D.getInstance().clear()),e},openChat_:function(){this.getClientOpenChat_().then(this.trackHotPanelScreen.bind(this,!0))},processPendingMessage_:function(){var e=f(),t=e.routeName,i=e.parameters;if("1"===i.paymentFlow){if(!this.waitingForTopUpConfirmation_){var n=l.omit(i,"paymentFlow");v(t,n),this.sendMessageAfterTopUpCallback_.execute()}}else this.loader_.hide()},sendMessageAfterTopUp_:function(e){var t=this,i=e.text;this.hasNoEnoughCredits_()?this.getClientOpenChat_().then(function(){t.hasNoEnoughCredits_()||t.sendTextMessage_(i)}):this.sendTextMessage_(i)},processUnfinishedMessageSending_:function(){var e=f(),t=e.routeName,i=e.parameters;if("2"===i.paymentFlow){var n=l.omit(i,"paymentFlow");v(t,n),this.finishMessageSending_()}},finishMessageSending_:function(){Ne.removeMessage(this.theirId_),this.chatControls_.setText("")},loadChat_:function(){return this.isActive()?this.getClientOpenChat_():(this.didRender_=!1,this.chatView_.hideLoading(),this.log.warn("Trying to fetch messages when page is not active."),Promise.resolve())},getClientSource:function(){var e=6===Number(this.getParameter("folderId")),t=!0===u.getSync(163).getEnabled();return e&&t?127:Number(this.getParameter("context"))||10},getClientOpenChat_:function(){var e=this,t=this.getParameters(),i={context:this.getClientSource(),folderId:Number(t.folderId),streamId:t.streamId};return t.userSubstitute&&(i.userType=3),Z.getCachedClientOpenChat(this.theirId_).dummy&&this.chatView_.showLoading(),Z.getClientOpenChat(this.theirId_,i).then(function(t){e.handleResponse_(t),e.chatView_.hideLoading()},this.onChatLoadError_)},loadProfilePage_:function(){var e=this.theirId_;this.isUserSubstitute()?this.showPromoCardsGallery():(Z.hasInitialChatScreen(this.theirId_)&&Z.invalidate(e),U.navigateToProfile({id:e,toClientSource:Number(this.getParameter("toClientSource")),params:{id:e,sectionId:"0"
}}))},showErrorMessage_:function(e){ie.showNotification({type:ie.TYPES.ERROR,text:e})},onNavigationAction:function(e){switch(pe.isNewChatInput&&e===xe.BACK&&this.chatView_.getChatInputView().removeContainer(),e){case xe.AVATAR:this.loadProfilePage_();break;case xe.REPORT:this.getController("block-options").show();break;case xe.FAVOURITE:this.onFavourite_();break;case xe.VIDEO_CALL:this.openVideoChatExplanationScreen_();break;case xe.CANCEL:L.track(ve,{element:113}),this.onToggleReportMode_();break;case xe.CANCEL_AND_BACK:L.track(ve,{element:52}),this.onToggleReportMode_();break;default:Fe._super.onNavigationAction.apply(this,arguments)}},openVideoChatExplanationScreen_:function(){var e=this;this.promoBanners_.forEach(function(t){if(10017===t.getPromoBlockType()){var i=t.getButtons([])[0];d.navigate("video-chat-explanation",{promoBlock:t.toJSON(),src:o(e.chatUser_),externalUrl:i&&i.getRedirectPage().getUrl()})}})},onReport_:function(){L.track(ve,{element:511}),this.chatReportContent_=new Re(this.theirId_,this.chatView_).on(Re.EVENTS.REPORT,this.onToggleReportMode_,this).on(Re.EVENTS.BLOCKED,this.onUserBlocked_,this).on(Re.EVENTS.UPDATE_MESSAGES,this.onUpdateReportedMessages_,this).on(Re.EVENTS.BACK,this.onToggleReportMode_,this),this.chatReportContent_.start()},onUpdateReportedMessages_:function(e){this.updateReportedMessages_(Z.updateChatMessages(e))},updateReportedMessages_:function(e){e.length>0&&this.updateChatView()},onSelectMessage_:function(e){var t=e.id,i=this.selectedMessages_.indexOf(t);i>-1?this.selectedMessages_.splice(i,1):this.selectedMessages_.push(t),this.chatView_.updateSendReportButtonCount(this.selectedMessages_.length)},onClickMessage_:function(){this.isUserSubstitute()&&this.showPromoCardsGallery()},showPromoCardsGallery:function(){var e,t=this;this.getParameter("userSubstitute")?e=Promise.resolve(this.getParameter("userSubstitute")):(this.chatView_.showLoading(),e=ee.getInstance().get({id:this.theirId_}).then(function(e){var i=(0,r.default)(e,1)[0];return t.chatView_.hideLoading(),new ae({userSubstitute:i.getUserSubstitute()})})),e.then(function(e){d.navigate("promo-cards-gallery",{userSubstitute:e,context:26})}).catch(function(){t.chatView_.hideLoading(),t.showErrorMessage_()})},destroyReportController_:function(){this.chatReportContent_&&(this.chatReportContent_.off(Re.EVENTS.REPORT).off(Re.EVENTS.BLOCKED).off(Re.EVENTS.UPDATE_MESSAGES).off(Re.EVENTS.BACK),this.chatReportContent_=null)},onToggleReportMode_:function(){this.isSelectable_=!this.isSelectable_,this.isSelectable_?L.track(Te):(this.selectedMessages_=[],this.destroyReportController_()),this.updateChatView(),this.updateNavigationBar_()},onSendReportMessage_:function(){L.track(ve,{element:49}),this.chatReportContent_.send(this.selectedMessages_)},getMiniProfileView_:function(){if(Be.hit(),this.canShowMiniProfile()){var e="MINI_PROFILE",t=this.getView(e);return t||(t=this.registerView(e,new re).on(re.EVENTS.ENTER_VIEW,this.onShiftProfileTop_).on(re.EVENTS.EXIT_VIEW,this.onShiftProfileDown_).on(re.EVENTS.PHOTO_CLICK,this.goToFullscreenGallery_).on(re.EVENTS.PROFILE_CLICK,this.loadProfilePage_)).enable(),t}},isUserSubstitute:function(){return this.chatUser_&&3===this.chatUser_.getType()},hasPhotos:function(){var e=this.chatUser_&&this.chatUser_.getAlbums([])||[];return Boolean(e.length&&e[0].getPhotos())},canShowMiniProfile:function(){return Be.isActive()&&this.hasPhotos()&&!this.isUserSubstitute()},onShiftProfileTop_:function(){this.miniProfileIsDown_=!1,this.isActive()&&this.shiftProfileTop_()},onShiftProfileDown_:function(){this.miniProfileIsDown_=!0,this.isActive()&&this.shiftProfileDown_()},shiftProfileTop_:function(){var e=this.getNavigationBar_();e.$(".js-chat-navigation-bar").removeClass("navigation-bar--shadow"),e.$(".js-navigation-profile").addClass("navigation-bar__profile--shifted-top")},shiftProfileDown_:function(){var e=this.getNavigationBar_();e.$(".js-chat-navigation-bar").addClass("navigation-bar--shadow"),e.$(".js-navigation-profile").removeClass("navigation-bar__profile--shifted-top")},isHeaderProfileHidden:function(){return this.getNavigationBar_().$(".js-navigation-profile").hasClass("navigation-bar__profile--shifted-top")},goToFullscreenGallery_:function(e,t){var i=e.getAlbums();d.navigate("gallery",{albums:i,photoId:t,userId:e.getUserId(),activationPlace:this.getActivationPlace(),screenName:this.getScreenName()})},getNavigationBar_:function(){return this.getView(Ae)},updateNavigationBar_:function(e){var t=this.getNavigationBar_();e=e||this.chatUser_,t.setTemplate(this.isSelectable_?Ve:ce),t.update(this.getHeaderState_(e)),q(t.$el.find(".js-preload")),t.attachToggleScroll();var i=this.getMiniProfileView_();if(i){var n=t.$(".js-chat-navigation-bar").height();t.$(".js-mini-profile-container").html(i.el),i.update(e,n||50)}},trackHotPanelScreen:function(e){if(e&&this.isActive()){this.isMatchInitialScreen_()?this.trackMatchInitialScreen_():Fe._super.trackHotPanelScreen.apply(this,arguments);var t,i=Z.getCachedClientOpenChat(this.theirId_),n=i.chatUser,a=i.initialScreen,o=i.initialScreenType,s=i.isMatch,r=i.messages,c=i.userId,u=this.getActivationPlace(),d=a&&a.blockingFeature,h=d&&d.getPaymentAmount()||a&&parseInt(a.message.match(/[0-9]+/g),10)||0;t=this.isUserSubstitute()?{chatScreenType:this.getChatScreenType(),encryptedUserId:c,modeConnection:6,activationPlace:191,numUnread:this.getNumUnread()}:{activationPlace:u,blocker_type:o||0,chat_screen_type:this.getChatScreenType(),client_source:this.getClientSource(),creditsCost:h,encryptedUserId:c,is_favourite:n.getIsFavourite(!1),match_status:s?2:3,mode_connection:6,recepient_online_status:n.getOnlineStatus()},L.track(_e,t),function(e,t){switch(e){case 1:L.track(Ce,{element:32});break;case 13:case 15:L.track(Ce,{element:304});break;case 25:case 21:case 14:L.track(Ce,{element:299});break;case 11:L.track(Ce,{element:360});break;case 8:var i=l.last(t);i&&i.isMasked&&L.track(Ce,{element:522}),L.track(Ce,{element:305})}}(o,r)}},trackMatchInitialScreen_:function(){L.track(Te,{activationPlace:this.getActivationPlace()}),L.track(ke,{encrypted_user_id:this.theirId_,match_status:2})},handleResponse_:function(e){var t=this.getViewConfig_(e);this.decryptedUserId_=e.chatInstanceId,this.messages_=e.messages,this.promoBanners_=e.promoBanners,this.didRender_||(this.didRender_=!0,t.firstRender=!0),this.updateFromChatUser_(t.chatUser),this.chatView_.update(t),this.updateParent_(),t.initialScreen&&this.updateInitialChatScreen_(this.chatView_);var i=Ne.getMessage(this.theirId_);i&&this.chatControls_.setText(i),this.jinba.stop({nameOverride:t.initialScreen?"Chat/InitialScreen":"Chat"}),this.readyForVrt()},updateInitialChatScreen_:function(e){var t=this.getBlockingFeature_();t&&13===t.getRequiredAction()&&this.fetchVerification_().then(this.updateVerifiedInfo_);var i=e.getInitialChatScreenUserImage();i&&this.jinba.waitForImage(i)},getInitialChatScreen_:function(){return Z.getInitialChatScreen(this.theirId_)},getBlockingFeature_:function(){return Z.getBlockingFeature(this.theirId_)},updateFromChatUser_:function(e){this.chatUser_=e,this.updateNavigationBar_()},getActivationPlace:function(){var e=this.getClientSource();return 176===e?311:4===e?5:9===e?10:94===e?165:26===e?191:this.hadLikedYouBlocker_?264:this.getParameter("activationPlace")||this.activationPlace},getInitialChatScreenName_:function(e,t){var i=t?85:94;return 31===e.type&&(i=388),i},getScreenName:function(){if(this.isSelectable_)return 396;var e=this.getBlockingFeature_(),t=e||Z.getMaxUnansweredMessages(this.theirId_)<=0,i=this.getInitialChatScreen_();return Boolean(i)?this.getInitialChatScreenName_(i,t):t?85:n(e)?66:Fe._super.getScreenName.apply(this,arguments)},getChatScreenType:function(){if(this.isUserSubstitute())return 6;var e=this.getBlockingFeature_(),t=this.getInitialChatScreen_();return Boolean(t)?e?10:9:e||Z.getMaxUnansweredMessages(this.theirId_)<=0?3:this.messages_.find(function(e){return e.isYours()})?5:2},getViewConfig_:function(e){var t=e.messages,i=Z.isUserReported(e.chatInstanceId),n=e.initialScreenType;this.hadLikedYouBlocker_=31===n;var o=Object.assign({},e,{context:this.getClientSource(),streamId:this.getParameter("streamId"),chatBlockedGiftPromo:s(e.promoBanners),gender:a(e.gender),hasReceivedMessage:Boolean(t.find(function(e){return!e.isYours()})),initialScreen:!i&&e.initialScreen,isSelectable:this.isSelectable_});return o.initialScreen||(o.dismissInitialScreen=!0),o},fetchVerification_:function(){return J.getInstance().get({context:this.getClientSource()}).then(function(e){return(0,r.default)(e,1)[0]})},updateVerifiedInfo_:function(e){var t=null;if(e instanceof I&&(e=e.getVerifiedSource()),u.getSync(209).getEnabled()){var i=this.getVerificationButton_();i.set(e),t=i.parent}else{var n=this.getController("blocking-controller");n||(n=this.registerController("blocking-controller",new $)).on($.EVENTS.REFRESH,this.loadChat_),n.updateParameters({verificationMethods:ne.fromUserVerifiedGet(e),layout:"horizontal",isOwnProfile:!0,allowConfigure:!1,user:this.chatUser_,context:this.getClientSource(),destination:_()}),t=n.parent}this.chatView_.getBlockerContainer().html(t)},getVerificationButton_:function(){var e="Chat_VerificationButton",t=this.getController(e);return t||(t=this.registerController(e,new b).on(b.EVENTS.REFRESH,this.loadChat_,this)),t},onChatLoadError_:function(e){var t=this;if(e instanceof Error)this.log.error(e.message);else{var i=e&&e.getType();if(14===i)return this.wasBack()||this.showErrorMessage_(e.getErrorMessage()),void E();if(82===i)return this.wasBack()||this.showErrorMessage_(this.getErrorMessageUserBlocked_(e)),void E();var n=K.handleError({error:e,screenName:this.getScreenName(),navigationBar:this.getNavigationBarContext()});n&&n.on(n.EVENTS.REFRESH,function(){return t.loadChat_()})}},handleSendTextMessage_:function(e,t){var i=this;if(this.hasNoEnoughCredits_()){S.generate(),this.chatControls_.focusoutText(),this.sendMessageAfterTopUpCallback_.create({text:e});var n=p.encodeRoute(_(),{paymentFlow:"1"});return this.waitingForTopUpConfirmation_=!0,void this.topUpCredits_(function(e){var t=e.success,n=e.purchaseReceipt;t?(i.loader_.show(),M.subscribeToNotificationShow(n,function(){i.waitingForTopUpConfirmation_=!1,i.loader_.hide(),i.sendMessageAfterTopUpCallback_.execute()})):(i.waitingForTopUpConfirmation_=!1,i.sendMessageAfterTopUpCallback_.remove())},n)}this.sendTextMessage_(e,t)},sendTextMessage_:function(e,t){var i=new te({isNew:!0,message:e,messageType:1},this.chatUser_);i.messageType=1,this.sendMessage_(i),t&&t.onMessageSent&&t.onMessageSent(),this.chatControls_.setText(""),Z.getMaxUnansweredMessages(this.theirId_)<=0&&L.track(Te,{screen_option:16}),this.notificationPermissionController_.obtainPermission(h.get(337,this.chatUser_.getName()))},onMessageSendFail_:function(e){this.logError_(e,"Unknown error on send chat message"),this.updateChatView()},onChatWriting_:function(e){},onFavourite_:function(){var e=this.chatUser_;Le.toggleFavouriteStatus(e),L.track(ve,{element:181}),L.track(ye,{action_type:!0===e.getIsFavourite()?6:7,activation_place:96,encrypted_user_id:e.getUserId()})},updateCurrentUser:function(e){this.getNavigationBar_().$(".js-favourite").toggleClass("is-active",e.getIsFavourite(!1))},trackSendMessageEvent:function(e){var t,i;L.track(Se,{activation_place:this.getActivationPlace(),encrypted_user_id:e.toPersonId,length:1===e.messageType?e.message.length:0,message_first:1===this.messages_.length,message_first_replied:this.messages_.length>1&&1===(t=this.messages_,i=m.getUserId(),t.reduce(function(e,t){return e+Number(t.fromPersonId===i)},0)),send_giphy:36===e.messageType,send_heart:"ANIMATED_XP"===e.messageType,send_location:!1,send_photo:19===e.messageType,send_smile:22===e.messageType,send_sticker:23===e.messageType})},updateParent_:function(){this.parent.toggleClass("has-initial",this.chatView_.isInitialVisible()).toggleClass("has-controls",this.chatView_.isControlsVisible()).toggleClass("has-c4c",n(this.getBlockingFeature_()))},onChatMessageReceived_:function(e){[this.theirId_,this.decryptedUserId_].includes(e.fromPersonId)&&this.updateChatView()},logError_:function(e,t){if(e instanceof Error||l.isString(e))this.log.error("".concat(t,", ").concat(e.message),e);else if(e instanceof w.RpcError)this.log.error("".concat(t,", error_message: RPC error, type: ").concat(e.getType()));else if(e instanceof O){var i=e.getErrorCode(),n=e.getType(),a=e.getErrorId(),o=e.getErrorMessage(),s="error_message: ".concat(o,", type: ").concat(n,", error_code: ").concat(i,", error_id: ").concat(a);this.log.error("".concat(t,", ").concat(s))}else this.log.error("".concat(t,", error_message: ").concat(JSON.parse(e||null)))},requiresPortrait:function(){return!0},sendMessage_:function(e){var t=this,i=p.encodeRoute(_(),{paymentFlow:"2"});return e.context=this.getClientSource(),e.streamId=this.getParameter("streamId"),Z.send(this.theirId_,e,i).then(function(){t.finishMessageSending_()},function(e){t.onMessageSendFail_(e)})},onHistoryUpdated_:function(e,t,i){var n=this.getMiniProfileView_();n&&(i>=t?n.show():n.hide())},onMessageFromMe_:function(e){[this.theirId_,this.decryptedUserId_].includes(e.toPersonId)&&(this.canShowMiniProfile()||e!==this.messages_[0]||this.shiftProfileDown_(),e.isTemporary()||this.trackSendMessageEvent(e),this.updateChatView())},onUserInputActivated_:function(e){this.hasNoEnoughCredits_()?this.hideAdBanner_(e):(this.needsPayment_()&&(e.preventDefault(),e.stopPropagation()),this.hideAdBanner_(e))},hideAdBanner_:function(e){this.showAdTimeout_&&(clearTimeout(this.showAdTimeout_),this.showAdTimeout_=null),e&&"focus"===e.type&&this.chatView_.hideAdBanner()},onBlurInput:function(){var e=this;this.showAdTimeout_=setTimeout(function(){return e.chatView_.showAdBanner()},1e3)},needsPayment_:function(){if(this.hasNoEnoughCredits_())return this.topUpCredits_(),!0;if(Z.getMaxUnansweredMessages(this.theirId_)<=0){var e=this.chatUser_.getName(),t=2===this.chatUser_.getGender()?h.get(164,e):h.get(165,e);return ie.showNotification({type:ie.TYPES.ERROR,text:t}),!0}return!1},topUpCredits_:function(e,t){var i=this.getBlockingFeature_();j.navigateToPayment({back:_(),newNavigation:t,userId:this.theirId_,productType:i.getCreditsForProduct(),hotPanelData:{activationPlace:this.getActivationPlace()},callback:e})},handleInputMethodSelected_:function(e){"text"===e&&this.inputSearchController_&&(this.inputSearchController_.clear(),this.gifsContainerController_.toggle(!1))},loadGifsControllersIntoChatControls_:function(){if(!this.gifsContainerController_){var e=(new Q).on(Q.EVENTS.SELECT_GIF,this.onSelectGif_,this);e.start(),this.gifsContainerController_=e,this.chatControls_.setGifZepto(e.parent);var t=(new X).on(X.EVENTS.CHANGE,function(t){return e.search(t)}).on(X.EVENTS.RESET,function(){return e.search()});t.start(),this.inputSearchController_=t,this.chatControls_.setInputSearchZepto(t.parent)}this.gifsContainerController_.setUserId(this.theirId_),this.gifsContainerController_.toggle(!0),L.track(ve,{element:250,parent_element:252})},onPhotoAppBannerClick_:function(e){L.track(fe,{banner_id:-2},!0),window.open(e,"_blank")},onMultimediaAppBannerDisplay_:function(){this.multimediaBannerViewTracked_||(this.multimediaBannerViewTracked_=!0,L.track(we,{banner_id:-2}))},onShowGift_:function(){var e=l.findLast(this.messages_,{messageType:10});if(e&&e.gift){var t=e.gift;d.navigate("gift",{purchasedGift:t.toJSON(),fromChat:!0,back:d.getUrl()}),t.setIsBoxed(!1)}},onSendGift_:function(e){var t,i=this;"initial"===e?t=2:"blocker"===e&&(t=10),t&&L.track(Ee,{encrypted_user_id:this.theirId_,gift_button:t,message_first:!this.messages_||0===this.messages_.length}),d.navigate("gift-store",{context:this.getClientSource(),streamId:this.getParameter("streamId"),id:this.theirId_,back:d.getUrl(),onSendMessage:function(e){e||i.chatView_.getMessagesView().resetScroll()}})},onSendGiftDirect_:function(e,t){var i=this;L.track(ve,{element:350,parentElement:32,position:t}),d.navigate("send-gift",{userId:this.theirId_,back:d.getUrl(),context:this.getClientSource(),giftProductId:parseInt(e,10),streamId:this.getParameter("streamId"),onSendMessage:function(e){e||i.chatView_.getMessagesView().resetScroll()}})},onSendSticker_:function(){var e=this;if(!this.needsPayment_()){var t=this.theirId_,i=0===this.messages_.length;d.navigate("stickers",{userId:t,isMessageFirst:i,activationPlace:11,clientSource:this.getClientSource(),screenName:this.getScreenName(),streamId:this.getParameter("streamId"),onSendMessage:function(t){t?ie.showNotification({text:t.message||t,type:ie.TYPES.ERROR}):e.chatView_.getMessagesView().resetScroll()}}),L.track(be,{message_first:i,sticker_button:1,encrypted_user_id:t})}},onSelectGif_:function(e){this.sendMessage_(e),this.chatControls_.selectTextInputMethod()},onSendGif_:function(){this.needsPayment_()||this.loadGifsControllersIntoChatControls_()},handleMultimediaInputMethodClick_:function(){this.chatMultimediaComponent_.uploadMultimedia(this.theirId_)},getHeaderState_:function(e){var t=o(this.chatUser_),i=e.getOnlineStatus(),n="";t||(n=a(e.getGender()));var s=Boolean(this.getInitialChatScreen_(this.theirId_)),r=s||this.canShowMiniProfile()&&this.isHeaderProfileHidden();return{idle:2===i,offline:4===i,online:1===i,userName:e.getName(),avatarUrl:t,gender:n,isDeleted:e.getIsDeleted(),isFavourite:e.getIsFavourite(),isInitial:s,showStatusInfo:4!==e.getOnlineStatus(),statusInfo:e.getOnlineStatusText(),hideUserInformation:r,hideVideoCall:this.isUserSubstitute()}},onVote_:function(e){var t=this;if(Z.invalidate(this.theirId_),e){var i=(new A).setPersonId(this.theirId_).setVote(2).setVoteSource(10).setIsForCachedEncounters(!1);new w(80,i).on(132,function(e,i){if(t.loadChat_(),i instanceof x){var n=i.getPersonId();t.theirId_!==n&&(H.update(t.theirId_,n),t.getController("block-options").setUserId(n))}}).request()}else this.getController("block-options").block();L.track(Pe,{vote_result:e?2:3,activation_place:7,encrypted_user_id:this.chatUser_.getEncryptedUserId()||this.chatUser_.getUserId()})},onDismissInitialScreen_:function(){Z.deleteInitialChatScreen(this.theirId_);var e=this.getInitialChatScreen_();e&&8===e.type&&L.track(ve,{element:289,parentElement:305}),this.updateChatView(),this.canShowMiniProfile()||this.shiftProfileDown_()},onBlockUser_:function(){var e=this.getInitialChatScreen_();e&&8===e.type&&L.track(ve,{element:65,parentElement:305}),this.getController("block-options").block()},onUserBlocked_:function(){L.track(ge,{activationPlace:this.getActivationPlace(),encryptedUserId:this.theirId_}),d.back()},onBlockerAction_:function(e){var t=this,i=this.getBlockingFeature_();if(S.generate(),!i&&Z.getMaxUnansweredMessages(this.theirId_)<=0)this.onSendGift_("blocker");else{if(i){var n=i.getFeature(),a=i.getRequiredAction(),o=i.getProductType(),s=null;if(2===a)s=126;else if(4===a||9===a){var r=this.getInitialChatScreen_(),l=[13,15].includes(r.type);3===o?s=360:r&&1===o&&l&&(s=304)}s&&L.track(ve,{element:s});var c=(new y).setBack(d.getUrl()).setAction(a).setCost(i.getPaymentAmount()).setFeature(n).setProductType(i.getProductType()).setPromoBlockType(e).setHotPanelData({activationPlace:93,feature:n});return k.handleAction(c).then(function(e){e instanceof N?M.subscribeToNotificationShow(e,function(){Z.invalidate(t.theirId_),t.loadChat_()}):e&&(Z.invalidate(t.theirId_),t.loadChat_())}).catch(function(e){t.logError_(e,"Error trying to buy blocking feature (".concat(n,") on chat."))})}try{var u=T.save(this.theirId_),h=this.chatView_,p={isInitialVisible:h&&h.isInitialVisible(),isBlocking_:h&&h.isBlocking_,isInitialScreen_:h&&h.isInitialScreen_,promoBlockType:e};this.log.error("Unexpected application chat state:",u,p);try{T.save()}catch(e){this.log.error("PARSE_ERROR : Unexpected application chat state:",e)}}catch(e){this.log.error("PARSE_ERROR : USER_ID[".concat(this.theirId_,"] : Unexpected application chat state:"),e)}}},onSendSmile_:function(){var e=new te({messageType:22},this.chatUser_);this.sendMessage_(e)},onQuotaProcessing_:function(){this.chatView_.showLoading(),setTimeout(this.openChat_.bind(this),4e4)},isMatchInitialScreen_:function(){var e=Z.getCachedClientOpenChat(this.theirId_);return 1===e.initialScreenType&&e.isMatch},hasNoEnoughCredits_:function(){var e=this.getBlockingFeature_();return n(e)&&null!==e.getCreditsForProduct(null)},getErrorMessageUserBlocked_:function(e){var t=e.getErrorMessage();if(!t){var i=this.chatUser_&&this.chatUser_.getName();i&&(t=2===this.chatUser_.getGender()?h.get(797,i):h.get(796,i))}return t},getNumUnread:function(){return this.messages_.reduce(function(e,t){return e+(t.isRead?0:1)},0)}},"ChatController");e.exports=Fe},function(e,t,i){"use strict";var n=i(3),a=n(i(127)),o=n(i(4)),s=i(100),r=i(25),l=i(99),c=i(162),u=i(109),d=i(141),h=i(131),p=i(398),m=i(3024),g=i(3026),_=i(219),f=d.createElement,v={DELETE:0,DISMISS:1},E=u.extend({id:"multimedia",className:"fullscreen-view",events:{"click .js-action-timer":"showTimer_","click .js-action-delete":"onDeleteMultimedia_","click .js-action-flag":"onFlagMultimedia_"},visibilityType_:4,hasInitialScreen_:!1,visibilityConfig_:[],init:function(){this.registerView("delete",new _).on(_.ACTIONS.YES,this.onConfirmDelete_),this.$el.append(f("div",{className:"gradient"}),this.imageEl_=f("div",{className:"preview"}),f("div",{className:"multimedia__icon-delete js-action js-action-delete qa-delete"}),f("div",{className:"multimedia__icon-flag js-action js-action-flag qa-flag"}),this.timerEl_=f("div",{className:"multimedia__icon-timer js-action js-action-timer qa-timer",text:"∞"})),this.pinchToZoom_=(new p).on(p.EVENTS.ZOOM,this.onPhotoZoomed_),c.on(c.EVENTS.ORIENTATION_CHANGE,this.onOrientationChange_)},enable:function(){E._super.enable.apply(this,arguments),this.pinchToZoom_.enable(this.el)},disable:function(){E._super.disable.apply(this,arguments),this.imageEl_.style.backgroundImage="",this.pinchToZoom_.disable(),this.multimediaPopup_&&(this.multimediaPopup_.destroy(),this.multimediaPopup_=null),this.reportPopup_&&(this.reportPopup_.dismiss(),this.reportPopup_=null)},update:function(e){var t=this,i=e.multimedia,n=e.state;if(n){var a=["fullscreen-view",e.type?"type-".concat(e.type):""];n===E.STATES.VIEW?a.push("view","true"===e.isTheirs?"theirs":"ours"):n===E.STATES.SHARE&&a.push("share"),this.$el.attr("class",a.join(" "))}i&&s.isString(i)&&h.preloadImage(i).then(function(e){var i=(0,o.default)(e,3),n=i[0],a=i[1],s=i[2];t.originalHeight_=s,t.originalWidth_=a,t.scaleAndRotateImage_(),t.imageEl_.style.backgroundImage="url(".concat(n,")")}),e.multimediaVisibility&&(this.visibilityConfig_=e.multimediaVisibility),!0===e.showInitialScreen&&(this.hasInitialScreen_=!0,this.$el.addClass("initial"),this.showTimer_())},toggleVisibilityFeature:function(e){return e?(r(this.timerEl_).show(),this.lastVisibilityType_&&this.setVisibility_(this.lastVisibilityType_)):(r(this.timerEl_).hide(),this.lastVisibilityType_=this.visibilityType_,this.setVisibility_(this.visibilityType_)),this},scaleAndRotateImage_:function(){var e=this.$el.width(),t=this.$el.height(),i=this.originalWidth_,n=this.originalHeight_,a=e/(i>=n?100:100*i/n),o=t/(n>=i?100:100*n/i),s=Math.min(a,o),r="";r+="scale(".concat(s,")"),this.imageEl_.style.transform=r,this.imageEl_.style.webkitTransform=r},onFlagMultimedia_:function(){var e=this;this.reportPopup_=m(function(t){e.reportPopup_=null,t&&e.trigger(v.DELETE,t)})},onDeleteMultimedia_:function(){this.getChildView("delete").update({title:l.get(22),message:l.get(45),yesText:l.get(6),noText:l.get(19)})},onConfirmDelete_:function(){this.trigger(v.DELETE,0)},showTimer_:function(){var e=this;if(this.visibilityConfig_.length<1)this.setVisibility_(this.visibilityType_);else{var t=this.visibilityConfig_.map(function(t){return(0,a.default)({},t,{selected:t.visibilityType===e.visibilityType_})});this.multimediaPopup_=g(t,this.setVisibility_,this.onDismiss_)}},onDismiss_:function(){this.setVisibility_(this.visibilityType_)},setVisibility_:function(e){this.visibilityType_=e;var t=this.visibilityConfig_.find(function(t){return t.visibilityType===e}),i=t?t.seconds:-1;-1===i&&(i="∞"),this.timerEl_.textContent=i,this.hasInitialScreen_&&(this.hasInitialScreen_=!1,this.$el.removeClass("initial"))},getVisibilityType:function(){return this.visibilityType_},onOrientationChange_:function(){var e=this;window.setTimeout(function(){return e.scaleAndRotateImage_()},100)},onPhotoZoomed_:function(e){this.$el.find(".js-action").css({display:1!==e?"none":null})}},"Multimedia");E.EVENTS=v,e.exports=E},function(e,t,i){"use strict";var n=i(202),a=i(3025),o=i(99),s=[{reason:1,title:o.get(225)},{reason:2,title:o.get(226)}];e.exports=function(e){var t=new n({preventClosing:!0});return a.render({reasons:s},t.el),t.$el.find(".js-option").click(function(i){t.dismiss();var n=i.currentTarget.getAttribute("data-reason"),a=n&&Number(n);e(a)}),t.show(),t}},function(e,t,i){"use strict";var n=i(98),a=i(99);e.exports=i(108)("Modal.reasonForReporting",function(e){return n.createElement("div",{className:"modal modal--compact"},n.createElement("div",{className:"modal__item"},n.createElement("div",{className:"modal-header"},a.get(28)),n.createElement("div",{className:"modal-text"},a.get(232))),e.reasons.map(function(e){return n.createElement("div",{className:"modal__item js-option","data-reason":e.reason,key:e.reason},n.createElement("div",{className:"modal-button"},n.createElement("span",{className:"modal-button__text"},e.title)))}),n.createElement("div",{className:"modal__item js-option"},n.createElement("div",{className:"modal-button modal-button--cancel"},n.createElement("span",{className:"modal-button__text"},a.get(19)))))})},function(e,t,i){"use strict";var n=i(202),a=i(3027);e.exports=function(e,t,i){var o=new n({preventClosing:!1,background:n.MODAL_BG.TRANSPARENT});return a.render({visibilityOptions:e},o.el),o.on(n.ACTIONS.DISMISS,i),o.$el.find(".js-visibility").click(function(e){var a=e.currentTarget.getAttribute("data-visibility-type"),s=Number(a);t(s),o.off(n.ACTIONS.DISMISS,i),o.dismiss()}),o.show(),o}},function(e,t,i){"use strict";var n=i(98),a=i(99);e.exports=i(108)("Modal.multimediaVisibility",function(e){return n.createElement("div",{className:"modal modal--compact"},n.createElement("div",{className:"modal__item"},n.createElement("div",{className:"modal-text"},a.get(233))),e.visibilityOptions.map(function(e){return n.createElement("div",{className:"modal__item js-visibility","data-visibility-type":e.visibilityType,key:e.visibilityType},n.createElement("div",{className:"modal-button ".concat(e.selected?"is-active":"")},n.createElement("span",{className:"modal-button__text"},e.title)))}))})},function(e,t,i){"use strict";var n=i(129),a=i(111),o=i(102),s=i(336),r=i(177),l=i(3029),c=i(101),u=c.ClickEvent,d=c.ScrollElementEvent,h=c.ViewElementEvent,p=a("SELECT_GIF"),m=n.extend({isPreselected_:!1,lastSearch_:null,clear:function(){this.lastSearch_="",this.getView("view").clear()},init:function(){m._super.init.apply(this,arguments),this.registerView("view",new l({el:this.parent[0]})).on(l.EVENTS.SCROLL,this.scroll_,this).on(l.EVENTS.SEND,this.sendGif_,this),this.isPreselected_=Boolean(this.parameters_.isPreselected),this.search(this.getParameter("query"))},getElementType_:function(){return this.isPreselected_?357:358},scroll_:function(e,t){o.track(d,{direction:6,element:this.getElementType_(),position:e,reached_end:t})},setUserId:function(e){this.theirId_=e},search:function(e){e||(e=""),this.lastSearch_!==e&&(this.clear(),this.lastSearch_=e,s.getInstance().get({query:e}).then(this.getView("view").update))},sendGif_:function(e,t){var i=new r({gif:e,message:e.url,messageType:36,toPersonId:this.theirId_});this.trigger(p.SELECT_GIF,i),s.getInstance().cacheGif(e),this.theirId_?o.track(u,{element:250,parent_element:this.getElementType_(),position:t}):this.log.error("Invalid instance state, please make sure you setup all instance properties before use.")},toggle:function(e){this.parent.toggleClass("hidden",!e),e&&o.track(h,{element:this.getElementType_()})}},"GifsContainerController");m.EVENTS=p,e.exports=m},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(109),s=i(203),r=i(3030),l=i(3031),c={SCROLL:"scroll",SHOWCASE:"showcase"},u=c.SCROLL,d={SCROLL:1,SEND:2},h=o.extend({data_:null,events:{"click .js-gif":"onSend_"},clear:function(){this.update({count:-1})},onSend_:function(e,t){var i=t.getAttribute("data-id"),a=n.findIndex(this.data_.results,function(e){return e.id===i}),o=this.data_.results[a];o?this.trigger(d.SEND,o,a+1):this.log.error("Not possible to find gif id ".concat(i))},render_:function(e){(this.$el.attr("type")||this.data_.type||u)===c.SCROLL?this.renderScroll_(e):this.renderShowcase_(e)},renderScroll_:function(e){var t=this;this.$el.html(r.render(e)).find(".js-gif-container").on("scroll",n.debounce(function(i){var n=i.target.scrollWidth-i.target.offsetWidth,a=Math.max(1,Math.round(i.target.scrollLeft*e.count/n));t.trigger(d.SCROLL,a,e.count===a)},350))},renderShowcase_:function(e){for(var t=[],i=0;i<e.columns;i++)t.push({items:[]});for(var n=0;n<e.results.length;n++){var a=e.results[n];switch(a.image.ratio=(a.image.height/a.image.width*100).toFixed(3),e.columns){case 1:t[0].items.push(a);break;case 2:(n+2)%2==0?t[0].items.push(a):t[1].items.push(a)}}e.groups=t,this.$el.html(l.render(e))},update:function(e){if(this.data_=e,this.render_(this.data_),!(this.data_.count<1)){var t=this.$el.find(".js-gif"),i=t.height();i&&t.forEach(function(t,n){var o=e.results[n].image.ratio,s=(100*i/Number(o)).toFixed(3);a(t).width("".concat(s,"px"))}),s(this.$el.find(".js-preload"))}}},"GifsContainerView");h.EVENTS=d,h.TYPES=c,e.exports=h},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="chat-search__results"><div class="chat-search__results-scroller js-gif-container"><div class="chat-search__results-gallery">').h("eq",t,{block:i},{key:t.get(["count"],!1),value:"0",type:"number"},"h").h("eq",t,{else:n,block:o},{key:t.get(["count"],!1),value:"-1",type:"number"},"h").w("</div></div></div>")}function i(e,t){return e.w('<div class="chat-search__no-results" data-qa="gif-container-no-results">').h("t",t,{},{k:"488"},"h").w("</div>")}function n(e,t){return e.s(t.get(["results"],!1),t,{block:a},{})}function a(e,t){return e.w('<div class="chat-search__results-gallery-item js-gif" data-qa="gif-container-preview" data-id="').f(t.get(["id"],!1),t,"h").w('"><img class="chat-search__results-gallery-image js-preload" data-src="').f(t.getPath(!1,["image","preview"]),t,"h").w('" alt=""></div>')}function o(e,t){return e.w('<div class="chat-search__loading" data-qa="gif-container-loading">').h("Icon",t,{},{name:"loading-dots",size:"md"},"h").w("</div>")}return e.register("gifs-container-scroll",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="gifs-body js-gifs-body"><div class="gifs-">').s(t.get(["groups"],!1),t,{block:i},{}).w("</div></div>")}function i(e,t){return e.w('<div class="gifs-showcase__group">').s(t.get(["items"],!1),t,{block:n},{}).w("</div>")}function n(e,t){return e.w('<div class="gifs-showcase__item js-gif" data-id="').f(t.get(["id"],!1),t,"h").w('"><div class="gifs-showcase__spacer" style="padding-bottom: ').f(t.getPath(!1,["image","ratio"]),t,"h").w('%"></div><img class="gifs-showcase__image" src="').f(t.getPath(!1,["image","preview"]),t,"h").w('" alt="" /></div>')}return e.register("gifs-container-showcase",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(129),a=i(3033),o=a.EVENTS,s="InputSearchView",r=n.extend({init:function(){r._super.init.apply(this,arguments),this.registerView(s,new a({el:this.parent[0]})).on(o.CHANGE,this.trigger.bind(this,o.CHANGE)).on(o.RESET,this.trigger.bind(this,o.RESET))},clear:function(){this.getView(s).clear()}},"InputSearchController");r.EVENTS=o,e.exports=r},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(111),s=i(3034),r=o("CHANGE","RESET"),l=a.extend({
init:function(){this.$el.html(s.render())},clear:function(){this.setValue(""),this.trigger(r.RESET)},disable:function(){l._super.disable.apply(this,arguments),this.$el.off("input")},enable:function(){l._super.enable.apply(this,arguments),this.$el.on("input",".js-chat-search",n.debounce(this.onChange_,this.getThrottle_()))},getValue:function(){return this.$el.find(".js-chat-search").val()||""},getThrottle_:function(){return 750},setValue:function(e){this.$el.find(".js-chat-search").val(e)},onChange_:function(){this.trigger(r.CHANGE,this.getValue())}},"SearchView");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="chat-search__filter"><div class="chat-search__icon">').h("Icon",t,{},{name:"elements-input-search",size:"md"},"h").w('</div><input type="search" class="chat-search__input js-chat-search" placeholder="').h("t",t,{},{k:"485"},"h").w('" data-qa="input-search" autocomplete="off" autocorrect="off" spellcheck="false"></div>')}return e.register("input-search",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(100),a=i(132),o=i(99),s=i(5),r=i(109),l=i(103),c=l.navigate,u=l.getHistoryEntryId,d=i(111),h=i(102),p=i(3036),m=i(561),g=i(3079),_=i(3083),f=i(573),v=i(3085),E=i(3086),b=i(3087),y=i(184),k=i(523),S=i(141).$satisfy,w=i(3088),C=i(361),T=i(101),P=T.ClickEvent,N=T.ViewElementEvent,I=T.ViewAdsEvent,x=i(551),A=d("APP_DOWNLOAD","BLOCK_USER","BLOCKER_ACTION","CANCEL_REPORT","DISMISS_INITIAL_SCREEN","INPUT_ACTIVE","LOAD_PROFILE","MESSAGE_SUBMIT","REACHED_END","REPORT_MESSAGE","SEND_DIRECT_GIFT","SEND_GIFT","SEND_REPORT","SEND_SMILE","SHOW_GIFT","VOTE"),O=r.extend({className:"chat-v2 js-chat-v2",events:{"click .js-blocker-action":"onBlockerAction_","click .js-chat-lookalikes":"onLookalikesClick_","click .js-report-cancel":"onCancelReportMode_","click .js-report-send":"onSendReport_"},init:function(){var e=this,t=null;this.chatControls_=this.options.chatControls,this.chatControls_.onSubmit(function(){return e.handleMessageSubmit_()}),this.hideAdBanner=n.throttle(this.hideAdBanner,300,{leading:!1,trailing:!0}),t=m.EVENTS,this.registerView("chat-messages",(new m).on(t.APP_DOWNLOAD,this.trigger.bind(this,A.APP_DOWNLOAD)).on(t.LOAD_PROFILE,this.trigger.bind(this,A.LOAD_PROFILE)).on(t.MULTIMEDIA_MESSAGE_SEEN,this.onMessageSeen_.bind(this)).on(t.NEW_MESSAGE_SEEN,this.onMessageSeen_.bind(this)).on(t.NEW_UNREAD_MESSAGE,this.onNewMessage_.bind(this)).on(t.REACHED_END,this.trigger.bind(this,A.REACHED_END))),t=g.ACTIONS,this.registerView("chat-initial",(new g).on(t.BLOCK_USER,this.trigger.bind(this,A.BLOCK_USER)).on(t.DISMISS,this.trigger.bind(this,A.DISMISS_INITIAL_SCREEN)).on(t.OPEN_PROFILE,this.trigger.bind(this,A.LOAD_PROFILE)).on(t.SEND_DIRECT_GIFT,this.trigger.bind(this,A.SEND_DIRECT_GIFT)).on(t.SEND_GIFT,this.trigger.bind(this,A.SEND_GIFT,"initial",128)).on(t.SEND_SMILE,this.trigger.bind(this,A.SEND_SMILE)).on(t.SHOW_GIFT,this.trigger.bind(this,A.SHOW_GIFT)).on(t.VOTE,this.trigger.bind(this,A.VOTE))),this.registerView("new-message-notification",new _).on(_.ACTIONS.CLICK,this.scrollMessagesToBottom.bind(this)),C.hit(),C.isNewChatInput?this.registerView("chat-input",new w):this.registerView("chat-input",new p({chatControls:this.chatControls_,newMessageNotificationView:this.getView("new-message-notification")}))},onDisable:function(){y.destroy(y.placements.CHAT)},update:function(e){return!0===e.dismissInitialScreen&&!0!==e.isSelectable&&(this.isInitialScreen_=this.isBlocking_=!1,this.getMessagesView().show(),this.getView("chat-input").show(),this.getInitialChatView().update({dismissScreen:!0})),this.isBlocking_=n.isNumber(e.maxUnansweredMessages)?!e.maxUnansweredMessages:this.isBlocking_,this.isInitialScreen_=Boolean(e.initialScreen)||this.isInitialScreen_,this.isDeletedMember_=e.deletedMember,this.isStartChatInitialScreen_=2===e.initialScreenType,e.inputFeatures&&(this.inputFeatures_=e.inputFeatures),this.isBlocking_||(this.isBlocking_=this.isItBlocking_(e)),C.isNewChatInput&&this.getView("chat-input").update(this.getChatInputViewData(e)),this.render(e),this},getInitialChatView:function(){return this.getView("chat-initial")},render:function(e){e.firstRender&&(this.getInitialChatView().appendTo(this.el),this.getView("chat-input").appendTo(this.el),this.getMessagesView().appendTo(this.el));var t=this.isBlocking_&&!e.messages.find(function(e){return e.isYours()})||!e.messages.length?"chat-first-time":"chat";if(this.$el.parent().attr("data-qa-page",t),this.updateBlocker_(e),this.isBlocking_||e.isSelectable?this.getView("chat-input").hide():(this.updateInputMethods_(e),this.getView("chat-input").show().update(this.getChatInputViewData(e))),this.isInitialScreen_){this.getInitialChatView().update(e),this.getMessagesView().hide();var i=this.$(".js-chat-input");i.length&&f.init(i)}else this.getMessagesView().show().update(e);this.renderChatReport_(e),this.renderGoogleAds_()},renderChatReport_:function(e){if(e.isSelectable){var t=e.messages.filter(function(e){return e.isSelected}).length||null;this.$reportBlocker?this.updateSendReportButtonCount(t):(this.$reportBlocker=b.render({selectedMessagesCount:t}),this.$el.append(this.$reportBlocker))}else this.$reportBlocker&&(this.$reportBlocker.remove(),this.$reportBlocker=null)},updateSendReportButtonCount:function(e){var t=o.get(28),i=e>0?"".concat(t," (").concat(e,")"):t;this.$(".js-report-send").find(".js-button-text").text(i),this.disableReportButton({disabled:0===e})},disableReportButton:function(e){var t=e.disabled,i=e.loading;this.$(".js-report-send").toggleClass("is-loading",Boolean(i)).prop("disabled",Boolean(t))},onBlockerAction_:function(e,t){this.trigger(A.BLOCKER_ACTION,parseInt(t.getAttribute("data-promo-type"),10))},onCancelReportMode_:function(){this.trigger(A.CANCEL_REPORT)},onSendReport_:function(){this.trigger(A.SEND_REPORT),this.disableReportButton({disabled:!0,loading:!0})},onLookalikesClick_:function(){h.track(P,{element:367}),c("lookalikes",{backHistoryEntry:u(),photoId:this.lookalikesPhotoId_})},removeBlocker:function(){this.$(".js-blocker").remove()},updateBlocker_:function(e){this.removeBlocker();var t=null;if(0===e.maxUnansweredMessages){var i=e.chatBlockedGiftPromo;if(i){var n={actionText:i.getAction(),gift:!0,text:i.getMssg()};t=v.render(n)}else{var a=e.promoBanners.find(function(e){return 169===e.getPromoBlockType()});if(!a)return;var o=a.getButtons([])[0];this.lookalikesPhotoId_=o.getRedirectPage().getPhotoId(),t=E.render({mssg:a.getMssg(),text:o.getText()}),h.track(N,{element:367})}}this.$el.append(t)},isItBlocking_:function(e){var t=e.initialScreenType,i=19===t,n=Boolean(e.initialScreen&&e.initialScreen.blockingFeature),a=e.initialScreen&&e.messages.length>0,o=0===e.maxUnansweredMessages&&e.chatBlockedGiftPromo;return(31===t||o||n||a)&&!i&&!(7===t)},updateInputMethods_:function(e){var t=this.getInputMethods_(e);this.chatControls_.setInputMethods(t)},getInputMethods_:function(e){return this.inputFeatures_&&this.inputFeatures_.map(function(t){var i=t.feature,n=x[i];if(a.getSync(i).getEnabled()&&("multimedia"!==n||s.supportsXHRFileUpload))return{name:n,enabled:t.enabled||"multimedia"===n&&e.hasReceivedMessage}}).filter(Boolean)},isInitialVisible:function(){return!1===this.getInitialChatView().$el.hasClass("hidden")},isControlsVisible:function(){return!1===this.getView("chat-input").getElement().hasClass("hidden")},getBlockerContainer:function(){return this.getInitialChatView().getBlockerContainer()},reset:function(){return this.chatControls_.setText(""),this.removeBlocker(),this.getMessagesView().remove(),this.getView("chat-input").remove(),this.getInitialChatView().reset().remove(),this.updateNewMessageNotification({visible:!1}),f.destroy(),this},getMessagesView:function(){return this.getView("chat-messages")},handleMessageSubmit_:function(){this.isInitialScreen_&&(this.isInitialScreen_=!1,f.destroy(),this.getInitialChatView().update({dismissScreen:!0}),this.getMessagesView().show())},getInitialChatScreenUserImage:function(){var e=this.$(".js-open-profile .brick__image")[0];return e?e.style.backgroundImage.slice(4,-1).replace(/"/g,""):null},updateStub:function(){var e=this.getInitialChatView(),t=e.$el.find(".js-blocker").get(0),i=t&&t.clientHeight||0,n=this.getView("chat-input").getHeight(),a=Math.max(i,n);this.getMessagesView().getSpacingStub().css("height",a),e.getSpacingStub().css("height",a)},onNewMessage_:function(e){this.updateNewMessageNotification({userId:e&&e.fromPersonId,text:e&&(e.displayMessage||e.message),visible:Boolean(e)})},onMessageSeen_:function(){this.updateNewMessageNotification({visible:!1})},scrollMessagesToBottom:function(){this.getMessagesView().scrollToBottom(!0)},showGoogleAds_:function(){return y.isEnabled()&&!this.isBlocking_&&!this.$reportBlocker&&!this.isDeletedMember_&&(!this.isInitialScreen_||this.isStartChatInitialScreen_)},renderGoogleAds_:function(){if(this.showGoogleAds_()){if(this.$(".js-chat-v2-banner").length>0)return;var e=S("div.chat-v2__banner.js-chat-v2-banner");this.$el.append(e);var t=y.create(y.placements.CHAT);e.html(k.render({adSlot:t})),this.$el.addClass("has-chat-banner"),y.render(),h.track(I,{activation_place:11,ad_aggregator:12,element:442,ad_placement:2,ad_unit_id:t}),h.track(N,{element:442})}else this.removeGoogleAds()},removeGoogleAds:function(){this.$(".js-chat-v2-banner").remove(),this.$el.removeClass("has-chat-banner")},showAdBanner:function(){var e=this.$(".js-chat-v2-banner");e.length>0&&(this.$el.addClass("has-chat-banner"),e.removeClass("hidden"))},hideAdBanner:function(){this.$el.removeClass("has-chat-banner"),this.$(".js-chat-v2-banner").addClass("hidden")},updateNewMessageNotification:function(e){var t=e.userId,i=e.visible,n=e.text;C.isNewChatInput?this.getView("chat-input").update(this.getChatInputViewData({userId:t,isNewMessageNotificationVisible:i,newMessageNotificationText:n})):this.getView("new-message-notification").update({text:n,visible:i})},getChatInputViewData:function(e){var t=this;return C.isNewChatInput?Object.assign({},e,{activationPlace:11,isInitialScreen:this.isInitialScreen_,context:e.context,streamId:e.streamId,onShowLoading:this.showLoading.bind(this),onHideLoading:this.hideLoading.bind(this),onSendSticker:function(){return t.getMessagesView().resetScroll()},onSendGift:function(){return t.getMessagesView().resetScroll()},needsPayment:this.options.needsPayment,onInputUpdate:this.options.onInputUpdate,onFocusInput:this.options.onFocusInput,onBlurInput:this.options.onBlurInput,onClickCamera:this.options.onClickCamera,onSelectGif:this.options.onSelectGif,onSendTextMessage:this.options.onSendTextMessage,onClickNewMessageNotification:this.scrollMessagesToBottom.bind(this)}):e},getChatInputView:function(){return this.getView("chat-input")}},"ChatView");O.EVENTS=A,O.MESSAGE_STATUS=m.MESSAGE_STATUS,e.exports=O},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(99),s=i(141),r=i(3037),l=a.extend({init:function(){this.chatControls_=this.options.chatControls,this.newMessageNotification_=this.options.newMessageNotificationView,this.render({dummy:!0})},update:function(e){this.isRendered_||this.render(e),n.isBoolean(e.deletedMember)&&(this.deletedMember_=e.deletedMember),this.deletedMember_?(this.chatControlsContainer_.detach(),this.$el.append(this.deletedMemberNotice_)):0===this.chatControlsContainer_.parent().length&&(this.deletedMemberNotice_.remove(),this.$el.append(this.chatControlsContainer_))},render:function(e){if(this.isRendered_)this.log.warn("Cant render twice, please use update");else{this.deletedMemberNotice_=s.$satisfy("div.deleted-member-notice"),this.deletedMemberNotice_.text(o.get(49));var t=r.render();t.append(this.chatControls_.zepto),t.append(this.newMessageNotification_.$el),this.$el.html(t),this.chatControlsContainer_=this.$el.find(".js-chat-controls-container"),this.isRendered_=!e.dummy}},getHeight:function(){var e=this.$el.find(".js-chat-controls-container").get(0);return e&&e.clientHeight||0}},"ChatInput");e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(99),s=i(153);e.exports=i(108)("ChatInputComponent",function(e){return n.createElement("div",{className:"chat-v2__controls js-chat-controls-container"},s(e.chatControls,e,function(e){return n.createElement("div",{className:"chat-controls is-chat-messaging"},n.createElement("div",{className:"js-chat-input-container"},e.chatInput.map(function(e){return n.createElement("div",{className:"chat-input",key:e.messagePlaceholder},n.createElement("div",{className:"chat-input__mirror js-chat-input-mirror"}),n.createElement("textarea",{id:"chat-input-textarea",className:"chat-input__textarea js-chat-input qa-input-textarea",placeholder:e.messagePlaceholder,"data-placeholder":e.messagePlaceholder}),n.createElement("label",{htmlFor:"chat-input-textarea",className:"chat-input__label"}))})),n.createElement("div",{className:"chat-search"},n.createElement("div",{className:"js-gif-wrapper",type:"scroll"}),n.createElement("div",{className:"js-input-search-container"})),n.createElement("div",{className:"js-input-methods"},e.chatSwitchers.map(function(e){return n.createElement("div",{className:"chat-switchers"},e.inputMethods.map(function(e){return n.createElement("div",{className:"chat-switchers__item ".concat(e.isActive?"is-active":""," js-input-method qa-chat-switcher-").concat(e.name," ").concat(e.enabled?"":"is-disabled"),"data-name":e.name,key:e.name},n.createElement(a,{size:"stretch",name:"chat-control-switcher-".concat(e.icon)}))}))})),n.createElement("div",{className:"chat-send js-chat-send qa-send-chat-button is-disabled"},n.createElement("b",null,o.get(32)),e.hasFakeInput?n.createElement("input",{type:"text",className:"chat-send__fake js-chat-send-fake"}):null))}))})},function(e,t,i){"use strict";var n=i(109),a=i(3039),o=i(131),s={CLICK:"click"},r=n.extend({events:{click:"onCLick_"},render:function(e){this.$el.html(a.render({largePhoto:o.getUserPhoto(e),matchMessage:e.getMatchMessage()}))},onCLick_:function(e){e.preventDefault(),this.trigger(s.CLICK)}},"MatchMessageView");r.ACTIONS=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(209),o=i(106);e.exports=i(108)("MatchMessage",function(e){return n.createElement("div",{className:"chat-match-message"},n.createElement("div",{className:"chat-match-message__userpic"},n.createElement("div",{className:"brick"},n.createElement(a,{src:e.largePhoto,size:70}),n.createElement("div",{className:"brick__badge brick__badge--br"},n.createElement(o,{name:"badge-feature-liked-you",size:"md",shadow:!0})))),n.createElement("div",{className:"chat-match-message__text",dangerouslySetInnerHTML:{__html:e.matchMessage}}))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("ChatMessages",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"js-block-report"}),n.createElement("div",{className:"js-match-message"}),n.createElement("div",{className:"js-chat-messages"}),n.createElement("div",{className:"chat-v2__spacing-stub js-chat-spacing-stub"}))})},function(e,t,i){"use strict";function n(e){return e.find(function(e){return!e.isRead&&!e.isYours()})}function a(e){var t=e.messages,i=e.isSelectable,n=q.findLast(t,function(e){return e.isMasked&&!e.isYours()});if(n&&(n.status={text:z.get(603),icon:"chat-action-tap"}),!i){var a=q.findLast(t,s);a&&(a.status={text:z.get(28),icon:"chat-action-report"})}}function o(e,t){return e>1?1===t?z.get(606,e):z.get(607,e):1===t?z.get(604):z.get(605)}function s(e){return!e.isMasked&&!e.isYours()&&oe.includes(e.messageType)}function r(e,t,i){if(e.isYours())return 19===e.messageType||36===e.messageType?e.status:q.findLast(i,function(e){return e.isYours()})===e?e.status:void 0}function l(e){return y.createElement(S,{direction:e.direction,isContinuation:e.isContinuation,message:e.message,size:e.size,status:e.status})}function c(e){return W.getCachedClientOpenChat(e).messages}function u(e){var t=e.target;Z.track(te,{element:660,parent_element:"true"===t.dataset.blacklisted?1173:1174})}function d(){Z.track(te,{element:1171,parent_element:1172})}function h(){Z.track(te,{element:1170,parent_element:1172})}var p=i(3),m=p(i(127)),g=p(i(110)),_=p(i(112)),f=p(i(114)),v=p(i(115)),E=p(i(123)),b=p(i(116)),y=i(98),k=i(3042),S=i(3043),w=i(262),C=i(3048),T=i(3049),P=i(3050),N=i(288),I=i(3054),x=i(3059),A=i(3061),O=i(3062),V=i(3064),R=i(3066),B=i(566),L=i(3069),F=i(3070),M=i(3071),D=i(3072),U=i(3074),j=i(3077),G=i(416),q=i(100),H=i(162),z=i(99),Y=i(113),$=i(177),W=i(157),K=i(384),Q=i(327),X=i(171),Z=i(102),J=i(125).getLogger("ChatMessagesListContainer"),ee=i(101),te=ee.ClickEvent,ie=ee.InChatNotificationEvent,ne=ee.ViewBannerEvent,ae=N.MessageType,oe=[36,10,19,1,22,23],se=function(e){function t(e){var i,a,o,s,r,l;return(0,g.default)(this,t),(i=(0,f.default)(this,(0,v.default)(t).call(this,e))).state={isLoadingPage:!1,messages:e.messages},i.onChanges=i.onChanges.bind((0,E.default)(i)),i.onReport=i.onReport.bind((0,E.default)(i)),i.onScroll=i.onScroll.bind((0,E.default)(i)),i.onSelect=i.onSelect.bind((0,E.default)(i)),i.onUnmask=i.onUnmask.bind((0,E.default)(i)),i.scrollBottom=i.scrollBottom.bind((0,E.default)(i)),i.onMessageVisible=i.onMessageVisible.bind((0,E.default)(i)),i.fetchOlderMessages=Q(i.fetchOlderMessages.bind((0,E.default)(i))).callback,i.oldestUnreadTimestamp_=(a=e.messages,o=n(a),s=q.last(a),r=o&&o.dateCreated-1,l=s&&s.dateCreated,r||l||0),i}return(0,b.default)(t,e),(0,_.default)(t,[{key:"onReport",value:function(){this.props.onReport()}},{key:"onUnmask",value:function(e){var t=this;Z.track(te,{element:522}),W.getMaskedMessage(e.fromPersonId,[e.id]).then(function(e){a({messages:e,isSelectable:!1}),t.setState({messages:e})})}},{key:"onSelect",value:function(e){e.isSelected=!e.isSelected,Z.track(te,{element:514,position:Math.max(this.state.messages.indexOf(e)||0)}),this.setState({messages:this.state.messages}),this.props.onSelect(e)}},{key:"componentDidMount",value:function(){this.props.scrollPosition.restore(!0),H.on(H.EVENTS.SCROLL,this.onScroll),W.on(W.EVENTS.MESSAGE_DELETED,this.onChanges).on(W.EVENTS.MESSAGES_READ,this.onChanges)}},{key:"componentWillUnmount",value:function(){H.off(H.EVENTS.SCROLL,this.onScroll),this.firstUnreadMessageElement=null,W.off(W.EVENTS.MESSAGES_READ,this.onChanges).off(W.EVENTS.MESSAGE_DELETED,this.onChanges)}},{key:"render",value:function(){var e=this,t=function(e){var t=e.props,i=c(t.chatInstanceId),n=t.isSelectable,s=i.map(function(e,t){return Object.assign(e,{isSelectable:n,isSelected:n&&e.isSelected,status:r(e,t,i),id:e.id,fromUserId:e.fromPersonId,messageText:e.message})});return i.filter(function(e){return e.replyToUid}).forEach(function(e){var t=s.find(function(t){return t.id===e.replyToUid});t&&(t.request=null)}),a((0,m.default)({},t,{messages:s})),function(e){for(var t=e.messages,i=Y.getUser().getGender(),n=0,a=t.length-1;a>=0;a--){var s=t[a],r=t[a-1];s.isOffensive&&(s.message=o(++n,i),r&&r.isOffensive?t[a].isHidden=!0:n=0)}}({messages:s}),function(e){var t=e.messages,i=e.promos,n=e.chatUser;if(i){var a=i.find(function(e){return 70===e.getPromoBlockType()});if(a&&!t.find(function(e){return e.isYours()})&&a){var o=Object.assign(new $(a,n),{fromPersonId:n.getUserId()});t.splice(1,0,o)}}}((0,m.default)({},t,{messages:s})),s}({props:this.props});return y.createElement(G,{rootMargin:"52px 0px -100px 0px",render:function(i){var a=i.observe,o=i.unobserve,s=n(t),r=t.map(function(e){return{id:e.id,fromUserId:e.fromPersonId,messageText:e.message,messageType:ae.REGULAR,originalMessageScaffold:e}});return y.createElement(I,null,y.createElement(P,{messages:r,onMessageVisible:function(t){e.markMessageInView=t}},function(t){var i=t.messages;return y.createElement(C,null,e.state.isLoadingPage?y.createElement(T,null):null,i.map(function(t){return e.mapMessageComponent(a,o,s,t)}))}))}})}},{key:"onMessageVisible",value:function(e){"function"==typeof this.markMessageInView&&this.markMessageInView(e)}},{key:"componentDidUpdate",value:function(){this.updateScroll()}},{key:"onScroll",value:function(){this.props.scrollPosition.prepare(),this.fetchOlderMessages(X().scrollTop)}},{key:"scrollBottom",value:function(){this.props.scrollPosition.scrollToBottom(this.allowAnimate())}},{key:"onChanges",value:function(e){var t=this.props.chatUser.getUserId(),i=this.props.chatInstanceId;[i,e.fromPersonId||e,e.toPersonId||e].includes(t)&&this.setState({messages:c(i)})}},{key:"allowAnimate",value:function(e){return(!e||19!==e.messageType)&&(this.props.scrollPosition.isFirstScroll?this.state.messages.length<25:this.props.scrollPosition.scrollBottom<2*this.props.scrollPosition.wrapper.clientHeight)}},{key:"firstScroll",value:function(){if(this.props.scrollPosition.isFirstScroll){var e=this.allowAnimate();return this.firstUnreadMessageElement?this.props.scrollPosition.scrollIntoView(this.firstUnreadMessageElement,65,e):this.props.scrollPosition.scrollToBottom(e),this.props.scrollPosition.isFirstScroll=!1,this.firstUnreadMessageElement=null,!0}return!1}},{key:"scrollToUnreadMessage",value:function(){var e=n(this.state.messages),t=e&&e.dateCreated>this.oldestUnreadTimestamp_,i=this.props.scrollPosition.scrollBottom>80;return i&&t?(this.oldestUnreadTimestamp_=e.dateCreated,this.props.onNewUnreadMessage(e)):e&&!i&&this.props.scrollPosition.scrollToBottom(!0),Boolean(e)}},{key:"updateScroll",value:function(){this.state.messages.length&&!this.state.isLoadingPage&&(this.firstScroll()||this.scrollToUnreadMessage()||this.props.scrollPosition.restore())}},{key:"fetchOlderMessages",value:function(e,t){var i=this,n=this.state.messages,a=t<=e&&t<80,o=this.props.counter>n.length;if(!this.state.isLoadingPage&&o&&a){this.setState({isLoadingPage:!0});var s=Number(n[0]&&n[0].id),r=this.props.chatUser.getUserId(),l={count:25,direction:1,inclusive:!1,messageId:isNaN(s)?void 0:s};W.getMessages(r,l).then(function(e){i.props.scrollPosition.prepare(),i.setState({isLoadingPage:!1,messages:e})}).catch(function(e){i.setState({isLoadingPage:!1}),J.error("fetchOlderMessages::SERVER_GET_CHAT_MESSAGES",e,{userId:r},l)})}}},{key:"mapMessageComponent",value:function(e,t,i,n){var a=n.originalMessageScaffold;if(a.isHidden)return null;var o=function(e){var t=e.chatComponentMessage,i=e.observe,n=e.unobserve,a=e.onReport,o=e.onSelect,s=e.onUnmask,r=e.scrollPosition,c=e.onClickMessage,p=t.originalMessageScaffold,g=t.isMessageFromCurrentUser?"out":"in",_=t.isContinuation,f=A;switch(p.messageType){case"REPORTED_XP":return y.createElement(w,{direction:g,isContinuation:_,message:p.message,chatComponentMessage:t});case"EMOJI":return l(p);case"ANIMATED_EMOJI":f=O;break;case"PROMO_SELFIE":f=L;break;case 39:return y.createElement(U,{fromChat:!0,message:p,observe:i,unobserve:n,onClick:c});case 1:f=U;break;case 19:f=p.image?B:A;break;case 41:var v=p.image&&p.image.src;if(!K.isSupported(v))return l((0,m.default)({},p,{message:K.getDefaultMessage()}));f=D;break;case 23:f=M;break;case 36:f=V;break;case 3:case 4:case 5:f=x;break;case 10:f=R;break;case 22:f=p.image?M:U;break;case 28:f=window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia?F:A;break;case 29:case 30:f=F;break;case 25:case 27:f=j}return y.createElement(f,{scrollPosition:r,isContinuation:_,direction:g,emoji:O.SUPPORTED_EMOJI.HEART,fromChat:!0,chatComponentMessage:t,message:p,observe:i,unobserve:n,onClickUrlMessage:u,onClickUrlPreviewImage:d,onClickUrlPreviewText:h,onReport:a,onSelect:o,onUnmask:s})}({chatComponentMessage:n,observe:e,unobserve:t,onReport:this.onReport,onSelect:this.onSelect,onUnmask:this.onUnmask,scrollPosition:this.props.scrollPosition,onClickMessage:this.props.onClickMessage});return y.createElement("div",{key:a.id,ref:this.onInnerRef.bind(this,a,e,t,this.props,i)},a.chatDate?y.createElement(k,{text:a.chatDate}):null,o)}},{key:"onInnerRef",value:function(e,t,i,n,a,o){var s=this;a===e&&(this.firstUnreadMessageElement=o),e.promoType?function e(t){if(e.trackedMessages||(e.trackedMessages=[]),!t.isRead&&-1===e.trackedMessages.indexOf(t.id))switch(e.trackedMessages.push(t.id),t.promoType){case 70:Z.track(ie,{activation_place:11,chatMsgType:1,encrypted_user_id:t.fromPersonId,inchat_action_type:1});break;default:Z.track(ne,{banner_id:t.promoType})}}(e):o&&t(o,function(t){var a;t.isIntersecting&&(i(o),s.onMessageVisible(e.id),(a=e).isYours()||a.isRead||(n.onMessageViewed(e),W.markMessageRead(e)))})}}]),t}(y.Component);e.exports=se},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(120).P3,s={text:a.string.isRequired},r=function(e){var t=e.text;return n.createElement("div",{className:"csms-chat-date","data-qa":"chat-date"},n.createElement(o,null,t))};r.propTypes=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(210),r={direction:a.oneOf(["in","out"]),isContinuation:a.bool,status:a.object,isNested:a.bool,isSelectable:a.bool,isSelected:a.bool,onSelect:a.func,message:a.string.isRequired,innerRef:o.ref},l=function(e){var t=e.direction,i=e.isContinuation,a=e.status,o=e.isNested,r=e.isSelectable,l=e.isSelected,c=e.onSelect,u=e.message,d=e.innerRef;return n.createElement(s,{direction:t,isContinuation:i,status:a,isNested:o,isSelectable:r,isSelected:l,onSelect:c,innerRef:d},n.createElement("div",{className:"csms-chat-message-content-emoji","data-qa-message-content-type":"emoji"},u))};l.propTypes=r,e.exports=l},function(e,t,i){"use strict";var n=i(3045),a=i(3046),o=i(3047);e.exports={Choice:n,Toggle:a,Search:o}},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r={type:o.oneOf(["checkbox","radio"]).isRequired,color:o.oneOf(["primary","inherited"]),id:o.string,isChecked:o.bool,isDisabled:o.bool,onChange:o.func},l=function(e){var t,i=e.type,o=e.color,r=e.id,l=e.isChecked,c=e.isDisabled,u=e.onChange,d=s((t={"csms-choice":!0},(0,n.default)(t,"csms-choice--".concat(i),!0),(0,n.default)(t,"csms-choice--".concat(o),!0),(0,n.default)(t,"csms-choice--disabled",c),t));return a.createElement("div",{className:d,"data-qa-checkbox":!0},a.createElement("input",{id:r,type:i,checked:l,onChange:u,disabled:c}),a.createElement("span",{className:"csms-choice__surrogate"}))};l.propTypes=r,l.defaultProps={color:"primary",onChange:function(){}},e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(117),s={id:a.string,name:a.string,value:a.oneOfType([a.string,a.number]),isChecked:a.bool,isDisabled:a.bool,onChange:a.func,status:a.string},r=function(e){var t=e.id,i=e.isChecked,a=e.isDisabled,s=e.status,r=e.onChange,l=o({"csms-toggle":!0,"csms-toggle--disabled":a});return n.createElement("div",{className:l,"data-qa-toggle":s},n.createElement("input",{id:t,type:"checkbox",checked:i,onChange:r,disabled:a}),n.createElement("span",{className:"csms-toggle__surrogate"}))};r.propTypes=s,r.defaultProps={isChecked:!1,isDisabled:!1,onChange:function(){}},e.exports=r},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r=i(106),l={variant:o.oneOf(["gray","white","transparent"]),id:o.string,name:o.string,value:o.string,placeholder:o.string,autoFocus:o.bool,isDisabled:o.bool,onFocus:o.func,onChange:o.func,onBlur:o.func},c=function(e){var t,i=e.variant,o=e.id,l=e.name,c=e.value,u=e.placeholder,d=e.autoFocus,h=e.isDisabled,p=e.onFocus,m=e.onChange,g=e.onBlur,_=s((t={"csms-search":!0},(0,n.default)(t,"csms-search--".concat(i),!0),(0,n.default)(t,"csms-search--disabled",h),t));return a.createElement("label",{className:_},a.createElement("div",{className:"csms-search__icon"},a.createElement(r,{name:"elements-input-search",size:"md"})),a.createElement("input",{className:"csms-search__input",type:"search",id:o,name:l,value:c,placeholder:u,autoFocus:d,autoComplete:"off",autoCorrect:"off",spellCheck:"false",disabled:h,onFocus:p,onChange:m,onBlur:g}))};c.propTypes=l,c.defaultProps={variant:"gray",onChange:function(){}},e.exports=c},function(e,t,i){"use strict";var n=i(98),a={children:i(104).node.isRequired},o=function(e){var t=e.children;return n.createElement("div",{className:"csms-chat-messages","data-qa":"chat-messages"},t)};o.propTypes=a,e.exports=o},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=function(){return n.createElement("div",{className:"csms-chat-loading-indicator"},n.createElement(a,{name:"loading-dots",size:"xlg"}))}},function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n=i(3051).MessagesListContainer;t.default=n,e.exports=t.default},function(e,t,i){"use strict";var n=i(3);t.__esModule=!0,t.MessagesListContainer=void 0;var a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(116)),c=n(i(98)),u=i(288),d=n(i(3052)),h=n(i(3053)),p=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).messageVisibilityEvent=(0,h.default)(),i}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){"function"==typeof this.props.onMessageVisible&&this.props.onMessageVisible(this.messageVisibilityEvent.trigger)}},{key:"componentDidUpdate",value:function(e){"function"==typeof this.props.onMessageVisible&&e.onMessageVisible!==this.props.onMessageVisible&&this.props.onMessageVisible(this.messageVisibilityEvent.trigger)}},{key:"getMessagesForComponent",value:function(){return this.props.messages.map(function(e){return{id:e.id,fromUserId:e.fromUserId,messageText:e.messageText,messageType:e.messageType||u.MessageType.REGULAR,originalMessageScaffold:e.originalMessageScaffold?e.originalMessageScaffold:e}})}},{key:"render",value:function(){var e=this,t=this.getMessagesForComponent(),i=this.context.messagesListFeatures;return i&&0!==i.length?c.default.createElement(d.default,{components:i,forwardProps:{messages:t,messageVisibilityEvent:this.messageVisibilityEvent}},function(t){var i=t.messages;return e.props.children({messages:i})}):this.props.children({messages:t})}}]),t}(c.default.PureComponent);t.MessagesListContainer=p,p.contextType=u.MessengerContext},function(e,t,i){"use strict";var n=i(3);t.__esModule=!0,t.default=function(e){var t,i=e.children,n=e.components,o=e.forwardProps,s=n.slice();return function e(n){if(s.length>0){t=s.shift();var o=a.default.createElement(t,n,function(t){return e(t)});return o}return"function"==typeof i?i(n):null}(o)};var a=n(i(98));e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0,t.default=function(){var e=[];return{subscribe:function(t,i){e.push({eventCallback:t,context:i})},unsubscribe:function(t,i){for(var n=e.length-1;n>=0;n--)e[n].eventCallback===t&&e[n].context===i&&e.splice(n,1)},trigger:function(){for(var t=e.slice(),i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];for(var o=0;o<t.length;o++)t[o].eventCallback.apply(t[o].context,n)}}},e.exports=t.default},function(e,t,i){"use strict";function n(e){return null!=e}var a=i(3);t.__esModule=!0,t.default=void 0;var o,s=a(i(110)),r=a(i(112)),l=a(i(114)),c=a(i(115)),u=a(i(116)),d=a(i(107)),h=a(i(98)),p=a(i(113)),m=a(i(125)),g=a(i(132)),_=a(i(102)),f=a(i(122)),v=i(288),E=a(i(3055)),b=a(i(3057)),y=i(105),k=y.ServerGetResources,S=y.ResourceRequest,w=y.ResourceReference,C=y.ServerGetUrlPreview,T=i(101).ViewElementEvent,P=m.default.getLogger("NewChatComponent"),N=(o={},(0,d.default)(o,v.UrlPreviewItemStatus.IS_BLACKLISTED,1173),(0,d.default)(o,v.UrlPreviewItemStatus.IS_NOT_BLACKLISTED,1174),(0,d.default)(o,v.UrlPreviewItemStatus.IS_PREVIEW,1172),o),I=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).isUrlPreviewEnabled=!1,i.urlPreviewObserver=null,i.isUrlPreviewEnabled=g.default.isAllowed(g.default.getSync(248)),i.state=i.getContextValue(),i}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=g.default.getObservable(248);this.urlPreviewObserver=g.default.observe(t,function(t){e.isUrlPreviewEnabled=g.default.isAllowed(t),e.setState(e.getContextValue())},{leading:!1})}},{key:"componentWillUnmount",value:function(){this.urlPreviewObserver.stop()}},{key:"getContextValue",value:function(){return{currentUser:{id:p.default.getUserId()},RPC:f.default,RPCAny:f.default.any,Protocol:{MessageType:{SERVER_GET_RESOURCES:667,CLIENT_RESOURCES:668,
CLIENT_URL_PREVIEW:702,SERVER_GET_URL_PREVIEW:701},ServerGetResources:k,ResourceRequest:S,ResourceReference:w,ClientSource:{CLIENT_SOURCE_CHAT:10},ResourceType:{RESOURCE_TYPE_CHAT_DOMAINS_BLACKLIST:8,RESOURCE_TYPE_CHAT_CLIENT_DOMAINS_WHITELIST:9},ServerGetUrlPreview:C},messagesListFeatures:[b.default,this.isUrlPreviewEnabled?E.default:null].filter(n),Logger:{error:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];P.error(e,i)},warn:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];P.warn(e,i)},debug:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];P.debug(e,i)}},tracking:{trackUrlPreviewElement:function(e,t){var i=N[e];_.default.track(T,{element:i,position:t})}}}}},{key:"render",value:function(){return h.default.createElement(v.Provider,{value:this.state},this.props.children)}}]),t}(h.default.Component);t.default=I,e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n=i(3056).UrlPreviewFeatureContainer;t.default=n,e.exports=t.default},function(e,t,i){"use strict";function n(e){return e.replace(/^https?:\/\//,"").split("/")[0]}function a(e){return e.startsWith("http")?e:"http://".concat(e)}var o=i(3);t.__esModule=!0,t.UrlPreviewFeatureContainer=void 0;var s=o(i(110)),r=o(i(112)),l=o(i(114)),c=o(i(115)),u=o(i(123)),d=o(i(116)),h=o(i(98)),p=i(288),m=i(563),g=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).state={urlToPreview:(0,m.getUrlToPreviewMap)()},i.setUrlPreview=i.setUrlPreview.bind((0,u.default)(i)),i.currentlyLoadingUrls={},i.urlsToLoad=[],i}return(0,d.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){if(this.fetchUrlConfig(),this.context.RPCAny&&this.context.Protocol){var e=this.context,t=e.RPCAny,i=e.Protocol.MessageType.CLIENT_URL_PREVIEW;t.on(i,this.setUrlPreview),this.props.messageVisibilityEvent.subscribe(this.onMessageVisible,this)}}},{key:"componentWillUnmount",value:function(){var e=this;if(this.context.RPCAny&&this.context.Protocol){var t=this.context,i=t.RPCAny,n=t.Protocol.MessageType.CLIENT_URL_PREVIEW;this.props.messageVisibilityEvent.unsubscribe(this.onMessageVisible,this),i.off(n,this.setUrlPreview),Object.keys(this.currentlyLoadingUrls).forEach(function(t){e.currentlyLoadingUrls[t].abort()})}}},{key:"onMessageVisible",value:function(e){var t=this.props.messages.find(function(t){return t.id===e});t&&t.messageType===p.MessageType.REGULAR&&this.loadUrlFromMessage(t)}},{key:"setUrlPreview",value:function(e,t){var i=this.context.Logger;if(t&&!e){var o=t.getUrlPreview();if(o){var s=o.getUrl(),r=o.getTitle(),l=o.getImage(),c=o.getDescription();if(l||c){var u={url:a(s),domain:n(s),title:r,image:l,description:c};(0,m.addUrlToPreview)(s,u),this.setState({urlToPreview:Object.assign({},(0,m.getUrlToPreviewMap)())})}}}else i&&i.error("Failed to fetch URL configuration",e)}},{key:"fetchUrlConfig",value:function(){var e=this;if(!(0,m.isUrlConfigLoaded)()&&!(0,m.isUrlConfigLoading)()){var t=this.context,i=t.RPC,n=t.Logger,a=t.Protocol;(0,m.loadUrlPreviewConfig)({RPC:i,Logger:n,Protocol:a},function(t){t&&e.urlsToLoad.forEach(function(t){return e.loadAndUpdateUrlPreview(t)}),e.urlsToLoad.length=0})}}},{key:"populateUrlsFromState",value:function(){var e=this;return this.props.messages.map(function(t){if(!t.id||!t.messageText)return t;var i=t.messageText,n=(0,m.getUrlsInString)(i);if(!n)return t;var a=n.cleanUrls;if(0===a.length)return t;var o=a[a.length-1],s=e.state.urlToPreview[o.url];return s?Object.assign({},t,{urlInfo:s}):t})}},{key:"loadUrlFromMessage",value:function(e){var t=this;if(e.id&&e.messageText){var i=e.messageText,n=(0,m.getUrlsInString)(i);if(n){var a=n.cleanUrls,o=n.badUrls;if(this.trackUrlViews(a,o,e),0!==a.length){var s=a[a.length-1];s.url in this.state.urlToPreview?this.trackUrlPreview(s,e):this.loadAndUpdateUrlPreview(s.url,function(){t.trackUrlPreview(s,e)})}}}}},{key:"trackUrlViews",value:function(e,t,i){if(this.context.tracking&&this.context.currentUser){var n=this.context,a=n.tracking.trackUrlPreviewElement;n.currentUser.id!==i.fromUserId&&(e.forEach(function(e){var t=e.index;a(p.UrlPreviewItemStatus.IS_NOT_BLACKLISTED,t)}),t.forEach(function(e){var t=e.index;a(p.UrlPreviewItemStatus.IS_BLACKLISTED,t)}))}}},{key:"trackUrlPreview",value:function(e,t){if(this.context.tracking&&this.context.currentUser){var i=this.context,n=i.tracking.trackUrlPreviewElement;i.currentUser.id!==t.fromUserId&&n(p.UrlPreviewItemStatus.IS_PREVIEW,e.index)}}},{key:"loadAndUpdateUrlPreview",value:function(e,t){var i=this;if(this.context.Protocol&&!this.currentlyLoadingUrls[e])if((0,m.isUrlConfigLoaded)()){var n=this.context,a=n.RPC,o=n.Protocol,s=o.MessageType,r=s.SERVER_GET_URL_PREVIEW,l=s.CLIENT_URL_PREVIEW,c=(new(0,o.ServerGetUrlPreview)).setUrl(e);(0,m.addUrlToPreview)(e,null),this.setState({urlToPreview:Object.assign({},(0,m.getUrlToPreviewMap)())}),this.currentlyLoadingUrls[e]=new a(r,c).on(l,function(n,a){delete i.currentlyLoadingUrls[e],i.setUrlPreview(n,a),!n&&t&&t()}),this.currentlyLoadingUrls[e].request()}else this.urlsToLoad.push(e)}},{key:"render",value:function(){var e=this.populateUrlsFromState();return this.props.children(Object.assign({},this.props,{messages:e}))}}]),t}(h.default.PureComponent);t.UrlPreviewFeatureContainer=g,g.contextType=p.MessengerContext},function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n=i(3058).GroupMessagesFeatureContainer;t.default=n,e.exports=t.default},function(e,t,i){"use strict";var n=i(3);t.__esModule=!0,t.GroupMessagesFeatureContainer=void 0;var a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(116)),c=n(i(98)),u=i(288),d=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(0,r.default)(t).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.context.currentUser;if(!e)return this.props.children(Object.assign({},this.props));var t=this.props.messages,i=e?e.id:"",n=!1,a=t.map(function(e,a){var o=e.fromUserId===i,s=!(0===a)&&n===o;n=o;var r=a===t.length-1;return r||(r=t[a+1].fromUserId===i!==o),Object.assign({},e,{isContinuation:s,isLastMessageInGroup:r,isMessageFromCurrentUser:o})});return this.props.children(Object.assign({},this.props,{messages:a}))}}]),t}(c.default.PureComponent);t.GroupMessagesFeatureContainer=d,d.contextType=u.MessengerContext},function(e,t,i){"use strict";function n(){m.getInstance().invalidateFolder(m.TYPES.PRIVATE_ALBUM_ACCESS)}function a(e,t,i){_.track(b,{access_type:i,action_type:t?2:5,encrypted_user_id:e.fromPersonId})}var o=i(3),s=o(i(110)),r=o(i(112)),l=o(i(114)),c=o(i(115)),u=o(i(116)),d=i(98),h=i(103),p=i(157),m=i(140),g=i(124),_=i(102),f=i(99),v=i(262),E=i(3060),b=i(101).RespondAccessEvent,y=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).state={showActions:e.message.request&&e.message.request.canAnswer},i}return(0,u.default)(t,e),(0,r.default)(t,[{key:"onClickPrimary",value:function(){var e=this.props.message;this.setState({showActions:!1}),a(e,!0,2),p.accessResponse(e.fromPersonId,2,!0,e.id).then(n).catch(this.onAccessResponseError.bind(this))}},{key:"onClickSecondary",value:function(){var e=this.props.message;this.setState({showActions:!1}),a(e,!1,2),p.accessResponse(e.fromPersonId,2,!1,e.id).catch(this.onAccessResponseError.bind(this))}},{key:"onAccessResponseError",value:function(e){g.showNotification({text:e&&e.getErrorMessage&&e.getErrorMessage(),type:g.TYPES.ERROR}),this.setState({showActions:!0})}},{key:"openAlbum",value:function(){h.navigate("private-photos",{id:this.props.message.fromPersonId})}},{key:"render",value:function(){var e=this.props.message;return 4!==e.messageType||e.isYours()?d.createElement(v,{actions:this.state.showActions?{onClickPrimary:this.onClickPrimary.bind(this),onClickSecondary:this.onClickSecondary.bind(this),primary:f.get(11),secondary:f.get(12)}:null,direction:this.props.direction,isContinuation:this.props.isContinuation,message:e.message,status:e.status}):d.createElement(E,{direction:this.props.direction,extra:{text:e.message},image:e.image,isContinuation:this.props.isContinuation,status:e.status,onClickContent:this.openAlbum.bind(this)})}}]),t}(d.Component);e.exports=y},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(210),r=i(338),l=i(120).P1,c=i(106),u={direction:a.oneOf(["in","out"]),isContinuation:a.bool,status:a.object,isSelectable:a.bool,isSelected:a.bool,onSelect:a.func,image:a.shape({src:a.string.isRequired}),extra:a.shape({text:a.string.isRequired}).isRequired,isLoading:a.bool,onClickContent:a.func,innerRef:o.ref},d=function(e){var t,i=e.direction,a=e.isContinuation,o=e.status,u=e.isSelectable,d=e.isSelected,h=e.onSelect,p=e.image,m=e.extra,g=e.isLoading,_=e.innerRef,f=e.onClickContent;return p&&(t={backgroundImage:"url(".concat(p.src,")")}),n.createElement(s,{width:"fixed",direction:i,isContinuation:a,status:o,isSelectable:u,isSelected:d,onSelect:h,innerRef:_},n.createElement(r,{direction:i,isContinuation:a,content:n.createElement("div",{className:"csms-chat-message-content-private-photo",onClick:f,"data-qa-message-content-type":"private-photo"},n.createElement("div",{className:"csms-chat-message-content-private-photo__img",style:t}),n.createElement("div",{className:"csms-chat-message-content-private-photo__fade"}),n.createElement("div",{className:"csms-chat-message-content-private-photo__icon"},n.createElement(c,{name:"generic-lock-opened",size:"lg"}))),extra:n.createElement(l,{color:"gray-dark"},m.text),isLoading:g&&!p}))};d.propTypes=u,e.exports=d},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(116)),c=i(98),u=i(262),d=i(278),h=i(99),p=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(0,r.default)(t).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props.message,t=d("message-type:".concat(e.messageType)),i=h.get(179),n=28===e.messageType&&function(e){if(e){var t=e.getName();return 2===e.getGender()?h.get(664,t):h.get(661,t)}}(this.props.chatUser)||e.message;return c.createElement(u,{message:n,notice:'<a href="'.concat(t,'" target="_blank">').concat(i,"</a><br>"),direction:this.props.direction})}}]),t}(c.Component);e.exports=p},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(123)),c=n(i(116)),u=i(98),d=i(100),h=i(3063),p=i(102),m=i(101).ViewElementEvent,g={HEART:"heart"},_=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).observe_=e.observe||d.noop,i.unobserve_=e.unobserve||d.noop,i.checkVisibility=i.checkVisibility.bind((0,l.default)(i)),i}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.observe_(this.el,this.checkVisibility)}},{key:"componentWillUnmount",value:function(){this.unobserve_(this.el)}},{key:"checkVisibility",value:function(e){if(e.isIntersecting)switch(this.unobserve_(this.el),this.props.emoji){case g.HEART:p.track(m,{element:625})}}},{key:"render",value:function(){var e=this,t=this.props.message;return u.createElement(h,{direction:this.props.direction,emoji:this.props.emoji,isContinuation:this.props.isContinuation,size:t.size,status:t.status,innerRef:function(t){e.el=t}})}}]),t}(u.Component);_.SUPPORTED_EMOJI=g,e.exports=_},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r=i(147),l=i(210),c=i(106),u={direction:o.oneOf(["in","out"]),isContinuation:o.bool,status:o.object,isSelectable:o.bool,isSelected:o.bool,onSelect:o.func,emoji:o.oneOf(["heart"]).isRequired,isNew:o.bool,innerRef:r.ref},d=function(e){var t,i=e.direction,o=e.isContinuation,r=e.status,u=e.isSelectable,d=e.isSelected,h=e.onSelect,p=e.emoji,m=e.isNew,g=e.innerRef,_=s((t={"csms-chat-message-content-emoji-animated":!0},(0,n.default)(t,"csms-chat-message-content-emoji-animated--".concat(p),!0),(0,n.default)(t,"is-new",m),t));return a.createElement(l,{direction:i,isContinuation:o,status:r,isSelectable:u,isSelected:d,onSelect:h,innerRef:g},a.createElement("div",{className:_,"data-qa-message-content-type":"emoji-animated"},function(){switch(p){case"heart":return a.createElement(c,{name:"generic-heart",size:"xxlg"})}}()))};d.propTypes=u,e.exports=d},function(e,t,i){"use strict";var n,a=i(3),o=a(i(4)),s=a(i(110)),r=a(i(112)),l=a(i(114)),c=a(i(115)),u=a(i(123)),d=a(i(116)),h=a(i(107)),p=i(98),m=i(100),g=i(336),_=i(131),f=i(3065),v=i(263),E=i(103),b=(n={},(0,h.default)(n,1,"giphy"),(0,h.default)(n,2,"tenor"),n),y=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).observe_=e.observe||m.noop,i.unobserve_=e.unobserve||m.noop,i.state={image:null,isLoading:!1},i.checkVisibility=i.checkVisibility.bind((0,u.default)(i)),i}return(0,d.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.observe_(this.el,this.checkVisibility)}},{key:"componentWillUnmount",value:function(){this.unobserve_(this.el)}},{key:"checkVisibility",value:function(e){e.isIntersecting&&(this.unobserve_(this.el),this.loadImage(this.props.message))}},{key:"loadImage",value:function(e){var t=this,i=e.gif.id,n=e.gif.provider;this.setState({isLoading:!0}),g.getInstance().getById({id:i,providerType:n}).then(function(i){_.preloadImage(i.image.preview).then(function(a){var s=(0,o.default)(a,3),r=s[0],l=s[1],c=s[2];e.gif=i,e.image={height:c,ratio:Number(i.image.ratio),src:r,width:l,provider:b[n]},t.setState({image:e.image})})})}},{key:"viewPhoto",value:function(){var e=this.props.message,t=e.image,i=e.isYours()?e.toPersonId:e.fromPersonId;E.navigate("multimedia",{chatUserId:i,id:e.id,source:t.src,state:"view",type:t.visibility})}},{key:"render",value:function(){var e=this,t=this.getUpdatedMessage();return p.createElement(f,{direction:this.props.direction,image:this.state.image,isContinuation:this.props.isContinuation,isLoading:this.state.isLoading,message:t.message,status:t.status,isSelectable:t.isSelectable&&!t.isYours(),isSelected:t.isSelected,onSelect:this.onSelect,onClickContent:this.viewPhoto.bind(this),innerRef:function(t){return e.el=t}})}}]),t}(v);e.exports=y},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(210),r=i(565),l=i(106),c={direction:a.oneOf(["in","out"]),isContinuation:a.bool,status:a.object,isNested:a.bool,nesting:a.oneOf(["top","middle","bottom"]),isSelectable:a.bool,isSelected:a.bool,onSelect:a.func,image:a.shape({src:a.string.isRequired,ratio:a.number.isRequired,provider:a.oneOf(["giphy","tenor"])}),isLoading:a.bool,onClickContent:a.func,innerRef:o.ref},u=function(e){var t=e.direction,i=e.isContinuation,a=e.status,o=e.isNested,c=e.isSelectable,u=e.isSelected,d=e.onSelect,h=e.nesting,p=e.image,m=e.isLoading,g=e.onClickContent,_=e.innerRef,f={paddingBottom:p?"".concat(p.ratio,"%"):"75%"};return n.createElement(s,{direction:t,isContinuation:i,status:a,isNested:o,isSelectable:c,isSelected:u,onSelect:d,innerRef:_},n.createElement(r,{direction:t,isContinuation:i,nesting:h,content:n.createElement("div",{className:"csms-chat-message-content-gif",style:f,onClick:g,"data-qa-message-content-type":"gif"},p?n.createElement(n.Fragment,null,n.createElement("img",{className:"csms-chat-message-content-gif__img",src:p.src,"data-qa":"chat-message-gif-img"}),p.provider?n.createElement("div",{className:"csms-chat-message-content-gif__logo csms-chat-message-content-gif__logo--".concat(p.provider)},n.createElement(l,{name:"logo-provider-".concat(p.provider)})):null):null),isLoading:m&&!p}))};u.propTypes=c,e.exports=u},function(e,t,i){"use strict";var n=i(3),a=n(i(4)),o=n(i(110)),s=n(i(112)),r=n(i(114)),l=n(i(115)),c=n(i(123)),u=n(i(116)),d=i(98),h=i(100),p=i(99),m=i(263),g=i(131),_=i(3067),f=i(103),v=p.get(584),E=function(e){function t(e){var i;return(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).observe_=e.observe||h.noop,i.unobserve_=e.unobserve||h.noop,i.checkVisibility=i.checkVisibility.bind((0,c.default)(i)),i.state={isBoxed:e.message.gift.getIsBoxed(),src:null},i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.observe_(this.el,this.checkVisibility)}},{key:"componentWillUnmount",value:function(){this.unobserve_(this.el)}},{key:"checkVisibility",value:function(e){e.isIntersecting&&(this.unobserve_(this.el),this.loadImage(this.props.message))}},{key:"loadImage",value:function(e){var t=this,i=this.getSrc(e);g.preloadImage(i).then(function(e){var i=(0,a.default)(e,1)[0];return t.setState({src:i})})}},{key:"getSrc",value:function(){return this.state.isBoxed?this.props.message.image.srcBox:this.props.message.image.src}},{key:"openGift",value:function(){var e=this.props.message,t=e.gift.toJSON();this.state.isBoxed&&(e.gift.setIsBoxed(!1),this.setState({isBoxed:!1,src:e.image.src})),f.navigate("gift",{back:f.getUrl(),fromChat:this.props.fromChat,purchasedGift:t})}},{key:"render",value:function(){var e=this,t=this.getUpdatedMessage(),i="out"===this.props.direction,n=this.openGift.bind(this),a=i||!this.state.isBoxed?null:{primary:v,onClickPrimary:n};return d.createElement(_,{actions:a,direction:this.props.direction,image:{src:this.state.src},innerRef:function(t){return e.el=t},isContinuation:this.props.isContinuation,message:t.message,onClickContent:this.state.isBoxed?null:n,status:t.status,isSelectable:t.isSelectable&&!t.isYours(),isSelected:t.isSelected,onSelect:this.onSelect})}}]),t}(m);e.exports=E},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(210),r=i(338),l=i(414),c=i(120).P1,u={direction:a.oneOf(["in","out"]),isContinuation:a.bool,status:a.object,isNested:a.bool,nesting:a.oneOf(["top","middle","bottom"]),isSelectable:a.bool,isSelected:a.bool,onSelect:a.func,image:a.shape({src:a.string}),message:a.string.isRequired,actions:a.shape({primary:a.string.isRequired,onClickPrimary:a.func}),onClickContent:a.func,innerRef:o.ref},d=function(e){var t=e.direction,i=e.isContinuation,a=e.status,o=e.isNested,u=e.isSelectable,d=e.isSelected,h=e.onSelect,p=e.nesting,m=e.image,g=e.message,_=e.actions,f=e.innerRef,v=e.onClickContent;return n.createElement(s,{width:"fixed",direction:t,isContinuation:i,status:a,isNested:o,isSelectable:u,isSelected:d,onSelect:h,innerRef:f},n.createElement(r,{direction:t,isContinuation:i,nesting:p,content:n.createElement("div",{className:"csms-chat-message-content-gift",onClick:v,"data-qa-message-content-type":"gift"},n.createElement("div",{className:"csms-chat-message-content-gift__image"},n.createElement(l,{src:m.src})),n.createElement("div",{className:"csms-chat-message-content-gift__message","data-qa":"message-gift-message"},n.createElement(c,{align:"center",color:"black",breakWords:!0},g))),actions:_}))};d.propTypes=u,e.exports=d},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(147),r=i(117),l=i(237),c=i(210),u=i(565),d={direction:o.oneOf(["in","out"]),isContinuation:o.bool,status:o.object,isNested:o.bool,nesting:o.oneOf(["top","middle","bottom"]),isSelectable:o.bool,isSelected:o.bool,onSelect:o.func,image:o.shape({src:o.string,width:o.number.isRequired,height:o.number.isRequired}).isRequired,overlay:o.shape({children:o.node,background:o.oneOf(["dark"])}),isLoading:o.bool,onClickContent:o.func,innerRef:s.ref},h=function(e){var t=e.children,i=e.background,o=r((0,n.default)({"csms-chat-message-content-media__overlay":!0},"csms-chat-message-content-media__overlay--".concat(i),i));return a.createElement("div",{className:o},t)},p=function(e){var t=e.direction,i=e.isContinuation,n=e.status,o=e.isNested,s=e.isSelectable,r=e.isSelected,d=e.onSelect,p=e.nesting,m=e.image,g=e.overlay,_=e.isLoading,f=e.onClickContent,v=e.innerRef,E=a.useContext(l).tokens,b=parseInt(E.TOKEN_CHAT_BUBBLE_FIX_WIDTH.replace(/px$/,""),10),y=m.height/m.width,k={};return y>1?(k.width="".concat(b/y,"px"),k.height="".concat(b,"px")):(k.width="".concat(b,"px"),k.height="".concat(b*y,"px")),a.createElement(c,{direction:t,isContinuation:i,status:n,isNested:o,isSelectable:s,isSelected:r,onSelect:d,innerRef:v},a.createElement(u,{direction:t,isContinuation:i,nesting:p,content:a.createElement("div",{className:"csms-chat-message-content-media",style:k,onClick:f,"data-qa-message-content-type":"media"},m.src?a.createElement("img",{className:"csms-chat-message-content-media__img",src:m.src,"data-qa":"chat-message-media-img"}):null,g?a.createElement(h,{background:g.background},g.children):null),isLoading:_&&!m.src}))};p.propTypes=d,e.exports=p},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(116)),c=i(98),u=i(262),d=i(157),h=i(177),p=i(102),m=i(124),g=i(101),_=g.InChatNotificationEvent,f=g.RequestAccessEvent,v=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).state={showActions:e.message.request&&e.message.request.canAnswer},i}return(0,l.default)(t,e),(0,o.default)(t,[{key:"onClickPrimary",value:function(){var e=this,t=this.props.message,i=new h({messageType:28,toPersonId:t.fromPersonId});this.setState({showActions:!1}),function(e){p.track(_,{activation_place:11,chat_msg_type:1,encrypted_user_id:e.fromPersonId,inchat_action_type:2}),p.track(f,{activation_place:11,access_type:2,encrypted_user_id:e.fromPersonId})}(t),d.send(t.fromPersonId,i).catch(function(t){m.showNotification({text:t&&t.getErrorMessage&&t.getErrorMessage(),type:m.TYPES.ERROR}),e.setState({showActions:!0})})}},{key:"render",value:function(){var e=this.props.message;return c.createElement(u,{actions:this.state.showActions?{primary:e.actions.primary,onClickPrimary:this.onClickPrimary.bind(this)}:null,direction:this.props.direction,isContinuation:this.props.isContinuation,message:e.message,notice:e.notice})}}]),t}(c.Component);e.exports=v},function(e,t,i){"use strict";function n(e,t){v.track(S,{activation_place:11,chat_msg_type:2,encrypted_user_id:e.fromPersonId,inchat_action_type:t?2:3}),v.track(w,{activation_place:11,access_type:2,action_type:t?2:5,encrypted_user_id:e.fromPersonId})}var a=i(3),o=a(i(4)),s=a(i(110)),r=a(i(112)),l=a(i(114)),c=a(i(115)),u=a(i(116)),d=i(98),h=i(25),p=i(262),m=i(99),g=i(157),_=i(177),f=i(566),v=i(102),E=i(247),b=i(131),y=i(103),k=i(101),S=k.InChatNotificationEvent,w=k.RespondAccessEvent,C=k.SendPhotoInChatEvent,T=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).state={declined:!1},i}return(0,u.default)(t,e),(0,r.default)(t,[{key:"onClickPrimary",value:function(){var e=this.props.message;n(e,!0),y.navigate("camera",{facingMode:"user",onTakePicture:function(t){var i=new window.FileReader;y.back(),i.readAsDataURL(t),i.onload=function(i){var n=new window.FormData;(function(e,t,i){return b.preloadImage(t).then(function(t){var n=(0,o.default)(t,3),a=n[0],s=n[1],r=n[2];return new _({messageType:30,replyToUid:e.id,toPersonId:e.fromPersonId,image:{height:r,id:i,src:a,visibility:4,width:s}})})})(e,i.target.result,"TEMP").then(function(i){i.setStatus(i.STATUS.SENDING),g.add(i),n.append("file",t),h.ajax({contentType:!1,data:n,dataType:"json",processData:!1,type:"POST",url:E(5),success:function(t){var n=t.photo_id;i.image.id=n,g.send(i.toPersonId,i).then(function(){!function(e,t){v.track(C,{encrypted_user_id:e.fromPersonId,is_selfie:!0,photo_id:t})}(e,n)})}})})}},onCameraError:function(){y.back()}})}},{key:"onClickSecondary",value:function(){var e=this.props.message,t=new _({message:"...",messageType:29,replyToUid:e.id,toPersonId:e.fromPersonId});n(e,!1),this.setState({declined:!0}),g.send(e.fromPersonId,t)}},{key:"render",value:function(){var e=this.props.message,t=e.request&&e.request.canAnswer&&!this.state.declined;return 30===e.messageType?d.createElement(f,{message:e,observe:this.props.observe,unobserve:this.props.unobserve,direction:this.props.direction,isContinuation:this.props.isContinuation}):d.createElement(p,{actions:t?{onClickPrimary:this.onClickPrimary.bind(this),onClickSecondary:this.onClickSecondary.bind(this),primary:m.get(422),secondary:m.get(423)}:null,direction:this.props.direction,isContinuation:this.props.isContinuation,message:e.message,status:e.status})}}]),t}(d.Component);e.exports=T},function(e,t,i){"use strict";var n=i(3),a=n(i(4)),o=n(i(110)),s=n(i(112)),r=n(i(114)),l=n(i(115)),c=n(i(123)),u=n(i(116)),d=i(98),h=i(100),p=i(567),m=i(131),g=function(e){function t(e){var i;return(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).observe_=e.observe||h.noop,i.unobserve_=e.unobserve||h.noop,i.state={isLoading:!1},i.checkVisibility=i.checkVisibility.bind((0,c.default)(i)),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.observe_(this.el,this.checkVisibility)}},{key:"componentWillUnmount",value:function(){this.unobserve_(this.el)}},{key:"checkVisibility",value:function(e){e.isIntersecting&&(this.unobserve_(this.el),this.loadImage(this.props.message))}},{key:"loadImage",value:function(e){var t=this;this.setState({isLoading:!0}),m.preloadImage(e.image.src).then(function(e){var i=(0,a.default)(e,3),n=i[0],o=i[1],s=i[2];t.setState({image:{src:n,width:o,height:s},isLoading:!1})})}},{key:"render",value:function(){var e=this,t=this.getUpdatedMessage();return d.createElement(p,{direction:this.props.direction,content:this.state.image,isContinuation:this.props.isContinuation,isLoading:this.state.isLoading,message:t.message,status:t.status,isSelectable:t.isSelectable&&!t.isYours(),isSelected:t.isSelected,onSelect:this.onSelect,innerRef:function(t){return e.el=t}})}}]),t}(i(263));e.exports=g},function(e,t,i){"use strict";function n(e){return e.image&&f.isSupportedVideo(e.image.src)}var a=i(3),o=a(i(4)),s=a(i(110)),r=a(i(112)),l=a(i(114)),c=a(i(115)),u=a(i(123)),d=a(i(116)),h=i(98),p=i(100),m=i(567),g=i(3073),_=i(131),f=i(384),v=i(211),E=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).observe_=i.props.observe||p.noop,i.unobserve_=i.props.unobserve||p.noop,i.state={isLoading:!1},i.checkVisibility=i.checkVisibility.bind((0,u.default)(i)),i.onVideoRef=i.onVideoRef.bind((0,u.default)(i)),i}return(0,d.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.observe_(this.el,this.checkVisibility),v.on(v.ACTIONS.WAKE_UP,this.onWakeUp,this)}},{key:"componentWillUnmount",value:function(){this.unobserve_(this.el),v.off(v.ACTIONS.WAKE_UP,this.onWakeUp)}},{key:"checkVisibility",value:function(e){e.isIntersecting&&(this.unobserve_(this.el),this.loadImage(this.props.message))}},{key:"loadImage",value:function(e){var t=this;this.setState({isLoading:!0}),n(e)||_.preloadImage(e.image.src).then(function(e){var i=(0,o.default)(e,1)[0];t.setState({image:{src:i},isLoading:!1})})}},{key:"render",value:function(){var e=this,t=this.getUpdatedMessage();return n(this.props.message)?h.createElement(g,{direction:t.direction,content:{src:t.image.src,innerVideoRef:this.onVideoRef},isContinuation:t.isContinuation,isLoading:!1,message:t.message,status:t.status,isSelectable:t.isSelectable&&!t.isYours(),isSelected:t.isSelected,onSelect:this.onSelect.bind(this),innerRef:function(t){return e.el=t}}):h.createElement(m,{direction:t.direction,content:this.state.image,isContinuation:t.isContinuation,isLoading:this.state.isLoading,message:t.message,status:t.status,isSelectable:t.isSelectable&&!t.isYours(),isSelected:t.isSelected,onSelect:this.onSelect.bind(this),innerRef:function(t){return e.el=t}})}},{key:"onVideoRef",value:function(e){this.videoRef=e,this.playVideo()}},{key:"onWakeUp",value:function(){this.playVideo()}},{key:"playVideo",value:function(){this.videoRef&&this.videoRef.paused&&this.videoRef.play()}}]),t}(i(263));e.exports=E},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(210),s={direction:a.oneOf(["in","out"]),isContinuation:a.bool,status:a.object,isNested:a.bool,isSelectable:a.bool,isSelected:a.bool,onSelect:a.func,video:a.string,isLoading:a.bool,innerRef:a.func},r=function(e){var t=e.direction,i=e.isContinuation,a=e.status,s=e.isNested,r=e.isSelectable,l=e.isSelected,c=e.onSelect,u=e.video,d=e.innerRef,h=e.innerVideoRef;return n.createElement(o,{direction:t,isContinuation:i,status:a,isNested:s,isSelectable:r,isSelected:l,onSelect:c,innerRef:d},n.createElement("div",{className:"csms-chat-message-content-sticker","data-qa-message-content-type":"emogi"},n.createElement("div",{className:"csms-chat-message-content-sticker__image"},n.createElement("video",{src:u,height:"150",muted:!0,loop:!0,autoPlay:!0,playsInline:!0,ref:h}))))};r.propTypes=s,e.exports=r},function(e,t,i){"use strict";function n(e){var t=e.message;return e.isTemporary()&&t?t.replace(/>/g,"&gt;").replace(/</g,"&lt;"):t?function(e){return E?e.split(/(\s)/).map(function(e){var t=(0,h.default)(e);return"string"!=typeof t||function(e){if(!e)return!1;var t=new window.URL(e),i=e.indexOf(t.hostname);return-1!==e.substring(0,i).indexOf("@")}(t)?e:'<a class="js-highlighted-link" target="_blank" rel="noreferrer" href="'.concat(t,'" data-blacklisted="').concat((0,d.isUrlBlacklisted)(e),'">').concat(e,"</a>")}).join(""):e}(t):""}var a=i(3),o=a(i(110)),s=a(i(112)),r=a(i(114)),l=a(i(115)),c=a(i(123)),u=a(i(116)),d=i(563),h=a(i(564)),p=i(98),m=i(162),g=i(5),_=i(3075),f=i(3076),v=i(263),E=Boolean(window.URL),b=function(e){function t(){var e;return(0,o.default)(this,t),(e=(0,r.default)(this,(0,l.default)(t).call(this))).lastHeight=void 0,e.onInnerRef=e.onInnerRef.bind((0,c.default)(e)),e.onClickUrlMessage=e.onClickUrlMessage.bind((0,c.default)(e)),e.onClickUrlPreviewImage=e.onClickUrlPreviewImage.bind((0,c.default)(e)),e.onClickUrlPreviewText=e.onClickUrlPreviewText.bind((0,c.default)(e)),e}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getPreview",value:function(){return this.props.chatComponentMessage&&this.props.chatComponentMessage.urlInfo}},{key:"onInnerRef",value:function(e){if(e&&(this.bindClickEvenLinks(e),!m.getIsScrollingByUser())){var t=e.clientHeight,i=this.lastHeight;this.lastHeight=t;var n=document.scrollingElement;if(void 0!==i&&n){var a=t-i,o=n.scrollTop-e.offsetHeight,s=n.scrollTop+window.innerHeight,r=e.offsetTop;(r>o&&r<s||!g.supportsChangePositionDuringScroll)&&this.props.scrollPosition.scrollBy(a)}}}},{key:"render",value:function(){var e=this.getUpdatedMessage(),t=this.getPreview();return t?p.createElement(f,{innerRef:this.onInnerRef,direction:this.props.direction,isContinuation:this.props.isContinuation,isSelectable:e.isSelectable&&!e.isYours(),isSelected:e.isSelected,message:n(e),status:e.isSelectable?null:e.status,preview:t,onClickPreviewImage:this.onClickUrlPreviewImage,onClickPreviewText:this.onClickUrlPreviewText,onSelect:this.onSelect}):p.createElement("div",{onClick:this.props.onClick},p.createElement(_,{innerRef:this.onInnerRef,direction:e.direction,isContinuation:e.isContinuation,isSelectable:e.isSelectable&&!e.isYours(),isSelected:e.isSelected,message:n(e),status:e.isSelectable?null:e.status,onSelect:this.onSelect}))}},{key:"isMessageFromCurrentUser",value:function(){var e=this.props.chatComponentMessage;return e&&e.isMessageFromCurrentUser}},{key:"bindClickEvenLinks",value:function(e){for(var t=e.querySelectorAll(".js-highlighted-link"),i=0;i<t.length;i++)t[i].addEventListener("click",this.onClickUrlMessage,!0)}},{key:"onClickUrlMessage",value:function(e){!this.isMessageFromCurrentUser()&&this.props.onClickUrlMessage&&this.props.onClickUrlMessage(e)}},{key:"onClickUrlPreviewImage",value:function(){!this.isMessageFromCurrentUser()&&this.props.onClickUrlPreviewImage&&this.props.onClickUrlPreviewImage()}},{key:"onClickUrlPreviewText",value:function(){!this.isMessageFromCurrentUser()&&this.props.onClickUrlPreviewText&&this.props.onClickUrlPreviewText()}}]),t}(v);e.exports=b},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(210),r=i(568),l=i(120).P1,c={direction:a.oneOf(["in","out"]),isContinuation:a.bool,status:a.object,isNested:a.bool,nesting:a.oneOf(["top","middle","bottom"]),
isSelectable:a.bool,isSelected:a.bool,onSelect:a.func,message:a.string.isRequired,innerRef:o.ref},u=function(e){var t=e.direction,i=e.isContinuation,a=e.status,o=e.isNested,c=e.isSelectable,u=e.isSelected,d=e.onSelect,h=e.nesting,p=e.message,m=e.innerRef;return n.createElement(s,{width:"relative",direction:t,isContinuation:i,status:a,isNested:o,isSelectable:c,isSelected:u,onSelect:d,innerRef:m},n.createElement(r,{direction:t,isContinuation:i,nesting:h,content:n.createElement("div",{className:"csms-chat-message-content-text","data-qa-message-content-type":"text"},n.createElement("div",{className:"csms-chat-message-content-text__message"},n.createElement(l,{dangerous:!0,breakWords:!0,"data-qa":"chat-message-text"},p)))}))};u.propTypes=c,e.exports=u},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(147),s=i(210),r=i(568),l=i(338),c=i(120),u=c.P1,d=c.P3,h={direction:a.oneOf(["in","out"]),isContinuation:a.bool,status:a.object,isNested:a.bool,isSelectable:a.bool,isSelected:a.bool,onSelect:a.func,message:a.string.isRequired,preview:a.shape({image:a.string,title:a.string,description:a.string,domain:a.string.isRequired,url:a.string.isRequired}).isRequired,onClickPreviewImage:a.func,onClickPreviewText:a.func,innerRef:o.ref},p=function(e){var t=e.direction,i=e.isContinuation,a=e.status,o=e.isNested,c=e.isSelectable,h=e.isSelected,p=e.onSelect,m=e.message,g=e.preview,_=e.onClickPreviewImage,f=e.onClickPreviewText,v=e.innerRef;return n.createElement(s,{width:"fixed",direction:t,isContinuation:i,status:a,isNested:o,isSelectable:c,isSelected:h,onSelect:p,innerRef:v},n.createElement("div",{className:"csms-chat-message-content-text-with-link"},n.createElement(r,{direction:t,isContinuation:i,nesting:o?"middle":"top",content:n.createElement("div",{className:"csms-chat-message-content-text","data-qa-message-content-type":"text"},n.createElement("div",{className:"csms-chat-message-content-text__message"},n.createElement(u,{dangerous:!0,breakWords:!0,"data-qa":"chat-message-text"},m)))}),n.createElement(l,{direction:t,isContinuation:i,nesting:"bottom",content:g.image?n.createElement("a",{className:"csms-chat-message-content-text-with-link__preview-link",href:g.url,target:"_blank",rel:"noreferrer noopener external",onClick:_},n.createElement("div",{className:"csms-chat-message-content-text-with-link__preview-image",style:{backgroundImage:"url(".concat(g.image,")")}})):null,extra:n.createElement("a",{className:"csms-chat-message-content-text-with-link__preview-link",href:g.url,target:"_blank",rel:"noreferrer noopener external",onClick:f},g.title?n.createElement("div",{className:"csms-chat-message-content-text-with-link__preview-title"},n.createElement(d,{weight:"medium"},g.title)):null,g.description?n.createElement("div",{className:"csms-chat-message-content-text-with-link__preview-description"},n.createElement(d,null,g.description)):null,n.createElement("div",{className:"csms-chat-message-content-text-with-link__preview-domain"},n.createElement(d,{breakWords:!0},g.domain)))})))};p.propTypes=h,e.exports=p},function(e,t,i){"use strict";function n(e,t){var i=(new v).setType(e.request.type);return e.request.providerType&&i.setProviderType(e.request.providerType),a(e,t,1),m.accessResponse(e.fromPersonId,1,t,e.id,i)}function a(e,t,i){_.track(f,{access_type:i,action_type:t?2:5,encrypted_user_id:e.fromPersonId})}var o=i(3),s=o(i(110)),r=o(i(112)),l=o(i(114)),c=o(i(115)),u=o(i(116)),d=i(98),h=i(262),p=i(99),m=i(157),g=i(124),_=i(102),f=i(101).RespondAccessEvent,v=i(105).VerificationAccessObject,E=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).state={showActions:e.message.request&&e.message.request.canAnswer},i}return(0,u.default)(t,e),(0,r.default)(t,[{key:"onClickPrimary",value:function(){this.setState({showActions:!1}),a(this.props.message,!0,1),n(this.props.message,!0).catch(this.onAccessResponseError.bind(this))}},{key:"onClickSecondary",value:function(){this.setState({showActions:!1}),a(this.props.message,!1,1),n(this.props.message,!1).catch(this.onAccessResponseError.bind(this))}},{key:"onAccessResponseError",value:function(e){g.showNotification({text:e&&e.getErrorMessage&&e.getErrorMessage(),type:g.TYPES.ERROR}),this.setState({showActions:!0})}},{key:"render",value:function(){var e=this.props.message;return d.createElement(h,{actions:this.state.showActions?{onClickPrimary:this.onClickPrimary.bind(this),onClickSecondary:this.onClickSecondary.bind(this),primary:p.get(11),secondary:p.get(12)}:null,direction:this.props.direction,isContinuation:this.props.isContinuation,message:e.message,status:e.status})}}]),t}(d.Component);e.exports=E},function(e,t,i){"use strict";function n(e){this.wrapper=e,this.reset()}function a(e,t,i){e.scrollTo({behavior:i?"smooth":"instant",top:t})}function o(e){return e.wrapper.scrollHeight-e.scrollBottom-window.innerHeight}n.prototype={restore:function(e){this.scrollTop=e?this.scrollTop:o(this),a(this.wrapper,this.scrollTop,!1)},prepare:function(){this.scrollBottom=this.wrapper.scrollHeight-this.wrapper.scrollTop-window.innerHeight,this.scrollTop=o(this)},reset:function(){this.scrollBottom=0,this.scrollTop=o(this)},scrollIntoView:function(e,t,i){e&&a(this.wrapper,e.offsetTop-(t||0),i)},scrollToBottom:function(e){a(this.wrapper,this.wrapper.scrollHeight+this.wrapper.clientHeight,e)},scrollBy:function(e){a(this.wrapper,this.wrapper.scrollTop+e,!1)}},e.exports=n},function(e,t,i){"use strict";function n(e){g.track(y,{element:e})}function a(e){var t=e.chatUser,i=t.getOnlineStatus(),n="unknown"===e.gender?"male":e.gender,a={online:1===i,idle:2===i,offline:4===i,isFullyVerified:4===t.getVerificationStatus()};if(e.initialScreen.blockingFeature){var o="male"===n?u.get(413):u.get(414);a.title=o.replace("{{name}}",t.getName())}else a.name=t.getName();return t.getIsMatch()||(a.statusText=t.getOnlineStatusText()),a}var o=i(3)(i(107)),s=i(25),r=i(100),l=i(109),c=i(139),u=i(99),d=i(113),h=i(122),p=i(3080),m=i(3082),g=i(102),_=i(111),f=i(105),v=f.ServerAppStats,E=f.InitialChatScreenStats,b=i(101),y=b.ClickEvent,k=b.MatchEvent,S=b.VoteProfileEvent,w=b.ViewElementEvent,C=_("BLOCK_USER","DISMISS","OPEN_PROFILE","SEND_DIRECT_GIFT","SEND_GIFT","SEND_SMILE","SHOW_GIFT","VOTE"),T=_("CANCEL_REPORT","SEND_REPORT"),P=l.extend({className:"chat-initial",chatUser_:null,events:{"click .js-block-user":"onBlockUser_","click .js-direct-gift":"onSendDirectGift_","click .js-dismiss-screen":"onDismiss_","click .js-open-gift":"onOpenGift_","click .js-open-profile":"onOpenProfile_","click .js-send-gift":"onSendGift_","click .js-send-smile":"onSendSmile_","click .js-vote":"onVote_"},update:function(e){return this.chatUser_=e.chatUser,this.theirId_=e.chatInstanceId,e.dismissScreen?(this.reset(),void this.hide()):void(e.initialScreenType?31===e.initialScreenType?this.updateLikedYouInitialChatScreen_(e):this.updateInitialChatScreen_(e):this.reset())},getBlockerContainer:function(){return this.$(".js-blocker")},updateInitialChatScreen_:function(e){var t=function(e){var t=e.initialScreen,i=e.initialScreenType,n=t.blockingFeature;if(n&&19!==i){if(13===n.getRequiredAction())return{external:!0};var a={text:t.message||n.getDisplayMessage(""),actionText:n.getDisplayAction()};switch(i){case 13:a.criteria=!0;break;case 16:a.newbie=!0,a.type=4;break;case 15:a.veryPopular=!0,a.type=5;break;case 11:a.quota=!0,a.cost=n.getDisplayComment()||"";break;case 33:a.lookalikesForeigner=!0;break;default:a.photos=!0}return a}}(e),i=0!==e.maxUnansweredMessages,n=e.chatUser,s=e.initialScreen,l=i?function(e){if(!e.initialScreen.blockingFeature){var t=2===d.getUser().getGender(),i=18===e.initialScreenType;if(t&&!e.hasReceivedMessage||i)return g.track(w,{element:227}),{smile:{subtitle:i?e.initialScreen.message:"male"===e.gender?u.get(636):u.get(635),button:u.get(637)}};var n=e.initialScreen.gifts,a={gifts:n&&n.slice(0,3),message:e.initialScreen.message,subtitle:e.initialScreen.subtitle};if(a.message||a.subtitle||a.gifts)return a;var o=r.find(e.promoBanners,function(e){return 24===e.getPromoBlockType()&&5===e.getPromoBlockPosition()});return o?{gift:o.getMssg()}:void 0}}(e):void 0,c=n.getIsMatch(!1),h=function(e){var t=function(e){var t=e.initialScreen.blockingFeature,i=7===e.initialScreenType;if(t||i||0===e.messages.length)return null;var n=r.last(e.messages),a="male"===e.gender?u.get(417,e.chatUser.getName()):u.get(418,e.chatUser.getName());switch(n.messageType){case 1:case 23:case 22:case 41:case"EMOJI":case"ANIMATED_EMOJI":return{type:"textMessage",body:n.message};case 10:return{type:"giftMessage",body:{label:a,image:n.image.srcBox||n.image.src,text:n.message}};default:return{body:u.get(0),type:"textMessage"}}}(e);if(t){var i,n="textMessage"===t.type||"gifMessage"===t.type;return i={},(0,o.default)(i,t.type,t.body),(0,o.default)(i,"bozo",n?function(e){return{replyLexeme:e.bozoReplyLexeme||u.get(336),skipLexeme:e.skipReplyLexeme||u.get(7)}}(e):null),i}}(e),m=!(!i||l||t&&!t.external),_=s.title||s.subtitle,f=s.message,v={blocker:t,gender:e.gender,header:a(e),invitation:l,match:c,matchMessage:c&&n.getMatchMessage(),showControl:!t&&!h,simpleText:m?{text:f,header:_}:null,subtitle:s.subtitle,userpic:e.largePhoto,chatUser:{name:n.getName(),age:n.getAge(),isFavourite:n.getIsFavourite()}};h&&(Object.assign(v,h),v.header.report=!0),this.renderInitialScreen_(p,v)},updateLikedYouInitialChatScreen_:function(e){var t=e.initialScreen.promo,i={gender:e.gender,title:t.getHeader(),message:t.getMssg(),userpic:e.largePhoto,chatUser:{name:e.chatUser.getName(),age:e.chatUser.getAge()}};this.renderInitialScreen_(m,i),g.track(w,{element:305})},renderInitialScreen_:function(e,t){this.reset(),this.$el.append(e.render(t)),this.show()},onDismiss_:function(){n(52),new h(278,(new v).setInitialChatScreenStats((new E).setChatInstanceId(this.theirId_).setScreenType(8).setEventType(4))).request(),this.trigger(C.DISMISS)},onBlockUser_:function(){this.trigger(C.BLOCK_USER)},onOpenProfile_:function(){this.trigger(C.OPEN_PROFILE)},onSendGift_:function(){this.trigger(C.SEND_GIFT)},onSendDirectGift_:function(e,t){this.trigger(C.SEND_DIRECT_GIFT,t.getAttribute("data-product-id"),Number(s(t).data("index")))},onSendSmile_:function(){n(227),this.trigger(C.SEND_SMILE)},onOpenGift_:function(){this.trigger(C.SHOW_GIFT)},onVote_:function(e,t){if(c.isTouchEventTrusted(e)){var i=s(t);if(!i.hasClass("is-loading")){i.addClass("is-loading");var a=null!==t.getAttribute("data-yes");g.track(S,{vote_result:a?2:3,activation_place:264,encrypted_user_id:this.chatUser_.getEncryptedUserId()||this.chatUser_.getUserId()}),a?(g.track(k,{vote_result:2,encrypted_user_id:this.chatUser_.getEncryptedUserId()||this.chatUser_.getUserId(),activation_place:264}),g.track(y,{element:289,parent_element:305})):g.track(y,{element:65,parent_element:305}),n(54),this.trigger(C.VOTE,a)}}},getSpacingStub:function(){return this.$(".js-chat-spacing-stub")}},"ChatInitialView");P.ACTIONS=C,P.EVENTS=T,e.exports=P},function(e,t,i){"use strict";var n=i(98),a=i(569),o=a.Test,s=a.Variation,r=a.Default,l=i(209),c=i(106),u=i(99),d=i(134),h=i(248),p=i(153);e.exports=i(108)("ChatInitial",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement(o,{name:"mini-profile"},n.createElement(s,{name:"miniProfile"},n.createElement("div",{className:"layout__header"},n.createElement("div",{className:"mini-profile__spacing-stub"}))),n.createElement(r,null)),n.createElement("div",{className:"layout__content"},n.createElement(o,{name:"mini-profile"},n.createElement(s,{name:"miniProfile"}),n.createElement(r,null,n.createElement("div",{className:"chat-initial__user-image"},n.createElement("div",{className:"brick-wrapper brick-wrapper--xxxxlg brick-wrapper--padded"},n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch js-open-profile","data-qa":"brick"},n.createElement(l,{src:e.userpic,size:175}),e.match?n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(c,{name:"badge-feature-liked-you",size:"lg",shadow:!0})):null),e.match?n.createElement(n.Fragment,null,n.createElement("div",{className:"initial-chat-screen__userpic-heart initial-chat-screen__userpic-heart--br"},n.createElement(c,{name:"generic-heart",size:"stretch"})),n.createElement("div",{className:"initial-chat-screen__userpic-heart initial-chat-screen__userpic-heart--bl"},n.createElement(c,{name:"generic-heart",size:"stretch"})),n.createElement("div",{className:"initial-chat-screen__userpic-heart initial-chat-screen__userpic-heart--tr"},n.createElement(c,{name:"generic-heart",size:"stretch"}))):null))),n.createElement("div",{className:"initial-chat-screen__username"},n.createElement("span",{className:"truncated-text"},n.createElement("span",{className:"truncated-text__trim"},e.chatUser.name),n.createElement("span",{className:"truncated-text__full"},", ",e.chatUser.age))))),e.textMessage?n.createElement("div",{className:"initial-chat-screen__message"},n.createElement("div",{className:"chat-message-initial-standalone"},n.createElement("div",{className:"chat-message-initial-standalone__container"},n.createElement("svg",{viewBox:"0 0 21 31",className:"chat-message-initial-standalone__tail"},n.createElement("path",{fill:"currentColor",d:"M0 2.83C0 .13 1.79-.8 4.01.73L21 12.5V31H0V2.83z"})),n.createElement("div",{className:"chat-message-initial-standalone__text qa-text-message",dangerouslySetInnerHTML:{__html:e.textMessage}})))):null,p(e.giftMessage,e,function(e){return n.createElement(n.Fragment,null,e.messageText,n.createElement("div",{className:"initial-chat-screen__gift-message js-open-gift"},n.createElement("div",{className:"placard"},n.createElement("div",{className:"spring-box"},n.createElement("div",{className:"spring-box__media qa-gift js-gift"},n.createElement("div",{className:"gift"},n.createElement("div",{className:"gift__image"},n.createElement("div",{className:"gift__image-loader"},n.createElement(c,{name:"gift-wrap",size:"stretch"})),n.createElement("img",{src:e.image,className:"js-image",alt:""})))),n.createElement("div",{className:"spring-box__content"},e.text?n.createElement("div",{className:"initial-chat-screen__gift-message-text",dangerouslySetInnerHTML:{__html:e.text}}):null,n.createElement("div",{className:"initial-chat-screen__gift-message-action"},n.createElement("div",{className:"link"},u.get(584))))))))})),n.createElement("div",{className:"layout__footer layout__footer--vpadded"},e.blocker&&e.blocker.external||!e.simpleText?null:n.createElement("div",{className:"cta-box cta-box--vpadded qa-simple-text"},e.simpleText.header?n.createElement("div",{className:"cta-box__header cta-box__header--xsm",dangerouslySetInnerHTML:{__html:e.simpleText.header}}):null,n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.simpleText.text}})),p(e.invitation,e,function(t){return n.createElement("div",{className:"cta-box cta-box--vpadded"},t.smile?n.createElement(n.Fragment,null,n.createElement("div",{className:"cta-box__content cta-box__content--xsm"},t.smile.subtitle),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(d,{type:"primary",narrow:"true",extraClass:"js-send-smile",icon:n.createElement(c,{name:"generic-button-smiley",size:"sm"}),text:t.smile.button}))))):n.createElement(n.Fragment,null,t.subtitle?n.createElement("div",{className:"cta-box__header cta-box__header--xsm"},e.match?u.get(526):t.subtitle):null,t.message?n.createElement("div",{className:"cta-box__content cta-box__content--xsm"},t.message):null,t.gifts?n.createElement("div",{className:"cta-box__content cta-box__content--wide"},n.createElement("div",{className:"initial-chat-screen__gifts"},t.gifts.map(function(e,t){return n.createElement("div",{className:"initial-chat-screen__gift"},n.createElement("div",{className:"gift js-direct-gift","data-product-id":e.product_id,"data-index":t},n.createElement("div",{className:"gift__image"},n.createElement("img",{src:e.thumb_url,alt:""}))))}))):null))}),p(e.blocker,e,function(t){return t.external?e.simpleText?n.createElement("div",{className:"cta-box cta-box--vpadded qa-simple-text"},e.simpleText.header?n.createElement("div",{className:"cta-box__header cta-box__header--xsm",dangerouslySetInnerHTML:{__html:e.simpleText.header}}):null,n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.simpleText.text}}),n.createElement("div",{className:"cta-box__content cta-box__content--wide"},n.createElement("div",{className:"js-blocker qa-blocker"}))):null:n.createElement("div",{className:"js-blocker"},n.createElement("div",{className:"initial-chat-blocker qa-blocker"},n.createElement("div",{className:"cta-box"},t.photos?n.createElement(n.Fragment,null,n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--sm"},n.createElement("div",{className:"brick__icon"},n.createElement(c,{name:"badge-camera",size:"stretch"})),n.createElement("div",{className:"brick__petal brick__petal--tr initial-chat-screen-photo-blocker-badge"},n.createElement(h,{color:"notification",text:"!",shadow:"true"})))),n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:t.text}})):n.createElement(n.Fragment,null,n.createElement("div",{className:"cta-box__header cta-box__header--xsm"},t.subtitle),n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:t.text}})),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},t.criteria?n.createElement(d,{type:"criteria",text:t.actionText,narrow:"true",extraClass:"js-blocker-action",icon:n.createElement(c,{name:"generic-button-chat",size:"md"}),attrs:{"data-promo-type":t.type}}):null,t.newbie?n.createElement(d,{type:"chat-with-newbies",text:t.actionText,narrow:"true",extraClass:"js-blocker-action",icon:n.createElement(c,{name:"generic-button-chat",size:"md"}),attrs:{"data-promo-type":t.type}}):null,t.veryPopular?n.createElement(d,{type:"chat-with-tired",text:t.actionText,narrow:"true",extraClass:"js-blocker-action",icon:n.createElement(c,{name:"generic-button-chat",size:"md"}),attrs:{"data-promo-type":t.type}}):null,t.specialDelivery?n.createElement(d,{type:"special-delivery",text:t.actionText,narrow:"true",extraClass:"js-blocker-action",attrs:{"data-promo-type":t.type}}):null,t.lookalikesForeigner?n.createElement(d,{type:"green",text:t.actionText,narrow:"true",extraClass:"js-blocker-action",icon:n.createElement(c,{name:"generic-button-chat",size:"md"}),attrs:{"data-promo-type":t.type}}):null,t.quota?n.createElement(d,{type:"chat-quota",text:t.actionText,narrow:"true",extraClass:"js-blocker-action",attrs:{"data-promo-type":t.type}}):null,t.photos?n.createElement(d,{type:"green",text:t.actionText,narrow:"true",extraClass:"js-blocker-action",attrs:{"data-promo-type":t.type}}):null,t.gift?n.createElement(d,{type:"primary",text:t.actionText,narrow:"true",extraClass:"js-blocker-action",attrs:{"data-promo-type":t.type}}):null))),t.quota?n.createElement("div",{className:"cta-box__additional"},t.cost):null)),n.createElement("div",{className:"fake"}))}),e.bozo?n.createElement("div",{className:"cta-box cta-box--hpadded cta-box--vpadded qa-bozo"},n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(d,{type:"primary",narrow:"true",extraClass:"js-dismiss-screen",text:u.get(336)})),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm js-block-user"},n.createElement("span",{className:"inline-button__text"},u.get(7))))))):null,e.giftMessage?n.createElement("div",{className:"cta-box qa-open-gift"},n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(d,{type:"primary",narrow:"true",extraClass:"js-dismiss-screen",text:u.get(336)})),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm js-block-user"},n.createElement("span",{className:"inline-button__text"},u.get(7))))))):null,e.showControl?n.createElement("div",{className:"chat-v2__spacing-stub js-chat-spacing-stub"}):null))})},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(123)),c=n(i(116)),u=i(98),d=i(104),h=i(570),p=i(571),m=i(572),g=i(296),_={name:d.string.isRequired,hit:d.bool,children:d.arrayOf(d.shape({type:d.oneOf([h,p])}))},f=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).test=g.getTest(i.props.name),i.state={variation:i.test.variation,element:i.getElement()},i.update=i.update.bind((0,l.default)(i)),i}return(0,c.default)(t,e),(0,o.default)(t,[{key:"getElement",value:function(){for(var e=null,t=this.test.config&&this.test.config.variations||{},i=u.Children.toArray(this.props.children),n=0;n<i.length;n++){var a=i[n];if(a.type===p){var o=a.props.name;if("string"==typeof o){if(t[o]===this.test.variation)return a}else if(o.map(function(e){return t[e]}).includes(this.test.variation))return a}a.type===h&&(e=a)}return e}},{key:"update",value:function(){var e=this;this.mounted_&&this.setState({variation:this.test.variation,element:this.getElement()},function(){e.sendHit()})}},{key:"sendHit",value:function(){!1!==this.props.hit&&this.test.variation===this.state.variation&&this.test.hit()}},{key:"componentDidMount",value:function(){this.mounted_=!0,this.sendHit(),m.add(this.update)}},{key:"componentDidUpdate",value:function(){this.sendHit()}},{key:"componentWillUnmount",value:function(){this.mounted_=!1,m.remove(this.update)}},{key:"render",value:function(){return this.state.element||null}}]),t}(u.PureComponent);f.propTypes=_,f.defaultProps={hit:!0,children:null},e.exports=f},function(e,t,i){"use strict";var n=i(98),a=i(569),o=a.Test,s=a.Variation,r=a.Default,l=i(166),c=i(106);e.exports=i(108)("ChatInitialLikedYou",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement(o,{name:"mini-profile"},n.createElement(s,{name:"miniProfile"},n.createElement("div",{className:"layout__header"},n.createElement("div",{className:"mini-profile__spacing-stub"}))),n.createElement(r,null,n.createElement("div",{className:"layout__content"},n.createElement("div",{className:"chat-initial__user-image"},n.createElement("div",{className:"brick-wrapper brick-wrapper--xxxxlg brick-wrapper--padded"},n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch js-open-profile","data-qa":"brick"},e.userpic?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(l({src:e.userpic,width:175}),")")}}):n.createElement("div",{className:"brick__icon"},{male:n.createElement(c,{name:"avatar-placeholder-male",size:"stretch"}),female:n.createElement(c,{name:"avatar-placeholder-female",size:"stretch"}),unknown:n.createElement(c,{name:"avatar-placeholder-unknown",size:"stretch"})}[e.gender]),n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(c,{name:"badge-feature-liked-you",size:"lg",shadow:!0}))))))))),n.createElement("div",{className:"layout__content"},n.createElement("div",{className:"chat-initial__header"},n.createElement("div",{className:"chat-initial-header"},e.title),n.createElement("div",{className:"chat-invitation-simple"},e.message)),n.createElement("div",{className:"chat-initial__actions"},n.createElement("div",{className:"profile-actions"},n.createElement("div",{className:"profile-actions__item"},n.createElement("div",{className:"profile-action-button js-touchable js-vote"},n.createElement(c,{name:"floating-action-no",size:"stretch"}))),n.createElement("div",{className:"profile-actions__item"},n.createElement("div",{className:"profile-action-button js-touchable js-vote","data-yes":!0},n.createElement(c,{name:"floating-action-yes",size:"stretch"})))))))})},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(3084),s=a("CLICK"),r=".js-chat-new-message-notification",l=n.extend({rendered_:!1,events:{"click .js-chat-new-message-notification":"onClick_"},update:function(e){var t=this;this.rendered_?(e.text&&this.$(".js-chat-new-message-text").html(e.text),this.$(r).toggleClass("is-active",e.visible)):(this.$el.html(o.render(e)),this.rendered_=!0,setTimeout(function(){return t.$(r).toggleClass("is-active",e.visible)}))},onClick_:function(){this.trigger(s.CLICK)}},"ChatNewMessageView");l.ACTIONS=s,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("ChatNewMessageNotification",function(e){return n.createElement("div",{className:"chat-new-message-notification-container ".concat(e.visible?" is-active ":""," js-chat-new-message-notification")},n.createElement("div",{className:"chat-new-message-notification"},n.createElement("div",{className:"chat-new-message-notification__text js-chat-new-message-text",dangerouslySetInnerHTML:{__html:e.text}}),n.createElement("div",{className:"chat-new-message-notification__icon"},n.createElement(a,{name:"generic-chevron-up",size:"sm"}))))})},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(248),s=i(134);e.exports=i(108)("ChatInitialBlocker",function(e){return n.createElement("div",{className:"js-blocker"},n.createElement("div",{className:"initial-chat-blocker qa-blocker"},n.createElement("div",{className:"cta-box"},e.photos?n.createElement(n.Fragment,null,n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--sm"},n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"badge-camera",size:"stretch"})),n.createElement("div",{className:"brick__petal brick__petal--tr initial-chat-screen-photo-blocker-badge"},n.createElement(o,{color:"notification",text:"!",shadow:"true"})))),n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.text}})):n.createElement(n.Fragment,null,n.createElement("div",{className:"cta-box__header cta-box__header--xsm"},e.subtitle),n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.text}})),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},e.criteria?n.createElement(s,{type:"criteria",text:e.actionText,narrow:"true",extraClass:"js-blocker-action",icon:n.createElement(a,{name:"generic-button-chat",size:"md"}),attrs:{"data-promo-type":e.type}}):null,e.newbie?n.createElement(s,{type:"chat-with-newbies",text:e.actionText,narrow:"true",extraClass:"js-blocker-action",icon:n.createElement(a,{name:"generic-button-chat",size:"md"}),attrs:{"data-promo-type":e.type}}):null,e.veryPopular?n.createElement(s,{type:"chat-with-tired",text:e.actionText,narrow:"true",extraClass:"js-blocker-action",icon:n.createElement(a,{name:"generic-button-chat",size:"md"}),attrs:{"data-promo-type":e.type}}):null,e.specialDelivery?n.createElement(s,{type:"special-delivery",text:e.actionText,narrow:"true",extraClass:"js-blocker-action",attrs:{"data-promo-type":e.type}}):null,e.lookalikesForeigner?n.createElement(s,{type:"green",text:e.actionText,narrow:"true",extraClass:"js-blocker-action",icon:n.createElement(a,{name:"generic-button-chat",size:"md"}),attrs:{"data-promo-type":e.type}}):null,e.quota?n.createElement(s,{type:"chat-quota",text:e.actionText,narrow:"true",extraClass:"js-blocker-action",attrs:{"data-promo-type":e.type}}):null,e.photos?n.createElement(s,{type:"green",text:e.actionText,narrow:"true",extraClass:"js-blocker-action",attrs:{"data-promo-type":e.type}}):null,e.gift?n.createElement(s,{type:"primary",text:e.actionText,narrow:"true",extraClass:"js-blocker-action",attrs:{"data-promo-type":e.type}}):null))),e.quota?n.createElement("div",{className:"cta-box__additional"},e.cost):null)),n.createElement("div",{className:"fake"}))})},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("LookalikesBlocker",function(e){return n.createElement("div",{className:"js-blocker"},n.createElement("div",{className:"initial-chat-blocker initial-chat-blocker--no-border js-blocker js-chat-lookalikes qa-blocker"},n.createElement("div",{className:"cta-box cta-box--hpadded"},n.createElement("div",{className:"cta-box__content cta-box__content--xsm"},e.mssg),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"placard","data-qa":"lookalikes-banner"},n.createElement("div",{className:"spring-box"},n.createElement("div",{className:"spring-box__media"},n.createElement(a,{name:"connections-folder-lookalikes",size:"xxlg"})),n.createElement("div",{className:"spring-box__content"},e.text),n.createElement("div",{className:"spring-box__extra"},n.createElement("div",{className:"initial-chat-blocker__lookalikes-placard-chevron"},n.createElement(a,{name:"generic-chevron-right",size:"sm",supportsRtl:!0})))))))),n.createElement("div",{className:"fake"}))})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(134);e.exports=i(108)("ReportBlocker",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"initial-chat-blocker js-blocker js-chat-report-content qa-blocker"},n.createElement("div",{className:"cta-box cta-box--hpadded"},n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{type:"primary",extraClass:"js-report-send",attrs:e.selectedMessagesCount?{}:{disabled:!0},text:"".concat(a.get(28)," ").concat(e.selectedMessagesCount?e.selectedMessagesCount:"")})))))),n.createElement("div",{className:"fake"}))})},function(e,t,i){"use strict";var n=i(98),a=i(141).$satisfy,o=i(129),s=i(157),r=i(3089),l=o.extend({transition:!1,headerTemplate:null,createElement:function(){var e=a("div.chaton-input");return e.attr("data-qa","chaton-input"),e},onCloseComponent:function(){this.destroyComponent_=!0},onStop:function(){l._super.onStop.apply(this,arguments),this.destroyComponent_&&(this.destroyComponent_=!1,this.destroy())},show:function(){return this.parent&&this.parent.removeClass("hidden"),this},hide:function(){return this.parent&&this.parent.addClass("hidden"),this},removeContainer:function(){this.userId=null;var e=this.parent&&this.parent[0];e&&this.removeReactView(e)},renderContainer:function(){this.parent||(this.parent=this.createElement());var e=this.getParameters()||{};this.userId=e.userId||this.userId;var t=this.userId?s.getCachedClientOpenChat(this.userId):{},i=!t.messages||0===t.messages.length;e=Object.assign({isMessageFirst:i},e,t),this.renderReactView(n.createElement(r,{jinba:this.jinba,onClose:this.onCloseComponent.bind(this),activationPlace:e.activationPlace,context:e.context,streamId:e.streamId,isMessageFirst:e.isMessageFirst,deletedMember:e.deletedMember,isInitialScreen:e.isInitialScreen,onShowLoading:e.onShowLoading,onHideLoading:e.onHideLoading,needsPayment:e.needsPayment,onInputUpdate:this.onInputUpdate.bind(this),onFocusInput:e.onFocusInput,onBlurInput:e.onBlurInput,onSendSticker:e.onSendSticker,onSendGift:e.onSendGift,onSendTextMessage:e.onSendTextMessage,onClickCamera:e.onClickCamera,onSelectGif:e.onSelectGif,userId:this.userId,inputFeatures:e.inputFeatures,inputSettingsSections:e.inputSettingsSections,isNewMessageNotificationVisible:e.isNewMessageNotificationVisible,newMessageNotificationText:e.newMessageNotificationText,onClickNewMessageNotification:e.onClickNewMessageNotification}),this.parent[0])},update:function(e){this.updateParameters(e),this.renderContainer()},appendTo:function(e){this.parent||(this.parent=this.createElement()),this.parent.appendTo(e),this.renderContainer()},remove:function(){
this.userId=null,this.destroy()},getElement:function(){return this.parent},onInputUpdate:function(e){var t=e.height,i=this.getParameter("onInputUpdate");i&&(this.currentHeight_=t,i(t))},getHeight:function(){return this.currentHeight_||0}},"ChatonInputController");e.exports=l},function(e,t,i){"use strict";function n(e){w.showNotification({text:e,type:w.TYPES.ERROR})}function a(){T.track(M,{element:251})}function o(e,t){var i=e.target.scrollHeight-e.target.offsetHeight;return Math.max(1,Math.round(e.target.scrollTop*t/i))}var s=i(3),r=s(i(168)),l=s(i(127)),c=s(i(4)),u=s(i(110)),d=s(i(112)),h=s(i(114)),p=s(i(115)),m=s(i(116)),g=i(25),_=i(100),f=i(98),v=i(3090),E=i(3103),b=i(417),y=i(103),k=i(99),S=i(177),w=i(124),C=i(207),T=i(102),P=i(125),N=i(208),I=i(418),x=i(401),A=i(573),O=i(157),V=i(336),R=i(339),B=i(576),L=i(195),F=i(101),M=F.ClickEvent,D=F.ScrollElementEvent,U=F.StickerSentEvent,j=F.ViewElementEvent,G=P.getLogger("ChatonInputContainer"),q=0,H=0,z=0,Y=_.debounce(function(e,t,i){T.track(D,{direction:e,element:t,position:i})},350),$=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,h.default)(this,(0,p.default)(t).call(this,e))).state={currentMode:b.MESSAGE,messageText:x.getMessage(i.props.userId)||"",gifSearchText:"",gifs:[],isGifsLoading:!0,recentStickers:[],stickerPacks:[],giftSections:[],isGiftsLoading:!1},i.controlsRef=f.createRef(),i.bindMethods(),i.viewElementGifsTracked=!1,i.viewElementStickersTracked=!1,i.viewElementGiftsTracked=!1,i}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.props.isInitialScreen&&this.startInputPlaceholderAnimation(),this.onInputUpdate(),this.getStickers(),this.portraitMediaQuery=window.matchMedia("(orientation: portrait)"),this.portraitMediaQuery.addListener(this.onChangeViewportChange),L.on(L.EVENTS.ONLINE,this.onOnline_)}},{key:"componentDidUpdate",value:function(e,t){t.currentMode!==this.state.currentMode&&(this.onInputUpdate(),this.state.currentMode===b.MESSAGE&&this.state.messageText&&this.messageInputRef.focus(),this.state.currentMode===b.GIF&&(this.getGifs(),this.gifInputRef.focus())),t.gifSearchText!==this.state.gifSearchText&&this.getGifs(),e.isInitialScreen!==this.props.isInitialScreen&&(this.props.isInitialScreen?this.startInputPlaceholderAnimation():this.stopInputPlaceholderAnimation())}},{key:"componentWillUnmount",value:function(){L.off(L.EVENTS.ONLINE,this.onOnline_),this.stopInputPlaceholderAnimation(),this.portraitMediaQuery.removeListener(this.onChangeViewportChange)}},{key:"render",value:function(){var e=this;return this.isAllowSendChat()?this.props.deletedMember?f.createElement(E,{text:k.get(49)}):f.createElement(v,{currentMode:this.state.currentMode,controlsRef:this.controlsRef,messageInputRef:function(t){e.messageInputRef=t},messageInputPlaceholder:k.get(258),messageText:this.state.messageText,inputSettingsItems:this.getInputSettingsItems(),isSendButtonDisabled:this.getIsSendButtonDisabled(),onClickMessageInput:a,onFocusMessageInput:this.onFocusMessageInput,onBlurMessageInput:this.onBlurMessageInput,onChangeMessageText:this.onChangeMessageText,onClickSendMessage:this.onClickSendMessage,isCameraButtonDisabled:this.getIsCameraButtonDisabled(),onClickCamera:this.onClickCamera,hideExtraControlsButton:this.getHideExtraControlsButton(),onClickExtraControls:this.onClickExtraControls,onCloseExtraControls:this.onCloseExtraControls,onCloseGifSearch:this.onCloseGifSearch,gifSearchInputPlaceholder:k.get(485),noGifsResults:this.getNoGifsResultsText(),gifSearchText:this.state.gifSearchText,gifs:this.state.gifs,isGifsLoading:this.state.isGifsLoading,onScrollGifs:this.onScrollGifs,gifInputRef:function(t){e.gifInputRef=t},onFocusGifSearchInput:this.onFocusGifSearchInput,onBlurGifSearchInput:this.onBlurGifSearchInput,onChangeGifSearchText:this.onChangeGifSearchText,selectedStickerPack:this.state.selectedStickerPack,onClickStickerPackAction:this.onClickStickerPackAction,onScrollStickers:this.onScrollStickers,giftSections:this.state.giftSections,isGiftsLoading:this.state.isGiftsLoading,onScrollGifts:this.onScrollGifts,isNewMessageNotificationVisible:this.props.isNewMessageNotificationVisible,newMessageNotificationText:this.props.newMessageNotificationText,onClickNewMessageNotification:this.props.onClickNewMessageNotification}):null}},{key:"isAllowSendChat",value:function(){var e=(this.props.inputFeatures||[]).find(function(e){return 18===e.feature});return e&&e.enabled}},{key:"getInputSettingsItems",value:function(){var e=this;if(!this.props.inputSettingsSections)return[];var t=this.props.inputSettingsSections.find(function(e){return 1===e.getType()});return t?t.getItems([]).map(function(t){var i={};switch(t.getType()){case 3:i.type=b.GIF,i.onClick=e.onClickGifMode;break;case 4:if(!e.state.recentStickers.length)return null;i.type=b.RECENT_STICKERS,i.onClick=e.onClickRecentStickersMode;break;case 5:i.type=b.STICKER_PACK,i.onClick=e.onClickStickerPack,i.stickerPacks=e.state.stickerPacks||[];break;case 6:i.type=b.GIFT,i.onClick=e.onClickGiftMode}return i.isActive=e.state.currentMode===i.type,i.isDefault=t.getIsDefault(),i}).filter(function(e){return!!e}):[]}},{key:"getHeight",value:function(){return this.controlsRef.current&&this.controlsRef.current.offsetHeight||0}},{key:"showLoading",value:function(){this.props.onShowLoading&&this.props.onShowLoading()}},{key:"hideLoading",value:function(){this.props.onHideLoading&&this.props.onHideLoading()}},{key:"onMessageSent",value:function(){this.setState({currentMode:b.MESSAGE,messageText:"",gifSearchText:"",gifs:[],selectedStickerPack:null}),this.messageInputRef.focus()}},{key:"getHideExtraControlsButton",value:function(){return Boolean(this.state.messageText)}},{key:"getIsSendButtonDisabled",value:function(){return this.state.currentMode!==b.MESSAGE||!this.state.messageText.trim()}},{key:"onFocusMessageInput",value:function(e){this.onCloseExtraControls(),I.onFocus(),this.props.onFocusInput&&this.props.onFocusInput(e)}},{key:"onBlurMessageInput",value:function(e){I.onBlur(),this.props.onBlurInput&&this.props.onBlurInput(e)}},{key:"onInputUpdate",value:function(){this.props.onInputUpdate&&this.props.onInputUpdate({height:this.getHeight()})}},{key:"onChangeMessageText",value:function(e){this.onInputUpdate();var t=e.target.value;x.saveMessage(this.props.userId,t),this.setState({messageText:t}),I.onInput()}},{key:"onClickSendMessage",value:function(e){this.getIsSendButtonDisabled()||(e.preventDefault(),this.props.onSendTextMessage(this.state.messageText.trim(),{onMessageSent:this.onMessageSent}),T.track(M,{element:253}))}},{key:"onClickExtraControls",value:function(){T.track(M,{element:227});var e=this.getInputSettingsItems(),t=e.find(function(e){return e.isDefault});if(t)t.onClick();else{var i=e[0];i&&i.onClick()}}},{key:"onClickGifMode",value:function(){this.setState({currentMode:b.GIF,selectedStickerPack:null}),T.track(M,{element:250,parent_element:252}),this.viewElementGifsTracked||(T.track(j,{element:358}),this.viewElementGifsTracked=!0)}},{key:"onClickRecentStickersMode",value:function(){this.setState({currentMode:b.RECENT_STICKERS,selectedStickerPack:this.getRecentStickersPack()}),this.viewElementStickersTracked||(T.track(j,{element:268}),this.viewElementStickersTracked=!0)}},{key:"onClickGiftMode",value:function(){this.setState({currentMode:b.GIFT,selectedStickerPack:null}),0===this.state.giftSections.length&&this.setState({isGiftsLoading:!0}),this.getGifsByCurrentUserId(),this.viewElementGiftsTracked||(T.track(j,{element:32}),this.viewElementGiftsTracked=!0)}},{key:"onOnline_",value:function(){this.state.isGiftsLoading&&this.getGifsByCurrentUserId()}},{key:"getGifsByCurrentUserId",value:function(){var e=this;R.getInstance().get(this.props.userId).then(function(t){var i=(0,c.default)(t,1)[0],n=i&&i.getSections&&i.getSections([])||[];e.setState({isGiftsLoading:!1,giftSections:n.map(e.giftSectionToState)},function(){e.onInputUpdate()})}).catch(function(t){e.setState({isGiftsLoading:!L.isOnline()}),G.error("Error retrieving the Gifts",t)})}},{key:"giftSectionToState",value:function(e){return{id:e.getId(),name:e.getName(),cost:k.get(338,e.getCreditsCost()),gifts:e.getGiftProducts([]).map(this.giftProductToState)}}},{key:"giftProductToState",value:function(e){var t={id:e.getProductId(),src:e.getThumbUrl()};return t.onClick=this.onClickGift.bind(this,t),t}},{key:"onClickStickerPack",value:function(e,t){this.setState({currentMode:b.STICKER_PACK,selectedStickerPack:t}),this.viewElementStickersTracked||T.track(j,{element:268})}},{key:"onCloseExtraControls",value:function(){this.setState({currentMode:b.MESSAGE,gifSearchText:"",gifs:[],selectedStickerPack:null})}},{key:"onCloseGifSearch",value:function(){this.onCloseExtraControls(),this.setState({gifSearchText:"",gifs:[]})}},{key:"onChangeGifSearchText",value:function(e){this.setState({gifSearchText:e.target.value,isGifsLoading:!0})}},{key:"getNoGifsResultsText",value:function(){return this.state.gifSearchText?k.get(488):""}},{key:"onFocusGifSearchInput",value:function(e){this.props.onFocusInput&&this.props.onFocusInput(e)}},{key:"onBlurGifSearchInput",value:function(e){this.props.onBlurInput&&this.props.onBlurInput(e)}},{key:"getIsCameraButtonDisabled",value:function(){var e=(this.props.inputFeatures||[]).find(function(e){return 70===e.feature});return e&&!e.enabled}},{key:"onClickCamera",value:function(){this.props.needsPayment()||this.getIsCameraButtonDisabled()||(this.onCloseExtraControls(),this.props.onClickCamera&&this.props.onClickCamera())}},{key:"getGifs",value:function(){var e=this;this.setState({isGifsLoading:!0}),V.getInstance().get({query:this.state.gifSearchText}).then(function(t){e.setState({gifs:e.gifResponseToResults(t),isGifsLoading:!1})})}},{key:"gifResponseToResults",value:function(e){var t=this;return Array.isArray(e.results)?e.results.map(function(e,i){return{key:e.id,src:e.image.preview,onClick:t.onClickGifResult.bind(t,e,i)}}):[]}},{key:"onClickGifResult",value:function(e,t){if(!this.props.needsPayment()){var i=this.props,n=i.context,a=i.onSelectGif,o=i.streamId,s=i.userId,r=new S({context:n,gif:e,message:e.url,messageType:36,streamId:o,toPersonId:s});V.getInstance().cacheGif(e),a(r),T.track(M,{element:250,parent_element:358,position:t})}}},{key:"getStickers",value:function(){var e=this;B.getInstance().get().then(function(t){var i=(t=t||{}).recentStickers||[];e.setState({recentStickers:i.map(e.initSticker),stickerPacks:e.initStickerPacks(t.stickerPacks||[])})})}},{key:"initStickerPacks",value:function(e){var t=this;return e.map(function(e){var i,n=e.promoBlock&&e.promoBlock.cost||null,a=null;return n&&(a=k.get(338,n)),(0,l.default)({},e,{src:e.url,action:(i=e.promoBlock,i&&i.button?i.button.actionText:null),cost:a,stickers:e.stickers.map(t.initSticker)})})}},{key:"initSticker",value:function(e){var t=(0,l.default)({},e);return t.onClick=this.onClickSticker.bind(this,t),t}},{key:"isStickerPackLocked",value:function(e){var t=this.state.stickerPacks.find(function(t){return t.id===e});return t&&!!t.promoBlock}},{key:"onClickStickerPackAction",value:function(){var e=this,t=this.state.selectedStickerPack,i=t.promoBlock,a={cost:i.cost,feature:112,objectId:String(t.id),promoBlockType:i.promoBlockType,screenName:this.screenName};this.props.activationPlace&&(a.activationPlace=this.props.activationPlace);var o=(new C).setAction(i.button.actionType).setBack(y.getUrl()).setCost(i.cost).setFeature(i.featureType).setHotPanelData(a).setProductType(i.productType).setPurchaseTransactionSetup({featureType:112,stickerPackId:t.id});this.showLoading(),N.handleAction(o).then(function(i){e.hideLoading(),i&&(B.getInstance().unlockPack(t),e.unlockPack())}).catch(function(t){e.hideLoading(),t&&(G.error(t,o),n())})}},{key:"onClickSticker",value:function(e){var t=this;if(this.isStickerPackLocked(e.packId))this.onClickStickerPackAction();else if(!this.props.needsPayment()){var i=this.props,a=i.context,o=i.streamId,s=i.userId,r=new S({context:a,image:e,messageType:23,streamId:o,toPersonId:s},null),l=this.props.onSendSticker;this.showLoading(),O.send(s,r).then(function(i){t.hideLoading(),B.getInstance().updateRecent(e.id,t.state.selectedStickerPack),t.addStickerToRecentStickers(e),T.track(U,{activation_place:t.props.activationPlace,encrypted_user_id:s,message_first:t.props.isMessageFirst,sticker_id:String(e.id),sticker_name:t.state.selectedStickerPack.name}),l&&l(null,i)}).catch(function(e){t.hideLoading(),G.error("The sticker was not sent with success ;(",e),l?l(e):n(e.message||e)})}}},{key:"addStickerToRecentStickers",value:function(e){var t=this;this.setState(function(t){var i=t.recentStickers.findIndex(function(t){return t.id===e.id});return-1!==i&&t.recentStickers.splice(i,1),{recentStickers:[e].concat((0,r.default)(t.recentStickers))}},function(){t.state.currentMode===b.RECENT_STICKERS&&t.setState({selectedStickerPack:t.getRecentStickersPack()})})}},{key:"getRecentStickersPack",value:function(){return{id:-1,isEnabled:!0,name:"RECENT_STICKERS",hideName:!0,stickers:this.state.recentStickers}}},{key:"getCurrentStickerPack",value:function(){return this.state.currentMode===b.RECENT_STICKERS?this.getRecentStickersPack():this.state.selectedStickerPack}},{key:"unlockPack",value:function(){var e=this.getCurrentStickerPack();e&&-1!==e.id&&this.setState(function(t){var i=t.stickerPacks,n=i.findIndex(function(t){return t.id===e.id});i.splice(n,1);var a=(0,l.default)({},e,{promoBlock:null,action:null});return{selectedStickerPack:a,stickerPacks:[a].concat((0,r.default)(i))}})}},{key:"onClickGift",value:function(e){y.navigate("send-gift",{back:y.getUrl(),context:this.props.context,giftProductId:parseInt(e.id,10),onSendMessage:this.props.onSendGift,streamId:this.props.streamId,userId:this.props.userId}),T.track(M,{element:350,parent_element:32})}},{key:"startInputPlaceholderAnimation",value:function(){this.inputAnimationStarted||(this.inputAnimationStarted=!0,A.init(g(this.messageInputRef),{placeholder:k.get(258)}))}},{key:"stopInputPlaceholderAnimation",value:function(){this.inputAnimationStarted&&(A.destroy(),this.inputAnimationStarted=!1)}},{key:"onChangeViewportChange",value:function(){this.onInputUpdate()}},{key:"onScrollGifs",value:function(e){var t=function(e,t){var i=e.target.scrollWidth-e.target.offsetWidth;return Math.max(1,Math.round(e.target.scrollLeft*t/i))}(e,this.state.gifs.length);q<t&&Y(6,358,q=t)}},{key:"onScrollGifts",value:function(e){var t=o(e,this.state.giftSections.reduce(function(e,t){return t.gifts.length+e},0));z<t&&Y(5,32,z=t)}},{key:"onScrollStickers",value:function(e){var t=o(e,this.state.selectedStickerPack.stickers.length);H<t&&Y(5,268,H=t)}},{key:"bindMethods",value:function(){this.getGifs=_.debounce(this.getGifs.bind(this),666),this.onClickSendMessage=this.onClickSendMessage.bind(this),this.onMessageSent=this.onMessageSent.bind(this),this.onChangeMessageText=this.onChangeMessageText.bind(this),this.onFocusMessageInput=this.onFocusMessageInput.bind(this),this.onBlurMessageInput=this.onBlurMessageInput.bind(this),this.onClickCamera=this.onClickCamera.bind(this),this.onChangeGifSearchText=this.onChangeGifSearchText.bind(this),this.onFocusGifSearchInput=this.onFocusGifSearchInput.bind(this),this.onBlurGifSearchInput=this.onBlurGifSearchInput.bind(this),this.onClickExtraControls=this.onClickExtraControls.bind(this),this.onCloseExtraControls=this.onCloseExtraControls.bind(this),this.onCloseGifSearch=this.onCloseGifSearch.bind(this),this.onClickGifMode=this.onClickGifMode.bind(this),this.onClickRecentStickersMode=this.onClickRecentStickersMode.bind(this),this.onClickStickerPack=this.onClickStickerPack.bind(this),this.onClickGiftMode=this.onClickGiftMode.bind(this),this.onClickStickerPackAction=this.onClickStickerPackAction.bind(this),this.initSticker=this.initSticker.bind(this),this.onChangeViewportChange=this.onChangeViewportChange.bind(this),this.giftSectionToState=this.giftSectionToState.bind(this),this.giftProductToState=this.giftProductToState.bind(this),this.onScrollGifs=this.onScrollGifs.bind(this),this.onScrollStickers=this.onScrollStickers.bind(this),this.onScrollGifts=this.onScrollGifts.bind(this),this.onOnline_=this.onOnline_.bind(this)}}]),t}(f.Component);e.exports=$},function(e,t,i){"use strict";function n(e){return e!==o.MESSAGE&&e!==o.GIF}var a=i(98),o=i(417),s=i(3091),r=i(3093),l=i(3096),c=i(185),u=i(3097),d=i(3098),h=i(3099),p=i(3100),m=i(553),g=i(555),_=i(552),f=i(3101),v=i(3102),E=i(414),b=i(415),y={"data-qa":"messenger-chat-control-switcher-multimedia"},k={"data-qa":"messenger-chat-send-circle"};e.exports=function(e){var t=e.currentMode,i=e.controlsRef,S=e.messageInputRef,w=e.messageInputPlaceholder,C=e.messageText,T=e.onClickMessageInput,P=e.onFocusMessageInput,N=e.onBlurMessageInput,I=e.onChangeMessageText,x=e.onClickSendMessage,A=e.inputSettingsItems,O=e.isSendButtonDisabled,V=e.hideExtraControlsButton,R=e.onClickCamera,B=e.isCameraButtonDisabled,L=e.onClickExtraControls,F=e.onCloseExtraControls,M=e.onCloseGifSearch,D=e.gifSearchInputPlaceholder,U=e.noGifsResults,j=e.gifSearchText,G=e.onScrollGifs,q=e.gifInputRef,H=e.onFocusGifSearchInput,z=e.onBlurGifSearchInput,Y=e.onChangeGifSearchText,$=e.gifs,W=e.isGifsLoading,K=e.selectedStickerPack,Q=e.onClickStickerPackAction,X=e.onScrollStickers,Z=e.giftSections,J=e.isGiftsLoading,ee=e.onScrollGifts,te=e.newMessageNotificationText,ie=e.isNewMessageNotificationVisible,ne=e.onClickNewMessageNotification;return a.createElement(c,null,a.createElement("div",{className:"chat-v3",ref:i},a.createElement(l,{text:te,isActive:ie,onClick:ne}),a.createElement(_,{shadow:!0},t===o.GIF?a.createElement(v,{results:$,isLoading:W,noResultsText:U,onScroll:G}):null,a.createElement(d,null,a.createElement(h,null,a.createElement("div",{className:"needsclick",style:{width:"100%",height:"100%"},onClick:R},a.createElement(u,{icon:"chat-control-switcher-multimedia",color:B?"disabled":null,dataQA:y}))),t===o.GIF?a.createElement(p,null,a.createElement(g,{value:j,placeholder:D,extra:a.createElement(u,{icon:j?"elements-input-clear-inverted":"elements-input-clear",onClick:M}),onFocus:H,onChange:Y,onBlur:z,innerRef:q})):a.createElement(p,null,a.createElement(m,{value:C,placeholder:w,extra:n(t)?a.createElement(u,{icon:"elements-input-clear",onClick:F}):V?null:a.createElement(u,{icon:"chat-control-switcher-sticker",onClick:L}),onClick:T,onFocus:P,onChange:I,onBlur:N,innerRef:S})),a.createElement(h,null,a.createElement("div",{style:{width:"100%",height:"100%"},onTouchEnd:x,onClick:x},a.createElement(u,{icon:"chat-send-circle",color:O?"disabled":"active",dataQA:k})))),function(e){return e!==o.MESSAGE}(t)?a.createElement(r,{inputItems:A,selectedStickerPackId:K&&K.id}):null,n(t)&&K?a.createElement(f,{isLoading:!1},a.createElement("div",{className:"chat-drawer__wrapper",onScroll:X},a.createElement(s,{title:K.hideName?"":K.name,action:K.action,cost:K.cost,onClickAction:Q},K.stickers.map(function(e){return a.createElement(b,{key:e.id,src:e.src,onClick:e.onClick})})))):null,n(t)&&t===o.GIFT?a.createElement(f,{isLoading:J},a.createElement("div",{className:"chat-drawer__wrapper",onScroll:ee},Z.map(function(e){return a.createElement(s,{key:e.id,title:e.name,cost:e.cost},e.gifts.map(function(e){return a.createElement(E,{size:"stretch",key:e.id,src:e.src,onClick:e.onClick})}))}))):null)))}},function(e,t,i){"use strict";var n=i(98),a=i(574),o=i(3092),s=i(575);e.exports=function(e){var t=e.title,i=e.cost,r=e.action,l=e.onClickAction,c=e.children;return n.createElement(n.Fragment,null,n.createElement(o,{title:t,cost:i,action:r,onClickAction:l}),n.createElement(a,null,n.Children.map(c,function(e){return n.createElement(s,null,e)})))}},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(120).P2,s={title:a.string.isRequired,cost:a.string,action:a.string,onClickAction:a.func},r=function(e){var t=e.title,i=e.cost,a=e.action,s=e.onClickAction;return n.createElement("div",{className:"csms-showcase-heading"},n.createElement("div",{className:"csms-showcase-heading__title"},n.createElement(o,{weight:"medium",color:"black"},t)),n.createElement("div",{className:"csms-showcase-heading__extra",onClick:s},a?n.createElement(o,{weight:"medium",color:"primary"},a):null,i?n.createElement(o,{color:"gray-40"},i):null))};r.propTypes=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(417),o=i(3094),s=i(3095);e.exports=function(e){var t=e.inputItems,i=e.selectedStickerPackId;return n.createElement(o,null,t&&t.length?t.map(function(e){switch(e.type){case a.GIF:return n.createElement(s,{key:e.type,icon:{name:"chat-control-switcher-gif"},isActive:e.isActive,onClick:e.onClick});case a.RECENT_STICKERS:return n.createElement(s,{key:e.type,icon:{name:"chat-control-switcher-history"},isActive:e.isActive,onClick:e.onClick});case a.STICKER_PACK:return e.stickerPacks.map(function(t){return n.createElement(s,{key:t.id,sticker:{src:t.src},isActive:t.id===i,onClick:function(i){return e.onClick(i,t)}})});case a.GIFT:return n.createElement(s,{key:e.type,icon:{name:"chat-control-switcher-gift"},isActive:e.isActive,onClick:e.onClick});default:return null}}):null)}},function(e,t,i){"use strict";var n=i(98),a=i(104),o={children:a.node,onScroll:a.func},s=function(e){var t=e.children,i=e.onScroll;return n.createElement("div",{className:"csms-chat-panel-pills",onScroll:i},t)};s.propTypes=o,e.exports=s},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(117),s=i(120).P1,r=i(106),l=i(415),c={text:a.string,icon:a.object,sticker:a.object,isActive:a.bool,onClick:a.func},u=function(e){var t=e.text,i=e.icon,a=e.sticker,c=e.isActive,u=e.onClick,d=o({"csms-chat-panel-pills__item":!0,"csms-chat-panel-pills__item--active":c});return n.createElement("div",{className:d,onClick:u},t?n.createElement(s,{align:"center"},t):null,i?n.createElement("div",{className:"csms-chat-panel-pills__item-media"},n.createElement(r,{name:i.name,color:i.color})):null,a?n.createElement("div",{className:"csms-chat-panel-pills__item-media"},n.createElement(l,{src:a.src})):null)};u.propTypes=c,e.exports=u},function(e,t,i){"use strict";var n=i(98),a=i(117),o=i(106),s=i(120).P3;e.exports=function(e){var t=e.text,i=e.isActive,r=e.onClick,l=a({"chat-new-message-notification-container":!0,"is-active":i});return n.createElement("div",{className:l},n.createElement("div",{className:"chat-new-message-notification",onClick:r},n.createElement("div",{className:"chat-new-message-notification__text"},n.createElement(s,{dangerous:!0},t)),n.createElement("div",{className:"chat-new-message-notification__icon"},n.createElement(o,{name:"generic-chevron-up",size:"sm"}))))}},function(e,t,i){"use strict";var n=i(3),a=n(i(144)),o=n(i(107)),s=i(98),r=i(104),l=i(147),c=i(117),u=i(106),d={icon:r.string.isRequired,color:r.oneOf(["base","active","disabled"]),onClick:r.func,dataQA:l.dataQA},h=function(e){var t=e.icon,i=e.color,n=e.onClick,r=e.dataQA,l=c((0,o.default)({"csms-chat-composer-action":!0},"csms-chat-composer-action--".concat(i),i));return s.createElement("div",(0,a.default)({className:l,onClick:n},r),s.createElement(u,{name:t}))};h.propTypes=d,h.defaultProps={color:"base"},e.exports=h},function(e,t,i){"use strict";var n=i(98),a={children:i(104).node},o=function(e){var t=e.children;return n.createElement("div",{className:"csms-chat-composer-frame"},t)};o.propTypes=a,e.exports=o},function(e,t,i){"use strict";var n=i(98),a={children:i(104).node},o=function(e){var t=e.children;return n.createElement("div",{className:"csms-chat-composer-frame__action"},t)};o.propTypes=a,e.exports=o},function(e,t,i){"use strict";var n=i(98),a={children:i(104).node},o=function(e){var t=e.children;return n.createElement("div",{className:"csms-chat-composer-frame__content"},t)};o.propTypes=a,e.exports=o},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(106),s={children:a.node,isLoading:a.bool,onScroll:a.func},r=function(e){var t=e.children,i=e.isLoading,a=e.onScroll;return n.createElement("div",{className:"csms-chat-panel-drawer",onScroll:a},i?n.createElement("div",{className:"csms-chat-panel-drawer__loading"},n.createElement(o,{name:"loading-dots",size:"md"})):n.createElement(n.Fragment,null,t))};r.propTypes=s,r.defaultProps={isLoading:!0},e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(259),s=i(106),r=i(120).P1,l={results:a.arrayOf(a.shape({key:a.string.isRequired,src:a.string,onClick:a.func})),noResultsText:a.string,isLoading:a.bool,onScroll:a.func},c=function(e){var t,i=e.results,a=e.noResultsText,l=e.isLoading,c=e.onScroll;return t=i.length>0?n.createElement(o,{spacing:"md",onScroll:c},i.map(function(e){return n.createElement("img",{className:"csms-chat-panel-search-results__image",key:e.key,src:e.src,"data-qa":"gif-container-preview",onClick:e.onClick,alt:""})})):n.createElement("div",{className:"csms-chat-panel-search-results__no-results","data-qa":"gif-container-no-results"},n.createElement(r,null,a)),n.createElement("div",{className:"csms-chat-panel-search-results"},l?n.createElement("div",{className:"csms-chat-panel-search-results__loading","data-qa":"gif-container-loading"},n.createElement(s,{name:"loading-dots",size:"md"})):n.createElement(n.Fragment,null,t))};c.propTypes=l,c.defaultProps={results:[],isLoading:!0},e.exports=c},function(e,t,i){"use strict";var n=i(98);e.exports=function(e){var t=e.text;return n.createElement("div",{className:"deleted-member-notice"},t)}},function(e,t,i){"use strict";var n=i(577);e.exports=function(e){var t=this,i=e.getUnlockPromo(),a=e.getUnlockFeature();i&&i.getButtons([])[0],this.id=Number(e.getId()),this.isEnabled=!i&&!a,this.isFree=!1,this.isNew=!1,this.isSpp=!1,this.name=e.getName(),this.stickers=e.getStickers([]).map(function(e){return new n(e,t.id)}),this.url=e.getImageUrl(),this.isEnabled?this.promoBlock=null:a&&(this.promoBlock={cost:a.getPaymentAmount(),costOfService:a.getDisplayComment(),featureType:a.getFeature(),productType:a.getProductType(),promoBlockType:a.getPromoType(),button:{actionType:a.getRequiredAction(),actionText:a.getDisplayAction(),type:0}})}},function(e,t,i){"use strict";function n(e){return 2===e.getTheirVote()}function a(e,t){return e+Math.random()*(t-e)}function o(e){var t=e.getOnlineStatus(4),i=function(e){return[s(e,12),s(e,10),l(e),c(e),u(e),r(e),s(e,1)].filter(function(e){return e})}(e);return{age:e.getAge(),description1:i[0],description2:i[1],displayMessage:e.getDisplayMessage(),isLike:n(e),isMatch:e.getIsMatch(),name:e.getName(),idle:2===t,offline:4===t,online:1===t}}function s(e,t){var i=e.getProfileFields();if(i){var n=i.find(function(e){return e.getType()===t&&!e.getRequiredAction()});return n&&n.getDisplayValue()}}function r(e){var t=e.getPlacesInCommon([]).length;return t?1===t?p.get(308):p.get(307,t):null}function l(e){var t=e.getPhotoCount(),i=e.getVideoCount();if(!t&&!i)return null;var n=t?1===t?p.get(564):p.get(565,t):null,a=i?p.get(575,i):null;return t&&i?"".concat(n,", ").concat(a):n||a}function c(e){var t=e.getInterestsInCommon();return t?1===t?p.get(566):p.get(567,t):null}function u(e){var t=e.getBumpedIntoPlaces([]).length;return t?1===t?p.get(568):p.get(569,t):null}var d=i(100),h=i(109),p=i(99),m=i(3106),g=i(111),_=i(102),f=i(203),v=i(274),E=i(101),b=E.ClickEvent,y=E.GestureEvent,k=E.ScrollElementEvent,S=E.ViewElementEvent,w=E.ViewProfileEvent,C=g("ENTER_VIEW","EXIT_VIEW","PHOTO_CLICK","PROFILE_CLICK"),T=12,P=6,N=h.extend({intersectionObserver_:null,isLoaded_:null,user_:null,events:{"click .js-photo":"onPhotoClick_","click .js-profile":"onProfileClick_"},init:function(){this.onScroll_=d.debounce(this.onScroll_.bind(this),169)},enable:function(){N._super.enable.apply(this,arguments),this.updateIntersectionObserver_()},disable:function(){N._super.disable.apply(this,arguments),this.intersectionObserver_&&this.intersectionObserver_.disconnect()},render:function(e,t){var i=!this.user_||this.user_.getUserId()!==e.getUserId()||this.user_.getOnlineStatus()!==e.getOnlineStatus()||this.user_.getPhotoCount()!==e.getPhotoCount()||this.user_.getIsFavourite()!==e.getIsFavourite()||this.user_.getIsMatch()!==e.getIsMatch();if(this.user_=e,i){this.skipNextScrollEvent_=!0,this.isLoaded_=!1;var n=function(e){var t,i=e.getProfilePhoto(),n=i&&e.getProfilePhoto().getId(),a=e.getAlbums([]),s={viewSize:{width:75,height:100}};if(n){var r=a.length&&a[0].getPhotos();if(r){!function(e,t){e.forEach(function(i,n){if(i.getId()===t){var a=e.length-1;return e[n]=e[a],void(e[a]=i)}})}(r,n);var l=v.createMedia(a,s);(t=l&&l.photoOfMeCards)&&t.length>P&&(t[0].hasOverlay=!0)}else t=[v.createCard(i,s)]}return{media:t,user:o(e)}}(e);n&&n.media?(this.$el.html(m.render(n)),this.scrollToEnd_(),this.updateIntersectionObserver_(t),this.getScrollElement_().on("scroll",this.onScroll_)):(this.reset(),this.trigger(C.EXIT_VIEW,e))}else this.restoreScroll_()},update:function(e,t){this.render(e,t)},animate_:function(){var e=this,t=this.$(".js-mini-profile-heart").remove(),i=this.$(".js-hearts-animation-wrapper"),o=this.user_.getIsMatch();this.user_.getIsUnread()&&(o||n(this.user_))?(window.requestAnimationFrame(function(){i.addClass("is-overlay");for(var e=0;e<T;e++)i.append((n=t,o=void 0,s=void 0,r=void 0,l=void 0,c=void 0,o=(5+95/T*e).toFixed(2),s=a(18,40).toFixed(2),r=a(900,1100).toFixed(2),l=a(0,1200).toFixed(2),c={animationDelay:"".concat(l,"ms"),animationDuration:"".concat(r,"ms"),height:"".concat(s,"px"),left:"".concat(o,"%"),width:"".concat(s,"px")},n.clone().css(c)));var n,o,s,r,l,c}),setTimeout(function(){window.requestAnimationFrame(function(){e.$(".js-profile-icon").addClass("show-icon"),i.remove()})},2e3)):(i.remove(),(o||n(this.user_))&&this.$(".js-profile-icon").addClass("show-icon"))},updateIntersectionObserver_:function(e){if(!this.intersectionObserver_&&e){var t={rootMargin:"-".concat(e,"px")};this.intersectionObserver_=new window.IntersectionObserver(this.onIntersect_,t)}if(this.intersectionObserver_){var i=this.$(".js-scroller-element")[0];this.intersectionObserver_.disconnect(),i&&this.intersectionObserver_.observe(i)}},onIntersect_:function(e){var t=this;this.isEnabled()&&e.forEach(function(e){var i;e.isIntersecting?(t.isLoaded_?_.track(y,{gesture:5}):(t.isLoaded_=!0,i=t.user_,_.track(S,{element:661}),_.track(w,{activation_place:11,encrypted_user_id:i.getUserId(),profile_type:3}),f(t.$(".js-preload")).then(function(){return t.animate_()})),t.trigger(C.ENTER_VIEW,e.target)):t.trigger(C.EXIT_VIEW,e.target)})},getScrollWith_:function(){var e=0,t=this.getScrollElement_();return t.children().forEach(function(t){e+=t.offsetWidth}),e-t.width()},onScroll_:function(e){if(e&&e.target&&(this.scrollLeft_=e.target.scrollLeft),!this.skipNextScrollEvent_&&this.user_){var t=this.scrollLeft_/this.getScrollWith_(),i=this.user_.getAlbums()[0].getPhotos([]).length,n=i-Math.round(i*t);_.track(k,{direction:6,element:661,position:n})}else this.skipNextScrollEvent_=!1},scrollToEnd_:function(){var e=this.getScrollElement_();this.scrollLeft_="ltr"===document.getElementsByTagName("html")[0].getAttribute("dir")?this.getScrollWith_():-1*this.getScrollWith_(),e.scrollLeft(this.scrollLeft_)},restoreScroll_:function(){this.skipNextScrollEvent_=!0,this.getScrollElement_().scrollLeft(this.scrollLeft_)},getScrollElement_:function(){return this.$(".js-scroller-element")},onPhotoClick_:function(e,t){var i=t.getAttribute("data-photo-id");_.track(b,{element:21,parent_element:661}),this.trigger(C.PHOTO_CLICK,this.user_,i)},onProfileClick_:function(){_.track(b,{element:219,parent_element:661}),this.trigger(C.PROFILE_CLICK,this.user_)}},"MiniProfileView");N.EVENTS=C,e.exports=N},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(3107),function(e){function t(e,t){return e.w('<div class="mini-profile"><div class="mini-profile__scroller js-scroller-element"><div class="mini-profile-gallery">').x(t.get(["media"],!1),t,{else:i,block:n},{}).w('</div><div class="mini-profile-details js-profile"><div class="mini-profile-details__content">').s(t.get(["user"],!1),t,{block:E},{}).w('</div><div class="mini-profile-details__chevron">').h("Icon",t,{},{name:"generic-chevron-right",size:"sm",supportsRtl:"true"},"h").w('</div></div></div><div class="mini-profile-hearts-animation js-hearts-animation-wrapper"><div class="mini-profile-heart js-mini-profile-heart">').h("Icon",t,{},{
name:"generic-heart",size:"stretch"},"h").w("</div></div></div>")}function i(e,t){return e}function n(e,t){return e.w('<div class="own-media-gallery own-media-gallery--mini">').s(t.get(["media"],!1),t,{block:a},{}).w("</div>")}function a(e,t){return e.w('<div class="own-media-gallery__item').x(t.get(["isVideo"],!1),t,{else:o,block:s},{}).x(t.get(["isLoading"],!1),t,{block:r},{}).x(t.get(["isProfileImage"],!1),t,{block:l},{}).x(t.get(["isPrivate"],!1),t,{block:c},{}).x(t.get(["isProcessing"],!1),t,{block:u},{}).x(t.get(["hasOverlay"],!1),t,{else:d,block:h},{}).w('"data-user-id="').f(t.get(["userId"],!1),t,"h").w('"data-photo-id="').f(t.get(["id"],!1),t,"h").w('"data-index="').h("idx",t,{block:p},{},"h").w('"><div class="own-media-item__image js-preload"data-src="').f(t.get(["src"],!1),t,"h").w('"style="').x(t.get(["centerPercentages"],!1),t,{block:m},{}).w('"></div>').x(t.get(["isVideo"],!1),t,{block:g},{}).w('<div class="own-media-item__loading">').h("Icon",t,{},{name:"loading-dots",size:"stretch"},"h").w("</div>").x(t.get(["hasOverlay"],!1),t,{block:v},{}).w("</div>")}function o(e,t){return e.w(" own-media-gallery__item--photo")}function s(e,t){return e.w(" own-media-gallery__item--video")}function r(e,t){return e.w(" is-loading")}function l(e,t){return e.w(" own-media-item--highlight")}function c(e,t){return e.w(" own-media-item--private")}function u(e,t){return e.w(" is-processing")}function d(e,t){return e.w(" js-photo ")}function h(e,t){return e.w(" js-profile ")}function p(e,t){return e.f(t.getPath(!0,[]),t,"h")}function m(e,t){return e.w("background-position: ").f(t.getPath(!1,["centerPercentages","x"]),t,"h").w("% ").f(t.getPath(!1,["centerPercentages","y"]),t,"h").w("%")}function g(e,t){return e.x(t.get(["isProcessing"],!1),t,{else:_,block:f},{})}function _(e,t){return e.w('<div class="own-media-item__icon-video">').h("Icon",t,{},{name:"generic-media-play",size:"xsm"},"h").w("</div>")}function f(e,t){return e.w('<div class="own-media-item__overlay"></div><div class="own-media-item__loading">').h("Icon",t,{},{name:"loading-dots",size:"stretch"},"h").w("</div>")}function v(e,t){return e.w('<div class="own-media-item__overlay js-navigation" data-action="').f(t.getPath(!1,["NAVIGATION_ACTIONS","PRIVATE_PHOTOS"]),t,"h").w('"><div class="own-media-item__overlay-text">').h("t",t,{},{k:"657"},"h").w("</div></div>")}function E(e,t){return e.w('<div class="mini-profile-details__heading"><div class="mini-profile-details__heading-icon js-profile-icon">').x(t.get(["isMatch"],!1),t,{else:b,block:k},{}).w('</div><div class="mini-profile-details__heading-info"><div class="profile-user-info"><div class="profile-user-info__text"><span class="profile-user-info__name">').f(t.get(["name"],!1),t,"h").w('</span></div><div class="profile-user-info__meta">').x(t.get(["age"],!1),t,{block:S},{}).w('<span class="profile-user-info__status">').p("online-status",t,t,{}).w("</span></div></div></div></div>").x(t.get(["description1"],!1),t,{block:w},{}).x(t.get(["description2"],!1),t,{block:C},{}).x(t.get(["displayMessage"],!1),t,{block:T},{})}function b(e,t){return e.x(t.get(["isLike"],!1),t,{block:y},{})}function y(e,t){return e.h("Icon",t,{},{name:"floating-action-yes-inverted",size:"stretch"},"h")}function k(e,t){return e.h("Icon",t,{},{name:"floating-action-match",size:"stretch"},"h")}function S(e,t){return e.w('<span class="profile-user-info__age">,&nbsp;').f(t.get(["age"],!1),t,"h").w("</span>")}function w(e,t){return e.w('<div class="mini-profile-details__text">').f(t.get(["description1"],!1),t,"h").w("</div>")}function C(e,t){return e.w('<div class="mini-profile-details__text">').f(t.get(["description2"],!1),t,"h").w("</div>")}function T(e,t){return e.w('<div class="mini-profile-details__message">').f(t.get(["displayMessage"],!1),t,"h",["s"]).w("</div>")}return e.register("mini-profile",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,_.__dustBody=!0,f.__dustBody=!0,v.__dustBody=!0,E.__dustBody=!0,b.__dustBody=!0,y.__dustBody=!0,k.__dustBody=!0,S.__dustBody=!0,w.__dustBody=!0,C.__dustBody=!0,T.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.x(t.get(["online"],!1),t,{block:i},{}).x(t.get(["offline"],!1),t,{block:n},{}).x(t.get(["idle"],!1),t,{block:a},{})}function i(e,t){return e.w('<i class="online-status online-status--online"></i>')}function n(e,t){return e.w('<i class="online-status online-status--offline"></i>')}function a(e,t){return e.w('<i class="online-status online-status--idle"></i>')}return e.register("online-status",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(209),s=i(137),r=i(267);e.exports=i(108)("NavigationBar",function(e){return n.createElement(n.Fragment,null,n.createElement(s,{extraClass:r.isActive()?"js-chat-navigation-bar":e.hideUserInformation?"navigation-bar--no-background navigation-bar--static":"navigation-bar--shadow",primary:n.createElement("div",{className:"navigation-bar__icon js-navigation","data-action":e.NAVIGATION_BUTTONS.BACK,"data-qa":"navbar-back"},n.createElement(a,{name:"navigation-bar-back",supportsRtl:!0})),profile:n.createElement("div",{className:"navigation-bar__profile js-navigation js-navigation-profile ".concat(e.hideUserInformation?" navigation-bar__profile--shifted-top ":""),"data-action":e.NAVIGATION_BUTTONS.AVATAR},n.createElement("div",{className:"navigation-bar__profile-avatar"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement(o,{src:e.avatarUrl,size:70,preload:!0}))),n.createElement("div",{className:"navigation-bar__profile-info"},n.createElement("div",{className:"profile-user-info"},n.createElement("div",{className:"profile-user-info__text"},n.createElement("span",{className:"profile-user-info__name","data-qa":"profile-name"},e.userName)),n.createElement("div",{className:"profile-user-info__meta"},n.createElement("span",{className:"profile-user-info__status"},e.online?n.createElement("i",{className:"online-status online-status--online"}):"",e.offline?n.createElement("i",{className:"online-status online-status--offline"}):"",e.idle?n.createElement("i",{className:"online-status online-status--idle"}):"",e.isFullyVerified?n.createElement("span",{className:"js-profile-verification-badge","data-qa-verify-status":"full"},n.createElement(a,{name:"badge-feature-verification-full",size:"xsm"})):null)))),!e.isDeleted&&e.showStatusInfo?n.createElement("div",{className:"navigation-bar__profile-additional","data-qa":"profile-additional"},e.statusInfo):null),secondary:n.createElement(n.Fragment,null,n.createElement("div",{className:"navigation-bar__icon trigger-icon-state ".concat(e.isFavourite?" is-active ":""," js-navigation js-favourite"),"data-action":e.NAVIGATION_BUTTONS.FAVOURITE,"data-qa":"navbar-favourite"},n.createElement("div",{className:"navigation-bar__icon--active"},n.createElement(a,{name:"navigation-bar-favourite-active"})),n.createElement("div",{className:"navigation-bar__icon--base"},n.createElement(a,{name:"navigation-bar-favourite"}))),e.hideVideoCall?null:n.createElement("div",{className:"navigation-bar__icon js-navigation","data-action":e.NAVIGATION_BUTTONS.VIDEO_CALL,"data-qa":"navbar-video"},n.createElement(a,{name:"navigation-bar-video"})))}),n.createElement("div",{className:"js-mini-profile-container"}))})},function(e,t,i){"use strict";function n(e,t){t&&e.subscribe(t)}var a=i(25),o=i(5),s=i(418),r=i(211),l=i(3110),c=i(3111),u=i(158),d=i(3113);e.exports=function(e){function t(){A&&V.find(".js-gif-wrapper").html(A)}function i(){O&&V.find(".js-input-search-container").html(O)}function h(){x&&V.find(".js-input-methods").html(x.zepto)}function p(e){e.preventDefault(),e.stopPropagation(),R=!1,setTimeout(function(){R=!0},1e3);var t=B.getText().trim();t&&I.trigger(t)}function m(){x&&x.selectInputMethod("text")}function g(e){var t="gif"===e;V.toggleClass("is-chat-messaging",!t),V.toggleClass("is-chat-searching",t),N.trigger(e),_()}function _(){var e=B.getText().trim();V.find(".js-chat-send").toggleClass("is-disabled",""===e),V.find(".js-chat-input-mirror").text(e),y&&y()}var f=e.onGifInputMethodClick,v=e.onGiftInputMethodClick,E=e.onInputActivate,b=e.onInputMethodSelected,y=e.onInputUpdate,k=e.onMultimediaInputMethodClick,S=e.onStickerInputMethodClick,w=e.onSubmit,C=e.onWriting,T=e.visibility,P=e.onInputBlur,N=u();n(N,b);var I=u();n(I,w);var x,A,O,V=l.render({hasFakeInput:!o.isHTCDevice}),R=!0;h(),t(),i();var B=d({container:V.find(".js-chat-input-container"),onInputActivate:E,onWriting:C,onInput:_,onBlur:function(e){R?P&&P():(e.preventDefault(),e.stopPropagation(),B.focus())}});V.find(".js-chat-send-fake").on("focus",function(e){B.focus(),p(e)}),V.find(".js-chat-send").on("touchend",p);var L=function(e){var t=e.onGifInputMethodClick,i=e.onGiftInputMethodClick,n=e.onMultimediaInputMethodClick,a=e.onStickerInputMethodClick,o=e.selectTextInputMethod,s={gift:function(){i(),setTimeout(o,1e3)},sticker:function(){a(),setTimeout(o,1e3)},text:function(){o()},gif:function(){t()},multimedia:function(){setTimeout(function(){return o()},5e3),n()}};return function(e){s[e]()}}({onGifInputMethodClick:f,onGiftInputMethodClick:v,onMultimediaInputMethodClick:k,onStickerInputMethodClick:S,selectTextInputMethod:m});return r.on(r.ACTIONS.WAKE_UP,function(){T.visible&&a.os.ios&&s.activateIosDeviceWakeHack()}),T.onHide(m),{zepto:V,setGifZepto:function(e){A=e,t()},setInputSearchZepto:function(e){O=e,i()},onInputMethodSelected:N.subscribe,onSubmit:I.subscribe,setInputMethods:function(e){x=c({inputMethods:e,onInputMethodClick:L,onInputMethodSelected:g}),h(),m()},setMessagePlaceholder:B.setMessagePlaceholder,getText:B.getText,focusText:B.focus,focusoutText:B.focusoutText,setText:function(e){B.setText(e),_()},selectTextInputMethod:m}}},function(e,t,i){"use strict";var n=i(98),a=(i(106),i(99));e.exports=i(108)("ChatControls",function(e){return n.createElement("div",{className:"chat-controls is-chat-messaging"},n.createElement("div",{className:"js-chat-input-container"},e.chatInput&&n.createElement("div",{className:"chat-input"},n.createElement("div",{className:"chat-input__mirror js-chat-input-mirror"}),n.createElement("textarea",{id:"chat-input-textarea",className:"chat-input__textarea js-chat-input qa-input-textarea",placeholder:e.messagePlaceholder,"data-placeholder":e.messagePlaceholder}),n.createElement("label",{htmlFor:"chat-input-textarea",className:"chat-input__label"}))),n.createElement("div",{className:"chat-search"},n.createElement("div",{className:"js-gif-wrapper",type:"scroll"}),n.createElement("div",{className:"js-input-search-container"})),n.createElement("div",{className:"js-input-methods"}),n.createElement("div",{className:"chat-send js-chat-send qa-send-chat-button is-disabled"},n.createElement("b",null,a.get(32)),e.hasFakeInput?n.createElement("input",{type:"text",className:"chat-send__fake js-chat-send-fake"}):null))})},function(e,t,i){"use strict";function n(e){return e.getAttribute("data-name")}var a=i(3112),o=i(100),s=i(25);e.exports=function(e){function t(e){e!==l&&(l&&i(l,!1),i(l=e,!0),d(e))}function i(e,t){h.find(".js-input-method[data-name=".concat(e,"]")).toggleClass("is-active",t)}function r(e){var i=n(e.currentTarget);(function(e){return!o.find(c,{name:e}).enabled})(i)||(t(i),u(i))}var l,c=e.inputMethods,u=e.onInputMethodClick,d=e.onInputMethodSelected,h=a.render({inputMethods:c&&c.map(function(e){return Object.assign({icon:t=e.name},e);var t})});return h.find(".js-input-method").forEach(function(e){"multimedia"===n(e)?s(e).on("touchend",function(e){e.preventDefault(),r(e)}):s(e).on("click",r)}),{zepto:h,selectInputMethod:t}}},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("ChatSwitchers",function(e){return n.createElement("div",{className:"chat-switchers"},e.inputMethods.map(function(e){return n.createElement("div",{className:"chat-switchers__item ".concat(e.isActive?"is-active":""," js-input-method qa-chat-switcher-").concat(e.name," ").concat(e.enabled?"":"is-disabled"),"data-name":e.name,key:e.name},n.createElement(a,{size:"stretch",name:"chat-control-switcher-".concat(e.icon)}))}))})},function(e,t,i){"use strict";var n=i(100),a=i(3114),o=i(99),s=i(418);e.exports=function(e){function t(){a.render({messagePlaceholder:f},d,d.contents()),u=d.find(".js-chat-input").on("touchend",i).on("keyup",c).on("paste",n.debounce(c,300)).on("focus",r).on("blur",l)}function i(e){h&&h(e)}function r(e){s.onFocus(),h&&h(e)}function l(e){s.onBlur(),m(e)}function c(){p(),""!==u.val().trim()&&(s.onInput(),_())}var u,d=e.container,h=e.onInputActivate,p=e.onInput,m=e.onBlur,g=e.onWriting,_=g?n.debounce(g,3e3,{leading:!0}):n.noop,f=o.get(258);return t(),{setMessagePlaceholder:function(e){f=e,t()},getText:function(){return u.val()},setText:function(e){u.val(e)},focus:function(){u.focus()},blur:function(){u.blur()},focusoutText:function(){u.is(":focus")&&(u.attr("readonly","readonly"),u.attr("disabled","true"),setTimeout(function(){u.blur(),u.removeAttr("readonly"),u.removeAttr("disabled")},100))}}}},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("ChatInput",function(e){return n.createElement("div",{className:"chat-input"},n.createElement("div",{className:"chat-input__mirror js-chat-input-mirror"}),n.createElement("textarea",{id:"chat-input-textarea",className:"chat-input__textarea js-chat-input qa-input-textarea",placeholder:e.messagePlaceholder,"data-placeholder":e.messagePlaceholder}),n.createElement("label",{htmlFor:"chat-input-textarea",className:"chat-input__label"}))})},function(e,t,i){"use strict";var n=i(3)(i(127)),a=i(25),o=i(141),s=i(169),r=i(124),l=i(3116),c=i(413),u=i(157),d=i(102),h=i(101).SendPhotoInChatEvent,p=i(187),m=i(103),g=i(177),_=i(100),f=i(247),v=i(195);e.exports=function(e){function t(e){"choose"===e?A.removeAttr("capture"):A.attr("capture","camera"),A.get(0).click()}function i(e){e.target&&e.target.result?s.rotateBase64(e.target.result,y,!0).then(E):b()}function E(e){var t=e.substr(0,12);"data:base64,"===t&&(e=e.replace(t,"data:image/jpeg;base64,"));var i,n=Object.assign({result:e},k);S=i=n,m.navigate("multimedia",{blockTimer:O,id:w,source:i.result,state:c.STATES.SHARE}),O=!1,k=void 0}function b(){r.showNotification({type:r.TYPES.ERROR})}var y,k,S,w,C=e.onBeforeUpload,T=e.onSendMessage,P=e.getClientSource,N=e.getStreamId,I=o.$satisfy("form[id=photo-form][class=photo-form][action=photoUpload][method=post][enctype=multipart/form-data] input[type=file][accept=image/*][name=file]"),x=I.get(0),A=I.find("input").on("change",function(){var e=A.get(0).files[0];if(e){var t=new window.FileReader;t.onload=i,t.onerror=b,s.getOrientation(e).then(function(i){y=i,t.readAsDataURL(e)})}else b()}),O=!1,V=new p("photo-upload");return{zepto:I,uploadMultimedia:function(e){w=e,k=void 0,a.os.ios||a.os.windowsPhone?A.get(0).click():l(function(e){e&&t(e)})},uploadFromCamera:function(e,i){w=e,k=i,O=!0,t()},checkPendingMultimedia:function(){var e=function(){var e=c.getCachedMultimedia();return e&&e.visibility&&e.src?(c.invalidateCache(),e):null}();if(e){var t=S||{},i=new g({context:P(),image:e,messageType:t.messageType||19,replyToUid:t.replyToUid,streamId:N(),toPersonId:w});return S={},function(e,t){var i=new window.FormData(x);x&&x.file&&(x.file.value=""),V.start(),C&&C(e),e.setStatus(e.STATUS.SENDING),u.add(e),function e(t,i,o){var s=f(5);return s?void a.ajax({contentType:!1,data:t,dataType:"json",error:function(){v.whenOnline(function(){return e(t,i,o)})},processData:!1,success:function(e){return e&&_.isString(e.photo_id)?void o(void 0,(0,n.default)({},i,{id:e.photo_id})):void o(new Error("Invalid photo_id provided in multimedia."))},type:"POST",url:s}):void o(new Error("No upload endpoint provided."))}(i,t,function(t,i){return t?(V.stop(),void T(t)):void!function(e,t){e.image=t,function(e,t,i){u.send(e,t).then(function(e){d.track(h,{encrypted_user_id:e.toPersonId,is_selfie:30===e.messageType,photo_id:e.image.id}),i(null,e)},i)}(w,e,function(e,t){V.stop(),T(e,t)})}(e,i)})}(i,e),!0}}}}},function(e,t,i){"use strict";var n=i(202),a=i(3117);e.exports=function(e){var t=new n({preventClosing:!0});a.render({},t.el),t.$el.find(".js-option").click(function(i){t.dismiss();var n=i.currentTarget.getAttribute("data-option");e(n)}),t.show()}},function(e,t,i){"use strict";var n=i(98),a=i(99);e.exports=i(108)("Modal.multimediaUpload",function(e){return n.createElement("div",{className:"modal"},n.createElement("div",{className:"modal__item js-option","data-option":"capture"},n.createElement("div",{className:"modal-button"},n.createElement("span",{className:"modal-button__text"},a.get(74)))),n.createElement("div",{className:"modal__item js-option","data-option":"choose"},n.createElement("div",{className:"modal-button"},n.createElement("span",{className:"modal-button__text"},a.get(48)))),n.createElement("div",{className:"modal__item js-option"},n.createElement("div",{className:"modal-button modal-button--cancel"},n.createElement("span",{className:"modal-button__text"},a.get(19)))))})},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(99),s=i(137);e.exports=i(108)("NavigationBarReport",function(e){return n.createElement(s,{extraClass:"navigation-bar--shadow",primary:n.createElement("div",{className:"navigation-bar__icon js-navigation","data-action":e.NAVIGATION_BUTTONS.CANCEL_AND_BACK,"data-qa":"navbar-cancel"},n.createElement(a,{name:"navigation-bar-back"})),title:o.get(590),secondary:n.createElement("div",{className:"navigation-bar__button-text js-navigation","data-action":e.NAVIGATION_BUTTONS.CANCEL,"data-qa":"navbar-cancel"},o.get(19))})})},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(129),o=i(111),s=i(140),r=i(579),l=i(179),c=i(102),u=i(99),d=i(105),h=d.ServerErrorMessage,p=d.ClientChatMessages,m=i(101),g=m.ClickEvent,_=m.ReportEvent,f=m.ViewElementEvent,v=m.ReportContentEvent,E=i(3120),b=i(3121),y=i(3123),k=o("BACK","REPORT","BLOCKED","UPDATE_MESSAGES"),S=o("LOADING","LOADED"),w={UserScammer:516,UserRude:517,UserDislike:515,UserSpammer:463},C=a.extend({construct:function(e,t){C._super.construct.apply(this,arguments),this.chatView_=t,this.userId_=e},onStart:function(){var e=this.getView("block-or-report");e||(e=this.registerView("block-or-report",new E)).on(E.ACTIONS.NEXT,this.onNextAction_.bind(this)),c.track(f,{element:512}),e.update()},onNextAction_:function(e){var t=113;switch(e){case E.BUTTONS.REPORT:t=513,this.trigger(k.REPORT);break;case E.BUTTONS.BLOCK:t=106,this.blockUser_()}c.track(g,{element:t,parentElement:512})},blockUser_:function(){s.getInstance().addUserToFolder({uid:this.userId_,folder:9}).then(this.onBlocked_.bind(this))},onBlocked_:function(){var e=this;c.track(f,{element:520}),setTimeout(function(){e.showPromo_({mssg:u.get(608),buttons:{text:u.get(609),action:"block-user-confirmation",cancel:!0}})},500)},onBlockFinished_:function(){l.trigger(l.USER_BLOCKED,this.userId_),this.trigger(k.BLOCKED)},send:function(e){var t=this;this.selectedMessages_=e;var i=this.getView("report-variant");this.onReportLoadingStatus_(S.LOADING),i||(i=this.registerView("report-variant",new b)).on(b.ACTIONS.REASON,this.onReasonAction_,this),r.getInstance().get({reportType:4,userId:this.userId_}).then(function(e){var a=(0,n.default)(e,1)[0];t.list_={},i.update(t.getListViewItems_(a&&a.getReportType([]))),c.track(f,{element:512}),t.onReportLoadingStatus_(S.LOADED)}).catch(this.error_.bind(this))},onReasonAction_:function(e){e===b.BUTTONS.CANCEL?(this.trigger(k.BACK),c.track(g,{element:65,parentElement:512})):(this.report(e),c.track(g,{element:w[e],parentElement:512}))},report:function(e){var t=this,i={reportTypeId:this.list_[e].id,userId:this.userId_,context:10,messageIdList:this.selectedMessages_};c.track(v,{encrypted_user_id:this.userId_,count_of_content:this.selectedMessages_.length}),this.onReportLoadingStatus_(S.LOADING),r.getInstance().set(i).then(function(n){t.handleReportResponse_(n,e),c.track(_,{block_reason:i.reportTypeId,encrypted_user_id:t.userId_}),t.onReportLoadingStatus_(S.LOADED)}).catch(this.error_.bind(this))},handleReportResponse_:function(e,t){var i=this;e.forEach(function(e){if(e&&e.getPromo){var n=e.getPromo();i.showPromo_({buttons:n.getButtons([]).map(function(e){return{text:e.getText(),action:e.getAction(),isPrimary:1===e.getType(),cancel:77===e.getAction()}}),header:n.getHeader(),mssg:n.getMssg(),picture:{isThumbsUp:"UserDislike"!==t||null}});var a=518;"UserDislike"===t&&(a=519),c.track(f,{element:a})}e&&e instanceof p&&i.trigger(k.UPDATE_MESSAGES,e)})},getListViewItems_:function(e){var t=this,i=Math.floor(e.length/2);return e.map(function(e,n){var a={id:e.getUid(),content:e.getText(),isPrimary:n<i};return t.list_[e.getUid()]=a,a})},showPromo_:function(e){if(e){var t=this.getView("report-promo");t||(t=this.registerView("report-promo",new y)).on(y.ACTIONS.NEXT,this.onPromoAction_,this),t.update(e)}},onPromoAction_:function(e){if("block-user-confirmation"===e)return this.onBlockFinished_(),void c.track(g,{element:520});switch(Number(e)){case 77:c.track(g,{element:65,parentElement:518}),this.trigger(k.BACK);break;case 102:c.track(g,{element:197,parentElement:518}),this.blockUser_()}},error_:function(e){var t=null;e instanceof h&&(t=e.getErrorMessage()),this.showPromo_({header:u.get(489),mssg:t,buttons:{text:u.get(20),action:77,cancel:!0}})},onReportLoadingStatus_:function(e){this.chatView_.disableReportButton({disabled:e===S.LOADING,loading:e===S.LOADING})}},"ReportController");C.EVENTS=k,e.exports=C},function(e,t,i){"use strict";var n=i(100),a=i(226),o=i(514),s=n.extend(a.ACTIONS,{NEXT:1}),r={REPORT:"report",BLOCK:"block",CANCEL:"cancel"},l=a.extend({className:"",events:{"click .js-action":"onAction_"},onAction_:function(e,t){this.dismiss(),this.trigger(s.NEXT,t.getAttribute("data-button"))},getContentElement:function(){return o.render({BUTTONS:r})},getTitleElement:function(){return null},show:function(){l._super.show.apply(this,arguments),this.$el.parent().removeClass("modal-container").addClass("modal-wrapper")}},"BlockOrReport");l.ACTIONS=s,l.BUTTONS=r,e.exports=l},function(e,t,i){"use strict";var n=i(100),a=i(226),o=i(3122),s=n.extend(a.ACTIONS,{REASON:1}),r={CANCEL:"cancel"},l=a.extend({className:"",events:{"click .js-action":"onAction_"},update:function(e){this.buttons_=e,l._super.update.apply(this,arguments)},onAction_:function(e,t){this.dismiss(),this.trigger(s.REASON,t.getAttribute("data-button"))},getContentElement:function(){return o.render({buttons:this.buttons_,cancel:r.CANCEL})},getTitleElement:function(){return null},show:function(){l._super.show.apply(this,arguments),this.$el.parent().removeClass("modal-container").addClass("modal-wrapper")}},"ReportVariants");l.ACTIONS=s,l.BUTTONS=r,e.exports=l},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="modal">').s(t.get(["buttons"],!1),t,{block:i},{}).w('<div class="modal__item"><div class="modal-button modal-button--cancel js-action" data-button="').f(t.get(["cancel"],!1),t,"h").w('"><span class="modal-button__text">').h("t",t,{},{k:"19"},"h").w("</span></div></div></div>")}function i(e,t){return e.w('<div class="modal__item"><div class="modal-button modal-button--').x(t.get(["isPrimary"],!1),t,{else:n,block:a},{}).w(' js-action" data-button="').f(t.get(["id"],!1),t,"h").w('"><span class="modal-button__text">').f(t.get(["content"],!1),t,"h").w("</span></div></div>")}function n(e,t){return e.w("destructive")}function a(e,t){return e.w("primary")}return e.register("modal.report-variants",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(100),a=i(226),o=i(3124),s=n.extend(a.ACTIONS,{REASON:1}),r=a.extend({className:"",preventClosing_:!0,events:{"click .js-action":"onAction_"},update:function(e){this.data_=e,r._super.update.apply(this,arguments)},onAction_:function(e,t){this.dismiss(),this.trigger(s.REASON,t.getAttribute("data-action"))},dismiss:function(){r._super.dismiss.apply(this,arguments)},getContentElement:function(){return o.render(this.data_)},show:function(){r._super.show.apply(this,arguments),this.$el.parent().removeClass("modal-container").addClass("modal-wrapper")}},"ReportPromo");r.ACTIONS=s,e.exports=r},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="modal"><div class="modal__item">').s(t.get(["picture"],!1),t,{block:i},{}).x(t.get(["header"],!1),t,{block:o},{}).x(t.get(["mssg"],!1),t,{block:s},{}).w("</div>").s(t.get(["buttons"],!1),t,{block:r},{}).w("</div>")}function i(e,t){return e.w('<div class="cta-box__media">').x(t.get(["isThumbsUp"],!1),t,{else:n,block:a},{}).w("</div>")}function n(e,t){return e.h("Icon",t,{},{name:"zero-thumb-down",size:"xxlg"},"h")}function a(e,t){return e.h("Icon",t,{},{name:"zero-thumb-up",size:"xxlg"},"h")}function o(e,t){return e.w('<div class="cta-box__header">').f(t.get(["header"],!1),t,"h").w("</div>")}function s(e,t){return e.w('<div class="cta-box__content">').f(t.get(["mssg"],!1),t,"h").w("</div>")}function r(e,t){return e.w('<div class="modal__item"><div class="modal-button ').x(t.get(["cancel"],!1),t,{else:l,block:c},{}).w(' js-action" data-action="').f(t.get(["action"],!1),t,"h").w('"><span class="modal-button__text">').f(t.get(["text"],!1),t,"h").w("</span></div></div>")}function l(e,t){return e.w("modal-button--destructive")}function c(e,t){return e.w("modal-button--cancel")}return e.register("modal.report-promo",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(103),o=i(216),s=i(124),r=i(3126),l=i(159),c=i(3127),u=i(105).ProductTerms,d=l.extend({headerTemplate:null,notificationScreenAccess:3,init:function(){d._super.init.apply(this,arguments),this.registerView("view",new c).appendTo(this.parent)},onStart:function(e){d._super.onStart.apply(this,arguments);var t=e.hotPanelData,i=t&&t.existingPaymentFlowId;i&&o.trackViewTerms(i,Number(e.providerId),e.productUid),this.updateView_()},onStop:function(){d._super.onStop.apply(this,arguments),this.getView("view").empty()},updateView_:function(){var e=this,t=Number(this.getParameter("productType")),i=this.getParameter("productUid"),a=Number(this.getParameter("providerId")),o=this.getParameter("purchaseParams");this.getView("view").showLoading(),r.getInstance().get({productType:t,providerId:a,productUid:i,purchaseParams:o}).then(function(t){var i=(0,n.default)(t,1)[0];e.onModelResponse_(i),e.getView("view").hideLoading()}).catch(this.onError_.bind(this))},onModelResponse_:function(e){e instanceof u&&e.getTerms()?this.updateView("view",e.getTerms()):this.onError_()},onError_:function(){s.showNotification({type:s.TYPES.ERROR}),a.back()}},"TermsPage");e.exports=d},function(e,t,i){"use strict";var n,a=i(135),o=i(149),s=i(105).ServerGetTermsByPaymentProduct,r=a.extend({name:"Terms",getRequestMessageType:490,getResponseMessageType:181,commitCache:!1,get:function(e){var t=e.productType,i=e.providerId,n=e.productUid,a=e.purchaseParams,l=(new s).setTermsType(0).setProductType(t).setProviderId(i);return n&&l.setProductUid(n),a&&l.setPurchaseParams(a),l.setUniqueFlowId(o.get()),r._super.get.call(this,l)}},"Terms");r.getInstance=function(){return n||(n=new r)},e.exports=r},function(e,t,i){"use strict";var n=i(109),a=i(176),o=i(3128),s=n.extend({update:function(e){this.$el.html(o.render({terms:e.replace(/\n/g,"<br/>")})),this.$el.attr("data-qa","terms"),this.toggleScroll_=new a(this.$el.find(".js-scroll-toggle"))},empty:function(){return this.$el.empty(),this}},"TermsView");e.exports=s},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{title:i,block:n},{close:"true",scrollToggle:"1",scrollToggleClass:"navigation-bar--shadow"},"h").w('</div><div class="layout__content layout__content--hpadded layout__content--vpadded">').f(t.get(["terms"],!1),t,"h",["s"]).w("</div></div>")}function i(e,t){return e.h("t",t,{},{k:"141"},"h")}function n(e,t){return e}return e.register("terms",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(100),a=i(132),o=i(121),s=i(140),r=i(581),l=i(103).navigate,c=o.extend({headerTemplate:null,mainView_:null,activationPlace:26,screenName:8,clientSource:25,init:function(){c._super.init.apply(this,arguments),this.mainview_=this.registerView(new r),this.mainview_.on("navigate",this.onNavigate_,this),this.foldersModel_=new s({folderId:s.TYPES.BLOCKED})},onStart:function(){var e=this;c._super.onStart.apply(this,arguments),this.mainview_.appendTo(this.parent);var t=a.getSync(37).getEnabled();this.foldersModel_.get().catch(function(){return[]}).then(function(i){var a=n.isArray(i)&&i.length>0&&i[0].getTotalCount()>0;e.mainview_.update({showBlockedUsers:a,canManagePayments:t}),e.readyForVrt()})},onNavigate_:function(e){l(e.to)}},"Settings");e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(138),c=i(106);e.exports=i(108)("Index",function(e){return n.createElement(s,null,n.createElement(l,null,n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(107)})),n.createElement(r,null,n.createElement("div",{className:"settings-divider"}),n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"selector js-goto","data-destination":"settings-basic-info"},n.createElement("div",{className:"selector__label"},a.get(142)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))),n.createElement("div",{className:"selector js-goto","data-destination":"settings-notifications"},n.createElement("div",{className:"selector__label"},a.get(89)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))),n.createElement("div",{className:"selector js-goto","data-destination":"settings-filter"},n.createElement("div",{className:"selector__label"},a.get(25)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))),n.createElement("div",{className:"selector js-goto","data-destination":"settings-privacy"},n.createElement("div",{className:"selector__label"},a.get(91)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))),n.createElement("div",{className:"selector js-goto","data-destination":"settings-invisible-mode"},n.createElement("div",{className:"selector__label"},a.get(373)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))),n.createElement("div",{className:"selector js-goto","data-destination":"settings-interface-language"},n.createElement("div",{className:"selector__label"},a.get(509)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))),n.createElement("div",{className:"selector js-goto","data-destination":"settings-verification"},n.createElement("div",{className:"selector__label"},a.get(171)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))),n.createElement("div",{className:"selector js-goto","data-destination":"settings-account"},n.createElement("div",{className:"selector__label"},a.get(87)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"
},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))),e.canManagePayments?n.createElement("div",{className:"selector selector--no-shadow js-goto","data-destination":"settings-payments"},n.createElement("div",{className:"selector__label"},a.get(33)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))):null),n.createElement("div",{className:"settings-divider"}),n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"selector js-goto","data-destination":"settings-about"},n.createElement("div",{className:"selector__label"},a.get(86)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))),n.createElement("div",{className:"selector js-goto","data-destination":"settings-help-center"},n.createElement("div",{className:"selector__label"},a.get(234)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))),n.createElement("div",{className:"selector selector--no-shadow js-goto","data-destination":"feedback"},n.createElement("div",{className:"selector__label"},a.get(88)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0})))),e.showBlockedUsers?n.createElement(n.Fragment,null,n.createElement("div",{className:"settings-divider"}),n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"selector selector--no-shadow js-goto","data-destination":"settings-blocked-users"},n.createElement("div",{className:"selector__label"},a.get(143)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))))):null,n.createElement("div",{className:"settings-divider"})))})},function(e,t,i){"use strict";var n=i(100),a=i(99),o=i(103),s=i(113),r=i(146),l=i(121),c=i(128),u=i(3132),d=i(150),h=i(3133),p=i(219),m=i(124),g=i(341),_=i(105),f=_.User,v=_.ServerErrorMessage,E=l.BUTTONS,b=l.extend({headerTemplate:null,activationPlace:26,userName_:null,originalDob_:null,originalGender_:null,dobChangeWarned_:null,init:function(){b._super.init.apply(this,arguments),this.view_=this.registerView(new h).on(h.EVENTS.REFRESH_NAME,this.onRefreshNameRequest_,this).on(h.ACTIONS.DOB_CLICK,this.onDobClick_,this).on(h.ACTIONS.GENDER_CHANGE,this.onGenderChange_,this),this.confirmView_=this.registerView(new p).on(p.ACTIONS.YES,this.processSupportedProviders_,this).on(p.ACTIONS.NO,this.onPopupDismissed_,this),this.warnGenderView_=this.registerView(new p).on(p.ACTIONS.NO,this.renderUser_,this)},onStart:function(){b._super.onStart.apply(this,arguments),this.view_.appendTo(this.parent).showLoading(),this.dobChangeWarned_=!1},onReady:function(){var e=this;b._super.onReady.apply(this,arguments),this.getParameter("providerId")&&this.getLatestUserInfo_(this.getParameter("providerId")),c.getInstance().get({id:s.getUserId(),clientSource:this.clientSource}).then(function(t){e.user_=t,e.renderUser_()})},onParametersUpdate:function(){var e=this.getParameters(),t=g(this.currentParameters_,e);if(this.currentParameters_=e,t){var i=t.added||{};i.providerId&&this.getLatestUserInfo_(i.providerId)}},renderUser_:function(){var e=this.user_,t=e.getPersonalInfoSource(),i="";t&&(i=t.getLogoUrl(),this.currentSocialNetwork_=t.getDisplayName(),this.currentSocialNetworkId_=t.getId());var n=e.getAllowEditName(),o=e.getAllowEditGender(),s=e.getAllowEditDob(),r=e.getGender(),l=e.getDob(),c=e.getName();this.userName_=c,this.originalDob_=l,this.originalGender_=r,this.allowEditDob_=s,this.allowEditName_=n,this.view_.update({name:{value:c,allowEdit:n,logoUrl:i},birthday:{value:l,displayValue:a.getFormattedDate(l),allowEdit:s},gender:{value:r,isFemale:2===r,allowEdit:o},navigationActions:{back:!0,link:{text:a.get(30),action:E.SAVE}}}),this.view_.hideLoading(),this.readyForVrt()},onNavigationAction:function(e){if(e!==E.SAVE)return b._super.onNavigationAction.apply(this,arguments);var t=parseInt(this.view_.getGender(),10),i=this.view_.getDob(),n=this.view_.getName();this.originalDob_!==i||this.originalGender_!==t?this.updateProfile_(n,i,t):this.updateProfile_(this.view_.getName())},updateProfile_:function(e,t,i){var n=this;i=i||this.originalGender_,t=t||this.originalDob_;var a=(new f).setGender(Number(i)),s=[230];this.allowEditDob_&&(a.setDob(t),s.push(220)),this.allowEditName_&&(a.setName(e),s.push(200)),c.getInstance().set(a,s).then(function(){return o.back()}).catch(function(e){if(!(e instanceof v))throw e;var t=e.getErrorMessage(),i=e.getUserFieldErrors();i&&i.length>0&&(t=i[0].getErrorMessage()),n.onFail_(t)})},onRefreshNameRequest_:function(){this.confirmView_.update({title:a.get(245),message:a.get(246,this.currentSocialNetwork_),yesText:a.get(27),noText:a.get(19)})},onDobClick_:function(){this.dobChangeWarned_||(m.showNotification({type:m.TYPES.INFO,text:a.get(207)}),this.dobChangeWarned_=!0)},onGenderChange_:function(){var e=parseInt(this.view_.getGender(),10);this.originalGender_!==e&&this.warnGenderView_.update({message:a.get(208),yesText:a.get(144),noText:a.get(19)})},getProviderToken_:function(e){var t=this,i=null;if(n.each(e,function(e){e.getId()===t.currentSocialNetworkId_&&(i=e)}),!i)return m.showNotification({type:m.TYPES.ERROR}),void this.onPopupDismissed_();var a=r.encodeRoute("settings-basic-info",{providerId:i.getId(),displayName:i.getDisplayName()});d.login({providerType:i.getType(),providerContext:3,returnRoute:a})},processSupportedProviders_:function(){d.getSupportedProviders({providerContext:3}).then(this.getProviderToken_.bind(this),this.onFail_.bind(this)).done()},getLatestUserInfo_:function(e){return u.getInstance().get({providerId:e}).then(this.onClientInfoReceived_.bind(this),this.onFail_.bind(this))},onClientInfoReceived_:function(e,t){return e||!t?(o.navigate("settings-basic-info",!0),this.onFail_()):void this.refreshPersonalInfo_(t.getName(),t.getDob(),t.getGender())},refreshPersonalInfo_:function(e,t,i){var n=this.view_;n.setName(e),n.setDob(t),n.setGender(1===i?a.get(162):a.get(161)),o.navigate("settings-basic-info",!0)},onPopupDismissed_:function(){this.view_.hideLoading()},onFail_:function(e){this.view_.hideLoading(),m.showNotification({type:m.TYPES.ERROR,text:e||a.get(217,this.getParameter("displayName"))})}},"BasicInfo");e.exports=b},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ExternalProviderSecurityCredentials,s=a.extend({name:"LinkExternalProvider",useCache_:!1,getRequestMessageType:376,getResponseMessageType:46,get:function(){var e=(new o).setProviderType(1).setNativelyAuthenticated(!1);return s._super.get.call(this,e)}},"LinkExternalProvider");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(582),s=i(3134),r=n.extend({events:{"click .js-social-network":"onSocialNetworkClick_"},init:function(){r._super.init.apply(this,arguments),this.dobInput_=this.registerView(new o).on(o.EVENTS.FOCUS,this.onDobInputClick_,this)},onSocialNetworkClick_:function(){this.showLoading(),this.trigger(r.EVENTS.REFRESH_NAME)},onDobInputClick_:function(){this.trigger(r.ACTIONS.DOB_CLICK)},onGenderInputChange_:function(){this.syncGenderValue_(),this.trigger(r.ACTIONS.GENDER_CHANGE)},syncGenderValue_:function(){this.$(".js-gender-surrogate").text(this.$(".js-gender-select").get(0).selectedOptions[0].textContent)},getName:function(){return this.$(".js-name-input").val()},getGender:function(){return this.$(".js-gender-select").val()},getDob:function(){return this.dobInput_.value()},update:function(e){var t=e.name,i=e.birthday,n=e.gender,a=e.navigationActions;this.$el.html(s.render({name:t,gender:n,birthday:i,navigationActions:a,SexType:{MALE:1,FEMALE:2}})),this.$(".js-date-container").append(this.dobInput_.el),this.dobInput_.update({date:i.value,disabled:!i.allowEdit}),this.syncGenderValue_(),n.allowEdit&&this.$el.find(".js-gender-select").on("change",this.onGenderInputChange_.bind(this))}},"BasicInfo");r.ACTIONS=a("DOB_CLICK","GENDER_CHANGE"),r.EVENTS=a("REFRESH_NAME"),e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(138);e.exports=i(108)("BasicInfo",function(e){return n.createElement(s,null,n.createElement(l,null,n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(142)})),n.createElement(r,null,n.createElement("div",{className:"settings-data-entry"},n.createElement("form",{className:"form-uniform",action:""},n.createElement("div",{className:"control js-control"},n.createElement("div",{className:"control__error js-control-error ".concat(e.name.isInvalid?"show-error":"")},e.name.errorMessage),n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"input js-input-wrapper ".concat(e.name.value?"has-value":""," ").concat(e.name.isInvalid?" is-invalid":""),"data-field-type":e.name.type},n.createElement("input",{disabled:!e.name.allowEdit||void 0,name:"name",id:"signup-name",className:"input__field js-name-input",type:"text",defaultValue:e.name.value,autoComplete:"given-name",autoCapitalize:"words",autoCorrect:"off",spellCheck:"false"}),n.createElement("label",{className:"control__label",htmlFor:"signup-name"},a.get(66))))),n.createElement("div",{className:"control js-control js-control-birthday"},n.createElement("div",{className:"control__error js-control-error ".concat(e.birthday.isInvalid?"show-error":"")},e.birthday.errorMessage),n.createElement("div",{className:"control__field"},n.createElement("div",{className:"input js-input-wrapper has-value ".concat(e.birthday.isInvalid?" is-invalid":""),"data-field-type":e.birthday.type},n.createElement("div",{className:"input__field js-date-container"}),n.createElement("label",{className:"control__label"},a.get(65))))),n.createElement("div",{className:"control js-control"},n.createElement("div",{className:"control__error js-control-error ".concat(e.gender.isInvalid?"show-error":"")},e.gender.errorMessage),n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"select {props.field_status}"},n.createElement("select",{disabled:!e.gender.allowEdit||void 0,className:"select__field js-gender-select ".concat(e.field_focus?"is-focused":"")},n.createElement("option",{value:e.SexType.MALE,selected:e.gender.isFemale?void 0:"selected"},a.get(162)),n.createElement("option",{value:e.SexType.FEMALE,selected:e.gender.isFemale?"selected":void 0},a.get(161))),n.createElement("span",{className:"select__arrow"}),n.createElement("div",{className:"select__surrogate js-gender-surrogate"},e.gender.isFemale?a.get(161):a.get(162)),n.createElement("label",{className:"control__label"},a.get(119)))))))))})},function(e,t,i){"use strict";var n=i(100),a=i(113),o=i(374),s=i(301),r=i(99),l=i(121),c=i(128),u=i(3136),d=i(122),h=i(148),p=i(103).navigate,m=i(105),g=m.String,_=m.ServerErrorMessage,f=m.FormFailure,v=l.extend({personName_:null,profile_:null,facebookStatus_:null,mainView_:null,headerTemplate:null,activationPlace:26,screenName:29,init:function(){v._super.init.apply(this,arguments),h(this),this.mainView_=this.registerView("account-view",new u),this.mainView_.on("signout",this.onSignout_),this.mainView_.on("get-password",this.getPassword_),this.mainView_.on("forgot-password",this.forgotPassword_),this.mainView_.on("delete-account",this.deleteAccount_),this.mainView_.on("confirm-signout",this.confirmSignout_),this.mainView_.on("password-recovery",this.passwordRecovery_)},onStart:function(){var e=this;v._super.onStart.apply(this,arguments),this.mainView_.appendTo(this.parent),this.rendered_||this.mainView_.showLoading(),c.getInstance().invalidate(a.getUserId()),Promise.all([c.getInstance().get({id:a.getUserId(),clientSource:this.clientSource}),o.getLoginStatus({timeout:3e3}).catch(function(){return!1})]).spread(function(t,i){e.mainView_.hideLoading(),e.handleProfileUpdate_(t),i&&e.handleFacebookLoggedIn_(i),e.readyForVrt()})},onNavigationAction:function(e){return e===l.BUTTONS.BACK&&this.profile_.isRecoveringPassword?(this.profile_.isRecoveringPassword=!1,void this.mainView_.update(this.profile_)):void v._super.onNavigationAction.apply(this,arguments)},getNavigationBarContext:function(){return v._super.getNavigationBarContext.call(this,{title:r.get(87)})},handleProfileUpdate_:function(e){this.profile_={name:e.getName(),isAccountConfirmed:e.getAccountConfirmed()||!e.hasEmail(),contact:e.getEmail()||e.getPhone()||""},this.handleProfileCollection_()},handleFacebookLoggedIn_:function(e){this.facebookStatus_=e&&e.status,this.handleProfileCollection_()},handleProfileCollection_:function(){var e=this.profile_;e&&(e.facebookStatus=this.facebookStatus_,this.mainView_.update(e),this.rendered_=!0)},forgotPassword_:function(){return this.getPassword_(null,!0)},deleteAccount_:function(){p("settings-confirm-delete")},getPassword_:function(e,t){var i,n,a=this;t?(i=42,n=null):(i=26,n=(new g).setValue(e)),new d(i,n).on(27,this.onGetPassword_.bind(this)).on(1,function(t,i){i.sentContact=e,a.onGetPassword_(t,i)}).on(28,function(t,i){i.sentContact=e,a.onGetPassword_(t,i)}).request()},confirmSignout_:function(){this.mainView_.update(this.profile_)},passwordRecovery_:function(){this.profile_.isAccountConfirmed?this.forgotPassword_():(this.profile_.isRecoveringPassword=!0,this.mainView_.update(this.profile_))},onGetPassword_:function(e,t){this.mainView_.hideLoading();var i={passwordSent:!0,sentContact:(t=t||{}).sentContact,hasInvalidEmail:!1};e||t instanceof f||t instanceof _?(i.passwordSent=!1,i.hasInvalidEmail=!0,t instanceof f&&t.getErrors().length?i.errorMessage=t.getErrors()[0].getError():t instanceof _&&(i.errorMessage=t.getErrorMessage())):(this.profile_.isRecoveringPassword=!1,this.mainView_.confirmPasswordSent()),this.mainView_.update(n.extend(n.clone(this.profile_),i))},onSignout_:function(){s.isSupported&&s.preventSilentAccess(),a.logout()}},"Account");e.exports=v},function(e,t,i){"use strict";var n=i(100),a=i(99),o=i(109),s=i(219),r=i(124),l=i(3137),c=i(3138),u=a.get(118),d=o.extend({className:"account-page",events:{"click .js-confirm-signout":"confirmSignout_","click .js-get-password":"getPassword_","click .js-forgot-password":"passwordRecovery_","click .js-delete-account":"deleteAccount_","click .js-back":"closeCofirmAccount_"},init:function(){d._super.init.apply(this,arguments),this.registerView("confirm",new s),this.getChildView("confirm").on(s.ACTIONS.YES,this.onPopupYes_),this.getChildView("confirm").on(s.ACTIONS.NO,this.onPopupNo_),this.viewData_={invalidEmailErrorMessage:u,userProfile:{},navigationActions:{back:!0}},this.render()},onPopupYes_:function(){this.trigger("signout")},onPopupNo_:function(){},confirmSignout_:function(){var e=this.viewData_.userProfile;e.isAccountConfirmed||!n.isString(e.contact)?this.confirmSignout():this.trigger("password-recovery")},renderEmailConfirmView_:function(){this.$el.html(c.render(this.viewData_))},closeCofirmAccount_:function(){this.render()},confirmSignout:function(){this.getChildView("confirm").update({message:a.get(105)})},getPassword_:function(){var e=this.$el.find(".js-email-input");e.val()?this.trigger("get-password",e.val()):(this.$el.find(".js-input-wrapper").addClass("is-invalid"),this.$el.find(".js-control-error").addClass("show-error"))},forgotPassword_:function(e){e.preventDefault(),this.trigger("forgot-password")},deleteAccount_:function(e){e.preventDefault(),this.trigger("delete-account")},passwordRecovery_:function(e){e&&e.preventDefault&&e.preventDefault(),this.trigger("password-recovery")},confirmPasswordSent:function(){r.showNotification({type:r.TYPES.INFO,text:a.get(83,this.contactInput_?this.contactInput_.value:"")})},update:function(e){this.viewData_=n.extend(this.viewData_,{userProfile:e,facebookMessage:"connected"===e.facebookStatus}),this.viewData_.invalidEmailErrorMessage=e.errorMessage||u,this.render()},render:function(){var e=this.viewData_.userProfile;n.isEmpty(e)||(e.isRecoveringPassword?this.renderEmailConfirmView_():this.$el.html(l.render(this.viewData_)))}},"Account");e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(134),r=i(133),l=i(130),c=i(185),u=i(138),d=i(229),h=i(233);e.exports=i(108)("Account",function(e){return n.createElement(r,null,n.createElement(u,null,n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(87)})),n.createElement(l,{hpadded:!0,vpadded:!0},n.createElement("div",{className:"js-click"},n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"settings-text"},a.get(77)),n.createElement("div",{className:"display-email-address"},e.userProfile.contact)),n.createElement("div",{className:"settings-actions"},n.createElement(d,null,n.createElement(s,{type:"primary",stroke:"true",extraClass:"js-confirm-signout",text:a.get(78)}),n.createElement(s,{type:"transparent",extraClass:"js-forgot-password",text:a.get(111)}))),e.facebookMessage?n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"settings-text"},a.get(198))):null)),n.createElement(c,{hpadded:!0,vpadded:!0},n.createElement("button",{className:"inline-button js-delete-account"},n.createElement("span",{className:"inline-button__text"},a.get(190))),n.createElement(h,{text:a.get(191)})))})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(134);e.exports=i(108)("AccountConfirmEmail",function(e){return n.createElement("div",{className:"layout"},n.createElement("div",{className:"layout__header"},n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(87)})),n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded js-click"},n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"settings-text"},a.get(84))),n.createElement("div",{className:"settings-data-entry"},n.createElement("form",{className:"form-uniform",action:""},n.createElement("div",{className:"control js-control"},n.createElement("div",{className:"control__error js-control-error ".concat(e.userProfile.hasInvalidEmail?"show-error":"")},e.invalidEmailErrorMessage),n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"input js-input-wrapper ".concat(e.userProfile.contact?"has-value":""," ").concat(e.userProfile.hasInvalidEmail?" is-invalid":"")},n.createElement("input",{name:"email",className:"input__field js-email-input",type:"text",value:e.userProfile.sentContact?e.userProfile.sentContact:e.userProfile.contact}),n.createElement("label",{className:"control__label",htmlFor:"signup-name"},a.get(110))))))),n.createElement("div",{className:"settings-actions"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{type:"primary",extraClass:"js-get-password qa-button",text:a.get(90)}))))))})},function(e,t,i){"use strict";var n=i(3);t.__esModule=!0,t.default=void 0;var a=n(i(121)),o=n(i(103)),s=n(i(113)),r=n(i(102)),l=n(i(99)),c=n(i(124)),u=n(i(3140)),d=i(101),h=n(i(3142)),p=a.default.extend({headerTemplate:null,personName_:null,mainView_:null,activationPlace:26,init:function(){p._super.init.apply(this,arguments),this.mainView_=this.registerView(new u.default),this.mainView_.on("delete",this.onConfirmDelete_,this)},onStart:function(){p._super.onStart.apply(this,arguments),this.mainView_.appendTo(this.parent),new h.default(338,null).onResponse(339,this.onGetDeleteAccountInfoComplete_,this).onError(this.onGetDeleteAccountInfoError_,this).request(),this.trigger("ready")},onGetDeleteAccountInfoComplete_:function(e){var t=(e.delete_account_reasons||[]).map(function(e){return{field:e.reason_code,label:e.text}});this.mainView_.update({deleteOptions:t}),this.readyForVrt()},onGetDeleteAccountInfoError_:function(){this.mainView_.update({deleteOptions:null}),this.readyForVrt()},onConfirmDelete_:function(e){r.default.track(d.DeleteAccountEventEvent,{deleteAccountReason:e.reason_code}),new h.default(43,{reason_code:e.reason_code,text:e.text}).onResponse(337,this.onServerDeleteAccountComplete_,this).onError(this.onServerDeleteAccountError_,this).request()},onServerDeleteAccountComplete_:function(){c.default.showNotification({type:c.default.TYPES.INFO,text:l.default.get(192)}),s.default.purgeSavedLoginInfos(),s.default.logout(!0)},onServerDeleteAccountError_:function(e){this.log.error("Failed to delete account",e),o.default.back()}},"ConfirmDelete"),m=p;t.default=m,e.exports=t.default},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(109),s=i(3141),r=o.extend({textareaContainer_:null,textInput_:null,textMirror_:null,events:{"click .js-confirm-delete":"confirmDelete_","click .js-item-click":"onItemSelected_"},viewData_:{deleteOptions:[],navigationActions:{back:!0}},init:function(){r._super.init.apply(this,arguments),this.onInput_=this.onInput_.bind(this),this.onInputDebounced_=n.debounce(this.onInput_.bind(this),300),this.render()},getSelectedReason_:function(){return n.find(this.$el.find('input[name="reason"]'),function(e){return(e=a(e)).prop("checked")})},onItemSelected_:function(){var e=this.getSelectedReason_()?null:"disabled";this.$el.find(".js-confirm-delete").attr("disabled",e)},confirmDelete_:function(){var e=this.getSelectedReason_();e&&this.trigger("delete",{reason_code:e.value,text:this.textInput_.val()})},update:function(e){this.viewData_=n.extend(this.viewData_,e),this.render()},render:function(){if(!n.isEmpty(this.viewData_.deleteOptions)){var e=this.$el;e.html(s.render(this.viewData_)),this.textareaContainer_=e.find(".js-textarea-container"),this.textMirror_=e.find(".js-textarea-mirror"),this.textareaButton_=e.find(".js-textarea-button"),this.textInput_=e.find(".js-textarea-input"),this.textInput_.on("keyup",this.onInput_).on("paste",this.onInputDebounced_)}},onToggle_:function(){this.deleteOptions_.getSelected().length>0?this.deleteButton_.removeAttr("disabled"):this.deleteButton_.attr("disabled","disabled")},onInput_:function(){var e=this.textInput_.val();this.textareaContainer_.toggleClass("has-value",""!==e),this.textMirror_.html("".concat(n.escape(e),"&#x200b;")),window.scrollTo(0,this.textareaButton_.position().top+this.textareaButton_.height())}},"ConfirmDelete");e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(134),r=i(133),l=i(130),c=i(138);e.exports=i(108)("ConfirmDelete",function(e){return n.createElement(r,null,n.createElement(c,null,n.createElement(o,{back:"true",actions:e.navigationActions,logo:!1,hasShadow:!0,title:a.get(87)})),n.createElement(l,null,n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"settings-text"},a.get(195))),n.createElement("div",{className:"settings-data-entry"},n.createElement("ul",{className:"poll poll--radio"},e.deleteOptions.map(function(e){return n.createElement("li",{className:"poll__item js-item-click",key:e.field},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input",type:"radio",name:"reason",value:e.field}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.label)))})),n.createElement("form",{className:"form-uniform",action:""},n.createElement("div",{className:"control control--textarea "},n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"textarea js-textarea-container"},n.createElement("div",{className:"textarea__mirror js-textarea-mirror"}),n.createElement("textarea",{className:"textarea__field js-textarea-input",rows:"1"}),n.createElement("label",{className:"control__label"},a.get(196))))))),n.createElement("div",{className:"settings-actions js-textarea-button"},n.createElement(s,{extraClass:"js-confirm-delete",text:a.get(197),attrs:{disabled:!0}}))))})},function(e,t,i){"use strict";var n=i(294),a=i(3);t.__esModule=!0,t.default=t.SpecialEventType=t.Rpc=void 0;var o=a(i(110)),s=a(i(112)),r=a(i(114)),l=a(i(115)),c=a(i(116)),u=n(i(583));t.SpecialEventType=u.SpecialEventType;var d=a(i(3146)),h=function(e){function t(){return(0,o.default)(this,t),(0,r.default)(this,(0,l.default)(t).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"createRpcAdapter",value:function(e,t){return new d.default(e,t)}}]),t}(u.default);t.Rpc=h;var p=h;t.default=p},function(e,t,i){"use strict";var n=i(3);t.__esModule=!0,t.RpcAdapter=void 0;var a=n(i(110)),o=n(i(112)),s=function(){function e(t,i){(0,a.default)(this,e),this.errorSubscribersCalled=!1,this.rpcRequest=this.createRpcRequest(t,i),this.errorSubscribers=[],this.responseSubscribers=[],this.specialEventSubscribers=[]}return(0,o.default)(e,[{key:"request",value:function(){this.errorSubscribersCalled=!1,this.rpcRequest.request()}},{key:"abort",value:function(){this.rpcRequest.abort()}},{key:"onResponse",value:function(e,t,i){var n=this,a=function(e,a){e?n.isRpcError(e)&&n.processRpcError(n.getRpcError(e)):t.call(i,a)};this.responseSubscribers.push({messageType:e,messageCallback:t,handler:a,context:i}),this.rpcRequest.on(e,a)}},{key:"offResponse",value:function(e,t,i){for(var n=this.responseSubscribers.length-1;n>=0;n--){var a=this.responseSubscribers[n];a.messageType===e&&a.messageCallback===t&&a.context===i&&(this.rpcRequest.un(e,a.handler),this.responseSubscribers.splice(n,1))}}},{key:"onSpecialEvent",value:function(e,t,i){var n=this.getSpecialEventType(e);if(n){var a=function(){t.call(i)};this.specialEventSubscribers.push({type:e,eventCallback:t,handler:a,context:i}),this.rpcRequest.on(n,a)}}},{key:"offSpecialEvent",value:function(e,t,i){var n=this.getSpecialEventType(e);if(n)for(var a=this.specialEventSubscribers.length-1;a>=0;a--){var o=this.specialEventSubscribers[a];o.type===e&&o.eventCallback===t&&o.context===i&&(this.rpcRequest.un(n,o.handler),this.specialEventSubscribers.splice(a,1))}}},{key:"onError",value:function(e,t){this.errorSubscribers.push({errorCallback:e,context:t})}},{key:"offError",value:function(e,t){this.errorSubscribers=this.errorSubscribers.filter(function(i){return!(i.errorCallback===e&&i.context===t)})}},{key:"processRpcError",value:function(e){this.errorSubscribersCalled||(this.errorSubscribers.forEach(function(t){t.errorCallback.call(t.context,e)}),this.errorSubscribersCalled=!0)}}]),e}();t.RpcAdapter=s},function(e,t,i){"use strict";var n;t.__esModule=!0,t.RpcErrorType=void 0,t.RpcErrorType=n,function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NETWORK=1]="NETWORK",e[e.PARSE_ERROR=2]="PARSE_ERROR",e[e.HANDLER_UNSATISFIED=3]="HANDLER_UNSATISFIED",e[e.OFFLINE=4]="OFFLINE",e[e.ABORTED=5]="ABORTED"}(n||(t.RpcErrorType=n={}))},function(e,t,i){"use strict";var n;t.__esModule=!0,t.SpecialEventType=void 0,t.SpecialEventType=n,function(e){e[e.REQ_END=0]="REQ_END",e[e.REQ_BEFORE_SEND=1]="REQ_BEFORE_SEND",e[e.REQ_DONE=2]="REQ_DONE",e[e.REQ_SERVED=3]="REQ_SERVED",e[e.REQ_FINISHED=4]="REQ_FINISHED"}(n||(t.SpecialEventType=n={}))},function(e,t,i){"use strict";var n=i(3);t.__esModule=!0,t.default=t.MWRpcAdapter=void 0;var a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(116)),c=n(i(122)),u=i(3147),d=i(583),h=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(0,r.default)(t).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"createRpcRequest",value:function(e,t){return new c.default(e,new u.GpbMessagePlain(e,t)).setPlain(!0)}},{key:"getSpecialEventType",value:function(e){switch(e){case d.SpecialEventType.REQ_BEFORE_SEND:return c.default.SpecialEvent.ON_REQ_BEFORE_SEND;case d.SpecialEventType.REQ_DONE:return c.default.SpecialEvent.ON_REQ_DONE;case d.SpecialEventType.REQ_END:return c.default.SpecialEvent.ON_REQ_END;case d.SpecialEventType.REQ_SERVED:case d.SpecialEventType.REQ_FINISHED:return c.default.SpecialEvent.ON_REQ_FIRED}}},{key:"getRpcError",value:function(e){var t=e.getBody();switch(e.getType()){case c.default.ErrorType.XHR:return{type:d.RpcErrorType.NETWORK,status:t?t.status:void 0};case c.default.ErrorType.PARSE_ERROR:return{type:d.RpcErrorType.PARSE_ERROR};case c.default.ErrorType.HANDLER_UNSATISFIED:return{type:d.RpcErrorType.HANDLER_UNSATISFIED};case c.default.ErrorType.OFFLINE:return{type:d.RpcErrorType.OFFLINE};case c.default.ErrorType.ABORTED:return{type:d.RpcErrorType.ABORTED,status:t?t.status:void 0,url:t?t.url:void 0}}return{type:d.RpcErrorType.UNKNOWN}}},{key:"isRpcError",value:function(e){return Boolean(e.getType&&e.getBody)}}]),t}(d.RpcAdapter);t.MWRpcAdapter=h;var p=h;t.default=p},function(e,t,i){"use strict";var n=i(3);t.__esModule=!0,t.GpbMessagePlain=void 0;var a=n(i(110)),o=n(i(112)),s=i(457),r=function(){function e(t,i){(0,a.default)(this,e),this.$gpb="",this.data=null,this.background=!1,this.version=1,this.data=i,this.messageType=t}return(0,o.default)(e,[{key:"isValid",value:function(){return this.validate()}},{key:"validate",value:function(){return!0}},{key:"toString",value:function(){return'<GpbMessagePlain name="'.concat(this.$gpb,'" type="').concat(this.messageType,'" data="').concat(JSON.stringify(this.data),'">')}},{key:"toJSON",value:function(){var e={message_type:this.messageType};return this.data&&(e[this.resolveMessageBodyKey(this.messageType)]=this.data),{body:[e],message_id:this.messageId,message_type:this.messageType,version:this.version,is_background:this.background}}},{key:"setMessageId",value:function(e){return this.messageId=e,this}},{key:"setIsBackground",value:function(e){return this.background=e,this}},{key:"resolveMessageBodyKey",value:function(e){var t=s.MessageBodyMapping[e];if(!t)throw new Error("MessageBody doesn't have field for message type = ".concat(e));return t}}]),e}();t.GpbMessagePlain=r},function(e,t,i){"use strict";var n=i(98),a=i(121),o=i(3149),s=a.extend({activationPlace:42,screenName:35,clientSource:41,onStart:function(){s._super.onStart.apply(this,arguments),this.reactViewId_=this.renderReactView(n.createElement(o,{onLogError:this.log.error.bind(this.log)}),this.parent[0])},onStop:function(){s._super.onStop.apply(this,arguments),this.removeReactView(this.reactViewId_)}},"NotificationsPage");e.exports=s},function(e,t,i){"use strict";function n(){f.back()}function a(e){f.navigate("settings-notifications-detail",(0,s.default)({},e,{field:e.setting.category}))}var o=i(3),s=o(i(127)),r=o(i(4)),l=o(i(110)),c=o(i(112)),u=o(i(114)),d=o(i(115)),h=o(i(123)),p=o(i(116)),m=i(98),g=i(196),_=i(124),f=i(103),v=i(3150),E=function(e){function t(e){var i;return(0,l.default)(this,t),(i=(0,u.default)(this,(0,d.default)(t).call(this,e))).state={sections:[],isLoading:!0},i.onError=i.onError.bind((0,h.default)(i)),i}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;g.getInstance().get().then(function(t){var i=(0,r.default)(t,1)[0].getNotificationsMenu().getSections([]).map(function(e){return{items:e.getItems([]).map(function(e){return{name:e.getName(),text:e.getText(),setting:e.getNotificationSetting().toJSON()}})}});e.setState({sections:i,isLoading:!1})}).catch(this.onError)}},{key:"render",value:function(){return m.createElement(v,{sections:this.state.sections,isLoading:this.state.isLoading,onNavigateBack:n,onItemClick:a})}},{key:"onError",value:function(e){e instanceof Error&&this.props.onLogError(e),_.showNotification({type:_.TYPES.ERROR})}}]),t}(m.Component);e.exports=E},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(335),s=i(133),r=i(138),l=i(130),c=i(170),u=i(223),d=i(182),h=i(198),p=i(181),m=i(106);e.exports=function(e){var t=e.sections,i=e.isLoading,g=e.onNavigateBack,_=e.onItemClick;return i?n.createElement(o,null):n.createElement(s,null,n.createElement(r,null,n.createElement(c,{position:"fixed",shadow:!0},n.createElement(d,null,n.createElement(p,{name:"navigation-bar-back",onClick:g})),n.createElement(u,{text:a.get(89)}),n.createElement(h,null)),n.createElement(c,null)),n.createElement(l,null,n.createElement("div",{className:"settings-block"
},t.map(function(e){return e.items.map(function(e){return n.createElement("div",{className:"settings-item",key:e.name,onClick:function(){return _(e)},"data-qa-inapp":e.setting.send_inapp,"data-qa-push":e.setting.send_cloud_push,"data-qa-email":e.setting.send_email},n.createElement("label",{className:"settings-item__label"},e.name,n.createElement("div",{className:"settings-item__label--secondary"},e.text)),n.createElement("div",{className:"selector__icon selector__icon--chevron-right"},n.createElement(m,{name:"generic-chevron-right",size:"sm",supportsRtl:!0})))})}))))}},function(e,t,i){"use strict";var n=i(98),a=i(121),o=i(3152),s=a.extend({activationPlace:42,screenName:35,clientSource:41,onStart:function(){s._super.onStart.apply(this,arguments);var e=this.getParameter("name"),t=this.getParameter("setting");this.reactViewId_=this.renderReactView(n.createElement(o,{title:e,setting:t,onLogError:this.log.error.bind(this.log)}),this.parent[0])},onStop:function(){s._super.onStop.apply(this,arguments),this.removeReactView(this.reactViewId_)}},"NotificationsDetail");e.exports=s},function(e,t,i){"use strict";function n(){h.back()}var a=i(3),o=a(i(110)),s=a(i(112)),r=a(i(114)),l=a(i(115)),c=a(i(123)),u=a(i(116)),d=i(98),h=i(103),p=i(196),m=i(3153),g=i(105),_=g.AppSettings,f=g.NotificationSetting,v=function(e){function t(e){var i;(0,o.default)(this,t);var n=(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).props.setting||{};return i.state={sendInapp:n.send_inapp,sendPush:n.send_cloud_push,sendEmail:n.send_email},i.onInappToggle=i.onInappToggle.bind((0,c.default)(i)),i.onPushToggle=i.onPushToggle.bind((0,c.default)(i)),i.onEmailToggle=i.onEmailToggle.bind((0,c.default)(i)),i.save=i.save.bind((0,c.default)(i)),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return d.createElement(m,{title:this.props.title,switches:this.state,onInappToggle:this.onInappToggle,onPushToggle:this.onPushToggle,onEmailToggle:this.onEmailToggle,onNavigateBack:n})}},{key:"onInappToggle",value:function(){this.setState({sendInapp:!this.state.sendInapp},this.save)}},{key:"onPushToggle",value:function(){this.setState({sendPush:!this.state.sendPush},this.save)}},{key:"onEmailToggle",value:function(){this.setState({sendEmail:!this.state.sendEmail},this.save)}},{key:"save",value:function(){var e=this,t=(new f).setType(16).setCategory(this.props.setting.category);void 0!==this.state.sendPush&&t.setSendCloudPush(this.state.sendPush),void 0!==this.state.sendEmail&&t.setSendEmail(this.state.sendEmail),void 0!==this.state.sendInapp&&t.setSendInapp(this.state.sendInapp);var i=(new _).setNotificationSettings([t]);p.getInstance().set(i).catch(function(t){e.props.onLogError("Error while saving notification settings: ",t)})}}]),t}(d.Component);e.exports=v},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(133),s=i(138),r=i(130),l=i(170),c=i(223),u=i(182),d=i(198),h=i(181);e.exports=function(e){var t=e.title,i=e.switches,p=e.onInappToggle,m=e.onPushToggle,g=e.onEmailToggle,_=e.onNavigateBack;return n.createElement(o,null,n.createElement(s,null,n.createElement(l,{position:"fixed",shadow:!0},n.createElement(u,null,n.createElement(h,{name:"navigation-bar-back",onClick:_})),n.createElement(c,{text:t}),n.createElement(d,null)),n.createElement(l,null)),n.createElement(r,null,n.createElement("div",{className:"settings-block"},void 0!==i.sendInapp?n.createElement("div",{className:"settings-item",onClick:p},n.createElement("div",{className:"settings-item__label"},a.get(376)),n.createElement("div",{className:"settings-item__action settings-item__action--centered"},n.createElement("div",{className:"switcher"},n.createElement("input",{type:"checkbox",checked:i.sendInapp,readOnly:!0}),n.createElement("label",{className:"needsclick"})))):null,void 0!==i.sendPush?n.createElement("div",{className:"settings-item",onClick:m},n.createElement("div",{className:"settings-item__label"},a.get(376)),n.createElement("div",{className:"settings-item__action settings-item__action--centered"},n.createElement("div",{className:"switcher"},n.createElement("input",{type:"checkbox",checked:i.sendPush,readOnly:!0}),n.createElement("label",{className:"needsclick"})))):null,void 0!==i.sendEmail?n.createElement("div",{className:"settings-item",onClick:g},n.createElement("div",{className:"settings-item__label"},a.get(375)),n.createElement("div",{className:"settings-item__action settings-item__action--centered"},n.createElement("div",{className:"switcher"},n.createElement("input",{type:"checkbox",checked:i.sendEmail,readOnly:!0}),n.createElement("label",{className:"needsclick"})))):null)))}},function(e,t,i){"use strict";function n(){return[{element:null,label:s.get(108),name:"PrivacyShowDistance",privacySettingName:1},{element:null,label:s.get(240),name:"PrivacyShowInPublicSearch",privacySettingName:8},{element:null,label:s.get(224),name:"PrivacyShowInSearchResults",privacySettingName:4},{element:null,label:s.get(109),name:"PrivacyShowOnlineStatus",privacySettingName:2},{element:null,label:s.get(247),name:"PrivacyBumpedInto",privacySettingName:3},{element:null,label:s.get(261),name:"LetOtherUsersShareMyProfile",privacySettingName:5},{element:469,label:s.get(563),name:"PrivacyShowMeInLookalikes",privacySettingName:10}]}var a=i(3)(i(4)),o=i(100),s=i(99),r=i(103),l=i(184),c=i(102),u=i(121),d=i(3155),h=i(196),p=i(140),m=i(128),g=i(105).AppSettings,_=i(101),f=_.ClickEvent,v=_.UpdatePrivacySettingsEvent,E=u.extend({mainView_:null,headerTemplate:null,activationPlace:26,screenName:34,init:function(){E._super.init.apply(this,arguments),this.mainView_=this.registerView(new d({el:this.parent.get(0)})),this.mainView_.on(d.EVENTS.CLICK,this.onSettingClick_,this),this.mainView_.on(d.EVENTS.LINK,this.onLinkClick_,this),this.mainView_.on(d.EVENTS.GOTO,this.onLinkClick_,this),this.mainView_.render()},onStart:function(){var e=this;E._super.onStart.apply(this,arguments),h.getInstance().get().then(function(t){var i=(0,a.default)(t,1)[0];return e.onAppSettings_(i)}).catch(function(t){e.log.error("Error while fetching AppSettings for Privacy Settings: ",t),r.back()})},onStop:function(){E._super.onStop.apply(this,arguments),h.getInstance().invalidate()},onAppSettings_:function(e){var t=n().reduce(function(t,i){return e["has".concat(i.name)]&&e["has".concat(i.name)]()&&t.push({field:i.name,label:i.label,value:e["get".concat(i.name)]()}),t},[]);this.mainView_.update({privacySettings:t,isAdsEnabled:l.isEnabled()}),this.readyForVrt()},onSettingClick_:function(e){var t,i,a=this,s=e.field,r=e.value,l=new g;l["set".concat(s)](r),t=s,(i=n().find(function(e){return e.name===t}))&&i.element&&c.track(f,{element:i.element,screen_name:8}),h.getInstance().set(l).then(function(){return e=l,p.getInstance().invalidateAll(),m.getInstance().invalidateAll(),void n().forEach(function(t){var i="get".concat(t.name),n=e[i]&&e[i]();o.isBoolean(n)&&c.track(v,{privacy_setting_name:t.privacySettingName,privacy_setting_status:n})});var e}).catch(function(e){a.log.error("Error while saving privacy settings for ".concat(s," (value: ").concat(r,"): "),e)})},onLinkClick_:function(e){r.navigate(e)}},"PrivacyPage");e.exports=E},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(111),s=i(109),r=i(3156),l=i(99),c=o("CLICK","LINK","GOTO"),u=s.extend({events:{"click .js-click":"onClick_","click .js-goto":"onGoto_","click .js-link":"onOpenLink_"},viewData_:{privacySettings:[],navigationActions:{back:!0},privacyPolicy:l.get(156,"","privacy","class=underlined",""),termsAndConditions:l.get(157,"","terms","class=underlined","","terms","class=underlined","","")},render:function(){this.$el.html(r.render(this.viewData_))},update:function(e){this.viewData_=n.extend(this.viewData_,e),this.render()},onClick_:function(e,t){var i=(t=a(t)).find(".js-checkbox");return i.prop("checked",!i.prop("checked")),this.trigger(c.CLICK,{field:t.data("field"),value:i.prop("checked")}),!1},onGoto_:function(e,t){this.trigger(c.GOTO,t.getAttribute("data-destination"))},onOpenLink_:function(e,t){return e.preventDefault(),t=a(t),this.trigger(c.LINK,t.find("a").attr("href")),!1}},"Privacy");u.EVENTS=c,e.exports=u},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(138),c=i(106);e.exports=i(108)("Privacy",function(e){return n.createElement(s,null,n.createElement(l,null,n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(91)})),n.createElement(r,null,n.createElement("div",{className:"settings-block"},e.privacySettings.map(function(e){return n.createElement("div",{className:"settings-item js-click","data-field":e.field,key:e.field},n.createElement("div",{className:"settings-item__label"},e.label),n.createElement("div",{className:"settings-item__action settings-item__action--centered"},n.createElement("div",{className:"switcher"},n.createElement("input",{type:"checkbox",id:e.field,"data-key":e.field,name:e.field,className:"js-checkbox",defaultChecked:!!e.value||void 0}),n.createElement("label",{className:"needsclick"}))))}),e.isAdsEnabled?n.createElement("div",{className:"selector js-goto","data-destination":"settings-privacy-ads"},n.createElement("div",{className:"selector__label"},a.get(692)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(c,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))):null),n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"settings-text","data-qa":"settings-privacy-text-using"},n.createElement("b",null,a.get(158))),n.createElement("div",{className:"settings-text js-link","data-qa":"settings-privacy-text-policy",dangerouslySetInnerHTML:{__html:e.privacyPolicy}}),n.createElement("div",{className:"settings-text js-link","data-qa":"settings-privacy-text-terms",dangerouslySetInnerHTML:{__html:e.termsAndConditions}}))))})},function(e,t,i){"use strict";var n=i(98),a=i(142).waitForPageTransitionFinish,o=i(121),s=i(196),r=i(3158),l=o.extend({headerTemplate:null,screenName:502,onStart:function(){var e=this;this.renderReactView(n.createElement(r,{readyForVrt:function(){return e.readyForVrt()},navigationBack:function(){return e.onNavigationAction(o.BUTTONS.BACK)}}),this.parent[0]),l._super.onStart.apply(this,arguments)},onStop:function(){var e=this;l._super.onStop.apply(this,arguments),a(function(){e.removeReactView(e.parent[0])}),s.getInstance().invalidate()}},"PrivacyAdsPage");e.exports=l},function(e,t,i){"use strict";function n(e){e.preventDefault();var t=e.target.getAttribute("href");t&&function(e){switch(e){case"terms":E.track(T,{element:161}),_.navigate(e);break;case"privacy":E.track(T,{element:202}),_.navigate(e)}}(t)}var a=i(3),o=a(i(107)),s=a(i(127)),r=a(i(4)),l=a(i(110)),c=a(i(112)),u=a(i(114)),d=a(i(115)),h=a(i(123)),p=a(i(116)),m=i(98),g=i(99),_=i(103),f=i(3159),v=i(165),E=i(102),b=i(125),y=i(149),k=i(196),S=i(140),w=i(128),C=i(105).AppSettings,T=i(101).ClickEvent,P=b.getLogger("PrivacyAdsContainer"),N=function(e){function t(e){var i;return(0,l.default)(this,t),(i=(0,u.default)(this,(0,d.default)(t).call(this,e))).state={privacySettings:{},sortedSettings:[]},i.onAppSettings=i.onAppSettings.bind((0,h.default)(i)),i.onItemClick=i.onItemClick.bind((0,h.default)(i)),i}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;k.getInstance().get().then(function(t){var i=(0,r.default)(t,1)[0];return e.onAppSettings(i)}).catch(function(e){P.error("Error while fetching AppSettings for Privacy Settings Ads: ",e),_.back()})}},{key:"onAppSettings",value:function(e){var t=this,i=[{element:667,labelHeader:g.get(688),labelText:g.get(689),name:"PrivacyEnableTargetedAds"},{element:668,labelHeader:g.get(690),labelText:g.get(691),name:"PrivacyAdsState"}].reduce(function(t,i){if(e["has".concat(i.name)]&&e["has".concat(i.name)]()){var n,a=e["get".concat(i.name)](),o=!0;"PrivacyAdsState"===i.name?o=n=1===e.getPrivacyAdsState():n=a;var s={field:i.name,labelHeader:i.labelHeader,labelText:i.labelText,element:i.element,value:a,checked:n,enabled:o};t.sortedSettings.push(i.name),t.privacySettings[i.name]=s}return t},{privacySettings:{},sortedSettings:[]});this.setState((0,s.default)({},i),function(){t.props.readyForVrt()})}},{key:"onItemClick",value:function(e){var t=this;y.generate(),this.trackFieldClick(e);var i,n=this.state.privacySettings[e];n&&n.enabled&&("PrivacyAdsState"!==e?this.setState({privacySettings:(0,s.default)({},this.state.privacySettings,(0,o.default)({},e,(0,s.default)({},n,{value:!n.value})))},function(){var i=t.state.privacySettings[e],n=new C;n["set".concat(e)](i.value),k.getInstance().set(n).then(function(){return S.getInstance().invalidateAll(),void w.getInstance().invalidateAll()}).catch(function(t){P.error("Error while saving privacy settings for ".concat(e," (value: ").concat(i.value,"): "),t)})}):1===n.value&&(i={productType:1,back:_.getUrl(),hotPanelData:{activationPlace:308}},v.navigateToPayment(i)))}},{key:"trackFieldClick",value:function(e){var t=this.state.privacySettings[e];t&&E.track(T,{element:t.element})}},{key:"render",value:function(){var e=this,t=this.state.sortedSettings.map(function(t){var i,n=e.state.privacySettings[t];return i="PrivacyAdsState"===t?1===n.value:n.value,(0,s.default)({},n,{checked:i})}),i=g.get(156,"","privacy","class=underlined",""),a=g.get(157,"","terms","class=underlined","","terms","class=underlined","","");return m.createElement(f,{privacySettings:t,onItemClick:this.onItemClick,onLegalTextClick:n,navigationBack:this.props.navigationBack,privacyPolicy:i,termsAndConditions:a})}}]),t}(m.Component);e.exports=N},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(3160),s=i(133),r=i(138),l=i(130),c=i(170),u=i(223),d=i(182),h=i(181);e.exports=function(e){var t=e.privacySettings,i=e.onItemClick,p=e.navigationBack,m=e.privacyPolicy,g=e.termsAndConditions,_=e.onLegalTextClick;return n.createElement(s,null,n.createElement(r,null,n.createElement(c,{position:"fixed"},n.createElement(d,null,n.createElement(h,{name:"navigation-bar-back",onClick:p})),n.createElement(u,{text:a.get(692)})),n.createElement(c,null)),n.createElement(l,null,n.createElement("div",{className:"settings-block"},t.map(function(e){return n.createElement(o,{key:e.field,field:e.field,labelHeader:e.labelHeader,labelText:e.labelText,isChecked:e.checked,isDisabled:!e.enabled,onClick:i})})),n.createElement("div",{className:"settings-block",onClick:_},n.createElement("div",{className:"settings-text","data-qa":"settings-privacy-text-using"},n.createElement("b",null,a.get(158))),n.createElement("div",{className:"settings-text js-link","data-qa":"settings-privacy-text-policy",dangerouslySetInnerHTML:{__html:m}}),n.createElement("div",{className:"settings-text js-link","data-qa":"settings-privacy-text-terms",dangerouslySetInnerHTML:{__html:g}}))))}},function(e,t,i){"use strict";var n=i(98),a=i(117);e.exports=function(e){var t=e.field,i=e.labelHeader,o=e.labelText,s=e.isChecked,r=e.isDisabled,l=e.onClick,c=a({"settings-item":!0,"settings-item--disabled":r});return n.createElement("div",{className:c,"data-field":t,onClick:function(){return l(t)}},n.createElement("div",{className:"settings-item__label"},i,n.createElement("div",{className:"settings-item__label--secondary"},o)),n.createElement("div",{className:"settings-item__action settings-item__action--centered"},n.createElement("div",{className:"switcher"},n.createElement("input",{type:"checkbox",id:t,"data-key":t,name:t,className:"js-checkbox",checked:s,disabled:r,readOnly:!0}),n.createElement("label",{className:"needsclick"}))))}},function(e,t,i){"use strict";var n=i(100),a=i(132),o=i(99),s=i(165),r=i(103),l=i(102),c=i(149),u=i(121),d=i(3162),h=i(196),p=i(140),m=i(128),g=i(113),_=i(105).AppSettings,f=i(101).UpdateInvisibleSettingsEvent,v=[{name:"PrivacyConcealMyPresence",label:o.get(365)},{name:"PrivacyDontListMe",label:o.get(366)},{name:"PrivacyDontShowSpp",label:o.get(367)}],E={PrivacyConcealMyPresence:1,PrivacyDontListMe:2,PrivacyDontShowSpp:3},b=u.extend({mainView_:null,headerTemplate:null,activationPlace:26,screenName:116,init:function(){b._super.init.apply(this,arguments),this.mainView_=this.registerView(new d),this.mainView_.on(d.EVENTS.CLICK,this.onSettingClick_,this),this.mainView_.render(),this.mainView_.appendTo(this.parent)},onStart:function(){var e=this;b._super.onStart.apply(this,arguments),h.getInstance().get().then(function(t){e.onAppSettings_(t[0])}).catch(function(t){e.log.error("Error while fetching AppSettings for Invisible M0de Settings: ",t),r.back()})},onAppSettings_:function(e){if(e instanceof _){var t=v.reduce(function(t,i){return e["has".concat(i.name)]&&e["has".concat(i.name)]()&&t.push({field:i.name,label:i.label,value:e["get".concat(i.name)]()}),t},[]);this.mainView_.update({invisibleModeSettings:t}),this.readyForVrt()}},onSettingClick_:function(e){var t=this,i=e.field,o=e.value,s=e.invisibleModeSettings,r=a.getSync(19);if(!n.isEmpty(r)){c.generate();var l=r.getEnabled();l?this.saveSetting_(s).then(function(){p.getInstance().invalidateFolder(8),m.getInstance().invalidate(g.getUserId()),t.sendHotPanelEvent_(i,o,l)}):this.handleNoSppUser_()}},saveSetting_:function(e){var t=this,i=new _;return n.each(e,function(e){i["set".concat(e.field)](e.value)}),h.getInstance().set(i).catch(function(e){t.log.error("Error while saving invisibility settings for (appSettings: %o): ",i,e)})},sendHotPanelEvent_:function(e,t,i){var n={spp_status:i};E[e]?(n.invisible_setting_name=E[e],n.invisible_setting_status=t):this.logger.warn("Unknown invisibility settings to set for HP event: ",{field:e,value:t,sppStatus:i}),l.track(f,n)},handleNoSppUser_:function(){var e={productType:1,back:r.getUrl(),promoBlockType:37};s.navigateToPayment(e)}},"InvisibleModeSettings");e.exports=b},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(111),s=i(109),r=i(3163),l=o("CLICK","LINK"),c=s.extend({events:{"click .js-click":"onClick_"},viewData_:{invisibleModeSettings:[],navigationActions:{back:!0}},render:function(){this.$el.html(r.render(this.viewData_))},update:function(e){this.viewData_=n.extend(this.viewData_,e),this.render()},onClick_:function(e,t){var i=(t=a(t)).find(".js-checkbox");i.prop("checked",!i.prop("checked"));var n=this.$el.find(".js-checkbox").map(function(e,t){return{field:t.name,value:t.checked}});return this.trigger(l.CLICK,{field:t.data("field"),value:i.prop("checked"),invisibleModeSettings:n}),!1}},"InvisibleModeView");c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(138);e.exports=i(108)("InvisibleMode",function(e){return n.createElement(s,null,n.createElement(l,null,n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(373)})),n.createElement(r,null,n.createElement("div",{className:"settings-block"},e.invisibleModeSettings.map(function(e){return n.createElement("div",{className:"settings-item js-click","data-field":e.field,key:e.field},n.createElement("div",{className:"settings-item__label"},e.label),n.createElement("div",{className:"settings-item__action settings-item__action--centered"},n.createElement("div",{className:"switcher"},n.createElement("input",{type:"checkbox",id:e.field,"data-key":e.field,name:e.field,className:"js-checkbox",defaultChecked:!!e.value||void 0}),n.createElement("label",{className:"needsclick"}))))})),n.createElement("div",{className:"settings-text"},a.get(368))))})},function(e,t,i){"use strict";var n=i(121),a=i(323),o=i(99),s=i(196),r=i(197),l=i(26),c=n.extend({headerTemplate:null,activationPlace:26,getNavigationBarContext:function(){return c._super.getNavigationBarContext.call(this,{title:o.get(509)})},init:function(){c._super.init.apply(this,arguments),this.interfaceLanguageView_=this.registerView(new a).on(a.EVENTS.LANGUAGE_SELECT,this.setInterfaceLanguage_,this)},onStart:function(){c._super.onStart.apply(this,arguments),this.interfaceLanguageView_.appendTo(this.parent),this.render_()},render_:function(){var e={navigationBar:this.getNavigationBarContext(),languages:l.getSupportedLanguages(),selectedLanguage:l.getCurrentLanguageId()};this.interfaceLanguageView_.render(e),this.readyForVrt()},setInterfaceLanguage_:function(e){var t=this;e!==l.getCurrentLanguageId()&&(this.interfaceLanguageView_.showLoading(),s.getInstance().updateLanguage(e).then(function(){l.redirect(e)},function(i){t.handleError_({error:i,retry:function(){return t.setInterfaceLanguage_(e)}})}))},handleError_:function(e){var t=e.error,i=e.retry,n=r.handleError({error:t,screenName:this.getScreenName(),navigationBar:this.getNavigationBarContext()});if(!n)throw t;n.on(n.EVENTS.REFRESH,i)}},"InterfaceLanguage");e.exports=c},function(e,t,i){"use strict";var n=i(99),a=i(121),o=i(3166),s=i(196),r=i(105).AppSettings,l=[{name:"VerificationOnlyVerifiedMessages",label:n.get(172)},{name:"VerificationHideDetails",label:n.get(173)}],c=a.extend({headerTemplate:null,mainView_:null,activationPlace:26,init:function(){c._super.init.apply(this,arguments),this.mainView_=this.registerView("view",new o),this.mainView_.on(o.EVENTS.CLICK,this.onSettingClick_,this),this.mainView_.render(),this.mainView_.appendTo(this.parent)},onStart:function(){var e=this;c._super.onStart.apply(this,arguments),s.getInstance().fetch().then(function(t){e.onAppSettings_(t[0])}).catch(function(t){e.log.error("Error while fetching AppSettings for Verification Settings: ",t)})},onAppSettings_:function(e){var t=l.reduce(function(t,i){return e["has".concat(i.name)]&&e["has".concat(i.name)]()&&t.push({field:i.name,label:i.label,value:e["get".concat(i.name)]()}),t},[]);this.mainView_.update({verificationSettings:t}),this.readyForVrt()},onSettingClick_:function(e){var t=this,i=e.field,n=e.value,a=new r;a["set".concat(i)](n),s.getInstance().set(a).catch(function(e){t.log.error("Error while saving Verification Settings for ".concat(i," (value: ").concat(n,"): "),e)})}},"VerificationPage");e.exports=c},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(109),s=i(111),r=i(3167),l=s("CLICK"),c=o.extend({events:{"click .js-click":"onClick_"},viewData_:{verificationSettings:[],navigationActions:{back:!0}},init:function(){c._super.init.call(this)},render:function(){this.$el.html(r.render(this.viewData_))},update:function(e){this.viewData_=n.extend(this.viewData_,e),this.render()},onClick_:function(e,t){var i=(t=a(t)).find(".js-checkbox");return i.prop("checked",!i.prop("checked")),this.trigger(l.CLICK,{field:t.data("field"),value:i.prop("checked")}),!1}},"Verification");c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(138);e.exports=i(108)("Verifications",function(e){return n.createElement(s,null,n.createElement(l,null,n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(171)})),n.createElement(r,null,n.createElement("div",{className:"settings-block"},e.verificationSettings.map(function(e){return n.createElement("div",{className:"settings-item js-click","data-field":e.field,key:e.field},n.createElement("div",{className:"settings-item__label"},e.label),n.createElement("div",{className:"settings-item__action settings-item__action--centered"},n.createElement("div",{className:"switcher"},n.createElement("input",{type:"checkbox",id:e.field,"data-key":e.field,name:e.field,className:"js-checkbox",defaultChecked:!!e.value||void 0}),n.createElement("label",{className:"needsclick"}))))}))))})},function(e,t,i){"use strict";function n(){var e=window.location.hostname;(e.startsWith("mqa.")||-1!==e.indexOf(".mshot."))&&(window.DEBUG?o.set("flag",null,{expiryDays:-1}):o.set("flag","dev"),window.location.reload())}var a=i(121),o=i(7),s=i(3169),r=i(136),l=a.extend({mainView_:null,headerTemplate:null,activationPlace:26,createElement:function(){return r({className:"settings-about"})},init:function(){l._super.init.apply(this,arguments),this.mainView_=this.registerView(new s).on(s.EVENTS.ENABLE_DEBUG,n)},onStart:function(){l._super.onStart.apply(this,arguments),this.mainView_.update().appendTo(this.parent),this.readyForVrt()}},"About");e.exports=l},function(e,t,i){"use strict";var n=i(100),a=i(126),o=i(109),s=i(99),r=i(3170),l=i(111),c=5,u=l("ENABLE_DEBUG"),d=o.extend({viewData_:{aboutData:{},footerText:s.get(794,(new Date).getFullYear()),navigationActions:{back:!0},partner_id:a.get("partner_id")},events:{"click .js-click":"onClickInfo_"},onClickInfo_:function(){--c<=0&&this.trigger(u.ENABLE_DEBUG)},update:function(){var e={},t=window._badoo_webapp_version;return e.version=s.get(1,t),window.DEBUG&&(e.build=window._badoo_webapp_build,e.hostname=a.get("api.defaultHostname")),n.isEqual(e,this.viewData_.aboutSettings)||(this.viewData_=n.extend(this.viewData_,{aboutData:e}),this.render()),this},render:function(){this.$el.html(r.render(this.viewData_))}},"About");d.EVENTS=u,e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(185),c=i(138),u=i(233);e.exports=i(108)("AboutApp",function(e){return n.createElement(s,null,n.createElement(c,null,n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(86)})),n.createElement(r,{hpadded:!0,vpadded:!0,align:"center"},n.createElement("div",{className:"js-click"},n.createElement("svg",{className:"about-app__logo"},n.createElement("use",{xlinkHref:"#logo-".concat(e.partner_id)})),n.createElement("div",{className:"about-app__info-main"},e.aboutData.version),n.createElement("div",{className:"about-app__info-extra"},n.createElement(n.Fragment,null,e.aboutData.build?n.createElement(n.Fragment,null,"`build: $",e.aboutData.build,"`",n.createElement("br",null)):null,e.aboutData.hostname?"hostname: ".concat(e.aboutData.hostname):null)),n.createElement("div",{className:"about-app__info-extra"},a.get(3)))),n.createElement(l,{hpadded:!0,vpadded:!0},n.createElement(u,{text:e.footerText})))})},function(e,t,i){"use strict";var n=i(175),a=i(121),o=i(3172),s=i(527),r=a.extend({headerTemplate:null,activationPlace:26,screenName:9,init:function(){r._super.init.apply(this,arguments),this.searchCriteriaController_=this.registerController(new s({searchType:1,enableAgeCriteria:!0,enableDistanceCriteria:!0})).on(s.EVENTS.INITIALIZED,this.onFilterInitialized_,this),this.filterPageView_=new o({filterElement:this.searchCriteriaController_.element}),this.filterPageView_.render({navigationBar:this.getNavigationBarContext()})},onFilterInitialized_:function(){this.filterPageView_.hideLoading(),this.readyForVrt()},onStart:function(){r._super.onStart.apply(this,arguments),this.filterPageView_.appendTo(this.parent),this.searchCriteriaController_.filterInitialized||this.filterPageView_.showLoading()},onStop:function(){r._super.onStop.apply(this,arguments),this.filterPageView_.hideLoading(),this.searchCriteriaController_.save().then(function(){return n.getInstance().invalidateAll()})}},"FilterPage");e.exports=r},function(e,t,i){"use strict";var n=i(109),a=i(3173);e.exports=n.extend({render:function(e){var t=a.render(e);this.$el.html(t),this.$el.find(".js-content").append(this.options.filterElement)}})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(138);e.exports=i(108)("FilterPage",function(e){return n.createElement(s,null,n.createElement(l,null,n.createElement(o,{back:"true",title:a.get(25)})),n.createElement(r,{hpadded:!0,vpadded:!0},n.createElement("div",{className:"js-content"})))})},function(e,t,i){"use strict";var n=i(103),a=i(121),o=i(331),s=i(3175),r=i(105).SearchType,l=a.extend({headerTemplate:null,type_:null,locationView_:null,activationPlace:26,init:function(){var e=this;l._super.init.apply(this,arguments),this.locationView_=new s({el:this.parent[0]}),this.registerView("locationView",this.locationView_),this.locationView_.on(s.EVENTS.CHANGE,function(t){o.getInstance().get(t).then(function(t){return e.locationView_.update(t)})})},onStart:function(){var e=this;l._super.onStart.apply(this,arguments),this.type_=parseInt(this.getParameter("searchType"),10),this.type_=r.isValid(this.type_)?this.type_:1,o.getInstance().getUserCity(this.type_).then(function(t){return e.updateUserCity_(t)})},updateUserCity_:function(e){this.locationView_.render({name:e.name},this.type_,1===this.type_),this.readyForVrt()},onNavigationAction:function(e){var t=this,i=o.getInstance();if(e===a.BUTTONS.BACK)return l._super.onNavigationAction.apply(this,arguments);var s=this.locationView_.getCurrentCity();s&&s.id&&(this.locationView_.showLoading(),i.setUserCity(i.getCityProto(s),this.type_).then(function(){t.locationView_.hideLoading(),n.back()}).catch(function(e){t.log.error(e),n.back()}))}},"LocationPage");e.exports=l},function(e,t,i){"use strict";var n=i(109),a=i(581),o=i(100),s=i(25),r=i(111),l=i(99),c=i(3176),u=i(584),d=r("CHANGE"),h=r("SAVE"),p=a.Location=n.extend({events:{"click .js-city-item":"onSelect_","click .js-input-clear":"onClear_"},cities_:null,defaultCity_:null,update:function(e){this.cities_=e,this.$(".js-locations-list").html(u.render({cities:e})),this.onFocus_()},render:function(e,t,i){var n=this;this.reset_(e,t,i);var a=c.render(this.getViewData_()),s=a.find("input");s[0].addEventListener("input",o.throttle(this.onChange_,350)),s.on("focus",function(){return n.onFocus_()}),this.$el.html(a)},getCurrentCity:function(){return this.selectedCity_},getViewData_:function(){return{NAVIGATION_ACTIONS:h,navigationActions:{back:!0},location:{isLoading:!1,isInvalid:!1,city:this.defaultCity_,type:this.type_},currentCity:this.defaultCity_.name&&this.defaultCity_,cities:this.cities_}},onFocus_:function(){this.$(".js-locations-list").removeClass("hidden")},onClear_:function(){this.$el.find("input").val("").focus(),this.reset_(null,this.type_)},onSelect_:function(e,t){var i=s(t).data();this.selectedCity_=i,this.$(".js-locations-list").addClass("hidden"),this.$("input").val(this.selectedCity_.name)},onChange_:function(e){this.trigger(d.CHANGE,e.target.value)},reset_:function(e,t,i){e?(this.defaultCity_={name:i?l.get(259,e.name):e.name,id:e.id},this.selectedCity_=this.defaultCity_):this.defaultCity_={name:null,id:null},this.cities_=[],this.type_=t}});p.EVENTS=d,e.exports=p},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(138),c=i(106);e.exports=i(108)("Location",function(e){return n.createElement(s,null,n.createElement(l,null,n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(106),secondary:n.createElement("div",{className:"navigation-bar__button-text js-navigation","data-action":e.NAVIGATION_ACTIONS.SAVE,"data-qa":"navbar-location-save"},a.get(30))})),n.createElement(r,null,n.createElement("div",{className:"settings-data-entry"},n.createElement("div",{className:"form-uniform"},n.createElement("div",{className:"control control--location js-control"},n.createElement("div",{className:"control__error js-control-error ".concat(e.location.isInvalid?" show-error ":"")},e.location.errorMessage),n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"input js-input-wrapper ".concat(e.location.city.name?" has-value ":""," ").concat(e.location.isLoading?" is-loading ":""," ").concat(e.location.isInvalid?" is-invalid ":""),"data-field-type":e.location.type},n.createElement("div",{className:"input__icon"},n.createElement("div",{className:"input__icon-pointer"},n.createElement(c,{name:"elements-input-location",size:"sm"})),n.createElement("div",{className:"input__icon-cancel js-input-clear"},n.createElement(c,{name:"elements-input-clear",size:"sm"})),n.createElement("div",{className:"input__icon-loader"},n.createElement(c,{name:"loading-dots",size:"md"}))),n.createElement("input",{name:"location",id:"signup-location",className:"input__field",type:"location",defaultValue:e.location.city.name}),n.createElement("label",{className:"control__label",htmlFor:"signup-location"},a.get(188)))),n.createElement("ul",{className:"control__extra hidden js-locations-list"},n.createElement(n.Fragment,null,e.currentCity?n.createElement("li",{"data-id":e.currentCity.id,"data-name":e.currentCity.name,className:"js-city-item"},e.currentCity.name):null,e.cities.map(function(e){
return n.createElement("li",{"data-id":e.id,"data-name":e.name,className:"js-city-item",key:e.id},e.name)}))))))))})},function(e,t,i){"use strict";var n,a=i(100),o=i(25),s=i(126),r=i(99),l=i(5),c=i(113),u=i(103),d=i(121),h=i(381),p=i(3178),m=i(124),g=i(341),_=i(136),f="feedback",v=d.extend({headerTemplate:null,category_:null,activationPlace:26,categories_:null,feedbackToSubmit_:null,sendingFeedback_:!1,rating_:null,createElement:function(){return _({qaAttribute:"feedback"})},init:function(){v._super.init.apply(this,arguments),(n=l.supportsXHRFileUpload)&&4!==s.get("platform")&&o.os.android&&(n=!1),this.registerView(f,new p({webUpload:n,header:!1!==this.header})).on(p.ACTIONS.SELECT_CATEGORY,this.onSelectCategory_,this).on(p.ACTIONS.SEND_FEEDBACK,this.onSendFeedback_,this).on(p.ACTIONS.NAVIGATE,this.onNavigate_,this)},onStart:function(e){var t=this;v._super.onStart.apply(this,arguments);var i=this.getParameter("category");return this.feedbackToSubmit_&&this.category_?i=this.category_:e&&a.isNumber(e.rating)&&(this.setupRatingFeedback_(e.rating),i=h.TYPES.STAR_RATING),this.fetchCategories_().then(function(e){t.categories_=e,t.updateViews_(i),t.getView(f).appendTo(t.parent),t.readyForVrt()}).catch(this.log.error)},onReady:function(){v._super.onReady.apply(this,arguments),this.feedbackToSubmit_&&this.category_&&this.getView(f).sendFeedback()},getRatingPlaceholder_:function(e){return e<=1?r.get(220):2===e?r.get(221):r.get(222)},setupRatingFeedback_:function(e){this.rating_=e,this.categories_={},this.categories_[h.TYPES.STAR_RATING]={id:h.TYPES.STAR_RATING,value:r.get(219),placeholder:this.getRatingPlaceholder_()}},fetchCategories_:function(){return this.categories_?Promise.resolve(this.categories_):h.getInstance().get().catch(this.log.error)},getNavigationBarContext:function(){return v._super.getNavigationBarContext.call(this,{title:r.get(88)})},onSelectCategory_:function(e){u.navigate("feedback",{category:e.id||null}),this.updateViews_(e.id)},onSendFeedback_:function(e){if(!this.sendingFeedback_){if(this.sendingFeedback_=!0,this.getView(f).showLoading(),this.feedbackToSubmit_={category:this.category_,email:e.email,message:e.feedback,name:e.name,rating:this.rating_,screenshot:null},a.isString(e.email)&&e.email.length>0){this.feedbackToSubmit_.email=e.email;var t=c.getUser();this.feedbackToSubmit_.name=e.name&&e.name.length>0?e.name:t&&t.getName()}if(n&&null!==e.screenshot){var i=new window.FileReader,o=e.screenshot;return o?(i.onload=a.bind(this.onFileLoaded_,this),i.onerror=a.bind(this.onScreenshotError_,this),void i.readAsDataURL(o)):void this.onScreenshotError_()}this.submitFeedback_()}},submitFeedback_:function(){var e=this;h.getInstance().set(this.feedbackToSubmit_).then(function(){return e.onFeedbackSent_()}).catch(function(t){return e.onFeedbackSent_(t)})},onFileLoaded_:function(e){return e.target&&e.target.result?(this.feedbackToSubmit_.screenshot=e.target.result.replace(/^data:[a-zA-Z\/]*;base64,/,""),void this.submitFeedback_()):(this.log.error("File API: no target or target.result in event."),void this.onScreenshotError_())},onScreenshotError_:function(){this.displayFeedbackResult_(r.get(243),!0)},onFeedbackSent_:function(e){this.sendingFeedback_=!1,e?this.log.error("Error sending feedback",{error:e,feedbackToSubmit:this.feedbackToSubmit_}):(this.feedbackToSubmit_=null,this.displayFeedbackResult_(r.get(39),!1))},displayFeedbackResult_:function(e,t){this.getView(f).hideLoading(),m.showNotification({type:t?m.TYPES.ERROR:m.TYPES.INFO,text:e}),t||u.back()},onParametersUpdate:function(){var e=this.getParameters(),t=g(this.currentParameters_,e);this.currentParameters_=e,t&&(t.removed&&t.removed.category?this.updateViews_(null):t.added&&t.added.category?this.updateViews_(t.added.category):t.changed&&t.changed.category&&this.updateViews_(t.added.category))},onNavigate_:function(e){u.navigate(e)},updateViews_:function(e){this.category_=e;var t=r.get(88);this.category_&&this.categories_[this.category_]&&(t=this.categories_[this.category_].value),this.updateView(f,{categories:a.map(this.categories_,function(e){return e}),category:this.category_?this.categories_[this.category_]:null,isLoggedIn:c.isLoggedIn(),ratingFeedback:h.TYPES.STAR_RATING===e,title:t,terms:r.get(155,"","","/legal/terms","","","/legal/privacy","","","/legal/privacy/cookies","","","/legal/privacy","")})}},"Feedback");e.exports=v},function(e,t,i){"use strict";var n=i(25),a=i(100),o=i(99),s=i(111),r=i(109),l=i(3179),c=i(3180),u=s("SELECT_CATEGORY","SEND_FEEDBACK","NAVIGATE"),d=r.extend({attachment_:null,textarea_:{input:null,container:null,mirror:null,button:null},events:{"click .js-feedback-action":"onSendFeedback_","keyup textarea":"onInputValidate_","keyup input":"onInputValidate_","click .js-goto":"onCategoryClick_","click .js-navigate":"onNavigate_","click .js-terms a":"onTermsLinkClick_"},init:function(e){var t=e.webUpload,i=e.header;d._super.init.apply(this,arguments),this.viewData_={categories:[],userData:{},libraryEnabled:t,header:i&&{navigationActions:{back:!0}}},this.onTextareaInput_=this.onTextareaInput_.bind(this),this.onTextareaInputDebounced_=a.debounce(this.onTextareaInput_.bind(this),300)},update:function(e){this.viewData_=a.extend(this.viewData_,e),this.render()},render:function(){var e=a.isEmpty(this.viewData_.category)?l:c;this.viewData_.userData.fileName=this.attachment_?this.attachment_.name:o.get(241),this.viewData_.title||(this.viewData_.title=o.get(88)),this.$el.html(e.render(this.viewData_)),this.handleTextarea_(this.$el),this.viewData_.userData.feedback&&this.validateForm_(),this.$el.find("#file-picker").on("change",this.onFileSelect_.bind(this))},handleTextarea_:function(e){this.textarea_.container=e.find(".js-textarea-container"),this.textarea_.mirror=e.find(".js-textarea-mirror"),this.textarea_.button=e.find(".js-textarea-button"),this.textarea_.input=e.find(".js-textarea-input"),this.textarea_.input.on("keyup",this.onTextareaInput_).on("paste",this.onTextareaInputDebounced_)},onTextareaInput_:function(){var e=this.textarea_.input.val();this.textarea_.container.toggleClass("has-value",""!==e),1===e.length&&(this.initialHeight_=this.textarea_.container.offset().height),this.textarea_.mirror.html("".concat(a.escape(e),"&#x200b;"));var t=this.textarea_.container.offset();window.scrollTo(0,t.height-this.initialHeight_)},getMandatoryInputsSelector_:function(){var e=[".js-control-textarea"];return this.viewData_.isLoggedIn||e.push(".js-control-email"),e.join(", ")},onCategoryClick_:function(e,t){t=n(t),this.onCategorySelected_({id:t.data("destination")})},onCategorySelected_:function(e){this.trigger(u.SELECT_CATEGORY,e)},onSendFeedback_:function(e){if(e.preventDefault(),this.validateForm_()){var t=this.$el.find("#feedback_name"),i=this.$el.find("#feedback_email"),n=this.getFeedbackMessage(),o={feedback:n,email:i.val()||"",name:t.val()||"",screenshot:this.attachment_||null};a.extend(this.viewData_.userData,o),n.length>0&&this.trigger(u.SEND_FEEDBACK,o)}},validateForm_:function(){var e=this,t=!0,i=this.$el.find(this.getMandatoryInputsSelector_()),n=this.$el.find(".js-feedback-action");return i.each(function(i,n){var a=e.validateInputField_(n);t=t?a:t}),t?n.removeAttr("disabled"):n.attr("disabled","disabled"),t},validateInputField_:function(e){var t=(e=n(e)).find(".js-input"),i=e.find(".js-control-error"),o=e.find(".js-input-wrapper"),s=t.val(),r=!0,l="removeClass";return a.isEmpty(s)||!s.trim().length?(r=!1,l="addClass"):"email"===t.attr("type")&&(s.indexOf("@")>0&&s.indexOf("@")<s.length-1||(r=!1,l="addClass")),o&&o[l]("is-invalid"),i&&i[l]("show-error"),r},markAsValued_:function(e,t){if(!a.isEmpty(e)){var i=e.find(".js-input-wrapper");a.isEmpty(i)||i[a.isEmpty(t)?"removeClass":"addClass"]("has-value")}},onInputValidate_:function(e,t){t=n(t);var i=this.$el.find(".js-control-".concat(t.prop("type")));this.markAsValued_(i,t.val()),this.validateForm_()},onFileSelect_:function(){var e=this.$el.find("#file-picker");this.attachment_=e.get(0).files[0],this.$el.find("label[for=file-picker] .button__text").text(this.attachment_.name)},onClearScreenshot_:function(){this.screenshot_=null,this.render()},getFeedbackMessage:function(){var e=this.$el.find("textarea"),t=this.ratingFeedback_?"":null;return e.length?e.val().trim():t},onNavigate_:function(e,t){(t=n(t)).data("destination")&&this.trigger(u.NAVIGATE,t.data("destination"))},onTermsLinkClick_:function(e,t){e.preventDefault();var i=t.getAttribute("href");i&&i.startsWith("/")&&this.trigger(u.NAVIGATE,i)},sendFeedback:function(){this.$(".js-feedback-action").trigger("click")}},"Feedback");d.ACTIONS=u,e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(185),c=i(138),u=i(106);e.exports=i(108)("Feedback",function(e){return n.createElement(s,null,e.header?n.createElement(c,null,n.createElement(o,{actions:e.header.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(88)})):null,n.createElement(r,null,n.createElement("div",{className:"settings-block"},e.categories.map(function(e){return n.createElement("div",{className:"selector js-goto","data-destination":e.id,key:e.id},n.createElement("div",{className:"selector__label","data-qa":"feedback-option"},e.value),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(u,{name:"generic-chevron-right",size:"sm",supportsRtl:!0})))}))),n.createElement(l,{hpadded:!0,vpadded:!0},n.createElement("div",{className:"hint js-navigate","data-destination":"help"},a.get(99))))})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(134),r=i(133),l=i(130),c=i(185),u=i(138);e.exports=i(108)("FeedbackSend",function(e){return n.createElement(r,null,e.header?n.createElement(u,null,n.createElement(o,{actions:e.header.navigationActions,title:e.title,logo:!1,noFake:!1,hasShadow:!0})):null,n.createElement(l,null,n.createElement("div",{className:"settings-data-entry"},n.createElement("form",{className:"form-uniform js-data-form",action:""},e.isLoggedIn?null:n.createElement(n.Fragment,null,n.createElement("div",{className:"control js-control-email"},n.createElement("div",{className:"control__error js-control-error"},a.get(85)),n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"input js-input-wrapper ".concat(e.userData.email?"has-value":"")},n.createElement("input",{type:"email",name:"email",id:"feedback_email",className:"input__field js-input","data-qa":"feedback-send-input-email",value:e.userData.email}),n.createElement("label",{htmlFor:"feedback_email",className:"control__label"},a.get(110))))),n.createElement("div",{className:"control js-control-text"},n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"input js-input-wrapper ".concat(e.userData.name?"has-value":"")},n.createElement("input",{type:"text",name:"name",id:"feedback_name",className:"input__field js-input","data-qa":"feedback-send-input-name",value:e.userData.name}),n.createElement("label",{className:"control__label",htmlFor:"feedback_name"},a.get(120)))))),n.createElement("div",{className:"control control--textarea js-control-textarea"},n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"textarea js-textarea-container js-input-wrapper ".concat(e.userData.feedback?"has-value":"")},n.createElement("div",{className:"textarea__mirror js-textarea-mirror"}),n.createElement("textarea",{className:"textarea__field js-textarea-input js-input",rows:"1","data-qa":"feedback-send-textarea-message"},e.userData.feedback),n.createElement("label",{className:"control__label"},e.category.placeholder)),n.createElement("div",{className:"control__error js-control-error"},e.category.placeholder))),n.createElement("div",{className:"form__buttons js-textarea-button"},e.libraryEnabled?n.createElement(n.Fragment,null,n.createElement("input",{id:"file-picker",type:"file",accept:"image/*",name:"fileData"}),n.createElement("label",{htmlFor:"file-picker",className:"button button--transparent"},n.createElement("span",{className:"button__text needsclick"},e.userData.fileName))):null,n.createElement(s,{type:"primary",extraClass:"js-feedback-action",text:a.get(585),attrs:{disabled:!0,"data-qa":"feedback-send-button"}}))))),n.createElement(c,{hpadded:!0,vpadded:!0},n.createElement("div",{className:"hint js-navigate","data-destination":"help"},a.get(99)),n.createElement("div",{className:"hint js-terms",dangerouslySetInnerHTML:{__html:e.terms}})))})},function(e,t,i){"use strict";var n=i(100),a=i(103),o=i(121),s=i(3182),r=i(585),l=i(124),c=i(136),u=o.extend({questionRoute_:"settings-help-question",headerTemplate:null,query_:"",activationPlace:26,mainView_:null,createElement:function(){return c({qaAttribute:"help"})},init:function(){u._super.init.apply(this,arguments),this.mainView_=this.registerView(new s({header:!1!==this.header})),this.scrollPositionKeeper.ensureProperPosition=n.noop},onStart:function(){u._super.onStart.apply(this,arguments),this.mainView_.appendTo(this.parent),this.mainView_.on(s.EVENTS.SEARCH,this.search_.bind(this)),this.mainView_.on(s.EVENTS.NAVIGATE,this.onNavigate_.bind(this)),this.fetch_()},onNavigate_:function(e){a.navigate(this.questionRoute_,{section:e.section,question:e.question})},updateView_:function(e,t){if(this.mainView_.hideLoading(),e===this.query_&&t&&t.sections){var i=n.isArray(t.sections)?t.sections:[];this.mainView_.update({sections:i,searched:this.query_.length>2}),this.readyForVrt()}},fetch_:function(){this.mainView_.showLoading(),r.getInstance().getList(this.query_).then(this.updateView_.bind(this,this.query_)).catch(this.fetchError_.bind(this,this.query_))},fetchError_:function(e){this.mainView_.hideLoading(),e===this.query_&&(l.showNotification({type:l.TYPES.ERROR}),a.back())},doSearch_:function(e){e.length<2&&(e=""),this.query_!==e&&(this.query_=e,this.fetch_())},search_:n.throttle(function(e){this.doSearch_(e)},250)},"HelpCenter");e.exports=u},function(e,t,i){"use strict";var n=i(25),a=i(162),o=i(109),s=i(100),r=i(3183),l=i(3184),c=i(111)("SEARCH","NAVIGATE"),u=o.extend({listView_:null,events:{"keyup .js-search-input":"onSearch_","click .js-click":"itemClicked_","click .js-cancel-search":"onCancelSearch_"},init:function(e){var t=e.header;u._super.init.call(this),this.viewData_={sections:[],searched:!1,header:t&&{navigationActions:{back:!0}}},this.$el.html(r.render(this.viewData_)),this.listView_=this.$el.find(".js-help-center-content"),this.render(this.viewData_)},update:function(e){u._super.update.apply(this,arguments);var t=null;if(e.sections)if(t=e.sections.slice(),e.searched)for(var i=0;i<t.length;i++)t[i].isOpened=!0;else if(this.viewData_.searched)for(var n=0;n<t.length;n++)t[n].isOpened=!1;this.viewData_.sections=t||[],this.render(this.viewData_)},render:function(){this.listView_.html(l.render(this.viewData_))},onSearch_:function(e){var t=e.target.value.trim();this.viewData_.searched=t.length>2,n(e.target).parent().toggleClass("is-active",this.viewData_.searched),this.trigger(c.SEARCH,t)},itemClicked_:function(e,t){var i=n(t),a=i.data("section"),o=parseInt(i.data("id"),10);a?this.onQuestionClick_(o,a):this.onSectionClick_(o,i)},onQuestionClick_:function(e,t){this.trigger(c.NAVIGATE,{question:e,section:t})},onSectionClick_:function(e,t){var i=this.viewData_.sections.slice(),n=s.findIndex(i,function(t){return t.id===e});n>-1&&(i[n].isOpened=!i[n].isOpened,t.next().hasClass("settings-block")&&t.next().toggleClass("hidden"),t.find(".js-icon").toggleClass("is-opened"),this.viewData_=s.extend(this.viewData_,{sections:i}),e===this.viewData_.sections[this.viewData_.sections.length-1].id&&a.scrollToBottom(300))},onCancelSearch_:function(){this.$(".js-search-input").val("").blur().parent().removeClass("is-active"),this.trigger(c.SEARCH,"")}},"Help");u.EVENTS=c,e.exports=u},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(138),c=i(106);e.exports=i(108)("HelpCenter",function(e){return n.createElement(s,null,e.header?n.createElement(l,null,n.createElement(o,{actions:e.header.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(234)})):null,n.createElement(r,null,n.createElement("div",{className:"settings-search"},n.createElement("div",{className:"search-wrapper"},n.createElement("div",{className:"search trigger-icon-state"},n.createElement("input",{className:"search__input js-search-input",type:"search",placeholder:a.get(31),name:"q","data-qa":"help-search-input",value:e.query,autoComplete:"off",autoCorrect:"off",spellCheck:"false"}),n.createElement("div",{className:"search__icon js-cancel-search"},n.createElement(c,{name:"elements-input-search",size:"stretch"}))),n.createElement("span",{className:"search__cancel js-cancel-search"},a.get(19)))),n.createElement("div",{className:"settings-block js-help-center-content"})))})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106);e.exports=i(108)("HelpCenterList",function(e){return e.sections?e.sections.map(function(e){return n.createElement(n.Fragment,{key:e.id},n.createElement("div",{className:"selector selector--multiline js-click","data-id":e.id,"data-qa":"help-search-section"},n.createElement("div",{className:"selector__label"},e.name),n.createElement("div",{className:"selector__icon selector__icon--accordion js-icon ".concat(e.isOpened?"is-opened":"")},n.createElement(o,{name:"generic-plus",size:"sm"}))),n.createElement("div",{className:"settings-block ".concat(e.isOpened?"":"hidden")},e.questions.map(function(t){return n.createElement("div",{className:"selector selector--multiline js-click","data-id":t.id,"data-section":e.id,"data-qa":"help-search-question"},n.createElement("div",{className:"selector__label selector__label--secondary"},t.name))})))}):e.searched?n.createElement("div",{className:"no-questions"},a.get(254)):null})},function(e,t,i){"use strict";var n=i(121),a=i(103),o=i(3186),s=i(585),r=i(124),l=i(136),c=n.extend({headerTemplate:null,mainView_:null,activationPlace:26,createElement:function(){return l({className:"settings-help-question"})},init:function(){c._super.init.apply(this,arguments),this.mainView_=this.registerView(new o({header:!1!==this.header}))},onStart:function(){c._super.onStart.apply(this,arguments),this.mainView_.appendTo(this.parent),this.mainView_.clear(),this.fetch_(this.getParameter("section"),this.getParameter("question"))},fetch_:function(e,t){s.getInstance().getQuestion({section:parseInt(e,10),question:parseInt(t,10)}).then(this.updateView_.bind(this)).catch(this.fetchError_.bind(this))},fetchError_:function(){r.showNotification({type:r.TYPES.ERROR}),a.back()},updateView_:function(e){e&&(this.mainView_.update(e.question),this.readyForVrt())},requiresAuthentication:!1},"HelpCenter");e.exports=c},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(342),s=i(3191),r=a.extend({events:{"click a":"onLinkClick_"},init:function(e){var t=e.header;r._super.init.apply(this,arguments),this.viewData_={question:{},header:t&&{navigationActions:{back:!0}}}},update:function(e){this.viewData_=n.extend(this.viewData_,e);var t=s.render(this.viewData_);n.forEach(t.find("a"),o.formatLink),this.$el.html(t)},clear:function(){this.$el.empty()},onLinkClick_:function(e){o.openLink(e)}},"Help");e.exports=r},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerGetTerms,s=a.extend({name:"TermsAndConditions",getRequestMessageType:76,getResponseMessageType:77,get:function(){var e=(new o).setContext(131).setType(5);return s._super.get.call(this,e)}},"TermsAndConditions");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerGetTerms,s=a.extend({name:"PrivacyPolicy",getRequestMessageType:76,getResponseMessageType:77,get:function(){var e=(new o).setContext(131).setType(3);return s._super.get.call(this,e)}},"PrivacyPolicy");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerGetTerms,s=a.extend({name:"FaqForParents",getRequestMessageType:76,getResponseMessageType:77,get:function(){var e=(new o).setContext(131).setType(7);return s._super.get.call(this,e)}},"FaqForParents");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerGetTerms,s=a.extend({name:"PrizeDrawTerms",getRequestMessageType:76,getResponseMessageType:77,get:function(){var e=(new o).setContext(131).setType(9);return s._super.get.call(this,e)}},"PrizeDrawTerms");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(138);e.exports=i(108)("HelpCenterResponse",function(e){return n.createElement(s,null,e.header?n.createElement(l,null,n.createElement(o,{actions:e.header.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(234)})):null,n.createElement(r,null,n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"help-center-response"},n.createElement("div",{className:"help-center-response__title",dangerouslySetInnerHTML:{__html:e.question}}),n.createElement("div",{className:"help-center-response__text",dangerouslySetInnerHTML:{__html:e.answer}})))))})},function(e,t,i){"use strict";function n(e){return e.getSubscriptions([]).find(function(e){return 1===e.getType()})}var a=i(132),o=i(99),s=i(165),r=i(102),l=i(149),c=i(588),u=i(241),d=i(121),h=i(3193),p=i(219),m=i(124),g=i(136),_=i(103).navigate,f=i(101).ClickButtonEvent,v=d.extend({headerTemplate:null,serverFeature_:37,activationPlace:26,settings_:null,notificationScreenAccess:3,screenName:8,createElement:function(){return g({className:"settings-payments"})},init:function(){v._super.init.apply(this,arguments);var e=h.ACTIONS;this.mainView_=this.registerView(new h({el:this.parent.get(0)})).on(e.UNSUBSCRIBE_SPP,this.onUnsubscribe_,this).on(e.REMOVE_STORED,this.onTryRemoveStored_,this).on(e.TOGGLE_TOPUP,this.onToggleTopup_,this).on(e.SUBSCRIBE,this.goToPayments_.bind(this,1)).on(e.MSISDN,this.goToMsisdn_,this),this.topUpRemoveView_=this.registerView(new p).setButtonsKind(p.BUTTON_KIND.DESTRUCTIVE,p.BUTTON_KIND.CANCEL).on(p.ACTIONS.YES,this.onRemoveTopup_,this),this.storedRemoveView_=this.registerView(new p).setButtonsKind(p.BUTTON_KIND.DESTRUCTIVE,p.BUTTON_KIND.CANCEL).on(p.ACTIONS.YES,this.onRemoveStored_,this),this.unsubscribeSPPView_=this.registerView(new p).setButtonsKind(p.BUTTON_KIND.DESTRUCTIVE,p.BUTTON_KIND.CANCEL).on(p.ACTIONS.YES,this.onConfirmUnSub_,this)},onStart:function(){v._super.onStart.apply(this,arguments),this.setup_()},onStop:function(){v._super.onStop.apply(this,arguments),this.settings_=null},setup_:function(){this.mainView_.showLoading(),c.getInstance().get().then(this.renderSettings_.bind(this)).catch(this.showError_.bind(this))},renderSettings_:function(e){var t=function(e,t,i){var a={msisdn:e.getMsisdn(),navigationActions:{back:!0}},o=n(e);return o&&(a.spp=function(e,t){var i={type:e.getType()},n=e.getIsEnabled(),a=e.getIsCancellable();if(n&&a){i.isSubscribed=!0,i.showUnsubscribe=!0;var o=e.getUnsubscribeInfo();o&&o.getInfo()&&(i.unSubscribeText=o.getInfo())}else n&&!a?i.isActive=!0:0!==t.getRequiredAction()&&(i.showSubscribe=!0);return i}(o,i)),e.getHasStored()?a.storedInfo={name:e.getStoredName(),description:e.getStoredDescription(),id:e.getStoredId()}:a.storedInfo={description:e.getPromoNoStoredCard()},e.getAutoTopup()?a.topUp={active:!0,message:e.getPromoHasAutoTopup()}:t.getEnabled()&&(a.topUp={message:e.getPromoHasNoAutoTopup()}),a}(e,a.getSync(38),a.getSync(27));this.settings_=e,this.mainView_.hideLoading(),this.mainView_.update(t),this.readyForVrt()},showError_:function(e){m.showNotification({type:m.TYPES.ERROR,text:e})},showErrorAndSetup_:function(e){this.showError_(e),this.setup_()},getNavigationBarContext:function(){return v._super.getNavigationBarContext.call(this,{title:o.get(33)})},onUnsubscribe_:function(){var e=n(this.settings_);if(e){r.track(f,{button_name:22});var t=e.getUnsubscribeInfo();if(t){var i=t.getImmediateUnsubscription(!1),a=t.getFlow();if(3===a&&(i?this.onConfirmUnSub_():this.unsubscribeSPPView_.update({message:o.get(53),yesText:o.get(6),noText:o.get(19)})),2===a){var s=t.getUrl(null);window.open(s)}1===a&&this.mainView_.toggleUnsubscribeText()}else this.showError_()}else this.log.error("No SPP subscription info found")},onConfirmUnSub_:function(){this.mainView_.showLoading(),c.getInstance().unsubscribe(1,!0).then(this.changeSuccess_.bind(this)).catch(this.showErrorAndSetup_.bind(this))},goToPayments_:function(e){l.generate();var t={productType:Number(e),back:"settings-payments"};t.hotPanelData={activationPlace:t.back},s.navigateToPayment(t)},goToMsisdn_:function(){var e=this.settings_.getMsisdn();e&&_("settings-msisdn",{phoneNumber:e})},onTryRemoveStored_:function(){this.storedRemoveView_.update({message:o.get(69),yesText:o.get(22),noText:o.get(19)})},onRemoveStored_:function(){this.mainView_.showLoading();var e=this.settings_.getStoredId();c.getInstance().removeStoredPayment(e).then(this.changeSuccess_.bind(this),this.showErrorAndSetup_.bind(this))},onToggleTopup_:function(){this.settings_.getAutoTopup()?this.topUpRemoveView_.update({message:o.get(180)}):this.goToPayments_(13)},onRemoveTopup_:function(){this.mainView_.showLoading(),c.getInstance().removeAutoTopup().then(this.changeSuccess_.bind(this),this.showErrorAndSetup_.bind(this))},changeSuccess_:function(e){u.getInstance().invalidateAll(),e.unSubAlternative?_("unsubscribe-spp-promo",{promo:e.unSubAlternative}):this.setup_()}},"PaymentSettings");e.exports=v},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(111),s=i(3194),r=o("UNSUBSCRIBE_SPP","SUBSCRIBE","REMOVE_STORED","TOGGLE_TOPUP","MSISDN"),l=a.extend({events:{"click .js-action":"onButtonAction_","click .js-toggle-items":"onToggle_"},update:function(e){return e.ACTIONS=r,this.$el.html(s.render(e)),this.hideLoading(),this},onButtonAction_:function(e){var t=n(e.target).closest(".js-action");this.trigger(t.data("action"))},onToggle_:function(){var e=this.$el.find(".js-toggle-items .js-checkbox");e.attr("checked",!e.attr("checked")),this.trigger(r.TOGGLE_TOPUP)},toggleUnsubscribeText:function(){var e=this.$el.find(".js-subscribe-info");e.find(".js-unsubscribe-instructions").removeClass("hidden"),e.find(".js-unsubscribe-action").addClass("hidden")}},"PaymentSettings");l.ACTIONS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(134),r=i(133),l=i(130),c=i(138),u=i(106);e.exports=i(108)("Payments",function(e){return n.createElement(r,null,n.createElement(c,null,n.createElement(o,{actions:e.navigationActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(33)})),n.createElement(l,null,n.createElement("div",{className:"settings-block"},e.spp?n.createElement("div",{className:"settings-item settings-item--multi-row js-subscribe-info","data-qa":"settings-spp"},n.createElement("div",{className:"settings-item__row"},n.createElement("label",{htmlFor:"super-powers",className:"settings-item__label"},a.get(169)),n.createElement("div",{className:"settings-item__action"},e.spp.isSubscribed?n.createElement("div",{className:"settings-payments__status is-active"},a.get(167)):null,e.spp.isActive?n.createElement("div",{className:"settings-payments__status is-active"},a.get(51)):null,e.spp.showSubscribe?n.createElement("div",{className:"settings-payments__status is-inactive"},a.get(244)):null)),e.spp.showSubscribe?n.createElement("div",{className:"settings-item__row"},n.createElement("div",{className:"settings-item__label"},n.createElement(s,{type:"primary",extraClass:"js-action",text:a.get(168),attrs:{"data-action":e.ACTIONS.SUBSCRIBE}}))):null,e.spp.showUnsubscribe?n.createElement(n.Fragment,null,e.spp.unSubscribeText?n.createElement("div",{className:"settings-item__row js-unsubscribe-instructions hidden"},n.createElement("div",{className:"settings-payments__message"},e.spp.unSubscribeText)):null,n.createElement("div",{className:"settings-item__row"},n.createElement(s,{type:"stroke",extraClass:"js-action",text:a.get(52),attrs:{"data-action":e.ACTIONS.UNSUBSCRIBE_SPP}}))):null):null,e.msisdn?n.createElement("div",{className:"selector js-action","data-action":e.ACTIONS.MSISDN,"data-qa":"settings-msisdn"},n.createElement("div",{className:"selector__label"},a.get(463)),n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(u,{name:"generic-chevron-right",size:"sm",supportsRtl:!0}))):null,e.storedInfo?n.createElement("div",{className:"settings-item settings-item--multi-row","data-qa":"settings-stored-mop"},n.createElement("div",{className:"settings-item__row"},n.createElement("label",{htmlFor:"stored-payment-method",className:"settings-item__label"},a.get(166),e.storedInfo.description?n.createElement("div",{className:"settings-item__label--secondary"},e.storedInfo.description):null),e.storedInfo.name?n.createElement("div",{className:"settings-item__action"},n.createElement("div",{className:"settings-payments__status is-active"},e.storedInfo.name)):null),e.storedInfo.id?n.createElement("div",{className:"settings-item__row"},n.createElement(s,{type:"stroke",extraClass:"js-action",text:a.get(22),attrs:{"data-action":e.ACTIONS.REMOVE_STORED}})):null):null,e.topUp?n.createElement("div",{className:"settings-item js-toggle-items qa-toggle-items","data-qa":"settings-topup"},n.createElement("label",{htmlFor:"auto-refill",className:"settings-item__label"},a.get(150),e.topUp.message?n.createElement("div",{className:"settings-item__label--secondary"},e.topUp.message):null),n.createElement("div",{className:"settings-item__action"},n.createElement("div",{className:"switcher"},n.createElement("input",{type:"checkbox",id:"settings-auto-topup","data-key":"settings-auto-topup",name:"settings-auto-topup",className:"js-checkbox",checked:!!e.topUp.active||void 0}),n.createElement("label",{className:"needsclick",htmlFor:"settings-auto-topup"})))):null)))})},function(e,t,i){"use strict";var n=i(122),a=i(103),o=i(121),s=i(3196),r=i(124),l=i(136),c="invisible-mode-view",u=o.extend({navigationTemplate:null,activationPlace:26,notificationScreenAccess:3,screenName:8,createElement:function(){return l({className:"settings-msisdn"})},init:function(){u._super.init.apply(this,arguments),this.registerView(c,new s).on(s.ACTIONS.DETACH_PHONE,this.onDetach_.bind(this))},onStart:function(){u._super.onStart.apply(this,arguments),this.updateView(c,{phoneNumber:this.getParameter("phoneNumber")}),this.getView(c).appendTo(this.parent),this.readyForVrt()},onDetach_:function(){new n(492).on(387,function(e){e&&r.showNotification({type:r.TYPES.ERROR}),a.back()}).request()}},"MsisdnSettings");e.exports=u},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(3197),s=a("DETACH_PHONE"),r=n.extend({events:{"click .js-delete":"onDetachPhone_"},update:function(e){r._super.update.apply(this,arguments),this.render(e)},render:function(e){this.$el.html(o.render(e))},onDetachPhone_:function(){this.trigger(s.DETACH_PHONE)}},"MsisdnView");r.ACTIONS=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(185),c=i(138);e.exports=i(108)("Msisdn",function(e){return n.createElement(s,null,n.createElement(c,null,n.createElement(o,{back:!0,hasShadow:!0,title:a.get(463)})),n.createElement(r,{hpadded:!0,vpadded:!0},n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"msisdn-info"},n.createElement("div",{className:"msisdn-info__title"},a.get(462)),n.createElement("div",{className:"msisdn-info__current"},e.phoneNumber)),n.createElement("div",{className:"settings-text"},a.get(461)))),n.createElement(l,{hpadded:!0,vpadded:!0},n.createElement("div",{className:"hint hint--link js-delete"},a.get(70))))})},function(e,t,i){"use strict";var n=i(121),a=i(103).navigate,o=n.extend({headerTemplate:null,activationPlace:66,onStart:function(){a("signup",!0)}},"InvitationSignUp");e.exports=o},function(e,t,i){"use strict";function n(e,t,i){st=i||st;var n=t&&!function(e){return Boolean(Ze.find(function(t){return t.step===e&&t.requiredScreen}))}(t),a=Ze.filter(function(i){return!(N(i)||!i.requiredScreen&&(n?t!==i.step:i.regMethod!==e));
});return st&&st.length>0&&st.forEach(function(e){var t=Je[e.getType()];N(t)||t&&(t.onboardingPage=e,a.push(t))}),a}function a(e,t){var i=Number(e.countryId);return isNaN(i)||0===i?t:i}function o(){var e=W.getUser();if(W.isLoggedIn()&&e.hasProfilePhoto()){var t=e.getProfilePhoto();if(t.getId()&&t.getLargeUrl())return{id:t.getId(),largeUrl:t.getLargeUrl()}}return{id:"",largeUrl:""}}function s(e,t,i){var n=0,a=function(e,t){return t.findIndex(function(t){return t.step===e})}(e,i),s=o(),r=i.findIndex(function(e){return e.view===ye?!(1===(i=t[e.step])||2===i):e.view===Ie?!s.id||!s.largeUrl:Boolean(e.onboardingPage)||!t[e.step];var i});return(n=r>-1&&a>-1?Math.min(r,a):Math.max(r,a))>-1?n:0}function r(){return{errorMessage:X.get(149),errorType:12,isInvalid:!0}}function l(e,t){return ce.getInstance().get({fieldType:e,value:t,context:108}).then(function(t){var i=(0,M.default)(t,1)[0];return i instanceof Me?{errorMessage:i.getErrorMessage(),errorType:ae.getErrorFieldValidationErrorType(i.getErrorType()),errorField:at[e],isInvalid:!i.getValid()}:r()}).catch(r)}function c(e,t){return ge.getInstance().validatePhoneNumber({phonePrefix:e,phone:t,context:108}).then(function(e){var t=(0,M.default)(e,1)[0];return t instanceof Me?{confirmationModal:{header:t.getConfirmationHeader(),message:t.getConfirmationMessage()},errorMessage:t.getErrorMessage(),errorType:ae.getErrorFieldValidationErrorType(t.getErrorType()),errorField:at[20],isInvalid:!t.getValid(),phoneNumberVerificationType:t.getPhoneNumberConfirmationType()}:r()}).catch(r)}function u(e){if(W.isLoggedIn()){var t=(new Ye).setUserId(W.getUserId()).setGender(e);return de.getInstance().set(t,[230],108).catch(function(e){var t=Ee.getErrorFromServerError(e,230);return ve.showNotification({text:t.errorMessage,type:ve.TYPES.ERROR}),t})}return Promise.resolve({isInvalid:!1,errorMessage:""})}function d(e,t){return(e.find(function(e){return e.id===t})||{}).phone_prefix}function h(e){var t=e.getPhonePrefix(),i=e.getId();return{label:"".concat(e.getName()," +").concat(t),selectedLabel:"".concat(e.getIsoCode()," +").concat(t),value:i.toString(),phone_prefix:t,id:i}}function p(e,t){return e.getCountries().map(function(e){var i=h(e);return t===i.id&&(i.selected=!0),i})}function m(e){return e.toISOString().substring(0,10)}function g(){var e=new Date;return e.setFullYear(e.getFullYear()-nt.MIN_AGE),m(e)}function _(){var e=new Date;return e.setFullYear(e.getFullYear()-nt.MAX_AGE),m(e)}function f(e){var t=e.getType(),i=new fe(e.getPromo()),n=i.buttons.find(function(e){return 1===e.type}),a=i.buttons.find(function(e){return 2===e.type}),o={header:i.titleText,mssg:i.messageText};if(17===t){var s=e.getPromo();o.header=s.getScreenHeader(),o.primaryActionLabel=X.get(400);var r=e.getVerificationMethods([])[0];r&&(o.timer=r.getSecondsToWait(),o.verificationData=r.getVerificationData(),o.phoneNumber=r.getPhoneNumber(),o.phonePrefix="+".concat(r.getPhonePrefix()),o.isSmsPin=2===r.getPhoneNumberVerificationType())}return n&&(o.primaryActionLabel=n.actionText),a&&(o.secondaryActionLabel=a.actionText),o}function v(){return ne.track(Ke,{element:399}),me.getInstance().resendEmail().catch(function(e){e instanceof He&&15!==e.getType()&&ve.showNotification({type:ve.TYPES.ERROR})})}function E(){var e=[],t=(st=st||[]).find(function(e){return 17===e.getType()});if(t)for(var i=t.getVerificationMethods([])[0],n=i?i.getPinLength():0,a=0;a<n;a++)e.push({id:a,value:""});return e}function b(e){if(e instanceof Le&&e.hasOnboardingConfig())return{onboardingPages:e.getOnboardingConfig().getPages([])}}function y(e){return(e.find(function(e){return Boolean(e.regMethod)})||{}).regMethod}function k(e,t){var i=(new Ge).setOnboardingPageStats((new Ue).setPageId(e.getPageId()).setEvent(t));new Oe(278,i).request()}function S(){ne.track(Ke,{element:386})}function w(e){if(e.confirmationModal&&(e.confirmationModal.header||e.confirmationModal.message))return e.confirmationModal}function C(e,t){var i=e[t];return i&&i.onboardingPage&&17===i.onboardingPage.getType()}function T(e,t){var i=e[t];if(i&&i.onboardingPage&&17===i.onboardingPage.getType())return i.onboardingPage.getVerificationMethods([])[0]}function P(e,t){var i=T(e,t);return i&&3===i.getPhoneNumberVerificationType()}function N(e){return ot.has(e&&e.view)}function I(){ot.add(we),ot.add(Ce),ot.add(Ne),ot.add(Pe)}function x(e,t){t=t||1;var i=new fe(e).buttons.find(function(e){return e.type===t});if(i)return i.actionText}function A(e,t){if(e&&e.errorType){var i={event_type:t&&t.eventType?t.eventType:5,field_name:e.errorField,error_type:e.errorType};12===e.errorType&&(i.error_message=e.errorMessage),ne.track(Qe,i)}}var O,V,R=i(3),B=R(i(168)),L=R(i(127)),F=R(i(144)),M=R(i(4)),D=R(i(110)),U=R(i(112)),j=R(i(114)),G=R(i(115)),q=R(i(123)),H=R(i(116)),z=R(i(107)),Y=i(98),$=i(100),W=i(113),K=i(103),Q=i(126),X=i(99),Z=i(132),J=i(150),ee=i(3200),te=i(329),ie=i(247),ne=i(102),ae=i(372),oe=i(289),se=i(167),re=i(306),le=i(591),ce=i(592),ue=i(161),de=i(128),he=i(220),pe=i(3203),me=i(3204),ge=i(3205),_e=i(331),fe=i(593),ve=i(124),Ee=i(474),be=i(3206),ye=i(3208),ke=i(3212),Se=i(3213),we=i(3218),Ce=i(3222),Te=i(3226),Pe=i(3228),Ne=i(3229),Ie=i(3235),xe=i(3237),Ae=i(3238),Oe=i(122),Ve=i(105),Re=Ve.City,Be=Ve.ClientLinkExternalProviderAndReloadOnboarding,Le=Ve.ClientLoginSuccess,Fe=Ve.ClientUserVerify,Me=Ve.ClientValidateUserField,De=Ve.ExternalProviderImportProgress,Ue=Ve.OnboardingPageStats,je=Ve.Photo,Ge=Ve.ServerAppStats,qe=Ve.ServerChangePassword,He=Ve.ServerErrorMessage,ze=Ve.SexType,Ye=Ve.User,$e=i(101),We=$e.AlertEvent,Ke=$e.ClickEvent,Qe=$e.ErrorEvent,Xe=$e.ViewScreenEvent,Ze=[{step:"gender",screenName:483,view:ye,requiredScreen:!0,hideContinueButton:!0},{step:"name",screenName:484,view:ke,requiredScreen:!0,continueCallback:function(e){if(W.isLoggedIn()){var t=(new Ye).setUserId(W.getUserId()).setName(e.user.name);return de.getInstance().set(t,[200],108).catch(function(e){return Ee.getErrorFromServerError(e,200)})}return l(200,e.user.name)}},{step:"dob",screenName:485,view:Se,requiredScreen:!0,continueCallback:function(e){if(W.isLoggedIn()){var t=(new Ye).setUserId(W.getUserId()).setDob(e.user.dob);return de.getInstance().set(t,[220],108)}return l(220,e.user.dob)}},{step:"phone",screenName:145,view:we,regMethod:3,continueCallback:function(e){if(W.isLoggedIn()){if(w(e))return Promise.resolve({isInvalid:!1,errorMessage:""});var t=d(e.listCountries,e.selectedCountryId);return pe.getInstance().switchPhoneLogin(e.user.phone,t).then(function(i){var n=(0,M.default)(i,1),a=n[0],o=b(a);return o.isInvalid?o:c(t,e.user.phone).then(function(e){return(0,L.default)({},o,e)})}).catch(function(e){return Ee.getErrorFromServerError(e,20)})}return w(e)?function(e){var t=d(e.listCountries,e.selectedCountryId);return Ee.registerUser((0,L.default)({},e.user,{email:null,phonePrefix:t})).catch(function(e){return Ee.getErrorByFieldName(e,Ee.FIELD_NAMES.PHONE)})}(e):c(d(e.listCountries,e.selectedCountryId),e.user.phone)}},{step:"email",screenName:146,view:Ce,hideContinueButton:!0,regMethod:1,continueCallback:function(e){return W.isLoggedIn()?pe.getInstance().switchEmailLogin(e.user.email).then(function(e){var t=(0,M.default)(e,1),i=t[0];return b(i)}).catch(function(e){return Ee.getErrorFromServerError(e,10)}):Ee.registerUser((0,L.default)({},e.user,{phone:null})).catch(function(e){return Ee.getErrorByFieldName(e,Ee.FIELD_NAMES.EMAIL)})}}],Je=(O={},(0,z.default)(O,16,{step:"email-confirmation",screenName:148,view:Pe,requiredScreen:!0,hideContinueButton:!0}),(0,z.default)(O,17,{step:"phone-confirmation",view:Ne,requiredScreen:!0,hideContinueButton:!0,hideProgressBar:!0,continueCallback:function(e){var t={methodType:1,pin:e.digits.reduce(function(e,t){return e+t.value},"")};return he.getInstance().setVerified(t).then(function(e){if(e){var t=e.getForm();if(t&&t.hasErrors())return Ee.getErrorByFieldName(t,Ee.FIELD_NAMES.TOKEN)}})}}),(0,z.default)(O,6,{step:"add-location",screenName:415,view:Te,requiredScreen:!0,continueCallback:function(e){if(!e.user.city||!e.user.city.id)return Promise.resolve(r());var t=(new Ye).setUserId(W.getUserId()).setCity(new Re(e.user.city));return de.getInstance().set(t,[93],108)}}),(0,z.default)(O,18,{step:"add-photo",screenName:399,view:Ie,requiredScreen:!0,continueCallback:function(e){return e.user.photoCount>0?Promise.resolve({isInvalid:!1,errorMessage:""}):Promise.resolve({isInvalid:!0,triggerUploadPhoto:!0})}}),(0,z.default)(O,19,{step:"set-password",screenName:153,view:xe,requiredScreen:!0,continueCallback:function(e,t){var i=t.onboardingPage.getPromo(),n=new qe;return n.setUpdatedPassword(e.password),n.setChangePasswordToken(i.getId()),new Promise(function(e){return new Oe(228,n).on(124,function(t,i){e(Ee.getErrorFromServerError(i))}).on(229,function(t,i){e(i?Ee.getErrorByFieldName(i,Ee.FIELD_NAMES.NEW_PASSWORD):{isInvalid:!1,errorMessage:""})}).request()})}}),(0,z.default)(O,59,{step:"pledge",screenName:823,view:Ae,hideContinueButton:!0,hideProgressBar:!0}),O),et=[Te,xe,Pe,Ne,Ae],tt="back",it="close",nt={MIN_AGE:Q.get("user.age.min"),MAX_AGE:99},at=(V={},(0,z.default)(V,200,39),(0,z.default)(V,220,8),(0,z.default)(V,10,7),(0,z.default)(V,230,9),(0,z.default)(V,20,12),V),ot=new Set,st=[],rt=function(e){function t(e){var i;(0,D.default)(this,t),i=(0,j.default)(this,(0,G.default)(t).call(this,e)),e.screenNameRef(i.getScreenName.bind((0,q.default)(i)));var r,l=(r=ue.getSettings())&&r.getUserCountry(),c=l&&l.getId(),u=W.isLoggedIn()?null:i.getStepFromProps(),d=W.getUser();d&&d.getAccountConfirmed()&&I(),e.avoidGenderScreen&&ot.add(ye);var p,m=function(e){var t=W.getUser();return e=e||{},t||(t=new Ye),e.name&&t.setName(e.name.toString()),e.dob?t.setDob(e.dob.toString()):e.birthday&&t.setDob(e.birthday.toString()),e.phone&&t.setPhone(e.phone.toString()),e.email&&t.setEmail(e.email.toString()),e.gender=Number(e.gender),ze.isValid(e.gender)&&t.setGender(e.gender),{dob:t.hasDob()?t.getDob():"",name:t.hasName()?t.getName():"",email:t.hasEmail()?t.getEmail():"",phone:t.hasPhone()?t.getPhone():"",gender:t.hasGender()?t.getGender():3,photoCount:t.hasPhotoCount()?t.getPhotoCount():0}}(e.user);p=e.lookingFor,ze.isValid(parseInt(p,10))&&(m.lookingFor=parseInt(e.lookingFor,10));var g=n(function(){if(W.isLoggedIn()){var e=W.getUser(),t=e.getPhone();return Boolean(t)?3:1}return W.getStartupRegistrationSettings().getDefaultRegistrationMethod()}(),u,e.onboardingPages);return i.state={screens:g,user:m,photo:o(),password:"",digits:E(),selectedCountryId:a(e,c),listCountries:l?[h(l)]:[],countriesRetrieved:!1,isCalling:!1,isAboutToCall:!1,isCheckingForm:!1,isInvalid:!1,errorMessage:"",isLoading:!1,indexCurrentScreen:s(u,m,g),confirmationModal:{},searchStringLocation:"",cities:[]},C(i.state.screens,i.state.indexCurrentScreen)&&(P(i.state.screens,i.state.indexCurrentScreen)?(i.state.phoneNumberVerificationType=3,i.state.isAboutToCall=!0):i.state.phoneNumberVerificationType=2),i.inputRef=Y.createRef(),i.searchLocation=$.debounce(i.searchLocation.bind((0,q.default)(i)),300),i.bindMethods(),i}return(0,H.default)(t,e),(0,U.default)(t,[{key:"componentDidMount",value:function(){J.on(J.EVENTS.AUTH_ERROR,this.onErrorExternalProvider),K.navigationEvent.subscribe(this.onBrowserNavigation),oe.on(oe.EVENTS.START,this.showLoading,this),oe.on(oe.EVENTS.FINISH,this.onUploadedPhoto,this),Z.on(Z.EVENTS.UPDATE,this.onFeaturesUpdate,this),se.getInstance().on(se.Type.SYSTEM_NOTIFICATION,this.onSystemNotification,this),ne.track(Xe),this.checkPhoneConfirmationScreen(),this.initUserCountry(),this.props.readyForVrt()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutIdPhoneCall_),J.off(J.EVENTS.AUTH_ERROR,this.onErrorExternalProvider),K.navigationEvent.unsubscribe(this.onBrowserNavigation),oe.off(oe.EVENTS.START,this.showLoading,this),oe.off(oe.EVENTS.FINISH,this.onUploadedPhoto,this),Z.off(Z.EVENTS.UPDATE,this.onFeaturesUpdate,this),se.getInstance().off(se.Type.SYSTEM_NOTIFICATION,this.onSystemNotification,this),ot=new Set,st=[]}},{key:"componentDidUpdate",value:function(e,t){if(t.user.marketing_subscription===this.state.user.marketing_subscription){var i=!1;!t.startPhoneVerification&&this.state.startPhoneVerification&&this.getPhoneVerificationData(),t.screens!==this.state.screens&&(i=!0);var n=this.getCurrentScreen();t.indexCurrentScreen!==this.state.indexCurrentScreen&&(i=!0,n.onboardingPage&&k(n.onboardingPage,2)),(!t.isAboutToCall&&this.state.isAboutToCall||!t.isCalling&&this.state.isCalling)&&(i=!0),i&&ne.track(Xe);var a=t.indexCurrentScreen!==this.state.indexCurrentScreen;(a||t.screens!==this.state.screens||t.selectedCountryId!==this.state.selectedCountryId||t.user!==this.state.user)&&this.updateRegistrationUrl(!a),t.confirmationModal!==this.state.confirmationModal&&w(this.state)&&(n.view===Ce?ne.track(We,{alert_type:55,activation_place:66,action_type:12}):n.view===we&&ne.track(We,{alert_type:48,activation_place:66,action_type:12}))}else this.onClickContinue()}},{key:"render",value:function(){var e=this.getChildrenView();return this.getCurrentScreen().view===Ae?e:Y.createElement(be,{dataQaPage:this.getDataQaPage(),progressBarValue:this.getPercentageProgressBar(),screenTitle:this.getScreenTitle(),screenNavigation:this.getScreenNavigation(),onClickBack:this.onClickBack,onClickClose:this.onClickClose,onClickContinue:this.onClickContinue,labelContinueButton:this.getLabelContinueButton(),isContinueButtonHidden:this.getIsContinueButtonHidden(),isContinueButtonDisabled:this.getIsContinueButtonDisabled(),isCheckingForm:this.state.isCheckingForm,isLoading:this.state.isLoading,showEmptyNavigation:this.state.isAboutToCall||this.state.isCalling,onClickExternalProvider:this.onClickExternalProvider,hideExternalProvider:this.hideExternalProvider(),confirmationModal:w(this.state),onClickConfirmModal:this.onClickConfirmModal,onClickCancelModal:this.onClickCancelModal},e)}},{key:"getScreenTitle",value:function(){var e=this.getCurrentScreen();if(e.view===Ne)return f(e.onboardingPage).header}},{key:"getScreenNavigation",value:function(){var e=this.getCurrentScreen();return e.view===Ne?it:e.view===Ae?null:!W.isLoggedIn()||this.state.indexCurrentScreen>0?tt:void 0}},{key:"getCurrentScreen",value:function(){return this.state.screens[this.state.indexCurrentScreen]||{}}},{key:"getChildrenView",value:function(){var e=this,t=this.getCurrentScreen();return t.view===ye?Y.createElement(ye,{onClickMale:this.onClickMale,onClickFemale:this.onClickFemale,isMaleSelected:this.isMaleUser(),isFemaleSelected:this.isFemaleUser()}):t.view===ke?Y.createElement(ke,{name:this.state.user.name,isInvalid:this.state.isInvalid,errorMessage:this.state.errorMessage,onFocus:this.props.onFocusInput,onChange:this.onChangeName,onBlur:this.props.onBlurInput,onSubmit:this.onSubmitForm,onInputAreaClick:this.onInputAreaClick,inputRef:this.inputRef}):t.view===Se?Y.createElement(Se,{userName:this.state.user.name,date:this.state.user.dob,minDob:_(),maxDob:g(),isInvalid:this.state.isInvalid,errorMessage:this.state.errorMessage,onFocus:this.props.onFocusInput,onChange:this.onChangeDob,onBlur:this.onBlurDob,onSubmit:this.onSubmitForm}):t.view===we?(this.state.countriesRetrieved||le.getInstance().get().then(function(t){var i=(0,M.default)(t,1)[0];i&&i.hasCountries()&&e.setState(function(e){var t=e.selectedCountryId;if(!t){var n=i.getCountries([])[0];t=n&&n.getId()}return{selectedCountryId:t,listCountries:p(i,t),countriesRetrieved:!0}})}),Y.createElement(we,{phoneNumber:this.state.user.phone,listCountryCodes:this.state.listCountries,isInvalid:this.state.isInvalid,errorMessage:this.state.errorMessage,showSignIn:this.state.showSignIn,onFocusInput:this.props.onFocusInput,onChangePhoneNumber:this.onChangePhoneNumber,onBlurInput:this.props.onBlurInput,onChangeCountryCode:this.onChangeCountryCode,onClickCountryCode:S,onChangeRegistrationMethod:this.switchToEmailMethod,onSignIn:this.goToSignIn,onSubmit:this.onSubmitForm,onInputAreaClick:this.onInputAreaClick,inputRef:this.inputRef})):t.view===Ce?Y.createElement(Ce,{initialEmail:this.state.user.email,showConfirmationModal:function(t){return e.setState({confirmationModal:t})},checkUserAnsweredEmailPrefs:this.checkUserAnsweredEmailPrefs,onFocus:this.props.onFocusInput,onChange:this.onChangeEmail,onBlur:this.props.onBlurInput,showLoadingContinue:this.state.isCheckingForm,onClickContinue:this.onClickContinue,onChangeRegistrationMethod:this.switchToPhoneMethod,onInputAreaClick:this.onInputAreaClick,inputRef:this.inputRef}):t.view===Te?(this.props.onBlurInput&&this.props.onBlurInput(),Y.createElement(Te,(0,F.default)({},f(t.onboardingPage),{location:this.getCurrentLocation(),cities:this.state.cities,isSearching:this.state.isSearchingCities,isInvalid:this.state.isInvalid,errorMessage:this.state.errorMessage,onFocus:this.props.onFocusInput,onChange:this.onChangeLocation,onBlur:this.props.onBlurInput,onSelectLocation:this.onSelectLocation,onClearLocation:this.onClearLocation,onSubmit:this.onSubmitForm,onInputAreaClick:this.onInputAreaClick,inputRef:this.inputRef}))):t.view===Ie?Y.createElement(Ie,(0,F.default)({},f(t.onboardingPage),{heading:!1,photo:this.getPhotos()[0],onUploadPhoto:this.triggerInputFile})):t.view===Pe?Y.createElement(Pe,(0,F.default)({},f(t.onboardingPage),{heading:!1,isInvalid:this.state.isInvalid,errorMessage:this.state.errorMessage,onClickResendEmail:v})):t.view===xe?Y.createElement(xe,(0,F.default)({},f(t.onboardingPage),{password:this.state.password,minLength:5,isInvalid:this.state.isInvalid,errorMessage:this.state.errorMessage,onFocus:this.props.onFocusInput,onChange:this.onChangePassword,onBlur:this.props.onBlurInput,onSubmit:this.onSubmitForm,onInputAreaClick:this.onInputAreaClick})):t.view===Ne?Y.createElement(Ne,(0,F.default)({},f(t.onboardingPage),{digits:this.state.digits,isCalling:this.state.isCalling,isAboutToCall:this.state.isAboutToCall,isCheckingForm:this.state.isCheckingForm,isInvalid:this.state.isInvalid,errorMessage:this.state.errorMessage,onChangeNumber:this.onClickBack,onChangeDigit:this.onChangeDigit,onStartPhoneCall:this.onStartPhoneCall,onSubmit:this.onSubmitForm})):t.view===Ae?Y.createElement(Ae,{page:t.onboardingPage,onAccepted:function(){e.getCurrentScreen().screenName=824,ne.track(Xe)},onFinished:this.onPledgeFinished}):void 0}},{key:"isMaleUser",value:function(){return 1===this.state.user.gender}},{key:"onClickMale",value:function(){var e=this;ne.track(Ke,{element:336}),this.setState(function(e){return{user:(0,L.default)({},e.user,{gender:1})}}),this.onClickContinue(),u(1).then(function(t){t&&t.isInvalid&&(A(t),e.setState(function(e){return{user:(0,L.default)({},e.user,{gender:2})}}))})}},{key:"isFemaleUser",value:function(){return 2===this.state.user.gender}},{key:"onClickFemale",value:function(){var e=this;ne.track(Ke,{element:337}),this.setState(function(e){return{user:(0,L.default)({},e.user,{gender:2})}}),this.onClickContinue(),u(2).then(function(t){t&&t.isInvalid&&(A(t),e.setState(function(e){return{user:(0,L.default)({},e.user,{gender:1})}}))})}},{key:"onChangeName",value:function(e){var t=e.target.value;this.setState(function(e){return{isInvalid:!1,user:(0,L.default)({},e.user,{name:t})}})}},{key:"onBlurDob",value:function(e){if(e){var t=e.target.value;this.setState(function(e){return{isInvalid:!1,user:(0,L.default)({},e.user,{dob:t})}})}this.props.onBlurInput&&this.props.onBlurInput()}},{key:"onChangeDob",value:function(e){var t=e.target.value;this.setState(function(e){return{isInvalid:!1,user:(0,L.default)({},e.user,{dob:t})}})}},{key:"onChangeEmail",value:function(e){this.setState(function(t){return{user:(0,L.default)({},t.user,{email:e})}})}},{key:"onChangePhoneNumber",value:function(e){var t=e.target.value;this.setState(function(e){return{isInvalid:!1,user:(0,L.default)({},e.user,{phone:t})}})}},{key:"onChangeCountryCode",value:function(e){var t=e.target.value;this.setState(function(e){var i,n=[];return e.listCountries.forEach(function(e){var a=(0,L.default)({},e);a.value===t?(a.selected=!0,i=a.id):a.selected=!1,n.push(a)}),{isInvalid:!1,listCountries:n,selectedCountryId:i}})}},{key:"getCurrentLocation",value:function(){return this.state.user.city&&this.state.user.city.name||this.state.searchStringLocation}},{key:"onChangeLocation",value:function(e){var t=e.target.value;this.setState(function(e){return{searchStringLocation:t,user:(0,L.default)({},e.user,{city:null})}}),t.length>=3?(this.setState({isSearchingCities:!0}),this.searchLocation(t)):this.setState({cities:[]})}},{key:"searchLocation",value:function(e){var t=this;_e.getInstance().get(e,{limit:10}).then(function(e){return t.setState({cities:e,isSearchingCities:!1})})}},{key:"onSelectLocation",value:function(e,t){var i=this;this.setState(function(e){return{isInvalid:!1,searchStringLocation:"",cities:[],user:(0,L.default)({},e.user,{city:t})}},function(){i.inputRef&&i.inputRef.current&&i.inputRef.current.focus()})}},{key:"onClearLocation",value:function(){var e=this;this.setState(function(e){return{searchStringLocation:"",cities:[],user:(0,L.default)({},e.user,{city:null})}},function(){e.inputRef&&e.inputRef.current&&e.inputRef.current.focus()})}},{key:"onUploadedPhoto",value:function(e){if(e=e||{},this.setState({isLoading:!1}),e.photo_url){var t={id:e.photo_id,largeUrl:e.photo_url};this.setState(function(e){return{photo:t,user:(0,L.default)({},e.user,{photoCount:1})}}),n=(i=t).id,a=i.largeUrl,o=(new je).setId(n).setLargeUrl(a),s=W.getUser(),de.getInstance().invalidate(s.getUserId()),s.setPhotoCount(1),s.setProfilePhoto(o)}var i,n,a,o,s}},{key:"getPhotos",value:function(){return this.state.photo.id&&this.state.photo.largeUrl?[{id:this.state.photo.id,src:this.state.photo.largeUrl}]:[]}},{key:"onChangePassword",value:function(e){var t=e.target.value;this.setState({isInvalid:!1,password:t})}},{key:"onChangeDigit",value:function(e,t){var i=t.target.value.trim();i.length>1&&(i=i.charAt(0)),this.setState(function(t){return{isInvalid:!1,digits:[].concat((0,B.default)(t.digits.slice(0,e)),[{value:i,id:e}],(0,B.default)(t.digits.slice(e+1)))}})}},{key:"switchToEmailMethod",value:function(){ne.track(Ke,{element:315}),this.resetErrorState(),this.setState({screens:n(1),showSignIn:!1})}},{key:"switchToPhoneMethod",value:function(){ne.track(Ke,{element:300}),this.setState({screens:n(3),showSignIn:!1})}},{key:"onClickClose",value:function(){ne.track(Ke,{element:51}),this.onClickBack()}},{key:"onClickBack",value:function(e){Boolean(e)&&ne.track(Ke,{element:52}),this.resetErrorState();var t=this.getCurrentScreen();0===this.state.indexCurrentScreen||t.view===Ae?K.navigate(Q.get("default.page")):this.setState({isAboutToCall:!1,isCalling:!1,isCallMade:!1,startPhoneVerification:!1,indexCurrentScreen:this.state.indexCurrentScreen-1})}},{key:"isLastScreen",value:function(){return this.state.indexCurrentScreen+1===this.state.screens.length}},{key:"onSubmitForm",value:function(e){e.preventDefault(),this.onClickContinue(e)}},{key:"onPledgeFinished",value:function(){this.onClickContinue()}},{key:"onClickContinue",value:function(e){var t=this;if(!this.state.isCheckingForm&&!this.getIsContinueButtonDisabled()){var i,n=this.getCurrentScreen(),a=Boolean(w(this.state));if(a){if(n.view===Ce)return void this.setState(function(e){return{confirmationModal:{},user:(0,L.default)({},e.user,{marketing_subscription:!0})}});this.setState({isCheckingForm:!0,confirmationModal:{}})}Boolean(e)&&!a&&ne.track(Ke,{element:395}),n.continueCallback?(this.resetErrorState(),this.setState({isCheckingForm:!0}),i=n.continueCallback(this.state,n)):i=Promise.resolve({isInvalid:!1,errorMessage:""}),i.then(function(e){if(w(e=e||{})){t.updateOnboardingPages(e);var i={isCheckingForm:!1,isCalling:!1,isAboutToCall:!1,confirmationModal:e.confirmationModal};e.phoneNumberVerificationType&&(3===e.phoneNumberVerificationType&&(i.isAboutToCall=!0),i.phoneNumberVerificationType=e.phoneNumberVerificationType),t.setState(i)}else!e.isInvalid&&t.isLastScreen()?t.onRegistrationCompleted():t.handleContinueResponse(e)})}}},{key:"updateOnboardingPages",value:function(e,t){return e.onboardingPages&&(t=n(y(t=t||this.state.screens),!1,e.onboardingPages),this.setState({digits:E(),screens:t})),t}},{key:"handleContinueResponse",value:function(e){var t=this.getCurrentScreen(),i=this.state.screens,a=this.state.indexCurrentScreen,o=!1;if(e.isInvalid)A(e,{eventType:t.view===Ne?10:null});else{var s=this.getCurrentScreen().onboardingPage;s&&function(e){k(e,10)}(s),t.view===Ne?(I(),o=!0):t.view===xe?(ot.add(xe),o=!0):t.view===Te?(ot.add(Te),o=!0):a++}o&&(a=function(e,t){var i=e[t+1];if(!i)return t;var a=n(y(e)).indexOf(i);return a>-1?a:t}(i,a),i=n(y(i)),this.setState({screens:i})),i=this.updateOnboardingPages(e,i);var r=Boolean(T(i,a))&&!this.state.isAboutToCall&&!this.state.isCallMade,l=("email"===t.step||"phone"===t.step)&&e.isInvalid&&25===e.errorType;this.setState({isCheckingForm:!1,startPhoneVerification:r,errorMessage:e.errorMessage,isInvalid:e.isInvalid,indexCurrentScreen:a,showSignIn:l}),e.triggerUploadPhoto&&this.triggerInputFile()}},{key:"getLabelContinueButton",value:function(){var e,t=this.getCurrentScreen();return t.view===Ie&&0===this.state.user.photoCount?e=x(t.onboardingPage.getPromo()):t.view===Te&&(e=x(t.onboardingPage.getPromo())),e||X.get(21)}},{key:"getIsContinueButtonHidden",value:function(){return this.getCurrentScreen().hideContinueButton}},{key:"hideExternalProvider",value:function(){return et.includes(this.getCurrentScreen().view)}},{key:"getIsContinueButtonDisabled",value:function(){var e=this.getCurrentScreen();return!!this.state.isInvalid||(e.view===xe?this.state.password.length<5:e.view===Te?!Boolean(this.state.user.city):!e.hideContinueButton&&""===this.state.user[e.step])}},{key:"resetErrorState",value:function(){this.setState({isInvalid:!1,errorMessage:""})}},{key:"updateRegistrationUrl",value:function(e){if(!W.isLoggedIn()){var t=K.getLocation().routeName,i=this.getCurrentScreen();K.navigate(t,e,(0,L.default)({},this.state.user,{birthday:this.state.user.dob,step:i.step,countryId:this.state.selectedCountryId}))}}},{key:"onClickExternalProvider",value:function(){var e=this;ne.track(Ke,{element:118}),this.setState({isLoading:!0}),W.isLoggedIn()?J.getProvider({providerContext:14,providerType:1}).then(function(t){return e.setState({externalProviderId:t.getId()}),J.startImport({providerContext:14,providerType:1,providerId:t.getId(),dontRedirect:!0})}).then(this.onImportPhotoProgress).catch(function(){ve.showNotification({type:ve.TYPES.ERROR}),e.setState({isLoading:!1})}):J.login({providerContext:3,providerType:1,needsAppLogin:!0})}},{key:"onLinkedExternalProviderOnboarding",value:function(e){var t=(0,M.default)(e,1)[0];if(t instanceof Be){var i=t.getOnboardingConfig([]),n=i&&i.getPages([]);return 0===n.length?void this.onRegistrationCompleted():(this.updateOnboardingPages({onboardingPages:n}),void this.setState(function(e){return{isLoading:!1,indexCurrentScreen:s(null,e.user,e.screens)}}))}this.onErrorLinkExternalProviderOnboarding(t)}},{key:"onErrorLinkExternalProviderOnboarding",value:function(){ve.showNotification({type:ve.TYPES.ERROR}),this.setState({isLoading:!1})}},{key:"onImportPhotoProgress",value:function(e){var t=this;if(e instanceof De&&e.getSuccess()&&e.getComplete()){var i=e.getPhotoImportProgressData(),n=i&&i.getAlbums([])[0],a=n&&n.getPhotos([]);if(a&&a.length>0)return void te.uploadMedia({photos:a.map(function(e){return e.getId()}),photoToReplace:this.state.photo&&this.state.photo.id,providerId:this.state.externalProviderId,providerType:1,activationPlace:66,albumId:n.getUid(),albumType:2,mediaType:te.MediaType.PHOTO}).then(function(e){var i=e&&e.getPhotos([])[0];i&&(t.onUploadedPhoto({photo_id:i.getId(),photo_url:i.getLargeUrl()}),ee.getInstance().get({providerId:t.state.externalProviderId}).then(t.onLinkedExternalProviderOnboarding).catch(t.onErrorLinkExternalProviderOnboarding))}).catch(function(){t.setState({isLoading:!1})});ve.showNotification({text:X.get(151),type:ve.TYPES.ERROR})}this.setState({isLoading:!1})}},{key:"onErrorExternalProvider",value:function(){this.setState({isLoading:!1})}},{key:"onBrowserNavigation",value:function(e){e&&e.browserNavigation&&e.back&&(this.props.onBlurInput&&this.props.onBlurInput(),this.onClickBack())}},{key:"showLoading",value:function(){this.setState({isLoading:!0})}},{key:"triggerInputFile",value:function(){var e=this.getCurrentScreen();k(e.onboardingPage,1),this.setState({isInvalid:!1}),oe.start({uploadUrl:ie(4),albumType:2,multiple:!1})}},{key:"getPercentageProgressBar",value:function(){if(!this.getCurrentScreen().hideProgressBar){var e=this.props.onboardingPages?this.state.screens.length:this.state.screens.length+4;return this.state.indexCurrentScreen/e*100}}},{key:"getStepFromProps",value:function(){var e=this.props.step;return!!function(e){return Boolean(Ze.find(function(t){return t.step===e}))}(e)&&e}},{key:"onRegistrationCompleted",value:function(){K.back(),this.props.onRegistrationCompleted()}},{key:"onSystemNotification",value:function(e){7===e.getId()&&(this.getCurrentScreen().view===Pe?this.onRegistrationCompleted():I())}},{key:"onClickConfirmModal",value:function(e){var t=this.getCurrentScreen();t.view===Ce?ne.track(We,{alert_type:55,activation_place:66,action_type:2}):t.view===we&&ne.track(We,{alert_type:48,activation_place:66,action_type:2}),this.onClickContinue(e)}},{key:"onClickCancelModal",value:function(){this.resetErrorState(),this.setState({confirmationModal:{}});var e=this.getCurrentScreen();e.view===Ce?(ne.track(We,{alert_type:55,activation_place:66,action_type:5}),this.setState(function(e){return{user:(0,L.default)({},e.user,{marketing_subscription:!1})}})):e.view===we&&ne.track(We,{alert_type:48,activation_place:66,action_type:5})}},{key:"getDefaultPhoneCallLength",value:function(){var e,t=this.getCurrentScreen();if(t&&t.onboardingPage&&17===t.onboardingPage.getType()){var i=t.onboardingPage.getVerificationMethods([])[0];e=i&&3===i.getPhoneNumberVerificationType()&&i.getSecondsToWait()}return 1e3*(e||30)}},{key:"updatePhoneVerificationMethod",value:function(e){var t=this,i=this.getCurrentScreen();if(i&&i.onboardingPage){clearTimeout(this.timeoutIdPhoneCall_),i.onboardingPage.setVerificationMethods([e]);var n=3===e.getPhoneNumberVerificationType()?5e3:0;setTimeout(function(){t.setState(function(e){return{isCalling:!1,isCallMade:!0,screens:[].concat((0,B.default)(e.screens.slice(0,t.state.indexCurrentScreen)),[i],(0,B.default)(e.screens.slice(t.state.indexCurrentScreen+1)))}})},n)}}},{key:"onGetPhoneVerificationData",value:function(e){if(e instanceof Fe){re.getInstance().clearPhoneVerificationNotification();var t=function(e){var t=e.getVerifiedSource();return(t?t.getMethods():[]).find(function(e){return 1===e.getType()})}(e);if(!t)return;t.hasVerificationData()?this.updatePhoneVerificationMethod(t):this.getPhoneVerificationData()}}},{key:"getPhoneVerificationData",value:function(){this.setState({startPhoneVerification:!1});var e=d(this.state.listCountries,this.state.selectedCountryId),t=this.state.user.phone,i={methodType:1,token:t,phonePrefix:e,phone:t,reset:!1};3===this.state.phoneNumberVerificationType&&(this.schedulePhoneCallEnded(),this.setState({isCalling:!0})),he.getInstance().setVerified(i).then(this.onGetPhoneVerificationData)}},{key:"schedulePhoneCallEnded",value:function(){var e=this;clearTimeout(this.timeoutIdPhoneCall_),this.timeoutIdPhoneCall_=setTimeout(function(){e.setState({isCalling:!1})},this.getDefaultPhoneCallLength())}},{key:"bindMethods",value:function(){this.getPhoneVerificationData=$.debounce(this.getPhoneVerificationData.bind(this),1500,{leading:!0}),this.onRegistrationCompleted=this.onRegistrationCompleted.bind(this),this.checkUserAnsweredEmailPrefs=this.checkUserAnsweredEmailPrefs.bind(this),this.onClickMale=this.onClickMale.bind(this),this.onClickFemale=this.onClickFemale.bind(this),this.onChangeName=this.onChangeName.bind(this),this.onChangeDob=this.onChangeDob.bind(this),this.onBlurDob=this.onBlurDob.bind(this),this.onChangeEmail=this.onChangeEmail.bind(this),this.onChangePhoneNumber=this.onChangePhoneNumber.bind(this),this.onChangeCountryCode=this.onChangeCountryCode.bind(this),
this.onChangeLocation=this.onChangeLocation.bind(this),this.onSelectLocation=this.onSelectLocation.bind(this),this.onClearLocation=this.onClearLocation.bind(this),this.onUploadedPhoto=this.onUploadedPhoto.bind(this),this.triggerInputFile=this.triggerInputFile.bind(this),this.onChangePassword=this.onChangePassword.bind(this),this.onChangeDigit=this.onChangeDigit.bind(this),this.switchToEmailMethod=this.switchToEmailMethod.bind(this),this.switchToPhoneMethod=this.switchToPhoneMethod.bind(this),this.onClickBack=this.onClickBack.bind(this),this.onClickClose=this.onClickClose.bind(this),this.onSubmitForm=this.onSubmitForm.bind(this),this.onClickContinue=this.onClickContinue.bind(this),this.onClickExternalProvider=this.onClickExternalProvider.bind(this),this.onImportPhotoProgress=this.onImportPhotoProgress.bind(this),this.onErrorExternalProvider=this.onErrorExternalProvider.bind(this),this.onBrowserNavigation=this.onBrowserNavigation.bind(this),this.onClickConfirmModal=this.onClickConfirmModal.bind(this),this.onClickCancelModal=this.onClickCancelModal.bind(this),this.onGetPhoneVerificationData=this.onGetPhoneVerificationData.bind(this),this.onInputAreaClick=this.onInputAreaClick.bind(this),this.goToSignIn=this.goToSignIn.bind(this),this.onStartPhoneCall=this.onStartPhoneCall.bind(this),this.onLinkedExternalProviderOnboarding=this.onLinkedExternalProviderOnboarding.bind(this),this.onErrorLinkExternalProviderOnboarding=this.onErrorLinkExternalProviderOnboarding.bind(this),this.onPledgeFinished=this.onPledgeFinished.bind(this)}},{key:"onFeaturesUpdate",value:function(e){29===e.getFeature()&&(e.getEnabled()?ot.delete(Te):ot.add(Te),this.setState(function(e){return{screens:n(y(e.screens))}}))}},{key:"getDataQaPage",value:function(){var e=this.getCurrentScreen();return"reg-page-".concat(e.step||"")}},{key:"getScreenName",value:function(){return C(this.state.screens,this.state.indexCurrentScreen)?3===this.state.phoneNumberVerificationType?this.state.isAboutToCall?667:this.state.isCalling?346:499:348:(this.state.screens[this.state.indexCurrentScreen]||{}).screenName||204}},{key:"onInputAreaClick",value:function(){var e=this.inputRef.current;e&&e.focus()}},{key:"goToSignIn",value:function(){var e=this,t="";if(this.state.countriesRetrieved){var i=this.state.listCountries.filter(function(t){return t.id===e.state.selectedCountryId})[0];i&&(t=i.phone_prefix)}K.navigate("signin",{login:"".concat(t).concat(this.state.user.phone)})}},{key:"checkPhoneConfirmationScreen",value:function(){C(this.state.screens,this.state.indexCurrentScreen)&&(P(this.state.screens,this.state.indexCurrentScreen)||this.setState({startPhoneVerification:!0}))}},{key:"onStartPhoneCall",value:function(){this.setState({isAboutToCall:!1,startPhoneVerification:!0}),ne.track(Ke,{element:288})}},{key:"checkUserAnsweredEmailPrefs",value:function(){return"boolean"==typeof this.state.user.marketing_subscription}},{key:"initUserCountry",value:function(){var e=this;ue.get().then(function(t){var i=h((0,M.default)(t,1)[0].getUserCountry()),n={};e.state.selectedCountryId||(n.selectedCountryId=i.id),e.state.countriesRetrieved||(n.listCountries=[i]),(n.selectedCountryId||n.listCountries)&&e.setState(n)})}}]),t}(Y.Component);e.exports=rt},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ExternalProviderSecurityCredentials,s=a.extend({name:"LinkExternalProviderOnboarding",useCache_:!1,getRequestMessageType:633,getResponseMessageType:634,get:function(e){var t=e.oauthToken,i=(new o).setProviderType(1).setNativelyAuthenticated(!1);return t&&i.setOauthToken(t),s._super.get.call(this,i)}},"LinkExternalProviderOnboarding");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<form class="photo-form" action="photoUpload" method="post" enctype="multipart/form-data"><input class="file-picker" type="file" accept="image/*" name="').f(t.get(["inputFile"],!1),t,"h").w('"/><input type="hidden" name="').f(t.get(["inputAlbumType"],!1),t,"h").w('" class="album-type" value=""/></form>')}return e.register("file-picker",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=i(125).getLogger("UploadQueue"),r=function(){function e(t){var i=t.files;(0,a.default)(this,e),this.queue=[],this.errorQueue=[],this.successQueue=[],this.append(i)}return(0,o.default)(e,[{key:"add",value:function(e){this.queue.push({file:e,status:{finished:!1,error:null,data:null}})}},{key:"append",value:function(e){e&&e.length>0&&e.forEach(this.add.bind(this))}},{key:"getNextFile",value:function(){return this.currentUpload?void s.error("Trying to get the next file in the queue whilst there is a current upload"):(this.currentUpload=this.queue.shift(),this.currentUpload&&this.currentUpload.file)}},{key:"updateStatus",value:function(e){this.currentUpload?(this.currentUpload.status=e,!0===e.finished&&(e.error?this.errorQueue.push(this.currentUpload):this.successQueue.push(this.currentUpload),this.currentUpload=null)):s.error("Trying to update the status when there is not a current upload")}},{key:"isUploading",value:function(){return Boolean(this.currentUpload)}},{key:"getUploadedData",value:function(){return this.successQueue.map(function(e){return e.status.data})}},{key:"getFinishedUploads",value:function(){return this.errorQueue.length+this.successQueue.length}},{key:"getTotalUploads",value:function(){var e=this.getFinishedUploads()+this.queue.length;return this.isUploading()?e+1:e}},{key:"hasFailedUploads",value:function(){return this.errorQueue.length>0}}]),e}();e.exports=r},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerSwitchRegistrationLogin,s=a.extend({name:"SwitchRegistrationLogin",useCache_:!1,setRequestMessageType:511,setResponseMessageType:17,switchEmailLogin:function(e){var t=new o;return t.setEmail(e),this.set(t)},switchPhoneLogin:function(e,t){var i=new o;return i.setPhone(e),i.setPhonePrefix(t),this.set(i)}},"SwitchRegistrationLogin");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerChangeEmail,s=a.extend({name:"ResendEmail",useCache_:!1,setRequestMessageType:462,setResponseMessageType:387,resendEmail:function(e){var t=e||{},i=t.email,n=t.password,a=t.context,s=new o;return i&&s.setUpdatedEmail(i),n&&s.setCurrentPassword(n),a&&s.setContext(a),this.set(s)}},"ResendEmail");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerValidatePhoneNumber,s=a.extend({name:"ValidatePhoneNumber",useCache_:!1,setRequestMessageType:640,setResponseMessageType:489,validatePhoneNumber:function(e){var t=e||{},i=t.phonePrefix,n=t.phone,a=t.context,s=new o;return i&&s.setPhonePrefix(i),n&&s.setPhone(n),a&&s.setContext(a),this.set(s)}},"ValidatePhoneNumber");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(123)),c=n(i(116)),u=i(98),d=i(113),h=i(99),p=i(3207),m=i(180),g=i(335),_=i(133),f=i(138),v=i(185),E=i(281),b=i(332),y=i(333),k=i(231),S=i(170),w=i(182),C=i(198),T=i(223),P=i(181),N=i(154),I=i(229),x=function(e){function t(){var e;return(0,a.default)(this,t),(e=(0,s.default)(this,(0,r.default)(t).call(this))).state={showNavigationShadow:!1},e.onScroll=e.onScroll.bind((0,l.default)(e)),e}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onScroll)}},{key:"onScroll",value:function(e){this.setState({showNavigationShadow:e.currentTarget.pageYOffset>0})}},{key:"render",value:function(){var e=this.props,t=e.children,i=e.dataQaPage,n=e.screenNavigation,a=e.showEmptyNavigation,o=e.onClickBack,s=e.onClickClose,r=e.onClickContinue,l=e.onClickExternalProvider,c=e.labelContinueButton,x=e.isContinueButtonHidden,A=e.hideExternalProvider,O=e.isContinueButtonDisabled,V=e.isCheckingForm,R=e.progressBarValue,B=e.isLoading,L=e.confirmationModal,F=e.onClickConfirmModal,M=e.onClickCancelModal,D=!1,U=!0,j=this.props.screenTitle;a&&(D=!0,U=!1,j=null);var G=n&&"back"===n,q=n&&"close"===n,H=[];return x||H.push(u.createElement("div",{className:"needsclick",style:{width:"100%"},onClick:r,key:1},u.createElement(N,{text:c,isLoading:V,isDisabled:O,dataQA:{"data-qa":"continue-button"}}))),A||H.push(u.createElement(N,{type:"link",text:d.isLoggedIn()&&"reg-page-add-photo"===i?h.get(314):h.get(656),key:0,onClick:l,dataQA:{"data-qa":"facebook-button"}})),u.createElement(u.Fragment,null,"number"==typeof R?u.createElement(p,{value:R}):null,u.createElement(_,{dataQA:{"data-qa-reg-page":i}},u.createElement(f,null,u.createElement(S,{position:"fixed",transparent:D,shadow:this.state.showNavigationShadow},u.createElement(w,null,G?u.createElement(P,{name:"navigation-bar-back",onClick:o}):null,q?u.createElement(P,{name:"navigation-bar-close",onClick:s}):null),j?u.createElement(T,{text:j}):null,u.createElement(C,null)),U?u.createElement(S,null):null),t,u.createElement(v,{hpadded:!0,vpadded:!0},u.createElement(I,null,H))),L?u.createElement(m,{isVisible:!0,allowClickOutside:!1},u.createElement(E,null,u.createElement(b,{text:L.header}),u.createElement(y,{text:L.message})),u.createElement(k,{text:L.primaryLabel||h.get(6),type:"primary",onClick:F,dataQA:{"data-qa":"modal-action-ok"}}),u.createElement(k,{text:L.cancelLabel||h.get(19),type:"cancel",onClick:M,dataQA:{"data-qa":"modal-action-cancel"}})):null,B?u.createElement(g,null):null)}}]),t}(u.Component);e.exports=x},function(e,t,i){"use strict";function n(e){var t=e.value;return a.createElement("div",{className:"registration-progress-bar"},a.createElement("div",{className:"registration-progress-bar__value",style:{width:"".concat(t,"%")}}))}var a=i(98),o={value:i(104).number};n.propTypes=o,n.defaultProps={value:0},e.exports=n},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(3209),s=i(130),r=i(229),l=i(145),c=i(120).Header1,u=i(461),d=i(3210),h=i(3211);e.exports=function(e){var t=e.isMaleSelected,i=e.isFemaleSelected,p=e.onClickMale,m=e.onClickFemale;return u.hit(),n.createElement(n.Fragment,null,n.createElement(s,{hpadded:!0,vpadded:!0},n.createElement(c,{align:"center"},a.get(729),n.createElement("br",null),a.get(730))),n.createElement(s,{hpadded:!0,align:"center"},n.createElement(l,{bottom:"xxlg"},u.showGenderIcons?n.createElement(d,null,n.createElement(h,{label:a.get(360),iconName:"avatar-gender-male-circle",onClick:p,dataQa:"gender-male-button"}),n.createElement(h,{label:a.get(361),iconName:"avatar-gender-female-circle",onClick:m,dataQa:"gender-female-button"})):n.createElement(r,null,n.createElement(o,{text:a.get(360),isSelected:t,onClick:p,dataQa:{"data-qa":"gender-male-button"}}),n.createElement(o,{text:a.get(361),isSelected:i,onClick:m,dataQa:{"data-qa":"gender-female-button"}})))))}},function(e,t,i){"use strict";var n=i(98),a=i(154);e.exports=function(e){var t=e.text,i=e.icon,o=e.onClick,s=e.isSelected,r=e.dataQa;return n.createElement(a,{type:s?"stroke":"monochrome",text:t,icon:i,onClick:o,dataQA:r})}},function(e,t,i){"use strict";function n(e){var t=e.children;return o.default.createElement("div",{className:"gender-selection"},o.default.Children.map(t,function(e,t){return o.default.createElement("div",{className:"gender-selection__action",key:"gender-selection-action-".concat(t)},e)}))}var a=i(3);t.__esModule=!0,t.default=void 0;var o=a(i(98)),s={children:a(i(104)).default.any};n.propTypes=s;var r=n;t.default=r,e.exports=t.default},function(e,t,i){"use strict";function n(e){var t=e.label,i=e.iconName,n=e.onClick,a=e.dataQa;return o.default.createElement("div",{className:"gender-selection-action",onClick:n,"data-qa":a},o.default.createElement("div",{className:"gender-selection-action__icon"},o.default.createElement(r,{name:i,size:"jumbo-md"})),o.default.createElement("div",{className:"gender-selection-action__title"},t))}var a=i(3);t.__esModule=!0,t.default=void 0;var o=a(i(98)),s=a(i(104)),r=i(106),l={label:s.default.oneOfType([s.default.string,s.default.object]),iconName:s.default.string,onClick:s.default.func,dataQa:s.default.string};n.propTypes=l;var c=n;t.default=c,e.exports=t.default},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(234),s=i(290),r=i(594),l=i(130),c=i(145),u=i(120).Header1;e.exports=function(e){var t=e.name,i=e.isInvalid,d=e.errorMessage,h=e.onFocus,p=e.onChange,m=e.onBlur,g=e.onSubmit,_=e.onInputAreaClick,f=e.inputRef;return n.createElement(n.Fragment,null,n.createElement(l,{hpadded:!0,vpadded:!0},n.createElement(c,{bottom:"xxlg"},n.createElement(u,{align:"center"},a.get(647)))),n.createElement(l,{hpadded:!0},n.createElement("div",{onClick:_},n.createElement(c,{top:"xxlg",bottom:"lg"},n.createElement(o,{onSubmit:g},n.createElement(s,{narrow:!0,centered:!0,description:a.get(648),isInvalid:i,errorMessage:d,dataQaErrorMessage:"error-message"},n.createElement(r,{innerRef:f,autoFocus:!0,value:t,isInvalid:i,onFocus:h,onChange:p,onBlur:m,dataQa:"name-input"})))))))}},function(e,t,i){"use strict";function n(e){var t=e.dateFormat,i=e.date,n=e.minDob,a=e.maxDob,o=e.isInvalid,s=e.errorMessage,r=e.onFocus,l=e.onChange,c=e.onBlur;return void 0===t?null:t?d.createElement(v,{dateFormat:t,date:i,description:h.get(649),autoFocus:!p.os.ios,isInvalid:o,errorMessage:s,onFocus:r,onChange:l,onBlur:c,dataQaErrorMessage:"error-message"}):d.createElement(_,{narrow:!0,centered:!0,description:h.get(649),isInvalid:o,errorMessage:s,dataQaErrorMessage:"error-message"},d.createElement(f,{value:i||a,min:n,max:a,onBlur:c,onChange:l,dataQaInputWrapper:"date-input-wrapper",dataQaInput:"date-input"}))}var a=i(3),o=a(i(144)),s=a(i(110)),r=a(i(112)),l=a(i(114)),c=a(i(115)),u=a(i(116)),d=i(98),h=i(99),p=i(25),m=i(3214),g=i(234),_=i(290),f=i(3215),v=i(3217),E=i(130),b=i(145),y=i(120).Header1,k=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).state={},i}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this;(new m).getDateFormat().then(function(t){return e.setState({dateFormat:t})})}},{key:"render",value:function(){var e=this.props.userName;return d.createElement(d.Fragment,null,d.createElement(E,{hpadded:!0,vpadded:!0},d.createElement(b,{bottom:"xxlg"},d.createElement(y,{align:"center",breakWords:!0},h.get(650,e)))),d.createElement(E,{hpadded:!0},d.createElement(b,{top:"xxlg",bottom:"lg"},d.createElement(g,null,d.createElement(n,(0,o.default)({dateFormat:this.state.dateFormat},this.props))))))}}]),t}(d.Component);e.exports=k},function(e,t,i){"use strict";function n(){}function a(e,t){return{keyPart:e,position:t.getPosition(),title:t.getTitle(),placeholder:t.getPlaceholder(),length:t.getLength()}}var o,s=i(3),r=s(i(4)),l=s(i(107)),c=i(161),u={DAY:"day",MONTH:"month",YEAR:"year"},d=(o={},(0,l.default)(o,u.YEAR,{y1:{placeholder:"Y",dateIndex:0,sequenceIndex:4},y2:{placeholder:"Y",dateIndex:1,sequenceIndex:5},y3:{placeholder:"Y",dateIndex:2,sequenceIndex:6},y4:{placeholder:"Y",dateIndex:3,sequenceIndex:7}}),(0,l.default)(o,u.MONTH,{m1:{placeholder:"M",dateIndex:4,sequenceIndex:2},m2:{placeholder:"M",dateIndex:5,sequenceIndex:3}}),(0,l.default)(o,u.DAY,{d1:{placeholder:"D",dateIndex:6,sequenceIndex:0},d2:{placeholder:"D",dateIndex:7,sequenceIndex:1}}),o);n.prototype={getDateFormat:function(){return void 0!==this.dateFormat_?Promise.resolve(this.dateFormat_):c.get().then(this.onGetCommonSettings_.bind(this)).catch(this.onErrorGetCommonSettings_.bind(this))},setDateFormat_:function(e){this.dateFormat_=e},onGetCommonSettings_:function(e){var t,i,n=(0,r.default)(e,1)[0];if(!n.hasDateFormat())throw new Error("CommonSettings does not have date_format. Falling back to default format.");return this.setDateFormat_((t=n.getDateFormat(),(i=[a(u.DAY,t.getDay()),a(u.MONTH,t.getMonth()),a(u.YEAR,t.getYear())]).sort(function(e,t){return e.position-t.position}),function(e){var t=0;return e.map(function(e){var i=d[e.keyPart],n=e.placeholder,a=Math.max(Math.floor(n.length/e.length),1),o=n.match(new RegExp(".{1,".concat(a,"}"),"g")),s={};return Object.keys(i).forEach(function(e,n){var a=i[e];s[e]={placeholder:o[n],dateIndex:a.dateIndex,sequenceIndex:t++}}),{keyPart:e.keyPart,title:e.title,digits:s}})}(i))),this.dateFormat_},onErrorGetCommonSettings_:function(){return this.setDateFormat_(null),this.dateFormat_}},n.DATE_KEY_PARTS=u,e.exports=n},function(e,t,i){"use strict";function n(e){var t=e.value,i=e.min,n=e.max,s=e.onChange,u=e.onBlur,d=e.dataQaInputWrapper,h=e.dataQaInput,p=r({input:!0}),m=r({input__field:!0});return o.createElement("div",{className:"control__field"},o.createElement("div",{className:p},o.createElement("div",{className:m},o.createElement("div",{className:"date-select-singular","data-qa":d},c?o.createElement("input",{type:"date",value:t,min:i,max:n,onChange:s,onBlur:u,"data-qa":h,className:"has-date"}):o.createElement(l,{value:t,minYear:a(i),maxYear:a(n),onChange:s,onBlur:u})))))}function a(e){return e.substr(0,4)}var o=i(98),s=i(104),r=i(117),l=i(3216),c=i(5).supportsDateInput(),u={value:s.string,min:s.string,max:s.string,onChange:s.func,onBlur:s.func};n.propTypes=u,n.defaultProps={value:"",min:"",max:"",onChange:null,onBlur:null},e.exports=n},function(e,t,i){"use strict";function n(e){var t=e.year,i=e.month,n=e.day;return i&&1===i.length&&(i="0".concat(i)),n&&1===n.length&&(n="0".concat(n)),"".concat(t,"-").concat(i,"-").concat(n)}var a=i(3),o=a(i(4)),s=a(i(110)),r=a(i(112)),l=a(i(114)),c=a(i(115)),u=a(i(123)),d=a(i(116)),h=i(98),p=i(104),m=i(99),g={value:p.string,minYear:p.string,maxYear:p.string,onChange:p.func,onBlur:p.func},_=function(e){function t(e){var i;(0,s.default)(this,t),i=(0,l.default)(this,(0,c.default)(t).call(this,e));var n=(e.value||"").split("-"),a=(0,o.default)(n,3),r=a[0],d=a[1],h=a[2];return i.state={year:r,month:d,day:h},i.onChangeYear=i.onChangeYear.bind((0,u.default)(i)),i.onChangeMonth=i.onChangeMonth.bind((0,u.default)(i)),i.onChangeDay=i.onChangeDay.bind((0,u.default)(i)),i.onBlurYear=i.onBlurYear.bind((0,u.default)(i)),i.onBlurMonth=i.onBlurMonth.bind((0,u.default)(i)),i.onBlurDay=i.onBlurDay.bind((0,u.default)(i)),i}return(0,d.default)(t,e),(0,r.default)(t,[{key:"componentDidUpdate",value:function(e,t){var i=n(this.state);if(i!==n(t)){this.isValidDate()||(i="");var a={target:{value:i}};this.props.onChange&&this.props.onChange(a),this.props.onBlur&&this.props.onBlur(a)}}},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement("select",{key:"select-day",name:"day",value:this.state.day?Number(this.state.day):"",onChange:this.onChangeDay,onBlur:this.onBlurDay},function(){for(var e=[],t=1;t<32;t++)e.push({value:t,label:t});return e}().map(function(e){return h.createElement("option",{key:"day-".concat(e.value),value:e.value},e.label)})),h.createElement("select",{key:"select-month",name:"month",value:this.state.month?Number(this.state.month):"",onChange:this.onChangeMonth,onBlur:this.onBlurMonth},function(){for(var e=[],t=1;t<13;t++)e.push({value:t,label:m.getTranslatedMonth(t)});return e}().map(function(e){return h.createElement("option",{key:"month-".concat(e.value),value:e.value},e.label)})),h.createElement("select",{key:"select-year",name:"year",value:this.state.year?Number(this.state.year):"",onChange:this.onChangeYear,onBlur:this.onBlurYear},function(e,t){var i=(new Date).getFullYear();e=e||i-100;for(var n=[],a=t=t||i;a>=e;a--)n.push({value:a,label:a});return n}(this.props.minYear,this.props.maxYear).map(function(e){return h.createElement("option",{key:"year-".concat(e.value),value:e.value},e.label)})))}},{key:"onChangeYear",value:function(e){this.setState({year:e.target.value})}},{key:"onChangeMonth",value:function(e){this.setState({month:e.target.value})}},{key:"onChangeDay",value:function(e){this.setState({day:e.target.value})}},{key:"onBlurYear",value:function(e){this.setState({year:e.target.value})}},{key:"onBlurMonth",value:function(e){this.setState({month:e.target.value})}},{key:"onBlurDay",value:function(e){this.setState({day:e.target.value})}},{key:"isValidDate",value:function(){if(!this.state.year||!this.state.month||!this.state.day)return!1;var e=new Date(this.state.year,this.state.month-1,this.state.day);return e.getFullYear()===Number(this.state.year)&&e.getMonth()+1===Number(this.state.month)&&e.getDate()===Number(this.state.day)}}]),t}(h.Component);_.propTypes=g,_.defaultProps={value:"",minYear:"",maxYear:"",onChange:null,onBlur:null},e.exports=_},function(e,t,i){"use strict";function n(e){var t=e.part,i=e.inputRef,n=e.onFocusDatePart,a=e.onKeyDownDatePart,o=e.onChangeDatePart,s=e.onBlurDatePart,r=g({input__field:!0,"input__field--single":!0});return p.createElement("input",{className:r,type:"tel",value:t.value,placeholder:t.placeholder,maxLength:"1",autoFocus:t.autoFocus,onFocus:function(){return n(t.id)},onKeyDown:function(e){return a(t.id,e)},onChange:function(e){return o(t.id,e)},onBlur:function(){return s(t.id)},ref:i})}var a=i(3),o=a(i(107)),s=a(i(127)),r=a(i(110)),l=a(i(112)),c=a(i(114)),u=a(i(115)),d=a(i(123)),h=a(i(116)),p=i(98),m=i(104),g=i(117),_=i(99),f={date:m.string,description:m.string,autoFocus:m.bool,isInvalid:m.bool,errorMessage:m.string,onFocus:m.func,onChange:m.func,onBlur:m.func},v=/^(\d)(\d)(\d)(\d)-(\d)(\d)-(\d)(\d)$/,E=function(e){function t(e){var i;return(0,r.default)(this,t),(i=(0,c.default)(this,(0,u.default)(t).call(this,e))).state={description:e.description,isInvalid:e.isInvalid,errorMessage:e.errorMessage,idFocusedDatePart:""},i.datePartRefs={},i.onFocusDatePart=i.onFocusDatePart.bind((0,d.default)(i)),i.onKeyDownDatePart=i.onKeyDownDatePart.bind((0,d.default)(i)),i.onChangeDatePart=i.onChangeDatePart.bind((0,d.default)(i)),i.onBlurDatePart=i.onBlurDatePart.bind((0,d.default)(i)),i}return(0,h.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.setDateFormat(this.props.dateFormat)}},{key:"componentDidUpdate",value:function(e,t){t.idFocusedDatePart!==this.state.idFocusedDatePart&&this.datePartRefs[this.state.idFocusedDatePart].focus()}},{key:"render",value:function(){var e=this,t=g({control:!0,"control--date":!0}),i=g({input:!0,"input--multifield":!0,"is-invalid":this.props.isInvalid||this.state.isInvalid});return this.state.sequence?p.createElement("div",{className:t},p.createElement("div",{className:"control__inputs control__inputs--row"},this.state.sequence.map(function(t){switch(t){case"y1":return p.createElement("div",{className:i,key:"year"},p.createElement(n,{key:e.state.y1.id,part:e.state.y1,onFocusDatePart:e.onFocusDatePart,onKeyDownDatePart:e.onKeyDownDatePart,onChangeDatePart:e.onChangeDatePart,onBlurDatePart:e.onBlurDatePart,inputRef:function(t){return e.createReference(t,"y1")}}),p.createElement(n,{key:e.state.y2.id,part:e.state.y2,onFocusDatePart:e.onFocusDatePart,onKeyDownDatePart:e.onKeyDownDatePart,onChangeDatePart:e.onChangeDatePart,onBlurDatePart:e.onBlurDatePart,inputRef:function(t){return e.createReference(t,"y2")}}),p.createElement(n,{key:e.state.y3.id,part:e.state.y3,onFocusDatePart:e.onFocusDatePart,onKeyDownDatePart:e.onKeyDownDatePart,onChangeDatePart:e.onChangeDatePart,onBlurDatePart:e.onBlurDatePart,inputRef:function(t){return e.createReference(t,"y3")}}),p.createElement(n,{key:e.state.y4.id,part:e.state.y4,onFocusDatePart:e.onFocusDatePart,onKeyDownDatePart:e.onKeyDownDatePart,onChangeDatePart:e.onChangeDatePart,onBlurDatePart:e.onBlurDatePart,inputRef:function(t){return e.createReference(t,"y4")}}),p.createElement("label",{className:"fixed__label"},e.state.yearTitle));case"m1":return p.createElement("div",{className:i,key:"month"},p.createElement(n,{key:e.state.m1.id,part:e.state.m1,onFocusDatePart:e.onFocusDatePart,onKeyDownDatePart:e.onKeyDownDatePart,onChangeDatePart:e.onChangeDatePart,onBlurDatePart:e.onBlurDatePart,inputRef:function(t){return e.createReference(t,"m1")}}),p.createElement(n,{key:e.state.m2.id,part:e.state.m2,onFocusDatePart:e.onFocusDatePart,onKeyDownDatePart:e.onKeyDownDatePart,onChangeDatePart:e.onChangeDatePart,onBlurDatePart:e.onBlurDatePart,inputRef:function(t){return e.createReference(t,"m2")}}),p.createElement("label",{className:"fixed__label"},e.state.monthTitle));case"d1":return p.createElement("div",{className:i,key:"day"},p.createElement(n,{key:e.state.d1.id,part:e.state.d1,onFocusDatePart:e.onFocusDatePart,onKeyDownDatePart:e.onKeyDownDatePart,onChangeDatePart:e.onChangeDatePart,onBlurDatePart:e.onBlurDatePart,inputRef:function(t){return e.createReference(t,"d1")}}),p.createElement(n,{key:e.state.d2.id,part:e.state.d2,onFocusDatePart:e.onFocusDatePart,onKeyDownDatePart:e.onKeyDownDatePart,onChangeDatePart:e.onChangeDatePart,onBlurDatePart:e.onBlurDatePart,inputRef:function(t){return e.createReference(t,"d2")}}),p.createElement("label",{className:"fixed__label"},e.state.dayTitle))}})),!this.state.description||this.props.isInvalid||this.state.isInvalid?null:p.createElement("div",{className:"control__description"},this.state.description),this.props.isInvalid||this.state.isInvalid?p.createElement("div",{className:"control__error show-error","data-qa":this.props.dataQaErrorMessage},this.props.isInvalid?this.props.errorMessage:this.state.errorMessage):null):null}},{key:"getPrevDatePart",value:function(e){var t=Math.max(this.state.sequence.indexOf(e)-1,0);return this.state.sequence[t]}},{key:"getNextDatePart",value:function(e){var t=Math.min(this.state.sequence.indexOf(e)+1,this.state.sequence.length-1);return this.state.sequence[t]}},{key:"onFocusDatePart",value:function(e){this.props.onFocus&&this.props.onFocus(),this.state.idFocusedDatePart!==e&&this.setState({idFocusedDatePart:e})}},{key:"onBlurDatePart",value:function(){this.props.onBlur&&this.props.onBlur()}},{key:"onKeyDownDatePart",value:function(e,t){var i=this;8===t.keyCode&&""===t.target.value&&this.setState(function(e){return{idFocusedDatePart:i.getPrevDatePart(e.idFocusedDatePart)}}),""!==this.state[e].value&&t.keyCode>=48&&t.keyCode<=57&&this.onChangeDatePart(e,{target:{value:t.key}})}},{key:"onChangeDatePart",value:function(e,t){var i=this,n=t.target.value.trim();n.length>1&&(n=n.charAt(0)),this.setState(function(t){return(0,o.default)({isInvalid:!1},e,(0,s.default)({},t[e],{value:n}))},function(){var e=i.concatenateDateParts(),t={isInvalid:!1,errorMessage:""};10===e.length&&(e.match(v)&&Boolean(Date.parse(e))?i.props.onChange({target:{value:e}}):(t.isInvalid=!0,t.errorMessage=_.get(782))),i.setState((0,s.default)({},t))}),t.target.value&&this.setState({idFocusedDatePart:this.getNextDatePart(e)})}},{key:"createReference",value:function(e,t){this.datePartRefs&&(this.datePartRefs[t]=e)}},{key:"concatenateDateParts",value:function(){var e="".concat(this.state.y1.value).concat(this.state.y2.value).concat(this.state.y3.value).concat(this.state.y4.value),t="".concat(this.state.m1.value).concat(this.state.m2.value),i="".concat(this.state.d1.value).concat(this.state.d2.value);return"".concat(e,"-").concat(t,"-").concat(i)}},{key:"setDateFormat",value:function(e){for(var t={},i={},n=0;n<e.length;n++){var a=e[n];i["".concat(a.keyPart,"Title")]=a.title,Object.assign(t,a.digits)}var o=function(e){var t=[];return Object.keys(e).forEach(function(i){var n=e[i].sequenceIndex;t[n]=i}),t}(t),r=function(e,t){var i={},n=t.match(v);return Object.keys(e).forEach(function(t){var a=e[t];i[t]={id:t,index:a.sequenceIndex,value:n?n[a.dateIndex+1]:"",placeholder:a.placeholder}}),i}(t,this.props.date),l="";if(this.props.autoFocus){var c=o[0];l=c,r[c].autoFocus=!0}this.setState((0,s.default)({},i,{idFocusedDatePart:l},r,{sequence:o}))}}]),t}(p.Component);E.propTypes=f,E.defaultProps={date:"",description:"",autoFocus:!1,isInvalid:!1,errorMessage:"",onFocus:null,onChange:null,onBlur:null},e.exports=E},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(234),s=i(3219),r=i(130),l=i(154),c=i(145),u=i(120).Header1;e.exports=function(e){var t=e.onChangeRegistrationMethod,i=e.listCountryCodes,d=e.onChangeCountryCode,h=e.onClickCountryCode,p=e.onSignIn,m=e.phoneNumber,g=e.onFocusInput,_=e.onChangePhoneNumber,f=e.onBlurInput,v=e.isInvalid,E=e.errorMessage,b=e.showSignIn,y=e.onSubmit,k=e.inputRef;return n.createElement(n.Fragment,null,n.createElement(r,{hpadded:!0,vpadded:!0},n.createElement(c,{bottom:"xxlg"},n.createElement(u,{align:"center"},a.get(651)),n.createElement(l,{type:"link",text:a.get(652),onClick:t,dataQA:{"data-qa":"switch-to-email"}}))),n.createElement(r,{hpadded:!0},n.createElement(c,{top:"xxlg",bottom:"lg"},n.createElement(o,{onSubmit:y},n.createElement(s,{telInnerRef:k,narrow:!0,description:a.get(653),listCountryCodes:i,onChangeSelect:d,onClickSelect:h,dataQaSelect:"phone-prefix-select",inputValue:m,autoFocusInput:!0,onFocusInput:g,onChangeInput:_,dataQaInput:"phone-number-input",onBlurInput:f,isInvalid:v,errorMessage:E,dataQaErrorMessage:"error-message"}),b?n.createElement("div",{className:"form__buttons"},n.createElement(l,{type:"link",text:a.get(113),onClick:p,dataQA:{"data-qa":"signin-button"}})):null))))}},function(e,t,i){"use strict";function n(e){var t=e.telInnerRef,i=e.narrow,n=e.centered,o=e.description,c=e.listCountryCodes,u=e.onChangeSelect,d=e.onClickSelect,h=e.dataQaSelect,p=e.inputValue,m=e.onFocusInput,g=e.onChangeInput,_=e.onBlurInput,f=e.autoFocusInput,v=e.dataQaInput,E=e.isInvalid,b=e.errorMessage,y=e.dataQaErrorMessage,k=s({control:!0,"control--tel":!0,"control--narrow":i,"control--centered":n});return a.createElement("div",{className:k},a.createElement("div",{className:"control__inputs control__inputs--row"},a.createElement(r,{extraClass:"field--tel-country-code",options:c,onChange:u,onClick:d,dataQa:h}),a.createElement(l,{innerRef:t,extraClass:"field--tel-national",autoFocus:f,value:p,isInvalid:E,onFocus:m,onChange:g,onBlur:_,dataQa:v})),o&&!E?a.createElement("div",{className:"control__description"},o):null,E?a.createElement("div",{className:"control__error show-error","data-qa":y},b):null)}var a=i(98),o=i(104),s=i(117),r=i(3220),l=i(3221),c={narrow:o.bool,centered:o.bool,description:o.string,listCountryCodes:o.array.isRequired,onChangeSelect:o.func,onClickSelect:o.func,isInvalid:o.bool,errorMessage:o.string,telInnerRef:o.object};n.propTypes=c,n.defaultProps={narrow:!1,centered:!1,description:"",onChangeSelect:null,onClickSelect:null,isInvalid:!1,errorMessage:"",telInnerRef:null},e.exports=n},function(e,t,i){"use strict";function n(e){var t=e.extraClass,i=e.options,n=e.onChange,s=e.onClick,l=e.dataQa,c=r((0,a.default)({select:!0},"".concat(t),t)),u=r({select__field:!0}),d=i.find(function(e){return e.selected})||{};return o.createElement("div",{className:c},o.createElement("select",{className:u,onChange:n,onClick:s,value:d.value,"data-qa":l},i.map(function(e){return o.createElement("option",{label:e.label,value:e.value,key:e.value},e.label)})),o.createElement("div",{className:"select__surrogate"},d.selectedLabel||d.label))}var a=i(3)(i(107)),o=i(98),s=i(104),r=i(117),l={extraClass:s.string,options:s.arrayOf(s.shape({selectedLabel:s.string,label:s.string,selected:s.bool,value:s.oneOfType([s.string,s.number])})),onChange:s.func,onClick:s.func};n.propTypes=l,n.defaultProps={extraClass:"",options:[],onChange:null,onClick:null},e.exports=n},function(e,t,i){"use strict";var n=i(3)(i(144)),a=i(98),o=i(419);e.exports=function(e){return a.createElement(o,(0,n.default)({type:"tel"},e))}},function(e,t,i){"use strict";var n=i(3),a=n(i(4)),o=n(i(110)),s=n(i(112)),r=n(i(114)),l=n(i(115)),c=n(i(123)),u=n(i(116)),d=i(98),h=i(113),p=i(99),m=i(103),g=i(102),_=i(372),f=i(3223),v=i(592),E=i(105).ClientValidateUserField,b=i(101),y=b.ClickEvent,k=b.ErrorEvent,S=b.ViewElementEvent,w=function(e){function t(e){var i;return(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).state={email:e.initialEmail},i.onChangeEmail=i.onChangeEmail.bind((0,c.default)(i)),i.onClickContinue=i.onClickContinue.bind((0,c.default)(i)),i.validateEmail=i.validateEmail.bind((0,c.default)(i)),i.onSubmitForm=i.onSubmitForm.bind((0,c.default)(i)),
i.onClickSignIn=i.onClickSignIn.bind((0,c.default)(i)),i.onClickDidYouMeanEmail=i.onClickDidYouMeanEmail.bind((0,c.default)(i)),i.onClickSuggestedDomain=i.onClickSuggestedDomain.bind((0,c.default)(i)),i.onShowEmailDomainsList=i.onShowEmailDomainsList.bind((0,c.default)(i)),i.onShowSuggestedEmail=i.onShowSuggestedEmail.bind((0,c.default)(i)),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.isEmailDomainsListViewed=!1,this.isSuggestedEmail=!1}},{key:"componentDidUpdate",value:function(e,t){t.email!==this.state.email&&this.props.onChange(this.state.email),!t.isCheckingForm&&this.state.isCheckingForm&&this.validateEmail()}},{key:"render",value:function(){var e=this.props,t=e.onChangeRegistrationMethod,i=e.onFocus,n=e.onBlur,a=e.onInputAreaClick,o=e.inputRef;return d.createElement(f,{email:this.state.email,isInvalid:this.state.isInvalid,errorMessage:this.state.errorMessage,showLoadingContinue:this.getShowLoadingContinue(),isContinueButtonDisabled:this.getIsContinueButtonDisabled(),showSignIn:this.state.showSignIn,onFocus:i,onChange:this.onChangeEmail,onBlur:n,onClickSwitchRegistrationMethod:t,onClickSignIn:this.onClickSignIn,onSubmit:this.onSubmitForm,onClickContinue:this.onClickContinue,onInputAreaClick:a,inputRef:o,showSuggestions:this.getShowSuggestions(),suggestedEmail:this.state.suggestedEmail,onClickDidYouMeanEmail:this.onClickDidYouMeanEmail,onClickSuggestedDomain:this.onClickSuggestedDomain,onShowEmailDomainsList:this.onShowEmailDomainsList,onShowSuggestedEmail:this.onShowSuggestedEmail})}},{key:"getShowLoadingContinue",value:function(){return this.props.showLoadingContinue||this.state.isCheckingForm}},{key:"getIsContinueButtonDisabled",value:function(){return!this.state.email||this.state.isCheckingForm||this.state.isInvalid||this.props.showLoadingContinue}},{key:"onChangeEmail",value:function(e){var t=e.target.value;this.setState({showSuggestions:!0,suggestedEmail:"",showSignIn:!1,isInvalid:!1,errorMessage:"",email:t})}},{key:"onClickContinue",value:function(){this.getIsContinueButtonDisabled()||this.setState({isCheckingForm:!0,showSuggestions:!1})}},{key:"onSubmitForm",value:function(e){e.preventDefault(),this.onClickContinue(e)}},{key:"validateEmail",value:function(){var e=this;v.getInstance().get({fieldType:10,value:this.state.email,context:108}).then(function(t){var i=(0,a.default)(t,1)[0];e.onValidateEmail(i)})}},{key:"onValidateEmail",value:function(e){if(e instanceof E){var t=!e.getValid();if(t){var i=e.getErrorMessage(),n=_.getErrorFieldValidationErrorType(e.getErrorType());!function(e){var t={event_type:5,field_name:7,error_type:e.errorType};12===e.errorType&&(t.error_message=e.errorMessage),g.track(k,t)}({errorMessage:i,errorType:n}),this.setState({isCheckingForm:!1,suggestedEmail:t&&e.getSuggestedValue(),errorMessage:i,showSignIn:25===n,isInvalid:t})}else{var a=h.getStartupRegistrationSettings();if(this.props.checkUserAnsweredEmailPrefs()||!a||!a.getOfferMarketingSubscription())return void this.props.onClickContinue();this.props.showConfirmationModal({header:p.get(683),message:p.get(684),primaryLabel:p.get(685),cancelLabel:p.get(686)}),this.stopCheckingForm()}}else this.stopCheckingForm()}},{key:"stopCheckingForm",value:function(){this.setState({isCheckingForm:!1})}},{key:"onClickSignIn",value:function(){m.navigate("signin",{login:String(this.state.email)})}},{key:"getShowSuggestions",value:function(){return Boolean(this.state.showSuggestions||this.state.suggestedEmail)}},{key:"onClickDidYouMeanEmail",value:function(){this.setState(function(e){return{showSuggestions:!1,suggestedEmail:"",showSignIn:!1,isInvalid:!1,errorMessage:"",email:e.suggestedEmail}}),g.track(y,{element:930})}},{key:"onClickSuggestedDomain",value:function(e,t){var i=this;this.setState(function(t){return{showSuggestions:!1,showSignIn:!1,isInvalid:!1,errorMessage:"",email:t.email.replace(/@.*/i,"@".concat(e))}},function(){i.props.inputRef.current&&i.props.inputRef.current.focus()}),g.track(y,{element:929,parent_element:532,position:t})}},{key:"onShowEmailDomainsList",value:function(){this.isEmailDomainsListViewed||(this.isEmailDomainsListViewed=!0,g.track(S,{element:532}))}},{key:"onShowSuggestedEmail",value:function(){this.isSuggestedEmail||(this.isSuggestedEmail=!0,g.track(S,{element:930}))}}]),t}(d.Component);e.exports=w},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(234),s=i(290),r=i(3224),l=i(595),c=i(130),u=i(185),d=i(229),h=i(154),p=i(145),m=i(120).Header1;e.exports=function(e){var t=e.onClickSwitchRegistrationMethod,i=e.email,g=e.isInvalid,_=e.errorMessage,f=e.showSignIn,v=e.onFocus,E=e.onChange,b=e.onBlur,y=e.onSubmit,k=e.onClickContinue,S=e.showLoadingContinue,w=e.isContinueButtonDisabled,C=e.onInputAreaClick,T=e.onClickSignIn,P=e.inputRef,N=e.showSuggestions,I=e.suggestedEmail,x=e.onClickDidYouMeanEmail,A=e.onClickSuggestedDomain,O=e.onShowEmailDomainsList,V=e.onShowSuggestedEmail;return n.createElement(n.Fragment,null,n.createElement(c,{hpadded:!0,vpadded:!0},n.createElement(p,{bottom:"xxlg"},n.createElement(m,{align:"center"},a.get(654)),n.createElement(h,{type:"link",text:a.get(655),onClick:t,dataQA:{"data-qa":"switch-to-phone"}}))),n.createElement(c,{hpadded:!0},n.createElement("div",{onClick:C},n.createElement(p,{top:"xxlg",bottom:"lg"},n.createElement(o,{onSubmit:y},n.createElement(s,{narrow:!0,centered:!0,isInvalid:g,errorMessage:_,dataQaErrorMessage:"error-message"},n.createElement(r,{innerRef:P,autoFocus:!0,value:i,isInvalid:g,onFocus:v,onChange:E,onBlur:b,dataQa:"email-input"})),f?n.createElement("div",{className:"form__buttons"},n.createElement(h,{type:"link",text:a.get(113),onClick:T,dataQA:{"data-qa":"signin-button"}})):null))),!f&&N?n.createElement(l,{email:i,suggestedEmail:I,onClickDidYouMeanEmail:x,onClickSuggestedDomain:A,onShowEmailDomainsList:O,onShowSuggestedEmail:V}):null),n.createElement(u,{hpadded:!0,vpadded:!0},n.createElement(d,null,n.createElement("div",{className:"needsclick",style:{width:"100%"},onClick:k},n.createElement(h,{text:a.get(21),isLoading:S,isDisabled:w,dataQA:{"data-qa":"continue-button"}})))))}},function(e,t,i){"use strict";function n(e){var t=e.innerRef,i=e.value,n=e.autoFocus,o=e.isInvalid,r=e.onFocus,l=e.onChange,c=e.onBlur,u=e.dataQa,d=s({input:!0,"is-invalid":o}),h=s({input__field:!0});return a.createElement("div",{className:d},a.createElement("input",{ref:t,type:"email",autoFocus:n,className:h,value:i,onFocus:r,onChange:l,onBlur:c,"data-qa":u}))}var a=i(98),o=i(104),s=i(117),r={value:o.string,isInvalid:o.bool,onFocus:o.func,onChange:o.func,onBlur:o.func,innerRef:o.object};n.propTypes=r,n.defaultProps={value:"",isInvalid:!1,onFocus:null,onChange:null,onBlur:null,innerRef:null},e.exports=n},function(e,t,i){"use strict";var n=i(98),a=i(117),o=i(5);e.exports=function(e){var t=e.suggestedEmail,i=e.emailDomains,s=e.onClickDidYouMeanEmail,r=e.onClickSuggestedDomain,l=a({"domain-suggestions__dropdown":!0,"old-android":o.isOldAndroidWebkit()});return n.createElement("div",{className:"domain-suggestions-wrapper"},t?n.createElement("div",{className:"domain-suggestions__email",dangerouslySetInnerHTML:{__html:t},onClick:s}):null,!t&&i.length>0?n.createElement("ul",{className:l},i.map(function(e,t){return n.createElement("li",{key:e,onClick:function(){return r(e,t)}},"@".concat(e))})):null)}},function(e,t,i){"use strict";var n=i(98),a=i(234),o=i(3227),s=i(130),r=i(145),l=i(120).Header1;e.exports=function(e){var t=e.header,i=e.mssg,c=e.location,u=e.cities,d=e.isInvalid,h=e.isSearching,p=e.errorMessage,m=e.onFocus,g=e.onChange,_=e.onBlur,f=e.onSelectLocation,v=e.onClearLocation,E=e.onSubmit,b=e.onInputAreaClick,y=e.inputRef;return n.createElement(n.Fragment,null,n.createElement(s,{hpadded:!0,vpadded:!0},n.createElement(r,{bottom:"xxlg"},n.createElement(l,{align:"center"},t))),n.createElement(s,{hpadded:!0},n.createElement("div",{onClick:b},n.createElement(r,{top:"xxlg",bottom:"lg"},n.createElement(a,{onSubmit:E},n.createElement(o,{narrow:!0,innerRef:y,autoFocus:!0,value:c,description:i,suggestions:u,dataQaSuggestedLocation:"suggested-location",onFocus:m,onChange:g,onBlur:_,dataQaInput:"location-input",onSelectSuggestion:f,onClearLocation:v,isLoading:h,isInvalid:d,errorMessage:p,dataQaErrorMessage:"error-message"}))))))}},function(e,t,i){"use strict";function n(e){var t=e.narrow,i=e.centered,n=e.description,s=e.autoFocus,c=e.value,u=e.suggestions,d=e.dataQaSuggestedLocation,h=e.onFocus,p=e.onChange,m=e.onBlur,g=e.dataQaInput,_=e.onSelectSuggestion,f=e.onClearLocation,v=e.isLoading,E=e.isInvalid,b=e.errorMessage,y=e.dataQaErrorMessage,k=e.innerRef,S=r({control:!0,"control--location":!0,"control--narrow":t,"control--centered":i}),w=r({input:!0,"has-value":c&&!v,"is-loading":v,"is-invalid":E}),C=r({input__field:!0});return o.createElement("div",{className:S},o.createElement("div",{className:"control__inputs"},o.createElement("div",{className:w},o.createElement("div",{className:"input__icon"},o.createElement("div",{className:"input__icon-pointer",onClick:function(){return a(_,!0)}},o.createElement(l,{name:"elements-input-location",size:"md"})),o.createElement("div",{className:"input__icon-cancel",onClick:f},o.createElement(l,{name:"elements-input-clear",size:"sm"})),o.createElement("div",{className:"input__icon-loader"},o.createElement(l,{name:"loading-dots",size:"md"}))),o.createElement("input",{ref:k,type:"text",autoFocus:s,className:C,value:c,onFocus:function(){h&&h(),a(_)},onChange:p,onBlur:m,"data-qa":g})),u&&u.length>0?o.createElement("ul",{className:"control__extra"},u.map(function(e){return o.createElement("li",{key:e.id,onClick:function(t){return _(t,e)},"data-qa":d},e.name)})):null),n&&!E?o.createElement("div",{className:"control__description"},n):null,E?o.createElement("div",{className:"control__error show-error","data-qa":y},b):null)}function a(e,t){u&&!t||(u=!0,c.findCurrentLocation(function(t){e(null,{id:t.getId(),name:t.getName()})}))}var o=i(98),s=i(104),r=i(117),l=i(106),c=i(373),u=!1,d={narrow:s.bool,centered:s.bool,description:s.string,value:s.string,onChange:s.func,onSelectSuggestion:s.func,onClearLocation:s.func,isLoading:s.bool,isInvalid:s.bool,errorMessage:s.string,innerRef:s.object};n.propTypes=d,n.defaultProps={narrow:!1,centered:!1,description:"",value:"",onChange:null,onSelectSuggestion:null,onClearLocation:null,isLoading:!1,isInvalid:!1,errorMessage:"",innerRef:null},e.exports=n},function(e,t,i){"use strict";var n=i(98),a=i(130),o=i(143),s=i(151),r=i(152),l=i(172),c=i(160),u=i(163),d=i(154);e.exports=function(e){var t=e.header,i=e.mssg,h=e.secondaryActionLabel,p=e.onClickResendEmail;return n.createElement(a,{hpadded:!0,vpadded:!0,align:"center"},n.createElement(o,null,n.createElement(l,null,n.createElement(u,{size:"sm",icon:{name:"adaptor-email",color:"primary"}})),n.createElement(s,{text:t}),n.createElement(r,{text:i}),n.createElement(c,null,n.createElement(d,{type:"link",text:h,onClick:p}))))}},function(e,t,i){"use strict";var n=i(98),a=i(3230),o=i(3232);e.exports=function(e){var t=e.isAboutToCall,i=e.isCalling,s=e.onStartPhoneCall,r=e.timer,l=e.isSmsPin,c=e.mssg,u=e.primaryActionLabel,d=e.verificationData,h=e.digits,p=e.onChangeDigit,m=e.onChangeNumber,g=e.onSubmit,_=e.isInvalid,f=e.errorMessage,v=e.isCheckingForm;return t||i?n.createElement(a,{isAboutToCall:t,isCalling:i,onStartPhoneCall:s,timer:r}):n.createElement(o,{isSmsPin:l,mssg:c,primaryActionLabel:u,verificationData:d,digits:h,onChangeDigit:p,onChangeNumber:m,onSubmit:g,isInvalid:_,errorMessage:f,isCheckingForm:v})}},function(e,t,i){"use strict";var n=i(98),a=i(5),o=i(99),s=i(3231),r=i(154),l=i(143),c=i(151),u=i(152),d=i(160),h=i(130),p=i(145);e.exports=function(e){var t;return t=a.isIOs?{backgroundImage:"url('/img/no-sprite/registration/phone-call-ios.437616e4920c3a8cf1ee.jpg')"}:{backgroundImage:"url('/img/no-sprite/registration/phone-call-android.7746c09a8da11f7e8302.jpg')"},n.createElement(n.Fragment,null,n.createElement(h,null,n.createElement(p,{bottom:"lg"},n.createElement("div",{className:"multimedia multimedia--square"},n.createElement("div",{className:"multimedia__image",style:t})))),n.createElement(h,null,n.createElement(l,null,n.createElement(c,{text:o.get(751)}),n.createElement(u,{text:o.get(752)}),e.isAboutToCall?n.createElement(d,null,n.createElement(r,{color:"primary",text:o.get(753),onClick:e.onStartPhoneCall})):null),e.isCalling?n.createElement(p,{top:"xlg"},n.createElement(s,{timer:e.timer})):null))}},function(e,t,i){"use strict";function n(e){var t=e.timer,i={};return t&&(i.animationDuration="".concat(t,"s")),a.createElement("div",{className:"registration-phone-call-timer"},a.createElement("div",{className:"registration-phone-call-timer__media"},a.createElement(s,{name:"generic-phone",size:"xlg",color:"primary",supportsRtl:!0})),a.createElement("div",{className:"registration-phone-call-timer__progress"},a.createElement("svg",{className:"boost-timer boost-timer--plain"},a.createElement("circle",{className:"boost-timer__bar",cx:"50%",cy:"50%",fill:"none"}),a.createElement("circle",{className:"boost-timer__progress",cx:"50%",cy:"50%",fill:"none",style:i}))))}var a=i(98),o=i(104),s=i(106),r={timer:o.number};n.propTypes=r,n.defaultProps={timer:40},e.exports=n},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(234),s=i(3233),r=i(130),l=i(154),c=i(233),u=i(145);e.exports=function(e){var t=e.isSmsPin,i=e.mssg,d=e.primaryActionLabel,h=e.verificationData,p=e.digits,m=e.onChangeDigit,g=e.onChangeNumber,_=e.onSubmit,f=e.isInvalid,v=e.errorMessage,E=e.isCheckingForm,b=f||function(e){return Boolean((e||[]).find(function(e){return!Boolean(e.value)}))}(p);return n.createElement(r,{hpadded:!0,vpadded:!0},n.createElement(u,{top:"xxlg",bottom:"lg"},n.createElement(o,{intro:i,onSubmit:_},n.createElement(s,{autoFocus:!0,tel:!t&&h,onChangeDigit:m,digits:p,isInvalid:f,errorMessage:v,dataQaErrorMessage:"error-message"}),n.createElement("div",{className:"form__buttons"},n.createElement(l,{text:d,isLoading:E,isDisabled:b,dataQA:{"data-qa":"continue-button"}})),n.createElement("div",{className:"form__hints"},n.createElement(c,{text:a.get(610),onClick:g})))))}},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(123)),c=n(i(116)),u=i(98),d=i(104),h=i(117),p=i(3234),m={digits:d.array,isInvalid:d.bool,errorMessage:d.string},g=function(e){function t(e){var i;return(0,a.default)(this,t),i=(0,s.default)(this,(0,r.default)(t).call(this,e)),e.autoFocus&&e.digits.length>0&&(i.digitsRefs=[]),i.state={},e.autoFocus&&(i.state.indexAutoFocusedDigit=0),i.onChangeDigit=i.onChangeDigit.bind((0,l.default)(i)),i.onFocusDigit=i.onFocusDigit.bind((0,l.default)(i)),i}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidUpdate",value:function(e,t){t.indexAutoFocusedDigit!==this.state.indexAutoFocusedDigit&&this.digitsRefs[this.state.indexAutoFocusedDigit].focus()}},{key:"render",value:function(){var e=this,t=this.props,i=t.code,n=t.tel,a=t.digits,o=t.isInvalid,s=t.errorMessage,r=h({control:!0,"control--digits":!0});return u.createElement("div",{className:r},u.createElement("div",{className:"control__inputs control__inputs--row"},i?u.createElement("div",{className:"input"},u.createElement("div",{className:"input__field input__field--border-hidden"},i)):null,n?u.createElement("div",{className:"input"},u.createElement("div",{className:"input__field input__field--border-hidden"},n)):null,a.map(function(t,i){return u.createElement(p,{fieldExtraClass:"input__field--digit",autoFocus:e.hasToAutoFocus(i),inputRef:function(t){return e.createReference(t,i)},onFocus:function(t){return e.onFocusDigit(i,t)},onKeyDown:function(t){return e.onKeyDown(i,t)},onChange:function(t){return e.onChangeDigit(i,t)},value:t.value,min:0,max:9,maxlength:1,isInvalid:o,key:t.id||i})})),o?u.createElement("div",{className:"control__error show-error","data-qa":this.props.dataQaErrorMessage},s):null)}},{key:"onKeyDown",value:function(e,t){8===t.keyCode&&""===t.target.value&&this.setState(function(e){return{indexAutoFocusedDigit:e.indexAutoFocusedDigit>0?e.indexAutoFocusedDigit-1:e.indexAutoFocusedDigit}})}},{key:"onChangeDigit",value:function(e,t){this.props.onChangeDigit&&this.props.onChangeDigit(e,t),this.props.autoFocus&&t.target.value&&this.state.indexAutoFocusedDigit<this.props.digits.length-1&&this.setState(function(e){return{indexAutoFocusedDigit:e.indexAutoFocusedDigit+1}})}},{key:"onFocusDigit",value:function(e){this.props.autoFocus&&this.setState({indexAutoFocusedDigit:e})}},{key:"hasToAutoFocus",value:function(e){return this.props.autoFocus&&this.state.indexAutoFocusedDigit===e}},{key:"createReference",value:function(e,t){this.digitsRefs&&(this.digitsRefs[t]=e)}}]),t}(u.Component);g.propTypes=m,g.defaultProps={digits:[],isInvalid:!1,errorMessage:""},e.exports=g},function(e,t,i){"use strict";function n(e){var t,i=e.value,n=e.extraClass,s=e.fieldExtraClass,l=e.min,c=e.max,u=e.maxlength,d=e.autoFocus,h=e.isInvalid,p=e.inputRef,m=e.onFocus,g=e.onKeyDown,_=e.onChange,f=r((t={input:!0},(0,a.default)(t,"".concat(n),n),(0,a.default)(t,"is-invalid",h),t)),v=r((0,a.default)({input__field:!0},"".concat(s),s));return o.createElement("div",{className:f},o.createElement("input",{type:"number",autoFocus:d,className:v,value:i,min:l,max:c,maxLength:u,ref:p,onFocus:m,onKeyDown:g,onChange:_}))}var a=i(3)(i(107)),o=i(98),s=i(104),r=i(117),l={value:s.oneOfType([s.string,s.number]),extraClass:s.string,fieldExtraClass:s.string,maxlength:s.number,min:s.number,max:s.number,autoFocus:s.bool,isInvalid:s.bool,onFocus:s.func,onKeyDown:s.func,onChange:s.func};n.propTypes=l,n.defaultProps={value:"",extraClass:"",fieldExtraClass:"",min:null,max:null,maxlength:null,autoFocus:!1,isInvalid:!1,onFocus:null,onKeyDown:null,onChange:null},e.exports=n},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(3236),s=i(130),r=i(120),l=r.Header1,c=r.P3;e.exports=function(e){var t=e.header,i=e.primaryActionLabel,r=e.onUploadPhoto,u=e.photo;return n.createElement(n.Fragment,null,n.createElement(s,{hpadded:!0,vpadded:!0},n.createElement(l,{align:"center",dangerous:!0},t)),n.createElement(s,{hpadded:!0,align:"center"},n.createElement("div",{className:"photo-card-list"},u?n.createElement(o,{src:u.src,label:u.label,onClick:r,key:u.id},n.createElement("div",{className:"photo-card__label"},n.createElement(c,{align:"center"},a.get(776)))):n.createElement(o,{isCta:!0,label:i,onClick:r}))))}},function(e,t,i){"use strict";var n=i(98),a=i(117),o=i(106),s=i(120).P1;e.exports=function(e){var t=e.src,i=e.isCta,r=e.label,l=e.onClick,c=e.children,u=a({"photo-card":!0,"photo-card--special":i,needsclick:!0});return n.createElement("div",{className:u,onClick:l},n.createElement("div",{className:"photo-card__inner"},i?n.createElement("div",{className:"photo-card-cta"},n.createElement("div",{className:"photo-card-cta__media"},n.createElement(o,{name:"badge-plus",size:"xlg"})),n.createElement("div",{className:"photo-card-cta__content"},n.createElement(s,{align:"center",dangerous:!0},r))):null,t?n.createElement("div",{className:"photo-card-frame"},n.createElement("div",{className:"multimedia"},n.createElement("div",{className:"multimedia__image",style:{backgroundImage:"url(".concat(t,")")}}))):null),c)}},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(234),s=i(290),r=i(596),l=i(130),c=i(145),u=i(120).Header1;e.exports=function(e){var t=e.header,i=e.password,d=e.minLength,h=e.isInvalid,p=e.errorMessage,m=e.onFocus,g=e.onChange,_=e.onBlur,f=e.onSubmit,v=e.onInputAreaClick;return n.createElement(n.Fragment,null,n.createElement(l,{hpadded:!0,vpadded:!0},n.createElement(c,{bottom:"xxlg"},n.createElement(u,{align:"center",dangerous:!0},t))),n.createElement(l,{hpadded:!0},n.createElement("div",{onClick:v},n.createElement(c,{top:"xxlg",bottom:"lg"},n.createElement(o,{onSubmit:f},n.createElement(s,{narrow:!0,centered:!0,description:a.get(735,d),isInvalid:h,errorMessage:p,dataQaErrorMessage:"error-message"},n.createElement(r,{autoFocus:!0,value:i,onFocus:m,onChange:g,onBlur:_,dataQa:"password-input"})))))))}},function(e,t,i){"use strict";function n(e){m.track(w,{banner_id:e,position_id:13,context:92})}var a=i(3),o=a(i(110)),s=a(i(112)),r=a(i(114)),l=a(i(115)),c=a(i(123)),u=a(i(116)),d=i(98),h=i(122),p=i(103),m=i(102),g=i(3239),_=i(3240),f=i(105),v=f.ServerAppStats,E=f.OnboardingPageStats,b=f.ServerSaveSearchSettings,y=f.SearchSettingsValues,k=i(101),S=k.ClickEvent,w=k.ViewBannerEvent,C=k.ClickBannerEvent,T=function(e){function t(e){var i;(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).page=e.page;var n=i.page&&i.page.getPromos()[0];return i.state={promoType:n&&n.getPromoBlockType()},i.onAccept=i.onAccept.bind((0,c.default)(i)),i.onNavigationEvent=i.onNavigationEvent.bind((0,c.default)(i)),i.onSelectOption=i.onSelectOption.bind((0,c.default)(i)),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){p.navigationEvent.subscribe(this.onNavigationEvent),183===this.state.promoType&&(this.sendAppStats(2),n(this.state.promoType))}},{key:"componentWillUnmount",value:function(){p.navigationEvent.unsubscribe(this.onNavigationEvent)}},{key:"render",value:function(){var e=this,t=this.page&&this.page.getPromos().find(function(t){return t.getPromoBlockType()===e.state.promoType});return 183===this.state.promoType?d.createElement(g,{header:t.getHeader(),message:t.getMssg().replace(/\n/g,"<br/>"),buttons:[{text:t.getButtons()[0].getText(),action:this.onAccept}]}):347===this.state.promoType?d.createElement(_,{header:t.getHeader(),ideas:t.getTiwIdeas().getTiwIdeas([]).map(function(e){return{id:e.getTiwPhraseId(),text:e.getTiwPhrase()}}),onSelectOption:this.onSelectOption}):null}},{key:"onAccept",value:function(){var e;e=this.state.promoType,m.track(C,{banner_id:e,position_id:13,context:92,call_to_action_type:1}),this.sendAppStats(1),this.setState({promoType:347}),this.props.onAccepted(),n(347)}},{key:"onNavigationEvent",value:function(e){e&&e.browserNavigation&&e.back&&(this.sendAppStats(4),this.props.onFinished())}},{key:"onSelectOption",value:function(e,t){var i,n,a=(new b).setContext(223).setContextType(1).setSettings((new y).setTiwPhraseId(e.id));new h(503,a).request(),this.sendAppStats(10),i=1229,n=t,m.track(S,{element:i,position:n}),this.props.onFinished()}},{key:"sendAppStats",value:function(e){var t=(new v).setOnboardingPageStats((new E).setPageId(this.page.getPageId()).setEvent(e));new h(278,t).request()}}]),t}(d.Component);e.exports=T},function(e,t,i){"use strict";function n(e){var t=e.header,i=e.message,n=e.buttons;return a.createElement(s,null,a.createElement(r,{align:"center"},a.createElement(c,{right:"xxlg",left:"xxlg"},a.createElement(c,{bottom:"xlg"},a.createElement("div",{style:{width:"70px",height:"70px"}},a.createElement("svg",{viewBox:"0 0 64 64"},a.createElement("path",{d:"M47.13 6.86C56.2 6.86 64 14.49 64 23.9c0 18.36-17.59 33.24-32 33.24S0 42.26 0 23.9C0 14.49 7.8 6.86 16.87 6.86c10.98 0 14.86 8.7 15.13 9.34.27-.64 4.15-9.34 15.13-9.34zm3.01 17.72v-.52h-6.4v.52c0 6.42-5.27 11.65-11.74 11.65S20.26 31 20.26 24.58v-.52h-6.4v.52a18.1 18.1 0 0 0 18.14 18 18.1 18.1 0 0 0 18.14-18z",fill:"#F99DF0"})))),a.createElement(d,{color:"black"},t),a.createElement(c,{top:"md",bottom:"xlg"},a.createElement(h,{color:"gray-dark",dangerous:!0},i)),n.map(function(e,t){return a.createElement("div",{className:"button-align-left",key:"pledge-button-".concat(t)},a.createElement("div",{className:"button-align-left-inner"},a.createElement(l,{narrow:!0,text:e.text,onClick:e.action})))}))))}var a=i(98),o=i(104),s=i(133),r=i(130),l=i(154),c=i(145),u=i(120),d=u.Header1,h=u.P1,p={header:o.string.isRequired,message:o.string.isRequired,buttons:o.arrayOf(o.shape({action:o.func,text:o.string})).isRequired};n.propTypes=p,e.exports=n},function(e,t,i){"use strict";function n(e){var t=e.header,i=e.ideas,n=e.onSelectOption;return a.createElement(s,null,a.createElement(r,{hpadded:!0,align:"center"},a.createElement(d,{color:"black"},t),a.createElement(u,{top:"md"},a.createElement(c,null,i.map(function(e,t){return a.createElement(l,{key:"tiw-phrase-".concat(e.id),type:"monochrome",text:e.text,onClick:function(){return n(e,t)}})})))))}var a=i(98),o=i(104),s=i(133),r=i(130),l=i(154),c=i(229),u=i(145),d=i(120).Header1,h={header:o.string.isRequired,ideas:o.arrayOf(o.shape({id:o.number,text:o.string})).isRequired,onSelectOption:o.func.isRequired};n.propTypes=h,e.exports=n},function(e,t,i){"use strict";var n=i(98),a=i(136),o=i(121),s=i(3242),r=o.extend({signInPage:!0,headerTemplate:null,activationPlace:72,screenName:314,clientSource:107,createElement:function(){return a({qaAttribute:"signin"})},init:function(){r._super.init.apply(this,arguments),this.removeContainer_=!0,this.readyForVrt=this.readyForVrt.bind(this),this.setRemoveContainerFlag=this.setRemoveContainerFlag.bind(this)},onStart:function(){r._super.onStart.apply(this,arguments),this.reactViewId_=this.renderReactView(n.createElement(s,{readyForVrt:this.readyForVrt,setRemoveContainerFlag:this.setRemoveContainerFlag,login:this.getParameter("login")}),this.parent[0])},onStop:function(){r._super.onStop.apply(this,arguments),this.removeContainer_&&this.removeReactView(this.reactViewId_)},setRemoveContainerFlag:function(e){this.removeContainer_=e}},"SignInPage");e.exports=r},function(e,t,i){"use strict";function n(){var e=g.getSavedLoginInfos();if(e&&e.method===g.METHOD.NATIVE)return e.detail}var a=i(3),o=a(i(110)),s=a(i(112)),r=a(i(114)),l=a(i(115)),c=a(i(123)),u=a(i(116)),d=i(98),h=i(103),p=i(126),m=i(99),g=i(113),_=i(102),f=i(125),v=i(124),E=i(3243),b=f.getLogger("SignInContainer"),y=i(105).FormFailure,k=i(101),S=k.ClickEvent,w=k.ViewElementEvent,C=function(e){function t(e){var i;return(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).state={isLoading:!1,partnerId:p.get("partner_id"),emailPhone:e.login||n()||""},i.emailPhoneInputRef=d.createRef(),i.onClickBack=i.onClickBack.bind((0,c.default)(i)),i.onFocusEmailPhone=i.onFocusEmailPhone.bind((0,c.default)(i)),i.onChangeEmailPhone=i.onChangeEmailPhone.bind((0,c.default)(i)),i.onBlurEmailPhone=i.onBlurEmailPhone.bind((0,c.default)(i)),i.onChangePassword=i.onChangePassword.bind((0,c.default)(i)),i.onClickSignIn=i.onClickSignIn.bind((0,c.default)(i)),i.onSubmit=i.onSubmit.bind((0,c.default)(i)),i.onClickForgotPassword=i.onClickForgotPassword.bind((0,c.default)(i)),i.getScreenName=i.getScreenName.bind((0,c.default)(i)),i.onClickSuggestedDomain=i.onClickSuggestedDomain.bind((0,c.default)(i)),i.onShowEmailDomainsList=i.onShowEmailDomainsList.bind((0,c.default)(i)),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.isEmailDomainsListViewed=!1,this.loginObserver=g.getLoginObserver(function(t){t.isAuthenticated?e.props.setRemoveContainerFlag(!0):e.onErrorSignIn(t.formFailure)},{leading:!1}),this.props.readyForVrt()}},{key:"componentWillUnmount",value:function(){this.loginObserver.stop(),this.loginObserver=null}},{key:"render",value:function(){return d.createElement(E,{partnerId:this.state.partnerId,onClickBack:this.onClickBack,isLoading:this.state.isLoading,emailPhoneInputRef:this.emailPhoneInputRef,showSuggestions:this.state.showSuggestions,emailPhone:this.state.emailPhone,isEmailPhoneInvalid:this.state.isEmailPhoneInvalid,errorMessageEmailPhone:this.state.errorMessageEmailPhone,password:this.state.password,isPasswordInvalid:this.state.isPasswordInvalid,errorMessagePassword:this.state.errorMessagePassword,onChangeEmailPhone:this.onChangeEmailPhone,onFocusEmailPhone:this.onFocusEmailPhone,onChangePassword:this.onChangePassword,onBlurEmailPhone:this.onBlurEmailPhone,onSubmit:this.onSubmit,onClickSignIn:this.onClickSignIn,isSigninButtonDisabled:this.getIsSigninButtonDisabled(),onClickForgotPassword:this.onClickForgotPassword,onClickSuggestedDomain:this.onClickSuggestedDomain,onShowEmailDomainsList:this.onShowEmailDomainsList})}},{key:"getIsSigninButtonDisabled",value:function(){return this.state.isLoading||this.state.isEmailPhoneInvalid||this.state.isPasswordInvalid||!this.state.emailPhone||!this.state.password}},{key:"onFocusEmailPhone",value:function(){this.setState({showSuggestions:!0})}},{key:"onChangeEmailPhone",value:function(e){this.setState({showSuggestions:!0,isEmailPhoneInvalid:!1,isPasswordInvalid:!1,emailPhone:e.target.value})}},{key:"onBlurEmailPhone",value:function(){var e=this;setTimeout(function(){e.setState({showSuggestions:!1})},1)}},{key:"onChangePassword",value:function(e){this.setState({isEmailPhoneInvalid:!1,isPasswordInvalid:!1,password:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.getIsSigninButtonDisabled()||this.onClickSignIn()}},{key:"onClickSignIn",value:function(){this.setState({isLoading:!0}),_.track(S,{element:105}),this.signIn().on(1,this.checkErrorCaptcha,this)}},{key:"signIn",value:function(){return g.loginEmail(this.state.emailPhone,this.state.password)}},{key:"checkErrorCaptcha",value:function(e,t){var i=this;this.setState({isLoading:!1}),this.props.setRemoveContainerFlag(!1),e||(t instanceof Error?b.error(t.message):15===(t&&t.getType())&&h.navigate("captcha",{captchaId:t.getErrorId(),serverError:t,screenName:this.getScreenName(),callback:function(){var e=i.signIn();e.on(17,function(){h.navigate(p.get("default.authenticated.page"),!0)}),e.on(20,function(e,t){i.onErrorSignIn(t)})}}))}},{key:"onErrorSignIn",value:function(e){var t=this;if(this.setState({isLoading:!1}),this.props.setRemoveContainerFlag(!1),e instanceof y){var i,n=e.getFailure(),a=e.getErrors();if(a)a.forEach(function(e){var i=e.getFieldName();"login"===i?t.setState({isEmailPhoneInvalid:!0,errorMessageEmailPhone:e.getError()}):"password"===i&&t.setState({isPasswordInvalid:!0,errorMessagePassword:e.getError()})});else if(n){var o=null;72===n.getType()?o=m.get(159):25===n.getType()&&(o=n.getErrorMessage()),i=o,v.showNotification({type:v.TYPES.ERROR,text:i})}else b.error("Unexpected login failure reason!",e)}}},{key:"onClickForgotPassword",value:function(){this.props.setRemoveContainerFlag(!1),this.isEmailDomainsListViewed=!1,_.track(S,{element:180}),h.navigate("forgot",{login:this.state.emailPhone})}},{key:"onClickBack",value:function(){this.props.setRemoveContainerFlag(!0),_.track(S,{element:52}),h.back()}},{key:"onClickSuggestedDomain",value:function(e,t){var i=this;this.setState(function(t){return{showSuggestions:!1,emailPhone:t.emailPhone.replace(/@.*/i,"@".concat(e))}},function(){i.emailPhoneInputRef.current&&i.emailPhoneInputRef.current.focus()}),_.track(S,{element:929,parent_element:532,position:t})}},{key:"onShowEmailDomainsList",value:function(){this.isEmailDomainsListViewed||(this.isEmailDomainsListViewed=!0,_.track(w,{element:532}))}},{key:"getScreenName",value:function(){return 314}}]),t}(d.PureComponent);e.exports=C},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(133),s=i(138),r=i(170),l=i(182),c=i(198),u=i(246),d=i(181),h=i(130),p=i(145),m=i(229),g=i(154),_=i(234),f=i(290),v=i(594),E=i(596),b=i(595);e.exports=function(e){var t=e.partnerId,i=e.onClickBack,y=e.emailPhoneInputRef,k=e.showSuggestions,S=e.emailPhone,w=e.onFocusEmailPhone,C=e.onChangeEmailPhone,T=e.onBlurEmailPhone,P=e.isEmailPhoneInvalid,N=e.errorMessageEmailPhone,I=e.password,x=e.onChangePassword,A=e.isPasswordInvalid,O=e.errorMessagePassword,V=e.onSubmit,R=e.onClickSignIn,B=e.isLoading,L=e.isSigninButtonDisabled,F=e.onClickForgotPassword,M=e.onClickSuggestedDomain,D=e.onShowEmailDomainsList;return n.createElement(o,null,n.createElement(s,null,n.createElement(r,null,n.createElement(l,null,n.createElement(d,{name:"navigation-bar-back",onClick:i})),n.createElement(u,null,n.createElement("svg",null,n.createElement("use",{xlinkHref:"#logo-".concat(t)}))),n.createElement(c,null))),n.createElement(h,{hpadded:!0},n.createElement(_,{onSubmit:V},n.createElement(f,{centered:!0,isInvalid:P,errorMessage:N,dataQaErrorMessage:"error-message-email"},n.createElement(v,{innerRef:y,value:S,placeholder:a.get(411),isInvalid:P,onFocus:w,onChange:C,onBlur:T,autoComplete:"username",autoCapitalize:"none",autoCorrect:"off",spellCheck:"false",
dataQa:"email-input"}),k?n.createElement(b,{email:S,onClickSuggestedDomain:M,onShowEmailDomainsList:D}):null),n.createElement(f,{centered:!0,isInvalid:A,errorMessage:O,dataQaErrorMessage:"error-message-password"},n.createElement(E,{value:I,placeholder:a.get(112),onChange:x,autocomplete:"current-password",autocapitalize:"none",autocorrect:"off",spellcheck:"false",dataQa:"password-input"})),n.createElement(p,{top:"xlg",bottom:"lg"},n.createElement(m,null,n.createElement(g,{text:a.get(121),isLoading:B,isDisabled:L,onClick:R,dataQA:{"data-qa":"signin-button"}}),n.createElement(g,{type:"link",text:a.get(502),isDisabled:B,onClick:F,dataQA:{"data-qa":"forgot-password-button"}}))))))}},function(e,t,i){"use strict";var n=i(121),a=i(99),o=i(124),s=i(3245),r=i(122),l=i(103).navigate,c=i(105),u=c.String,d=c.ServerErrorMessage,h=c.FormFailure,p=n.extend({activationPlace:43,screenName:170,clientSource:42,headerTemplate:null,interrupted_:!1,init:function(){p._super.init.apply(this,arguments),this.mainView_=this.registerView(new s({el:this.parent.get(0)})).on(s.ACTIONS.GET_PASSWORD,this.onGetPassword_,this)},onStart:function(){p._super.onStart.apply(this,arguments),this.interrupted_?this.resumeFromInterrupted_():this.mainView_.reset(),this.readyForVrt()},resumeFromInterrupted_:function(){this.onGetPassword_(this.mainView_.getContact()),this.interrupted_=!1},onGetPassword_:function(e){var t=this;this.mainView_.showLoading(),new r(26,(new u).setValue(e)).on(27,function(e,i){e||t.onPasswordResent_(i)}).on(28,this.onFail_,this).request()},onPasswordResent_:function(){this.mainView_.hideLoading(),this.showNotification_(a.get(114)),l("signin")},onFail_:function(e,t){this.mainView_.hideLoading(),e instanceof d&&15===e.getType()?this.interrupted_=!0:t instanceof h?this.mainView_.setError(t.getErrors().map(function(e){return e.getError()}).join("\n")):this.showNotification_(null,o.TYPES.ERROR)},showNotification_:function(e,t){o.showNotification({text:e,type:t||o.TYPES.INFO})}},"ForgotPassword");e.exports=p},function(e,t,i){"use strict";var n=i(109),a=i(3246),o={GET_PASSWORD:"GET_PASSWORD"},s=n.extend({input_:null,submitButton_:null,events:{"click .js-forgot-password-action":"onButtonClick_"},init:function(){var e=this;this.$el.html(a.render()),this.input_=this.$("input"),this.submitButton_=this.$(".js-forgot-password-action"),this.input_.on("keyup",function(t){e.setHasValue_(Boolean(t.target.value)),e.setError(null)})},updateLoading_:function(e){this.submitButton_.toggleClass("is-loading",e).get(0).disabled=e},setError:function(e){var t=Boolean(e);this.hasError_!==t&&(this.hasError_=t,function(e,t){e.toggleClass("show-error",t).text(t||"").parent().toggleClass("is-invalid",t)}(this.$(".js-control-error"),e))},showLoading:function(){this.updateLoading_(!0)},hideLoading:function(){this.updateLoading_(!1)},reset:function(){this.setHasValue_(!1===this.hasValue_&&""),this.setError(null),this.submitButton_.removeClass("is-loading")},getContact:function(){return this.input_.val()},setHasValue_:function(e){this.hasValue_!==e&&(e||this.input_.val(""),this.input_.parent().toggleClass("has-value",e),this.submitButton_.get(0).disabled=!e,this.hasValue_=e)},onButtonClick_:function(){this.trigger(o.GET_PASSWORD,this.getContact())}},"ForgotPassword");s.ACTIONS=o,e.exports=s},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{title:i,block:n},{back:t.get(["true"],!1),scrollToggle:"1",scrollToggleClass:"navigation-bar--shadow"},"h").w('</div><div class="layout__content layout__content--hpadded"><div class="form-uniform js-form"><p class="form__intro qa-subtitle">').h("t",t,{},{k:"515"},"h").w('</p><div class="control control--centered"><div class="control__error js-control-error"></div><div class="control__inputs"><div class="input"><input type="email" name="name" id="signin-name" class="input__field js-signin-name" autocomplete="username" autocapitalize="none" autocorrect="off" spellcheck="false"><label for="signin-name" class="control__label">').h("t",t,{},{k:"411"},"h").w('</label></div></div></div><div class="form__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{text:a,block:o},{type:"primary",extraClass:"js-forgot-password-action"},"h").w("</div></div></div></div></div></div>")}function i(e,t){return e.h("t",t,{},{k:"115"},"h")}function n(e,t){return e}function a(e,t){return e.h("t",t,{},{k:"90"},"h")}function o(e,t){return e}return e.register("sign-in/forgot-password-page",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(126),a=i(121),o=i(3248),s=i(103).navigate,r=a.extend({headerTemplate:null,init:function(){r._super.init.apply(this,arguments),this.registerView("new-password",new o)},onStart:function(){r._super.onStart.apply(this,arguments),this.getView("new-password").appendTo(this.parent)},onNavigationAction:function(){s(n.get("default.page"))}},"PasswordLinkExpired");e.exports=r},function(e,t,i){"use strict";var n=i(109),a=i(176),o=i(3249),s=n.extend({init:function(){this.$el.html(o.render()),this.toggleScroll_&&this.toggleScroll_.destroy(),this.toggleScroll_=new a(this.$el.find(".js-scroll-toggle"))}},"PasswordLinkExpired");e.exports=s},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{},{logo:t.get(["true"],!1),scrollToggle:"1",scrollToggleClass:"navigation-bar--shadow"},"h").w('</div><div class="layout__content layout__content--hpadded"><div class="form-uniform"><p class="form__intro">').h("t",t,{},{k:"209"},"h").w('</p><p class="form__intro">').h("t",t,{},{k:"210"},"h").w('</p><div class="form__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{text:i,block:n},{type:"primary",extraClass:"js-forgot-password"},"h").w("</div></div></div></div></div></div>")}function i(e,t){return e.h("t",t,{},{k:"211"},"h")}function n(e,t){return e}return e.register("sign-in/password-link-expired",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(126),a=i(121),o=i(99),s=i(102),r=i(124),l=i(3251),c=i(122),u=i(103).navigate,d=i(239).sendOnboardingPageEvent,h=i(12),p=i(105).ServerChangePassword,m=i(101),g=m.ClickEvent,_=m.FillFormEvent,f=a.extend({headerTemplate:null,activationPlace:43,clientSource:42,init:function(){f._super.init.apply(this,arguments),this.mainView_=this.registerView(new l({el:this.parent[0]})).on(l.ACTIONS.SET_PASSWORD,this.onSetPassword_,this).on(l.ACTIONS.FOCUS_INPUT,this.onFocusInput_,this).on(l.ACTIONS.BLUR_INPUT,this.onBlurInput_,this),this.uid_=h(),null!==this.getParameter("token")||u(n.get("default.page"),!0)},onStart:function(){this.getParameter("onboardingId")&&d({pageId:this.getParameter("onboardingId"),event:2}),this.mainView_.update({mssg:this.getParameter("mssg"),primaryButtonText:this.getParameter("primaryButtonText")})},getScreenName:function(){return 153},onSetPassword_:function(e){var t=new p;t.setUpdatedPassword(e.password),t.setChangePasswordToken(this.getParameter("token")),this.mainView_.showLoading(),new c(228,t).on(229,this.onClientChangePassword_,this).on(124,this.onClientSessionFailed_,this).request(),"true"===this.getParameter("isOnboarding")&&s.track(g,{element:105}),this.getParameter("onboardingId")&&d({pageId:this.getParameter("onboardingId"),event:1})},onClientChangePassword_:function(e,t){if(!e){if(t){var i=t.getErrors()[0].getError();return this.mainView_.showErrorMessage(i),void this.mainView_.hideLoading()}"true"===this.getParameter("isOnboarding")?this.getParameter("callback")():r.showNotification({type:r.TYPES.INFO,text:o.get(201)}),this.mainView_.reset(),u(n.get("default.page"),!0)}},onClientSessionFailed_:function(e,t){if(this.mainView_.hideLoading(),!e){var i=t.getErrorMessage();r.showNotification({type:r.TYPES.ERROR,text:i})}},onFocusInput_:function(){s.track(_,{field_name:19,form_name:13,action_type:8,field_type:1,uid:this.uid_})},onBlurInput_:function(){s.track(_,{field_name:19,form_name:13,action_type:9,field_type:1,uid:this.uid_})}},"NewPassword");e.exports=f},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(99),s=i(109),r=i(176),l=i(3252),c=i(111)("SET_PASSWORD","FOCUS_INPUT","BLUR_INPUT"),u=s.extend({headerTemplate:null,isValid_:!1,passwordInput_:null,confirmPasswordInput_:null,update:function(e){this.$el.html(l.render({mssg:e.mssg||o.get(202),primaryButtonText:e.primaryButtonText||o.get(205)})),this.toggleScroll_&&this.toggleScroll_.destroy(),this.toggleScroll_=new r(this.$(".js-scroll-toggle")),this.passwordInput_=this.$(".js-password"),this.confirmPasswordInput_=this.$(".js-confirm-password");var t=this.$(".js-form");t.on("submit",this.onButtonClick_.bind(this)),t[0].addEventListener("input",n.debounce(this.updateFormFilled_,300)),this.passwordInput_.on("focus",this.onFocusInput,this),this.passwordInput_.on("blur",this.onBlurInput,this)},updateFormFilled_:function(e){var t=a(e.target);t.parent().toggleClass("has-value",t.val()),this.validate_(),this.showErrorMessage(null)},updateLoading_:function(e){this.isLoading_=e,this.$(".js-action").toggleClass("is-loading",e).get(0).disabled=e},showLoading:function(){this.updateLoading_(!0)},hideLoading:function(){this.updateLoading_(!1)},validate_:function(){var e=this.passwordInput_.val(),t=this.confirmPasswordInput_.val();this.isValid_=e&&t,this.$(".js-action")[0].disabled=!this.isValid_},reset:function(){this.passwordInput_.val(""),this.confirmPasswordInput_.val(""),this.updateLoading_(!1),this.$(".has-value").removeClass("has-value"),this.showErrorMessage(null)},showErrorMessage:function(e){this.$el.find(".js-control-error-password").toggleClass("show-error",e).text(e||"").parent().toggleClass("is-invalid",e)},onButtonClick_:function(){return this.isLoading_||(this.passwordInput_.val()===this.confirmPasswordInput_.val()?this.trigger(c.SET_PASSWORD,{password:this.passwordInput_.val()}):this.showErrorMessage(o.get(206))),!1},onFocusInput:function(){this.showErrorMessage(null),this.trigger(c.FOCUS_INPUT)},onBlurInput:function(){this.trigger(c.BLUR_INPUT)}},"NewPassword");u.ACTIONS=c,e.exports=u},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{},{logo:t.get(["true"],!1),scrollToggle:"1",scrollToggleClass:"navigation-bar--shadow"},"h").w('</div><div class="layout__content layout__content--hpadded"><form class="form-uniform js-form" novalidate><p class="form__intro qa-subtitle">').f(t.get(["mssg"],!1),t,"h",["s"]).w('</p><div class="conrol control--centered"><div id="password-error" class="control__error js-control-error-password"></div><div class="control__inputs"><div class="input js-input-wrapper"><input type="password" id="password" class="input__field js-password"><label for="password" class="control__label">').h("t",t,{},{k:"203"},"h").w('</label></div></div></div><div class="conrol control--centered"><div id="confirm-password-error" class="control__error"></div><div class="control__inputs"><div class="input js-input-wrapper"><input type="password" id="confirm-password" class="input__field js-confirm-password"><label for="confirm-password" class="control__label">').h("t",t,{},{k:"204"},"h").w('</label></div></div></div><div class="form__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{text:i,attrs:n,block:a},{type:"primary",extraClass:"js-action"},"h").w("</div></div></div></form></div></div>")}function i(e,t){return e.f(t.get(["primaryButtonText"],!1),t,"h")}function n(e,t){return e.w('type="submit"disabled')}function a(e,t){return e}return e.register("sign-in/new-password-page",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(98),a=i(3254),o=i(159),s=i(142).waitForPageTransitionFinish,r=o.extend({headerTemplate:null,screenName:503,update:function(e){r._super.construct.call(this),this.onboardingPage_=e.onboardingPage,this.onComplete_=e.callback},onStart:function(e){this.onboardingPage_=e.onboardingPage,this.onComplete_=e.callback,this.renderReactView(n.createElement(a,{onboardingPage:this.onboardingPage_,onComplete:this.onComplete_}),this.parent[0]),r._super.onStart.apply(this,arguments)},onStop:function(){var e=this;r._super.onStop.apply(this,arguments),s(function(){e.removeReactView(e.parent[0])})}},"OnboardingPrivacyPolicyUpdatePage");e.exports=r},function(e,t,i){"use strict";function n(e){var t=e.target.getAttribute("data-destination");t&&function(e){switch(e){case"settings":k.track(P,{element:128}),E("settings-privacy-ads");break;case"privacy":k.track(P,{element:202}),E("privacy")}}(t)}function a(e){k.track(N,{alert_type:55,activation_place:308,action_type:e})}function o(e){var t=(new w).setType(1).setSendEmail(e),i=(new C).setContext(45).setNotificationSettings([t]);y.getInstance().set(i)}var s=i(3),r=s(i(127)),l=s(i(4)),c=s(i(110)),u=s(i(112)),d=s(i(114)),h=s(i(115)),p=s(i(116)),m=i(98),g=i(3255),_=i(239),f=i(126),v=i(103),E=v.navigate,b=v.back,y=i(196),k=i(102),S=i(105),w=S.NotificationSetting,C=S.AppSettings,T=i(101),P=T.ClickEvent,N=T.AlertEvent,I=function(e){function t(e){var i;return(0,c.default)(this,t),(i=(0,d.default)(this,(0,h.default)(t).call(this,e))).state={isPopupVisible:!1},i}return(0,p.default)(t,e),(0,u.default)(t,[{key:"onPrimaryClick",value:function(e){k.track(P,{element:395}),this.sendOnboardingPageEvent(10),60===e?(this.props.onComplete(),b()):118===e&&(a(12),this.setState({isPopupVisible:!0}))}},{key:"onPopupAction",value:function(e){var t=this;switch(e){case 127:a(2),o(!0);break;case 77:a(5),o(!1)}this.setState({isPopupVisible:!1},function(){t.props.onComplete(),b()})}},{key:"sendOnboardingPageEvent",value:function(e){_.sendOnboardingPageEvent({pageId:this.props.onboardingPage.page_id,event:e})}},{key:"componentDidMount",value:function(){this.sendOnboardingPageEvent(2)}},{key:"render",value:function(){var e,t,i,a,o=this.props.onboardingPage.promo,s=o.header,c=o.mssg,u=(0,l.default)(o.buttons,1)[0],d=u.text,h=u.action,p=(e=this.props.onboardingPage,t=e.promo.extra_texts.reduce(function(e,t){return 5===t.type?t.text:e},""),i=e.promo.buttons.reduce(function(e,t){switch(t.type){case 16:return(0,r.default)({},e,{yes:{text:t.text,actionType:t.action}});case 17:return(0,r.default)({},e,{no:{text:t.text,actionType:t.action}});default:return e}},{}),t&&i.yes&&i.no?{message:t,buttons:i}:null);return m.createElement(g,{partnerId:f.get("partner_id"),title:s,messages:(a=c,a.replace(/\{([^\|]*)\|([^\}]*)\}/g,function(e,t,i){return'<a data-destination="'.concat(t,'">').concat(i,"</a>")})).replace(/[\n]+/g,"\n").split("\n"),primaryButtonText:d,onPrimaryClick:this.onPrimaryClick.bind(this,h),onClickText:n,popup:p&&{message:p.message,yesText:p.buttons.yes.text,noText:p.buttons.no.text,isPopupVisible:this.state.isPopupVisible,onAcceptPopup:this.onPopupAction.bind(this,p.buttons.yes.actionType),onCancelPopup:this.onPopupAction.bind(this,p.buttons.no.actionType)}})}}]),t}(m.Component);e.exports=I},function(e,t,i){"use strict";var n=i(98),a=i(133),o=i(138),s=i(130),r=i(170),l=i(246),c=i(143),u=i(151),d=i(152),h=i(160),p=i(154),m=i(3256);e.exports=function(e){var t=e.partnerId,i=e.title,g=e.messages,_=e.primaryButtonText,f=e.onClickText,v=e.onPrimaryClick,E=e.popup;return n.createElement(a,null,n.createElement(o,null,n.createElement(r,{position:"fixed"},n.createElement(l,null,n.createElement("svg",null,n.createElement("use",{xlinkHref:"#logo-".concat(t)})))),n.createElement(r,null)),n.createElement(s,{hpadded:!0,vpadded:!0,align:"center"},n.createElement(c,null,n.createElement(u,{text:i}),g.map(function(e){return n.createElement(d,{text:e,key:e,onClick:f})}),n.createElement(h,null,n.createElement(p,{color:"primary",type:"filled",narrow:!0,text:_,onClick:v}))),E?n.createElement(m,{visible:E.isPopupVisible,message:E.message,yesText:E.yesText,noText:E.noText,onYes:E.onAcceptPopup,onNo:E.onCancelPopup}):null))}},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(116)),c=i(98),u=i(219),d=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(0,r.default)(t).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.view=new u,this.view.enable()}},{key:"componentWillUnmount",value:function(){this.view.destroy()}},{key:"componentDidUpdate",value:function(e){this.view.update(this.props),e.visible!==this.props.visible&&(this.props.visible?this.view.show():this.view.dismiss())}},{key:"render",value:function(){return null}}]),t}(c.Component);e.exports=d},function(e,t,i){"use strict";var n,a=i(100),o=i(3258),s=function(){};a.extend(s.prototype,{name:"LegalDocument",get:function(e){var t;switch(e.document){case"prize_draw":t="prize_draw/";break;case"terms":t="terms/";break;case"privacy":t="privacy/";break;case"guidelines":t="guidelines/";break;case"faq-for-parents":t="faq-for-parents/";break;case"safetytips":t="safetytips.phtml";break;default:return}return o.get(t)}}),s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";var n=i(25),a=i(126),o=i(125),s=i(26),r=o.getLogger("WebCluster"),l={getClusterUrl:function(){var e,t=s.getCurrentLanguageUri(),i=window.location.protocol.substring(0,window.location.protocol.length-1),n=a.get("webcluster.hostname");switch(i){case"http":e=a.get("webcluster.http.port");break;case"https":e=a.get("webcluster.https.port")}if(n){if(e)return"".concat(window.location.protocol,"//").concat(n,":").concat(e,"/").concat(t,"/");r.error("Bad url protocol. Can't get webcluster port")}else r.error("Bad url protocol. Can't get webcluster hostname")},get:function(e,t){var i=this;return t=t||{},4===a.get("platform")?t.platform="mobileweb":t.platform=a.get("platform"),t.ws=1,new Promise(function(a,o){n.ajax({timeout:2e4,url:i.getClusterUrl()+e,data:t,dataType:"json",type:"GET",success:a,error:function(e,t,i){o(new Error(i||e.responseText))}})})}};e.exports=l},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(99),o=i(121),s=i(103),r=i(586),l=i(420),c=o.extend({init:function(){c._super.init.apply(this,arguments),this.view_=this.registerView(new l)},onStart:function(){c._super.onStart.apply(this,arguments),this.view_.update({loading:!0}),this.view_.appendTo(this.parent),this.element.attr("data-qa-page","guidelines")},onReady:function(){var e=this;c._super.onReady.apply(this,arguments),r.getInstance().get().then(function(t){var i=(0,n.default)(t,1)[0];e.view_.update({content:i.getValue()})}).catch(function(){s.back()})},getNavigationBarContext:function(){return c._super.getNavigationBarContext.call(this,{title:a.get(448)})}},"GuidelinesPage");e.exports=c},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(121),o=i(103),s=i(587),r=i(420),l=i(342),c=a.extend({init:function(){c._super.init.apply(this,arguments),this.view_=this.registerView(new r).on("openLink",l.openLink)},onStart:function(){c._super.onStart.apply(this,arguments),this.view_.update({loading:!0}),this.view_.appendTo(this.parent),this.element.attr("data-qa-page","safetytips")},onReady:function(){var e=this;c._super.onReady.apply(this,arguments),s.getInstance().get().then(function(t){var i=(0,n.default)(t,1)[0];e.view_.update({content:i.getValue()})}).catch(function(){o.back()})}},"SafetyTipsPage");e.exports=c},function(e,t,i){"use strict";var n=i(3),a=n(i(144)),o=n(i(3262)),s=i(98),r=i(121),l=i(136),c=i(3264),u=r.extend({headerTemplate:null,activationPlace:76,notificationScreenAccess:2,screenName:18,clientSource:69,createElement:function(){return l({qaAttribute:"add-photos"})},init:function(){u._super.init.apply(this,arguments)},onStart:function(){u._super.onStart.apply(this,arguments);var e=this.getParameters(),t=e.albumType,i=e.feature,n=e.id,r=e.replaceActivationPlace,l=e.photoToReplace,d=e.async,h=(0,o.default)(e,["albumType","feature","id","replaceActivationPlace","photoToReplace","async"]);this.reactViewId_=this.renderReactView(s.createElement(c,(0,a.default)({backHistoryEntry:this.backHistoryEntry,destination:this.destination,activationPlace:r?Number(r):this.activationPlace,albumType:t?Number(t):2,feature:i?Number(i):15,requestedByUserId:n,photoToReplace:l,async:d},h)),this.parent[0])}},"AddPhotos");e.exports=u},function(e,t,i){"use strict";var n=i(3263);e.exports=function(e,t){if(null==e)return{};var i,a,o=n(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}},function(e,t,i){"use strict";e.exports=function(e,t){if(null==e)return{};var i,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}},function(e,t,i){"use strict";function n(e){var t=e.count,i=e.total;i>1&&B.updateNotification({type:B.TYPES.PHOTO_UPLOAD,progress:{count:t,total:i}})}var a=i(3),o=a(i(127)),s=a(i(110)),r=a(i(112)),l=a(i(114)),c=a(i(115)),u=a(i(123)),d=a(i(116)),h=i(98),p=i(104),m=i(100),g=i(25),_=i(103),f=_.back,v=_.goToHistoryEntry,E=_.navigate,b=i(99),y=i(146),k=i(113),S=i(132),w=i(214),C=i(128),T=i(140),P=i(161),N=i(278),I=i(247),x=i(289),A=i(150),O=i(102),V=i(3265),R=i(399),B=i(124),L=i(122),F=i(3266),M=i(105),D=M.ServerUploadPhoto,U=M.ServerMultiUploadPhoto,j=M.UploadedPhoto,G=i(101),q=G.ImportPhotoEvent,H=G.ReplacePhotoEvent,z={albumType:p.number.isRequired,feature:p.number.isRequired,activationPlace:p.number.isRequired,photoToReplace:p.string,requestedByUserId:p.string,backHistoryEntry:p.any,destination:p.any,callback:p.func},Y=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).state={providers:[],providerContext:null,isLoadingProviders:!0},i.uploadFromExternalProviders=i.uploadFromExternalProviders.bind((0,u.default)(i)),i.uploadPhotos=i.uploadPhotos.bind((0,u.default)(i)),i}return(0,d.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.initializeExternalProviders(),this.getExternalProviders()}},{key:"componentWillUnmount",value:function(){this.detachCallbacks()}},{key:"render",value:function(){var e=function(){var e,t=N("mw-vupld");return g.os.windowsPhone?e=F.OperatingSystem.WINPHONE:g.os.ios?e=F.OperatingSystem.IOS:g.os.android&&(e=F.OperatingSystem.ANDROID),{operatingSystem:e,url:t}}();return h.createElement(F,{nativeAppLink:e,providers:this.state.providers,onNavigateBackClick:function(){return f()},onPhotoUploadClick:this.uploadPhotos,onExternalProviderClick:this.uploadFromExternalProviders,isLoadingPhotos:!1,isLoadingProviders:this.state.isLoadingProviders})}},{key:"initializeExternalProviders",value:function(){A.removeStoredAuthData();var e=11===this.props.albumType?7:14;14!==e&&A.getSupportedProviders({providerContext:e}),this.setState({providerContext:e})}},{key:"getExternalProviders",value:function(){var e=this;return this.setState({isLoadingProviders:!0}),A.getSupportedProviders({providerContext:14}).then(function(t){var i=function(e){var t=[];for(var i in e){var n=e[i];t.push({id:Number(n.getId()),name:n.getDisplayName(),type:Number(n.getType())})}return t}(t);e.setState({providers:i,isLoadingProviders:!1})},function(t){e.setState({isLoadingProviders:!1}),B.showNotification({type:B.TYPES.ERROR,text:t})})}},{key:"uploadFromExternalProviders",value:function(e,t){var i=(0,o.default)({providerContext:this.state.providerContext,providerType:t,requestedByUserId:this.props.requestedByUserId,activationPlace:this.props.activationPlace,photoToReplace:this.props.photoToReplace,albumType:this.props.albumType,feature:this.props.feature,replaceCurrentUrl:!0,allAlbums:!0,limit:3},m.pick(this.props,["backHistoryEntry","destination"]));A.startImport(m.extend(i,{returnRoute:y.encodeRoute("external-provider-albums",i)}))}},{key:"uploadPhotos",value:function(){var e=I(4);e?(this.detachCallbacks(),x.on(x.EVENTS.START_MULTIPLE,this.onPhotosUploadStart,this),x.on(x.EVENTS.PROGRESS,n),x.on(x.EVENTS.SUCCESS,this.onPhotosUpload,this),x.on(x.EVENTS.FAILURE,this.onPhotosUploadFailure,this),x.start({uploadUrl:e,albumType:this.props.albumType,multiple:!0})):this.onError()}},{key:"onPhotosUpload",value:function(e,t){var i=this;if(this.detachCallbacks(),e&&e.length)if(1!==e.length||this.props.async){P.invalidate();var n=e.filter(function(e){return Boolean(e)}).map(function(e){return(new j).setPhotoId(e.photo_id).setPhotoSource(2)}),a=(new U).setPhotos(n).setAlbumType(2).setContext(40);new L(495,a).on(496,function(n){t||(n?i.onError(n):i.onPhotosUploadSuccess(e))}).request()}else this.onPhotoUpload(e[0])}},{key:"onPhotoUpload",value:function(e){this.detachCallbacks();var t=e&&e.photo_id;if(t){O.track(q,{photo_id:t,photo_import_method:3,activation_place:this.props.activationPlace});var i=k.getUserId();w.getInstance().invalidate(i),C.getInstance().invalidate(i),T.getInstance().invalidate(),B.showNotification({type:B.TYPES.INFO,text:b.get(152)}),P.invalidate();var n=(new D).setPhotoId(t).setUploadTrigger(this.props.feature);this.props.photoToReplace&&n.setPhotoToReplace(this.props.photoToReplace);var a=this.props.requestedByUserId;a&&n.setRequestedByUserId(a),new L(93,n).on(148,function(e,t){e||S.set(t)}).on(143,this.onServerUploadPhoto,this).on(144,this.onServerUploadPhoto,this).request()}else this.onError(e)}},{key:"onServerUploadPhoto",value:function(e,t,i){e||i?this.onError():(V.updateProfilePhoto(t.getPhoto()),this.props.photoToReplace&&O.track(H,{activation_place:this.props.activationPlace,import_photo_count:1}),R.trigger(),this.navigateAfterUpload(),this.executeControllerCallback(t))}},{key:"onPhotosUploadStart",value:function(e,t){this.props.async&&this.navigateAfterUpload(),B.showNotification({type:B.TYPES.PHOTO_UPLOAD,text:1===t?b.get(200):b.get(795),progress:1===t?void 0:{count:e,total:t}})}},{key:"onPhotosUploadSuccess",value:function(e){var t=this;B.showNotification({type:B.TYPES.INFO,text:1===e.length?b.get(589):b.get(588)}),e.forEach(function(e){O.track(q,{photo_id:e.photo_id,photo_import_method:3,activation_place:t.props.activationPlace})}),this.props.async||this.navigateAfterUpload(),this.executeControllerCallback(e)}},{key:"onPhotosUploadFailure",value:function(e){this.onPhotosUpload(e,!0),B.showNotification({type:B.TYPES.ERROR,text:b.get(587)})}},{key:"executeControllerCallback",value:function(e){var t=this.props.callback;t&&t(e)}},{key:"updatePhotosRequired",value:function(e){if(!m.isEmpty(e)){var t=!e.getEnabled()&&2===e.getRequiredAction();this.setState({photosRequired:t})}}},{key:"navigateAfterUpload",value:function(){var e=this.props,t=e.backHistoryEntry,i=e.destination;t||i?function(e,t){v(e,function(e,i){return t?(i(),void E(t,!0)):void(e||(i(),f()))})}(t,i):f()}},{key:"detachCallbacks",value:function(){x.off(x.EVENTS.START_MULTIPLE,this.onPhotosUploadStart,this),x.off(x.EVENTS.PROGRESS,n),x.off(x.EVENTS.SUCCESS,this.onPhotosUpload,this),x.off(x.EVENTS.FAILURE,this.onPhotosUploadFailure,this)}},{key:"onError",value:function(e){this.detachCallbacks();var t=b.get(75);e instanceof Error&&(t=e.message),B.showNotification({type:B.TYPES.ERROR,text:t})}}]),t}(h.Component);Y.propTypes=z,e.exports=Y},function(e,t,i){"use strict";var n=i(113);e.exports={updateProfilePhoto:function(e){(function(){var e=n.getUser();if(!e)return!1;var t=e.getProfilePhoto();return Boolean(t&&"0"!==t.getId())})()||n.getUser().setProfilePhoto(e)}}},function(e,t,i){"use strict";function n(e){var t=e.providers,i=e.nativeAppLink,n=e.onPhotoUploadClick,o=e.onExternalProviderClick,k=e.onNavigateBackClick,S=e.isUploadingPhotos,w=e.isLoadingProviders;return a.createElement(r,null,a.createElement(l,null,a.createElement(d,{position:"fixed",shadow:!0},a.createElement(p,null,a.createElement(g,{name:"navigation-bar-back",onClick:k})),a.createElement(h,{text:s.get(424)}),a.createElement(m,null)),a.createElement(d,null)),a.createElement(c,{hpadded:!0,vpadded:!0},a.createElement(f,{bottom:"lg"},a.createElement(v,{align:"center",color:"gray-dark"},s.get(425))),a.createElement("div",{className:"add-photos-sources"},a.createElement("div",{className:"add-photos-sources__section"},a.createElement(b,{name:s.get(48),needsclick:!0,qaPhotoProvider:"gallery",isLoading:S,onClick:n}),i&&i.operatingSystem?a.createElement(y,{operatingSystem:i.operatingSystem,nativeAppUrl:i.url}):null),w?a.createElement("div",{className:"add-photos-sources__section"},a.createElement(E,null),a.createElement(E,null)):a.createElement("div",{className:"add-photos-sources__section"},t.map(function(e){return a.createElement(b,{key:e.id,type:e.type,name:e.name,qaPhotoProvider:e.name.toLowerCase(),isLoading:w,onClick:function(){return o(e.id,e.type)}})})))),a.createElement(u,{hpadded:!0,vpadded:!0},a.createElement(_,{text:s.get(76)})))}var a=i(98),o=i(104),s=i(99),r=i(133),l=i(138),c=i(130),u=i(185),d=i(170),h=i(223),p=i(182),m=i(198),g=i(181),_=i(233),f=i(145),v=i(120).P1,E=i(3267),b=i(3268),y=i(3269),k={nativeAppLink:o.shape({operatingSystem:o.oneOf(["android","ios","winphone"]),url:o.string}),providers:o.array,onPhotoUploadClick:o.func.isRequired,onExternalProviderClick:o.func.isRequired,onNavigateBackClick:o.func.isRequired,isUploadingPhotos:o.bool,isLoadingProviders:o.bool};n.OperatingSystem=y.OperatingSystem,n.propTypes=k,n.defaultProps={nativeAppLink:{},providers:[],isUploadingPhotos:!1,isLoadingProviders:!1},e.exports=n},function(e,t,i){"use strict";var n=i(98),a=i(117),o=i(191),s=i(193),r=i(192),l=i(163);e.exports=function(){var e=a({"add-photos-provider":!0,"is-skeleton":!0});return n.createElement("div",{className:e},n.createElement(o,null,n.createElement(s,null,n.createElement(l,{image:{},size:"sm"})),n.createElement(r,null,n.createElement("div",{className:"add-photos-provider__description"}))))}},function(e,t,i){"use strict";function n(e){var t,i=e.type,n=e.name,a=e.needsclick,o=e.qaPhotoProvider,r=e.isLoading,g=e.onClick,f=_[i],v=l({"add-photos-provider":!0,needsclick:a});return r&&(t={children:s.createElement(p,{name:"loading-dots",size:"lg"}),background:"dark"}),s.createElement("div",{className:v,"data-qa-provider":o,onClick:r?null:g},s.createElement(c,null,s.createElement(u,null,s.createElement(h,{size:"sm",icon:{name:f},overlay:t})),s.createElement(d,null,s.createElement("div",{className:"add-photos-provider__description"},s.createElement(m,{weight:"medium"},n)))))}var a,o=i(3)(i(107)),s=i(98),r=i(104),l=i(117),c=i(191),u=i(193),d=i(192),h=i(163),p=i(106),m=i(120).P1,g={type:r.number,name:r.string.isRequired,needsclick:r.bool,qaPhotoProvider:r.string,isLoading:r.bool,onClick:r.func.isRequired},_=(a={},(0,o.default)(a,0,"adaptor-photo-gallery"),(0,o.default)(a,1,"adaptor-facebook"),(0,o.default)(a,2,"adaptor-vkontakte"),(0,o.default)(a,3,"adaptor-odnoklassniki"),(0,o.default)(a,4,"adaptor-google"),(0,o.default)(a,9,"adaptor-google"),(0,o.default)(a,12,"adaptor-instagram"),(0,o.default)(a,14,"adaptor-linkedin"),(0,o.default)(a,15,"adaptor-twitter"),(0,o.default)(a,31,"adaptor-photo-gallery"),a);n.propTypes=g,n.defaultProps={type:0,needsclick:!1,qaPhotoProvider:"",isLoading:!1},e.exports=n},function(e,t,i){"use strict";function n(e){var t,i,n=e.operatingSystem,o=e.nativeAppUrl;return n&&("winphone"===n?(t=a.createElement("svg",{viewBox:"0 0 64 64"},a.createElement("path",{d:"M50.79 12.7L5.57 21.8v33.1L50.79 64l9.04-3.3V16l-9.04-3.3zM25.32 48.05L15.3 46.63v-8.38h10.03v9.8zm0-11.07H15.3v-7.71l10.03-1.43v9.14zm13.91 13.01l-12.65-1.86v-9.88h12.65v11.74zm0-13.01H26.58v-9.21l12.65-1.87v11.08zM19.54 17V9.4c-.05-4.72 2.37-6.16 6.83-7.21 6.72-1.59 7.15 2.77 7.15 5.55v6.44l1.64-.33V7.88C35.15 2.63 33.52-1.3 26.04.4c-4.03.92-8.14 1.96-8.14 8.84v8.09l1.64-.33zM36.47 4.77c.1.5.2 1.07.25 1.66 4.3-.62 4.21 1.16 4.21 4.89v1.37l1.63-.34v-1.03c0-5.79-.9-7.33-6.1-6.55zM31.69 5.9c.1.47.17 1.04.18 1.72-2.4 1.04-3.32 1.79-3.28 5.36v2.2l-1.65.33v-2.54c0-5.27 2-6.1 4.75-7.07z",fill:"currentColor"})),i=s.get(428)):"ios"===n?(t=a.createElement("svg",{
viewBox:"0 0 64 64"},a.createElement("path",{d:"M48.8 34.6c-.08-7.56 6.36-11.24 6.65-11.4-3.64-5.17-9.3-5.88-11.28-5.94-4.75-.48-9.35 2.76-11.77 2.76-2.47 0-6.19-2.71-10.2-2.63-5.17.08-10 2.98-12.65 7.5-5.46 9.2-1.39 22.71 3.85 30.15 2.62 3.64 5.69 7.7 9.7 7.57 3.91-.16 5.38-2.43 10.11-2.43 4.69 0 6.07 2.43 10.15 2.33 4.21-.06 6.86-3.65 9.4-7.33a29.68 29.68 0 0 0 4.28-8.5c-.1-.03-8.17-3.03-8.25-12.08zm-7.73-22.23c2.1-2.56 3.55-6.05 3.15-9.59-3.05.13-6.87 2.05-9.07 4.56-1.94 2.21-3.68 5.83-3.23 9.24 3.43.24 6.95-1.69 9.15-4.2z",fill:"currentColor"})),i=s.get(429)):"android"===n&&(t=a.createElement("svg",{viewBox:"0 0 64 64"},a.createElement("path",{d:"M4.93 0c-.42.28-.76.7-.76 1.46v61.92c0 .08.04.12.04.2l32.72-31.56L4.93 0zm41.52 22.84L33.3 15.22l-1.21-.7L11.71 2.7l27.3 27.31 7.44-7.18zM8.67 63.27l6.52-3.78 1.52-.88 1.85-1.07 7.1-4.11 3.56-2.06 4.1-2.38 13.02-7.56-7.38-7.38-30.3 29.22zm51.4-32.54l-.02-.01c-1-.55-7.59-4.38-11.02-6.38l-8 7.72 7.9 7.89 2.41-1.4 3.44-2 1.31-.75 3.89-2.26c1.53-.88 1.38-2.11.1-2.8z",fill:"currentColor"})),i=s.get(427))),a.createElement("div",{className:"add-photos-banner"},n?a.createElement("div",{className:"add-photos-banner__image"},t):null,a.createElement("div",{className:"add-photos-banner__details"},s.get(430)," ",o&&i?a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"inline-link"},i):null," ",s.get(426)))}var a=i(98),o=i(104),s=i(99),r={IOS:"ios",ANDROID:"android",WINPHONE:"winphone"},l={operatingSystem:o.oneOf(Object.values(r)).isRequired,nativeAppUrl:o.string};n.OperatingSystem=r,n.propTypes=l,n.defaultProps={nativeAppUrl:""},e.exports=n},function(e,t,i){"use strict";var n=i(122),a=i(126),o=i(124),s=i(3271),r=i(121),l=i(103),c=i(99),u=i(113),d=i(329),h=i(214),p=i(140),m=i(148),g=i(105),_=g.ServerGetExternalProviderImportedData,f=g.ImportedPhotoParameters,v=i(128),E=i(136),b=r.extend({createElement:function(){return E({className:"external-provider-import",qaAttribute:"external-provider-import"})},providerName_:null,importedAlbums_:null,headerTemplate:null,init:function(){b._super.init.apply(this,arguments),m(this),this.registerView("import-view",new s).on(s.ACTIONS.IMPORT,this.onPhotoImport_).on(s.ACTIONS.NEXT_PAGE,this.getPhotos_),this.getView("import-view").appendTo(this.parent)},onStart:function(){return b._super.onStart.apply(this,arguments),this.params=this.getParameters(),this.wasBack()||!this.params.provider?(l.navigate(a.get("default.page")),null):(this.offset_=0,this.getView("import-view").reset(),this.getView("import-view").showLoading(),this.getPhotos_(),void 0)},getPhotos_:function(){new n(481,(new _).setImportId(this.params.importId).setLimit(48).setOffset(this.offset_).setPhotoParams((new f).setAlbumUid(this.params.albumId))).on(365,this.onPhotosReceived_.bind(this)).request()},onPhotosReceived_:function(e,t){if(e)return this.onError_(e),null;var i=this.getView("import-view");i.hideLoading();var n=t&&t.getPhotoImportProgressData(),a=n&&n.getAlbums([])[0],o=a&&a.getPhotos([])[0];if(!o)return null;this.isVideo_=o.hasVideo();var s=a?a.getCountOfPhotos():0,r=this.offset_;this.offset_+=a.getPhotos([]).length,i.update({album:a,isFirst:0===r,isLast:this.offset_===s})},onNavigationAction:function(e,t){switch(e){case r.BUTTONS.SELECT_ALL:t.checked=this.getView("import-view").toggleSelection();break;case r.BUTTONS.BACK:l.navigate("external-provider-albums",!0,{providerType:this.params.provider.getType(),requestedByUserId:this.params.requestedByUserId,activationPlace:this.params.activationPlace,photoToReplace:this.params.photoToReplace,albumType:this.params.albumType,feature:this.params.feature,goBack:!0});break;default:b._super.onNavigationAction.apply(this,arguments)}},onPhotoImport_:function(e){var t=this,i=this.getView("import-view");i.showLoading();var n=this.params.provider;d.uploadMedia({photos:e.map(String),photoToReplace:this.params.photoToReplace,providerId:n.getId(),providerType:n.getType(),activationPlace:Number(this.params.activationPlace)||this.activationPlace,albumId:this.params.albumId,albumType:Number(this.params.albumType),mediaType:this.isVideo_?d.MediaType.VIDEO:d.MediaType.PHOTO,requestedByUserId:this.params.requestedByUserId,feature:this.params.feature}).then(function(e){h.getInstance().update(e),t.onPhotoSendSuccess_()}).catch(function(){i.hideLoading(),t.onError_(c.get(75))})},onError_:function(e){this.getView("import-view").hideLoading(),o.showNotification({type:o.TYPES.ERROR,text:e}),l.back()},onPhotoSendSuccess_:function(){var e=u.getUserId();h.getInstance().invalidate(),v.getInstance().invalidate(e),p.getInstance().invalidate(),this.getView("import-view").hideLoading(),o.showNotification({type:o.TYPES.INFO,text:"true"===this.getParameter("isVideo")?c.get(410):c.get(152)});var t=this.getParameters(),i=t.backHistoryEntry,n=t.destination;l.goToHistoryEntry(i,function(e,t){return n?(t(),void l.navigate(n,!0)):void(e||(t(),l.back()))})}},"ExternalProviderImport");e.exports=b},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(169),s=i(3272),r=i(597),l=i(421),c={IMPORT:"IMPORT",PHOTO_SELECTED:"PHOTO_SELECTED",NEXT_PAGE:"next-page",PREV_PAGE:"prev-page"},u=a.extend({events:{"click .js-select-photo":"onPhotoClick_","click .js-import-photo":"onImportPhotos_"},albums:null,selectedIds_:null,init:function(){u._super.init.apply(this,arguments),this.albums=[],this.selectedIds_=[]},update:function(e){if(u._super.update.apply(this,arguments),e.album){var t=e.album.getPhotos([]).map(function(e){return{id:e.getId(),photoUrl:o.getImageUrlForSize(e.getPreviewUrl(),90,90),isImported:e.getIsAlreadyImported()}});this.render(t,e.album.getName(),e.isFirst,e.isLast)}var i=this.contentElement_=this.$el.find(".js-content"),n=this.$el.find(".js-content-item").get(),a=this.$el.find(".js-next-page-loader").get(0);this.scroll_=(new l).setScrollableElement(window).setDisplayHiddenPages(1).setPreLoadOffset(2).setContentElement(i.get(0)).setTurnPageEventHandler(this.onTurnPageEvent_,this).setLoaderElements(a).setHasMore(!e.isLast).insert(n,1).updateLayout()},onTurnPageEvent_:function(){this.trigger(c.NEXT_PAGE)},render:function(e,t,i,n){var a={photos:e,title:t,isLast:n};i?this.$el.html(s.render(a)):this.contentElement_.append(r.render(a)),this.getElements_(),this.setPhotoCount_(),this.disableImportButton_()},toggleSelection:function(){var e=this.$el.find(".js-select-photo input").not("[disabled]");this.selectAll=!this.selectAll,this.selectedIds_.length=0;for(var t=0;t<e.length;t++){var i=n(e[t]),a=i.data("id");a&&(i.prop("checked",this.selectAll),this.selectAll&&this.selectedIds_.push(a))}return this.disableImportButton_(!this.selectAll),this.selectAll},getElements_:function(){this.importPhotosButton_=this.$el.find(".js-import-photo"),this.photoCountEl_=this.$el.find(".js-photo-count")},onImportPhotos_:function(){this.trigger(c.IMPORT,this.selectedIds_)},disableImportButton_:function(){this.importPhotosButton_||this.getElements_(),this.importPhotosButton_.prop("disabled",0===this.selectedIds_.length)},onPhotoClick_:function(e){var t=n(e.target);if(t.prop("checked")){var i=t.data("id");i&&this.selectedIds_.push(i)}else{var a=this.selectedIds_.indexOf(t.data("id"));a>-1&&this.selectedIds_.splice(a,1)}this.setPhotoCount_(),this.disableImportButton_(),this.trigger(c.PHOTO_SELECTED,t.data("id"))},setPhotoCount_:function(){this.photoCountEl_&&this.photoCountEl_.html(this.selectedIds_.length)},reset:function(){this.selectedIds_.length=0,this.importPhotosButton_=null,this.photoCountEl_=null,this.$el.empty()}},"ExternalProviderAlbums");u.ACTIONS=c,e.exports=u},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(597),i(270),function(e){function t(e,t){return t=t.shiftBlocks(c),e.h("NavigationBar",t,{title:i,secondary:n,block:a},{back:"true"},"h").w('<div class="js-content">').p("photos/photo-import-photos",t,t,{}).w('</div><div class="infinite-scroll-spinner js-next-page-loader">').p("loading-dots",t,t,{size:"small",color:"dark"}).w('</div><div class="floating-action">').b(t.getBlock("action"),t,{},{}).w('</div><div class="fake">').b(t.getBlock("action"),t,{},{}).w("</div>")}function i(e,t){return t=t.shiftBlocks(c),e.f(t.get(["title"],!1),t,"h")}function n(e,t){return t=t.shiftBlocks(c),e.w('<label for="select-all" class="checkbox-singular"><input id="select-all" type="checkbox" class="js-navigation" data-action="').f(t.getPath(!1,["NAVIGATION_BUTTONS","SELECT_ALL"]),t,"h").w('" /><div class="checkbox__inactive">').h("Icon",t,{},{name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w("</div></label>")}function a(e,t){return t=t.shiftBlocks(c),e}function o(e,t){return t=t.shiftBlocks(c),e.w('<div class="cta-box"><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{text:s,attrs:r,block:l},{type:"primary",extraClass:"js-import-photo"},"h").w("</div></div></div></div>")}function s(e,t){return t=t.shiftBlocks(c),e.h("t",t,{},{k:"43"},"h")}function r(e,t){return t=t.shiftBlocks(c),e.w("disabled")}function l(e,t){return t=t.shiftBlocks(c),e}e.register("photos/photo-import",t);var c={action:o};return t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";var n=i(3)(i(127)),a=i(100),o=i(3274),s=i(121),r=i(124),l=i(103),c=i(150),u=i(136),d=s.VIEWS.NAVIGATION_BAR,h=s.extend({createElement:function(){return u({className:"external-provider-albums",qaAttribute:"external-provider-albums"})},providerName_:null,importedAlbums_:null,providerType:null,importData:null,token:null,title:"",providerIds_:null,init:function(){h._super.init.apply(this,arguments),this.registerView("import-view",new o).on(o.ACTIONS.ALBUM_SELECTED,this.onAlbumSelected_.bind(this))},onError_:function(e){r.showNotification({type:r.TYPES.ERROR,text:e}),this.hasHandledError_||(this.hasHandledError_=!0,l.back())},updateNavigation:function(){this.updateView(d,{actions:this.getNavigationActions()})},onNavigationAction:function(e){e!==s.BUTTONS.BACK?h._super.onNavigationAction.apply(this,arguments):l.navigate("add-photos",!0,{feature:this.feature_,id:this.requestedByUserId_,replaceActivationPlace:this.activationPlace_,photoToReplace:this.photoToReplace_,albumType:this.albumType_})},onStart:function(e){h._super.onStart.apply(this,arguments),c.on(c.EVENTS.AUTH_ERROR,this.onError_,this),this.getView("import-view").reset(),this.getView("import-view").showLoading(),this.getView("import-view").appendTo(this.parent),this.importedAlbums_=[],this.providerIds_={},this.albumType_=Number(e.albumType),this.providerContext_=Number(e.providerContext),this.providerType_=Number(e.providerType),this.photoToReplace_=e.photoToReplace,this.activationPlace_=e.activationPlace||this.activationPlace,this.feature_=e.feature,this.requestedByUserId_=e.requestedByUserId,this.goBack_=e.goBack,this.checkImportData_()},onStop:function(){h._super.onStop.apply(this,arguments),c.off(c.EVENTS.AUTH_ERROR,this.onError_,this),this.hasHandledError_=!1},checkImportData_:function(){this.wasBack()&&this.importData_?this.onImportDone_():this.providerType_&&this.fetchImportData_()},wasBack:function(){return Boolean(this.wasBack_||this.goBack_)},fetchImportData_:function(){var e=this;if(this.updateView(d,{title:""}),this.importData_=null,!this.providerType_)return l.back(),null;var t=this.getParameter("importPromise");t?t.then(function(t){e.importData_=t,e.getProvider_(e.providerContext_,e.providerType_)},this.onError_.bind(this)):l.back()},getProvider_:function(e,t){var i=this;return c.getProvider({providerContext:e,providerType:t}).then(function(e){i.provider_=e,i.onImportDone_()},this.onError_.bind(this))},onImportDone_:function(){if(!this.importData_)return!1;var e=this.importData_.getPhotoImportProgressData();this.albums_=e&&e.getAlbums([]),this.importId_=this.importData_.getImportId(),this.updateView_({albums:this.albums_,providerName:this.provider_.getDisplayName()})},updateView_:function(e){this.updateView(d,{title:e.providerName}),this.updateView("import-view",e)},onAlbumSelected_:function(e){l.navigate("external-provider-import",!0,(0,n.default)({requestedByUserId:this.requestedByUserId_,importId:this.importId_,albumId:e,activationPlace:Number(this.activationPlace_),albumType:this.albumType_,photoToReplace:this.photoToReplace_,provider:this.provider_,feature:this.feature_},a.pick(this.getParameters(),["backHistoryEntry","destination"])))}},"ExternalProviderAlbums");e.exports=h},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(169),s=i(99),r=i(3275),l={ALBUM_SELECTED:"ALBUM_SELECTED"},c={video:{name:s.get(346),noData:s.get(344),hasData:function(e){return s.get(345,e)}},photo:{name:s.get(97),noData:s.get(160),hasData:function(e){return s.get(138,e)}}},u="video",d="photo",h=a.extend({events:{"click .js-select-album":"onAlbumClick_"},albums:null,init:function(){h._super.init.apply(this,arguments),this.albums=[]},updateAlbum:function(e){if(!e)return null;var t=e.getPhotos([]),i=c[this.getAlbumType_(e)],n=e.getCountOfPhotos();return{albumName:e.getName(),cover:n?this.getImagesForAlbumCover_(t):null,photoCount:n?i.hasData(n):i.noData,uid:e.getUid(),noPhotos:0===n}},getAlbumType_:function(e){var t=e.getPhotos([])[0];return t&&t.hasVideo()?u:d},getImagesForAlbumCover_:function(e){for(var t=[],i=Math.min(3,e.length),n=null,a=0;a<i;a+=1)n=o.getImageUrlForSize(e[a].getPreviewUrl(),90,90),t.push({imageUrl:n});return t},reset:function(){this.$el.empty()},update:function(e){h._super.update.apply(this,arguments),this.render(e),this.hideLoading()},render:function(e){var t=this,i=e.albums.map(function(e){return t.updateAlbum(e)});this.$el.html(r.render({albums:i,empty:0===i.length,message:s.get(356,e.providerName)}))},onAlbumClick_:function(e,t){this.trigger(l.ALBUM_SELECTED,n(t).data("uid"))}},"ExternalProviderAlbums");h.ACTIONS=l,e.exports=h},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.x(t.get(["empty"],!1),t,{else:i,block:o},{})}function i(e,t){return e.w('<div class="layout layout--with-fake-nav"><div class="layout__content layout__content--hpadded"><div class="photo-albums-list">').s(t.get(["albums"],!1),t,{block:n},{}).w("</div></div></div>")}function n(e,t){return e.w('<div class="photo-album js-select-album" data-uid="').f(t.get(["uid"],!1),t,"h").w('"><div class="photo-album__image">').s(t.get(["cover"],!1),t,{block:a},{}).w('</div><div class="photo-album__details"><div class="photo-album__details-summary">').f(t.get(["albumName"],!1),t,"h").w('</div><div class="photo-album__details-text">').f(t.get(["photoCount"],!1),t,"h").w("</div></div></div>")}function a(e,t){return e.w('<div class="photo-album__cover" style="background-image: url(\'').f(t.get(["imageUrl"],!1),t,"h").w("');\"></div>")}function o(e,t){return e.w('<div class="layout layout--centered-content layout--with-fake-nav"><div class="layout__content layout__content--hpadded"><div class="photo-albums-empty"><p>').f(t.get(["message"],!1),t,"h").w("</p></div></div></div>")}return e.register("photos/photo-import-albums",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n,a,o=i(3)(i(107)),s=i(100),r=i(126),l=i(150),c=i(132),u=i(146),d=i(99),h=i(103),p=i(102),m=i(394),g=i(598),_=i(124),f=i(599),v=i(121),E=i(3277),b=i(156),y=i(101),k=y.ChooseInviteChannelEvent,S=y.ElementEnum,w=y.ClickEvent,C=(0,o.default)({},2,105),T=(n={},(0,o.default)(n,1,1),(0,o.default)(n,8,3),(0,o.default)(n,4,4),(0,o.default)(n,11,5),(0,o.default)(n,18,6),(0,o.default)(n,28,S.INVITE_METHOD_WHATSAPP),n),P=v.extend({headerTemplate:null,init:function(){P._super.init.apply(this,arguments),this.registerView("view",new E),this._providersConfig={},this._providersList=[]},onStart:function(e){P._super.onStart.apply(this,arguments),this.getView("view").on(E.EVENTS.PROVIDER_SELECTED,this._onProviderSelected,this).appendTo(this.parent),this._inviteContext=Number(e.inviteContext)||0,this._inviteFlow=Number(e.inviteFlow)||1,this._triggerActivationPlace=Number(e.triggerActivationPlace)||1,this.screenName=Number(e.triggerScreenName)||139,this._progressFeature=C[this._inviteFlow],105!==this._inviteContext&&(this.screenOption=this._progressFeature&&56),f.getInstance().get({clientSource:this._inviteContext,inviteFlow:this._inviteFlow}).then(this._onInviteProvidersReceived.bind(this)).then(this._setupProgressFeatureObserver.bind(this)).catch(this._onError.bind(this)),this._updateView(),this.wasBack()||g.start({activationPlace:this._triggerActivationPlace,isDisplayingCounter:this._progress})},onStop:function(){P._super.onStop.apply(this,arguments),this.getView("view").off(E.EVENTS.PROVIDER_SELECTED,this._onProviderSelected,this),this._progressFeatureObserver&&(this._progressFeatureObserver.stop(),this._progressFeatureObserver=null),this._goingToInvitationContactsPage||g.finish({activationPlace:this._triggerActivationPlace}),this._goingToInvitationContactsPage=!1},getScreenName:function(){return 105===this._inviteContext?321:P._super.getScreenName.apply(this,arguments)},onNavigationAction:function(e){e===b.BACK&&p.track(w,{element:52}),P._super.onNavigationAction.apply(this,arguments)},_onError:function(e){this.log.error("Fetch invite providers error",e),_.showNotification({type:_.TYPES.ERROR}),h.back()},getNavigationBarContext:function(){return P._super.getNavigationBarContext.call(this,{title:d.get(403)})},_onInviteProvidersReceived:function(e){e=e&&e[0],this.inviteProviders_=e;var t=e.getProviders().reduce(function(e,t){var i=t.getExternalProvider(),n=i.getType(),a=28===n&&encodeURIComponent(t.getInviteText());return e.providersConfig[n]={name:i.getDisplayName(),description:t.getDisplayText(),inviteChannel:t.getInviteChannel(),providerType:n,providerId:i.getId(),srcActive:i.getLogoUrl(),externalProvider:i,inviteWhatsAppText:a},e.providersList=e.providersList.concat(n),e},{providersConfig:{},providersList:[]});this._providersConfig=t.providersConfig,this._providersList=t.providersList,this._updateView()},_setupProgressFeatureObserver:function(){this._progressFeature&&(this._progressFeatureObserver&&this._progressFeatureObserver.stop(),this._progressFeatureObserver=this.observe(c.getObservable(this._progressFeature),this._onProgressFeature.bind(this)))},_updateView:function(){var e=this;this.getView("view").update({inviteContext:this._inviteContext,pageTitle:this.inviteProviders_&&this.inviteProviders_.getTitle(),progress:this._progress,providers:this._providersList.map(function(t){return e._providersConfig[t]})})},_onProgressFeature:function(e){var t=e.getGoalProgress(),i=t&&t.getProgress(),n=t&&t.getGoal();if(s.isNumber(i)&&s.isNumber(n)&&i!==n){var a="".concat(Math.floor(i/n*100),"%");this._progress={title:e.getDisplayTitle(),description:e.getDisplayMessage(),end:n,percentage:a},this._updateView()}else{var o=this.getParameter("progressUrl")||r.get("default.page");h.navigate(o,!0)}},_onProviderSelected:function(e){var t=Number(e.providerType),i=this._providersConfig[t];if(this._trackProviderSelected(t),1===t)m.sendInviteRequest({inviteFlow:this._inviteFlow,inviteContext:this._inviteContext,providerId:i.providerId});else{if(28===t)return;this._goingToInvitationContactsPage=!0,l.startImport({providerType:t,providerContext:1,provider:i.externalProvider,clientSource:this._inviteContext,returnRoute:u.encodeRoute("invitation-contacts",{providerType:t,providerId:i.providerId,inviteChannel:i.inviteChannel,inviteFlow:this._inviteFlow,inviteContext:this._inviteContext,triggerActivationPlace:this._triggerActivationPlace,triggerScreenName:this.screenName,returnRoute:"invitations",progressUrl:this.getParameter("progressUrl"),token:"__TOKEN__"}),progressUrl:this.getParameter("progressUrl")})}},_trackProviderSelected:function(e){105===this._inviteContext&&function(e){var t=N[e];p.track(w,{element:t})}(e);var t=T[e]||12;p.track(k,{invite_channel:t,activation_place:this._triggerActivationPlace})}},"InvitationProvidersController"),N=(a={},(0,o.default)(a,1,120),(0,o.default)(a,8,361),(0,o.default)(a,4,314),(0,o.default)(a,11,362),(0,o.default)(a,18,315),(0,o.default)(a,28,165),a);e.exports=P},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(3278),s=i(3279),r=i(113),l=a("PROVIDER_SELECTED"),c=n.extend({events:{"click .js-provider":"_onProviderSelected"},update:function(e){this.render(e)},render:function(e){var t=function(e){if(105===e.inviteContext){var t=Object.assign({},e,{currentUserPhoto:r.getUser().getProfilePhoto().getPreviewUrl()||void 0});return s.render(t)}return o.render(e)}(e);this.$el.html(t)},_onProviderSelected:function(e,t){this.trigger(l.PROVIDER_SELECTED,{providerType:t.getAttribute("data-type")})}},"InvitationProvidersView");c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{},{title:t.get(["pageTitle"],!1),back:"true"},"h").w('</div><div class="layout__content layout__content--hpadded">').s(t.get(["progress"],!1),t,{block:i},{}).x(t.get(["providers"],!1),t,{block:n},{}).w("</div></div>")}function i(e,t){return e.w('<div class="invite-progress"><div class="invite-progress__title">').f(t.get(["title"],!1),t,"h").w('</div><div class="invite-progress__progress"><div class="invite-progress__initial">0</div><div class="invite-progress__bar"><div class="progress-bar progress-bar--tiny"><div class="progress-bar__fill js-progress-percents" style="min-width: ').f(t.get(["percentage"],!1),t,"h").w(';">').f(t.get(["percentage"],!1),t,"h").w('</div></div></div><div class="invite-progress__maximum">').f(t.get(["end"],!1),t,"h").w('</div></div><div class="invite-progress__description">').f(t.get(["description"],!1),t,"h").w("</div></div>")}function n(e,t){return e.w('<div class="invite-sources-list">').s(t.get(["providers"],!1),t,{block:a},{}).w("</div>")}function a(e,t){return e.w('<div class="invite-sources-list__item js-provider" data-type="').f(t.get(["providerType"],!1),t,"h").w('" data-qa="').f(t.get(["name"],!1),t,"h").w('" data-qa-provider-type="').f(t.get(["providerType"],!1),t,"h").w('"><div class="invite-sources-list__icon"><div class="brick brick--md"><div class="brick__icon"><img src="').f(t.get(["srcActive"],!1),t,"h").w('" alt=""></div></div></div><div class="invite-sources-list__details"><div class="invite-sources-list__name">').f(t.get(["name"],!1),t,"h").w('</div><div class="invite-sources-list__description">').f(t.get(["description"],!1),t,"h").w("</div></div>").s(t.get(["inviteWhatsAppText"],!1),t,{block:o},{}).w("</div>")}function o(e,t){return e.w('<a href="https://api.whatsapp.com/send?text=').f(t.get(["inviteWhatsAppText"],!1),t,"h").w('" target="_blank" class="b-link"></a>')}return e.register("invites/invite-providers",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{},{close:"true",extraClass:"navigation-bar--no-background"},"h").w('</div><div class="layout__content layout__content--hpadded"><div class="cta-box"><div class="cta-box__media"><div class="brick-wrapper brick-wrapper--m-b-m"><div class="brick-wrapper__item"><div class="brick brick--stretch" data-qa="brick"><div class="brick__image" style="background-image: url(\'/img/no-sprite/invite-friends/girl-2x.47d1d3178e3f510c17f7.png\');"></div></div></div><div class="brick-wrapper__item"><div class="brick brick--stretch" data-qa="brick">').x(t.get(["currentUserPhoto"],!1),t,{else:i,block:l},{}).w('</div></div><div class="brick-wrapper__item"><div class="brick brick--stretch" data-qa="brick"><div class="brick__image" style="background-image: url(\'/img/no-sprite/invite-friends/man-2x.85e7d369d719606c2015.png\');"></div></div></div></div></div><div class="cta-box__header">').h("t",t,{},{k:"181"},"h").w('</div><div class="cta-box__content">').h("t",t,{},{k:"518"},"h").w('</div></div></div><div class="layout__content layout__content--vpadded layout__content--hpadded">').x(t.get(["providers"],!1),t,{block:c},{}).w("</div></div>")}function i(e,t){return e.w('<div class="brick__icon">').h("select",t,{block:n},{key:r},"h").w("</div>")}function n(e,t){return e.h("eq",t,{block:a},{value:"male"},"h").h("eq",t,{block:o},{value:"female"},"h").h("default",t,{block:s},{},"h")}function a(e,t){return e.h("Icon",t,{},{name:"avatar-placeholder-male",size:"stretch"},"h")}function o(e,t){return e.h("Icon",t,{},{name:"avatar-placeholder-female",size:"stretch"},"h")}function s(e,t){return e.h("Icon",t,{},{name:"avatar-placeholder-unknown",size:"stretch"},"h")}function r(e,t){return e.f(t.get(["gender"],!1),t,"h")}function l(e,t){return e.w('<div class="brick__image" style="background-image: url(\'').h("PhotoUrl",t,{},{src:t.get(["currentUserPhoto"],!1),width:100},"h").w("');\"></div>")}function c(e,t){return e.w('<div class="invite-sources-list">').s(t.get(["providers"],!1),t,{block:u},{}).w("</div>")}function u(e,t){return e.w('<div class="invite-sources-list__item js-provider" data-type="').f(t.get(["providerType"],!1),t,"h").w('" data-qa="').f(t.get(["name"],!1),t,"h").w('" data-qa-provider-type="').f(t.get(["providerType"],!1),t,"h").w('"><div class="invite-sources-list__icon"><div class="brick brick--md"><div class="brick__icon"><img src="').f(t.get(["srcActive"],!1),t,"h").w('" alt=""></div></div></div><div class="invite-sources-list__details"><div class="invite-sources-list__name">').f(t.get(["name"],!1),t,"h").w('</div><div class="invite-sources-list__description">').f(t.get(["description"],!1),t,"h").w("</div>").s(t.get(["inviteWhatsAppText"],!1),t,{block:d},{}).w("</div></div>")}function d(e,t){return e.w('<a href="https://api.whatsapp.com/send?text=').f(t.get(["inviteWhatsAppText"],!1),t,"h").w('" target="_blank" class="b-link"></a>')}return e.register("invites/invite-providers-friends",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n,a,o,s,r=i(3)(i(107)),l=i(100),c=i(146),u=i(103),d=i(99),h=i(102),p=i(394),m=i(598),g=i(150),_=i(140),f=i(599),v=i(124),E=i(121),b=i(3281),y=i(105),k=y.ContactImport,S=y.ServerInviteContacts,w=i(101),C=w.ChooseInviteChannelEvent,T=w.InviteEvent,P=w.ElementEnum,N=w.ClickEvent,I=w.ViewElementEvent,x="view",A=(n={},(0,r.default)(n,1,1),(0,r.default)(n,8,3),(0,r.default)(n,4,4),(0,r.default)(n,11,5),(0,r.default)(n,18,6),(0,r.default)(n,28,9),n),O=(a={},(0,r.default)(a,1,10),(0,r.default)(a,4,140),a),V=E.extend({headerTemplate:null,init:function(){V._super.init.apply(this,arguments),this.registerView(x,new b),this._contactsPerProvider={},this._providersConfig={},this._providersList=[]},onStart:function(){V._super.onStart.apply(this,arguments),this.getView(x).on(b.EVENTS.PROVIDER_SELECTED,this._onProviderSelected,this).on(b.EVENTS.CONTACT_CLICK,this._onContactClick,this).on(b.EVENTS.SEND_INVITES,this._onSendInvites,this).appendTo(this.parent),this.onParametersUpdate();var e=Number(this.getParameter("providerType"));this.screenName=O[e]||141,this.screenOption=27;var t=this.getParameter("importPromise");t&&(this.isLoading=!0,t.then(this._onContactsReceived.bind(this,e),this._onError.bind(this)))},onStop:function(){V._super.onStop.apply(this,arguments),this.getView(x).off(b.EVENTS.PROVIDER_SELECTED,this._onProviderSelected,this).off(b.EVENTS.CONTACT_CLICK,this._onContactClick,this).off(b.EVENTS.SEND_INVITES,this._onSendInvites,this),this._contactsPerProvider={},this._providersConfig={},this._providersList=[]},onParametersUpdate:function(){var e=this,t=this.getParameters();this.providerType=Number(t.providerType),this.providerId=t.providerId,this.inviteFlow=Number(t.inviteFlow),this.inviteContext=Number(t.inviteContext),this.inviteChannel=Number(t.inviteChannel),this.triggerActivationPlace=Number(t.triggerActivationPlace)||1,this._contactsPerProvider[this.providerType]||(this._contactsPerProvider[this.providerType]={importId:null,contactsConfig:{},contactsList:[],selectedContacts:[],originalProtoContacts:[]}),f.getInstance().get({clientSource:this.inviteContext,inviteFlow:this.inviteFlow}).then(this._onProvidersReceived.bind(this)).then(this._updateView.bind(this)).catch(function(t){e.log.error("Fetch invite providers error",t),e._onError.bind(e),e._goBackToProvidersList()}),this._updateView()},getScreenName:function(){return 105===this._inviteContext?28:V._super.getScreenName.apply(this,arguments)},onNavigationAction:function(e){e===E.BUTTONS.SELECT_ALL?this._onSelectAll():V._super.onNavigationAction.apply(this,arguments)},_updateView:function(){var e=this;if(this._contactsPerProvider[this.providerType]){var t=this._providersList.map(function(t){var i=e._providersConfig[t];return i=l.extend({},i,{isSelected:e.providerType===i.providerType})}),i=this._contactsPerProvider[this.providerType].contactsList.map(function(t){return e._contactsPerProvider[e.providerType].contactsConfig[t]}).map(function(t){var i=-1!==e._contactsPerProvider[e.providerType].selectedContacts.indexOf(t.id);return l.extend({},t,{isSelected:i})}),n=this._contactsPerProvider[this.providerType],a=n.contactsList.length,o=n.selectedContacts.length,s=a===o;this.getView(x).update({title:d.get(403),isLoading:this.isLoading,isSelectAllVisible:!!a,isSelectAllActive:!!s,showAction:!!o,providers:t,contacts:i})}else this.getView(x).showLoading()},_beginInvites:function(){var e=this;this.isLoading=!0,this._updateView(),1===this.providerType?p.sendInviteRequest({inviteFlow:this.inviteFlow,inviteContext:this.inviteContext,providerId:this.providerId}).catch(l.noop).then(function(){e.isLoading=!1,e._updateView()}):g.startImport({providerContext:1,providerType:this.providerType,clientSource:this.inviteContext,providerId:this.providerId,inviteFlow:this.inviteFlow,referrer:this.inviteContext,inviteChannel:this.inviteChannel,replaceCurrentUrl:!0,importFlow:2,returnRoute:c.encodeRoute("invitation-contacts",{providerType:this.providerType,providerId:this.providerId,inviteChannel:this.inviteChannel,inviteFlow:this.inviteFlow,inviteContext:this.inviteContext,triggerActivationPlace:this.triggerActivationPlace,progressUrl:this.getParameter("progressUrl")})}).then(this._onContactsReceived.bind(this,this.providerType)).catch(function(t){e.log.error("Import contacts error ",t),e._onError()})},_onProvidersReceived:function(e){if(!(e=e&&e[0]))return!1;g.setProviderData(1,e.getProviders().map(function(e){return e.getExternalProvider()}));var t=e.getProviders().reduce(function(e,t){var i=t.getExternalProvider(),n=i.getType(),a={name:i.getDisplayName(),description:t.getDisplayText(),inviteChannel:t.getInviteChannel(),providerType:n,providerId:i.getId(),isSelected:!1,srcActive:i.getLogoUrl(),srcInactive:i.getInactiveLogoUrl(),externalProvider:i};return e.providersConfig[n]=a,e.providersList=e.providersList.concat(n),e},{providersConfig:{},providersList:[]});this._providersConfig=t.providersConfig,this._providersList=t.providersList,this._updateView()},_onContactsReceived:function(e,t){this.isLoading=!1;var i=t.getContactImportProgressData(),n=t.getImportId(),a=t.getForm()?t.getForm().getErrors():[];if(a&&a.length>0&&"username"!==a[0].getFieldName())return this.log.error("Contacts received error."),v.showNotification({type:v.TYPES.ERROR,text:d.get(37)}),void this._updateView();var o=function(e){var t={contactsConfig:{},contactsList:[],selectedContacts:[],originalProtoContacts:e};return e.reduce(function(e,t){var i=t.getPhonebookId(),n=t.getChecked(),a=t.getContacts()[0],o={id:i,name:t.getName(),image:t.getPhotoUrl(),description:a.getContact(),isDisabled:t.getDisabled()};return e.contactsConfig[i]=o,e.contactsList=e.contactsList.concat(i),n&&(e.selectedContacts=e.selectedContacts.concat(i)),e},t)}(i&&i.getContacts()||[]);
this._contactsPerProvider[e]=l.extend({},o,{importId:n}),e===this.providerType&&this._updateView()},_onError:function(){this.isLoading=!1,this._updateView(),this._contactsPerProvider[this.providerType]=null,u.back()},_onProviderSelected:function(e){var t=e.providerType;this.providerType=Number(t),105===this.inviteContext&&function(e){var t=R[e];h.track(N,{element:t})}(this.providerType),this._contactsPerProvider[this.providerType]?(this.isLoading=!1,function(e){var t=B[e];h.track(I,{element:t})}(this.providerType),this._updateView()):this._beginInvites()},_trackProviderSelected:function(e){var t=A[e]||12;h.track(C,{invite_channel:t,screen_option:27,activation_place:this.triggerActivationPlace})},_onSelectAll:function(){var e=this._contactsPerProvider[this.providerType],t=e.contactsList.length===e.selectedContacts.length;e.selectedContacts=t?[]:e.contactsList.slice(),this._updateView()},_onContactClick:function(e){var t,i,n,a=e.id;if(this._toggleContactSelected(a),105===this.inviteContext){var o=this._contactsPerProvider[this.providerType].contactsList.indexOf(a);t=this.providerType,i=o+1,n=B[t],h.track(N,{element:99,parent_element:n,position:i})}var s=this._contactsPerProvider[this.providerType].selectedContacts.includes(a);this.getView(x).updateContactSelection(a,s),this.updateSelectAllState(),this.updateAction()},updateSelectAllState:function(){var e=this._contactsPerProvider[this.providerType],t=e.contactsList.length===e.selectedContacts.length;this.getView(x).updateSelectAll(t)},updateAction:function(){var e=this._contactsPerProvider[this.providerType].selectedContacts.length;this.getView(x).updateAction(!!e)},_toggleContactSelected:function(e){var t,i=this._contactsPerProvider[this.providerType].selectedContacts;t=-1!==i.indexOf(e)?l.filter(i,function(t){return t!==e}):i.concat(e),this._contactsPerProvider[this.providerType].selectedContacts=t},_onSendInvites:function(){var e,t,i=this,n=Object.keys(this._contactsPerProvider).map(function(e){return i._contactsPerProvider[e]}).map(function(e){e.originalProtoContacts.forEach(function(t){var i=t.getPhonebookId(),n=-1!==e.selectedContacts.indexOf(i);t.setChecked(n)});var t=new k;return t.setImportId(e.importId).setContacts(e.originalProtoContacts).setImportOthers(!0),t}),a=new S;a.setContactImports(n).setContext(this.inviteContext).setInviteFlow(this.inviteFlow),g.inviteContacts(a).then(function(){return i._trackInviteMultipleEvents(2)}).then(this._onImportSuccess.bind(this)).catch(this._onImportFailure.bind(this)),this._trackInviteMultipleEvents(1),105===this.inviteContext&&(e=this.providerType,t=B[e],h.track(N,{element:82,parent_element:t}));var o=Object.keys(this._contactsPerProvider).reduce(function(e,t){return e+i._contactsPerProvider[t].selectedContacts.length},0);m.incrementInvitesCount(o)},_trackInviteMultipleEvents:function(e){var t=this;Object.keys(this._contactsPerProvider).forEach(function(i){return t._trackInviteEvent(e,i)})},_trackInviteEvent:function(e,t){var i=this._contactsPerProvider[t].selectedContacts.length;if(i){var n=A[t]||12;h.track(T,{activation_place:this.triggerActivationPlace,invite_method:n,count:i,action_type:e})}},_onImportSuccess:function(e){e&&v.showNotification({type:v.TYPES.INFO,text:e}),_.getInstance().invalidate(),this._goBackToProvidersList()},_onImportFailure:function(e){this.log.error("finish import error",e);var t={type:v.TYPES.ERROR};e&&(t.text=e),v.showNotification(t),this._goBackToProvidersList()},_goBackToProvidersList:function(){u.navigate("invitations",this.getParameters())}},"InvitationContactsController"),R=(o={},(0,r.default)(o,1,120),(0,r.default)(o,28,165),(0,r.default)(o,8,361),(0,r.default)(o,4,314),(0,r.default)(o,11,362),(0,r.default)(o,18,315),(0,r.default)(o,28,165),o),B=(s={},(0,r.default)(s,1,280),(0,r.default)(s,8,363),(0,r.default)(s,4,170),(0,r.default)(s,11,364),(0,r.default)(s,18,P.ELEMENT_EMAIL_CONTACTS),(0,r.default)(s,28,165),s);e.exports=V},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(176),s=i(3282),r=a("PROVIDER_SELECTED","CONTACT_CLICK","SEND_INVITES"),l=n.extend({events:{"click .js-provider":"_onProviderSelected","click .js-contact":"_onContactClick","click .js-send-invites":"_onSendInvites"},update:function(e){this.render(e)},render:function(e){var t=s.render(e);this.$el.html(t);var i=this.$el.find(".js-scroll-toggle");this.toggleScroll_&&this.toggleScroll_.destroy(),i.length&&(this.toggleScroll_=new o(i))},_onProviderSelected:function(e,t){this.trigger(r.PROVIDER_SELECTED,{providerType:t.getAttribute("data-type")})},_onContactClick:function(e,t){this.trigger(r.CONTACT_CLICK,{id:t.getAttribute("data-id")})},_onSendInvites:function(){this.trigger(r.SEND_INVITES)},updateContactSelection:function(e,t){var i=this.$el.find("#contact_".concat(e))[0];i&&(i.checked=t)},updateSelectAll:function(e){var t=this.$el.find(".js-select-all")[0];t&&(t.checked=e)},updateAction:function(e){this.$el.find(".js-action").toggleClass("is-inactive",!e)}},"InvitationContactsView");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(270),function(e){function t(e,t){return t=t.shiftBlocks(k),e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{secondary:i,block:o},{back:"true",title:t.get(["title"],!1)},"h").w("</div>").x(t.get(["providers"],!1),t,{block:s},{}).w('<div class="layout__content layout__content--hpadded">').x(t.get(["isLoading"],!1),t,{else:c,block:f},{}).w('</div><div class="layout__footer"><div class="floating-action js-action ').nx(t.get(["showAction"],!1),t,{block:v},{}).w('">').b(t.getBlock("action"),t,{},{}).w('</div><div class="fake">').b(t.getBlock("action"),t,{},{}).w("</div></div></div>")}function i(e,t){return t=t.shiftBlocks(k),e.x(t.get(["isSelectAllVisible"],!1),t,{block:n},{})}function n(e,t){return t=t.shiftBlocks(k),e.w('<div class="navigation-bar__checkbox"><label for="select-all" class="checkbox-singular"><input id="select-all" type="checkbox" class="js-navigation js-select-all" data-action="').f(t.getPath(!1,["NAVIGATION_BUTTONS","SELECT_ALL"]),t,"h").w('"').x(t.get(["isSelectAllActive"],!1),t,{block:a},{}).w(' /><div class="checkbox__inactive">').h("Icon",t,{},{name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w("</div></label></div>")}function a(e,t){return t=t.shiftBlocks(k),e.w(" checked ")}function o(e,t){return t=t.shiftBlocks(k),e}function s(e,t){return t=t.shiftBlocks(k),e.w('<div class="layout__content"><div class="invite-sources-line"><div class="tabs">').s(t.get(["providers"],!1),t,{block:r},{}).w('</div></div><div class="fake"></div></div>')}function r(e,t){return t=t.shiftBlocks(k),e.w('<div class="tab ').x(t.get(["isSelected"],!1),t,{block:l},{}).w(' js-provider" data-type="').f(t.get(["providerType"],!1),t,"h").w('"><div class="tab__icon tab__icon--inactive"><div class="brick brick--md"><div class="brick__icon"><img src="').f(t.get(["srcInactive"],!1),t,"h").w('" alt=""></div></div></div><div class="tab__icon tab__icon--active"><div class="brick brick--md"><div class="brick__icon"><img src="').f(t.get(["srcActive"],!1),t,"h").w('" alt=""></div></div></div><div class="tab__label">').f(t.get(["name"],!1),t,"h").w("</div></div>")}function l(e,t){return t=t.shiftBlocks(k),e.w(" is-active ")}function c(e,t){return t=t.shiftBlocks(k),e.x(t.get(["contacts"],!1),t,{else:u,block:d},{})}function u(e,t){return t=t.shiftBlocks(k),e.w('<div class="invite-contacts-empty">').h("t",t,{},{k:"401",f:"s"},"h").w("</div>")}function d(e,t){return t=t.shiftBlocks(k),e.w('<div class="invite-contacts-list">').s(t.get(["contacts"],!1),t,{block:h},{}).w("</div>")}function h(e,t){return t=t.shiftBlocks(k),e.w('<div class="invite-contacts-list__item js-contact" data-id="').f(t.get(["id"],!1),t,"h").w('"><div class="invite-contacts-list__image"><div class="brick">').x(t.get(["image"],!1),t,{else:p,block:m},{}).w('</div></div><div class="invite-contacts-list__details"><div class="invite-contacts-list__name">').f(t.get(["name"],!1),t,"h").w('</div><div class="invite-contacts-list__description">').f(t.get(["description"],!1),t,"h").w('</div></div><div class="invite-contacts-list__checkbox"><div class="checkbox-singular"><input type="checkbox" name="contacts" value="').f(t.get(["id"],!1),t,"h").w('" id="contact_').f(t.get(["id"],!1),t,"h").w('" ').x(t.get(["isSelected"],!1),t,{block:g},{}).w(" ").x(t.get(["isDisabled"],!1),t,{block:_},{}).w('><div class="checkbox__inactive">').h("Icon",t,{},{name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w('</div><label for="contact_').f(t.get(["id"],!1),t,"h").w('"></label></div></div><label for="contact_').f(t.get(["id"],!1),t,"h").w('" class="invite-contacts-list__clickable"></label></div>')}function p(e,t){return t=t.shiftBlocks(k),e.w('<div class="brick__icon">').h("Icon",t,{},{name:"avatar-placeholder-unknown",size:"stretch"},"h").w("</div>")}function m(e,t){return t=t.shiftBlocks(k),e.w('<div class="brick__image" style="background-image: url(\'').h("PhotoUrl",t,{},{src:t.get(["image"],!1),width:"65"},"h").w("')\"></div>")}function g(e,t){return t=t.shiftBlocks(k),e.w(" checked ")}function _(e,t){return t=t.shiftBlocks(k),e.w(" disabled ")}function f(e,t){return t=t.shiftBlocks(k),e.w('<div class="invite-contacts-loading">').p("loading-dots",t,t,{size:"small",color:"grey",relative:"true"}).w("</div>")}function v(e,t){return t=t.shiftBlocks(k),e.w("is-inactive")}function E(e,t){return t=t.shiftBlocks(k),e.w('<div class="cta-box"><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{text:b,block:y},{type:"primary",extraClass:"js-send-invites"},"h").w("</div></div></div></div>")}function b(e,t){return t=t.shiftBlocks(k),e.h("t",t,{},{k:"402"},"h")}function y(e,t){return t=t.shiftBlocks(k),e}e.register("invites/invite-contacts",t);var k={action:E};return t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,_.__dustBody=!0,f.__dustBody=!0,v.__dustBody=!0,E.__dustBody=!0,b.__dustBody=!0,y.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";var n=i(100),a=i(121),o=i(3284),s=i(103),r=i(124),l=i(345),c=i(3286),u=i(3290),d=i(3293),h=i(102),p=i(101).ClickEvent,m=a.extend({headerTemplate:null,screenName:94,clientSource:141,hasExplanation_:!1,init:function(){m._super.init.apply(this,arguments),this.view_=this.registerView(new o({el:this.parent[0]}))},onStart:function(){m._super.onStart.apply(this,arguments),l.onDismissExplanation.subscribe(this.onDismissExplanation_,this),l.onGameEnd.subscribe(this.onGameEnd_,this),l.onStatusChange.subscribe(this.onStatusChange_,this),this.fetchAndRender_({skip:!1})},onStop:function(){m._super.onStop.apply(this,arguments),l.onDismissExplanation.unsubscribe(this.onDismissExplanation_,this),l.onGameEnd.unsubscribe(this.onGameEnd_,this),l.onStatusChange.unsubscribe(this.onStatusChange_,this)},onParametersUpdate:function(){m._super.onParametersUpdate.apply(this,arguments),this.fetchAndRender_({skip:!0})},onNavigationAction:function(e){e===a.BUTTONS.BACK&&this.explanationDismissed_?(h.track(p,{element:52,parent_element:306}),this.showDismissExplanation_()):m._super.onNavigationAction.apply(this,arguments)},fetchAndRender_:function(e){var t=this,i=e.skip,n=e.animate;return this.view_.showLoading(),l.getMiniGameConnections().then(function(e){var a=e.explanationPromoBanner;i=!a||i||t.wasBack(),t.view_.render(Object.assign({animate:n,hideProgress:!i,skip:i},e)),i||t.registerExplanationScreenController_(e).show(a),e.users.length&&t.registerGameController_(),e.finalPromoBanner&&t.registerFinalPromoBannerController_(),t.explanationDismissed_=!1,t.view_.hideLoading()}).catch(function(e){t.log.error(e),r.showNotification({type:r.TYPES.ERROR}),s.back()})},showDismissExplanation_:function(){var e=this;this.getController("the-game").animateDown(function(){e.fetchAndRender_({animate:!0})})},onDismissExplanation_:function(e){var t=this.getController("the-game");this.removeController("start-explanation"),this.view_.update(e),this.explanationDismissed_=!0,t.show(e)},onGameEnd_:function(e){var t=this.getController("final-explanation");this.removeController("the-game"),t.show(e.finalPromoBanner)},onStatusChange_:function(e){var t=e.progress>e.goal;this.view_.update(Object.assign({hideProgress:t,hideBack:t},e))},registerExplanationScreenController_:function(){return this.registerController("start-explanation",new u(this.view_.getExplanationContainer()))},registerGameController_:function(){return this.registerController("the-game",new c(this.view_.getGameContainer()))},registerFinalPromoBannerController_:function(){return this.registerController("final-explanation",new d(this.view_.getFinalExplanationContainer()))},trackHotPanelScreen:n.noop},"MessengerMiniGame");e.exports=m},function(e,t,i){"use strict";var n=i(109),a=i(176),o=i(3285),s=n.extend({init:function(){s._super.init.apply(this,arguments),this.view=this.registerView(new n)},getExplanationContainer:function(){return this.$(".js-explanation-screen")},getFinalExplanationContainer:function(){return this.$(".js-end-of-game")},getGameContainer:function(){return this.$(".js-messenger-mini-game")},render:function(e){this.$el.html(o.render(e)),this.toggleScroll_&&this.toggleScroll_.destroy(),this.toggleScroll_=new a(this.$el.find(".js-scroll-toggle"))},update:function(e){var t=Boolean(e.hideProgress),i=Boolean(e.hideBack);t||(this.$(".js-progress").html(e.progress),this.$(".js-goal").html(e.goal)),this.$(".js-progress-container").toggleClass("is-hidden",t),this.$(".js-navigation").toggleClass("hidden",i)}},"ExplanationController");e.exports=s},function(e,t,i){"use strict";var n=i(98),a=i(137);e.exports=i(108)("MessengerMiniGamePage",function(e){return n.createElement(n.Fragment,null,n.createElement(a,{back:"true",extraClass:"navigation-bar--no-background",scrollToggle:"1",scrollToggleClass:"navigation-bar--shadow navigation-bar--no-background",content:n.createElement("div",{className:"mini-game__progress ".concat(e.skip?"":" is-hidden "," js-progress-container")},n.createElement("span",{className:"js-progress"},e.progress),"/",n.createElement("span",{className:"js-goal"},e.goal))}),e.skip?null:n.createElement("div",{className:"mini-game ".concat(e.animate?" is-hidden is-fade-up ":""," js-explanation-screen")}),n.createElement("div",{className:"mini-game ".concat(e.skip?"":" is-hidden is-fade-down "," js-messenger-mini-game")}),e.finalPromoBanner?n.createElement("div",{className:"mini-game is-hidden is-fade-down js-end-of-game"}):null)})},function(e,t,i){"use strict";var n=i(98),a=i(129),o=i(345),s=i(99),r=i(102),l=i(3287),c=i(322),u=i(101),d=u.ClickEvent,h=u.MiniGameEvent,p=u.ViewElementEvent,m=u.ViewScreenEvent,g=a.extend({headerTemplate:null,view_:null,construct:function(e){g._super.construct.call(this),this.parent=e},animateUp:function(e){this.view_.animateUp(e)},animateDown:function(e){this.view_.animateDown(e)},init:function(){g._super.init.apply(this,arguments),this.view_=this.registerView(new l({el:this.parent[0]})).on(l.EVENTS.SKIP,this.onSkip_,this)},onStart:function(){var e=this;g._super.onStart.apply(this,arguments),this.view_.showLoading(),o.getMiniGameConnections().then(function(t){e.view_.render(t),e.renderQuickChat_({}),e.view_.hideLoading()})},onSubmit_:function(e){var t=o.getCurrentUser(),i=o.sendTextMessage(t,e);r.track(h,{action_type:18,encrypted_user_id:t.id}),r.track(d,{element:289,parent_element:306}),this.renderNextUser_(i,!0)},onSkip_:function(){var e=o.getCurrentUser(),t=o.skipUser(e);r.track(h,{action_type:11,encrypted_user_id:e.id}),r.track(d,{element:65,parent_element:306}),this.renderNextUser_(t,!1)},renderNextUser_:function(e,t){e?(this.view_.renderNextUser(e,t),this.renderQuickChat_({text:""})):this.view_.animateUp(o.endGame)},renderQuickChat_:function(e){var t=e.text,i=o.getCurrentUser().id;this.renderReactView(n.createElement(c,{key:i,toPersonId:i,type:"with-border",value:t||"",placeholder:s.get(676),onSend:this.onSubmit_.bind(this)}),this.view_.$(".js-quickchat").get(0))},show:function(e){this.view_.show(),r.track(p,{element:306,count:e.users.length}),r.track(m,{screen_name:94})}},"MessengerMiniGameController");e.exports=g},function(e,t,i){"use strict";var n=i(109),a=i(3288),o=i(3289),s=i(111),r=i(131),l=i(203),c=s("SKIP"),u=n.extend({events:{"click .js-skip":"onSkip_"},animateUp:function(e){var t=this.$el.addClass("is-fade-up");r.onTransitionEnd(t,e)},animateDown:function(e){var t=this.$el.addClass("is-fade-down");r.onTransitionEnd(t,e)},init:function(){u._super.init.apply(this,arguments)},render:function(e){this.horizontalUsers_={count:e.users.length,previousUser:null,user:e.users[0],nextUser:e.progress!==e.goal?{type:"other"}:null},e=Object.assign({},this.horizontalUsers_,e),this.$el.html(a.render(e)),l(this.$(".js-preload"))},renderNextUser:function(e,t){var i=this.horizontalUsers_;Object.assign(i,{previousUser:{src:i.user.src,type:t?37:23,NOTIFICATION_BADGE_TYPE_REJECTED:23,NOTIFICATION_BADGE_TYPE_LIKE:37},user:e}),1==--i.count&&(i.nextUser=null);var n=o.render(i);l(n.find(".js-preload")),this.$(".js-content").html(n)},show:function(){var e=this.$el.removeClass("is-hidden");setTimeout(function(){return e.removeClass("is-fade-down")},40)},onSkip_:function(){this.trigger(c.SKIP)}},"MessengerMiniGameView");u.EVENTS=c,e.exports=u},function(e,t,i){"use strict";var n=i(98),a=i(209),o=i(106),s=i(99),r=i(153);e.exports=i(108)("MessengerMiniGame",function(e){return n.createElement("div",{className:"layout layout--with-fake-nav layout--centered-content"},n.createElement("div",{className:"layout__content js-content"},n.createElement(n.Fragment,null,n.createElement("div",{className:"chat-initial__user-image"},n.createElement("div",{className:"mini-game__users-list"},n.createElement("div",{className:"mini-game__users-list-item mini-game__users-list-item--previous"},r(e.previousUser,e,function(e){return n.createElement("div",{className:"brick-wrapper--padded"},n.createElement("div",{className:"brick brick--stretch"},e.type===e.NOTIFICATION_BADGE_TYPE_EMPTY&&n.createElement(a,{src:e.src,size:"130"}),e.type===e.NOTIFICATION_BADGE_TYPE_LIKE&&n.createElement(n.Fragment,null,n.createElement(a,{src:e.src,size:"130"}),n.createElement("div",{className:"brick__fade"},n.createElement(o,{name:"generic-tick",size:"lg"}))),e.type===e.NOTIFICATION_BADGE_TYPE_REJECTED&&n.createElement(n.Fragment,null,n.createElement(a,{src:e.src,size:"130"}),n.createElement("div",{className:"brick__fade"},n.createElement(o,{name:"generic-close",size:"lg"}))),e.type===e.NOTIFICATION_BADGE_TYPE_TEXT&&n.createElement("div",{className:"brick__placeholder"},e.text),[e.NOTIFICATION_BADGE_TYPE_EMPTY,e.NOTIFICATION_BADGE_TYPE_LIKE,e.NOTIFICATION_BADGE_TYPE_REJECTED,e.NOTIFICATION_BADGE_TYPE_TEXT].includes(e.type)&&n.createElement("div",{className:"brick__icon"},n.createElement(o,{name:"generic-question-mark",size:"lg"}))))})),n.createElement("div",{className:"mini-game__users-list-item mini-game__users-list-item--current"},r(e.user,e,function(e){return n.createElement("div",{className:"brick-wrapper brick-wrapper--xxxlg brick-wrapper--padded"},n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement(a,{src:e.src,size:"130",preload:"true"}),e.isMatch?n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(o,{name:"badge-feature-liked-you",size:"lg"})):null,e.isCrush?n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(o,{name:"badge-feature-crush",size:"lg"})):null),e.isMatch?n.createElement(n.Fragment,null,n.createElement("div",{className:"initial-chat-screen__userpic-heart initial-chat-screen__userpic-heart--br"},n.createElement(o,{name:"generic-heart",size:"stretch"})),n.createElement("div",{className:"initial-chat-screen__userpic-heart initial-chat-screen__userpic-heart--bl"},n.createElement(o,{name:"generic-heart",size:"stretch"})),n.createElement("div",{className:"initial-chat-screen__userpic-heart initial-chat-screen__userpic-heart--tr"},n.createElement(o,{name:"generic-heart",size:"stretch"}))):null))})),n.createElement("div",{className:"mini-game__users-list-item mini-game__users-list-item--next"},r(e.nextUser,e,function(e){return n.createElement("div",{className:"brick-wrapper--padded"},n.createElement("div",{className:"brick brick--stretch"},e.type===e.NOTIFICATION_BADGE_TYPE_EMPTY&&n.createElement(a,{src:e.src,size:"130"}),e.type===e.NOTIFICATION_BADGE_TYPE_LIKE&&n.createElement(n.Fragment,null,n.createElement(a,{src:e.src,size:"130"}),n.createElement("div",{className:"brick__fade"},n.createElement(o,{name:"generic-tick",size:"lg"}))),e.type===e.NOTIFICATION_BADGE_TYPE_REJECTED&&n.createElement(n.Fragment,null,n.createElement(a,{src:e.src,size:"130"}),n.createElement("div",{className:"brick__fade"},n.createElement(o,{name:"generic-close",size:"lg"}))),e.type===e.NOTIFICATION_BADGE_TYPE_TEXT&&n.createElement("div",{className:"brick__placeholder"},e.text),[e.NOTIFICATION_BADGE_TYPE_EMPTY,e.NOTIFICATION_BADGE_TYPE_LIKE,e.NOTIFICATION_BADGE_TYPE_REJECTED,e.NOTIFICATION_BADGE_TYPE_TEXT].includes(e.type)&&n.createElement("div",{className:"brick__icon"},n.createElement(o,{name:"generic-question-mark",size:"lg"}))))})))),r(e.user,e,function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"initial-chat-screen__username"},n.createElement("span",{className:"truncated-text"},n.createElement("span",{className:"truncated-text__trim"},e.name),n.createElement("span",{className:"truncated-text__full"},", ",e.age))),e.gift?n.createElement("div",{className:"initial-chat-screen__gift-message"},n.createElement("div",{className:"chat-message-gift-standalone qa-gift"},n.createElement("div",{className:"gift"},n.createElement("div",{className:"gift__image"},n.createElement("div",{className:"gift__image-loader"},n.createElement(o,{name:"gift-wrap",size:"stretch"})),n.createElement("img",{src:e.gift,alt:e.message}))),e.message?n.createElement("div",{className:"chat-message-gift-standalone__tag"},n.createElement("div",{className:"gift-tag ".concat(e.isReversed?"gift-tag--reverse":""," ").concat(e.isMaximised?"gift-tag--maximised":""),"data-qa":"gift-tag"},n.createElement("div",{className:"gift-tag__main"},e.message?n.createElement("div",{className:"gift-tag__text",dangerouslySetInnerHTML:{__html:e.message}}):null,e.input?n.createElement("div",{className:"gift-tag__input"},n.createElement("label",{className:"gift-tag__input-label",htmlFor:e.fieldId?e.fieldId:e.fieldName}),n.createElement("div",{className:"gift-tag__input-clamp"},n.createElement("div",{className:"gift-tag__input-mirror js-mirror"},e.textValue?e.textValue:e.textPlaceholder),n.createElement("textarea",{className:"gift-tag__input-textarea js-textarea",id:e.fieldId?e.fieldId:e.fieldName,name:e.fieldName,placeholder:e.textPlaceholder},e.textValue)),n.createElement("span",{className:"gift-tag__input-counter js-counter"},e.textLimit)):null),n.createElement("div",{className:"gift-tag__corner"},n.createElement("div",{className:"gift-tag__corner-decoration gift-tag__corner-decoration--below"},n.createElement("svg",{viewBox:"0 0 42 160",className:"is-flipped"},n.createElement("g",{fill:"none","fill-rule":"evenodd"},n.createElement("path",{fill:"#D3DEE7",d:"M40.37 0a7.98 7.98 0 0 0-7.3 4.76L.67 77.28c-.9 2.05-.9 4.4 0 6.44l32.4 71.52a7.98 7.98 0 0 0 7.3 4.76H200V0H40.37z"})))),n.createElement("div",{className:"gift-tag__corner-decoration gift-tag__corner-decoration--above"},n.createElement("svg",{viewBox:"0 0 42 160",className:"is-flipped"},n.createElement("g",{fill:"none","fill-rule":"evenodd"},n.createElement("path",{fill:"#FFFFFF",d:"M200 0H39.33c-3.08 0-5.23.92-6.47 3.82L.66 77.28a8.18 8.18 0 0 0 0 6.44l32.2 72.51c1.24 2.9 3.39 3.77 6.47 3.77H200V0z"})))),n.createElement("div",{className:"gift-tag__corner-hole"})))):null)):n.createElement("div",{className:"initial-chat-screen__message"},n.createElement("div",{className:"chat-message-initial-standalone"},n.createElement("div",{className:"chat-message-initial-standalone__container"},n.createElement("svg",{viewBox:"0 0 21 31",className:"chat-message-initial-standalone__tail"},n.createElement("path",{fill:"currentColor",d:"M0 2.83C0 .13 1.79-.8 4.01.73L21 12.5V31H0V2.83z"})),n.createElement("div",{className:"chat-message-initial-standalone__text qa-text-message",dangerouslySetInnerHTML:{__html:e.message}})))))}))),n.createElement("div",{className:"layout__footer layout__footer--vpadded layout__footer--hpadded"},n.createElement("div",{className:"mini-game-quick-chat"},n.createElement("div",{className:"mini-game-quick-chat__controls js-quickchat"}),n.createElement("div",{className:"mini-game-quick-chat__ignore"},n.createElement("button",{className:"inline-button inline-button--sm js-touchable js-skip"},n.createElement("span",{className:"inline-button__text"},s.get(183)))))))})},function(e,t,i){"use strict";var n=i(98),a=i(209),o=i(106),s=i(153);e.exports=i(108)("MessengerMiniGamePartial",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"chat-initial__user-image"},n.createElement("div",{className:"mini-game__users-list"},n.createElement("div",{className:"mini-game__users-list-item mini-game__users-list-item--previous"},s(e.previousUser,e,function(e){return n.createElement("div",{className:"brick-wrapper--padded"},n.createElement("div",{className:"brick brick--stretch"},e.type===e.NOTIFICATION_BADGE_TYPE_EMPTY&&n.createElement(a,{src:e.src,size:"130"}),e.type===e.NOTIFICATION_BADGE_TYPE_LIKE&&n.createElement(n.Fragment,null,n.createElement(a,{src:e.src,size:"130"}),n.createElement("div",{className:"brick__fade"},n.createElement(o,{name:"generic-tick",size:"lg"}))),e.type===e.NOTIFICATION_BADGE_TYPE_REJECTED&&n.createElement(n.Fragment,null,n.createElement(a,{src:e.src,size:"130"}),n.createElement("div",{className:"brick__fade"},n.createElement(o,{name:"generic-close",size:"lg"}))),e.type===e.NOTIFICATION_BADGE_TYPE_TEXT&&n.createElement("div",{className:"brick__placeholder"},e.text),[e.NOTIFICATION_BADGE_TYPE_EMPTY,e.NOTIFICATION_BADGE_TYPE_LIKE,e.NOTIFICATION_BADGE_TYPE_REJECTED,e.NOTIFICATION_BADGE_TYPE_TEXT].includes(e.type)&&n.createElement("div",{className:"brick__icon"},n.createElement(o,{name:"generic-question-mark",size:"lg"}))))})),n.createElement("div",{className:"mini-game__users-list-item mini-game__users-list-item--current"},s(e.user,e,function(e){return n.createElement("div",{className:"brick-wrapper brick-wrapper--xxxlg brick-wrapper--padded"},n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement(a,{src:e.src,size:"130",preload:"true"}),e.isMatch?n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(o,{name:"badge-feature-liked-you",size:"lg"})):null,e.isCrush?n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(o,{name:"badge-feature-crush",size:"lg"})):null),e.isMatch?n.createElement(n.Fragment,null,n.createElement("div",{className:"initial-chat-screen__userpic-heart initial-chat-screen__userpic-heart--br"},n.createElement(o,{name:"generic-heart",size:"stretch"})),n.createElement("div",{className:"initial-chat-screen__userpic-heart initial-chat-screen__userpic-heart--bl"},n.createElement(o,{name:"generic-heart",size:"stretch"})),n.createElement("div",{className:"initial-chat-screen__userpic-heart initial-chat-screen__userpic-heart--tr"},n.createElement(o,{name:"generic-heart",size:"stretch"}))):null))})),n.createElement("div",{className:"mini-game__users-list-item mini-game__users-list-item--next"},s(e.nextUser,e,function(e){return n.createElement("div",{className:"brick-wrapper--padded"},n.createElement("div",{className:"brick brick--stretch"},e.type===e.NOTIFICATION_BADGE_TYPE_EMPTY&&n.createElement(a,{src:e.src,size:"130"}),e.type===e.NOTIFICATION_BADGE_TYPE_LIKE&&n.createElement(n.Fragment,null,n.createElement(a,{src:e.src,size:"130"}),n.createElement("div",{className:"brick__fade"},n.createElement(o,{name:"generic-tick",size:"lg"}))),e.type===e.NOTIFICATION_BADGE_TYPE_REJECTED&&n.createElement(n.Fragment,null,n.createElement(a,{src:e.src,size:"130"}),n.createElement("div",{className:"brick__fade"},n.createElement(o,{name:"generic-close",size:"lg"}))),e.type===e.NOTIFICATION_BADGE_TYPE_TEXT&&n.createElement("div",{className:"brick__placeholder"},e.text),[e.NOTIFICATION_BADGE_TYPE_EMPTY,e.NOTIFICATION_BADGE_TYPE_LIKE,e.NOTIFICATION_BADGE_TYPE_REJECTED,e.NOTIFICATION_BADGE_TYPE_TEXT].includes(e.type)&&n.createElement("div",{className:"brick__icon"},n.createElement(o,{name:"generic-question-mark",size:"lg"}))))})))),s(e.user,e,function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"initial-chat-screen__username"},n.createElement("span",{className:"truncated-text"},n.createElement("span",{className:"truncated-text__trim"},e.name),n.createElement("span",{className:"truncated-text__full"},", ",e.age))),e.gift?n.createElement("div",{className:"initial-chat-screen__gift-message"},n.createElement("div",{className:"chat-message-gift-standalone qa-gift"},n.createElement("div",{className:"gift"},n.createElement("div",{className:"gift__image"},n.createElement("div",{className:"gift__image-loader"},n.createElement(o,{name:"gift-wrap",size:"stretch"})),n.createElement("img",{src:e.gift,alt:e.message}))),e.message?n.createElement("div",{className:"chat-message-gift-standalone__tag"},n.createElement("div",{className:"gift-tag ".concat(e.isReversed?"gift-tag--reverse":""," ").concat(e.isMaximised?"gift-tag--maximised":""),"data-qa":"gift-tag"},n.createElement("div",{className:"gift-tag__main"},e.message?n.createElement("div",{className:"gift-tag__text",dangerouslySetInnerHTML:{__html:e.message}}):null,e.input?n.createElement("div",{className:"gift-tag__input"},n.createElement("label",{className:"gift-tag__input-label",htmlFor:e.fieldId?e.fieldId:e.fieldName}),n.createElement("div",{className:"gift-tag__input-clamp"},n.createElement("div",{className:"gift-tag__input-mirror js-mirror"},e.textValue?e.textValue:e.textPlaceholder),n.createElement("textarea",{className:"gift-tag__input-textarea js-textarea",id:e.fieldId?e.fieldId:e.fieldName,name:e.fieldName,placeholder:e.textPlaceholder},e.textValue)),n.createElement("span",{className:"gift-tag__input-counter js-counter"},e.textLimit)):null),n.createElement("div",{className:"gift-tag__corner"},n.createElement("div",{className:"gift-tag__corner-decoration gift-tag__corner-decoration--below"},n.createElement("svg",{viewBox:"0 0 42 160",className:"is-flipped"},n.createElement("g",{fill:"none","fill-rule":"evenodd"},n.createElement("path",{fill:"#D3DEE7",d:"M40.37 0a7.98 7.98 0 0 0-7.3 4.76L.67 77.28c-.9 2.05-.9 4.4 0 6.44l32.4 71.52a7.98 7.98 0 0 0 7.3 4.76H200V0H40.37z"})))),n.createElement("div",{className:"gift-tag__corner-decoration gift-tag__corner-decoration--above"},n.createElement("svg",{viewBox:"0 0 42 160",className:"is-flipped"},n.createElement("g",{fill:"none","fill-rule":"evenodd"},n.createElement("path",{fill:"#FFFFFF",d:"M200 0H39.33c-3.08 0-5.23.92-6.47 3.82L.66 77.28a8.18 8.18 0 0 0 0 6.44l32.2 72.51c1.24 2.9 3.39 3.77 6.47 3.77H200V0z"})))),n.createElement("div",{className:"gift-tag__corner-hole"})))):null)):n.createElement("div",{className:"initial-chat-screen__message"},n.createElement("div",{className:"chat-message-initial-standalone"},n.createElement("div",{className:"chat-message-initial-standalone__container"},n.createElement("svg",{viewBox:"0 0 21 31",className:"chat-message-initial-standalone__tail"},n.createElement("path",{fill:"currentColor",d:"M0 2.83C0 .13 1.79-.8 4.01.73L21 12.5V31H0V2.83z"
})),n.createElement("div",{className:"chat-message-initial-standalone__text qa-text-message",dangerouslySetInnerHTML:{__html:e.message}})))))}))})},function(e,t,i){"use strict";var n=i(129),a=i(3291),o=i(345),s=i(102),r=i(101),l=r.ClickEvent,c=r.ViewElementEvent,u=r.ViewScreenEvent,d=n.extend({headerTemplate:null,construct:function(e){d._super.construct.call(this),this.parent=e},onStart:function(){d._super.onStart.apply(this,arguments),this.view_=this.registerView(new a({el:this.parent[0]})).on(a.EVENTS.DISMISS,this.onDismiss_,this),this.fetchAndRender_()},fetchAndRender_:function(){var e=this;this.view_.showLoading(),o.getExplanation().then(function(t){e.view_.render({promoBlock:t}),e.view_.hideLoading()})},onStop:function(){d._super.onStop.apply(this,arguments),this.view_.destroy(),this.view_=null},show:function(e){this.view_.show(),this.setElement_(e),s.track(c,{element:this.gameType_}),s.track(u,{screen_name:94})},onDismiss_:function(){o.dismissExplanation(),s.track(l,{element:this.gameAction_,parent_element:this.gameType_})},setElement_:function(e){this.gameType_=e.progress>1?485:484,this.gameAction_=e.progress>1?395:104}},"MessengerMiniGameExplanationController");e.exports=d},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(3292),s=i(111),r=i(131),l=s("DISMISS"),c=a.extend({events:{"click .js-action":"onAction_"},render:function(e){var t=function(e){return Object.assign({NOTIFICATION_BADGE_TYPE_EMPTY:1,NOTIFICATION_BADGE_TYPE_LIKE:37,NOTIFICATION_BADGE_TYPE_REJECTED:23,NOTIFICATION_BADGE_TYPE_TEXT:2},e)}(e.promoBlock);this.$el.html(o.render(t))},onAction_:function(e,t){var i=this,a=this.$el.addClass("is-fade-up");r.onTransitionEnd(a,function(){i.trigger(l.DISMISS,n(t).data())})},show:function(){var e=this.$el.removeClass("is-hidden");setTimeout(function(){return e.removeClass("is-fade-up")},40)}},"ExplanationController");c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(209),s=i(134),r=i(153);e.exports=i(108)("MessengerMiniGameExplanation",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement(a,{name:"zero-mini-game",size:"xlg"})),n.createElement("div",{className:"cta-box__header cta-box__header--xsm"},e.header),n.createElement("div",{className:"cta-box__content"},e.message),n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"mini-game__grid"},r(e.pictures,e,function(e){return n.createElement("div",{className:"mini-game__grid-item"},n.createElement("div",{className:"brick brick--stretch"},e.type===e.NOTIFICATION_BADGE_TYPE_EMPTY&&n.createElement(o,{src:e.src,size:"130"}),e.type===e.NOTIFICATION_BADGE_TYPE_LIKE&&n.createElement(n.Fragment,null,n.createElement(o,{src:e.src,size:"130"}),n.createElement("div",{className:"brick__fade"},n.createElement(a,{name:"generic-tick",size:"lg"}))),e.type===e.NOTIFICATION_BADGE_TYPE_REJECTED&&n.createElement(n.Fragment,null,n.createElement(o,{src:e.src,size:"130"}),n.createElement("div",{className:"brick__fade"},n.createElement(a,{name:"generic-close",size:"lg"}))),e.type===e.NOTIFICATION_BADGE_TYPE_TEXT&&n.createElement("div",{className:"brick__placeholder"},e.text),[e.NOTIFICATION_BADGE_TYPE_EMPTY,e.NOTIFICATION_BADGE_TYPE_LIKE,e.NOTIFICATION_BADGE_TYPE_REJECTED,e.NOTIFICATION_BADGE_TYPE_TEXT].includes(e.type)&&n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"generic-question-mark",size:"lg"}))))}))),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{type:"primary",text:e.buttons[0].text,extraClass:"js-action"})))))))})},function(e,t,i){"use strict";var n=i(129),a=i(3294),o=i(345),s=i(102),r=i(101),l=r.ClickEvent,c=r.ViewElementEvent,u=r.ViewScreenEvent,d=n.extend({headerTemplate:null,construct:function(e){d._super.construct.call(this),this.parent=e},onStart:function(){d._super.onStart.apply(this,arguments),this.view_=this.registerView(new a({el:this.parent[0]})).on(a.EVENTS.ACCEPT,this.onAccept_,this).on(a.EVENTS.DISMISS,this.onDismiss_,this),this.fetchAndRender_()},fetchAndRender_:function(){var e=this;this.view_.showLoading(),o.getFinal().then(function(t){e.promoBlock_=t,e.view_.render(t),e.view_.hideLoading()})},onStop:function(){d._super.onStop.apply(this,arguments),this.destroy(),this.view_=null,this.promoBlock_=null},onAccept_:function(){o.acceptFinal(this.promoBlock_),s.track(l,{element:104,parent_element:this.element_})},onDismiss_:function(){o.dismissFinal(this.promoBlock_),s.track(l,{element:113,parent_element:this.element_})},show:function(){this.view_.show(),this.setElement_(),s.track(c,{element:this.element_}),s.track(u,{screen_name:94})},setElement_:function(){this.element_=o.isEndOfGame()?486:487}},"MessengerMiniGameExplanationController");e.exports=d},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(3295),s=i(111)("ACCEPT","DISMISS"),r=a.extend({events:{"click .js-accept":"onAccept_","click .js-dismiss":"onDismiss_"},render:function(e){this.$el.html(o.render(e))},onAccept_:function(e,t){this.trigger(s.ACCEPT,n(t).data())},onDismiss_:function(e,t){this.trigger(s.DISMISS,n(t).data())},show:function(){var e=this.$el.removeClass("is-hidden");setTimeout(function(){return e.removeClass("is-fade-down")},40)}},"FinalExplanationController");r.EVENTS=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(134);e.exports=i(108)("MessengerMiniGameFinalExplanation",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement(a,{name:"zero-mini-game",size:"jumbo-md"})),n.createElement("div",{className:"cta-box__header cta-box__header--xsm"},e.header),n.createElement("div",{className:"cta-box__content"},e.message),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{type:"primary",text:e.buttons[0].text,extraClass:"js-accept"})),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm js-dismiss"},n.createElement("span",{className:"inline-button__text"},e.buttons[1].text))))))))})},function(e,t,i){"use strict";var n=i(113),a=i(121),o=i(128),s=i(346),r=i(102),l=i(3297),c=i(124),u=i(136),d=i(103).navigate,h=i(101).ClickEvent,p=a.extend({headerTemplate:null,clientSource:61,screenName:273,createElement:function(){return u({className:"own-interests"})},init:function(){this.onFailed_=this.onFailed_.bind(this),this.onProfileReceived_=this.onProfileReceived_.bind(this),p._super.init.apply(this,arguments),this.registerView("own-interests",new l).on(l.EVENTS.COMMIT_EDIT,this.onCommitEdit_,this)},onStart:function(){p._super.onStart.apply(this,arguments),this.getView("own-interests").appendTo(this.parent).showLoading(),o.getInstance().get({id:n.getUserId(),clientSource:this.clientSource}).then(this.onProfileReceived_)},onNavigationAction:function(e){e===l.NAVIGATION_ACTIONS.ADD_INTERESTS?(r.track(h,{element:146}),d("add-interests")):p._super.onNavigationAction.apply(this,arguments)},onProfileReceived_:function(e){var t=this.getView("own-interests");t.update({interests:e.getInterests([])}),t.hideLoading(),this.readyForVrt()},onCommitEdit_:function(e){e.length>0&&s.getInstance().set(null,e,3).then(this.onInterestsUpdated_).catch(this.onFailed_)},onFailed_:function(){this.getView("own-interests").hideLoading(),c.showNotification({type:c.TYPES.ERROR})},onInterestsUpdated_:function(){o.getInstance().invalidate(n.getUserId())}},"OwnInterests");e.exports=p},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(111),s=i(102),r=i(101).ClickEvent,l=i(3298),c=o("ADD_INTERESTS"),u=o("COMMIT_EDIT"),d=a.extend({interests_:null,isEditing_:null,events:{"click .js-edit":"onEdit_","click .js-commit":"onCommit_"},reset:function(){this.$el.empty(),this.interests_=this.isEditing_=null},update:function(e){this.isEditing_=!1,this.interests_=n.map(e.interests,function(e){return{id:e.getInterestId(),name:e.getName()}}),this.render()},render:function(){var e={NAVIGATION_ACTIONS:c,navigationBarActions:{back:!0},isEditing:this.isEditing_,interests:this.interests_,hasInterests:this.interests_.length>0};this.$el.html(l.render(e))},onEdit_:function(){this.isEditing_||s.track(r,{element:145,parent_element:34}),this.isEditing_=!this.isEditing_,this.render()},onCommit_:function(){var e=n.reduce(this.$(".js-input:not(:checked)"),function(e,t){return e[t.value]=!0,e},{});this.interests_=n.filter(this.interests_,function(t){return!0!==e[t.id]}),this.onEdit_(),this.trigger(u.COMMIT_EDIT,n.keys(e))}},"OwnInterests");d.EVENTS=u,d.NAVIGATION_ACTIONS=c,e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(134),r=i(133),l=i(130),c=i(138);e.exports=i(108)("OwnInterests",function(e){return n.createElement(r,null,n.createElement(c,null,n.createElement(o,{actions:e.navigationBarActions,logo:!1,noFake:!1,hasShadow:!0,title:a.get(61),secondary:e.hasInterests?n.createElement("div",{className:"navigation-bar__button-text ".concat(e.isEditing?"js-commit":"js-edit")},e.isEditing?a.get(23):a.get(24)):null})),n.createElement(l,null,n.createElement("div",{className:"settings-data-entry"},n.createElement(s,{type:"stroke",extraClass:"js-navigation",text:a.get(59),attrs:{"data-action":e.NAVIGATION_ACTIONS.ADD_INTERESTS}}),n.createElement("ul",{className:"poll poll--checkbox ".concat(e.isEditing?"":"poll--no-options")},e.interests.map(function(t){return n.createElement("li",{className:"poll__item js-select-option",key:t.id},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"checkbox",value:t.id,checked:!!e.isEditing||void 0}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},t.name)))})))))})},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(100),o=i(113),s=i(102),r=i(121),l=i(156),c=i(128),u=i(346),d=i(3300),h=i(124),p=i(150),m=i(136),g=i(103).navigate,_=i(101).LiveSearchEvent,f=r.extend({headerTemplate:null,groups_:null,isGroups_:null,activationPlace:75,screenName:274,createElement:function(){return m({className:"add-interests"})},init:function(){var e=this;this.onFailed_=this.onFailed_.bind(this),this.onInterestsFetched_=this.onInterestsFetched_.bind(this),this.onSearchFetched_=this.onSearchFetched_.bind(this),this.onInterestsImported_=this.onInterestsImported_.bind(this),this.onInterestsImportProgress_=this.onInterestsImportProgress_.bind(this),f._super.init.apply(this,arguments);var t=d.EVENTS;this.mainView_=this.registerView((new d).on(t.ADD_INTERESTS,function(t){return e.saveInterests_(t)}).on(t.CANCEL_SEARCH,function(){return e.fetchGroups_()}).on(t.IMPORT_INTERESTS,function(){return e.importInterests_()}).on(t.SEARCH,function(t){return e.searchInterests_(t)}).on(t.SELECT_GROUP,function(t){return e.fetchInterests_(t)}))},onStart:function(){var e=this;f._super.onStart.apply(this,arguments),this.mainView_.appendTo(this.parent).render();var t=this.fetchGroups_();this.getParameter("importPromise")&&t.then(function(){return e.getParameter("importPromise").then(e.onInterestsImportProgress_)})},onStop:function(){f._super.onStop.apply(this,arguments),this.groups_=this.isGroups_=null},onNavigationAction:function(e){if(e!==l.CREATE_INTEREST)this.isGroups_?g("own-interests",!0):this.fetchGroups_();else{var t=this.mainView_.getSearchValue();g("create-interests",{name:t})}},importInterests_:function(){this.mainView_.showLoading();var e={providerContext:5,providerType:1,providerId:this.importProvider_.getId()};p.startImport(e).then(this.onInterestsImportProgress_)},onInterestsImportProgress_:function(e){return!!e&&void p.finishImport(e.getImportId()).then(this.onInterestsImported_)},onInterestsImported_:function(e){this.mainView_.hideLoading(),h.showNotification({type:h.TYPES.INFO,text:e.getDisplayMessage()}),this.fetchGroups_()},fetchGroups_:function(){var e=this;return this.mainView_.showLoading(),this.isGroups_=!0,Promise.all([u.getInstance().getGroups(),p.getProvider({providerType:1,providerContext:5})]).then(function(t){var i=(0,n.default)(t,2),a=(0,n.default)(i[0],1)[0],o=i[1];e.onGroupsFetched_(a,o),e.isSaving_||e.mainView_.hideLoading()})},fetchInterests_:function(e){var t=this;return this.isGroups_=!1,this.mainView_.showLoading(),u.getInstance().get(e,0,100).then(function(e){var i=(0,n.default)(e,1)[0];t.onInterestsFetched_(i),t.mainView_.hideLoading()}).catch(this.onFailed_)},searchInterests_:function(e){!a.isString(e)||e.length<1||(this.isGroups_=!1,u.getInstance().search(e).then(this.onSearchFetched_))},saveInterests_:function(e){var t=this;this.mainView_.showLoading(),this.isSaving_=!0,u.getInstance().set(e,null,3).then(function(){c.getInstance().invalidate(o.getUserId()),t.mainView_.hideLoading(),t.isSaving_=!1}).catch(this.onFailed_)},onGroupsFetched_:function(e,t){this.groups_=e,this.importProvider_=t,this.mainView_.update({groups:this.groups_,importProvider:t}),this.readyForVrt()},onInterestsFetched_:function(e){this.mainView_.update({interests:e,groups:this.groups_})},onSearchFetched_:function(e){var t=(0,n.default)(e,1)[0],i=t.getTotal()||0;s.track(_,{num_results:i,activation_place:this.activationPlace}),this.mainView_.update({searchResults:t,groups:this.groups_})},onFailed_:function(){h.showNotification({type:h.TYPES.ERROR}),this.mainView_.hideLoading()}},"AddInterests");e.exports=f},function(e,t,i){"use strict";function n(e,t){return t&&_?_[e]:t?(_={},t.forEach(function(e){_[e.getGroupId()]=e.getName()}),_[e]):void 0}function a(e,t){return e.map(function(e){return new u({instance:e,subTitle:n(e.getGroupId(),t)})})}var o=i(100),s=i(109),r=i(99),l=i(111),c=i(156),u=i(600),d=i(409),h=i(3301),p=i(3302),m=i(3303),g=l("ADD_INTERESTS","CANCEL_SEARCH","IMPORT_INTERESTS","SEARCH","SELECT_GROUP"),_=null,f=s.extend({events:{"click .js-cancel-search":"onCancelSearch_","click .js-import-interests":"onImportInterests_","click .js-interest-group":"onGroupSelected_"},init:function(){this.onSearchInput_=o.debounce(this.onSearchInput_,300,{leading:!0})},update:function(e){this.addSelectedInterests_(),e.interests?this.renderInterests_(e):e.searchResults?this.renderSearchResults_(e):e.groups&&this.renderGroups_(e)},addSelectedInterests_:function(){var e=[];o.each(this.$(".js-interest:checked"),function(t){e.push(t.value)}),e.length>0&&this.trigger(g.ADD_INTERESTS,e)},disable:function(){f._super.disable.apply(this,arguments),_=null},render:function(){var e={NAVIGATION_ACTIONS:c,navigationBarActions:{back:!0}};this.$el.html(h.render(e)),this.$(".js-search-input")[0].addEventListener("input",this.onSearchInput_)},resetSearchInput_:function(){this.$(".js-search-input").val("").blur().parent().removeClass("has-value")},renderGroups_:function(e){var t={groups:e.groups.getGroups([]).map(function(e){return new d({instance:e})}),showImport:!!e.importProvider};this.$(".js-content").html(p.render(t)),this.$(".js-header-title").html(r.get(511)),this.resetSearchInput_()},renderInterests_:function(e){var t=e.interests.getGroupId(),i={interests:a(e.interests.getInterests([]))};this.$(".js-content").html(m.render(i)),this.$(".js-header-title").html(n(t,e.groups.getGroups())),this.resetSearchInput_()},renderSearchResults_:function(e){var t=a(e.searchResults.getInterests([]),e.groups.getGroups()),i=e.searchResults.getSearchFilter(),n={showCreateNew:i.length>1,newHint:r.get(9,i),noResultsMessage:t.length?null:r.get(508,i),interests:t,NAVIGATION_ACTIONS:c};this.$(".js-content").html(m.render(n)),this.$(".js-header-title").html(r.get(511))},onGroupSelected_:function(e,t){this.trigger(g.SELECT_GROUP,t.getAttribute("data-id"))},onSearchInput_:function(){var e=this.$(".js-search-input"),t=e.val();e.parent().addClass("has-value"),this.trigger(g.SEARCH,t)},onImportInterests_:function(){this.trigger(g.IMPORT_INTERESTS)},onCancelSearch_:function(){this.resetSearchInput_(),this.trigger(g.CANCEL_SEARCH)},getSearchValue:function(){return this.$(".js-search-input").val()}},"AddInterests");f.EVENTS=g,e.exports=f},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(138),c=i(106);e.exports=i(108)("AddInterestsLayout",function(e){return n.createElement(s,null,n.createElement(l,null,n.createElement(o,{actions:e.navigationBarActions,logo:!1,hasShadow:!0,title:'<span className="js-header-title">'.concat(a.get(511),"</span>")})),n.createElement(r,null,n.createElement("div",{className:"settings-search js-search"},n.createElement("div",{className:"search-wrapper"},n.createElement("div",{className:"search"},n.createElement("input",{className:"search__input js-search-input",type:"search",placeholder:a.get(31),name:"q",value:"",autoComplete:"off",autoCorrect:"off",spellCheck:"false"}),n.createElement("div",{className:"search__icon js-cancel-search"},n.createElement(c,{name:"elements-input-search",size:"stretch"}))),n.createElement("span",{className:"search__cancel js-cancel-search"},a.get(19)))),n.createElement("div",{className:"js-content"})))})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(134),s=i(106);e.exports=i(108)("AddInterestsGroups",function(e){return n.createElement(n.Fragment,null,e.showImport?n.createElement("div",{className:"settings-block add-interests__import"},n.createElement("div",{className:"settings-text"},a.get(269)),n.createElement(o,{type:"facebook",extraClass:"js-import-interests",text:a.get(270)})):null,n.createElement("div",{className:"settings-interblock-title"},a.get(54)),n.createElement("div",{className:"settings-block"},e.groups.map(function(e){return n.createElement("div",{className:"selector js-interest-group ".concat(e.action?"js-navigation":""),"data-action":e.action,"data-profile-option-type":e.profileOptionType,"data-tracking_element":e.elementTracking,"data-qa":e["data-qa"],"data-qa-option-type":e["data-qa-option-type"],"data-id":e.id,key:e.id},n.createElement("div",{className:"selector__label"},n.createElement("div",{className:"truncated-text"},n.createElement("div",{className:"truncated-text__full"},e.title),n.createElement("div",{className:"truncated-text__trim selector__label--secondary"},e.value))),e.mode?null:n.createElement("div",{className:"selector__icon selector__icon--chevron-righ"},n.createElement(s,{name:"generic-chevron-right",size:"sm",supportsRtl:!0})))})))})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106);e.exports=i(108)("AddInterestsList",function(e){return n.createElement(n.Fragment,null,e.noResultsMessage?n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"settings-text"},e.noResultsMessage)):null,n.createElement("div",{className:"settings-data-entry"},e.interests?n.createElement("ul",{className:"poll poll--radio"},e.interests.map(function(e){return n.createElement("li",{className:"poll__item",key:e.id},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-interest",type:"checkbox",value:e.id,name:e["radio-name"]}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.title,e.subTitle?n.createElement("span",{className:"poll__sub-label"},e.subTitle):null)))})):null,e.showCreateNew?n.createElement("div",{className:"add-interests__new-interest js-navigation","data-action":e.NAVIGATION_ACTIONS.CREATE_INTEREST},n.createElement("div",{className:"add-interests__new-interest-icon"},n.createElement(o,{name:"badge-plus",size:"md",color:"primary"})),n.createElement("ul",{className:"poll"},n.createElement("li",{className:"poll__item"},n.createElement("div",{className:"poll__option"},n.createElement("div",{className:"poll__label"},e.newHint,n.createElement("span",{className:"poll__sub-label"},a.get(10))))))):null))})},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(103),o=i(99),s=i(113),r=i(124),l=i(346),c=i(3305),u=i(156),d=i(121),h=i(128),p=d.extend({headerTemplate:null,init:function(){p._super.init.apply(this,arguments),this.mainView_=this.registerView(new c({el:this.parent.get(0)}))},onStart:function(){p._super.onStart.apply(this,arguments),this.fetch_()},fetch_:function(){var e=this;this.mainView_.showLoading(),l.getInstance().getGroups().then(function(t){var i=(0,n.default)(t,1)[0],a=e.getParameter("name");e.mainView_.hideLoading().update({name:a,interestsGroups:i}),e.readyForVrt()}).catch(this.onFailed_.bind(this))},onNavigationAction:function(e){e===u.SAVE?this.createCustomInterest_():p._super.onNavigationAction.apply(this,arguments)},createCustomInterest_:function(){var e=this.mainView_.getInterest();return e?(this.mainView_.showLoading(),l.getInstance().create(e).then(this.onInterestCreated_.bind(this,e.getName())).catch(this.onFailed_.bind(this))):Promise.resolve(null)},onInterestCreated_:function(e){h.getInstance().invalidate(s.getUserId()),r.showNotification({type:r.TYPES.INFO,text:o.get(60,e)}),a.back()},onFailed_:function(e){this.log.error(e),r.showNotification({type:r.TYPES.ERROR}),this.mainView_.hideLoading()}},"AddInterests");e.exports=p},function(e,t,i){"use strict";var n=i(109),a=i(99),o=i(156),s=i(600),r=i(105).Interest,l=i(3306),c=n.extend({events:{},update:function(e){this.name_=e.name,this.rendered_?this.$(".js-hint").html(this.getHint_(e.name)):this.render(e)},render:function(e){var t=e.name,i=e.interestsGroups;this.rendered_=!0;var n={groups:i.getGroups([]).map(function(e){return new s({instance:e})}),interestsPickerNewHint:this.getHint_(t),NAVIGATION_ACTIONS:o,navigationBarActions:{back:!0}};this.$el.html(l.render(n))},getHint_:function(e){return a.get(55,e)},getInterest:function(){var e=this.$("input[type=radio]:checked").get(0);if(!e||!this.name_)return null;var t=Number(e.value);return(new r).setGroupId(t).setName(this.name_)}},"CreateInterestsView");c.EVENTS={},e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(133),r=i(130),l=i(138);e.exports=i(108)("CreateInterests",function(e){return n.createElement(s,null,n.createElement(l,null,n.createElement(o,{actions:e.navigationBarActions,logo:!1,hasShadow:!0,title:'<span className="js-header-title">'.concat(a.get(56),"</span>"),secondary:n.createElement("div",{className:"navigation-bar__button-text js-navigation","data-action":e.NAVIGATION_ACTIONS.SAVE,"data-qa":"navbar-profile-save"},a.get(30))})),n.createElement(r,null,n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"settings-text js-hint",dangerouslySetInnerHTML:{__html:e.interestsPickerNewHint}})),n.createElement("div",{className:"settings-data-entry"},n.createElement("ul",{className:"poll poll--radio"},e.groups&&e.groups.map(function(e){return n.createElement("li",{className:"poll__item",key:e.id},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-interest",type:"radio",value:e.id,name:e["radio-name"]?"custom-interest-group":void 0}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.title,e.subTitle?n.createElement("span",{className:"poll__sub-label"},e.subTitle):null)))})))))})},function(e,t,i){"use strict";function n(e){u.track(_,{element:e})}var a=i(100),o=i(214),s=i(128),r=i(103),l=i(99),c=i(113),u=i(102),d=i(559),h=i(3308),p=i(169),m=i(122),g=i(101),_=g.ClickEvent,f=g.ViewBannerEvent,v=g.ClickBannerEvent,E="moderated-photos",b=d.extend({notificationScreenAccess:3,headerTemplate:null,screenName:286,init:function(){b._super.init.apply(this,arguments),this.registerView(E,new h).on(h.EVENTS.UPLOAD_PHOTO,this.onUploadPhotoCTA_,this).on(h.EVENTS.UPLOAD_PHOTO_ICON,this.onUploadPhotoIcon_,this).on(h.EVENTS.PHOTO_GUIDELINES,this.onPhotoGuidelines_,this).on(h.EVENTS.SKIP,this.onSkip_,this)},onStart:function(){b._super.onStart.apply(this,arguments),this.getView(E).showLoading(),this.getView(E).appendTo(this.parent),this.element.attr("data-qa-page","moderation-alert")},onReady:function(){var e=this.notification_&&this.notification_.getPromoBlock();e&&(137===e.getPromoBlockType()&&(this.screenName=286),222===e.getPromoBlockType()&&(this.screenName=550)),b._super.onReady.apply(this,arguments),e?this.renderFromNotification_(this.notification_):this.getModeratedPhotos_()},renderFromNotification_:function(e){var t,i,n=e.getPromoBlock(),a=n.getButtons([]),o=a.find(function(e){return 1===e.getType()}),s=a.find(function(e){return 2===e.getType()});this.renderView_({albums:[{photos:n.getPictures([]).map(function(e){var t=e.getDisplayImages(),i=34===e.getBadgeType();return{url:p.getImageUrlForSize(t,140,140),isRejected:!i,isPlaceholder:i}})}],title:n.getHeader(),instruction:n.getMssg(),primaryButton:o&&o.getText(),secondaryButton:s&&{buttonText:s.getText(),actionClass:77===s.getAction()?"js-skip":"js-redirect"}}),t=n.getPromoBlockType(),i=n.getPromoBlockPosition(),u.track(f,{banner_id:t,position_id:i})},getModeratedPhotos_:function(){new m(352,null).on(353,this.onModeratedPhotosReceived_,this).request()},onModeratedPhotosReceived_:function(e,t){if(!e&&t){var i=t.getAlbums();if(i&&0!==i.length){var n=i.map(function(e){return{title:e.getName(),photos:a.invokeMap(e.getPhotos([]),"getPreviewUrl").map(function(e){return{url:p.getImageUrlForSize(e,140,140),isModerated:!0}})}}),o=this.notification_?this.notification_.getTitle():l.get(38);this.renderView_({albums:n,title:o,instruction:i[0]&&i[0].getInstruction(),primaryButton:l.get(378)})}else this.close_()}else this.close_()},renderView_:function(e){this.updateView(E,e),this.getView(E).hideLoading()},onUploadPhotoCTA_:function(){var e,t,i=this.notification_&&this.notification_.getPromoBlock();i&&(n(68),e=i.getPromoBlockType(),t=i.getPromoBlockPosition(),u.track(v,{banner_id:e,position_id:t})),this.addPhotos_()},onUploadPhotoIcon_:function(){n(121),this.addPhotos_()},addPhotos_:function(){this.acknowledgeModeration_().then(function(){r.navigate("add-photos",!0,{replaceActivationPlace:234})})},onSkip_:function(){n(65),this.close_()},onPhotoGuidelines_:function(){n(153),this.acknowledgeModeration_().then(function(){r.navigate("guidelines")})},onNavigationAction:function(){n(51),this.close_()},close_:function(){this.acknowledgeModeration_().then(function(){r.back()})},acknowledgeModeration_:function(){var e=this;return this.getView(E).showLoading(),new Promise(function(t){new m(354,null).on(355,function(){e.getView(E).hideLoading(),o.getInstance().invalidate(c.getUserId()),s.getInstance().invalidate(c.getUserId()),t()}).request()})}},"ModeratedPhotos");e.exports=b},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(176),s=i(111),r=i(3309),l=s("UPLOAD_PHOTO","UPLOAD_PHOTO_ICON","PHOTO_GUIDELINES","SKIP"),c=a.extend({events:{"click .js-action":"onUploadPhoto_","click .js-add-photo":"onUploadPhotoIcon_","click .js-redirect":"onPhotoGuidelines_","click .js-skip":"onSkip_"},onUploadPhoto_:function(){this.trigger(l.UPLOAD_PHOTO)},onUploadPhotoIcon_:function(){this.trigger(l.UPLOAD_PHOTO_ICON)},onPhotoGuidelines_:function(){this.trigger(l.PHOTO_GUIDELINES)},onSkip_:function(){this.trigger(l.SKIP)},update:function(e){n.isObject(e)&&(this.$el.html(r.render(e)),this.toggleScroll_=new o(this.$el.find(".js-scroll-toggle")))}},"ModeratedPhotos");c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout layout--centered-content"><div class="layout__header">').h("NavigationBar",t,{primary:i,block:n},{logo:t.get(["false"],!1),title:t.get(["false"],!1),extraClass:"navigation-bar--no-background"},"h").w('</div><div class="layout__content"><div class="cta-box cta-box--vpadded cta-box--hpadded"><div class="cta-box__content cta-box__content--wide"><div class="photo-grid-liquid photo-grid-liquid--centered photo-grid-liquid--single-line photo-grid-liquid--hpadded">').s(t.get(["albums"],!1),t,{block:a},{}).w('</div></div><div class="cta-box__header">').f(t.get(["title"],!1),t,"h",["s"]).w('</div><div class="cta-box__content">').f(t.get(["instruction"],!1),t,"h",["s"]).w('</div><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{},{type:"primary",text:t.get(["primaryButton"],!1),narrow:t.get(["true"],!1),extraClass:"js-action"},"h").w("</div>").s(t.get(["secondaryButton"],!1),t,{block:u},{}).w("</div></div></div></div></div>")}function i(e,t){return e.w('<div class="navigation-bar__icon js-navigation" data-action="').f(t.getPath(!1,["NAVIGATION_BUTTONS","CLOSE"]),t,"h").w('" data-qa="navbar-close">').h("Icon",t,{},{name:"navigation-bar-close"},"h").w("</div>")}function n(e,t){return e}function a(e,t){return e.s(t.get(["photos"],!1),t,{block:o},{})}function o(e,t){return e.w('<div class="photo-grid-liquid__item ').x(t.get(["isPlaceholder"],!1),t,{block:s},{}).w('"><div class="photo-grid-liquid__item-image" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w("')\"></div>").x(t.get(["isModerated"],!1),t,{block:r},{}).x(t.get(["isRejected"],!1),t,{block:l},{}).x(t.get(["isPlaceholder"],!1),t,{block:c},{}).w("</div>")}function s(e,t){return e.w("js-add-photo")}function r(e,t){return e.w('<div class="photo-grid-liquid__item-fade"></div><div class="photo-grid-liquid__item-icon">').h("Icon",t,{},{name:"badge-minus-red",size:"md"},"h").w("</div>")}function l(e,t){return e.w('<div class="photo-grid-liquid__item-fade"></div><div class="photo-grid-liquid__item-icon">').h("Icon",t,{},{name:"badge-attention",size:"md"},"h").w("</div>")}function c(e,t){return e.w('<div class="photo-grid-liquid__item-icon">').h("Icon",t,{},{name:"badge-plus",branded:t.get(["true"],!1),size:"md"},"h").w("</div>")}function u(e,t){return e.w('<div class="button-wrapper__item"><div class="inline-button inline-button--sm ').f(t.get(["actionClass"],!1),t,"h").w('"><span class="inline-button__text">').f(t.get(["buttonText"],!1),t,"h").w("</span></div></div>")}return e.register("moderated-photos/moderated-photos",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n,a,o=i(3)(i(107)),s=i(100),r=i(99),l=i(579),c=i(175),u=i(157),d=i(3311),h=i(102),p=i(101),m=p.ReportContentEvent,g=p.ReportEvent,_={PhotoSomeone:r.get(100),UserRude:r.get(101),UserScammer:r.get(102),UserSpammer:r.get(103),UserTrash:r.get(104)},f=(n={},(0,o.default)(n,10,592),(0,o.default)(n,11,694),n),v=(a={},(0,o.default)(a,10,r.get(718)),(0,o.default)(a,11,r.get(728)),a),E=r.get(29),b=d.extend({defaultButton_:d.BUTTONS.CLOSE,defaultTitle_:E,overlay:!0,onStart:function(e){this.defaultTitle_=v[e.reportType]||E,this.screenName=f[e.reportType]||204,b._super.onStart.call(this,e)},createElement:function(){var e=b._super.createElement.call(this);return e.addClass("overlay-page form-with-list"),e},getListData_:function(){var e=this.getParameters(),t=e.reportType,i=e.userId,n=e.reportContext;l.getInstance().get({reportType:t,userId:i,context:n}).then(this.onListData_)},getListViewItems_:function(e){var t=this,i=this.getParameters().reportType,n=e.getReportType();return n=(n=n.map(function(e){var n=void 0===i?_[e.getName()]:e.getText(),a={id:e.getUid(),content:n,messageRequired:e.getMessageRequired()};return t.list_[e.getUid()]=a,a})).filter(function(e){return!(!s.isString(e.content)||!e.content.length)||(t.log.error("Missing Lexum for Report user category"),!1)})},submitForm_:function(){var e=this;if(this.getView(d.VIEWS.FORM).isValid()){this.getView(d.VIEWS.FORM).showLoading();var t=this.list_[this.formId_].id,i=this.getParameters(),n=i.reportType,a=i.userId,o=i.reportContext,s=i.blockUser,r=i.messageId,h=i.streamId,p={
reportType:n,reportTypeId:t,userId:a,context:o,blockUser:s,comment:this.getView(d.VIEWS.FORM).getValue(),messageId:r,streamId:h};u.reportUser(a),l.getInstance().set(p).then(function(){e.trackReport_(),c.getInstance().invalidate(),e.success_()}).catch(this.error_)}else this.error_()},trackReport_:function(){var e=this.getParameters(),t=e.reportType,i=e.userId,n=e.streamId,a=this.list_[this.formId_].id;11===t?h.track(g,{block_reason:a,stream_id:n,activation_place:311}):10===t?h.track(m,{encrypted_user_id:i,content_type:25,stream_id:n}):h.track(g,{block_reason:a,encrypted_user_id:i})}},"ReportUser");e.exports=b},function(e,t,i){"use strict";var n=i(100),a=i(111),o=i(99),s=i(103),r=i(124),l=i(121),c=i(3312),u=i(3314),d=i(148),h=n.clone(l.VIEWS);h=n.extend(h,{LIST:"list",FORM:"form"});var p="show-form",m=l.BUTTONS,g=a("INITIAL","WRITE_COMMENT","COMMENT_WRITTEN"),_=l.extend({state_:g.INITIAL,title_:null,activeView_:null,list_:null,formId_:null,defaultTitle_:null,init:function(){this.title_=this.defaultTitle_,_._super.init.apply(this,arguments),d(this),this.registerView(h.LIST,new c).on(c.ACTIONS.SELECTED,this.onListItemSelected_),this.registerView(h.FORM,new u).on(u.ACTIONS.VALIDITY_CHANGE,this.updateValidity_),this.activeView_=h.LIST},onStart:function(){_._super.onStart.apply(this,arguments),this.getView(h.LIST).appendTo(this.parent).showLoading(),this.getView(h.FORM).appendTo(this.parent),this.setTitle_(),this.getListData_()},onStop:function(){_._super.onStop.apply(this,arguments),this.clear()},getNavigationActions:function(){switch(this.state_){case g.INITIAL:return{close:!0};case g.WRITE_COMMENT:return{back:!0,link:{action:m.SEND,text:o.get(32),disabled:!0}};case g.COMMENT_WRITTEN:return{back:!0,link:{action:m.SEND,text:o.get(32),disabled:!1}}}},onNavigationAction:function(e){return e===m.BACK&&this.activeView_===h.FORM?(this.state_=g.INITIAL,void this.setView_(h.LIST)):void(e!==m.SEND?_._super.onNavigationAction.apply(this,arguments):this.submitForm_())},clear:function(){this.activeView_=null,this.formId_=null,this.getView(h.FORM).clear(),this.title_=this.defaultTitle_},getListData_:function(){this.onListData_([])},onListData_:function(e){this.list_={},n.isArray(e)&&e.length?(this.setView_(h.LIST),this.updateView(h.LIST,this.getListViewItems_(e[0])),this.readyForVrt()):this.error_()},getListViewItems_:function(){},onListItemSelected_:function(e){if(!e)return this.error_(),!1;this.formId_=e;var t=this.list_[e].messageRequired;this.updateView(h.FORM,{placeholder:t?o.get(41):o.get(122),required:t}),this.setView_(h.FORM),this.updateNavigationBar()},updateValidity_:function(){this.getView(h.FORM).isValid()?this.state_=g.COMMENT_WRITTEN:this.state_=g.WRITE_COMMENT,this.updateNavigationBar()},setView_:function(e){this.activeView_!==e&&(e===h.FORM?(this.setTitle_(this.list_[this.formId_].content),this.parent.addClass(p)):(this.formId_=null,this.setTitle_(this.defaultTitle_),this.parent.removeClass(p),this.getView(h.FORM).clear()),this.activeView_=e,this.updateNavigationBar())},updateNavigationBar:function(){this.updateView(h.NAVIGATION_BAR,{actions:this.getNavigationActions()})},submitForm_:function(){},error_:function(){this.getView(h.FORM).hideLoading(),r.showNotification({type:r.TYPES.ERROR})},success_:function(){this.getView(h.FORM).hideLoading(),r.showNotification({type:r.TYPES.INFO,text:o.get(98)}),s.back()},setTitle_:function(e){this.title_=n.isString(e)?e:this.defaultTitle_,this.updateView(h.NAVIGATION_BAR,{title:this.title_})}},"FormWithCategories");_.VIEWS=h,e.exports=_},function(e,t,i){"use strict";var n=i(100),a=i(3313),o=i(109),s={SELECTED:"selected"},r=o.extend({className:"form-slider-list",events:{"click li":"onCategorySelected_"},init:function(){r._super.init.call(this),this.registerView("list-view",new a),this.list_={},this.render()},update:function(e){return!!n.isArray(e)&&(e=e.map(function(e){return e.class=n.isString(e.class)?e.class:"",e}),this.getChildView("list-view").update({items:e}),this.hideLoading(),r._super.update.apply(this,arguments),void 0)},render:function(){this.getChildView("list-view").appendTo(this.el)},onCategorySelected_:function(e){this.trigger(s.SELECTED,e.target.id)}},"SimpleScrollingList");r.ACTIONS=s,e.exports=r},function(e,t,i){"use strict";var n=i(109),a=i(141),o=i(131),s=i(100),r=i(25),l={RESIZE:"resize"},c=n.extend({className:"list-view-wrapper",list_:null,events:{"click li":"onListItemClick_"},update:function(e){return r.isPlainObject(e)&&(e=[e]),this.list_=e,this.render(),this},render:function(){var e=a.removeForEdit(this.el);this.$el.empty();for(var t=0;t<this.list_.length;t++)this.el.appendChild(this.renderItem_(this.list_[t]));return e(),this.trigger(l.RESIZE),this},renderItem_:function(e){return s.isArray(e.items)?this.renderSection_.apply(this,arguments):this.renderListItem_.apply(this,arguments)},renderSection_:function(e){var t=[];s.isString(e.title)&&e.title.length>0&&t.push(this.renderItem_({class:"list-item-title",content:e.title},e.enabled));var i=e.class?e.class:"";return a.createElement("ul",{className:"list-view ".concat(i)},t.concat(e.items.map(function(t){return this.renderItem_(t,e.enabled)},this)))},renderListItem_:function(e,t){var i={id:e.id,text:e.text||"",class:(e.class||"")+(t||e.enabled?" touchable":"")};for(var n in e)e.hasOwnProperty(n)&&"data-"===n.substring(0,5)&&(i[n]=e[n]);return a.createElement("li",i,e.content)},deleteItem:function(e){if((!s.isString(e)||(e=this.$el.find(e).get(0)))&&r.contains(this.el,e)){var t=r(e).closest("li");t.addClass("is-deleted"),o.onTransitionEnd(t,function(){t.remove()})}},addItem:function(e,t){var i;(i=s.isString(t)?this.$el.find(".list-view.".concat(t)):this.$el.find(".list-view").last())&&0!==i.length&&r(i).append(this.renderItem_(e))},emptyItems:function(){return this.$el.find(".list-view").empty(),this},onListItemClick_:function(e,t){var i;t.id?i=t.id:t.children&&t.children.length>0&&t.children[0].id&&(i=t.children[0].id),this.trigger(c.ACTIONS.LIST_ITEM_SELECTED,{id:i,el:t,target:e.target})}},"List");c.ACTIONS={LIST_ITEM_SELECTED:"list-item-selected"},c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";var n=i(141),a=i(109),o={SUBMIT:"submit",VALIDITY_CHANGE:"validity-change"},s=a.extend({className:"form",textarea_:null,messageRequired_:null,valid_:null,events:{"click li":"onCategorySelected_"},init:function(){s._super.init.call(this),this.render()},update:function(e){s._super.update.call(this),this.textarea_.attr("placeholder",e.placeholder),this.messageRequired_=e.required,this.isValid()},render:function(){this.textarea_=n.$satisfy("textarea.full-screen-textarea"),this.textarea_.on("keyup",this.onTextAreaChange_),this.$el.html(this.textarea_)},onTextAreaChange_:function(){this.messageRequired_&&this.isValid()},isValid:function(){var e=this.valid_;return this.messageRequired_?this.valid_=!!this.textarea_.val().trim().length:this.valid_=!0,this.valid_!==e&&this.trigger(o.VALIDITY_CHANGE,this.valid_),this.valid_},clear:function(){this.textarea_.val(""),this.messageRequired_=null,this.valid_=null},getValue:function(){return this.textarea_.val()}},"SimpleForm");s.ACTIONS=o,e.exports=s},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(99),s=i(134),r=i(153);e.exports=i(108)("PhoneVerification",function(e){return n.createElement("div",{className:"layout ".concat(e.waiting?"layout--centered-content":"layout--with-fake-nav")},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},e.verification?n.createElement("div",{className:"cta-box cta-box--compact"},n.createElement("div",{className:"cta-box__media"},n.createElement(a,{name:"adaptor-phone",size:"xlg",supportsRtl:!0})),n.createElement("div",{className:"cta-box__content"},e.introMessage?e.introMessage:o.get(341)),n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"form-uniform js-form"},n.createElement("div",{className:"control control--tel control--narrow"},n.createElement("div",{className:"control__inputs control__inputs--row"},n.createElement("div",{className:"select field--tel-country-code js-select"},n.createElement("select",{className:"select__field js-prefix-select"},e.countries.map(function(e){return n.createElement("option",{key:e.prefix,value:e.prefix,selected:!!e.selected||void 0},e.name," +",e.prefix)})),n.createElement("div",{className:"select__surrogate js-prefix-label"},"+",e.selectedCountry.prefix)),n.createElement("div",{className:"input field--tel-national js-input-field-container","data-field-type":"phone"},n.createElement("input",{type:"tel",className:"input__field js-input-field",placeholder:o.get(347),value:e.number?e.number:""}))),n.createElement("div",{className:"control__error js-error-label js-input-field-error-msg","data-field-type":"phone"})))),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{type:"primary",extraClass:"js-submit",text:e.introButtonText,attrs:{disabled:!e.number||void 0}}))),n.createElement("div",{className:"cta-box__additional"},n.createElement("div",{className:"hint"},e.disclaimerText))):null,e.confirmation?n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement(a,{name:"adaptor-phone",size:"xlg",supportsRtl:!0})),n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.message}}),n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"form-uniform js-form"},n.createElement("div",{className:"control control--tel control--digits"},n.createElement("div",{className:"control__inputs control__inputs--row"},e.callFlow?n.createElement(n.Fragment,null,n.createElement("div",{className:"input"},n.createElement("div",{className:"input__field input__field--border-hidden"},"+",e.caller.prefix)),n.createElement("div",{className:"input"},n.createElement("div",{className:"input__field input__field--border-hidden"},e.caller.number))):null,e.pinLength.map(function(e){return n.createElement("div",{className:"input js-input-field-container","data-field-type":"digits",key:e},n.createElement("input",{type:"tel",className:"input__field input__field--digit js-input-field js-pin-field","data-index":e}))})),n.createElement("div",{className:"control__error js-input-field-error-msg","data-field-type":"digits"})))),e.preDisclaimerText?n.createElement("div",{className:"cta-box__additional"},n.createElement("div",{className:"hint"},e.preDisclaimerText)):null,n.createElement("div",{className:"cta-box__buttons"},n.createElement(s,{type:"primary",text:e.verifyButtonText,extraClass:"js-submit",attrs:{disabled:!0}})),n.createElement("div",{className:"cta-box__additional"},e.showCancel?n.createElement("div",{className:"hint"},n.createElement("a",{"data-action":e.cancelAction,"data-qa":"cancel"},o.get(19))):null,e.termsLink?n.createElement("div",{className:"hint"},n.createElement("a",{"data-action":e.termsLink.openAction,"data-url":e.termsLink.url,"data-qa":"open-tos"},e.termsLink.text)):null,e.disclaimerText?n.createElement("div",{className:"hint"},e.disclaimerText):null,e.smsFlow?n.createElement(n.Fragment,null,n.createElement("div",{className:"hint hint--link","data-action":"reset"},n.createElement("a",null,o.get(352))),n.createElement("div",{className:"hint hint--link","data-action":"show_number"},n.createElement("a",null,o.get(353)))):null,e.callFlow?n.createElement(n.Fragment,null,n.createElement("div",{className:"hint js-timer-hint"},e.timerHint),n.createElement("div",{className:"hint js-try-again is-hidden","data-action":"fallback","data-prefix":e.myPhone.prefix,"data-number":e.myPhone.number,dangerouslySetInnerHTML:{__html:o.get(351)}}),n.createElement("div",{className:"hint","data-action":"show_number",dangerouslySetInnerHTML:{__html:o.get(349)}})):null,e.airpayFlow?n.createElement(n.Fragment,null,n.createElement("div",{className:"hint js-timer-hint"},e.timerHint),n.createElement("div",{className:"hint is-hidden js-try-again","data-action":"reset",dangerouslySetInnerHTML:{__html:e.tryAgainHtml}})):null)):null,e.waiting?n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"phone-call-timer"},n.createElement("svg",{className:"icon-inline is-flipped phone-call-timer__icon",viewBox:"0 0 64 64"},n.createElement("circle",{cx:"32",cy:"32",r:"32",fill:"transparent"}),n.createElement("path",{fill:"#00D600",d:"M44.76 38.29l-6.56-3.32s-.33-.18-.5-.18c-.33 0-.6.15-.77.38l-2.81 2.56a.94.94 0 0 1-1.18.14 20.55 20.55 0 0 1-6.71-6.76.99.99 0 0 1 .12-1.19l2.8-2.79c.21-.2.36-.47.36-.77 0-.2-.06-.35-.15-.53l-3.6-6.59a.95.95 0 0 0-.86-.53c-1.6.15-3.4.68-4.43 1.72-3.67 3.68-1.4 11.99 4.87 18.3 4.2 4.22 9.22 6.56 13.21 6.56 1.95 0 3.67-.6 4.88-1.8a6.84 6.84 0 0 0 1.86-4.31 1 1 0 0 0-.53-.89"}),n.createElement("circle",{className:"phone-call-timer__icon-c1",cx:"32",cy:"32",r:"31",fill:"transparent",stroke:"#E0E0E0","stroke-width":"2"}),n.createElement("circle",{className:"phone-call-timer__icon-c2",cx:"32",cy:"32",r:"31",fill:"transparent",stroke:"currentColor","stroke-width":"2"})),n.createElement("div",{className:"progress-bar progress-bar--tiny progress-bar--inherited phone-call-timer__progress-bar"},n.createElement("div",{className:"progress-bar__fill phone-call-timer__progress-bar-fill",style:{minWidth:"0%"}})))),n.createElement("div",{className:"cta-box__header"},o.get(404)),n.createElement("div",{className:"cta-box__content"},o.get(405))):null),e.skip?n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint"},n.createElement("a",{className:"js-skip",href:"#",dangerouslySetInnerHTML:{__html:e.skipText}}))):null,r(e.footer,e,function(e){return n.createElement("div",{className:"layout__footer layout__footer--vpadded layout__footer--hpadded"},e.hint?n.createElement("div",{className:"hint"},e.hint):null,e.signOut?n.createElement("div",{className:"hint","data-qa":"logout-or-contact-support"},n.createElement("a",{href:"#",className:"js-logout","data-action":e.action?e.action:void 0,"data-qa":"logout"},e.text?e.text:o.get(78)),n.createElement("span",null," ",o.get(447)," "),n.createElement("a",{"data-action":e.contactSupportAction,"data-qa":"contact-support"},o.get(446))):null,e.signOut?null:n.createElement("div",{className:"hint"},n.createElement("a",{"data-action":e.contactSupportAction,"data-qa":"contact-support"},o.get(570))))}))})},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(99),s=i(134);e.exports=i(108)("NeverLoseAccount",function(e){return n.createElement("div",{className:"layout layout--with-fake-nav"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},e.verification?n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement(a,{name:"badge-feature-never-loose-account",size:"xlg"})),n.createElement("div",{className:"cta-box__content"},e.introMessage?e.introMessage:o.get(341)),n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"form-uniform js-form"},n.createElement("div",{className:"control control--tel control--narrow"},n.createElement("div",{className:"control__inputs control__inputs--row"},n.createElement("div",{className:"select field--tel-country-code js-select"},n.createElement("select",{className:"select__field js-prefix-select"},e.countries.map(function(e){return n.createElement("option",{key:e.prefix,value:e.prefix,selected:e.selected?"selected":void 0},e.name," +",e.prefix)})),n.createElement("div",{className:"select__surrogate js-prefix-label"},"+",e.selectedCountry.prefix)),n.createElement("div",{className:"input field--tel-national js-input-field-container","data-field-type":"phone"},n.createElement("input",{type:"tel",className:"input__field js-input-field",placeholder:o.get(347)}))),n.createElement("div",{className:"control__error js-error-label js-input-field-error-msg","data-field-type":"phone"})))),n.createElement("div",{className:"cta-box__buttons"},n.createElement(s,{type:"never-loose-account",extraClass:"js-submit",text:e.introButtonText,attrs:{disabled:!0}})),n.createElement("div",{className:"cta-box__additional"},n.createElement("div",{className:"hint"},e.disclaimerText))):null,e.confirmation?n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement(a,{name:"badge-feature-never-loose-account",size:"xlg"})),n.createElement("div",{className:"cta-box__content"},e.message),n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"form-uniform js-form"},n.createElement("div",{className:"control control--digits"},n.createElement("div",{className:"control__inputs control__inputs--row"},e.callFlow?n.createElement(n.Fragment,null,n.createElement("div",{className:"input"},n.createElement("div",{className:"input__field input__field--border-hidden"},"+",e.caller.prefix)),n.createElement("div",{className:"input"},n.createElement("div",{className:"input__field input__field--border-hidden"},e.caller.number))):null,e.pinLength.map(function(e){return n.createElement("div",{className:"input js-input-field-container","data-field-type":"digits",key:e},n.createElement("input",{type:"tel",className:"input__field input__field--digit js-input-field","data-index":e}))})),n.createElement("div",{className:"control__error js-input-field-error-msg","data-field-type":"digits"})))),n.createElement("div",{className:"cta-box__buttons"},n.createElement(s,{type:"never-loose-account",extraClass:"js-submit",text:o.get(400),attrs:{disabled:!0}})),n.createElement("div",{className:"cta-box__additional"},e.smsFlow?n.createElement(n.Fragment,null,n.createElement("div",{className:"hint hint--link","data-action":"reset"},n.createElement("a",null,o.get(352))),n.createElement("div",{className:"hint hint--link","data-action":"reset"},n.createElement("a",null,o.get(353)))):null,e.callFlow?n.createElement(n.Fragment,null,n.createElement("div",{className:"hint js-timer-hint"},e.timerHint),n.createElement("div",{className:"hint js-try-again is-hidden","data-action":"fallback","data-prefix":e.myPhone.prefix,"data-number":e.myPhone.number,dangerouslySetInnerHTML:{__html:o.get(351)}}),n.createElement("div",{className:"hint","data-action":"reset",dangerouslySetInnerHTML:{__html:o.get(349)}})):null)):null),e.skip?n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint"},n.createElement("a",{className:"js-skip",href:"#",dangerouslySetInnerHTML:{__html:e.skipText}}))):null,e.logout?n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint"},e.emailText),n.createElement("div",{className:"hint"},n.createElement("a",{className:"js-logout",href:"#",dangerouslySetInnerHTML:{__html:o.get(78)}}))):null)})},function(e,t,i){"use strict";var n=i(109),a=i(176),o=i(203),s=i(3318),r=n.extend({className:"page-verification page-verification--by-photo",events:{"click [data-action]":"triggerAction_"},update:function(e){this.$el.html(s.render(e)),this.toggleScroll_=new a(this.$el.find(".js-scroll-toggle")),o(this.$("[data-src]"))},triggerAction_:function(e,t){e.preventDefault(),this.trigger(t.getAttribute("data-action"))}},"PhotoVerification");e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(137),o=i(106),s=i(134),r=i(99),l=i(153);e.exports=i(108)("PhotoVerification",function(e){return n.createElement("div",{className:"layout"},e.navigation&&n.createElement("div",{className:"layout__header"},n.createElement(a,{title:e.navigation.title,actions:e.navigation.actions,scrollToggle:"1",scrollToggleClass:"navigation-bar--shadow"})),n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__content cta-box__content--wide"},e.uploadedPhoto?n.createElement("div",{className:"verify-photo verify-photo--compare-gesture"},n.createElement("div",{className:"verify-photo__photo-wrapper js-data-required-gesture"},n.createElement("div",{className:"verify-photo__photo-frame"},n.createElement("div",{className:"verify-photo__photo-image","data-src":e.gesturePhoto,"data-qa":"required-gesture"}))),n.createElement("div",{className:"verify-photo__photo-wrapper"},n.createElement("div",{className:"verify-photo__photo-frame"},n.createElement("div",{className:"verify-photo__photo-image",style:{backgroundImage:"url('".concat(e.uploadedPhoto,"')")},"data-qa":"uploaded-gesture"})),n.createElement("div",{className:"verify-photo__photo-loader"},n.createElement(o,{name:"loading-dots",size:"lg"})))):n.createElement("div",{className:"verify-photo verify-photo--sample-gesture"},n.createElement("div",{className:"verify-photo__photo-wrapper is-loading js-data-required-gesture"},n.createElement("div",{className:"verify-photo__photo-dash"}),n.createElement("div",{className:"verify-photo__photo-frame"},n.createElement("div",{className:"verify-photo__photo-image","data-src":e.gesturePhoto,"data-qa":"required-gesture"})),n.createElement("div",{className:"verify-photo__photo-loader"},n.createElement(o,{name:"loading-dots",size:"lg"}))))),n.createElement("div",{className:"cta-box__header",dangerouslySetInnerHTML:{__html:e.header}}),n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.description}}),e.errorReasons&&e.errorReasons.length?n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"verify-photo-errors"},e.errorReasons.map(function(e){return n.createElement("div",{className:"verify-photo-errors__item",key:"reason-".concat(e.ndx)},n.createElement("div",{className:"verify-photo-errors__icon"},n.createElement(o,{name:"badge-attention",size:"md"})),n.createElement("div",{className:"verify-photo-errors__text"},e))}))):null,n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},l(e.primaryAction,e,function(e){return n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{type:"verification",narrow:"true",text:e.text,extraClass:"needsclick",attrs:{"data-action":e.action,disabled:!!e.isDisabled||void 0}}))}),l(e.secondaryAction,e,function(e){return n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm needsclick","data-action":e.action},n.createElement("span",{className:"inline-button__text"},e.text)))}))),e.subDescription?n.createElement("div",{className:"cta-box__additional"},e.subDescription):null)),l(e.footer,e,function(e){return n.createElement("div",{className:"layout__footer layout__footer--vpadded layout__footer--hpadded"},e.hint?n.createElement("div",{className:"hint"},e.hint):null,e.signOut?n.createElement("div",{className:"hint","data-qa":"logout-or-contact-support"},n.createElement("a",{href:"#",className:"js-logout","data-action":e.action?e.action:"","data-qa":"logout"},e.text?e.text:r.get(78)),n.createElement("span",null," ",r.get(447)," "),n.createElement("a",{"data-action":e.contactSupportAction,"data-qa":"contact-support"},r.get(446))):null,e.signOut?null:n.createElement("div",{className:"hint"},n.createElement("a",{"data-action":e.contactSupportAction,"data-qa":"contact-support"},r.get(570))))}))})},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(100),o=i(113),s=i(280),r=i(529),l=i(159),c=i(175),u=i(140),d=i(128),h=i(99),p=i(102),m=i(3320),g=i(3321),_=i(103),f=i(105),v=f.ServerErrorMessage,E=f.City,b=f.User,y=i(101),k=y.ClickEvent,S=y.ViewElementEvent,w="incomplete-view",C=s.REG_FIELDS,T=l.extend({notificationScreenAccess:3,screenName:536,headerTemplate:null,init:function(){var e;T._super.init.apply(this,arguments),this._fieldTracker=new m({formName:13,fieldNamesToTypes:(e={},(0,n.default)(e,C.GENDER,3),(0,n.default)(e,C.NAME,1),(0,n.default)(e,C.LOCATION,7),(0,n.default)(e,C.BIRTHDAY,2),e)});var t=this.registerView(w,new g);a.bindAll(this,"onSubmit_","onFocusField_","onBlurField_","onSelectField_","onFocusLocation_","onBlurLocation_"),t.on("submit",this.onSubmit_),this.registerController("location-select",new r({qaData:"incomplete-profile-location"}))},onReady:function(){var e=this;T._super.onReady.apply(this,arguments),d.getInstance().get({id:o.getUserId(),clientSource:0}).then(function(t){var i=t.getCity();e.updateViews({name:t.getName(),dob:t.getDob(),locationId:i.getId(),locationName:i.getName(),gender:t.getGender()}),p.track(S,{element:322}),p.track(S,{element:315}),p.track(S,{element:260}),p.track(S,{element:33}),p.track(S,{element:321})})},updateViews:function(e){this.getView(w).update({basicInfo:e});var t=this.getController("location-select");t.updateParameters({maxResults:7,isModal:!0,placeholder:h.get(189)}),this.getView(w).setLocationChild(t.parent),e.locationId&&this.getController("location-select").updateLocation({id:e.locationId,name:e.locationName||""}),this.readyForVrt()},onStart:function(){this.getView(w).on(g.EVENTS.FOCUS_FIELD,this.onFocusField_).on(g.EVENTS.BLUR_FIELD,this.onBlurField_).on(g.EVENTS.SELECT_FIELD,this.onSelectField_),this.getController("location-select").on(r.EVENTS.FOCUS,this.onFocusLocation_).on(r.EVENTS.BLUR,this.onBlurLocation_),this.update()},onParametersUpdate:function(){this.update()},update:function(){var e=this.getParameter("clientUserDataIncomplete");if(e){var t=e.getUserFields();this.getView(w).setUserFields(t)}else _.back()},onStop:function(){T._super.onStop.apply(this,arguments),this.getView(w).off(g.EVENTS.FOCUS_FIELD,this.onFocusField_).off(g.EVENTS.BLUR_FIELD,this.onBlurField_).off(g.EVENTS.SELECT_FIELD,this.onSelectField_),this.getController("location-select").off(r.EVENTS.FOCUS,this.onFocusLocation_).off(r.EVENTS.BLUR,this.onBlurLocation_).stop()},onFocusField_:function(e){this._fieldTracker.focusField(e)},onBlurField_:function(e){this._fieldTracker.unfocusField(e)},onSelectField_:function(e){this._fieldTracker.selectField(e)},onFocusLocation_:function(){this._fieldTracker.focusField(C.LOCATION)},onBlurLocation_:function(){this._fieldTracker.unfocusField(C.LOCATION)},onSubmit_:function(e){var t=this,i=this.getView(w);i.showLoading(),p.track(k,{element:395});var n,s=e.map(function(e){return e.userField}),r=[];if(e.length||this.dismiss(),!s.includes(93)||(n=this.getController("location-select").getLocation())&&n.id){var l=new b;e.forEach(function(e){var t=e.userField,i=e.value;200===t?(l.setName(i),r.push(t)):220===t?(l.setDob(i),r.push(t)):230===t?(l.setGender(i),r.push(t)):93===t&&(l.setCity((new E).setName(n.name).setId(Number(n.id))),r.push(t))}),d.getInstance().set(l,r).then(function(){d.getInstance().invalidate(o.getUserId()),u.getInstance().invalidate(),c.getInstance().invalidate(),t.dismiss();var e=t.getParameter("callback");a.isFunction(e)&&e()}).catch(function(e){if(!(e instanceof v))throw e;var t=e.getUserFieldErrors([]);i.update({errors:t});var n=t.map(function(e){return e.getUserField()});p.trackErrorsInFields({userFields:n,eventType:6})})}else i.update({error:{fields:[93]}})},dismiss:function(){this.getView(w).dismiss(),_.back()}},"IncompleteProfileAction");e.exports=T},function(e,t,i){"use strict";function n(e){var t=(e=e||{}).formName,i=e.fieldNamesToTypes||{};(function(e){return m.isValid(e)})(t)?(this._formName=t,this._fieldNamesToTypes=i,this._currentlyFocusedField=null):g.error('Invalid form name "'.concat(t,'"'))}var a,o=i(3)(i(107)),s=i(100),r=i(280),l=i(102),c=i(12),u=i(125),d=i(344),h=i(101),p=h.FillFormEvent,m=h.FormNameEnum,g=u.getLogger("UserDetailsFormTrackingTracking"),_=new d("UserDetailsFormTrackingTracking"),f=r.REG_FIELDS,v=(a={},(0,o.default)(a,f.NAME,39),(0,o.default)(a,f.EMAIL,16),(0,o.default)(a,f.BIRTHDAY,8),(0,o.default)(a,f.GENDER,9),(0,o.default)(a,f.HERE_TO,10),(0,o.default)(a,f.LOOKING_FOR,11),(0,o.default)(a,f.PHONE,12),(0,o.default)(a,f.LOCATION,15),a),E=[3,6];s.extend(n.prototype,{_trackFieldStart:function(e){this._startTracking(),this._trackWithCustomFieldEnum(e,8,this._formName,this._uid)},_trackFieldFinish:function(e){this._startTracking(),this._trackWithCustomFieldEnum(e,9,this._formName,this._uid)},_startTracking:function(){if(!this._uid){var e,t=_.get(this._formName);t?e=t:(e=c(),_.set(this._formName,e)),this._uid=e}},finishTracking:function(){this.unfocusCurrentlyFocusedField(),_.remove(this._formName),this._uid=null},focusField:function(e){this._isValidFieldName(e)?this._isSelectableField(e)?g.error('Field "'.concat(e,'" is selectable.')):e!==this._currentlyFocusedField&&(this.unfocusCurrentlyFocusedField(),this._trackFieldStart(e),this._currentlyFocusedField=e):g.error('Invalid field name "'.concat(e,'"'))},unfocusField:function(e){this._isValidFieldName(e)?this._isSelectableField(e)?g.error('Field "'.concat(e,'" is selectable.')):e===this._currentlyFocusedField?(this._currentlyFocusedField&&this._trackFieldFinish(this._currentlyFocusedField),this._currentlyFocusedField=null):g.error('Trying to unfocus field "'.concat(e,'", but currently focused field was ').concat(this._currentlyFocusedField,".")):g.error('Invalid field name "'.concat(e,'"'))},unfocusCurrentlyFocusedField:function(){this._currentlyFocusedField&&this.unfocusField(this._currentlyFocusedField)},selectField:function(e){this._isValidFieldName(e)?this._isSelectableField(e)?(this.unfocusCurrentlyFocusedField(),this._trackFieldFinish(e)):g.error('Field "'.concat(e,'" is not selectable')):g.error('Invalid field name "'.concat(e,'"'))},_trackWithCustomFieldEnum:function(e,t,i,n){var a=this._fieldNamesToTypes[e];!function(e,t,i,n,a){l.track(p,{field_name:e,field_type:t,form_name:n,action_type:i,uid:a})}(v[e],a,t,i,n)},_isValidFieldName:function(e){return e in this._fieldNamesToTypes},_isSelectableField:function(e){var t=this._fieldNamesToTypes[e];return-1!==E.indexOf(t)}}),e.exports=n},function(e,t,i){"use strict";var n=i(100),a=i(280),o=i(141),s=i(99),r=i(111),l=i(582),c=i(226),u=i(3322),d=i(25),h=o.satisfy,p=o.createElement,m=a.REG_FIELDS,g=r("FOCUS_FIELD","BLUR_FIELD","SELECT_FIELD"),_=c.extend({className:"generic-popup qa-generic-popup form modal-content",locationContainer_:null,nameView_:null,fieldErrors_:null,hasButtons:!0,preventClosing_:!0,init:function(){this.fields_=[];var e=this.registerView("gender-view",new u);this.fieldErrors_=[],e.render([{name:"gender",value:1..toString(),label:s.get(162),qaData:"incomplete-profile-gender-male"},{name:"gender",value:2..toString(),label:s.get(161),qaData:"incomplete-profile-gender-female"}]),e.on("change",this.trigger.bind(this,g.SELECT_FIELD,m.GENDER)),this.registerView("date-select-singular",new l({qaData:"incomplete-profile-dob"})).on(l.EVENTS.FOCUS,this.trigger.bind(this,g.FOCUS_FIELD,m.BIRTHDAY)).on(l.EVENTS.BLUR,this.trigger.bind(this,g.BLUR_FIELD,m.BIRTHDAY)),this.locationContainer_=d(h("div.input__field")),this.nameView_=h("input[type=text][name=name][value=][data-qa=incomplete-profile-name]"),d(this.nameView_).attr("class","input__field").attr("placeholder",s.get(66)).on("focus",this.trigger.bind(this,g.FOCUS_FIELD,m.NAME)).on("blur",this.trigger.bind(this,g.BLUR_FIELD,m.NAME)),_._super.init.apply(this,arguments)},setLocationChild:function(e){return this.locationContainer_.html(e)},update:function(e){this.hideLoading(),e.errors&&(this.fieldErrors_=e.errors);var t=e.basicInfo;t&&(this.getChildView("date-select-singular").update({date:t.dob}),this.getChildView("gender-view").update(t.gender&&t.gender.toString()),this.nameView_.value=t.name?t.name:""),_._super.update.call(this)},setUserFields:function(e){this.userFields_=e,this.updateFieldsVisibility_()},updateFieldsVisibility_:function(){var e=this;n.forEach(this.fields_,function(t){var i=n.includes(e.userFields_,t.userField);t.element.style.display=i?"":"none"})},getContentElement:function(){this.fields_.length=0;var e=o.$satisfy("div.form-uniform");e.attr("data-qa","incomplete-profile-form");
var t=e.append(p("div",{class:"form__title","data-qa":"incomplete-profile-title"},s.get(186)),p("div",{class:"form__intro","data-qa":"incomplete-profile-subtitle"},s.get(187)),p("div",{class:"control"},this.createNameField_().element),p("div",{class:"control control--location"},this.createLocationField_().element),p("div",{class:"control has-value"},this.createBirthdayField_().element),p("div",{class:"control"},this.createGenderField_().element),p("div",{class:"form__buttons"}));return this.updateFieldsVisibility_(),t},getFieldError_:function(e){var t=this.fieldErrors_.find(function(t){return t.getUserField()===e});return t&&p("div",{class:"error"},t.getErrorMessage())},createNameField_:function(){var e=this;return this.createField_({userField:200,content:[this.nameView_,this.getFieldError_(200)].filter(Boolean),value:function(){return e.nameView_.value}})},createLocationField_:function(){var e=this;return this.createField_({userField:93,content:[this.locationContainer_[0],this.getFieldError_(93)].filter(Boolean),value:function(){return e.locationContainer_.find("input").val()}})},createBirthdayField_:function(){var e=this.getChildView("date-select-singular");return this.createField_({userField:220,content:[p("div",{class:"input__field"},e.el),p("label",{class:"control__label dob"},s.get(116)),this.getFieldError_(220)].filter(Boolean),value:function(){return e.value()}})},createGenderField_:function(){var e=this.getChildView("gender-view");return this.createField_({userField:230,content:[p("label",{class:"inline gender"},s.get(119)),e.el,this.getFieldError_(230)].filter(Boolean),value:function(){return Number(e.value())}})},createField_:function(e){var t=e.userField,i=e.content,n=e.value,a=p("div",{class:"input"},i),o={userField:t,element:p("div",{class:"control__inputs"},a),value:n};return this.fields_.push(o),o},getButtons:function(){return[{id:"submit",className:"button button--primary js-touchable qa-button",text:s.get(21)}]},getButtonContainer:function(){return this.$el.find(".form__buttons")},getRequestedFields_:function(){var e=this;return n.filter(this.fields_,function(t){var i=t.userField;return n.includes(e.userFields_,i)})},onPopupAction:function(){var e=this.getRequestedFields_().map(function(e){return{userField:e.userField,value:(0,e.value)()}});n.every(e,function(e){return e.value})&&this.trigger("submit",e)}},"IncompleteProfileAction");_.EVENTS=g,e.exports=_},function(e,t,i){"use strict";var n=i(109),a=i(141),o=i(100),s=a.createElement,r=n.extend({className:"radio-group",inputType_:"radio",init:function(){this.$el.on("change",this.handleChange_)},update:function(e){return o.isString(e)?this.$('input[value="'.concat(e,'"]')).prop("checked",!0):o.isObject(e)&&(e.reset&&o.each(this.$("input"),function(e){e.checked=!1}),o.isBoolean(e.multiple)&&(this.inputType_=e.multiple?"checkbox":"radio")),this},handleChange_:function(e){e.stopPropagation(),this.trigger("change")},render:function(e){var t=a.removeForEdit(this.el);this.$el.empty();for(var i=0,n=e.length;i<n;i++){var r=e[i],l=o.uniqueId("radio-"),c=s("input",{id:l,type:this.inputType_,name:r.name,value:r.value,className:"checkbox"});r.qaData&&c.setAttribute("data-qa",r.qaData),this.$el.append(s("label",{for:l},[c,r.label]))}return t(),this},value:function(){var e=this.$("input:checked");return"checkbox"===this.inputType_?o.map(e,function(e){return e.getAttribute("value")}):e.attr("value")}},"RadioGroup");e.exports=r},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(100),s=i(213),r=i(228),l=i(260),c=i(121),u=i(103),d=i(113),h=i(3324),p=i(124),m=i(148),g=i(136),_=(n={},(0,a.default)(n,1,"adaptor-facebook"),(0,a.default)(n,2,"adaptor-vkontakte"),(0,a.default)(n,3,"adaptor-odnoklassniki"),(0,a.default)(n,4,"adaptor-google"),(0,a.default)(n,12,"adaptor-instagram"),(0,a.default)(n,14,"adaptor-linkedin"),(0,a.default)(n,15,"adaptor-twitter"),n),f=c.extend({clientSource:5,headerTemplate:null,createElement:function(){return g({qaAttribute:"try-for-free"})},productId_:null,init:function(){f._super.init.apply(this,arguments),m(this),this.registerView(1,new h).on(h.ACTIONS.SHARE,this.onShare_)},onStart:function(e){return f._super.onStart.apply(this,arguments),this.getView(1).appendTo(this.parent).showLoading(),this.sharedPhotoId_=e.photoId,this.source_=e.source,this.sharedPhotoId_?void l.fetchSharingProviders({userId:d.getUserId(),photoId:this.sharedPhotoId_,context:5}).then(this.onProvidersReceived_).catch(this.onFail_):(this.onFail_("No image to share"),void u.goBackTo(this.source_))},onProvidersReceived_:function(e){if(e.getProviders()){var t="";this.providers_=e.getProviders();var i=o.map(this.providers_,function(e){if(o.isEmpty(t)){var i=e.getDisplayImages();t=o.isArray(i)&&i.length>0?i[0]:""}var n=e.getExternalProviderDetails();return{providerType:n.getType(),providerName:_[n.getType()],displayName:n.getDisplayName()}});this.getView(1).hideLoading(),this.getView(1).update({badge:{image:t},externalProviders:i}),l.checkPendingShares("SpotlightForSharing",this.onShared_)}else this.onFail_("fail to get CLIENT_SOCIAL_SHARING_PROVIDERS.")},onShare_:function(e,t){this.getView(1).showLoading();var i=this.providers_.find(function(t){return t.getExternalProviderDetails().getType()===e});if(i){var n={id:"SpotlightForSharing",noLoginAttempts:t};l.share(i,n,this.onShared_)}else this.onFail_("No provider with type ".concat(e))},onShared_:function(e,t,i,n){if(n||!i)this.onSoftFail_();else if(i){var a=d;s.onProfileShared(a.getUserId(),e,t,{clientSource:5}),r.purchase({productType:28,featureType:35,purchaseTransactionSetup:{uid:"HON_SPOTLIGHT_TRIAL",provider:115,sharingProviderType:t,photoId:this.sharedPhotoId_},success:this.onPurchased_,error:this.onFail_})}},onPurchased_:function(){var e=this;this.getView(1).showLoading(),setTimeout(function(){u.goBackTo(e.source_)},800)},onSoftFail_:function(){this.getView(1).hideLoading()},onFail_:function(e,t){this.onSoftFail_(),this.log.error("Try for Free error:",e,t),p.showNotification({type:p.TYPES.ERROR,text:t||e})},requiresPortrait:function(){return!0}},"TryForFreeController");e.exports=f},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(3325),s={SHARE:1},r=a.extend({events:{"click .js-action-provider-click":"onProviderClick_"},update:function(e){this.render(e),r._super.update.apply(this,arguments)},render:function(e){this.$el.html(o.render(e))},onProviderClick_:function(e,t){var i=Number(n(t).data("type")||0);this.trigger(s.SHARE,i)}},"TryForFree");r.ACTIONS=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(137),o=i(99),s=i(106);e.exports=i(108)("SpotlightSharing",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__header"},n.createElement(a,{back:"true",noFake:!0,extraClass:"navigation-bar--transparent"}),e.badge?n.createElement("div",{className:"spotlight-sharing__badge"},n.createElement("div",{className:"multimedia"},n.createElement("div",{className:"multimedia__image",style:{backgroundImage:"url('".concat(e.badge.image,"')")}}))):null),n.createElement("div",{className:"layout__content layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__content"},o.get(257)),n.createElement("div",{className:"cta-box__content cta-box__content--wide"},n.createElement("div",{className:"spotlight-sharing__providers_"},e.externalProviders.map(function(e){return n.createElement("div",{className:"spotlight-sharing__provider js-action-provider-click","data-type":e.providerType},n.createElement("div",{className:"brick"},n.createElement("div",{className:"brick__icon"},n.createElement(s,{name:e.providerName,size:"stretch"})),n.createElement("div",{className:"brick__text"},n.createElement("div",{className:"brick__label"},e.displayName))))}))))))})},function(e,t,i){"use strict";var n=i(3327),a=i(605).extend({folderId:9,View:n,profileRouteName_:"blocked",activationPlace:25,clientSource:24},"BlockedUsers");e.exports=a},function(e,t,i){"use strict";var n=i(99),a=i(604),o=i(3328),s=i(3329),r=a.extend({actionButtonText_:n.get(8),template:o,templateItem:s,getEditingTitle_:function(){return this.isEditMode_?n.get(294):n.get(143)}},"BlockedUsers");e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(137),s=i(134),r=i(133),l=i(130),c=i(185),u=i(138),d=i(106);e.exports=i(108)("BlockedUsers",function(e){return n.createElement(r,null,n.createElement(u,null,n.createElement(o,{back:"true",scrollToggle:"1",scrollToggleClass:"navigation-bar--shadow",title:e.title,secondary:n.createElement("button",{className:"navigation-bar__button-text js-button-edit","data-qa":"navbar-link"},e.buttonText)})),n.createElement(l,{hpadded:!0,vpadded:!0},n.createElement("div",{className:"users-folder qa-avatar-list"},n.createElement("div",{className:"users-folder__list"},e.user.map(function(e){return n.createElement("div",{className:"users-folder__item js-user",key:e.userId},n.createElement("div",{className:"users-folder__user"},n.createElement("div",{className:"brick brick--xlg js-select-user","data-user-id":e.userId},e.image?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({src:e.image,width:90}),"')")}}):n.createElement("div",{className:"brick__icon"},e.isMale?n.createElement(d,{name:"avatar-placeholder-male",size:"stretch"}):e.isFemale?n.createElement(d,{name:"avatar-placeholder-female",size:"stretch"}):n.createElement(d,{name:"avatar-placeholder-unknown",size:"stretch"})),n.createElement("div",{className:"brick__checkbox"},n.createElement(d,{name:"generic-tick",size:"lg"})),n.createElement("div",{className:"brick__badge brick__badge--bc"},e.match?n.createElement(d,{name:"badge-feature-liked-you",size:"md",shadow:!0}):null),n.createElement("div",{className:"brick__text qa-avatar-label"},n.createElement("div",{className:"brick__name"},e.name),e.status?n.createElement("div",{className:"brick__status"},e.online?n.createElement("i",{className:"online-status online-status--online"}):null,e.offline?n.createElement("i",{className:"online-status online-status--offline"}):null,e.idle?n.createElement("i",{className:"online-status online-status--idle"}):null):null))))}),e.more?n.createElement("div",{className:"users-folder__item js-more",key:"more"},n.createElement("div",{className:"users-folder__user"},n.createElement("div",{className:"brick brick--xlg"},n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('/img/photos/placeholders/looking-for-both.png')"}}),n.createElement("div",{className:"brick__fade"},n.createElement(d,{name:"generic-ellipsis",size:"lg"})),n.createElement("div",{className:"brick__badge brick__badge--bc"}),n.createElement("div",{className:"brick__text"},n.createElement("div",{className:"brick__label js-more-text"},e.moreText))))):null))),n.createElement(c,null,n.createElement("div",{className:"floating-action is-inactive js-action"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{type:"red",extraClass:"js-action js-action-button js-button-text"})))))),n.createElement("div",{className:"fake"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{type:"red",extraClass:"js-action js-action-button js-button-text"}))))))))})},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106);e.exports=i(108)("BlockedUsersItem",function(e){return e.user.map(function(e){return n.createElement("div",{className:"users-folder__item js-user",key:e.userId},n.createElement("div",{className:"users-folder__user"},n.createElement("div",{className:"brick brick--xlg js-select-user","data-user-id":e.userId},e.image?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({src:e.image,width:90}),"')")}}):n.createElement("div",{className:"brick__icon"},e.isMale?n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}):e.isFemale?n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}):n.createElement(o,{name:"avatar-placeholder-unknown",size:"stretch"})),n.createElement("div",{className:"brick__checkbox"},n.createElement(o,{name:"generic-tick",size:"lg"})),n.createElement("div",{className:"brick__badge brick__badge--bc"},e.match?n.createElement(o,{name:"badge-feature-liked-you",size:"md",shadow:!0}):null),n.createElement("div",{className:"brick__text qa-avatar-label"},n.createElement("div",{className:"brick__name"},e.name),e.status?n.createElement("div",{className:"brick__status"},e.online?n.createElement("i",{className:"online-status online-status--online"}):null,e.offline?n.createElement("i",{className:"online-status online-status--offline"}):null,e.idle?n.createElement("i",{className:"online-status online-status--idle"}):null):null))))})})},function(e,t,i){"use strict";var n=i(109),a=i(3331),o=n.extend({init:function(){var e=a.render();this.$el.html(e),this.$el.find(".js-page-header").html(this.options.header)},changeSearchState:function(e){this.$el.toggleClass("is-searching",e),this.$(".js-page-header").toggleClass("hidden",e)},setContent:function(e){return this.$(".js-footer-element").empty(),this.$(".js-page-content").html(e)},setFaded:function(e){this.$(".js-page-content").toggleClass("is-faded",e)}},"DiscoverPageView");e.exports=o},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("Discover",function(e){return n.createElement("div",{className:"layout layout--stretched-content h-tabbar-affected js-screen-container trigger-header-collapse is-minimised"},n.createElement("div",{className:"layout__header js-page-header"}),n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded js-page-content ".concat(e.isFaded?" is-faded ":"")}),n.createElement("div",{className:"layout__footer js-footer-element"}))})},function(e,t,i){"use strict";function n(e){return void 0!==e&&e>=D}var a=i(3)(i(4)),o=i(100),s=i(113),r=i(132),l=i(99),c=i(179),u=i(199),d=i(347),h=i(227),p=i(528),m=i(124),g=i(368),_=i(142).openPage,f=i(3333),v=i(3336),E=i(140),b=i(128),y=i(222),k=i(196),S=i(103),w=S.getUrl,C=S.navigate,T=i(3339),P=i(102),N=i(167),I=i(460),x=i(101),A=x.ClickEvent,O=x.ClickBannerEvent,V=x.ViewBannerEvent,R=x.NotificationEvent,B=x.ViewElementEvent,L=i(530),F=i(309),M=v.VIEW_NAME,D=100,U=v.extend({clientSource:2,screenName:2,activationPlace:3,construct:function(e){U._super.construct.call(this),this.users_=[],this.headerController_=e.header,this.onOpenFilter_=e.onOpenFilter,this.navigateToPopularity_=e.onClickPopularity,this.preventNotifications_=e.preventNotifications,this.allowNotifications_=e.allowNotifications,this.onOnboardingTooltipShown_=e.onOnboardingTooltipShown,this.isOnboardingTooltipShown_=e.isOnboardingTooltipShown,this.onInteractive_=e.onInteractive,this.getNavigationBarContext_=e.getNavigationBarContext,this.onScreenNameChange=e.onScreenNameChange},getNavigationBarContext:function(e){var t=this.getNavigationBarContext_();return e===v.ERROR_SCREEN&&(t.actions.location=!1),t},id:"people-nearby-page",needsSearchSettings:!0,folderId_:E.TYPES.PEOPLE_NEARBY,partialResponse:!0,defaultTitle_:l.get(420),settingsContext_:2,jinbaName:"PeopleNearby",userShowsOnlineStatus_:!1,init:function(){var e=this;U._super.init.apply(this,arguments),this.noResultsController_=new f,this.onboardingTipsController_=this.registerController(h.getInstance()),this.observe(r.getObservable(19),function(t){return e.onSPPFeature_(t)},{leading:!1}),y.on(y.EVENTS.CHANGE,function(t){e.getView(M).setShowCredits(n(t))}),N.getInstance().on(N.Type.NOTIFICATION,this.onNotification_)},initView_:function(){var e=this,t=new T({header:this.headerController_}).on(T.EVENTS.FETCH,this.fetchFolder_).on(T.EVENTS.USER_SELECT,this.userSelected_).on(T.EVENTS.OPEN_FILTER,this.onOpenFilter_).on(T.EVENTS.PRODUCT_SELECT,this.onPromoSelected_);return this.once("start",function(){e.onFolderReceived_({page:1},[g.getPlaceholderUserList(29)],{placeholders:!0})}),t},onStart:function(){U._super.onStart.apply(this,arguments),u.on(u.EVENTS.END_PAYMENT,this.onEndPayment_),this.getView(M).on(T.EVENTS.BANNER_VIEWED,this.onBannerViewed_),this.getView(M).reRenderBanners(),this.navigatedBack&&this.lastLoadedUserId_&&this.getView(M).showUser(this.lastLoadedUserId_),P.track(B,{element:56}),h.hasTooltipsToSee(this.clientSource)&&this.onboardingTipsController_.setContext(this.clientSource),this.openedProfileId_&&this.navigatedBack&&this.openProfile_({id:this.openedProfileId_})},getPromoBlockPositionsArray_:function(e,t){return o.map(Array(e),function(){return t})},getFetchOptions:function(e){e=e||{};var t,i=this.getView(M),n=i.getBannerTypes(),a=i.getBannersCount();t=e.page?Math.ceil(this.users_.length/i.getSectionSize())-a:0;var o=3+t;return{preferredCount:this.getUserPerRequest(),promoBlockRequestParams:[{position:1,shownPromoBlocks:n||[],count:o>0?o:0}]}},getUserPerRequest:function(){return 3*this.getView(M).getSectionSize()},setup_:function(){var e=this;this.lastLoadedUserId_=!1,k.getInstance().get().then(function(t){var i=(0,a.default)(t,1)[0];i&&i.hasPrivacyShowOnlineStatus()&&(e.userShowsOnlineStatus_=i.getPrivacyShowOnlineStatus());var n={page:1};e.addActivityFilter(n),e.getView(M).removeStoredBanners(),U._super.setup_.call(e,[b.getInstance().get({id:s.getUserId(),clientSource:e.clientSource}),y.get()],n)},function(e){if(!F(e))throw e})},getFoldersModelSource:function(){return 117},updateView_:function(e){e.focus=this.focus_,U._super.updateView_.call(this,e)},onStop:function(){u.off(u.EVENTS.END_PAYMENT,this.onEndPayment_),this.getView(M).off(T.EVENTS.BANNER_VIEWED,this.onBannerViewed_),this.lastLoadedUserId_=void 0,this.onboardingTipsController_&&(this.onboardingTipsController_.off(h.ACTIONS.REQUEST_SHOW_TOOLTIP,this.showNextOnboardingTooltip_,this).off(h.ACTIONS.PERFORM_ACTION,this.performActionTooltip_,this).off(h.ACTIONS.TOOLTIP_DISMISSED,this.allowNotifications_,this),this.onboardingTipsEvents_=!1),this.openedProfileId_&&c.trigger(c.CLOSE_PROFILE)},onSPPFeature_:function(e){e.getEnabled()&&this.getView(M).replaceBanners({actionType:6})},onGetFolder_:function(e,t,i,a,o){var s=i[0]&&i[0].getCurrentSettings(),r=this.focus_={label:a.getName(),isHomeLocation:void 0===s.getLocationId()},l=a.getProfilePhoto()||null,c=l&&l.getPreviewUrl();c&&c.trim().length?r.image=c:r.gender=1===a.getGender()?"male":"female",this.getView(M).setShowCredits(n(o)),U._super.onGetFolder_.apply(this,arguments),this.onInteractive_()},addActivityFilter:function(e){var t=p.get();return this.userShowsOnlineStatus_||"ONLINE"!==t||(t="ALL"),t&&void 0!==L[t]&&(e.activityFilter=L[t]),e},fetchFolder_:function(e){this.addActivityFilter(e);var t=e.page,i=Object.assign({},e,{offset:this.getUserPerRequest()*(t-1)},this.getFetchOptions({page:t}));U._super.fetchFolder_.call(this,i)},onFolderReceived_:function(e,t,i){this.loadedPages_=e.page,U._super.onFolderReceived_.apply(this,arguments),this.sections_[0]||this.promoBlock_||this.showNoResultsScreen_(),o.get(i,"placeholders")||this.addUsers_(e,this.sections_)},addUsers_:function(e,t){if(t){var i=o.get(e,"offset",0),n=o.flatten(t.map(function(e){return e.getUsers()}));n&&(this.users_=o.take(this.users_,i),this.users_=this.users_.concat(n)),h.hasTooltipsToSee(this.clientSource)&&(this.onboardingTipsEvents_||(this.onboardingTipsEvents_=!0,this.onboardingTipsController_.on(h.ACTIONS.REQUEST_SHOW_TOOLTIP,this.showNextOnboardingTooltip_,this).on(h.ACTIONS.PERFORM_ACTION,this.performActionTooltip_,this).on(h.ACTIONS.TOOLTIP_DISMISSED,this.allowNotifications_,this)),this.showNextOnboardingTooltip_())}},showNoResultsScreen_:function(){this.isStarted()&&(this.populated_=!1,_(this.noResultsController_))},onFail_:function(e){m.showNotification({type:m.TYPES.ERROR,text:e})},userSelected_:function(e){this.openProfile_(e),P.track(A,{element:21})},openProfile_:function(e){var t=this,i=e.id,n={id:i,user:this.users_.find(function(e){return e.getUserId()==="".concat(i)}),onLoad:this.handleUserLoaded_.bind(this),onOpenProfile:function(e){return t.openProfile_({id:e})},onScreenNameChange:this.onScreenNameChange,onClose:this.closeProfile_.bind(this)};I.hit(),I.isActive()?(this.openedProfileId_=i,n.id="".concat(n.id),n.user=n.user?n.user.toJSON():{},c.trigger(c.OPEN_PROFILE,n)):C("nearby",this.addActivityFilter(n))},closeProfile_:function(){this.getView(M).showUser(this.openedProfileId_),this.openedProfileId_=null},handleUserLoaded_:function(e){this.lastLoadedUserId_=e,o.some(this.users_,function(t){return t.getUserId()===e})||this.fetchFolder_({page:this.loadedPages_+1})},onPromoSelected_:function(e){65===e.type&&P.track(A,{element:547}),165===e.type&&P.track(A,{element:288,parent_element:14}),22===e.product&&P.track(R,{notification_type:2,notification_action_type:2,banner_id:e.type});var t,i={banner_id:e.type},n=e.promoBlock;n&&n.getPromoBlockPosition&&(i.position_id=n.getPromoBlockPosition()),P.track(O,i,!0),63===e.actionType&&n&&((t=n.getRedirectPage())||304!==e.type||(t=u.getRedirectPageFromPromoBlock(n))),u.handlePromoSelected({action:e.actionType,banner:e.type,cost:e.cost,productType:e.productType,activationPlace:this.activationPlace,destination:w(),redirectPage:t},{from:w(),context:2},{onAction:this.onBannerAction_.bind(this,e.id)})},onBannerAction_:function(e,t){60===t&&this.getView(M).hideLoaders(),this.getView(M).replaceBanners({actionType:t,actionBannerId:e})},onNotification_:function(e){3===e.getType()&&this.getView(M).replaceAllBanners()},onEndPayment_:function(e){var t=!o.get(e,"error");this.handlePurchaseCompleted_(t)},handlePurchaseCompleted_:function(e){this.isStarted()&&(e||m.showNotification({type:m.TYPES.ERROR}))},onBannerViewed_:function(e){if(e&&!e.googleAd)return 65===e.type||304===e.type?(P.track(V,{banner_id:e.promoBlock.getPromoBlockType(),position_id:e.promoBlock.getPromoBlockPosition()}),void d.reportShow(2,e.promoBlock)):165===e.type?(P.track(V,{banner_id:e.promoBlock.getPromoBlockType(),position_id:e.promoBlock.getPromoBlockPosition()}),void P.track(B,{element:14})):void P.track(R,{activation_place:this.activationPlace,banner_id:e.type,notification_action_type:1,notification_type:2})},showNextOnboardingTooltip_:function(){this.isStarted()&&!this.isOnboardingTooltipShown_()&&(this.preventNotifications_(),this.onboardingTipsController_.showNextTooltip({firstBump:this.getView(M).getFirstBump(),greetingWrapper:this.getView(M).getGreetingWrapper()})?this.onOnboardingTooltipShown_():this.allowNotifications_())},performActionTooltip_:function(e){switch(e){case 12:var t=this.getView(M).getFirstBump();t&&t.click();break;case 9:this.onOpenFilter_();break;case 8:this.navigateToPopularity_()}}},"PeopleNearbyController");e.exports=U},function(e,t,i){"use strict";var n=i(159),a=i(279),o=i(156),s=i(3334),r=i(103),l=i(102),c=i(607),u=i(221),d=i(101),h=d.ViewElementEvent,p=d.ClickEvent,m=n.extend({headerTemplate:c,transition:!1,searchCriteriaController_:null,clientSource:2,init:function(){m._super.init.apply(this,arguments),this.nearbyNoResultsView_=this.registerView(new s).on(s.EVENTS.CHANGE_FILTER,this.showFilterSettings_,this)},onStart:function(){var e=this;m._super.onStart.apply(this,arguments),u.show(),this.searchCriteriaController_||(this.searchCriteriaController_=new a({onCloseButtonClick:function(){return e.searchCriteriaController_.stop()},onSaveButtonClick:function(){return e.updateFilter_()},searchType:2})),this.nearbyNoResultsView_.appendTo(this.parent),this.trackScreenView_()},onStop:function(){m._super.onStop.apply(this,arguments),u.hide(),this.searchCriteriaController_&&this.searchCriteriaController_.stop()},updateFilter_:function(){var e=this;this.searchCriteriaController_.save().then(function(){e.searchCriteriaController_.stop(),r.navigate("people-nearby",!0)})},onNavigationAction:function(e){e!==o.LOCATION?m._super.onNavigationAction.apply(this,arguments):this.showFilterSettings_()},attachFilterView_:function(){this.searchCriteriaController_.start()},showFilterSettings_:function(){this.trackButtonClick_(),this.attachFilterView_()},trackScreenView_:function(){l.track(h,{element:70})},trackButtonClick_:function(){l.track(p,{element:62,parent_element:70})}},"NearbyNoResultsController");e.exports=m},function(e,t,i){"use strict";var n=i(109),a=i(5),o=i(111),s=i(3335),r=i(126),l=o("CHANGE_FILTER"),c=n.extend({events:{"click .js-change-filter":"handleChangeFilterLinkClick_"},init:function(){this.render()},render:function(){this.$el.html(s.render({navigationActions:{menu:!a.supportsTabBar,location:!0},partner_id:r.get("partner_id")}))},handleChangeFilterLinkClick_:function(e){e.preventDefault(),this.trigger(l.CHANGE_FILTER)}},"NearbyNoResultsView");c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(137),o=i(106),s=i(99),r=i(134);e.exports=i(108)("PeopleNearbyNoResults",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__header"},n.createElement(a,{actions:e.navigationActions,logo:!0,partner_id:e.partner_id})),n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"zero-image"},n.createElement(o,{name:"zero-search-criteria",size:"stretch"}))),n.createElement("div",{className:"cta-box__header cta-box__header--lg",dangerouslySetInnerHTML:{__html:s.get(491)}}),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(r,{type:"transparent",size:"lg",extraClass:"js-change-filter",text:s.get(213)})))))))})},function(e,t,i){"use strict";var n,a=i(3),o=a(i(168)),s=a(i(127)),r=a(i(107)),l=i(100),c=i(141),u=i(187),d=i(140),h=i(406),p=i(129),m=i(121),g=i(197),_=i(3337),f=i(368),v=i(148),E=i(105).ClientUserList,b="folder-view",y=(n={},(0,r.default)(n,8,7),(0,r.default)(n,10,43),(0,r.default)(n,6,6),n),k=p.extend({screenName:204,activationPlace:1,clientSource:0,folderId_:null,fetching_:!1,populated_:!1,blockingWrapper_:null,reloaderFolder_:null,needsSearchSettings:!1,partialResponse:!1,settingsContext_:1,sections_:null,session_:0,construct:function(){k._super.construct.call(this),this.element=c.$satisfy("div")},init:function(){return v(this),null===this.folderId_?this:(this.registerView(b,this.initView_()),this.foldersModel_=new d({folderId:this.folderId_}).on(d.EVENTS.INVALIDATED,this.onFoldersInvalidated_,this),this.foldersModel_.setClientSource(this.getFoldersModelSource()),this.jinba=new u(this.jinbaName),this)},getFoldersModelSource:function(){return this.clientSource},onFoldersInvalidated_:function(e){if(l.isObject(e)&&l.isArray(e.keys)&&(l.isEmpty(e.keys)||-1!==e.keys.indexOf(this.folderId_)))if(this.isStarted()||e.metaDataOnly)if(e.peopleIds){var t=this.getView(b);l.each(e.peopleIds,t.removeNewBadge,t)}else this.setup_();else this.populated_=!1},initView_:function(){},onStart:function(){this.addViews_(),this.navigatedBack&&this.populated_&&!this.placeholders_||this.setup_()},addViews_:function(){var e=this.element;this.getView(b).appendTo(e),this.usesReloader()&&this.getView("reloader").appendTo(e),this.blockingWrapper_||(this.blockingWrapper_=c.$satisfy("div")),this.blockingWrapper_.appendTo(e)},clear_:function(){this.populated_=!1,this.setFetchingState_(!1);var e=this.getView(b);l.isFunction(e.clear)&&e.clear()},setup_:function(e,t){var i=this;if(this.populated_&&this.jinba.stop(),!this.fetching_){this.populated_||this.getView(b).showLoading(),this.setFetchingState_(!0);var n=++this.session_;t=t||{},t=(0,s.default)({},t,this.getFetchOptions());var a=[this.foldersModel_.trackNext().fetch(t)];this.needsSearchSettings&&a.push(h.getInstance().get(this.settingsContext_)),l.isArray(e)&&(a=a.concat(e)),Promise.all(a).then(function(e){n===i.session_&&i.onGetFolder_.apply(i,[t].concat((0,o.default)(e)))},this.onFolderError_)}},getFetchOptions:function(){return{}},onGetFolder_:function(e,t,i){i&&(this.searchSettings_=i[0]),this.setFetchingState_(!1),t.fromCache&&this.isStarted()?d.getInstance().invalidateFolder(this.folderId_):(this.onFolderReceived_(e,t),this.getView(b).hideLoading(),this.element.attr("data-vrt-ready","true"))},fetchFolder_:function(e){var t=this;if(!this.fetching_&&this.populated_){this.setFetchingState_(!0),l.isObject(e)&&(e.source=this.clientSource);var i=this.session_;this.foldersModel_.fetch(e,!1,this.partialResponse).then(function(n){i===t.session_&&t.onFolderReceived_(e,n)},this.onFolderError_)}},setFetchingState_:function(e){this.fetching_=e},updateView_:function(e){this.updateView(b,e)},onFolderReceived_:function(e,t,i){i=i||{},this.setFetchingState_(!1);var n=null;if(t&&l.isArray(t)&&1===t.length&&t[0]instanceof E&&(n=t[0]),n){var a=this.sections_=n.getSection([]),o=a.reduce(function(e,t){return e&&0===t.getUsers([]).length},!0),s=a[0],r=n.getPromoBanners()||[];if(this.promoBlock_=l.find(r,function(e){return 13===e.getPromoBlockPosition()}),s){if(this.blockingWrapper_&&this.blockingWrapper_.addClass("hidden"),this.updateView_({userList:n,hasMoreData:f.hasMoreData(n),fetchOpts:e,searchSettings:this.searchSettings_}),!this.populated_&&!s.isPlaceholder){var c=this.element.find(".js-user-image").get();this.jinba.waitForImageReadyCriteria(c.map(function(e){return e.getAttribute("src")})).stop()}this.populated_=!0,this.placeholders_=i.placeholders}else this.populated_=!1,this.updateView_({userList:null,fetchOpts:e}),this.promoBlock_?(this.blockingWrapper_.removeClass("hidden"),this.initBlockerController()):this.blockingWrapper_&&this.blockingWrapper_.addClass("hidden"),o&&this.jinba.stop()}else this.populated_=!1},initBlockerController:function(){if(!this.getController("blcoking-controller")){var e=new _(this.blockingWrapper_);this.registerController("blcoking-controller",e)}this.getController("blcoking-controller").updateParameters({promoBlock:this.promoBlock_,activationPlace:this.activationPlace,clientSource:this.clientSource})},onFolderError_:function(e){var t=this;this.getView(b).hideLoading(),this.setFetchingState_(!1),this.clear_();var i=g.handleError({error:e,screenName:this.screenName,navigationBar:this.getNavigationBarContext(1)});if(!i)throw e;i.on(i.EVENTS.REFRESH,function(){return t.setup_()})},goToPayments_:function(){},onReloadClick_:function(){this.getView(b).scrollToTop(250),this.setup_()},usesReloader:function(){return null!==this.reloaderFolder_},getSection:function(e){if(this.sections_)return l.find(this.sections_,function(t){return t.getSectionId()===e})},getFeatureForSection_:function(e,t){var i=e&&e.getUserFeature();return i&&i.getFeature()||t},getPromoBlockTypeForSection_:function(e,t){return y[e.getSectionType()]||t}},"AbstractFolderPage");l.assign(k,{TYPES:{DISCRETE:"discrete",CONTINUOUS:"continuous"},EVENTS:{RELOAD:"reload"},SCREEN_NAME:m.SCREEN_NAME,BUTTONS:m.BUTTONS,VIEW_NAME:b,ERROR_SCREEN:1}),e.exports=k},function(e,t,i){"use strict";var n=i(129),a=i(208),o=i(149),s=i(207),r=i(103),l=i(608),c=i(124),u=i(148),d="blocking-screen-view",h=n.extend({construct:function(e){h._super.construct.call(this),this.parent=e},init:function(){u(this),this.registerView(d,new l).on(l.EVENTS.ACTION,this.onAction_)},onStart:function(){h._super.onStart.apply(this,arguments),this.setup_()},onStop:function(){h._super.onStop.apply(this,arguments),this.getView(d).clear()},onParametersUpdate:function(){h._super.onParametersUpdate.apply(this,arguments),this.setup_()},setup_:function(){var e=this.getParameter("promoBlock");if(e){var t=e.getOkAction(),i=!!t&&{text:e.getAction(),action:t,productType:e.getOkPaymentProductType()},n=e.getOtherAction(),a=!!n&&{text:e.getOtherText(),action:n},o=l.TYPES.NO_USERS;26===this.getParameter("clientSource")?o=l.TYPES.NO_MESSAGES:2===t&&(o=l.TYPES.NO_PHOTO),
this.updateView(d,{header:e.getHeader(),message:e.getMssg(),primary:i,secondary:a,type:o}),this.getView(d).appendTo(this.parent)}},onAction_:function(e){if(e){o.generate();var t=this.getParameter("promoBlock"),i=(new s).setAction(e).setPromoBlockType(t.getPromoBlockType()).setBack(r.getUrl());a.isPaymentAction(e)&&i.setPaymentFlowId(o.get()).setProductType(t.getOkPaymentProductType()).setHotPanelData({activationPlace:this.getParameter("activationPlace")}),a.handleAction(i).catch(this.onFail_)}else this.log.error("Empty action")},onFail_:function(e){c.showNotification({type:c.TYPES.ERROR,text:e})}},"BlockingScreenController");e.exports=h},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('    <div class="layout layout--centered-content"><div class="layout__content layout__content--hpadded layout__content--vpadded"><div class="cta-box"><div class="cta-box__content"><div class="zero-image">').h("select",t,{block:i},{key:r},"h").w("</div></div>").x(t.get(["title"],!1),t,{block:l},{}).x(t.get(["message"],!1),t,{block:c},{}).w('<div class="cta-box__buttons"><div class="button-wrapper">').s(t.get(["primary"],!1),t,{block:u},{}).s(t.get(["secondary"],!1),t,{block:p},{}).w("</div></div></div></div></div>")}function i(e,t){return e.h("eq",t,{block:n},{value:"no-messages"},"h").h("eq",t,{block:a},{value:"no-users"},"h").h("eq",t,{block:o},{value:"no-photo"},"h").h("eq",t,{block:s},{value:"import"},"h")}function n(e,t){return e.h("Icon",t,{},{name:"zero-conversations",size:"stretch"},"h")}function a(e,t){return e.h("Icon",t,{},{name:"zero-conversations",size:"stretch"},"h")}function o(e,t){return e.h("Icon",t,{},{name:"zero-conversations",size:"stretch"},"h")}function s(e,t){return e.h("Icon",t,{},{name:"zero-conversations",size:"stretch"},"h")}function r(e,t){return e.f(t.get(["type"],!1),t,"h")}function l(e,t){return e.w('<div class="cta-box__header cta-box__header--lg">').f(t.get(["title"],!1),t,"h").w("</div>")}function c(e,t){return e.w('<div class="cta-box__content">').f(t.get(["message"],!1),t,"h").w("</div>")}function u(e,t){return e.w('<div class="button-wrapper__item">').h("Button",t,{attrs:d,block:h},{type:"primary",text:t.get(["text"],!1),extraClass:"js-action"},"h").w("</div>")}function d(e,t){return e.w('data-action="').f(t.get(["action"],!1),t,"h").w('"')}function h(e,t){return e}function p(e,t){return e.w('<div class="button-wrapper__item">').h("Button",t,{attrs:m,block:g},{type:"secondary",text:t.get(["text"],!1),extraClass:"js-action"},"h").w("</div>")}function m(e,t){return e.w('data-action="').f(t.get(["action"],!1),t,"h").w('"')}function g(e,t){return e}return e.register("blocking-screen",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";function n(e){_(e.find(".js-user-image"))}var a=i(100),o=i(25),s=i(162),r=i(109),l=i(421),c=i(176),u=i(367),d=i(221),h=i(609),p=i(218),m=i(3340),g=i(111),_=i(203),f=i(611),v=i(612),E=i(3341),b=i(184),y=i(347),k=r.extend({scroll_:null,isLargeScreen_:!1,largeScreenTreshold_:559,sectionSize_:18,sectionSizeLarge_:30,contentElement_:null,contentHeight_:null,userCounter_:null,totalUsers_:null,oldTitle_:null,usersForNextSection_:null,events:{"click .js-user-avatar":"onUserClick_","click .js-people-nearby-banner":"onBannerClick_"},init:function(){this.reset_=this.reset_.bind(this),this.banners_=new m},enable:function(){return this.scroll_&&this.scroll_.start(),this.updateLayout_(),this.startUIEvents_(),b.enabledChangeEvent.subscribe(this.reset_),k._super.enable.apply(this,arguments)},disable:function(){return this.scroll_&&this.scroll_.stop(),this.stopUIEvents_(),b.enabledChangeEvent.unsubscribe(this.reset_),k._super.disable.apply(this,arguments)},ensureLoaderCreated_:function(){this.loader_||(this.loader_=p(o(".js-screen-container")[0]))},startUIEvents_:function(){this.hasUIEvents_&&this.stopUIEvents_(),s.on(s.EVENTS.RESIZE,this.updateLayout_,this),this.hasUIEvents_=!0},stopUIEvents_:function(){this.hasUIEvents_&&(s.off(s.EVENTS.RESIZE,this.updateLayout_,this),this.hasUIEvents_=!1)},getBannerTypes:function(){return this.banners_.getBannerTypes()},hideLoaders:function(){this.areBannersLoading_&&(this.areBannersLoading_=!1,this.$el.find(".js-people-nearby-banner .js-button").toggleClass("is-loading",this.areBannersLoading_))},replaceBanners:function(e){var t=e.actionType,i=e.actionBannerId;this.banners_.replace({actionType:t,actionBannerId:i}).then(this.replaceBanners_)},replaceAllBanners:function(){this.banners_.replaceAll().then(this.replaceBanners_)},update:function(e){var t=this;if(!e.userList)return this.scroll_&&(this.scroll_.destroy(),this.scroll_=null),void this.$el.empty();var i=e.fetchOpts.page;if(1===i)this.updateFirstPage_(e),this.contentHeight_=this.contentElement_.height(),this.hideLoading();else{var o=this.scroll_;if(o.canInsertPage(i)){this.banners_.appendBannersFromUserList(e.userList);var s=v.render({userpic:this.hasUserpic_,section:this.getSectionsData_(e)});n(s);var r=a.filter(s,function(e){return e.nodeType===Node.ELEMENT_NODE});setTimeout(function(){o.canInsertPage(i)&&(o.setHasMore(e.hasMoreData).insert(r,i),t.contentHeight_=t.contentElement_.height(),b.render())},1)}}this.updateCounters_(e),1===i&&this.updateOnScroll_(0)},setShowCredits:function(e){this.showCredits_!==e&&(this.showCredits_=e,this.$el.find(".js-show-credits").toggleClass("hidden",!e))},reRenderBanners:function(){var e=this;this.banners_.reset(),this.areBannersLoading_=!1,this.$el.find(".js-people-nearby-banner").forEach(function(t){var i=e.banners_.next({isLoading:e.areBannersLoading_,showCredits:e.showCredits_}),a=E.render(i);e.scroll_.replaceElement(a.get(0),t),n(a)})},removeStoredBanners:function(){this.banners_=new m},updateFirstPage_:function(e){b.destroy(b.placements.PNB),window.scrollTo(0,0),this.scroll_&&this.scroll_.destroy(),this.banners_.appendBannersFromUserList(e.userList),this.viewedBannersNumber_=0,this.userCounter_=[],this.oldTitle_=null,this.totalUsers_=0,this.usersForNextSection_=[];var t=this.getSectionsData_(e);this.hasUserpic_=e.focus&&!!e.focus.image;var i={userpic:this.hasUserpic_,focus:e.focus,section:t};this.$el.html(f.render(i)),n(this.$el),b.render();var a=this.$(".js-scroll-toggle");a&&a.length&&(this.toggleScroll_=new c(a));var o=this.contentElement_=this.$el.find(".js-content"),s=o.children(),r=this.$el.find(".js-next-page-loader").get(0);this.scroll_=(new l).setScrollableElement(window).setDisplayHiddenPages(1).setPreLoadOffset(2).setContentElement(o.get(0)).setScrollEventHandler(this.updateOnScroll_,this).setTurnPageEventHandler(this.onTurnPageEvent_,this).setLoaderElements(r).setHasMore(e.hasMoreData).insert(s,1).updateLayout(),this.trigger(k.EVENTS.SCROLLED_TO_TOP)},updateCounters_:function(e){var t=this,i=this.userCounter_,n=i[i.length-1];a.each(e.userList.getSection(),function(e){var a=e.getUsers().length,o=e.getSectionId();n&&n.id===o?n.count+=a:i.push({id:o,count:a,title:e.getName()}),t.totalUsers_+=a})},replaceBanners_:function(e){var t=this;if(e){var i=e.bannerIdsToReplace,a=e.newBanners;i.forEach(function(e,i){var o=document.querySelectorAll('.js-people-nearby-banner[data-id="'.concat(e,'"]'))[0],s=a[i],r=m.getBannerForRender(s,{isLoading:t.areBannersLoading_,showCredits:t.showCredits_}),l=E.render(r);t.scroll_.replaceElement(l.get(0),o),n(l),b.render()})}},getSectionSize:function(){return(this.isLargeScreen_?this.sectionSizeLarge_:this.sectionSize_)-1},onUserClick_:function(e,t){var i=o(t).data("user-id");a.isNaN(parseInt(i,10))||this.trigger(k.EVENTS.USER_SELECT,{id:i})},onBannerClick_:function(e,t){t=o(t);var i=this.banners_.getById(t.attr("data-id"));this.areBannersLoading_||(this.areBannersLoading_=!0,y.reportClick(2,i.promoBlock),this.trigger(k.EVENTS.PRODUCT_SELECT,i),this.$el.find(".js-people-nearby-banner .js-button").toggleClass("is-loading",this.areBannersLoading_))},onTurnPageEvent_:function(e){this.trigger(k.EVENTS.FETCH,{sectionId:this.sectionId_,page:e})},updateOnScroll_:function(e){for(var t=this.userCounter_,i=this.contentHeight_,n=0,a=this.oldTitle_,o=0;o<t.length&&!(e<n);o++)a=t[o].title,n+=t[o].count/this.totalUsers_*i;a!==this.oldTitle_&&(this.oldTitle_=a),this.updateViewedBanners_(e)},updateViewedBanners_:function(e){if(!this.banners_.isEmpty()){b.render();var t=e+this.screenHeight_/2,i=Math.floor(t/this.contentHeight_*this.banners_.getSize());i<0||(this.banners_.getRange(this.viewedBannersNumber_,i).forEach(this.notifyBannerViewed_,this),this.viewedBannersNumber_=i)}},getBannersCount:function(){return this.banners_.getSize()},notifyBannerViewed_:function(e){this.trigger(k.EVENTS.BANNER_VIEWED,e)},updateLayout_:function(){this.scroll_&&this.scroll_.updateLayout();var e=this.isLargeScreen_;this.isLargeScreen_=document.body.clientWidth>this.largeScreenTreshold_,this.screenHeight_=document.body.clientHeight,e!==this.isLargeScreen_&&this.reset_()},showUser:function(e){var t=this.$('.js-user-avatar[data-user-id="'.concat(e,'"]'));t.length&&!this.isUserVisible_(t)&&this.scrollToUser_(t)},scrollToUser_:function(e){var t=e.offset().top-this.options.header.height()-15;requestAnimationFrame(function(){h.setScrolling(!0),window.scrollTo(0,t),setTimeout(function(){h.setScrolling(!1)},100)})},isUserVisible_:function(e){var t=e.offset().top;return t>=window.scrollY+this.options.header.height()&&t+e.height()<=window.scrollY+o(window).height()-d.getHeight()},getSectionsData_:function(e){var t=this,i=[],n=this.usersForNextSection_;this.usersForNextSection_=null;var o=0,s=!1,r=this.getSectionSize(),l=this.getSectionSize(),c=this.isLargeScreen_,d=0,h=this.sectionSizeLarge_;a.each(e.userList.getSection(),function(e){e.getLastBlock()&&(s=!0),0===o&&n&&(i[o]={users:n,sectionTitle:e.getName(),sectionId:e.getSectionId(),hasPlaceholder:!0},d=n.length),a.each(e.getUsers(),function(t){i[o]||(i[o]={users:[],sectionTitle:e.getName(),sectionId:e.getSectionId(),hasPlaceholder:!0});var n=new u(t,{context:u.CONTEXT.NEARBY}),a=i[o].users.length;c?a===h-3&&(n.addPlaceholder=!0):a===r-1&&(n.addPlaceholder=!0),"placeholder"===n.id||n.image||(n.styledPlaceholder={letter:n.name?n.name.charAt(0):"",index:n.id%9}),i[o].users.push(n),++d>=r&&(i[o].banner=!0,d=0,o++,r=l)}),"placeholder"===i.sectionId&&(i.placeholderSection=!0)});var p=i[i.length-1];return s||i.length>1&&p.users.length<r&&(this.usersForNextSection_=p.users,i.pop()),window._badoo_forcePnbBanner&&i.length>0&&(i[0].banner=this.banners_.next({isLoading:this.areBannersLoading_,showCredits:this.showCredits_})),a.each(i,function(i){!0===i.banner&&(i.banner=t.banners_.next({isLoading:t.areBannersLoading_,showCredits:t.showCredits_,gender:e.gender}))}),i},reset_:function(){this.scroll_&&this.scroll_.stop(),this.showLoading(),this.trigger(k.EVENTS.FETCH,{page:1})},onOpenFilters_:function(){this.trigger(k.EVENTS.OPEN_FILTER)},getFirstBump:function(){var e=this.$(".js-badge-bump");if(e.length>0)return e.eq(0)},getGreetingWrapper:function(){var e=this.$(".js-greeting-wrapper");if(e.length>0)return e.eq(0)}},"NearbyFolder");k.EVENTS=g("FETCH","BANNER_VIEWED","SCROLLED_TO_TOP","USER_SELECT","PRODUCT_SELECT","OPEN_FILTER"),e.exports=k},function(e,t,i){"use strict";function n(e){return 1===e.getPromoBlockPosition()}function a(e){return 165===e.getPromoBlockType()?e.getHeader():23===e.getOkPaymentProductType()?e.getHeader():void 0}var o=i(3),s=o(i(4)),r=o(i(110)),l=o(i(112)),c=i(100),u=i(199),d=i(132),h=i(184),p=i(610),m=i(105).PromoBlock,g=function(){function e(){(0,r.default)(this,e),this.bannerIdsList_=[],this.banners_=new Map,this.changeVisibility_=new Map,this.nextBannerIndex_=0}return(0,l.default)(e,[{key:"append",value:function(e){this.insertAt_(e,this.bannerIdsList_.length)}},{key:"insertAt_",value:function(e,t){var i=this;if(e||h.isEnabled()){var n=function(e){var t=e.getPromoBlockType(),i=d.isSppFeature(u.getFeatureName(t)),n=e.getPaymentAmount(_),o=i?0:n,s=e.getUniqueId()||c.uniqueId("clientId-"),r=e.getCreditsCost()===String(o)?e.getOtherText():e.getCreditsCost(),l=function(e){var t={action:e.getAction(),actionType:e.getOkAction()};return 165===e.getPromoBlockType()&&e.getButtons([])[0]&&(t.action=e.getButtons()[0].getText()),304===e.getPromoBlockType()&&e.getButtons([])[0]&&(t.action=e.getButtons()[0].getText(),t.actionType=e.getButtons()[0].getAction(),t.pulseAnimation=!0),t}(e),h=function(e){var t=e.getPromoBlockType(),i=function(e){var t=e.getPictures();return t?3===t.length?{leftImage:t[1].getDisplayImages(),middleImage:t[0].getDisplayImages(),rightImage:t[2].getDisplayImages()}:2===t.length?{leftImage:t[0].getDisplayImages(),middleImage:"",rightImage:t[1].getDisplayImages()}:1===t.length?{leftImage:"",middleImage:t[0].getDisplayImages(),rightImage:""}:void 0:{}}(e);if(65!==t)return Object.assign({icon:u.getBadgeTypeForPromoBlock(t)},i)}(e);return Object.assign({promoBlock:e,cost:o,costOfService:r,featureName:u.getFeatureName(t),title:a(e),message:e.getMssg(e),productType:e.getOkPaymentProductType(),type:t,id:s},l,h)}(e);h.isEnabled()&&(n={id:c.uniqueId("googleAdId-"),googleAd:!0});var o=n.id;this.banners_.set(o,n),this.bannerIdsList_[t]=o,e.getActionsChangingVisibility([]).forEach(function(e){i.changeVisibility_.has(e)||i.changeVisibility_.set(e,new Set),i.changeVisibility_.get(e).add(o)})}else this.bannerIdsList_[t]=void 0}},{key:"appendBannersFromUserList",value:function(e){var t=this,i=e.getPromoBanners([]).filter(n),a={};c.each(i,function(e){a["".concat(e.getOkAction(),"_").concat(e.getOkPaymentProductType()||0)]=!0,t.append(e)});var o=e.getPromoFeatures(),s=o?o[0]:null;if(s&&28===s.getFeature()){var r="".concat(s.getRequiredAction(),"_").concat(s.getProductType()||0);if(!a[r]){var l=new m;l.setAction(s.getDisplayAction()).setHeader(s.getDisplayMessage()).setMssg(s.getDisplayMessage()).setOkAction(s.getRequiredAction()).setOtherText("").setPictures(s.getDisplayImages()).setPromoBlockPosition(1).setPromoBlockType(1),s.getProductType()&&l.setOkPaymentProductType(s.getProductType()),this.append(l)}}}},{key:"reset",value:function(){this.nextBannerIndex_=0}},{key:"next",value:function(t){var i=t.isLoading,n=t.gender,a=t.showCredits,o=this.bannerIdsList_;if(c.isArray(o)&&0!==o.length){var s=this.nextBannerIndex_;this.nextBannerIndex_++;var r=this.banners_.get(this.bannerIdsList_[s]);return e.getBannerForRender(r,{isLoading:i,gender:n,showCredits:a})}}},{key:"replace",value:function(e){var t=e.actionType,i=e.actionBannerId,n=this.getReplaceBannersFromAction_(t);return this.replace_({bannerIdsToReplace:Array.from(n),actionBannerId:i})}},{key:"replaceAll",value:function(){return this.replace_({bannerIdsToReplace:this.bannerIdsList_})}},{key:"replace_",value:function(e){var t=this,i=e.bannerIdsToReplace,n=e.actionBannerId;if(0===i.size)return Promise.resolve({bannerIdsToReplace:[],newBanners:[]});var a={position:1,context:2,count:i.length};if(n){var o=this.banners_.get(n);o&&o.promoBlock&&o.promoBlock.getPromoBlockType()&&(a.excludePromoBlocks=[o.promoBlock.getPromoBlockType()])}return p.getInstance().get(a).then(function(e){var a=(0,s.default)(e,1)[0],o=a&&a.getPromoBlocks();return o&&0!==o.lenght?t.replaceWithNewPromoBlocks_({newPromoBlocks:o,bannerIdsToReplace:i,actionBannerId:n}):{bannerIdsToReplace:[],newBanners:[]}})}},{key:"getReplaceBannersFromAction_",value:function(e){var t=this,i=new Set,n=new Set;return this.changeVisibility_.has(e)?(this.changeVisibility_.get(e).forEach(function(e){i.add(e);var a=t.banners_.get(e);a&&n.add(a.type)}),i):i}},{key:"replaceWithNewPromoBlocks_",value:function(e){var t,i=this,n=e.newPromoBlocks,a=e.bannerIdsToReplace,o=e.actionBannerId,s=new f(n),r=[];return o&&a.includes(o)&&(t=s.next()),this.bannerIdsList_.forEach(function(e){if(a.includes(e)){var n;n=e===o&&t?t:s.next();var l=i.replaceBanner_({bannerId:e,newPromoBlock:n});r.push(l)}}),{bannerIdsToReplace:a,newBanners:r}}},{key:"replaceBanner_",value:function(e){var t=e.newPromoBlock,i=e.bannerId,n=this.bannerIdsList_.indexOf(i);this.insertAt_(t,n),this.banners_.delete(i),this.changeVisibility_.forEach(function(e){return e.delete(i)});var a=this.bannerIdsList_[n];return this.banners_.get(a)}},{key:"getById",value:function(e){return this.banners_.get(e)}},{key:"isEmpty",value:function(){return 0===this.bannerIdsList_.length}},{key:"getRange",value:function(e,t){var i=this;return this.bannerIdsList_.slice(e,t).map(function(e){return i.banners_.get(e)})}},{key:"getSize",value:function(){return this.bannerIdsList_.length}},{key:"getBannerTypes",value:function(){var e=this;return this.bannerIdsList_.map(function(t){return e.banners_.get(t)}).map(function(e){return e&&e.type}).filter(Boolean)}}],[{key:"getBannerForRender",value:function(e,t){var i=t.isLoading,n=t.gender,a=t.showCredits;if(e)return(e=c.clone(e)).isLoading=i,e.gender=n,e.showCredits=a,e.googleAd&&(e.adSlot=h.create(h.placements.PNB)),e}}]),e}(),_=100,f=function(){function e(t){(0,r.default)(this,e),this.index_=0,this.list_=t}return(0,l.default)(e,[{key:"next",value:function(){var e=this.list_[this.index_];return this.index_++,e}}]),e}();e.exports=g},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(134);e.exports=i(108)("PeopleNearbyBanner",function(e){return e.googleAd?n.createElement("div",{className:"people-nearby-banner people-nearby-banner-ad"},n.createElement("div",{id:e.adSlot,"data-qa-ads":"pnb"})):n.createElement("div",{className:"people-nearby-banner js-people-nearby-banner","data-index":e.index,"data-id":e.id},n.createElement("div",{className:"cta-box cta-box--compact"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick-wrapper brick-wrapper--s-m-s ".concat(e.icon?"brick-wrapper--padded":"")},e.leftImage?n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__image js-user-image","data-src":e.leftImage,"data-width":"65"}))):null,n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},"add-photo"===e.featureName?n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"badge-add-photos",size:"stretch",color:"primary"})):null,"spp-delayed"===e.featureName?n.createElement("div",{className:"brick__icon brick__icon--transparent"},n.createElement(a,{name:"generic-premium",size:"stretch"})):null,["add-photo","spp-delayed"].includes(e.featureName)?null:n.createElement(n.Fragment,null,e.middleImage?n.createElement("div",{className:"brick__image js-user-image","data-src":e.middleImage,"data-width":"90"}):null,e.icon?n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(a,{size:"lg",color:"primary",shadow:!0,name:e.icon})):null)),e.pulseAnimation?n.createElement("div",{className:"pulse-animation pulse-animation--live is-animation"},n.createElement("svg",{viewBox:"0 0 50 50",className:"pulse-animation_"},n.createElement("circle",{className:"pulse-animation__circle pulse-animation__circle--first",fill:"currentColor",cx:"25",cy:"25",r:"25"}),n.createElement("circle",{className:"pulse-animation__circle pulse-animation__circle--second",fill:"currentColor",cx:"25",cy:"25",r:"25"}))):null),e.rightImage?n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__image js-user-image","data-src":e.rightImage,"data-width":"65"}))):null)),e.title?n.createElement("div",{className:"cta-box__header",dangerouslySetInnerHTML:{__html:e.title}}):null,n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.message}}),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{type:e.featureName,text:e.action,narrow:"true",extraClass:"".concat(e.isLoading?"is-loading":""," js-button")})))),e.cost?n.createElement("div",{className:"cta-box__additional js-show-credits".concat(e.showCredits?"":" hidden")},e.costOfService):null))})},function(e,t,i){"use strict";var n=i(129),a=i(141),o=i(3343),s=i(3345),r=i(100),l=i(3363),c=n.extend({construct:function(e){c._super.construct.call(this),this.getNavigationBarContext_=e.getNavigationBarContext,this.scrollPositionKeeper=e.scrollPositionKeeper,this.wasBack=e.wasBack,this.onSearchingStateChange_=e.onSearchingStateChange,this.page=e.page,this.element=a.$satisfy("div"),l.onChange(this.handleLookalikesHeaderStatusChange_.bind(this))},handleLookalikesHeaderStatusChange_:function(){this.isStarted()&&this.update_()},getPeopleNearbyHeader_:function(){return this.peopleNearbyHeader_||(this.peopleNearbyHeader_=new o({getNavigationBarContext:this.getNavigationBarContext_})),this.peopleNearbyHeader_},getLookalikesHeader:r.once(function(){return new s({navigationBar:this.getNavigationBarContext_(),scrollPositionKeeper:this.scrollPositionKeeper,onSearchingStateChange:this.onSearchingStateChange_})}),updateActiveTab:function(e){this.parameters_=e,this.update_()},update_:function(){var e=this.getHeader_();this.header_!==e&&(this.removeController(1),this.header_=e,this.element.html(e.element),this.registerController(1,this.header_))},height:function(){return this.header_.height()},getHeader_:function(){if("lookalikes"===this.parameters_.page&&(l.wasSeen(),l.isEnabled())){var e=this.getLookalikesHeader();return e.configure(this.parameters_),e}return this.getPeopleNearbyHeader_()},updateHeaderSearchButton:function(e){this.header_.updateSearchButton(e)}},"DiscoverHeaderController");e.exports=c},function(e,t,i){"use strict";var n=i(129),a=i(3344),o=i(128),s=i(113),r=n.extend({construct:function(e){r._super.construct.call(this),this.getNavigationBarContext_=e.getNavigationBarContext,this.headerView_=this.registerView(new a),this.element=this.headerView_.getElement()},onStart:function(){var e=this;this.headerView_.render({navigationBar:this.getNavigationBarContext_()}),o.getInstance().get({id:s.getUserId()}).then(function(t){e.headerView_.updatePopularity(t?t.getPopularityLevel():0)})},height:function(){return this.element.height()}},"PeopleNearbyHeaderController");e.exports=r},function(e,t,i){"use strict";var n=i(109),a=i(282),o=i(607),s=i(422),r=n.extend({render:function(e){var t=o.render(e);this.$el.html(t)},updatePopularity:function(e){this.$(".js-popularity").html(s.render({popularity:a.getLevel(e)}))}},"PeopleNearbyHeaderView");e.exports=r},function(e,t,i){"use strict";var n=i(3)(i(127)),a=i(141).$satisfy,o=i(129),s=i(3346),r=i(578),l=i(3351),c=i(201),u=o.extend({construct:function(e){u._super.construct.call(this);var t=function(e){function t(){m.setVisible("default"===o&&d.visible),g.setVisible("search"===o&&d.visible)}function i(){n("default"),m.showDefaultFaces()}function n(e){o!==e&&(p.html("default"===e?m.element:g.element),o=e,_.setValue("search"===e),t())}var o,r=e.navigationBar,u=e.scrollPositionKeeper,d=e.visibility,h=e.onSearchingStateChange,p=a("div"),m=l({navigationBar:r,scrollPositionKeeper:u,onSearchIconClick:function(){n("search")}}),g=s({onUploadPhotoClick:function(){m.handleUploadPhotoClick(),i()},onCancelClick:i,onFaceClick:function(e){n("default"),m.showSearchedCelebrity(e)}});d.onChange(t);var _=c(!1,h);return{element:p,selectionChangeEvent:m.selectionChangeEvent,getSelectedFace:m.getSelectedFace,collapser:m.collapser,updateSearchButton:m.updateSearchButton,setSharingIconVisibility:m.setSharingIconVisibility,height:m.height,configure:function(e){n("default"),g.reset(),m.configure(e)}}}((0,n.default)({},e,{visibility:r(this)}));Object.assign(this,t)}},"HeaderController");e.exports=u},function(e,t,i){"use strict";function n(e){return{id:e.getId(),picture:e.getPreviewUrl(),title:e.getCaption()}}function a(e){g.track(v,{screen_name:k(),element:368,direction:6,position:e+1})}function o(e){return"placeholder"===e.getId()}function s(e,t){e.toggleClass("is-active",t)}var r=i(100),l=i(3347),c=i(613),u=i(3349),d=i(99),h=i(614),p=i(615),m=i(105).Photo,g=i(102),_=i(101),f=_.ClickEvent,v=_.ScrollElementEvent,E=_.LiveSearchEvent,b=i(616),y=i(113),k=i(264),S=i(617),w=i(348),C=i(340),T=r.debounce(function(e,t){g.track(E,{activation_place:y.isLoggedIn()?239:257,search_text:e,num_results:t})},2e3);e.exports=function(e){function t(e){z=z.filter(function(e){return!o(e)}).concat(e);var t=e.map(n),a=h.render({faces:t},H,L);return v(a),j.visible&&i(),a}function i(){B&&B.destroy(),B=S({itemContainer:q,itemSelector:".js-face"})}function _(e){z=e;var t=e.map(n);v(h.render({faces:t},H,H[0].childNodes)),function(){I&&I.destroy(),I=b({itemContainer:q,itemSelector:".js-face",onItemView:a})}(),j.visible&&i()}function v(e){e.filter(".js-face").click(function(e){var t=e.currentTarget.getAttribute("data-id");if("placeholder"!==t){var i=z.find(function(e){return e.getId()===t});!function(e,t){g.track(f,{element:21,parent_element:368,position:t.indexOf(e)+1})}(i,z),D(i)}})}function E(){return++Y}function k(e){var t,i=E();N=e,A!==e||r.isEmpty(x)?(_(((t=w.getClientSampleFaces())&&t.getPhotos()||[]).filter(function(e){return 2===e.getSampleFaceType()})),q.scrollLeft(0),e.length<3||p({offset:0,limit:50,searchString:e,callback:function(t,n){if(!t&&i===Y){var a=n.getPhotos()||[];T(e,a.length),r.isEmpty(a)?s(G,!0):(x=a,A=e,s(G,!1),_(a),V=a.slice(),R=n.getHasMore(),q.scrollLeft(0))}}})):_(x)}function P(){E(),s(G,!1),_([]),V=void 0,R=!1,O=!1,q.scrollLeft(0),$.clear()}var N,I,x,A,O,V,R,B,L,F=e.onUploadPhotoClick,M=e.onCancelClick,D=e.onFaceClick,U=l.render({noSearchResultsText:d.get(561,"link js-upload-photo-search needsclick","").replace("<a","<span").replace("</a>","</span>")}),j=C(),G=U.find(".js-no-search-results"),q=U.find("js-tabs-container"),H=U.find(".js-faces"),z=[],Y=0;!function(e,t){var i=r.throttle(t,100);e.scroll(i)}(q,function(){var e=r.last(z);if(e&&!o(e)){var i=q.find(".js-face").last().offset();if(i){var n=q.offset();i.left<n.left+4*n.width&&function(){if(!O&&R){O=!0;var e=E(),i=(n=(new m).setId("placeholder"),r.fill(Array(50),n)),n;L=t(i),p({offset:V.length,limit:50,searchString:N,callback:function(i,n){if(e===Y&&(O=!1,!i)){var a=n.getPhotos();V=V.concat(a),R=n.getHasMore(),t(a)}}})}}()}}}),U.find(".js-upload-photo-search").click(F),c({container:U.find(".js-return-chevron"),scrollViewZepto:q,scrollViewVisibility:j});var $=u({container:U.find(".js-search-bar"),onInput:k,onCancel:function(){(function(e){return e.hasClass("is-active")})(G)&&($.clear(),s(G,!1)),M()}});return j.onShow(function(){$.focus(),k($.getText()),i()}),y.on(y.EVENTS.SESSION_CHANGED,P),{element:U,setVisible:j.setVisible,reset:P}}},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("SearchHeader",function(e){return n.createElement("div",{className:"lookalikes-header"},n.createElement("div",{className:"discover-tabs-header js-header"},n.createElement("div",{className:"discover-tabs-header__navigation"},n.createElement("div",{className:"lookalikes-header__search-bar js-search-bar"})),n.createElement("div",{className:"discover-tabs-header__tabs"},n.createElement("div",{className:"discover-tabs"},n.createElement("div",{className:"discover-tabs__zero js-no-search-results"},n.createElement("div",{className:"cta-box cta-box--vpadded cta-box--hpadded"},n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.noSearchResultsText}}))),n.createElement("div",{className:"discover-tabs__content js-tabs-container"},n.createElement("div",{className:"discover-tabs__tabs"},n.createElement("div",{className:"discover-tabs__extra js-faces"})),n.createElement("div",{className:"js-return-chevron"}))))))})},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("ReturnChevron",function(e){return n.createElement("div",{className:"lookalikes-header__return-chevron js-return-chevron"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"connections-folder-back",size:"stretch"}))))})},function(e,t,i){"use strict";var n=i(3350),a=i(102),o=i(99),s=i(101).ClickEvent,r=i(264);e.exports=function(e){function t(){h.val(""),c("")}function i(){return h.val()}var l=e.container,c=e.onInput,u=e.onCancel,d=n.render({searchPlaceholder:o.get(536)},l),h=d.find(".js-input");h[0].addEventListener("input",function(){var e=i();c(e),p.toggleClass("hidden",!e)});var p=d.find(".js-clear").click(t);return d.find(".js-cancel").click(function(){a.track(s,{element:113,parent_element:284,screen_name:r()}),u()}),{zepto:d,clear:t,focus:function(){h.focus()},getText:i}}},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(99);e.exports=i(108)("SearchInput",function(e){return n.createElement("div",{className:"lookalikes-search js-lookalikes-search"},n.createElement("div",{className:"lookalikes-search__field"},n.createElement("label",{className:"search-field"},n.createElement("div",{className:"search-field__icon needsclick"},n.createElement(a,{name:"elements-input-search",size:"stretch"})),n.createElement("input",{type:"search",name:e.name,className:"search-field__input ".concat(e.extraClass," js-input"),placeholder:e.searchPlaceholder,autoComplete:"off",autoCorrect:"off",spellCheck:"false"}))),n.createElement("div",{className:"lookalikes-search__extra"},n.createElement("span",{className:"lookalikes-search__action js-cancel"},o.get(19))))})},function(e,t,i){"use strict";function n(){g.track(v,{element:367,parent_element:368}),c("lookalikes")}function a(){g.track(v,{element:118,parent_element:368},!0),C.getClientSampleFacesWhenAvailable(function(e){if(b.isLoggedIn())c("connect-facebook",{redirect:"lookalikes"});else{var t=e.getPhotos()[0].getId();S(t)}})}var o=i(132),s=i(3352),r=i(340),l=i(103),c=l.navigate,u=l.back,d=l.updateLocation,h=l.getLocation,p=i(3353),m=i(3355),g=i(102),_=i(101),f=_.ViewElementEvent,v=_.ClickEvent,E=i(613),b=i(113),y=i(100),k=i(3356),S=i(618),w=i(225),C=i(348),T=i(399),P=i(619),N=i(3357),I=i(3358),x=i(3362),A=i(126),O=i(156);e.exports=function(e){function t(){te&&te.stop()}function i(e){j.find(".js-search-controls").toggleClass("is-active",e),j.find(".js-share-controls").toggleClass("is-active",e),F=e,l()}function l(){q.visibility.setVisible(G.visible&&!F)}function _(e){var t,n,a,o,s=e.photoId,r=e.uploadedPhoto;W(),i(!0),r?(t=h(),n=t.routeName,a=t.parameters,o=y.omit(a,"uploadedPhoto"),d(n,o),ne.showUploadedPhoto(r)):ne.showDefaultFaces({photoId:s,update:!s||ee}),ee=!1}function S(){g.track(v,{element:68,parent_element:368}),ie||(ie=!0,C.getClientSampleFacesWhenAvailable(function(e){var t=e.getOtherPhotoAction();ie=!1,t&&2!==t||(te=P(V))}))}function V(e){if(e){var t=e.photo_id,i=e.url;J.uploadedPhoto={id:t,url:i},B()}}function R(){var e=w.get("lookalikes_search_tooltip_shown");j.find(".js-search-tooltip").toggleClass("hidden",e),e||(w.set("lookalikes_search_tooltip_shown",1),setTimeout(R,2e3))}function B(){var e=J,n=e.page,a=e.photoId,o=e.uploadedPhoto,s=e.backHistoryEntry;oe("lookalikes"===n&&s),"people-nearby"===n&&(t(),K(),i(!1)),"lookalikes"===n&&_({photoId:a,uploadedPhoto:o}),R()}var L,F,M=e.navigationBar,D=e.scrollPositionKeeper,U=e.onSearchIconClick,j=s.render({navigationBar:M,partner_id:A.get("partner_id"),NAVIGATION_BUTTONS:O}),G=r();L=j,o.observe([o.getObservable(181)],function(e){var t=e.getShowNewBadge(!1);L.find(".js-new-lookalikes").toggleClass("hidden",!t)});var q=function(e){var t=e.find(".js-popularity"),i=r();return t.length>0&&k({container:t,visibility:i}),{visibility:i}}(j),H=null,z=I({container:{zepto:j.find(".js-header-tabs"),visibility:G},onLookalikesTabClick:n,onUploadPhotoTabClick:S,onConnectFacebookClick:a}),Y=z.tabsContainer,$=z.facesTab,W=z.selectLookalikesTab,K=z.selectPeopleNearbyTab,Q=z.visibleTabsObservable,X=function(e){var t;return{savePosition:function(){t=e.scrollLeft()},restorePosition:function(){e.scrollLeft(t)}}}(Y);G.onShow(function(){
var e;X.restorePosition(),(e=ne.getSelectedFaceZepto())&&e.length&&N(e,Y),l()}),G.onHide(function(){X.savePosition(),t(),l()});var Z=x(G,Q);E({container:j.find(".js-return-chevron"),scrollViewZepto:Y,scrollViewVisibility:Z}),H=p({visibility:G,scrollPositionKeeper:D});var J,ee,te,ie,ne=m({container:$,onFaceClick:function(){W()},tabsContainer:Y,collapser:H,visibility:Z}),ae=function(e,t){function i(){o.toggleClass("hidden",!n),r.toggleClass("hidden",Boolean(n));var e=a&&!n;s.toggleClass("hidden",!e),e&&g.track(f,{element:455})}var n,a,o=e.find(".js-back-button");o.click(u);var s=e.find(".js-share-icon");!function(e,t){e.click(function(){g.track(v,{element:455,parent_element:367}),c("share-lookalikes",{photoId:t.getSelectedPhotoId()})})}(s,t);var r=e.find(".js-menu-button");return{setBackButtonVisibility:function(e){n=e,i()},setSharingIconVisibility:function(e){a=e,i()}}}(j,ne),oe=ae.setBackButtonVisibility,se=ae.setSharingIconVisibility;return i(!1),b.on(b.EVENTS.SESSION_CHANGED,function(){w.remove("lookalikes_search_tooltip_shown"),ne.reset(),G.visible&&B()}),T.subscribe(function(){ee=!0,G.visible&&ne.showDefaultFaces()}),j.find(".js-search-icon").click(function(){g.track(v,{element:90,parent_element:367}),X.savePosition(),U()}),{element:j,setVisible:G.setVisible,selectionChangeEvent:ne.selectionChangeEvent,getSelectedFace:ne.getSelection,collapser:H,updateSearchButton:function(e){j.find(".js-extended-search-entry-point").toggleClass("is-active",e>0).find(".js-extended-search-entry-point-counter").text(e)},handleUploadPhotoClick:S,setSharingIconVisibility:se,configure:function(e){J=e,B()},showDefaultFaces:function(){ne.showDefaultFaces({photoId:ne.getSelectedPhotoId()})},showSearchedCelebrity:function(e){W(),ne.showSearchedCelebrity(e)},height:function(){return H.isCollapsed()?Y.height():j.height()}}},b.on(b.EVENTS.SESSION_CHANGED,function(){w.remove("lookalikes_search_tooltip_shown")})},function(e,t,i){"use strict";var n=i(3)(i(144)),a=i(98),o=i(106),s=i(137),r=i(99);e.exports=i(108)("Header",function(e){return a.createElement("div",{className:"lookalikes-header"},a.createElement("div",{className:"discover-tabs-header js-header"},a.createElement("div",{className:"discover-tabs-header__navigation"},e.navigationBar?a.createElement(s,(0,n.default)({},e,{logo:!0,actions:e.navigationBar.actions,extraClass:"shall-transform",primary:a.createElement(a.Fragment,null,e.navigationBar.actions.menu?a.createElement("div",{className:"navigation-bar__icon js-navigation js-menu-button","data-action":e.NAVIGATION_BUTTONS.MENU,"data-qa":"navbar-menu"},a.createElement(o,{name:"navigation-bar-menu"})):null,e.navigationBar.noMenu?a.createElement("div",{className:"lookalikes-header__switcher js-share-controls ".concat(e.navigationBar.isActive?" is-active ":"")},a.createElement("div",{className:"lookalikes-header__switcher-item"},a.createElement("div",{className:"js-popularity"})),a.createElement("div",{className:"lookalikes-header__switcher-item lookalikes-header__switcher-item--active js-share-icon"},a.createElement("div",{className:"navigation-bar__icon"},a.createElement(o,{name:"navigation-bar-share"})))):null,a.createElement("div",{className:"navigation-bar__icon js-back-button","data-qa":"navbar-back"},a.createElement(o,{name:"navigation-bar-back",supportsRtl:!0}))),secondary:a.createElement("div",{className:"lookalikes-header__switcher js-search-controls ".concat(e.isActive?" is-active ":"")},a.createElement("div",{className:"lookalikes-header__switcher-item"},a.createElement("div",{className:"navigation-bar__icon js-navigation","data-action":e.NAVIGATION_BUTTONS.LOCATION,"data-qa":"navbar-location"},a.createElement(o,{name:"navigation-bar-filter"}))),a.createElement("div",{className:"lookalikes-header__switcher-item lookalikes-header__switcher-item--active"},a.createElement("div",{className:"navigation-bar__icon js-search-icon"},a.createElement(o,{name:"navigation-bar-search"}),a.createElement("div",{className:"tooltip tooltip--br is-visible js-search-tooltip"},a.createElement("div",{className:"tooltip_"},a.createElement("div",{className:"tooltip__content"},a.createElement("div",null,r.get(545))))))))})):null),a.createElement("div",{className:"discover-tabs-header__tabs"},a.createElement("div",{className:"discover-tabs"},a.createElement("div",{className:"discover-tabs__content shall-transform js-tabs-container"},a.createElement("div",{className:"js-header-tabs"}),a.createElement("div",{className:"js-return-chevron"}))))))})},function(e,t,i){"use strict";var n=i(3354),a=i(609);e.exports=function(e){function t(){var e=i.visible&&!o.isPositionLocked()&&!a.isScrolling();s.setEnabled(e)}var i=e.visibility,o=e.scrollPositionKeeper,s=n();return i.onShow(t),i.onHide(t),o.beforePositionLock(t),o.onPositionUnlock(t),a.onChange(t),s}},function(e,t,i){"use strict";var n=i(25);e.exports=function(){function e(){var e,i=(e=n(document).height()-window.innerHeight,Math.max(0,Math.min(e,window.scrollY)));if(i>l)return t(!0);var a=i-s;Math.abs(a)>0&&(s=i,d||t(a>0)),i<0&&(s=0,d||t(!1))}function t(e,t){var n=i();void 0!==t&&(n=t),u===e&&void 0===t||(u=e,r.toggleClass("is-minimised",!n&&u),r.toggleClass("is-collapsed",!!n&&u),a(),s=window.scrollY)}function i(){return r.find(".js-faces").length>0}function a(){clearTimeout(o),d=!0,o=setTimeout(function(){return d=!1},300)}var o,s,r=n(".js-screen-container"),l=70,c=!1,u=!0,d=!1,h=function(){var e=[];return{listen:function n(a){for(e.push(a.changedTouches[0].screenY);e.length>3;)e.shift();e.length<3||(e[0]<e[1]&&e[1]<e[2]&&!i()&&t(!1),window.removeEventListener("touchmove",n,!1))},reset:function(){e=[]}}}();return{pause:a,setEnabled:function(i){c!==i&&((c=i)?(a(),h.reset(),s=window.scrollY,window.addEventListener("scroll",e,!1),window.addEventListener("touchmove",h.listen,!1)):(t(u),window.removeEventListener("scroll",e,!1),window.removeEventListener("touchmove",h.listen,!1)))},setCollapsed:t,isCollapsed:function(){return u}}}},function(e,t,i){"use strict";function n(e){return{id:e.getId(),picture:e.getPreviewUrl(),title:e.getCaption()}}function a(e){_.track(E,{screen_name:P(),element:368,direction:6,position:e+1})}function o(){var e=(new p).setId("placeholder");return g.fill(Array(50),e)}function s(e){return"placeholder"===e.getId()}function r(e){var t=T(),i=t.routeName,n=t.parameters;if(e&&"no_profile_photo"!==e&&e!==n.photoId){var a=Object.assign({},n,{photoId:e});C(i,a)}}function l(e,t){t&&(g.remove(e,function(e){return e.getId()===t.getId()}),e.unshift(t))}function c(e,t){t&&(g.remove(e,function(e){return 4===e.getSampleFaceType()}),e.unshift(t))}var u=i(614),d=i(615),h=i(158),p=i(105).Photo,m=i(99),g=i(100),_=i(102),f=i(101),v=f.ClickEvent,E=f.ScrollElementEvent,b=i(616),y=i(131).getGenderString,k=i(113),S=i(348),w=i(103),C=w.updateLocation,T=w.getLocation,P=i(264),N=i(617),I=i(128),x=i(167);e.exports=function(e){function t(e){J=J.filter(function(e){return!s(e)}).concat(e);var t=e.map(n),a=u.render({faces:t},$,j);return T(a),Q.visible&&i(),a}function i(){U&&U.destroy(),U=N({itemContainer:K,itemSelector:".js-face"})}function f(e,t){var o=(t||{}).photoId;J=e;var s=e.map(n);T(u.render({faces:s},$,$[0].childNodes)),function(e){if(!(e&&function(e){return!!J.find(function(t){return t.getId()===e})&&(E(e),!0)}(e)||g.isEmpty(J))){var t=J[0].getId();"placeholder"!==t&&E(t)}}(o),r(V),function(){L&&L.destroy(),L=b({itemContainer:K,itemSelector:".js-face",onItemView:a})}(),Q.visible&&i()}function E(e){!function(e){$.find(".js-face.is-active").removeClass("is-active"),q=e?$.find('.js-face[data-id="'.concat(e,'"]')).addClass("is-active"):void 0}(e),V!==e&&(r(V=e),ee.trigger(w()))}function w(){if(V){var e=J.find(function(e){return e.getId()===V});if(e)return{photoId:V,personName:e.getCaption(),type:C(e)}}}function C(e){var t=e.getSampleFaceType();return e===R||4===t?"uploaded_photo":1===t?"own_profile":3===t?"friend":e===B?"searched_celebrity":"celebrity"}function T(e){e.filter(".js-face").click(function(e){var t=e.currentTarget.getAttribute("data-id");t&&"placeholder"!==t&&(!function(e,t){_.track(v,{element:21,parent_element:368,position:t.indexOf(e)+1})}(J.find(function(e){return e.getId()===t}),J),X.setCollapsed(!1,!0),E(t),W())})}function P(e){var t=e||{},i=t.update,n=t.celebritiesOnly,a=t.photoId,o=O();i&&(B=void 0),f(A({celebritiesOnly:n}),{photoId:a});var s=Z.some(function(e){return e.getId()===a});(i||g.isEmpty(Z)||!s)&&(X.setCollapsed(!1),d({offset:0,limit:100,photoId:a,callback:function(e,t){if(!e){S.handleClientSampleFaces(t);var i=t.getPhotos()||[];G=i.splice(50),Z=i,o===ie&&(f(A(),{photoId:a}),M=Z.slice(),D=t.getHasMore())}}}))}function A(e){var t=(e||{}).celebritiesOnly,i=g.isEmpty(Z)?o():Z.slice();return t?i.filter(function(e){return 2===e.getSampleFaceType()}):(i=function(e){return e.map(function(e){return 4===e.getSampleFaceType()?function(e){return(new p).setId(e.getId()).setPreviewUrl(e.getPreviewUrl()).setCaption(m.get(533)).setSampleFaceType(e.getSampleFaceType())}(e):e})}(i=function(e){return e.map(function(e){return 1!==e.getSampleFaceType()||e.getId()?e:function(e){var t=k.getUser().getGender();return(new p).setId("no_profile_photo").setPreviewUrl(y(t)).setCaption(e.getCaption()).setSampleFaceType(e.getSampleFaceType())}(e)})}(i)),te?(l(i,B),c(i,R)):(c(i,R),l(i,B)),i)}function O(){return++ie}var V,R,B,L,F,M,D,U,j,G,q,H,z,Y,$=e.container,W=e.onFaceClick,K=e.tabsContainer,Q=e.visibility,X=e.collapser,Z=[],J=[],ee=h(),te=!0,ie=0;return H=K,z=function(){var e=g.last(J);if(e&&!s(e)){var i=K.find(".js-face").last().offset();if(i){var n=K.offset();i.left<n.left+4*n.width&&function(){if(!F){if(!g.isEmpty(G)){var e=G.splice(0);return M=M.concat(e),void t(e)}if(D){F=!0;var i=O(),n=o();j=t(n),d({offset:M.length,limit:50,callback:function(e,n){if(i===ie&&(F=!1,!e)){var a=n.getPhotos();M=M.concat(a),D=n.getHasMore(),t(a)}}})}}}()}}},Y=g.throttle(z,100),H.scroll(Y),Q.onShow(i),I.getInstance().on(I.EVENTS.INVALIDATED,function(e){(e.all||e.keys.indexOf(k.getUserId())>-1)&&(Z=[]),Q.visible&&P({photoId:V})}),x.getInstance().on(x.Type.SYSTEM_NOTIFICATION,function(e){18===e.getId()&&P({photoId:V})}),{container:$,selectionChangeEvent:ee,showDefaultFaces:P,getSelection:w,showSearchedCelebrity:function(e){te=!1,B=e,P({photoId:e.getId()}),K.scrollLeft(0)},reset:function(){O(),Z=[],G=[],R=void 0,B=void 0,E(void 0),f([]),M=void 0,D=!1,F=!1,K.scrollLeft(0)},showUploadedPhoto:function(e){var t=e.id,i=e.url;te=!0,R=(new p).setId(t).setPreviewUrl(i).setCaption(m.get(546)).setSampleFaceType(4),B=void 0,P({photoId:t}),K.scrollLeft(0)},getSelectedPhotoId:function(){return V},getSelectedFaceZepto:function(){return q}}}},function(e,t,i){"use strict";var n=i(422),a=i(128),o=i(113),s=i(282),r=i(309);e.exports=function(e){function t(e){var t={popularity:e?s.getLevel(e.getPopularityLevel()):null};n.render(t,i,i[0].childNodes)}var i=e.container;e.visibility.onShow(function(){o.isLoggedIn()&&a.getInstance().get({id:o.getUserId(),clientSource:127,requestedFields:[690]}).then(t,function(e){if(!r(e))throw e})})}},function(e,t,i){"use strict";var n=i(25);e.exports=function(e,t){var i,a,o;(o=e.offset().left)+e.width()>=0&&o<=n(window).width()||(i=e.position().left+e.width()/2,a=t.scrollLeft()+i-t.width()/2,t.scrollLeft(a))}},function(e,t,i){"use strict";var n=i(113),a=i(3359),o=i(3360),s=i(201),r=i(3361);e.exports=function(e){function t(){h.visible&&"lookalikes"===f&&i()}function i(){l("lookalikes",[n.isLoggedIn()&&E,y,o.isVisible()&&k,S].filter(Boolean))}function l(e,t){N(t),f=e,P.setValue(t)}function c(e){T&&T.removeClass("is-active"),(T=e).addClass("is-active")}var u=e.container,d=u.zepto,h=u.visibility,p=e.onPeopleNearbyTabClick,m=e.onLookalikesTabClick,g=e.onUploadPhotoTabClick,_=e.onConnectFacebookClick;!function(e){r.render({},e)}(d);var f,v=d.find(".js-tabs"),E=v.find(".js-people-nearby"),b=v.find(".js-lookalikes"),y=v.find(".js-upload-photo"),k=v.find(".js-connect-facebook"),S=v.find(".js-faces"),w=v.find(".js-coming-soon-1"),C=v.find(".js-coming-soon-2");E.click(p),b.click(m),y.click(g),k.click(_);var T,P=s(),N=a(v);return n.on(n.EVENTS.SESSION_CHANGED,t),o.onChange(t),{tabsContainer:v,facesTab:S,selectPeopleNearbyTab:function(){l("discover",[E,b,w,C]),E.removeClass("is-stacked"),c(E)},selectLookalikesTab:function(){i(),E.addClass("is-stacked"),c(b)},visibleTabsObservable:P}}},function(e,t,i){"use strict";var n=i(25);e.exports=function(e){var t=e.children();return function(i){var a;t.forEach(function(t){i.some(function(e){return e[0]===t})?(n.contains(e[0],t[0])||(a?n(t).insertAfter(a):e.prepend(t)),a=t):n(t).detach()})}}},function(e,t,i){"use strict";function n(){if(!s.isLoggedIn())return!0;var e=r.getClientSampleFaces();return!(!e||73!==e.getOtherPhotoAction())}function a(){l.setValue(n())}var o=i(201),s=i(113),r=i(348),l=o(n());r.onChange(a),s.on(s.EVENTS.SESSION_CHANGED,a),e.exports={isVisible:function(){return l.value},onChange:l.changeEvent.subscribe}},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(99),s=i(248);e.exports=i(108)("HeaderTabs",function(e){return n.createElement("div",{className:"discover-tabs__tabs js-tabs"},n.createElement("div",{className:"discover-tabs__tab discover-tabs__tab--stretch js-lookalikes js-discover-tab"},n.createElement("div",{className:"discover-tab"},n.createElement("div",{className:"discover-tab__image"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"connections-folder-lookalikes",size:"stretch"})),n.createElement("div",{className:"brick__badge brick__badge--bc hidden js-new-lookalikes"},n.createElement(s,{color:"notification",text:o.get(517)})))),n.createElement("div",{className:"discover-tab__label"},o.get(532)))),n.createElement("div",{className:"discover-tabs__tab discover-tabs__tab--stretch is-placeholder js-coming-soon-2 js-discover-tab"},n.createElement("div",{className:"discover-tab"},n.createElement("div",{className:"discover-tab__image"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__icon"},n.createElement("svg",{viewBox:"0 0 64 64"},n.createElement("circle",{cx:"32",cy:"32",r:"32",fill:"#e0e0e0"}),n.createElement("circle",{cx:"32",cy:"32",r:"31",fill:"#FFF"}),n.createElement("path",{d:"M46.68 25.05a3.04 3.04 0 0 0-3.97-1.66l-5.4 2.36-8.1-3.38c-.1-.05-.26-.05-.42 0l-4.61 1.93c-.43.16-.43.8 0 .97l7.28 3.05-5.57 2.47-3.6-1.82a.63.63 0 0 0-.42 0l-4.4 1.88c-.31.16-.42.59-.15.85l5.62 5.68c.16.16.37.22.59.11l8.25-3.32-3.32 8.94c-.16.49.32.91.75.65l4.98-2.52c.1-.05.21-.1.21-.27l4.93-9.9 5.68-2.15a2.88 2.88 0 0 0 1.66-3.85zm-20.95-.26l3.22-1.34 6.96 2.89-3.16 1.39-7-2.95zM44.64 28l-5.84 2.2a.64.64 0 0 0-.26.26l-4.93 9.91-3.65 1.83 3.27-8.79c.16-.42-.27-.85-.7-.69l-9.05 3.65-4.82-4.88L22.1 30l3.53 1.77c.16.06.32.1.48 0l6.9-3.05h.06l4.45-1.93s.05 0 .05-.06l5.63-2.46a1.95 1.95 0 0 1 2.57 1.07c.32 1.13-.16 2.3-1.12 2.68z",fillOpacity:".3",fill:"#040404"}))))),n.createElement("div",{className:"discover-tab__label"},o.get(548)))),n.createElement("div",{className:"discover-tabs__tab discover-tabs__tab--stretch js-upload-photo needsclick js-discover-tab"},n.createElement("div",{className:"discover-tab"},n.createElement("div",{className:"discover-tab__image"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"connections-folder-upload",size:"stretch"})))),n.createElement("div",{className:"discover-tab__label"},o.get(534)))),n.createElement("div",{className:"discover-tabs__tab discover-tabs__tab--stretch js-connect-facebook js-discover-tab"},n.createElement("div",{className:"discover-tab"},n.createElement("div",{className:"discover-tab__image"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__icon"},n.createElement(a,{name:"connections-folder-facebook",size:"stretch"})))),n.createElement("div",{className:"discover-tab__label"},o.get(543)))),n.createElement("div",{className:"discover-tabs__extra js-faces"}))})},function(e,t,i){"use strict";var n=i(340);e.exports=function(e,t){function i(){a.setVisible(e.visible&&t.value.some(function(e){return e.is(".js-faces")}))}var a=n();return e.onShow(i),e.onHide(i),t.onChange(i),a}},function(e,t,i){"use strict";function n(){var e=s.getSync(181);if(e.getEnabled())return!0;var t=e.getRequiredAction();return 20===t?l:2===t||5===t}function a(){c.setValue(n())}var o=i(225),s=i(132),r=i(201),l="true"===o.get("LookalikesHeaderSeen"),c=r(n());s.on(s.EVENTS.UPDATE,function(e){181===e.getFeature()&&a()}),e.exports={isEnabled:function(){return c.value},wasSeen:function(){o.set("LookalikesHeaderSeen","true"),l=!0,a()},onChange:c.changeEvent.subscribe}},function(e,t,i){"use strict";function n(e){f.track(N,{screen_name:k(),element:367,direction:5,position:e})}function a(){f.track(P,{element:456})}function o(e){var t=e();return function(){return e()===t}}var s=i(100),r=i(3365),l=i(3367),c=i(3369),u=i(103).navigate,d=i(3371),h=i(3375),p=i(129),m=i(113),g=i(197),_=i(550),f=i(102),v=i(3377),E=i(3378),b=i(622),y=i(549),k=i(264),S=i(3381),w=i(101),C=w.ClickEvent,T=w.LookalikeEvent,P=w.ViewElementEvent,N=w.ScrollElementEvent,I={celebrity:4,own_profile:1,searched_celebrity:3,uploaded_photo:2,friend:5},x=s.once(function(){return new c}),A=s.once(function(){return new E}),O=p.extend({loaded_:!1,configuration_:0,twinsRequestId_:0,construct:function(e){O._super.construct.call(this);var t=e.getNavigationBarContext,i=e.header,o=e.footerElement;this.header_=i,this.header_.setSharingIconVisibility(!1),this.element=v.render(),this.footerElement_=o,this.getNavigationBarContext_=t,this.twinsCounterView_=new h,this.twinsNotReadyController_=new l,this.twinsView_=new d({twinsCounter:this.twinsCounterView_.getElement(),onTurnPage:this.fetchPage_.bind(this),onUserClick:this.onUserClick_.bind(this),onLayoutChanged:this.reload_.bind(this),onScroll:n,onShareDividerView:a}),this.sharingObservable=this.twinsView_.sharingObservable,this.registerView(this.twinsView_),this.handleSelection_(this.header_.getSelectedFace()),i.selectionChangeEvent.subscribe(this.handleSelection_,this)},handleSelection_:function(e){e?(this.twinsNotReadyController_.setAnimated(!0),this.configure(e)):this.reset_()},onStart:function(){this.header_.collapser.pause(),f.track(P,{element:367}),this.loadResult?this.finishLoading():this.configuration_&&!this.loaded_&&this.load_()},onStop:function(){clearTimeout(this.checkAgainTimeout_)},configure:function(e){var t=e.photoId,i=e.personName,n=e.type;this.loaded_&&t===this.photoId_||(this.configuration_++,this.photoId_=t,this.personName_=i,this.type_=n,this.reset_(),this.load_(),this.isStarted()&&f.track(P,{element:367}))},reset_:function(){this.loaded_=!1,this.loadResult=null,clearTimeout(this.checkAgainTimeout_),this.twinsView_.getElement().detach(),this.showTwinsNotReadyScreen_({update:!0}),this.header_.setSharingIconVisibility(!1)},reload_:function(){this.reset_(),this.load_()},load_:function(){var e=this;if("no_profile_photo"!==this.photoId_){var t={photoId:this.photoId_,offset:0,limit:20};this.getTwins_(t,function(t){e.loadResult=t,e.isStarted()&&e.finishLoading()})}else this.showNoProfilePhotoScreen_()},finishLoading:function(){var e=this.loadResult,t=e.error,i=e.clientTwins;this.loadResult=null,t?this.handleError_(t):this.onTwinsReceived_(i)},getTwins_:function(e,t){this.twinsRequestId_++;var i=this.createTwinsRequestCallbacks_(t),n=Object.assign({},e,i);_(n)},createTwinsRequestCallbacks_:function(e){var t=this,i=o(function(){return t.configuration_}),n=o(function(){return t.twinsRequestId_}),a=function(){return!i()||!n()};return{callback:function(i,n){a()||(i?e({error:i}):(n.getPromoBanners()&&t.handlePromoBlocks_(n.getPromoBanners()),e({clientTwins:n})))},onCaptcha:function(e){a()||u("captcha",{captchaId:e.getErrorId(),serverError:e,callback:function(){return t.reload_()}})}}},showTooltipBanner_:function(e){var t=this.getTooltipBannerController_();t&&t.setPromoBlock(e)},getTooltipBannerController_:function(){function e(){this.removeController(t),i.destroy()}var t="PROMO_BLOCK_POPUP",i=this.getController(t);return!i&&m.isLoggedIn()&&(i=this.registerController(t,new S).on(S.EVENTS.ACTION,e,this).on(S.EVENTS.DISMISS,e,this),m.once(m.EVENTS.LOGOUT,e,this),i.parent.appendTo(this.footerElement_)),i},showNoTwinsScreen_:function(e){var t=new r(e);this.showZeroScreen_(t)},showNoProfilePhotoScreen_:function(){var e=x();this.showZeroScreen_(e)},onTwinsReceived_:function(e){if(e.hasCheckAgainIn())this.showTwinsNotReadyScreen_({clientTwins:e});else{var t=r.getNoTwinsPromoBlock(e);if(t)this.showNoTwinsScreen_(t);else{this.loaded_=!0,y.updateLookalikeList({photoId:this.photoId_,clientTwins:e}),this.userActionOnClick_=e.getUserAction();var i=e.getTotalCount();this.trackTwinsView_(i),this.twinsCounterView_.render({type:this.type_,personName:this.personName_,counter:e.getTotalCount()}),this.removeZeroScreen(),this.twinsView_.appendTo(this.element),this.twinsView_.update({hasMore:20<i,users:e.getUsers(),photoId:this.photoId_,sharingProviderTypes:e.getSharingProviderTypes()}),this.header_.setSharingIconVisibility(!0)}}},showTwinsNotReadyScreen_:function(e){var t=this,i=e.clientTwins,n=e.update;if(this.zeroScreenController!==this.twinsNotReadyController_&&this.showZeroScreen_(this.twinsNotReadyController_),n&&this.twinsNotReadyController_.update(),i){clearTimeout(this.checkAgainTimeout_);var a=i.getCheckAgainIn();this.checkAgainTimeout_=setTimeout(function(){t.load_()},1e3*a)}},fetchPage_:function(e){var t=this;if(this.loaded_){var i=20*(e-1),n={photoId:this.photoId_,offset:i,limit:20};this.getTwins_(n,function(n){var a=n.error,o=n.clientTwins;a?t.handleError_(a):t.handleNewTwinsPage_(o,e,i)})}},handlePromoBlocks_:function(e){if(e&&e.length&&this.isStarted()){var t=e.find(function(e){return 16===e.getPromoBlockPosition()});t&&this.showTooltipBanner_(t)}},handleNewTwinsPage_:function(e,t,i){if(this.isStarted()){var n=e.getUsers();s.isEmpty(n)||(y.updateLookalikeList({photoId:this.photoId_,offset:i,clientTwins:e}),this.twinsView_.addUsers({users:n,page:t,hasMore:i+n.length<e.getTotalCount()}))}},handleError_:function(e){var t=this,i=this.getNavigationBarContext_();i.actions.location=!1;var n=g.handleError({error:e,screenName:382,navigationBar:i});n?n.on(n.EVENTS.REFRESH,function(){return t.load_()}):this.showZeroScreen_(A())},showZeroScreen_:function(e){this.twinsView_.getElement().detach(),this.removeZeroScreen(),this.zeroScreenController=e,this.element.append(e.element),this.registerController(1,e)},removeZeroScreen:function(){this.zeroScreenController&&(this.zeroScreenController.element.detach(),this.removeController(1),this.zeroScreenController=null)},onUserClick_:function(e,t){var i=e.getUserId(),n=e.getProfilePhoto().getId();!function(e){f.track(C,{element:21,parent_element:367,position:e})}(t),40===this.userActionOnClick_?b(i,n):52===this.userActionOnClick_?u("share-lookalikes",{userId:i,defaultPhotoId:n,photoId:this.photoId_}):5===this.userActionOnClick_?u("lookalikes-landing",{user:e.toJSON(),photoId:this.photoId_}):u("lookalike",{id:i,photoId:this.photoId_,defaultPhotoId:n})},trackTwinsView_:function(e){f.track(T,{num_result:e,celebrity_id:this.photoId_,lookalike_target:I[this.type_]})}},"TwinsController");e.exports=O},function(e,t,i){"use strict";function n(e){if(e){var t=e.photo_id,i=e.url;l("lookalikes",{uploadedPhoto:{id:t,url:i}})}}function a(e){return 13===e.getPromoBlockPosition()&&[159,150].includes(e.getPromoBlockType())}var o=i(129),s=i(3366),r=i(102),l=i(103).navigate,c=i(101),u=c.ViewElementEvent,d=c.ClickEvent,h=i(619),p=i(100),m=o.extend({construct:function(e){m._super.construct.call(this);var t=function(e){var t=e.getButtons();return{header:e.getHeader(),message:e.getMssg(),button:t&&t[0].getText()}}(e);this.element=s.render(t),this.element.find(".js-upload-photo").on("click",this.handleUploadPhotoClick_.bind(this))},onStart:function(){r.track(u,{element:369})},onStop:function(){this.currentPhotoUpload_&&this.currentPhotoUpload_.stop()},handleUploadPhotoClick_:function(){r.track(d,{element:68,parent_element:369}),this.currentPhotoUpload_=h(n)}},"NoTwinsController");e.exports=Object.assign(m,{getNoTwinsPromoBlock:function(e){var t=e.getPromoBanners();return p.find(t,a)}})},function(e,t,i){"use strict";var n=i(98),a=i(134),o=i(133),s=i(130),r=i(143),l=i(160),c=i(151),u=i(152);e.exports=i(108)("NoTwins",function(e){return n.createElement(o,null,n.createElement(s,{hpadded:!0,vpadded:!0,align:"center"},n.createElement(r,null,e.header?n.createElement(c,{text:e.header}):null,e.message?n.createElement(u,{text:e.message}):null,e.button?n.createElement(l,null,n.createElement(a,{type:"transparent",narrow:"true",text:e.button,extraClass:"needsclick js-upload-photo"})):null)))})},function(e,t,i){"use strict";var n=i(129),a=i(3368),o=i(102),s=i(101).ViewElementEvent,r=i(141),l=i(99),c=i(100),u=i(25),d=[l.get(551),l.get(552),l.get(553),l.get(554),l.get(555)],h=n.extend({construct:function(){h._super.construct.call(this),this.element=r.$satisfy("div")},handleAnimationTimeout_:function(){var e=this.element.find(".js-searching-text").get(this.searchingTextNumber_);u(e).removeClass("is-current").addClass("is-prev"),this.searchingTextNumber_++;var t=this.element.find(".js-searching-text").get(this.searchingTextNumber_);u(t).removeClass("is-next").addClass("is-current"),this.searchingTextNumber_<2&&(this.animationTimeout_=setTimeout(this.handleAnimationTimeout_.bind(this),2e3))},onStop:function(){clearTimeout(this.animationTimeout_)},setAnimated:function(e){this.animated_=e},update:function(){var e={niceThings:c.sample(d),animated:this.animated_};a.render(e,this.element,this.element.contents()),this.trackScreenView_(),this.animated_&&(clearTimeout(this.animationTimeout_),this.animationTimeout_=setTimeout(this.handleAnimationTimeout_.bind(this),1e3),this.searchingTextNumber_=0)},trackScreenView_:function(){o.track(s,{element:457})}},"TwinsNotReadyController");e.exports=h},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(133),s=i(130),r=i(106);e.exports=i(108)("TwinsNotReady",function(e){return n.createElement(o,null,n.createElement(s,{hpadded:!0,vpadded:!0,align:"center"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__loader"},n.createElement(r,{name:"loading-dots",size:"xlg"})),e.animated?n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"lookalikes-searching"},n.createElement("div",{className:"lookalikes-searching__step js-searching-text is-current"},a.get(549)),n.createElement("div",{className:"lookalikes-searching__step js-searching-text is-next"},a.get(550)),n.createElement("div",{className:"lookalikes-searching__step js-searching-text is-next"},e.niceThings))):null)))})},function(e,t,i){"use strict";var n=i(129),a=i(3370),o=i(102),s=i(103).navigate,r=i(101),l=r.ViewElementEvent,c=r.ClickEvent,u=n.extend({construct:function(){u._super.construct.call(this),this.element=a.render(),this.element.find(".js-upload-photo").click(this.handleUploadPhotoClick_.bind(this))},onStart:function(){o.track(l,{element:41})},handleUploadPhotoClick_:function(){o.track(c,{element:68,parent_element:41}),s("add-photos")}},"NoProfilePhotoController");e.exports=u},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(134),s=i(133),r=i(130),l=i(143),c=i(160),u=i(152);e.exports=i(108)("NoProfilePhoto",function(e){return n.createElement(s,null,n.createElement(r,{hpadded:!0,vpadded:!0},n.createElement(l,null,n.createElement(u,{text:a.get(538)}),n.createElement(c,null,n.createElement(o,{type:"primary",narrow:"true",extraClass:"js-upload-photo",text:a.get(537)})))))})},function(e,t,i){"use strict";function n(e){var t=o(e);return t.offset().top+t.height()<=window.scrollY+o(window).height()}var a=i(100),o=i(25),s=i(162),r=i(109),l=i(421),c=i(176),u=i(367),d=i(611),h=i(612),p=i(3372),m=i(201),g=r.extend({scroll_:null,isLargeScreen_:!1,contentElement_:null,contentHeight_:null,usersFromPreviousRender_:null,init:function(){this.sharingObservable=m(!1),this.sharingObservables_=[],this.isLargeScreen_=document.body.clientWidth>559},events:{"click .js-user-avatar":"onUserClick_"},enable:function(){return this.scroll_&&this.scroll_.start(),this.updateLayout_(),this.startUIEvents_(),g._super.enable.apply(this,arguments)},disable:function(){return this.scroll_&&this.scroll_.stop(),this.stopUIEvents_(),g._super.disable.apply(this,arguments)},startUIEvents_:function(){this.hasUIEvents_&&this.stopUIEvents_(),s.on(s.EVENTS.RESIZE,this.updateLayout_,this),this.hasUIEvents_=!0},stopUIEvents_:function(){this.hasUIEvents_&&(s.off(s.EVENTS.RESIZE,this.updateLayout_,this),this.hasUIEvents_=!1)},update:function(e){var t=e.users,i=e.hasMore,n=e.photoId,a=e.sharingProviderTypes;window.scrollTo(0,0),this.photoId_=n,this.sharingProviderTypes_=a,this.scroll_&&this.scroll_.destroy(),this.hasMore_=i,this.numberOfRenderedUsers_=0,this.renderedUsers_=[],this.numberOfRenderedLayoutSections_=0,this.maxScrollPosition_=0,this.lastViewedUserIndex_=-1,this.numberOfShareDividers_=0,this.numberOfViewedShareDividers_=0,this.usersFromPreviousRender_=[],d.render({section:this.createLayoutSections_(t),counter:!0},this.el,this.el.childNodes);var o=this.$(".js-scroll-toggle");o&&o.length&&(this.toggleScroll_=new c(o));var s=this.contentElement_=this.$el.find(".js-content");this.$el.find(".js-people-nearby-counter").html(this.options.twinsCounter);var r=s.children(),u=this.$el.find(".js-next-page-loader").get(0);this.insertShareDividers_(r),this.scroll_=(new l).setScrollableElement(window).setDisplayHiddenPages(1).setPreLoadOffset(.3).setContentElement(s.get(0)).setScrollEventHandler(this.onScroll_,this).setTurnPageEventHandler(this.onTurnPage_.bind(this)).setLoaderElements(u).setHasMore(i),r.length>0&&this.scroll_.insert(r,1),this.scroll_.updateLayout(),this.contentHeight_=s.height()},addUsers:function(e){var t=e.users,i=e.page,n=e.hasMore,o=this.scroll_;this.hasMore_=n,this.restoreHasPlaceholderFlag_();var s=h.render({section:this.createLayoutSections_(t)});this.insertShareDividers_(s);var r=a.filter(s,function(e){return e.nodeType===Node.ELEMENT_NODE});o.setHasMore(n).insert(r,i),this.contentHeight_=this.contentElement_.height()},insertShareDividers_:function(e){var t=this;e.filter(".js-share-divider").forEach(function(e){return t.createShareDivider_(e)})},createShareDivider_:function(e){var t=p({photoId:this.photoId_,sharingProviderTypes:this.sharingProviderTypes_,container:e});this.sharingObservables_.push(t),t.changeEvent.subscribe(this.updateSharingObservable_.bind(this))},updateSharingObservable_:function(){var e=this.sharingObservables_.some(function(e){return e.value});this.sharingObservable.setValue(e)},onTurnPage_:function(e){this.hasMore_&&this.options.onTurnPage(e)},onUserClick_:function(e,t){var i=Number(t.getAttribute("data-index")),n=this.renderedUsers_[i];this.options.onUserClick(n,i+1)},onScroll_:function(e){this.trackScroll_(e),this.updateViewedSharedDividers_()},updateViewedSharedDividers_:function(){if(this.numberOfShareDividers_)for(var e=this.numberOfViewedShareDividers_;e<this.numberOfShareDividers_&&n(this.$el.find('.js-share-divider[data-index="'.concat(e,'"]')));e++)this.options.onShareDividerView(),this.numberOfViewedShareDividers_=e+1},trackScroll_:function(e){if(!(e<=this.maxScrollPosition_)){this.maxScrollPosition_=e;var t=this.$el.find(".js-user-avatar").slice(this.lastViewedUserIndex_+1),i=this.lastViewedUserIndex_+1+function e(t,i,a){if(i>a)return-1;var o=Math.floor((i+a)/2);return n(t[o])?Math.max(o,e(t,o+1,a)):e(t,i,o-1)}(t,0,t.length-1);i<=this.lastViewedUserIndex_||(this.lastViewedUserIndex_=i,this.options.onScroll(this.lastViewedUserIndex_+1))}},updateLayout_:function(){this.scroll_&&this.scroll_.updateLayout();var e=this.isLargeScreen_;this.isLargeScreen_=document.body.clientWidth>559,this.screenHeight_=document.body.clientHeight,e!==this.isLargeScreen_&&this.options.onLayoutChanged();
},createLayoutSections_:function(e){var t=this.renderUsers_(e);return this.hasMore_&&this.removeHasPlaceholderFlag_(t),t},removeHasPlaceholderFlag_:function(e){var t=a.last(e);t&&t.hasPlaceholder&&!t.shareDivider?(t.hasPlaceholder=!1,this.placeholderFlagRemoved_=!0):this.placeholderFlagRemoved_=!1},restoreHasPlaceholderFlag_:function(){this.placeholderFlagRemoved_&&o(this.$(".js-list").last()).addClass("has-placeholder")},renderUsers_:function(e){var t,i=this,n=this.getUsersToRender_(e),a=[];return n.forEach(function(o,s){t&&!t.closed||(t=i.addLayoutSection_(e),a.push(t));var r=function(e){var t=new u(e,{context:u.CONTEXT.NEARBY});return t.showBumpedIcon=e.getHasBumpedIntoPlaces(),t}(o);r.index=i.numberOfRenderedUsers_,i.renderedUsers_[i.numberOfRenderedUsers_]=o,t.users.push(r),i.numberOfRenderedUsers_++;var l=!i.hasMore_&&s===n.length-1;i.tryCloseLayoutSection_(t,l)},this),t&&!t.closed&&(this.hasMore_?(this.postponeUntilNextRender_(n,t),a.pop()):this.closeLastIncompleteSection_(t)),a},getUsersToRender_:function(e){var t=(this.usersFromPreviousRender_||[]).concat(e||[]);return this.usersFromPreviousRender_=null,t},addLayoutSection_:function(){return this.numberOfRenderedLayoutSections_++,{users:[]}},getSectionSize_:function(){return this.isLargeScreen_?20:12},shouldShowShareDivider_:function(){return this.numberOfRenderedLayoutSections_%3==1},getShareDivider_:function(){var e=this.numberOfShareDividers_;return this.numberOfShareDividers_++,{index:e}},tryCloseLayoutSection_:function(e,t){var i=this.getSectionSize_();if(e.users.length===i-1&&this.shouldShowShareDivider_()){var n=e.users.length-(this.isLargeScreen_?2:1);e.users[n].addPlaceholder=!0,e.hasPlaceholder=!0,e.shareDivider=this.getShareDivider_(),e.closed=!0}e.users.length===i&&(e.hasPlaceholder=!t,e.closed=!0)},closeLastIncompleteSection_:function(e){this.isLargeScreen_?(e.users.length%5==1&&(e.users[e.users.length-1].addPlaceholder=!0,e.hasPlaceholder=!0),e.hasPlaceholder=!1):(e.hasPlaceholder=e.users.length%3!=0,e.users.length%3==2&&(e.users[e.users.length-1].addPlaceholder=!0)),this.shouldShowShareDivider_()&&1===this.numberOfRenderedLayoutSections_&&(e.shareDivider=this.getShareDivider_()),e.closed=!0},postponeUntilNextRender_:function(e,t){var i=t.users.length;this.numberOfRenderedUsers_-=i,this.numberOfRenderedLayoutSections_--,this.usersFromPreviousRender_=e.slice(-i)}},"NearbyFolder");e.exports=g},function(e,t,i){"use strict";var n,a=i(3),o=a(i(168)),s=a(i(107)),r=i(3373),l=i(3374),c=i(260),u=i(102),d=i(99),h=i(620),p=h.trackPost,m=h.getWhatsAppMessage,g=h.getSharingProviderElement,_=i(621),f=i(101),v=f.ClickEvent,E=f.PostEvent,b=i(25),y=i(201),k=(n={},(0,s.default)(n,1,{name:"Facebook",iconName:"facebook"}),(0,s.default)(n,15,{name:"Twitter",iconName:"twitter"}),n);e.exports=function(e){function t(e){var t=e.shareMethod,i=e.clientSocialSharingProviders,n=t.externalProviderType,a=i.getProviders().find(function(e){return e.getExternalProviderDetails().getType()===n});u.track(v,{element:g(a),parent_element:367}),S.setValue(!0),c.share(a,{id:"ShareProfile",returnRoute:"lookalikes",shareEvenIfNotLoggedIn:!0},function(e,t,i){i&&p(a),S.setValue(!1)})}function i(e){var t=e.clientSocialSharingProviders;u.track(v,{element:165,parent_element:367}),u.track(E,{social_media:13,activation_place:239});var i=t.getProviders(),n=m(i),a="https://api.whatsapp.com/send?text=".concat(n);window.open(a)}function n(e){var t=e.clientSocialSharingProviders;u.track(v,{element:428,parent_element:367});var i=t.getProviders();_(i,b(f).find(".js-copy-link-container"))}var a,s=e.photoId,h=e.sharingProviderTypes,f=e.container,S=y(!1),w=[].concat((0,o.default)((h||[1,15]).filter(function(e){return c.supportsExternalProviderType(e)}).map(function(e){var i=k[e];return Object.assign({externalProviderType:e,share:t},i)})),[{name:"WhatsApp",iconName:"whatsapp",share:i},{name:d.get(215),iconName:"copy",share:n}]).filter(Boolean).map(function(e,t){return Object.assign(e,{index:t})});return r.render({shareMethods:w},f),b(f).find(".js-share-method").click(function(e){var t=e.currentTarget.getAttribute("data-index");a=w[t],l({photoId:s,callback:function(e,t){if(!e&&a){var i=a;a=void 0,i.share({shareMethod:i,clientSocialSharingProviders:t})}}})}),l({photoId:s}),S}},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106);e.exports=i(108)("ShareDivider",function(e){return n.createElement("div",{className:"people-nearby-divider people-nearby-divider--compact"},n.createElement("div",{className:"cta-box cta-box--vpadded"},n.createElement("div",{className:"cta-box__header"},a.get(214)),n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"simple-share"},e.shareMethods.map(function(e){return n.createElement("div",{className:"simple-share__provider js-share-method","data-index":e.index,key:e.index},n.createElement(o,{size:"xlg",name:"adaptor-".concat(e.iconName)}))}))),n.createElement("div",{className:"cta-box__content cta-box__content--vpadded cta-box__content--hpadded js-copy-link-container is-hidden"},n.createElement("input",{type:"text",className:"share-copy-fallback js-copy-link-input"}))))})},function(e,t,i){"use strict";function n(e){var t=e.photoId,i=e.callback,n=i?[i]:[],s={loading:!0,callbacks:n};o[t]=s,a.getProviders({photoId:t,context:138},function(e,t){Object.assign(s,{error:e,clientSocialSharingProviders:t,loading:!1}),function(e,t,i){e.forEach(function(e){return e(t,i)})}(n,e,t)})}var a=i(260),o={};e.exports=function(e){var t=e.photoId,i=e.callback,a=o[t];if(a){var s=a.error,r=a.clientSocialSharingProviders,l=a.loading,c=a.callbacks;s?n({photoId:t,callback:i}):l?i&&c.push(i):i&&i(void 0,r)}else n({photoId:t,callback:i})}},function(e,t,i){"use strict";function n(e){return e>1e4?"10000+":e}function a(e,t){if("uploaded_photo"===e)return r.get(532);if("own_profile"===e)return r.get(535);var i=t.split(" ")[0];return r.get(541,i)}var o=i(109),s=i(3376),r=i(99);e.exports=o.extend({render:function(e){var t=e.personName,i=e.type,o=e.counter;s.render({title:a(i,t),counter:n(o)},this.el,this.el.childNodes)}})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("PeopleNearbyCounter",function(e){return n.createElement("div",{className:"people-nearby-counter"},n.createElement("div",{className:"people-nearby-counter__title",dangerouslySetInnerHTML:{__html:e.title}}),n.createElement("div",{className:"people-nearby-counter__counter"},e.counter))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("Lookalikes",function(e){return n.createElement("div",{className:"is-shifted-content"})})},function(e,t,i){"use strict";var n=i(129),a=i(3379),o=n.extend({construct:function(){o._super.construct.call(this),this.element=a.render()}},"SearchErrorController");e.exports=o},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(133),s=i(130),r=i(143),l=i(152);e.exports=i(108)("SearchError",function(e){return n.createElement(o,null,n.createElement(s,{hpadded:!0,vpadded:!0,align:"center"},n.createElement(r,null,n.createElement(l,{text:a.get(544)}))))})},function(e,t,i){"use strict";var n=i(100);e.exports=function(e){var t,i=window.location.host,a=/^m\./,o=/^mlink\./;return t=a.test(i)?i.replace(a,"mlink."):o.test(i)?i.replace(o,"m."):i,e=e||window.location.search,n.includes(e,"&redirect=true")||(e="".concat(e,"&redirect=true")),"https://".concat(t,"/aa/landto").concat(e)}},function(e,t,i){"use strict";function n(e){return e.getButtons()[0]}var a=i(129),o=i(3382),s=i(207),r=i(208),l=i(102),c=i(101),u=c.ViewElementEvent,d=c.ViewTooltipEvent,h=i(347),p=h.reportShow,m=h.reportClick,g=h.reportDismiss,_=i(111)("ACTION","DISMISS"),f=a.extend({init:function(){f._super.init.apply(this,arguments),this.mainView_=this.registerView(new o({el:this.parent.get(0)})).on(o.EVENTS.ACTION,this.onAction_,this).on(o.EVENTS.DISMISS,this.onDismiss_,this)},onAction_:function(){var e=n(this.promoBlock_).getAction(),t=(new s).setAction(e);r.handleAction(t),m(138,this.promoBlock_),this.trigger(_.ACTION)},setPromoBlock:function(e){if(this.promoBlock_=e,e){var t=n(e);this.mainView_.render(t.getText()),p(138,e),l.track(u,{element:467,screen_name:2}),l.track(d,{tooltip_name:20,screen_name:2})}else this.mainView_.reset()},onDismiss_:function(){g(138,this.promoBlock_),this.trigger(_.DISMISS)}},"HideMeMessageController");f.EVENTS=_,e.exports=f},function(e,t,i){"use strict";var n=i(109),a=i(3383),o=i(111)("ACTION","DISMISS"),s=n.extend({events:{"click .js-action":"onAction_","click .js-dismiss":"onDismiss_"},render:function(e){this.$el.html(a.render({buttonText:e}))},reset:function(){this.$el.empty()},onAction_:function(e){e.preventDefault(),this.trigger(o.ACTION)},onDismiss_:function(){this.trigger(o.DISMISS)}},"HideMeMessageView");s.EVENTS=o,e.exports=s},function(e,t,i){"use strict";var n=i(98),a=i(106);e.exports=i(108)("HideMeMessage",function(e){return n.createElement("div",{className:"lookalikes-hide-me-message"},n.createElement("div",{className:"lookalikes-hide-me-message__text js-action","data-qa":"action",dangerouslySetInnerHTML:{__html:e.buttonText}}),n.createElement("div",{className:"lookalikes-hide-me-message__icon js-dismiss","data-qa":"dismiss"},n.createElement(a,{name:"generic-close",size:"md"})))})},function(e,t,i){"use strict";function n(){var e=a.getSync(181);return e.getEnabled()||[2,5,20].includes(e.getRequiredAction())}var a=i(132),o=i(201)(n());a.on(a.EVENTS.UPDATE,function(e){181===e.getFeature()&&o.setValue(n())}),e.exports={isEnabled:function(){return o.value},onChange:o.onChange,unsubscribeFromChange:o.unsubscribeFromChange}},function(e,t,i){"use strict";var n=i(218),a=i(124),o=i(260),s=i(102),r=i(621),l=i(3386),c=i(622),u=i(620),d=u.getShareLookalikesTemplateData,h=u.getSharingProviderElement,p=u.trackPost,m=i(141),g=i(103).back,_=i(101),f=_.ViewScreenEvent,v=_.ClickEvent,E=_.PostEvent;e.exports=function(){function e(){x.empty(),A.show()}function t(){s.track(v,{element:113,screen_name:I}),g()}function i(e){try{!function(e){T=o.filterSupportedProviders(e.getProviders());var i=d({clientSocialSharingProviders:e,sharingProviders:T});i.isSharingUser=Boolean(P),l.render(i,x,x[0].childNodes),x.find(".js-whatsapp").click(y),x.find(".js-sharing-provider").click(u),x.find(".js-copy-link").click(_),x.find(".js-cancel").click(t),x.find(".js-open-profile").click(b),x.find(".js-navigation-close").click(k)}(e)}catch(e){if(w)throw g(),e}}function u(e){var t=e.currentTarget.getAttribute("data-index"),i=T[t];s.track(v,{screen_name:I,element:h(i)}),o.share(i,{id:"ShareProfile",popState:!0,returnRoute:"lookalikes",shareEvenIfNotLoggedIn:!0,uid:P},function(e,t,n){n&&(p(i),g())})}function _(){s.track(v,{screen_name:I,element:428}),r(T,x.find(".js-copy-link-container"))}function b(){s.track(v,{element:395,screen_name:384}),c(P,N)}function y(){s.track(v,{screen_name:I,element:165}),s.track(E,{social_media:13,activation_place:239}),g()}function k(){s.track(v,{element:113,screen_name:384}),g()}function S(){return P?384:377}var w,C,T,P,N,I,x=m.$satisfy("div.page.overlay-page"),A=n(x[0]);return e(),{element:x,notificationScreenAccess:3,overlay:!0,getScreenName:S,open:function(t){var n=t.parameters;w=!0;var r=n.photoId,l=n.userId,c=n.defaultPhotoId;C=r,P=l,N=c,s.track(f,{screen_name:S()}),e(),o.getProviders({photoId:r,userId:l,defaultPhotoId:c,context:138},function(e,t){if(r===C)return e?(a.showNotification({type:a.TYPES.ERROR}),void g()):void i(t)})},close:function(){w=!1}}}},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(134),r=i(133),l=i(130),c=i(138),u=i(143),d=i(160),h=i(623),p=i(151),m=i(106);e.exports=i(108)("ShareLookalikes",function(e){return n.createElement(r,null,e.isSharingUser?n.createElement(c,null,n.createElement(o,{extraClass:"navigation-bar--static",close:"true"})):null,n.createElement(l,{vpadded:!0,align:"center"},n.createElement("div",{className:"sharing-media"},n.createElement("div",{className:"multimedia"},n.createElement("div",{className:"multimedia__image",style:{backgroundImage:"url('".concat(e.image,"')")}}),n.createElement("div",{className:"multimedia__loader is-hidden"},n.createElement("div",{className:"loading-dots small grey ".concat(e.relative?"":"loading-dots--centered"," ").concat(e.extraClass)},n.createElement("div",{className:"first dot"}),n.createElement("div",{className:"second dot"}),n.createElement("div",{className:"third dot"})))))),n.createElement(l,{hpadded:!0,vpadded:!0,align:"center"},n.createElement(u,null,n.createElement(p,{text:a.get(214)}),n.createElement(h,null,n.createElement("div",null,n.createElement("div",{className:"external-providers-list external-providers-list--horizontal external-providers-list--centered"},e.sharingProviders.map(function(e){return n.createElement("div",{className:"external-provider js-sharing-provider","data-index":e.index,key:e.index},n.createElement("div",{className:"external-provider__icon"},n.createElement(m,{name:"adaptor-".concat(e.logoUrl)})),n.createElement("div",{className:"external-provider__details"},n.createElement("div",{className:"external-provider__details-summary"},e.displayName)))}),n.createElement("div",{className:"external-provider js-whatsapp"},n.createElement("a",{href:"https://api.whatsapp.com/send?text=".concat(e.whatsappMessage),target:"_blank"},n.createElement("div",{className:"external-provider__icon"},n.createElement(m,{name:"adaptor-whatsapp"})),n.createElement("div",{className:"external-provider__details"},n.createElement("div",{className:"external-provider__details-summary"},"WhatsApp")))),n.createElement("div",{className:"external-provider js-copy-link"},n.createElement("div",{className:"external-provider__icon"},n.createElement(m,{name:"adaptor-copy"})),n.createElement("div",{className:"external-provider__details"},n.createElement("div",{className:"external-provider__details-summary"},a.get(215))))),n.createElement("div",{className:"share-copy-fallback-container is-hidden js-copy-link-container"},n.createElement("input",{type:"text",className:"share-copy-fallback js-copy-link-input"})))),n.createElement(d,null,e.isSharingUser?n.createElement(s,{narrow:"true",type:"transparent",extraClass:"js-open-profile",text:a.get(557)}):n.createElement("button",{className:"inline-button js-cancel"},n.createElement("span",{className:"inline-button__text"},a.get(19)))))))})},function(e,t,i){"use strict";var n=i(121),a=i(218),o=i(150),s=i(105).ExternalProviderSecurityCredentials,r=i(103),l=i(124),c=i(122),u=n.extend({headerTemplate:null,trackHotPanelScreen:function(){},construct:function(){u._super.construct.apply(this,arguments),this.loader_=a(this.element[0])},onStart:function(){if(u._super.onStart.apply(this,arguments),this.loader_.show(),this.getParameter("providerId"))this.onAuthSuccess_(this.getParameters());else{var e=this.getParameter("redirectSuccess")||this.getParameter("redirect");o.once(o.EVENTS.AUTH_ERROR,this.handleError_,this),o.login({providerType:1,providerContext:3,returnRoute:"connect-facebook",redirect:e,replaceCurrentUrl:!0,callback:this.onAuthSuccess_.bind(this)})}},onStop:function(){u._super.onStop.apply(this,arguments),this.loader_.hide(),o.off(o.EVENTS.AUTH_ERROR,this.handleError_,this)},onAuthSuccess_:function(e){var t=(new s).setProviderId(e.providerId).setProviderType(e.providerType).setContext(e.providerContext).setNativelyAuthenticated(!1);new c(376,t).on(46,this.onExternalProviderLinked_,this).request()},onExternalProviderLinked_:function(e){if(e)this.handleError_(e);else{var t=this.getParameter("redirectSuccess")||this.getParameter("redirect");r.navigate(t,!0)}},handleError_:function(){var e=this.getParameter("redirectError")||this.getParameter("redirect");r.navigate(e,!0),l.showNotification({type:l.TYPES.ERROR})}},"ConnectFacebook");e.exports=u},function(e,t,i){"use strict";var n=i(113),a=i(121),o=i(608),s=i(99),r=i(150),l=i(136),c=a.extend({clientSource:111,transition:!1,createElement:function(){return l({qaAttribute:"work-education"})},onStart:function(){var e=this;c._super.onStart.apply(this,arguments),this.createView_().then(function(){return e.readyForVrt()})},onStop:function(){c._super.onStop.apply(this,arguments),this.destroy()},createView_:function(){var e,t,i,a,l,c,u=this.registerView(new o).on(o.EVENTS.ACTION,this.onAction_,this);return u.update((e=!this.getParameter("notFound"),t=n.getUser().getGender(),i=e?s.get(305):s.get(304),a=2===t?s.get(313):s.get(312),l=e?a:s.get(306),c=e?s.get(314):s.get(284),{message:l,primary:{text:c},title:i,type:o.TYPES.IMPORT})),u.setButtonLoading(!0),this.parent.append(u.el),r.getSupportedProviders({providerContext:6}).then(function(){return u.setButtonLoading(!1)})},onAction_:function(){r.startImport({providerContext:6,providerType:1,replaceCurrentUrl:!0,returnRoute:"own-profile-work-and-educations"})},getNavigationBarContext:function(){return c._super.getNavigationBarContext.call(this,{title:s.get(282)})}},"WorkEducationController");e.exports=c},function(e,t,i){"use strict";function n(e){var t=c.first(e.getButtons()),i=t&&t.getText()||e.getAction(),n=t&&t.getAction()||e.getOkAction(),a=e.getOkPaymentProductType();if(!(c.isUndefined(i)||c.isUndefined(n)||c.isUndefined(a)))return{text:i,actionType:n,productType:a,promoBlockType:e.getPromoBlockType(),cost:e.getCreditsCost()}}function a(e){return{id:e.getProviderId(),providerType:e.getProvider(),name:e.getProviderName(),image:e.getImageInactive(),imageSelected:e.getImage(),provider:e}}function o(e,t){return t.isMostPopular?e.unshift(t):e.push(t),e}function s(e){return e&&e.getDefaultProductUid()}function r(e,t){return c.find(e,function(e){return e.getProviderId()===t})}function l(e,t){if(37===e)return{type:d.IMAGE_TYPE.SYMBOL,value:"avatar-placeholder-invisible"};var i=t.getDisplayImages();return i?{type:d.IMAGE_TYPE.URL,value:i,disableMasking:t.getDisableMasking()}:d.getPlaceholderForGender()}var c=i(100),u=i(199),d=i(169);e.exports={getContextualCarouselData:function(e){return e.map(function(e){var t,i,a=c.first(e.getPictures()),o=a.getBadgeType(),s=e.getPromoBlockType();return 2===o?i={type:"double-credits-badge",text:a.getBadgeText()}:t=u.getBadgeTypeForPromoBlock(s),{descriptionText:e.getMssg(),isGift:5===e.getOkPaymentProductType(),badgeType:t,mark:i,picture:l(s,a),action:n(e),bannerId:e.getPromoBlockType(),cost:e.getCreditsCost()}})},getMopData_:function(e,t){return(t=function(e,t){return t.filter(function(t){var i=t.getProviderId();return function(e,t){return e.reduce(function(e,i){var n=c.find(i.getProviders(),function(e){return e.getProviderId()===t});return e+(n?1:0)},0)}(e,i)>0})}(e,t)).map(a)},getStoredMopText:function(e){return e.getSavedPaymentAvailable()&&e.getSavedPaymentText()},getPackagesData:function(e,t,i,n){var a=s(r(i,n));return t.filter(function(e,t){return t.getProviders().reduce(function(t,i){return t||i.getProviderId()===e||c.isUndefined(i.getProviderId())},!1)}.bind(null,n)).map(this.productToPackage_.bind(this,e,a,n)).reduce(o,[])},getDefaultProvider:function(e){var t=e.getDefaultProviderId(),i=e.getProviderName();return r(i,t)||i[0]},getMostPopularProductForProvider:function(e,t){return function(e,t){return c.find(e,function(e){return e.getUid()===t})}(e,s(t))},getIsProductTrial:function(e){var t=e.getOptions();return t&&-1!==t.indexOf(2)},productToPackage_:function(e,t,i,n){var a=n.getProviders(),o=a[0],s=this.getIsProductTrial(n),r=s?o:c.find(a,function(e){return e.getProviderId()===i||s}),l=n.getOptions(),u=c.isArray(l)&&-1!==l.indexOf(1),d=c.isArray(l)&&-1!==l.indexOf(3);return"x1"===r.getMultiplierBadge()&&r.delDiscount(),{discount:r.getDiscount(),id:n.getUid(),isLifeTime:u,isMostPopular:n.getUid()===t,title:r.getDisplayName(),previousTitle:d?r.getPreviousDisplayName():null,subtitle:s?r.getDescription():r.getDisplayPrice(),price:r.getDisplayPrice(),pricePerUnit:{amount:s?r.getDisplayPrice():r.getPricePerUnit(),unit:r.getUnitName()},product:n}}}},function(e,t,i){"use strict";e.exports={SPP:"spp",SPP_CONTEXTUAL:"spp-contextual",CREDITS:"credits",CREDITS_CONTEXTUAL:"credits-contextual"}},function(e,t,i){"use strict";var n=i(129),a=i(111),o=i(3392),s=o.ACTIONS,r=a("MAIN"),l=n.extend({selectedProviderId_:null,idToProvidersMap_:null,construct:function(e){l._super.construct.call(this),this.parent=e},init:function(){this.registerView(r.MAIN,new o).on(o.ACTIONS.SELECT_MOP,this.onSelect_.bind(this))},onStart:function(){l._super.onStart.apply(this,arguments),this.getView(r.MAIN).appendTo(this.parent)},onParametersUpdate:function(){var e=this.getParameter("providers"),t={providers:e};this.mapIdToProviders_(e),this.updateView(r.MAIN,t)},reset:function(){this.getView(r.MAIN).reset()},select:function(e){this.getView(r.MAIN).select(e),this.selectedProviderId_=e},onSelect_:function(e){e!==this.selectedProviderId_&&this.trigger(s.SELECT_MOP,this.getProviderById_(e))},mapIdToProviders_:function(e){var t=this;this.idToProvidersMap_={},e.forEach(function(e){t.idToProvidersMap_[e.id]=e.provider})},getProviderById_:function(e){return this.idToProvidersMap_[e]}},"MethodsOfPaymentController");l.ACTIONS=s,e.exports=l},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(109),s=i(111),r=i(624),l=s("SELECT_MOP"),c="is-active",u=o.extend({events:{"click .js-select-action":"onSelect_"},update:function(e){u._super.update.apply(this,arguments),n.isArray(e.providers)&&(e.PROVIDER_TYPE={FORTUMO:83,WEB:102,GOOGLE_WALLET:113,BOKU_WEB:114,PAYPAL:35,PAYMENT_PROVIDER_TYPE_CENTILI:152},this.render(e))},render:function(e){this.$el.html(r.render(e))},select:function(e){this.$el.find(".js-select-action").removeClass(c),this.$el.find('.js-select-action[data-id="'.concat(e,'"]')).addClass(c)},onSelect_:function(e){var t=a(e.target).closest(".js-select-action").data("id");this.trigger(l.SELECT_MOP,t)}},"MethodsOfPaymentView");u.ACTIONS=l,e.exports=u},function(e,t,i){"use strict";var n=i(111),a=i(129),o=i(3394),s=o.ACTIONS,r=n("MAIN"),l=a.extend({construct:function(e){var t=e.container,i=e.onCancelButtonClick;l._super.construct.call(this),this.parent=t,this.registerView(r.MAIN,new o({onCancelButtonClick:i})).on(o.ACTIONS.AUTO_TOPUP_TOGGLE,this.onAutoTopup_.bind(this)).on(o.ACTIONS.TERMS_CLICK,this.onTermsClick.bind(this))},onStart:function(){l._super.onStart.apply(this,arguments),this.getView(r.MAIN).appendTo(this.parent)},render:function(e){this.state_=e,this.updateView(r.MAIN,e)},reset:function(){this.getView(r.MAIN).reset()},getAutoTopupValue:function(){return this.state_.autoTopup},onAutoTopup_:function(e){this.state_.autoTopup.enabled&&(this.state_.autoTopup.checked=e,this.updateView(r.MAIN,this.state_),this.trigger(s.AUTO_TOPUP_TOGGLE,e))},onTermsClick:function(e){this.trigger(s.TERMS_CLICK,e)}},"PaymentBottomController");l.ACTIONS=s,e.exports=l},function(e,t,i){"use strict";var n=i(3)(i(127)),a=i(109),o=i(111),s=i(625),r=o("AUTO_TOPUP_TOGGLE","TERMS_CLICK"),l="is-selected",c=a.extend({events:{"click .js-auto-topup-toggle-action":"onAutoTopup_","click .js-terms-link":"onTermsClick_"},update:function(e){c._super.update.apply(this,arguments),e.selectedClass=l,this.render(e)},render:function(e){var t;this.$el.html(s.render((0,n.default)({},e,{terms:(t=e.terms,t&&t.replace(u,function(e,t,i){return'<a class="js-terms-link" data-link="'.concat(t,'">').concat(i,"</a>")}))}))),this.$(".js-cancel-button").click(this.options.onCancelButtonClick)},onAutoTopup_:function(){var e=this.$el.find(".js-auto-topup-toggle-action").hasClass(l);this.trigger(r.AUTO_TOPUP_TOGGLE,!e)},onTermsClick_:function(e){var t=e.target.getAttribute("data-link");this.trigger(r.TERMS_CLICK,t)}},"PaymentBottomView"),u=/\{([^|]*)\|([^}]*)?\}/g;c.ACTIONS=r,e.exports=c},function(e,t,i){"use strict";var n=i(3)(i(127)),a=i(111),o=i(99),s=i(129),r=i(3396),l=r.ACTIONS,c=a("MAIN"),u=s.extend({construct:function(e){u._super.construct.apply(this,arguments),this.parent=e},init:function(){this.registerView(c.MAIN,new r).on(r.ACTIONS.CLICK_SUBMIT,this.trigger.bind(this,l.CLICK_SUBMIT)).on(r.ACTIONS.CLICK_SELECT_ANOTHER_METHOD,this.trigger.bind(this,l.CLICK_SELECT_ANOTHER_METHOD))},onStart:function(){u._super.onStart.apply(this,arguments),this.getView(c.MAIN).appendTo(this.parent)},showSubmitState:function(e){this.getView(c.MAIN).render((0,n.default)({isSubmitState:!0},e,{text:e.text||o.get(21)}))},showSelectAnotherMethodState:function(e){this.getView(c.MAIN).render({isSubmitState:!1,providerAction:o.get(178),providerMessage:o.get(177,e)})}},"PaymentFloatingButtonController");u.ACTIONS=l,e.exports=u},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(3397),s=a("CLICK_SUBMIT","CLICK_SELECT_ANOTHER_METHOD"),r=n.extend({events:{"click .js-click-submit":"onSubmitClick_","click .js-click-select-another-method":"onSelectAnotherMethodClick_"},render:function(e){this.$el.html(o.render(e))},onSubmitClick_:function(){this.trigger(s.CLICK_SUBMIT)},onSelectAnotherMethodClick_:function(){this.trigger(s.CLICK_SELECT_ANOTHER_METHOD)}},"PaymentBottomView");r.ACTIONS=s,e.exports=r},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return t=t.shiftBlocks(l),e.w('<div class="floating-action">').b(t.getBlock("action"),t,{},{}).w('</div><div class="fake">').b(t.getBlock("action"),t,{},{}).w("</div>")}function i(e,t){return t=t.shiftBlocks(l),e.x(t.get(["isSubmitState"],!1),t,{else:n,block:a},{})}function n(e,t){return t=t.shiftBlocks(l),e.w('<div class="cta-box js-click-select-another-method"><div class="cta-box__content">').f(t.get(["providerMessage"],!1),t,"h",["s"]).w('</div><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{},{type:"billing-green",text:t.get(["providerAction"],!1),extraClass:"js-action"},"h").w("</div></div></div></div>")}function a(e,t){return t=t.shiftBlocks(l),e.w('<div class="cta-box js-click-submit"><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{attrs:o,block:r},{type:"billing-green",text:t.get(["text"],!1),subText:t.get(["subText"],!1),extraClass:"js-payment-submit-action"},"h").w("</div></div></div></div>")}function o(e,t){return t=t.shiftBlocks(l),e.x(t.get(["disabled"],!1),t,{block:s},{})}function s(e,t){return t=t.shiftBlocks(l),e.w("disabled")}function r(e,t){return t=t.shiftBlocks(l),e}e.register("payments/payment-floating-button",t);var l={action:i};return t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(129),a=i(111),o=i(3399),s=o.ACTIONS,r=a("MAIN"),l=n.extend({selectedProductUid_:null,idToProductsMap_:null,construct:function(e){l._super.construct.call(this),this.parent=e},init:function(){this.registerView(r.MAIN,new o).on(o.ACTIONS.SELECT_PACKAGE,this.onSelect_.bind(this))},onStart:function(){l._super.onStart.apply(this,arguments),this.getView(r.MAIN).appendTo(this.parent)},onParametersUpdate:function(){var e=this.getParameter("packages"),t={packages:e,productType:this.getParameter("productType")};this.mapIdToPackage_(e),this.updateView(r.MAIN,t),this.selectedProductUid_=void 0},reset:function(){this.getView(r.MAIN).reset()},select:function(e){this.getView(r.MAIN).select(e),this.selectedProductUid_=e},onSelect_:function(e){e!==this.selectedProductUid_?this.trigger(s.SELECT_PACKAGE,this.getProductById_(e)):this.trigger(s.CONFIRM_PACKAGE,this.getProductById_(e))},mapIdToPackage_:function(e){var t=this;this.idToProductsMap_={},e.forEach(function(e){t.idToProductsMap_[e.id]=e.product})},getProductById_:function(e){return this.idToProductsMap_[e]}},"PaymentPackagesController");l.ACTIONS=s,e.exports=l},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(111),s=i(109),r=i(626),l=o("CONFIRM_PACKAGE","SELECT_PACKAGE"),c="is-selected",u=s.extend({events:{"click .js-select-action":"onSelect_"},update:function(e){u._super.update.apply(this,arguments),n.isArray(e.packages)&&(e.productType&&(1===e.productType?e.productTypeName="spp":e.productTypeName="credits"),this.render(e))},render:function(e){this.$el.html(r.render(e))},select:function(e){this.$el.find(".js-payment-package").removeClass(c),this.$el.find('.js-payment-package[data-id="'.concat(e,'"]')).addClass(c)},onSelect_:function(e){var t=a(e.target).closest(".js-payment-package").data("id");this.trigger(l.SELECT_PACKAGE,t)}},"paymentPackagesView");u.ACTIONS=l,e.exports=u},function(e,t,i){"use strict";var n=i(100),a=i(129),o=i(199),s=i(111),r=i(216),l=i(103),c=i(3401),u=s("MAIN"),d=s("START_PAYMENT","END_PAYMENT"),h=a.extend({promoBlocks_:[],displayedIndex_:null,hotPanelPaymentFlowId_:null,construct:function(e){h._super.construct.call(this),this.parent=e},init:function(){this.registerView(u.MAIN,new c).on(c.ACTIONS.SWIPE_CAROUSEL,this.onSwipe_.bind(this)).on(c.ACTIONS.SELECT_PROMO,this.onPromoSelect_.bind(this))},onStart:function(){h._super.onStart.apply(this,arguments),this.getView(u.MAIN).appendTo(this.parent),o.on(o.EVENTS.START_PAYMENT,this.onStartPayment_.bind(this)).on(o.EVENTS.END_PAYMENT,this.onEndPayment_.bind(this))},onStop:function(){h._super.onStop.apply(this,arguments),o.off(o.EVENTS.START_PAYMENT,this.onStartPayment_.bind(this)).off(o.EVENTS.END_PAYMENT,this.onEndPayment_.bind(this))},updateParameters:function(e){h._super.updateParameters.apply(this,arguments),this.promoBlocks_=e.promoBlocks,this.updateView(u.MAIN,e)},getCurrentPromoBlock:function(){return n.get(this.promoBlocks_,this.displayedIndex_||0)},reset:function(){this.getView(u.MAIN).reset()},setHotPanelPaymentFlowId:function(e){this.hotPanelPaymentFlowId_=e},onSwipe_:function(e){if(this.displayedIndex_!==e){if(!n.isNull(this.displayedIndex_)){var t=this.promoBlocks_[e].bannerId;this.hotPanelPaymentFlowId_,r.trackChangeCarouselMessage(this.hotPanelPaymentFlowId_,t)}this.displayedIndex_=e}},onPromoSelect_:function(e){var t=e.actionType,i=e.promoBlockType,n=e.productType,a={from:l.getUrl()};o.handlePromoSelected({action:t,activationPlace:180,banner:i,cost:100,productType:n},a)},onStartPayment_:function(){this.trigger(d.START_PAYMENT),this.getView(u.MAIN).startLoading()},onEndPayment_:function(){this.trigger(d.END_PAYMENT),this.getView(u.MAIN).stopLoading()}},"CarouselController");n.assign(h,{VIEWS:u,EVENTS:d}),e.exports=h},function(e,t,i){"use strict";var n,a=i(3),o=a(i(127)),s=a(i(107)),r=i(25),l=i(109),c=i(162),u=i(111),d=i(3402),h=i(627),p=i(3403),m=u("SELECT_PROMO","SWIPE_CAROUSEL"),g=(n={},(0,s.default)(n,1,3),(0,s.default)(n,13,4),n),_=l.extend({events:{"click .js-action":"onSelectPromo_"},stickyScroll_:null,init:function(){_._super.init.apply(this,arguments),c.on(c.EVENTS.ORIENTATION_CHANGE,this.onOrientationChange_,this),this.renderSkeleton_()},destroy:function(){_._super.destroy.apply(this,arguments),c.off(c.EVENTS.ORIENTATION_CHANGE,this.onOrientationChange_,this)},update:function(e){var t=e.promoBlocks,i=e.productType;_._super.update.apply(this,arguments),this.promoBlocks_=t,this.productType_=i,this.singleMode_=this.promoBlocks_.length<=1,this.render(),this.updateStickyScroll_()},render:function(){this.$el.html(h.render({promoBlocks:this.promoBlocks_.map(function(e,t){return(0,o.default)({},e,{isActive:0===t,smallText:e.descriptionText.length>60})}),singleMode:this.singleMode_}))},renderSkeleton_:function(){this.$el.html(h.render({skeleton:!0}))},reset:function(){this.renderSkeleton_(),this.autoSwipedCarousel_&&(this.autoSwipedCarousel_.stop(),this.autoSwipedCarousel_=void 0)},onSelectPromo_:function(e){if(!this.isLoading_){var t=r(e.target).closest(".js-carousel-page"),i=this.promoBlocks_[t.data("index")].action;(i.productType||i.actionType)&&this.trigger(m.SELECT_PROMO,i)}},updateStickyScroll_:function(){if(this.stickyScroll_&&(this.removeView("sticky-scroller"),this.stickyScroll_=null),!this.singleMode_){var e={el:this.$el.find(".js-sticky-scroller")[0],handleBullets:!0};this.stickyScroll_=this.registerView("sticky-scroller",new d(e)),this.stickyScroll_.setScrollCallback(this.onSwipe_,this),this.isEnabled_&&this.stickyScroll_.enable(),this.stickyScroll_.updateLayout(),this.updateAutoSwipedCarousel_(),this.currentIndex_=0}},updateAutoSwipedCarousel_:function(){this.autoSwipedCarousel_&&(this.autoSwipedCarousel_.stop(),
this.autoSwipedCarousel_=void 0);var e=g[this.productType_];e&&(this.autoSwipedCarousel_=p({stickyScroll:this.stickyScroll_,period:e}),this.isEnabled_&&this.autoSwipedCarousel_.start())},onEnable:function(){this.autoSwipedCarousel_&&this.autoSwipedCarousel_.start()},onDisable:function(){this.autoSwipedCarousel_&&this.autoSwipedCarousel_.stop()},startLoading:function(){this.isLoading_=!0},stopLoading:function(){this.isLoading_=!1},onSwipe_:function(){this.isEnabled()&&this.trigger(m.SWIPE_CAROUSEL,this.currentIndex_)},onOrientationChange_:function(){this.stickyScroll_&&this.stickyScroll_.updateLayout(!1,!0)}},"CarouselView");_.ACTIONS=m,e.exports=_},function(e,t,i){"use strict";var n=i(100),a=i(424),o=a.EVENTS,s=a.extend({getFocusedIndex_:function(){return this.children_.length>2?1:0},updateLayout:function(e,t){this.setChildren_();for(var i=0;i<this.getFocusedIndex_();i++)this.innerContainer_.prepend(this.children_[this.children_.length-i-1].el);return this.setChildren_(),this.width_=this.$el.offsetParent().width,this.selectChild(this.getFocusedIndex_(),t),e?this.onScrollToChildEnd_():this.scrollCallback_&&this.closest_&&this.scrollCallback_(this.closest_),this},onScrollToChildEnd_:function(){if(s._super.onScrollToChildEnd_.apply(this,arguments),this.closestPrev_&&this.closest_){var e=this.closestPrev_.index,t=this.closest_.index,i=Math.abs(t-e);if(t>e)for(var n=0;n<i;n++)this.innerContainer_.append(this.children_[n].el);else if(t<e&&this.children_.length>2)for(var a=0;a<i;a++)this.innerContainer_.prepend(this.children_[this.children_.length-(a+1)].el)}this.setChildren_(),this.selectChild(this.getFocusedIndex_())},scrollToPosition_:function(e){if(e>0&&2===this.children_.length&&0===this.closest_.index){var t=this.closest_;this.innerContainer_.prepend(n.last(this.children_).el),this.setChildren_(),this.closest_=this.children_[t.index+1],e+=t.position-this.closest_.position}s._super.scrollToPosition_.call(this,e)}},"InfiniteStickyScroll");a.EVENTS=o,e.exports=s},function(e,t,i){"use strict";e.exports=function(e){function t(){r=!0,o&&a()}function i(){r=!1,o&&n()}function n(){a(),s=setInterval(function(){return l.selectNext()},1e3*c)}function a(){clearTimeout(s)}var o,s,r,l=e.stickyScroll,c=e.period,u=l.el;return{start:function(){o||(o=!0,u.addEventListener("touchstart",t),u.addEventListener("touchmove",t),u.addEventListener("touchend",i),r||n())},stop:function(){o=!1,a(),u.removeEventListener("touchstart",t),u.removeEventListener("touchmove",t),u.removeEventListener("touchend",i)}}}},function(e,t,i){"use strict";var n=i(111),a=i(109),o=i(3405),s=n("HEADER","METHODS_OF_PAYMENT","PAYMENT_PACKAGES","PAYMENT_BOTTOM","PAGE_CONTENT","TRANSACTIONS","FLOATING_BUTTON"),r=n("SUBMIT"),l={HEADER:"js-header",METHODS_OF_PAYMENT:"js-mops-list",PAYMENT_PACKAGES:"js-payment-packages",PAYMENT_BOTTOM:"js-payment-bottom",TRANSACTIONS:"js-transactions",IS_BLOCKED:"is-blocked",FLOATING_BUTTON:"js-floating-button"},c=a.extend({className:!1,sections_:null,rendered_:null,events:{"click .js-payment-submit-action":"onSubmit_"},init:function(){c._super.init.apply(this,arguments),this.rendered_=!1,this.render()},render:function(){if(!this.rendered_){var e=o.render();this.$el.html(e),this.setSections_(e),this.rendered_=!0}},getSection:function(e){return this.sections_.hasOwnProperty(e)?this.sections_[e]:null},setSections_:function(e){for(var t in this.sections_={},s)s.hasOwnProperty(t)&&(this.sections_[s[t]]=e.find(".".concat(l[t])),this.sections_[s[t]].length||(this.sections_[s[t]]=e.filter(".".concat(l[t]))))},blockPayments:function(){this.$(".js-payment-packages-wrapper").addClass(l.IS_BLOCKED)},unblockPayments:function(){this.$(".js-payment-packages-wrapper").removeClass(l.IS_BLOCKED)},onSubmit_:function(){this.trigger(r.SUBMIT)}},"Payments");c.SECTIONS=s,c.CLASSES=l,c.ACTIONS=r,e.exports=c},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="payment-carousel-wrapper js-header"></div><div class="payment-packages-wrapper js-payment-packages-wrapper"><div class="js-mops-list"></div><div class="js-payment-packages"></div><div class="payment-topup-wrapper js-payment-bottom"></div></div><div class="js-floating-button"></div>')}return e.register("payments/payments",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(109),a=i(3407),o=n.extend({className:!1,init:function(){o._super.init.apply(this,arguments),this.render()},render:function(){this.$el.html(a.render())},getIframe:function(){return this.$(".js-payment-process-window")[0]}},"CreditCardOverlay");e.exports=o},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="payment-process-window"><div class="layout layout--stretched-content"><div class="layout__header">').h("NavigationBar",t,{},{noFake:t.get(["true"],!1),close:t.get(["true"],!1),extraClass:"navigation-bar--transparent"},"h").w('</div><div class="layout__content"><div class="payment-process-window__content"><div class="payment-process-window__fake"><iframe class="js-payment-process-window" src="" style="width: 100%; height: 100%; border: none;" scrolling="no" /></div></div></div></div></div><style>.payment-process-window {z-index: 12;position: fixed;top: 0;right: 0;left: 0;bottom: 0;}.payment-process-window.is-active {display: block;}.payment-process-window__content {position: absolute;top: 0;right: 0;bottom: 0;left: 0;/** imitation */overflow: auto;}.payment-process-window__fake {display: block;position: absolute;top: 0;right: 0;bottom: 0;left: 0;}</style>')}return e.register("payments/credit-card-overlay",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(423),a=i(136),o=n.extend({overlay:!0,createElement:function(){return a({className:"pay-overlay overlay-page"})},getNavigationActions:function(){return{close:!0}}},"PaymentsOverlay");e.exports=o},function(e,t,i){"use strict";var n=i(103),a=i(121),o=i(142).PAGE_TRANSITIONS,s=i(3410),r=i(3412),l=i(331),c=i(315),u=a.extend({transition:o.FORWARD,paymentOptions_:null,init:function(){var e=this;u._super.init.apply(this,arguments),this.registerView("view",new s).on(s.ACTIONS.SUBMIT,this.onSubmit_,this).on(s.ACTIONS.LOCATION,function(t){l.getInstance().get(t).then(function(t){return e.getView("view").updateLocation(t)})}),this.registerController("controller-transaction",new c({mode:c.MODES.NEW_LAYOUT})).on(c.EVENTS.SUCCESS,this.onPaymentSuccess_,this).on(c.EVENTS.FAILED,this.onPaymentFailed_,this).on(c.ACTIONS.BACK,this.onPaymentSuccess_,this)},onStart:function(){var e=this;this.purchase_=this.getParameter("purchase"),this.selectedProvider_=this.getParameter("selectedProvider"),this.billingInfo_=this.selectedProvider_.getPrefilledBillingInfo(),this.getView("view").appendTo(this.element),this.updateNavigationBar({title:this.selectedProvider_.getProviderName()}),r.getInstance().get(12).then(function(t){(t=t[0])&&e.update(t.getRegions([]).map(function(t){return e.doRegion_(t)}))}),u._super.onStart.apply(this,arguments)},doRegion_:function(e){var t=0,i=this.billingInfo_.getRegion();return i&&(t=i.getId()),{id:e.getId(),name:e.getName(),isSelected:e.getId()===t}},update:function(e){this.getView("view").update({city:this.billingInfo_.getCity().getName(),description:this.billingInfo_.getDescription(),fullName:this.billingInfo_.getFullName(),postcode:this.billingInfo_.getPostcode(),regions:e,streetAddress:this.billingInfo_.getStreetAddress(),taxId:this.billingInfo_.getTaxId()})},getNavigationActions:function(){return{back:!0}},onSubmit_:function(e){var t=this;Object.assign(this.purchase_,{billingInfo:e}),setTimeout(function(){var e=t.getController("controller-transaction");e.start(),e.updateParameters(t.purchase_)},0)},onPaymentSuccess_:function(){n.back()},onPaymentFailed_:function(e){var t=e.getFormError();t&&this.getView("view").showErrors(t&&t.getErrors([]))}},"AddBillingInfo");e.exports=u},function(e,t,i){"use strict";var n=i(25),a=i(100),o=i(109),s=i(111),r=i(3411),l=i(584),c=s("SUBMIT","LOCATION"),u=o.extend({className:"add-billing-info-view",events:{"click .js-continue":"onClick_","click .js-city-item":"onSelectLocation_","click .js-input-clear":"onClearLocation_"},update:function(e){this.$el.html(r.render(e)),this.$form_=document.querySelector(".js-billing-info-form"),this.$locationField_=this.$("#signup-location"),this.$locationList_=this.$(".js-locations-list"),this.$(".js-regions-select").on("change",this.changeSelect_),this.$locationField_.on("input",a.throttle(this.onChangeLocation_,350)),this.changeSelect_()},onChangeLocation_:function(e){this.trigger(c.LOCATION,e.target.value)},updateLocation:function(e){this.$locationList_.toggleClass("hidden",0===e.length).html(l.render({cities:e}))},onSelectLocation_:function(e,t){this.selectedCity_=n(t).data(),this.$locationList_.addClass("hidden"),this.$locationField_.val(this.selectedCity_.name)},onClearLocation_:function(){this.$locationField_.val("").focus(),this.$locationList_.addClass("hidden"),this.selectedCity_=null},changeSelect_:function(){this.$(".js-region-surrogate").text(this.$(".js-regions-select").get(0).selectedOptions[0].textContent)},onClick_:function(){for(var e=!0,t={},i=0;i<this.$form_.elements.length;i+=1){var a=this.$form_.elements[i],o=n(a),s=o.attr("data-type").replace(/_([a-z])/g,function(e){return e[1].toUpperCase()}),r=o.val();this.toggleError_(o),""===r&&(this.toggleError_(o,null,!0),e=!1),"city"===s?this.selectedCity_?t[s]=this.selectedCity_:t[s]={name:r,id:0}:t[s]="state"===s?{id:r,name:a.selectedOptions[0].textContent}:r}e&&this.trigger(c.SUBMIT,t),this.$locationList_.addClass("hidden")},showErrors:function(e){for(var t=this,i=function(i){var a=n(t.$form_.elements[i]),o=a.attr("data-type"),s=e.find(function(e){return e.getFieldName()===o});t.toggleError_(a,s&&s.getError())},a=0;a<this.$form_.elements.length;a+=1)i(a)},toggleError_:function(e,t,i){var n=e.closest(".js-control"),a=n.find(".js-input-wrapper"),o=n.find(".js-control-error");o.removeClass("show-error"),a.removeClass("is-invalid"),!t&&i&&(t=o.html()),t&&(a.addClass("is-invalid"),o.addClass("show-error").html(t))}},"AddBillingInfoView");u.ACTIONS=c,e.exports=u},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return t=t.shiftBlocks(l),e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{},{back:"true",title:"Boleto",scrollToggle:"1",scrollToggleClass:"navigation-bar--shadow"},"h").w('</div><div class="layout__content layout__content--hpadded"><form class="form-uniform js-billing-info-form"><div class="control control--location js-control"><div class="control__error js-control-error">').h("t",t,{},{k:"618"},"h").w('</div><div class="control__inputs"><div class="input js-input-wrapper has-value"><div class="input__icon"><div class="input__icon-pointer">').h("Icon",t,{},{name:"elements-input-location",size:"sm"},"h").w('</div><div class="input__icon-cancel js-input-clear">').h("Icon",t,{},{name:"elements-input-clear",size:"sm"},"h").w('</div><div class="input__icon-loader">').h("Icon",t,{},{name:"loading-dots",size:"md"},"h").w('</div></div><input name="location" id="signup-location" class="input__field" type="location" data-type="city" value="').f(t.get(["city"],!1),t,"h").w('" autocomplete="off"><label class="control__label" for="signup-location">').h("t",t,{},{k:"147"},"h").w('</label></div></div><ul class="control__extra hidden js-locations-list"></ul></div><div class="control js-control"><div class="control__error js-control-error">').h("t",t,{},{k:"619"},"h").w('</div><div class="control__inputs"><div class="input js-input-wrapper has-value"><input type="text" class="input__field js-input-field" data-type="tax_id" value="').f(t.get(["taxId"],!1),t,"h").w('"><label class="control__label">').h("t",t,{},{k:"614"},"h").w('</label></div></div></div><div class="control js-control"><div class="control__error js-control-error">').h("t",t,{},{k:"620"},"h").w('</div><div class="control__inputs"><div class="input js-input-wrapper has-value"><input type="text" class="input__field js-input-field" data-type="full_name" value="').f(t.get(["fullName"],!1),t,"h").w('"><label class="control__label">').h("t",t,{},{k:"613"},"h").w('</label></div></div></div><div class="control js-control"><div class="control__error js-control-error">').h("t",t,{},{k:"621"},"h").w('</div><div class="control__inputs"><div class="input js-input-wrapper has-value"><input type="text" class="input__field js-input-field" data-type="street_address" value="').f(t.get(["streetAddress"],!1),t,"h").w('"><label class="control__label">').h("t",t,{},{k:"615"},"h").w('</label></div></div></div><div class="control js-control"><div class="control__error js-control-error">').h("t",t,{},{k:"622"},"h").w('</div><div class="control__inputs"><div class="input js-input-wrapper has-value"><input type="text" class="input__field js-input-field" data-type="postcode" value="').f(t.get(["postcode"],!1),t,"h").w('"><label class="control__label">').h("t",t,{},{k:"616"},"h").w("</label></div></div></div>").x(t.get(["regions"],!1),t,{block:i},{}).w('</form></div><div class="layout__content layout__content--hpadded layout__content--vpadded"><div class="hint">').f(t.get(["description"],!1),t,"h").w('</div></div><div class="layout__footer"><div class="floating-action">').b(t.getBlock("action"),t,{},{}).w('</div><div class="fake">').b(t.getBlock("action"),t,{},{}).w("</div></div></div>")}function i(e,t){return t=t.shiftBlocks(l),e.w('<div class="control js-control"><div class="control__error js-control-error">').h("t",t,{},{k:"623"},"h").w('</div><div class="control__inputs"><div class="select"><select class="select__field js-regions-select" data-type="state">').s(t.get(["regions"],!1),t,{block:n},{}).w('</select><span class="select__arrow"></span><div class="select__surrogate js-region-surrogate"></div><label class="control__label">').h("t",t,{},{k:"617"},"h").w("</label></div></div></div>")}function n(e,t){return t=t.shiftBlocks(l),e.w('<option value="').f(t.get(["id"],!1),t,"h").w('" ').x(t.get(["isSelected"],!1),t,{block:a},{}).w(">").f(t.get(["name"],!1),t,"h").w("</option>")}function a(e,t){return t=t.shiftBlocks(l),e.w("selected")}function o(e,t){return t=t.shiftBlocks(l),e.w('<div class="cta-box"><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{text:s,block:r},{type:"billing-green",extraClass:"js-continue"},"h").w("</div></div></div></div>")}function s(e,t){return t=t.shiftBlocks(l),e.h("t",t,{},{k:"21"},"h")}function r(e,t){return t=t.shiftBlocks(l),e}e.register("payments/add-billing-info",t);var l={action:o};return t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(135),a=i(105).ServerGetRegions,o=null,s=n.extend({name:"Regions",getRequestMessageType:412,getResponseMessageType:[413],get:function(e){var t=new a;return e&&t.setCountryId(e),s._super.get.call(this,t)}},"RegionsModel");s.getInstance=function(e){return o||(o=new s(e)),o},e.exports=s},function(e,t,i){"use strict";function n(e){var t=e.backHistoryEntry,i=e.backUrl,n=e.purchase;l(t,function(e,t){t(),c(i,!0,{purchase:n})})}var a=i(100),o=i(136),s=i(3414),r=i(103),l=r.goToHistoryEntry,c=r.navigate;e.exports=function(){var e=o();return{element:e,open:function(t){var i=t.parameters,o=i.purchase,r=i.backHistoryEntry,l=i.backUrl;if(o){var c=o.purchaseTransaction.getNotification().getAlternativeActions([]).find(function(e){return 63===e.getAction()}),u=c?c.getText():null,d=c?c.getRedirectPage().getUrl():null;!function(e,t,i){var n=e.purchaseTransaction.getNotification();i.html(s.render({logo:a.first(n.getImageUrls()),title:n.getTitle(),message:n.getMessage(),confirmButtonText:n.getActionText(),cancelButtonText:n.getCancelActionText(),termsText:t}))}(o,u,e),e.find(".js-confirm-button").click(function(){return n({backHistoryEntry:r,backUrl:l,purchase:o})}),e.find(".js-cancel-button").click(function(){return n({backHistoryEntry:r,backUrl:l})}),e.find(".js-terms-link").click(function(){return window.open(d)})}else n({backHistoryEntry:r,backUrl:l})},close:function(){},getScreenName:function(){return 204}}}},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout layout--centered-content"><div class="layout__content layout__content--hpadded layout__content--vpadded"><div class="cta-box">').x(t.get(["logo"],!1),t,{block:i},{}).w('<div class="cta-box__header">').f(t.get(["title"],!1),t,"h").w('</div><div class="cta-box__content">').f(t.get(["message"],!1),t,"h").w('</div><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{},{type:"billing-green",text:t.get(["confirmButtonText"],!1),extraClass:"js-confirm-button"},"h").w('</div></div><div class="button-wrapper__item"><button class="inline-button inline-button--sm js-cancel-button"><span class="inline-button__text">').f(t.get(["cancelButtonText"],!1),t,"h").w("</span></button></div></div></div></div>").x(t.get(["termsText"],!1),t,{block:n},{}).w("</div>")}function i(e,t){return e.w('<div class="cta-box__media"><img src="').f(t.get(["logo"],!1),t,"h").w('" alt="" width="100" height="100"></div>')}function n(e,t){return e.w('<div class="layout__footer layout__footer--vpadded layout__footer--hpadded layout__footer--limited"><div class="hint hint--link js-terms-link">').f(t.get(["termsText"],!1),t,"h").w("</div></div>")}return e.register("payments/airpay-purchase-confirmation",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(423),a=i(136);e.exports=n.extend({clientSource:27,createElement:function(){return a({className:"spp"})}})},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(103),o=i(113),s=i(216),r=i(228),l=i(121),c=i(3417),u=i(3419),d=i(3421),h=i(124),p=i(314),m=i(241),g=i(128),_=i(148),f=i(105).PaymentProductType,v=l.BUTTONS,E=l.extend({headerTemplate:null,hotPanelPaymentFlowId_:null,source_:null,init:function(){E._super.init.apply(this,arguments),_(this),this.wrapperView_=this.registerView(new c({el:this.parent.get(0)})),this.registerView("top-view",new d),this.registerView("bottom-view",new u).on("featureclick",this.goToPayment_.bind(this))},onStart:function(){E._super.onStart.apply(this,arguments);var e=this.productType_=parseInt(this.getParameter("productType"),10);this.photo_=this.getParameter("photo"),this.source_=this.getParameter("source"),this.paymentFlowId_=this.getParameter("paymentFlowId"),f.isValid(e)?(this.onProductType_(e),this.hotPanelPaymentFlowId_=s.trackStart(this.paymentFlowId_,e,this.source_)):a.back()},onNavigationAction:function(e){e===v.BACK&&(s.trackPaymentResult(this.hotPanelPaymentFlowId_,s.RESULT.CANCELLED),this.hotPanelPaymentFlowId_=null),E._super.onNavigationAction.apply(this,arguments)},onProductType_:function(e){this.wrapperView_.render(),m.getInstance().get(e).catch(this.onFail_),this.getView("top-view").reset(),this.wrapperView_.showLoading(),p.getInstance().get(e).then(this.onClientExplanation_).catch(this.onFail_);var t={productType:e,loading:!0};this.updateView("bottom-view",t)},onClientExplanation_:function(e){var t=(0,n.default)(e,1)[0];this.wrapperView_.update({title:t.getScreenHeader()}),this.getView("top-view").appendTo(this.wrapperView_.getFeatureContainer()),this.getView("bottom-view").appendTo(this.wrapperView_.getActionsContainer());var i=t.getPromo();this.getView("top-view").update(i);var a=i.getOkPaymentProductType(),o=i.getButtons()[0],s={message:i.getMssg(),productType:a,cost:i.getCreditsCost(),title:i.getHeader(),actions:{text:o.getText(),action:o.getAction()},loading:!1};this.updateView("bottom-view",s),this.wrapperView_.hideLoading()},requiresPortrait:function(){return!0},onFail_:function(e){h.showNotification({type:h.TYPES.ERROR,text:e}),a.back()},goToPayment_:function(){var e=this;this.wrapperView_.showLoading(),r.purchase({hotPanelData:{existingPaymentFlowId:this.hotPanelPaymentFlowId_},productType:this.productType_,back:this.source_,complete:function(t,i,n){t?(g.getInstance().invalidate(o.getUserId()),n&&n.isOneClickPayment&&a.back()):i||e.onFail_(),e.wrapperView_.hideLoading()}}),s.trackConfirm(!1)}},"CreditIntro");e.exports=E},function(e,t,i){"use strict";var n=i(109),a=i(3418),o=n.extend({update:function(e){return this.render(e),this},render:function(e){return this.$el.html(a.render(e)),this},getFeatureContainer:function(){return this.$el.find(".js-credit-intro-feature")},getActionsContainer:function(){return this.$el.find(".js-credit-intro-actions")}},"CreditIntroWrapper");e.exports=o},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout layout--centered-content"><div class="layout__header">').h("NavigationBar",t,{},{back:t.get(["true"],!1),logo:t.get(["false"],!1),title:t.get(["title"],!1)},"h").w('</div><div class="layout__content layout__content--hpadded layout__content--vpadded"><div class="cta-box js-credit-intro-feature js-credit-intro-actions"></div></div></div>')}return e.register("credit-intro-wrapper",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(3420),s=a.extend({events:{"click .js-action":"onClick"},init:function(){s._super.init.apply(this,arguments)},update:function(e){this.render(e),n.isBoolean(e.loading)&&(e.loading?this.showLoading():this.hideLoading())},render:function(e){this.$el.html(o.render(e))},onClick:function(e,t){var i=t.getAttribute("data-action-type");i?this.trigger("click",i):this.trigger("featureclick",e)}},"CreditIntroActions");e.exports=s},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.x(t.get(["title"],!1),t,{block:i},{}).x(t.get(["message"],!1),t,{block:n},{}).w('<div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').s(t.get(["actions"],!1),t,{block:a},{}).w("</div></div></div>").x(t.get(["cost"],!1),t,{block:r},{})}function i(e,t){return e.w('<div class="cta-box__header">').f(t.get(["title"],!1),t,"h").w("</div>")}function n(e,t){return e.w('<div class="cta-box__content">').f(t.get(["message"],!1),t,"h",["s"]).w("</div>")}function a(e,t){return e.h("Button",t,{attrs:o,block:s},{type:"primary",text:t.get(["text"],!1),extraClass:"js-action"},"h")}function o(e,t){return e.w('data-action="').f(t.get(["action"],!1),t,"h").w('"')}function s(e,t){return e}function r(e,t){return e.w('<div class="cta-box__additional">').f(t.get(["cost"],!1),t,"h").w("</div>")}return e.register("credit-intro-actions",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";function n(e,t){return e.filter(function(e){return e.getSignificance()===t})}var a,o=i(3)(i(107)),s=i(109),r=i(3422),l=s.extend({update:function(e){var t=function(e){var t=function(e){var t=e.getPictures(),i=n(t,1)[0].getDisplayImages(),a=n(t,2),o=a[0].getDisplayImages(),s=a[1].getDisplayImages();return{leftPicture:o,middlePicture:i,rightPicture:s}}(e),i=function(e){return c[e.getPromoBlockType()]}(e);return Object.assign({},t,{icon:i})}(e);r.render(t,this.el,this.el.childNodes)}},"CreditIntroFeature");e.exports=l;var c=(a={},(0,o.default)(a,10,"extra-shows"),(0,o.default)(a,48,"extra-shows"),a)},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="cta-box__media"><div class="brick-wrapper brick-wrapper--m-b-m ').x(t.get(["icon"],!1),t,{block:i},{}).w('">').x(t.get(["leftPicture"],!1),t,{block:n},{}).x(t.get(["middlePicture"],!1),t,{block:a},{}).x(t.get(["rightPicture"],!1),t,{block:l},{}).w("</div></div>")}function i(e,t){return e.w(" brick-wrapper--padded ")}function n(e,t){return e.w('<div class="brick-wrapper__item"><div class="brick brick--stretch" data-qa="brick">').h("BrickUserPhoto",t,{},{src:t.get(["leftPicture"],!1),size:"80"},"h").w("</div></div>")}function a(e,t){return e.w('<div class="brick-wrapper__item"><div class="brick brick--stretch" data-qa="brick">').h("BrickUserPhoto",t,{},{src:t.get(["middlePicture"],!1),size:"100"},"h").x(t.get(["icon"],!1),t,{block:o},{}).w("</div></div>")}function o(e,t){return e.w('<div class="brick__badge brick__badge--bc">').h("Icon",t,{name:s,block:r},{size:"lg",shadow:"true"},"h").w("</div>")}function s(e,t){return e.w("badge-feature-").f(t.get(["icon"],!1),t,"h")}function r(e,t){return e}function l(e,t){return e.w('<div class="brick-wrapper__item"><div class="brick brick--stretch" data-qa="brick">').h("BrickUserPhoto",t,{},{src:t.get(["rightPicture"],!1),size:"80"},"h").w("</div></div>")}return e.register("credit-intro-feature",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(100),o=i(113),s=i(132),r=i(103),l=i(199),c=i(102),u=i(228),d=i(165),h=i(149),p=i(121),m=i(3424),g=i(493),_=i(128),f=i(146),v=i(227),E=i(101),b=E.NotificationEvent,y=E.ViewPopularityScreenEvent,k=E.ClickEvent,S=E.ClickBannerEvent,w=i(103),C=w.getLocation,T=w.updateLocation,P=w.getHistoryEntryId,N=i(402),I=m.ACTIONS,x=p.extend({headerTemplate:null,activationPlace:33,serverFeature_:103,notificationScreenAccess:3,screenName:46,clientSource:32,promoBlocks_:null,open:function(e){var t=e.parameters,i=e.activationPlace,n=a.clone(e);if(!t.activationPlace){var o=C().routeName,s=Object.assign({},t,{activationPlace:i||this.activationPlace});T(o,s),n.parameters=s}x._super.open.call(this,n)},init:function(){var e=this;x._super.init.apply(this,arguments),this.sppObservable_=s.observe(s.getObservable(19),function(){return e.fetchAndRender_()},{leading:!1}),this.popularityView_=this.registerView(new m({el:this.parent.get(0)})),this.popularityView_.on(I.PROMO_SELECT,this.onClick_,this).on(I.SHOW_TERMS,this.onShowTerms_,this),this.userModel_=_.getInstance(),this.popularityModel_=g.getInstance(),this.popularityModel_.on(g.EVENTS.INVALIDATED,this.fetchAndRender_,this),this.buyCallback_=N("popularity_buy",this.buy_.bind(this)),v.hasTooltipsToSee(!1,8)&&v.getInstance().skipPopularityTooltips()},onStart:function(e){var t=e.buy;x._super.onStart.apply(this,arguments),this.fetchAndRender_(),this.sppObservable_.start(),t&&this.buyCallback_.execute(),c.track(y,{activation_place:this.getParameter("activationPlace")})},buy_:function(e){var t=C(),i=t.routeName,n=t.parameters,o=a.omit(n,"buy");T(i,o),this.buyFeature_(e)},onStop:function(){x._super.onStart.apply(this,arguments),this.sppObservable_.stop(),this.popularityView_.reset()},fetchAndRender_:function(){var e=this;this.isStarted()&&(this.popularityView_.showLoading(),Promise.all([this.popularityModel_.get(),this.userModel_.get({id:o.getUserId(),clientSource:32})]).then(function(t){var i=(0,n.default)(t,2),a=(0,n.default)(i[0],1)[0],o=i[1];return e.onPopularity_(a,o)}).then(function(){e.popularityView_.hideLoading(),e.readyForVrt()}).catch(function(t){return e.onFail_(t)}))},onPopularity_:function(e,t){this.promoBlocks_=e.getPromoBlocks(),this.popularityView_.update({days:e.getDays(),promos:this.promoBlocks_,popularity:t.getPopularityLevel(),gender:t.getGender(),footer:e.getFooter()})},onShowTerms_:function(){c.track(k,{element:161}),r.navigate("terms")},onClick_:function(e){var t=e.promoBlockType,i=e.promoBlockPosition;h.generate(),c.track(S,{banner_id:t,position_id:i});var n=function(e,t){return a.find(e,function(e){return e.getPromoBlockType()===t})}(this.promoBlocks_,t);if(n){var o=n.getOkPaymentProductType(),s=l.getFeatureFromPaymentProductType(o),u=n.getOkAction(),p=n.getPaymentAmount();if(s)if(1!==o){var m={productType:o,promoBlockType:t,feature:s,cost:p};if(2===u)return this.buyCallback_.create(m),void r.navigate("add-photos",{backHistoryEntry:P(),destination:f.encodeRoute("popularity",{buy:!0})});this.buyFeature_(m)}else d.navigateToPayment({productType:o,back:"popularity"});else this.onFail_()}else this.onFail_()},buyFeature_:function(e){var t=e.productType,i=e.promoBlockType,n=e.feature,a=e.cost;22===t&&c.track(b,{notification_type:2,notification_action_type:2,banner_id:i}),this.popularityView_.showLoading(),this.attemptPurchase_(n,t,{cost:a}),this.feature_=n},attemptPurchase_:function(e,t,i){var n=this,a=i&&i.cost;u.purchase({hotPanelData:{activationPlace:33,cost:a},cost:a,back:"popularity",productType:t,success:function(){n.popularityView_.hideLoading(),n.popularityView_.justPurchased(n.feature_),n.feature_=null},error:function(e){n.onFail_(e),n.feature_=null}})},onFail_:function(e){e&&this.log.error(e),this.popularityView_.hideLoading()}},"Popularity");e.exports=x},function(e,t,i){"use strict";function n(){c.track(d,{direction:5,screen_name:46})}var a=i(25),o=i(100),s=i(162),r=i(282),l=i(199),c=i(102),u=i(242),d=i(101).ScrollScreenEvent,h=i(3425),p={PROMO_SELECT:"promo-select",SHOW_TERMS:"show-terms"},m=u.extend({lastSelectedDay_:null,events:{"click .js-button":"onPromoClick_","click .js-terms":"onTermsClick_"},className:!1,enable:function(){return this.onScrollOnce_=o.once(n),s.on(s.EVENTS.SCROLL,this.onScrollOnce_),m._super.enable.apply(this,arguments)},disable:function(){var e=m._super.disable.apply(this,arguments);return s.off(s.EVENTS.SCROLL,this.onScrollOnce_),e},update:function(e){for(var t,i=e.days,n=0;n<i.length;n++)(!t||i[n].getDate()>t.getDate())&&(t=i[n]);var a={popularityLevel:r.getLevel(e.popularity),popularityName:r.getLevelName(e.popularity),popularityCounters:r.getPopularityCounters(t),promos:o.map(e.promos,this.processPromo_),footer:e.footer};1===e.gender?a.gender="male":2===e.gender&&(a.gender="female"),this.$el.html(h.render(a)),this.attachToggleScroll()},justPurchased:function(e){var t=this.$(".js-feature-".concat(e));t.appendTo(t.parent())},processPromo_:function(e){var t,i=e.getPictures();i&&o.isArray(i)&&i[0]&&(t=i[0].getDisplayImages());var n,a=e.getPromoBlockType(),s=e.getOkPaymentProductType();s&&(n=l.getFeatureFromPaymentProductType(s));var r=l.getFeatureName(a);return{message:e.getMssg(),action:e.getAction(),header:e.getHeader(),requiredAction:e.getOkAction(),feature:n,product:s,image:t,productClass:r,featureName:r,other_text:e.getOtherText(),credits_cost:e.getCreditsCost(),promoBlockType:a,promoBlockPosition:e.getPromoBlockPosition()}},onTermsClick_:function(){this.trigger(p.SHOW_TERMS)},onPromoClick_:function(e,t){t=a(t),this.trigger(p.PROMO_SELECT,{promoBlockType:t.data("promoblocktype"),promoBlockPosition:t.data("promoblockposition")})}},"PopularityView");m.ACTIONS=p,e.exports=m},function(e,t,i){"use strict";var n=i(98),a=i(137),o=i(106),s=i(99);e.exports=i(108)("Popularity",function(e){return n.createElement("div",{className:"layout js-screen-container"},n.createElement("div",{className:"layout__header"},n.createElement(a,{noFake:"true",back:"true",extraClass:"navigation-bar--static navigation-bar--no-background"})),n.createElement("div",{className:"layout__content"},n.createElement("div",{className:"popularity__status"},n.createElement("div",{className:"popularity__status-icon","data-qa":"popularity-status-icon","data-popularity-level":e.popularityLevel},n.createElement(o,{size:"stretch",name:"speedometer-popularity-".concat(e.popularityLevel)})),n.createElement("div",{className:"popularity__status-title"},e.popularityName),n.createElement("div",{className:"popularity__status-subtitle"},s.get(573))),n.createElement("div",{className:"popularity__counters"},n.createElement("div",{className:"popularity-counters"},n.createElement("div",{className:"popularity__counters-row"},n.createElement("div",{className:"popularity__counters-value","data-qa":"popularity-counter-contacts"},e.popularityCounters[0].value),n.createElement("div",{className:"popularity__counters-value","data-qa":"popularity-counter-visitors"},e.popularityCounters[1].value),n.createElement("div",{className:"popularity__counters-value","data-qa":"popularity-counter-likes"},e.popularityCounters[2].value)),n.createElement("div",{className:"popularity__counters-row"
},n.createElement("div",{className:"popularity__counters-label"},e.popularityCounters[0].label),n.createElement("div",{className:"popularity__counters-label"},e.popularityCounters[1].label),n.createElement("div",{className:"popularity__counters-label"},e.popularityCounters[2].label))))),n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"popularity-promo-block-list qa-promos"},e.promos.map(function(e){return n.createElement("div",{className:"popularity-promo-block-list__item js-feature-".concat(e.feature," js-button"),"data-promoblocktype":e.promoBlockType,"data-promoblockposition":e.promoBlockPosition,"data-qa":"promo-block","data-qa-type":e.productClass},n.createElement("div",{className:"placard"},n.createElement("div",{className:"spring-box"},n.createElement("div",{className:"spring-box__media","data-qa":"promo-block-image"},n.createElement(o,{size:"xxlg",color:"primary",name:"badge-feature-".concat(e.featureName)})),n.createElement("div",{className:"spring-box__content"},n.createElement("div",{className:"popularity-promo-block__title","data-qa":"promo-block-title"},e.header),n.createElement("div",{className:"popularity-promo-block__message","data-qa":"promo-block-description",dangerouslySetInnerHTML:{__html:e.message}})))))}))),e.footer?n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded layout__footer--limited"},n.createElement("div",{className:"hint","data-qa":"footer"},e.footer),n.createElement("div",{className:"hint hint--link js-terms"},s.get(146))):null)})},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(100),o=i(99),s=i(113),r=i(121),l=i(140),c=i(214),u=i(3427),d=i(124),h=i(103).navigate,p=l.TYPES.PRIVATE_ALBUM_ACCESS,m=r.extend({screenName:36,album_:null,serverFeature_:109,headerTemplate:null,init:function(){m._super.init.apply(this,arguments),this.foldersModel_=new l({folderId:p}).on(l.EVENTS.INVALIDATED,this.onFolderInvalidated_,this),this.mainView_=this.registerView(new u({el:this.parent.get(0)}).on(u.ACTIONS.ADD_PHOTOS,this.onAddPhotos_,this).on(u.ACTIONS.PHOTO_CLICK,this.photoClick_,this).on(u.ACTIONS.WHO_HAS_ACCESS,this.navigateToAllowedUsers_,this))},onStart:function(){m._super.onStart.apply(this,arguments),this.mainView_.render(),this.setup_()},onStop:function(){m._super.onStop.apply(this,arguments),this.album_=null},setup_:function(){var e=this;this.mainView_.showLoading(),Promise.all([this.fetchAlbum_(),this.getTotalCount_()]).then(function(t){var i=(0,n.default)(t,2),a=i[0],o=i[1];e.hasPrivatePhotosAccess_(a)?(e.mainView_.hideLoading(),e.album_=a,e.mainView_.update({album:a,usersCount:o,showButton:e.getIsCurrentUser_()})):e.loadProfilePage_()}).catch(this.onError_.bind(this))},loadProfilePage_:function(){h("chat-profile",!0,{id:this.getPersonId_()})},hasPrivatePhotosAccess_:function(e){return!!this.getIsCurrentUser_()||(e=a.isArray(e)?e[0]:e)&&a.isFunction(e.getAccessable)&&e.getAccessable()},photoClick_:function(e){h("gallery",{albums:[this.album_],photoId:e.id,showPrivate:1,userId:this.getPersonId_(),screenName:this.screenName,activationPlace:this.activationPlace})},onFolderInvalidated_:function(e){var t=e.keys;(e.all||a.isArray(t)&&a.includes(t,p))&&this.setup_()},getTotalCount_:function(){var e=this;return this.foldersModel_.get().then(function(e){return(0,n.default)(e,1)[0].getTotalCount()}).catch(function(t){return e.log.error("Error getting to total user count from folder",t),0})},getNavigationBarContext:function(){return m._super.getNavigationBarContext.call(this,{title:o.get(153)})},getPersonId_:function(){return this.getParameter("id")||s.getUserId()},getIsCurrentUser_:function(){return this.getPersonId_()===s.getUserId()},navigateToAllowedUsers_:function(){h("allowed-users")},onAddPhotos_:function(){h("add-photos",{feature:15,albumType:4})},fetchAlbum_:function(){return c.getInstance().get(this.getPersonId_(),4).then(function(e){return(0,n.default)(e,1)[0]})},onError_:function(){d.showNotification({type:d.TYPES.ERROR})}},"PrivatePhotos");e.exports=m},function(e,t,i){"use strict";var n=i(25),a=i(100),o=i(99),s=i(109),r=i(240),l=i(111),c=i(3428),u=i(3430),d=l("ADD_PHOTOS","PHOTO_CLICK","WHO_HAS_ACCESS"),h=s.extend({headerTemplate:null,showButton_:!0,events:{"click .js-add-photos-action":"onAddPhotos_","click .js-item-photos":"photoClick_","click .js-private-access":"onButtonClick_"},render:function(){return this.$el.html(c.render({textPrivateAccessed:o.get(295),counterPrivateAccessed:this.usersCount_,enabled:this.shouldEnableButton_(),showButton:this.showButton_})),this},shouldEnableButton_:function(){return this.usersCount_>0},onButtonClick_:function(e){e.preventDefault(),this.shouldEnableButton_()&&this.trigger(h.ACTIONS.WHO_HAS_ACCESS)},photoClick_:function(e,t){this.trigger(d.PHOTO_CLICK,{id:String(n(t).data("id"))})},onAddPhotos_:function(){this.trigger(h.ACTIONS.ADD_PHOTOS)},update:function(e){h._super.update.apply(this,arguments);var t=!1;if(a.isBoolean(e.showButton)&&(this.showButton_=e.showButton,t=!0),a.isNumber(e.usersCount)&&(this.usersCount_=e.usersCount,t=!0),t&&this.render(),e.album){var i=e.album.getPhotos([]).map(function(e){return new r(e)});this.$(".js-photos-grid").html(u.render({photos:i}))}}},"PrivatePhotos");h.ACTIONS=d,e.exports=h},function(e,t,i){"use strict";var n=i(98),a=i(156),o=i(99),s=i(133),r=i(138),l=i(130),c=i(170),u=i(182),d=i(198),h=i(223),p=i(181),m=i(3429),g=i(106),_=i(145);e.exports=i(108)("PrivatePhotos",function(e){return n.createElement(s,null,n.createElement(r,null,n.createElement(c,{position:"fixed"},n.createElement(u,null,n.createElement("div",{className:"js-navigation js-navigation-back","data-action":a.BACK},n.createElement(p,{name:"navigation-bar-back"}))),n.createElement(h,{text:o.get(153)}),e.showButton?n.createElement(d,null,n.createElement("div",{className:"js-add-photos-action"},n.createElement(m,{text:o.get(18),isActive:!0}))):null),n.createElement(c,null)),n.createElement(l,null,e.showButton?n.createElement(_,{right:"gap",left:"gap"},n.createElement("div",{className:"selector selector--no-shadow js-private-access"},n.createElement("div",{className:"selector__label"},n.createElement("div",{className:"truncated-text"},n.createElement("div",{className:"truncated-text__full"},e.textPrivateAccessed),n.createElement("div",{className:"truncated-text__trim selector__label--secondary"},e.counterPrivateAccessed))),n.createElement("div",{className:"selector__icon selector__icon--chevron-right-without-shifting"},n.createElement(g,{name:"generic-chevron-right",size:"sm",supportsRtl:!0})))):null,n.createElement("div",{className:"js-photos-grid"})))})},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(117),s=i(120).P1,r={text:a.string.isRequired,isActive:a.bool,isDisabled:a.bool,onClick:a.func},l=function(e){var t=e.text,i=e.isActive,a=e.isDisabled,r=e.onClick,l=o({"csms-navigation-bar__button-text":!0,"csms-navigation-bar__button-text--is-active":i,"csms-navigation-bar__button-text--is-disabled":a});return n.createElement("button",{className:l,onClick:r,"data-qa":"navbar-link"},n.createElement(s,null,t))};l.propTypes=r,l.defaultProps={isActive:!1,isDisabled:!1},e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(337),s=function(e){return{backgroundImage:'url("'.concat(a({src:e.src}),'")'),backgroundPosition:e.centerPercentages?"".concat(e.centerPercentages.x,"% ").concat(e.centerPercentages.y,"%"):void 0}};e.exports=i(108)("PhotoGridLiquid",function(e){return n.createElement(o,{cols:4,spacing:"sm"},e.photos.map(function(e){return n.createElement("div",{className:"photo-grid-liquid__item-image js-item-photos",style:s(e),"data-id":e.id,"data-src":'"'.concat(a({src:e.src,width:100}),'"'),key:e.id})}))})},function(e,t,i){"use strict";var n=i(3432),a=i(605).extend({folderId:11,View:n,profileRouteName_:"allowed",screenName:37},"AllowedUsersPage");e.exports=a},function(e,t,i){"use strict";var n=i(99),a=i(604),o=i(3433),s=i(3434),r=a.extend({actionButtonText_:n.get(250),template:o,templateItem:s,getEditingTitle_:function(){return this.isEditMode_?n.get(294):n.get(140)}},"AllowedUsersView");e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(156),o=i(166),s=i(133),r=i(138),l=i(130),c=i(185),u=i(170),d=i(182),h=i(198),p=i(181),m=i(319),g=i(106),_=i(318),f=i(145),v=i(120).P1;e.exports=i(108)("AllowedUsers",function(e){return n.createElement(s,null,n.createElement(r,null,n.createElement(u,{position:"fixed"},n.createElement(d,null,n.createElement("div",{className:"js-navigation js-navigation-back","data-action":a.BACK},n.createElement(p,{name:"navigation-bar-back"}))),n.createElement("div",{className:"csms-navigation-bar__title","data-qa":"navbar-title"},n.createElement("span",{className:"csms-p-title csms-font-weight-medium"},n.createElement("span",{className:"js-navigation-title"},e.title))),n.createElement(h,null,n.createElement("button",{className:"csms-navigation-bar__button-text csms-navigation-bar__button-text--is-active","data-qa":"navbar-link"},n.createElement("div",{className:"csms-p-1"},n.createElement("span",{className:"js-button-edit"},e.buttonText))))),n.createElement(u,null)),n.createElement(l,{hpadded:!0,vpadded:!0},n.createElement(f,{bottom:"lg"},n.createElement(v,{align:"center",color:"gray-dark"},e.description)),n.createElement("div",{className:"users-folder"},n.createElement("div",{className:"users-folder__list"},e.user.map(function(t){return n.createElement("div",{className:"users-folder__item",key:t.userId},n.createElement("div",{className:"users-folder__user"},n.createElement("div",{className:"brick brick--xlg js-select-user","data-user-id":t.userId},t.image?n.createElement("div",{className:"brick__image",style:{backgroundImage:'url("'.concat(o({src:t.image,width:90}),'")')}}):n.createElement("div",{className:"brick__icon"},t.isMale?n.createElement(m,{user:{gender:"male"}}):t.isFemale?n.createElement(m,{user:{gender:"female"}}):n.createElement(m,{user:{gender:"unknown"}})),n.createElement("div",{className:"brick__checkbox"},n.createElement(g,{name:"generic-tick",size:"lg"})),n.createElement("div",{className:"brick__badge brick__badge--bc"},t.match?n.createElement(g,{name:"badge-feature-liked-you",size:"md",shadow:!0}):null),n.createElement("div",{className:"brick__text qa-avatar-label"},n.createElement("div",{className:"brick__name"},t.name),e.user.status?n.createElement("div",{className:"brick__status"},e.user.online?n.createElement(_,{status:"online"}):null,e.user.idle?n.createElement(_,{status:"idle"}):null,e.user.offline?n.createElement(_,{status:"hidden"}):null):null),n.createElement("div",{className:"brick__text qa-avatar-label"},n.createElement("div",{className:"brick__label"},t.time)))))}),e.more&&n.createElement("div",{className:"users-folder__item js-more"},n.createElement("div",{className:"users-folder__user"},n.createElement("div",{className:"brick brick--xlg"},n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('/img/photos/placeholders/looking-for-both.c66a079d6b2a9f1c1edd.png')"}}),n.createElement("div",{className:"brick__fade"},n.createElement(g,{name:"generic-ellipsis",size:"lg"})),n.createElement("div",{className:"brick__badge brick__badge--bc"}),n.createElement("div",{className:"brick__text"},n.createElement("div",{className:"brick__label"},e.moreText)))))))),n.createElement(c,null,n.createElement("div",{className:"floating-action is-inactive js-action"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"button button--red js-action js-action-button js-touchable qa-button"},n.createElement("div",{className:"button__content"},n.createElement("span",{className:"button__text js-button-text"})))))))),n.createElement("div",{className:"fake"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"button"}))))))))})},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106),s=i(318);e.exports=i(108)("AllowedUsersItem",function(e){return n.createElement("div",{className:"users-folder__item"},n.createElement("div",{className:"users-folder__user"},n.createElement("div",{className:"brick brick--xlg js-select-user","data-user-id":e.user.userId},e.user.image?n.createElement("div",{className:"brick__image",style:'background-image: url("'.concat(a({src:e.user.image,width:90}),'")')}):n.createElement("div",{className:"brick__icon"},e.user.isMale?n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}):e.user.isFemale?n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}):n.createElement(o,{name:"avatar-placeholder-unknown",size:"stretch"})),n.createElement("div",{className:"brick__checkbox"},n.createElement(o,{name:"generic-tick",size:"lg"})),n.createElement("div",{className:"brick__badge brick__badge--bc"},e.user.match?n.createElement(o,{name:"badge-feature-liked-you",size:"md",shadow:!0}):null),n.createElement("div",{className:"brick__text qa-avatar-label"},n.createElement("div",{className:"brick__name"},e.user.name),e.user.status?n.createElement("div",{className:"brick__status"},e.user.online?n.createElement(s,{status:"online"}):null,e.user.idle?n.createElement(s,{status:"idle"}):null,e.user.offline?n.createElement(s,{status:"hidden"}):null):null),n.createElement("div",{className:"brick__text qa-avatar-label"},n.createElement("div",{className:"brick__label"},e.user.time)))))})},function(e,t,i){"use strict";var n=i(100),a=i(122),o=i(121),s=i(159),r=i(630),l=i(103),c=i(3439),u=i(156),d=s.extend({screenName:127,controllerType:o.TYPES.TRANSITION,headerTemplate:null,init:function(){d._super.init.apply(this,arguments),this.whatsNewView_=this.registerView(new r).on(r.EVENTS.BUTTON_CLICK,this.onButtonClick_,this).on(r.EVENTS.SCROLL_CHANGE,this.handleScrollChange_,this)},onNavigationAction:function(e){e===u.CLOSE&&this.whatsNewTracker_.trackDoneButtonClick(this.whatsNewView_.getCurrentWhatsNewPage()),d._super.onNavigationAction.apply(this,arguments)},onStart:function(){d._super.onStart.apply(this,arguments),this.whatsNewView_.appendTo(this.parent),this.getServerSideWhatsNew_()},getServerSideWhatsNew_:function(){new a(396).on(397,this.onClientWhatsNew_,this).request(),this.whatsNewView_.showLoading()},onClientWhatsNew_:function(e,t){this.isStarted()&&(e?this.dismiss_():this.showWhatsNew_(t))},showWhatsNew_:function(e){var t=e.getPromos();n.isEmpty(t)?this.dismiss_():this.showWhatsNewPages_(t)},showWhatsNewPages_:function(e){this.whatsNewView_.render(e),this.whatsNewView_.hideLoading(),this.whatsNewTracker_=new c,this.whatsNewTracker_.trackElementView(this.whatsNewView_.getCurrentWhatsNewPage())},onButtonClick_:function(e){this.whatsNewTracker_.trackButtonClick(e),e.action()},handleScrollChange_:function(e){this.whatsNewTracker_.trackScroll(e)},dismiss_:function(){l.back()}},"WhatsNewController");e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137);e.exports=i(108)("WhatsNew",function(e){return n.createElement("div",{className:"layout"},n.createElement("div",{className:"layout__header"},n.createElement(o,{partner_id:e.partner_id,close:!0,noFake:!0,extraClass:"navigation-bar--no-background",scrollToggle:"1",scrollToggleClass:"navigation-bar--no-background",title:a.get(242)})),n.createElement("div",{className:"layout__content"},n.createElement("div",{className:"sticky-scroll js-carousel"},n.createElement("div",{className:"carousel qa-carousel sticky-scroll_ js-scrollable"},e.slides&&e.slides.map(function(e){return n.createElement("div",{className:"carousel-page js-carousel-page"})})))),e.multipleSlides?n.createElement("div",{className:"layout__footer"},n.createElement("div",{className:"carousel-index"},e.slides&&e.slides.map(function(e){return n.createElement("div",{className:"carousel-index__item js-carousel-bullet"})}))):null)})},function(e,t,i){"use strict";function n(e){var t=e.whatsNewPage.getPromoBlock(),i=r.first(t.getButtons());if(i){var n=function(e,t){var i=e.getAction();return 63===i?function(){return u.handleAction(function(e){var t=e.getAction();if(!a(t))return o();var i=(new d).setAction(t);return 63===t&&(i.setRedirectPage(e.getRedirectPage()),i.setPopState(!0)),e.hasType()&&p.error("CallToAction.type is not supported on What's New page."),i}(e))}:95===i?function(){return t.showNextPromo()}:77===i?function(){l.back()}:void 0}(i,e);return n?{text:i.getText(),action:n}:void p.error("Unsupported action ".concat(i.getAction()," on What's New page."))}if(t.hasOkAction())return{text:t.getAction(),action:function(){return u.handleAction(function(e){var t=e.getOkAction();if(!a(t))return o();var i=(new d).setAction(t);return 63===t&&(i.setRedirectPage(e.getRedirectPage()),i.setPopState(!0)),i}(t))}}}function a(e){var t=r.includes([0,63],e);return t||p.error("Action type ".concat(e," is not supported on What's New page.")),t}function o(){return(new d).setAction(0)}function s(e){var t,i,n,a=function(e){var t=e.getPictures();if(t&&t.length>0)return t.length>1&&p.error("Only the first picture is displayed on What's New page."),t[0].getDisplayImages()}(e);if(a){var o=(t=window.devicePixelRatio||1,i=Math.round(window.innerWidth*t),n=2*i,"".concat(i,"y").concat(n));return a.replace(/__size__/g,o)}}var r=i(100),l=i(103),c=i(125),u=i(208),d=i(207),h=i(3438),p=c.getLogger("WhatsNew");e.exports=function(e){var t=function(e){var t=e.whatsNewPage,i=t.getPromoBlock();return t.getInnerPromoBlocks()&&p.error("inner_promo_blocks are not displayed properly on What's New page."),{image:s(i),title:i.getHeader(),body:i.getMssg(),button:n(e)}}(e),i=h.render(t);return i.find(".js-action-button").click(function(){e.onButtonClick({action:t.button.action,hotpanelElement:104})}),i}},function(e,t,i){"use strict";var n=i(98),a=i(134),o=i(153);e.exports=i(108)("WhatsNewGeneric",function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:"whats-new-image",style:{backgroundImage:"url('".concat(e.image,"')")}}),n.createElement("div",{className:"cta-box cta-box--hpadded"},e.title&&n.createElement("div",{className:"cta-box__header"},e.title),e.body&&n.createElement("div",{className:"cta-box__content"},e.body),e.button?n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},o(e.button,e,function(e){return n.createElement("div",{className:"button-wrapper__item"},n.createElement(a,{type:"transparent",text:e.text,extraClass:"js-action-button",attrs:{"data-index":e.index}}))}))):null))})},function(e,t,i){"use strict";function n(){this.viewedWhatsNewPages_={}}function a(e){return e.getPromoBlock().getStatsTags()}var o=i(102),s=i(101),r=s.ScrollScreenEvent,l=s.ViewElementEvent,c=s.ClickEvent,u=i(630);Object.assign(n.prototype,{trackScroll:function(e){e.direction!==u.DIRECTIONS.FORWARD||this.isWhatsNewPageViewed_(e.whatsNewPage)||(o.track(r,{direction:6,screen_name:127}),this.trackWhatsNewPageView_(e.whatsNewPage))},trackElementView:function(e){this.isWhatsNewPageViewed_(e)||(o.track(l,{element_str:a(e),screen_name:127}),this.trackWhatsNewPageView_(e))},trackButtonClick:function(e){o.track(c,{element:e.hotpanelElement,parent_element_str:a(e.whatsNewPage)})},trackDoneButtonClick:function(e){o.track(c,{element:105,parent_element_str:a(e)})},isWhatsNewPageViewed_:function(e){var t=a(e);return Boolean(this.viewedWhatsNewPages_[t])},trackWhatsNewPageView_:function(e){var t=a(e);this.viewedWhatsNewPages_[t]=!0}}),e.exports=n},function(e,t,i){"use strict";var n=i(103),a=i(169),o=i(3441),s=i(3443),r=i(99),l=o.VIEWS,c=o.extend({notificationScreenAccess:3,init:function(){c._super.init.apply(this,arguments),this.registerView(l.MAIN,new s)},onReady:function(){c._super.onReady.apply(this,arguments),this.onParametersUpdate()},update_:function(e,t){for(var i=[],n=0;n<e.length;n++){var o=e[n],s={title:o.getHeader(),icon:a.getBadgeTypeFromPromoBlock(o.getPromoBlockType()),message:o.getMssg()};i.push(s)}this.updateView(l.MAIN,{items:i,title:t.getDisplayTitle(),standalone:!0})},getPageTitle_:function(){return r.get(92)},reset:function(){this.getView(l.MAIN).reset()},onFailed:function(){c._super.onFailed.apply(this,arguments),n.back()}},"FeatureListStandalone");c.EVENTS={RESIZE:"resize"},e.exports=c},function(e,t,i){"use strict";var n=i(100),a=i(103),o=i(132),s=i(121),r=i(3442),l=i(148),c={MAIN:"main-view",NAVIGATION_BAR:s.VIEWS.NAVIGATION_BAR},u=s.extend({init:function(){u._super.init.apply(this,arguments),l(this)},onStart:function(){u._super.onStart.apply(this,arguments),r.get().spread(this.onAbstractFeatureList_,this.onFailed_),this.getView(c.MAIN).appendTo(this.parent)},onAbstractFeatureList_:function(e){var t=e.getSuperPowersFeature();t&&o.isAllowed(t)||a.back();var i=n.isFunction(e.getSearchSettings)?e.getSearchSettings():null,s=i?i.getGender():null,r=e.getPromos();this.update_(r,t,s),this.setTitle()},getPageTitle_:function(){},update_:function(){},setTitle:function(){this.updateView(s.VIEWS.NAVIGATION_BAR,{title:this.getPageTitle_()})},onFailed_:function(){}},"AbstractFeatureList");u.VIEWS=c,e.exports=u},function(e,t,i){"use strict";var n=i(135).extend({useCache_:!1,getRequestMessageType:472,getResponseMessageType:473},"FeatureList");e.exports=new n},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(3444),s=a.extend({update:function(e){(n.isArray(e.items)||null===e.items)&&(this.items_=e.items),(n.isString(e.title)||null===e.title)&&(this.title_=e.title),this.render()},render:function(){this.$el.html(o.render({items:this.items_,listTitle:this.title_}))}},"FeatureListStandalone");s.EVENTS={RESIZE:"resize"},e.exports=s},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(153);e.exports=i(108)("Spp",function(e){return n.createElement("div",{className:"layout layout--with-fake-nav"},n.createElement("div",{className:"layout__content layout__content--hpadded"},n.createElement("div",{className:"features-list features-list--standalone"},e.listTitle?n.createElement("div",{className:"features-list__title",dangerouslySetInnerHTML:{__html:e.listTitle}}):null,o(e.items,e,function(e){return n.createElement("div",{className:"features-list__item"},n.createElement("div",{className:"features-list__item-image"},n.createElement(a,{size:"lg",color:"primary",name:e.icon})),n.createElement("div",{className:"features-list__item-details"},e.title?n.createElement("div",{className:"features-list__item-details-summary",dangerouslySetInnerHTML:{__html:e.title}}):null,e.message?n.createElement("div",{className:"features-list__item-details-text"},e.message):null))}))))})},function(e,t,i){"use strict";var n=i(155),a=i(103),o=i(113),s=i(159),r=i(128),l=i(3446),c=i(136),u=s.extend({transition:!1,headerTemplate:null,purchasedGift_:null,isGiftFromMe_:!1,isGiftForMe_:!1,createElement:function(){return c({className:"overlay-page page-gift"})},init:function(){u._super.init.apply(this,arguments);var e=new l;e.on(l.ACTIONS.OPEN_CHAT,this.onOpenChat_.bind(this)).on(l.ACTIONS.OPEN_PROFILE,this.onOpenProfile_.bind(this)).on(l.ACTIONS.SEND_GIFT,this.onSendGift_.bind(this)),this.registerView("view",e)},onStart:function(){u._super.onStart.apply(this,arguments),this.show_()},onParametersUpdate:function(){this.show_()},show_:function(){var e=this.getParameter("purchasedGift");e?this.purchasedGift_=n(e):e=this.purchasedGift_;var t=this.getParameter("fromChat");if(e){var i=e.from_user_id,s=o.getUserId(),l=e.to_user_id===s,c=i===s;l&&e.is_boxed&&r.getInstance().markGiftAsUnboxed(e.purchase_id);var u=this.getView("view");u.update({fromChat:!!t,giftForMe:l,giftFromMe:c,purchasedGift:e}),this.isGiftFromMe_=c,this.isGiftForMe_=l,u.appendTo(this.parent)}else a.back()},onOpenChat_:function(e){!Number(e)&&e.length<20&&this.log.error("WRONG USER ID: ".concat(e," in onOpenChat_")),a.navigate("messages",{id:e})},onOpenProfile_:function(){var e=this.purchasedGift_;e.getFromUserIsDeleted()||this.isGiftFromMe_||e.getIsPrivate()&&!this.isGiftForMe_||a.navigate("profile",!0,{id:e.getFromUserId()})},onSendGift_:function(){var e=this.purchasedGift_,t={back:this.getParameter("back"),context:75,id:this.isGiftForMe_?e.getFromUserId():e.getToUserId(),purchasedGift:e};(!e.getIsPrivate()||this.isGiftForMe_||this.isGiftFromMe_)&&(t.giftProductId=e.getGift().getProductId()),a.navigate("gift-store",t)}},"GiftOverlayController");e.exports=u},function(e,t,i){"use strict";var n=i(25),a=i(99),o=i(242),s=i(3447),r={OPEN_CHAT:"open-chat",OPEN_PROFILE:"open-profile",SEND_GIFT:"send-gift"},l=o.extend({events:{"click .js-button":"onAction_","click .js-profile":"onProfile_"},update:function(e){this.fullUpdate_(e)},fullUpdate_:function(e){var t=e.purchasedGift,i=t.is_private,n=t.gift,o={otherGift:!e.giftForMe&&!e.giftFromMe,giftForMe:e.giftForMe,privateGiftForMe:e.giftForMe&&i,privateGiftForOther:!e.giftFromMe&&!e.giftForMe&&i,canSend:!(e.giftForMe&&t.from_user_is_deleted),senderUid:t.from_user_id};o.showPrivate=i&&(o.privateGiftForMe||!o.privateGiftForMe&&!o.privateGiftForOther),o.showAvatar=!o.privateGiftForOther&&!e.giftFromMe,o.showPrivate&&(o.giftPrivateNotificationText=o.privateGiftForMe?a.get(287):a.get(291)),o.privateGiftForOther?o.title=a.get(277):(t.from_user_is_deleted?o.title=a.get(293):e.giftFromMe?(o.title=a.get(279),o.giftFromMe=!0):(o.title="".concat(a.get(272)," ").concat(t.from_user_name),o.canChat=!e.fromChat&&e.giftForMe),o.giftImage=n.large_url),o.text=t.text,this.render(o),this.enable(),this.show()},render:function(e){this.$el.html(s.render(e)),this.$el.find(".js-gift-image").one("load",function(e){n(e.currentTarget).closest(".is-loading").removeClass("is-loading")}),this.attachToggleScroll()},onAction_:function(e,t){var i=(t=n(t)).data("kind");"chat"===i?this.trigger(r.OPEN_CHAT,t.data("uid")):"send"===i&&this.trigger(r.SEND_GIFT)},onProfile_:function(){this.trigger(r.OPEN_PROFILE)}},"GiftPageView");l.ACTIONS=r,e.exports=l},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{},{close:"true",title:t.get(["title"],!1),scrollToggle:"1",scrollToggleClass:"navigation-bar--shadow"},"h").w('</div><div class="layout__content layout__content--hpadded"><div class="gift-fullsize-wrapper"><div class="gift gift--fullsize is-loading"><div class="gift__image"><div class="gift__image-loader">').h("Icon",t,{},{name:"gift-wrap",size:"stretch"},"h").w('</div><img src="').f(t.get(["giftImage"],!1),t,"h").w('" class="js-gift-image" alt=""></div>').x(t.get(["privateGiftForOther"],!1),t,{block:i},{}).w("</div></div>").x(t.get(["showPrivate"],!1),t,{block:n},{}).x(t.get(["privateGiftForOther"],!1),t,{else:a,block:m},{}).x(t.get(["canSend"],!1),t,{block:g},{}).w("</div></div>")}function i(e,t){return e.w('<div class="gift__private">').h("t",t,{},{k:"380"},"h").w("</div>")}function n(e,t){return e.w('<div class="gift-private-notification"><div class="gift-private-notification__text">').f(t.get(["giftPrivateNotificationText"],!1),t,"h").w('</div><div class="gift-private-notification__mark">').h("t",t,{},{k:"380"},"h").w("</div></div>")}function a(e,t){return e.w('<div class="gift-tag-wrapper"><div class="gift-tag ').x(t.get(["isReversed"],!1),t,{block:o},{}).w(' gift-tag--maximised" data-qa="gift-tag"><div class="gift-tag__main">').x(t.get(["text"],!1),t,{block:s},{}).x(t.get(["input"],!1),t,{block:r},{}).w('</div><div class="gift-tag__corner"><div class="gift-tag__corner-decoration gift-tag__corner-decoration--below"><svg viewBox="0 0 42 160" class="is-flipped"><g fill="none" fill-rule="evenodd"><path fill="#D3DEE7" d="M40.374937,0 C37.212164,0 34.347993,1.868 33.0706999,4.762 L0.679342,77.279 C-0.2264473,79.332 -0.2264473,81.672 0.679342,83.725 L33.0706999,155.242 C34.347993,158.136 37.212164,160.004 40.374937,160.004 L200,160.004 L200,-2.13162821e-14 L40.374937,0 Z"/></g></svg></div><div class="gift-tag__corner-decoration gift-tag__corner-decoration--above"><svg viewBox="0 0 42 160" class="is-flipped"><g fill="none" fill-rule="evenodd"><path fill="#FFFFFF" d="M200,0 L39.330757,0 C36.249781,0 34.10199,0.924899795 32.857731,3.81882738 L0.6617728,77.2770677 C-0.2205909,79.3300164 -0.2205909,81.6699579 0.6617728,83.7229067 L32.857731,156.232832 C34.10199,159.12676 36.249781,160 39.330757,160 L200,160 L200,7.2876178e-15 L200,0 Z"/></g></svg></div><div class="gift-tag__corner-hole"></div></div></div></div>')}function o(e,t){return e.w("gift-tag--reverse")}function s(e,t){return e.w('<div class="gift-tag__text">').f(t.get(["text"],!1),t,"h",["s"]).w("</div>")}function r(e,t){return e.w('<div class="gift-tag__input"><label class="gift-tag__input-label" for="').s(t.get(["fieldId"],!1),t,{else:l,block:c},{}).w('"></label><div class="gift-tag__input-clamp"><div class="gift-tag__input-mirror js-mirror">').x(t.get(["textValue"],!1),t,{else:u,block:d},{}).w('</div><textarea class="gift-tag__input-textarea js-textarea" id="').s(t.get(["fieldId"],!1),t,{else:h,block:p},{}).w('" name="').f(t.get(["fieldName"],!1),t,"h").w('" placeholder="').f(t.get(["textPlaceholder"],!1),t,"h").w('">').f(t.get(["textValue"],!1),t,"h").w('</textarea></div><span class="gift-tag__input-counter js-counter">').f(t.get(["textLimit"],!1),t,"h").w("</span></div>")}function l(e,t){return e.f(t.get(["fieldName"],!1),t,"h")}function c(e,t){return e.f(t.get(["fieldId"],!1),t,"h")}function u(e,t){return e.f(t.get(["textPlaceholder"],!1),t,"h")}function d(e,t){return e.f(t.get(["textValue"],!1),t,"h")}function h(e,t){return e.f(t.get(["fieldName"],!1),t,"h")}function p(e,t){return e.f(t.get(["fieldId"],!1),t,"h")}function m(e,t){return e.w('<div class="gift-private-message">').h("t",t,{},{k:"278"},"h").w("</div>")}function g(e,t){return e.w('<div class="gift-action"><div class="cta-box"><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{text:_,attrs:b,block:y},{type:"primary",extraClass:"js-button"},"h").w("</div>").x(t.get(["canChat"],!1),t,{block:k},{}).w("</div></div></div></div>")}function _(e,t){return e.x(t.get(["giftForMe"],!1),t,{block:f},{}).x(t.get(["giftFromMe"],!1),t,{block:v},{}).x(t.get(["otherGift"],!1),t,{block:E},{})}function f(e,t){return e.h("t",t,{},{k:"273"},"h")}function v(e,t){return e.h("t",t,{},{k:"274"},"h")}function E(e,t){return e.h("t",t,{},{k:"275"},"h")}function b(e,t){return e.w('data-kind="send"')}function y(e,t){return e}function k(e,t){return e.w('<div class="button-wrapper__item">').h("Button",t,{text:S,attrs:w,block:C},{type:"secondary",extraClass:"js-button"},"h").w("</div>")}function S(e,t){return e.h("t",t,{},{k:"379"},"h")}function w(e,t){return e.w('data-kind="chat" data-uid="').f(t.get(["senderUid"],!1),t,"h").w('"')}function C(e,t){return e}return e.register("gifts/gift-page",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,_.__dustBody=!0,f.__dustBody=!0,v.__dustBody=!0,E.__dustBody=!0,b.__dustBody=!0,y.__dustBody=!0,k.__dustBody=!0,S.__dustBody=!0,w.__dustBody=!0,C.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";function n(e){e&&e.name&&m.track(v,{is_locked:!1===e.isEnabled,sticker_pack_name:e.name})}i(132);var a=i(103),o=i(99),s=(i(113),i(124)),r=i(207),l=i(177),c=i(3449),u=i(157),d=i(576),h=i(159),p=i(208),m=i(102),g=i(136),_=i(101),f=_.StickerSentEvent,v=_.ViewStickersScreenEvent,E="stickers",b=d.getInstance(),y=h.extend({getNavigationBarContext:function(){return y._super.getNavigationBarContext.call(this,{title:o.get(292)})},createElement:function(){return g({className:"stickers"})},init:function(){var e=this;y._super.init.apply(this,arguments);var t=this.registerView(E,new c).on(c.ACTIONS.SELECT_PACk,this.onSelectPack_,this).on(c.ACTIONS.SEND_STICKER,this.onSendSticker_,this).on(c.ACTIONS.UNLOCK_PACK,this.onTryBuyPack_,this).showLoading().appendTo(this.parent);
return this.stickerId=Number(this.getParameter("id")),b.get().then(function(i){return t.render(i,e.stickerId)?(t.hideLoading(),e.readyForVrt(),e.loaded_=!0,void 0):Promise.reject(new Error("It was not possible to render the view."))}).catch(function(t){e.log.error(t),e.goBack_()})},onStart:function(e){this.activationPlace=Number(e.activationPlace)||this.activationPlace,this.clientSource=e.clientSource&&Number(e.clientSource)||this.clientSource,this.screenName=Number(e.screenName)||this.screenName,y._super.onStart.apply(this,arguments)},start:function(){if(y._super.start.apply(this,arguments),this.loaded_){var e=this.getView(E),t=this.getParameter("id");t&&t!==this.stickerId?(this.stickerId=t,e.render(null,this.stickerId)):e.refresh(),n(e.getCurrentPack())}},onNavigationAction:function(e){e!==h.BUTTONS.BACK&&e!==h.BUTTONS.CLOSE||this.goBack_()},loaded_:!1,goBack_:function(){a.back()},onError_:function(e){s.showNotification({text:e,type:s.TYPES.ERROR})},onSendSticker_:function(e,t){var i=this,n=this.getParameter("userId"),a="true"===this.getParameter("isMessageFirst"),o=new l({context:this.clientSource,image:t.stickers.find(function(t){return t.id===e}),messageType:23,streamId:this.getParameter("streamId"),toPersonId:n},null),s=this.getParameter("onSendMessage");u.send(n,o).then(function(o){b.updateRecent(e,t),m.track(f,{activation_place:i.activationPlace,encrypted_user_id:n,message_first:a,sticker_id:String(e),sticker_name:t.name}),s&&s(null,o),i.goBack_()}).catch(function(e){i.getView(E).hideLoading(),i.log.error("The sticker was not sent with success ;(",e),s?s(e):i.onError_(e.message||e)})},onSelectPack_:function(e){e.isNew&&b.setAsViewed(e),n(e)},onTryBuyPack_:function(e){var t=this,i=e.promoBlock,n={activationPlace:this.getParameter("activationPlace"),cost:i.cost,feature:112,objectId:String(e.id),promoBlockType:i.promoBlockType,screenName:this.screenName},o=(new r).setAction(i.button.actionType).setBack(a.getUrl()).setCost(i.cost).setFeature(i.featureType).setHotPanelData(n).setProductType(i.productType).setPurchaseTransactionSetup({featureType:112,stickerPackId:e.id});e.isLoading=!0,p.handleAction(o).then(function(i){i?(b.unlockPack(e),t.getView(E).unlockPack(e)):(e.isLoading=!1,t.getView(E).resetPack(e))}).catch(function(i){e.isLoading=!1,t.getView(E).resetPack(e),t.log.error(i,o),t.onError_()})}},"StickersPage");e.exports=y},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(111),s=i(203),r=i(3450),l=i(3451),c=o("SELECT_PACk","SEND_STICKER","UNLOCK_PACK"),u=a.extend({events:{"click .js-action":"onUnlockPack_","click .js-sticker-tab":"onSelectPack_","click .js-sticker":"onSelectSticker_"},data_:null,pack_:null,getCurrentPack:function(){return this.pack_},render:function(e,t){if(!(e=e||this.data_)||!e.stickerPacks||!e.stickerPacks.length)return!1;var i=!!e.recentStickers.length,n=this.pack_?this.pack_.id:null,a=e.stickerPacks,o=n||i?-1:a[0].id;if(t){var u=this.getPackByStickerId_(a,Number(t));u&&(o=u.id)}var d=this.getPack_(o,e),h=l.render(d),p=r.render({hasRecent:i,RECENT_ID:-1,selectedPackId:o,stickerPacks:a});return this.pack_=d,this.data_=e,s(p.find(".js-preload")),s(h.find(".js-preload")),this.$el.empty().append(p,h),this.scrollToActive_(),this.trigger(c.SELECT_PACk,d),!0},getPackByStickerId_:function(e,t){return e.filter(function(e){return e.stickers.some(function(e){return e.id===t})})[0]},reload:function(e){this.pack_=e;var t=l.render(e);s(t.find(".js-preload")),this.$el.find(".js-stickers-body").replaceWith(t)},refresh:function(){var e=this.pack_,t=this.$el.find(".js-stickers-promo");e.isEnabled&&t.remove()},unlockPack:function(e){this.pack_.id===e.id&&this.$el.find(".js-stickers-promo").remove();var t=this.$el.find(".js-sticker-tab").first(),i=this.$el.find('[data-id="'.concat(e.id,'"]'));t[0].after(i[0]),this.scrollToActive_()},resetPack:function(e){this.pack_.id===e.id&&this.$el.find("".concat(".js-stickers-promo"," button")).addClass("js-action").removeClass("is-loading")},lockPack:function(e){this.pack_.id===e.id&&this.$el.find(".".concat("js-action")).removeClass("js-action").addClass("is-loading")},scrollToActive_:function(){var e=this.$el.find(".js-tabs"),t=e.scrollLeft(),i=this.$el.find(".".concat("is-active")).offset().left-t;i>0&&e.scrollLeft(i)},onSelectPack_:function(e,t){e.stopPropagation(),e.preventDefault();var i=n(t),a=i.data("id");if(this.pack_.id===a)return this.refresh(this.pack_),!0;var o=this.getPack_(a,this.data_);return this.$el.find(".".concat("is-active")).removeClass("is-active"),i.addClass("is-active").find(".".concat("is-new")).removeClass("is-new"),this.reload(o),this.trigger(c.SELECT_PACk,o),!1},onSelectSticker_:function(e,t){var i=this.pack_;if(i.isEnabled){var a=n(t),o=a.data("id");this.updateRecent_(a),this.trigger(c.SEND_STICKER,o,i)}},onUnlockPack_:function(){var e=this.pack_;this.lockPack(e),this.trigger(c.UNLOCK_PACK,e)},updateRecent_:function(e){this.data_.recentStickers.length||this.$el.find(".js-sticker-recent").removeClass("hidden"),-1===this.pack_.id&&e.parent().prepend(e)},getPack_:function(e,t){return-1===e?{id:e,isEnabled:!0,name:"RECENT_STICKERS",stickers:t.recentStickers}:t.stickerPacks.find(function(t){return t.id===e})}},"StickersView");u.ACTIONS=c,e.exports=u},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="tabs tabs--scrollable stickers-tabs js-tabs"><div class="tab ').h("if",t,{block:i},{cond:n},"h").w(" ").nx(t.get(["hasRecent"],!1),t,{block:a},{}).w(' js-sticker-recent js-sticker-tab" data-id="').f(t.get(["RECENT_ID"],!1),t,"h").w('"><div class="tab__icon"><div class="stickers-tabs__icon">').h("Icon",t,{},{name:"chat-control-switcher-history",size:"stretch"},"h").w("</div></div></div>").s(t.get(["stickerPacks"],!1),t,{block:o},{}).w("</div>")}function i(e,t){return e.w("is-active")}function n(e,t){return e.f(t.get(["RECENT_ID"],!1),t,"h").w(" == ").f(t.get(["selectedPackId"],!1),t,"h")}function a(e,t){return e.w("hidden")}function o(e,t){return e.w('<div class="tab ').h("if",t,{block:s},{cond:r},"h").w(' js-sticker-tab" data-id="').f(t.get(["id"],!1),t,"h").w('"><div class="tab__other"><div class="stickers-tabs__image ').nx(t.get(["isLoaded"],!1),t,{block:l},{}).w(" ").x(t.get(["isNew"],!1),t,{block:c},{}).w(' js-preload" data-src="').f(t.get(["url"],!1),t,"h").w('"></div></div></div>')}function s(e,t){return e.w("is-active")}function r(e,t){return e.f(t.get(["id"],!1),t,"h").w(" == ").f(t.get(["selectedPackId"],!1),t,"h")}function l(e,t){return e.w("is-loading")}function c(e,t){return e.w("is-new")}return e.register("stickers/stickers-tabs",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return t=t.shiftBlocks(p),e.w('<div class="stickers-body js-stickers-body"><div class="stickers-showcase">').s(t.get(["stickers"],!1),t,{block:i},{}).w("</div>").s(t.get(["promoBlock"],!1),t,{block:n},{}).w("</div>")}function i(e,t){return t=t.shiftBlocks(p),e.w('<div class="stickers-showcase__item is-loading js-sticker" data-id="').f(t.get(["id"],!1),t,"h").w('"><div class="stickers-showcase__item_"><div class="stickers-showcase__loader">').h("Icon",t,{},{name:"loading-dots"},"h").w('</div><div class="stickers-showcase__image js-preload" data-src="').f(t.get(["src"],!1),t,"h").w('"></div></div></div>')}function n(e,t){return t=t.shiftBlocks(p),e.w('<div class="js-stickers-promo"><div class="floating-action stickers-promo">').b(t.getBlock("action"),t,{},{}).w('</div><div class="fake">').b(t.getBlock("action"),t,{},{}).w("</div></div>")}function a(e,t){return t=t.shiftBlocks(p),e.w('<div class="cta-box cta-box--compact">').x(t.get(["name"],!1),t,{block:o},{}).w('<div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').s(t.get(["button"],!1),t,{block:s},{}).w("</div></div></div>").x(t.get(["costOfService"],!1),t,{block:h},{}).w("</div>")}function o(e,t){return t=t.shiftBlocks(p),e.w('<div class="cta-box__header cta-box__header--xsm">').f(t.get(["name"],!1),t,"h").w("</div>")}function s(e,t){return t=t.shiftBlocks(p),e.h("Button",t,{extraClass:r,attrs:u,block:d},{type:"billing-green",text:t.get(["actionText"],!1)},"h")}function r(e,t){return t=t.shiftBlocks(p),e.nx(t.get(["isLoading"],!1),t,{block:l},{}).w(" ").x(t.get(["isLoading"],!1),t,{block:c},{})}function l(e,t){return t=t.shiftBlocks(p),e.w("js-action")}function c(e,t){return t=t.shiftBlocks(p),e.w("is-loading")}function u(e,t){return t=t.shiftBlocks(p),e.w('data-action-type="').f(t.get(["actionType"],!1),t,"h").w('"')}function d(e,t){return t=t.shiftBlocks(p),e}function h(e,t){return t=t.shiftBlocks(p),e.w('<div class="cta-box__additional">').f(t.get(["costOfService"],!1),t,"h").w("</div>")}e.register("stickers/stickers-body",t);var p={action:a};return t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(132),o=i(339),s=i(222),r=i(121),l=i(3453),c=i(136),u=i(103).navigate,d=i(103),h=i(165),p=i(362),m=i(102),g=i(149),_=i(101),f=_.ClickEvent,v=_.ViewElementEvent,E=r.extend({transition:!1,headerTemplate:null,activationPlace:122,screenName:50,userId_:null,createElement:function(){return c({className:"gift-store"})},init:function(){E._super.init.apply(this,arguments),this.registerView("view",new l({el:this.parent[0]})).on(l.ACTIONS.TOP_UP_CREDITS,function(){g.generate(),m.track(f,{element:869,parentElement:32}),h.navigateToPayment({productType:13,back:d.getUrl(),hotPanelData:{activationPlace:122}})}).on(l.ACTIONS.SELECT,this.onSelect_,this)},onStart:function(){var e=this,t=a.getSync(113);if(!t||t.getEnabled()){E._super.onStart.apply(this,arguments);var i=this.getView("view"),r=this.getParameter("id"),l=p.isGiftStoreActive()?s.get():Promise.resolve();this.userId_!==r?(i.reset(),this.userId_=r,i.showLoading(),Promise.all([o.getInstance().get(r),l]).then(function(t){var i=(0,n.default)(t,2),a=i[0],o=i[1];e.onData_(a[0],o)})):l.then(function(t){t&&e.getView("view").updateCredits(t)})}else u("encounters")},onData_:function(e,t){this.getView("view").hideLoading(),p.hit(),this.updateView("view",{productList:e,credits:t}),p.isGiftStoreActive()&&m.track(v,{element:869}),this.readyForVrt()},onSelect_:function(e){var t=this.getParameters(),i=t.back,n=t.context,a=t.onSendMessage,o=t.streamId;u("send-gift",{back:i,context:n,giftProductId:e,onSendMessage:a,streamId:o,userId:this.userId_})}},"GiftStore");e.exports=E},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(109),s=i(99),r=i(3454),l={SELECT:"select",TOP_UP_CREDITS:"top-up-credits"},c=o.extend({events:{"click .js-more":"onShowMore_","click .js-item":"onItem_","click .js-gift-overlay-credits-cta":"onNavigateToCreditsWizard_"},updateCredits:function(e){this.$(".js-credits").html(e)},update:function(e){var t={credits:e.credits,showCredits:void 0!==e.credits};t.sections=n.map(e.productList.getSections(),function(e){var t=n.map(e.getGiftProducts(),function(e){return{id:e.getProductId(),image:e.getThumbUrl()}}),i=0!==e.getId(),a={name:e.getName(),gifts:t,cost:s.get(338,e.getCreditsCost()),isPremium:i};if(!i&&t.length>12){a.showMoreButton=!0;for(var o=11;o<t.length;o++)t[o].hidden=!0}return a}),this.render(t)},reset:function(){return c._super.reset.apply(this,arguments),window.scrollTo(0,0),this},render:function(e){this.$el.html(r.render(e)),this.$el.find(".js-image").one("load",function(e){a(e.currentTarget).closest(".js-item").removeClass("is-loading")})},disable:function(){c._super.disable.apply(this,arguments),this.$el.find(".js-image").off()},onShowMore_:function(e,t){a(t).closest(".js-items").addClass("is-expanded")},onItem_:function(e,t){this.trigger(l.SELECT,a(t).data("id"))},onNavigateToCreditsWizard_:function(){this.trigger(l.TOP_UP_CREDITS)}},"GiftStore");c.ACTIONS=l,e.exports=c},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{title:i,block:n},{back:"true"},"h").w('</div><div class="layout__content layout__content--hpadded">').s(t.get(["sections"],!1),t,{block:a},{}).x(t.get(["showCredits"],!1),t,{block:u},{}).w("</div></div>")}function i(e,t){return e.h("t",t,{},{k:"276"},"h")}function n(e,t){return e}function a(e,t){return e.w('<div class="gift-showcase ').x(t.get(["isPremium"],!1),t,{block:o},{}).w('"><div class="gift-showcase__info"><div class="gift-showcase__title">').f(t.get(["name"],!1),t,"h").w('</div><div class="gift-showcase__price">').f(t.get(["cost"],!1),t,"h").w('</div></div><div class="gift-showcase__items js-items">').s(t.get(["gifts"],!1),t,{block:s},{}).x(t.get(["showMoreButton"],!1),t,{block:c},{}).w("</div></div>")}function o(e,t){return e.w("gift-showcase--premium")}function s(e,t){return e.w('<div class="gift-showcase__item ').x(t.get(["hidden"],!1),t,{block:r},{}).w('"><div class="gift ').x(t.get(["isPremium"],!1),t,{block:l},{}).w(' is-loading js-item" data-id="').f(t.get(["id"],!1),t,"h").w('"><div class="gift__image"><div class="gift__image-loader">').h("Icon",t,{},{name:"gift-wrap",size:"stretch"},"h").w('</div><img src="').f(t.get(["image"],!1),t,"h").w('" class="js-image" alt=""></div></div></div>')}function r(e,t){return e.w("gift-showcase__item--additional")}function l(e,t){return e.w("gift--lg")}function c(e,t){return e.w('<div class="gift-showcase__item gift-showcase__item--more"><div class="brick js-more" data-qa="brick"><div class="brick__icon">').h("Icon",t,{},{name:"generic-ellipsis",size:"lg"},"h").w("</div></div></div>")}function u(e,t){return e.w('<div class="credits-widget-container credits-widget-container--position-center"><div class="credits-widget js-gift-overlay-credits-cta">').h("Icon",t,{},{name:"generic-coin",size:"md"},"h").w('<div class="credits-widget__content js-credits">').f(t.get(["credits"],!1),t,"h").w('</div><div class="credits-widget__extra">').h("Icon",t,{},{name:"badge-plus-green",size:"sm"},"h").w('</div></div></div><div class="credits-widget-container-fake"></div>')}return e.register("gifts/gift-store",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";function n(e,t){return e.startsWith("messages")?e:u.encodeRoute("messages",{id:t})}var a=i(3),o=a(i(168)),s=a(i(4)),r=i(100),l=i(126),c=i(132),u=i(146),d=i(177),h=i(121),p=i(157),m=i(222),g=i(339),_=i(128),f=i(3456),v=i(136),E=i(218),b=i(102),y=i(149),k=i(103),S=k.navigate,w=k.getLocation,C=k.updateLocation,T=k.back,P=k.goBackTo,N=i(105).PurchasedGift,I=i(101).ChangeGiftEvent,x=h.extend({transition:!1,headerTemplate:null,userId_:null,back_:null,productId_:null,activationPlace:122,createElement:function(){return v({className:"send-gift"})},construct:function(){x._super.construct.apply(this,arguments),this.loader_=E(this.element[0])},init:function(){x._super.init.apply(this,arguments);var e=new f({el:this.parent[0]});e.on(f.ACTIONS.BACK,T).on(f.ACTIONS.SEND,this.onSend_,this).on(f.EVENTS.GIFT_CHANGED,this.onGiftChange_,this),this.registerView("view",e)},open:function(e){var t=e.parameters;if(x._super.open.apply(this,arguments),t.paymentFlow){var i=w(),n=i.routeName,a=i.parameters,o=r.omit(a,"paymentFlow");C(n,o)}else this.loader_.hide()},onStart:function(e){var t=e.userId,i=e.giftProductId;x._super.onStart.apply(this,arguments),c.getSync(113).getEnabled()?(this.userId_=String(t),this.productId_=parseInt(i,10)):S(l.get("default.page"))},onReady:function(){var e=this;x._super.onReady.apply(this,arguments),Promise.all([g.getInstance().get(this.userId_),_.getInstance().get({id:this.userId_,clientSource:this.clientSource}),m.get()]).then(function(t){var i=(0,s.default)(t,3),n=(0,s.default)(i[0],1)[0],a=i[1],o=i[2];return e.onData_({productListResponse:n,user:a,credits:o})})},onData_:function(e){var t=this,i=e.productListResponse,a=e.user,o=e.credits;if(a.getIsDeleted()){var s=n(this.getParameter("back"),this.userId_);S(s,!0)}else this.user_=a,this.section_=r.find(i.getSections(),function(e){return r.find(e.getGiftProducts(),function(e){return e.getProductId()===t.productId_})}),this.updateView("view",{section:this.section_,selectedId:this.productId_,user:a,credits:o}),this.readyForVrt()},onSend_:function(e){var t=this.section_.getCreditsCost(),i=this.getGift_(Number(e.id)),a=String(e.text||""),s=this.user_.getUserId(),r=this.getParameters(),l=r.context,c=r.streamId,h=r.onSendMessage;y.generate();var m=(new N).setGift(i).setIsPrivate(Boolean(e.isPrivate)).setText(a),g=new d({context:l,cost:t,gift:m,message:a,messageType:10,streamId:c,toPersonId:s},this.user_);!Number(s)&&s.length<20&&this.log.error("WRONG USER ID: ".concat(s," in onSend_")),function(e){var t=e.user,i=e.chatMessage,a=e.loader,s=e.onSendMessage,r=e.backUrl;a.show();var l=t.getUserId(),c=u.encodeRoute(r,{paymentFlow:!0});p.send(l,i,c).then(function(e){a.hide();var c=t.getReceivedGifts();c.setGifts([e.gift].concat((0,o.default)(c.getGifts([])))),_.getInstance().updateCache(l,"ReceivedGifts",c),s&&s(null,i);var u=n(r,l);P(r,u)},function(e){a.hide(),s&&s(e)})}({backUrl:this.getParameter("back"),chatMessage:g,loader:this.loader_,onSendMessage:h,user:this.user_})},onGiftChange_:function(e){b.track(I,{credits_cost:this.section_.getCreditsCost(),gift_name:this.section_.getName(),object_id:String(e.id),uid:""})},getGift_:function(e){var t=this.section_;return r.find(t.getGiftProducts(),function(t){return t.getProductId()===e}).setCost(t.getCreditsCost())}},"GiftSend");e.exports=x},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(162),s=i(111),r=i(171),l=i(176),c=i(141),u=i(99),d=i(424),h=i(242),p=i(3457),m={BACK:"back",SEND:"send"},g=s("GIFT_CHANGED"),_=h.extend({buttonDisabled_:null,buttonElement_:null,stickyScroll_:null,textCounterElement_:null,textElement_:null,textMirrorElement_:null,events:{"click .js-private":"onPrivateToggle_","click .js-button":"onItem_","click .js-prev":"onPrev_","click .js-next":"onNext_"},init:function(){this.onItem_=this.onItem_.bind(this),this.onResize_=this.onResize_.bind(this),this.onTextInput_=this.onTextInput_.bind(this),_._super.init.apply(this,arguments)},enable:function(){var e=_._super.enable.apply(this,arguments);return o.on("resize",this.onResize_),e},disable:function(){var e=_._super.disable.apply(this,arguments);return o.off("resize",this.onResize_),e},update:function(e){this.selectedId_=e.selectedId;var t,i,a=e.section;this.gifts_=n.map(a.getGiftProducts(),this.processGift_.bind(this)),this.gifts_[0].isFirst=!0,this.gifts_[this.gifts_.length-1].isLast=!0;var o=e.user.getName();1===e.user.getGender()?(t="male",i=u.get(330,o)):2===e.user.getGender()?(t="female",i=u.get(331,o)):(t="unknown",i=u.get(381));var s=a.getCreditsCost(),r=n.isNumber(e.credits)&&e.credits>=s?u.get(332,s):null,l={gifts:this.gifts_,gender:t,receiverPhoto:e.user.getProfilePhoto().getLargeUrl(),footerLabel:r,placeholder:u.get(50),textLimit:60,title:i};this.render(l)},render:function(e){this.$el.html(p.render(e)),this.textElement_=this.$el.find(".js-textarea"),this.textMirrorElement_=this.$el.find(".js-mirror"),this.buttonElement_=this.$el.find(".js-button"),this.textElement_.on("keyup",this.onTextInput_),this.textCounterElement_=this.$el.find(".js-counter"),this.$el.find(".js-image").one("load",function(e){a(e.currentTarget).closest(".js-item").removeClass("is-loading")}),this.toggleScroll_=new l(this.$el.find(".js-scroll-toggle")),this.initScroll_()},processGift_:function(e){return{id:e.getProductId(),image:e.getLargeUrl()}},onTextClick_:function(){if(!a.os.ios){var e=function(){r().scrollTop=1e6};e(),setTimeout(e,500),setTimeout(e,1e3)}},updateArrows_:function(){var e=n.find(this.gifts_,{id:this.selectedId_});this.$el.find(".js-prev").toggleClass("hidden",!0===e.isFirst),this.$el.find(".js-next").toggleClass("hidden",!0===e.isLast)},initScroll_:function(){this.attachToggleScroll(),this.stickyScroll_&&this.removeView("sticky-scroller"),this.stickyScroll_=this.registerView("sticky-scroller",new d({el:this.$el.find(".js-sticky-scroller")[0]})),this.stickyScroll_.setScrollCallback(this.onGiftScroll_,this).setActiveStyleName("is-active").updateLayout().selectChildById(this.selectedId_),this.updateArrows_(),this.isEnabled_&&this.stickyScroll_.enable()},onResize_:function(){this.stickyScroll_&&this.stickyScroll_.updateLayout().selectChildById(this.selectedId_)},onPrev_:function(){this.stickyScroll_.selectPrev()},onNext_:function(){this.stickyScroll_.selectNext()},onPrivateToggle_:function(e,t){this.$el.find(".js-private-container").toggleClass("is-private",t.checked)},onGiftScroll_:function(e){this.selectedId_=parseInt(e.id,10),this.updateArrows_(),this.trigger(g.GIFT_CHANGED,e)},onTextInput_:function(){var e=this.textElement_.val()||"";e.length>60&&(e=e.slice(0,60),this.textElement_.val(e));var t=60-e.length,i=t<0;e=e||u.get(50),e=c.escapeHtml(e),this.textMirrorElement_.html(e.replace(/\n/g,"<br>".concat(String.fromCharCode(160)))),this.textCounterElement_.text(t),i!==this.buttonDisabled_&&(i?this.buttonElement_.attr("disabled",!0):this.buttonElement_.removeAttr("disabled")),this.buttonDisabled_=i},onItem_:function(){this.trigger(m.SEND,{id:this.selectedId_,isPrivate:1===this.$el.find("input.js-private:checked").length,text:this.textElement_.val().substring(0,60)})}},"GiftSend");_.ACTIONS=m,_.EVENTS=g,e.exports=_},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{},{back:"true",title:t.get(["title"],!1),scrollToggle:"1",scrollToggleClass:"navigation-bar--shadow"},"h").w('</div><div class="layout__content layout__content--hpadded"><div class="gift-preview"><div class="sticky-scroll js-sticky-scroller').x(t.get(["isFirst"],!1),t,{block:i},{}).x(t.get(["isLast"],!1),t,{block:n},{}).w('"><div class="sticky-scroll_ js-scrollable">').s(t.get(["gifts"],!1),t,{block:a},{}).w('</div><div class="gift-preview__control gift-preview__control--prev js-prev">').h("Icon",t,{},{name:"generic-chevron-left",size:"md",supportsRtl:"true"},"h").w('</div><div class="gift-preview__control gift-preview__control--next js-next">').h("Icon",t,{},{name:"generic-chevron-right",size:"md",supportsRtl:"true"},"h").w('</div></div></div><div class="gift-private-switcher js-private-container"><div class="gift-private-switcher__control"><div class="switcher"><input type="checkbox" id="isPrivate" name="private" class="js-private"><label class="needsclick" for="isPrivate"></label></div></div><label for="isPrivate" class="gift-private-switcher__text">').h("t",t,{},{k:"281"},"h").w('</label><div class="gift-private-switcher__mark">').h("t",t,{},{k:"380"},"h").w('</div></div><div class="gift-tag-wrapper"><div class="gift-tag ').x(t.get(["isReversed"],!1),t,{block:o},{}).w(' gift-tag--maximised" data-qa="gift-tag"><div class="gift-tag__main">').x(t.get(["text"],!1),t,{block:s},{}).w('<div class="gift-tag__input"><label class="gift-tag__input-label" for="messageField"></label><div class="gift-tag__input-clamp"><div class="gift-tag__input-mirror js-mirror">').x(t.get(["textValue"],!1),t,{else:r,block:l},{}).w('</div><textarea class="gift-tag__input-textarea js-textarea" id="messageField" name="message" placeholder="').f(t.get(["placeholder"],!1),t,"h").w('">').f(t.get(["textValue"],!1),t,"h").w('</textarea></div><span class="gift-tag__input-counter js-counter">').f(t.get(["textLimit"],!1),t,"h").w('</span></div></div><div class="gift-tag__corner"><div class="gift-tag__corner-decoration gift-tag__corner-decoration--below"><svg viewBox="0 0 42 160" class="is-flipped"><g fill="none" fill-rule="evenodd"><path fill="#D3DEE7" d="M40.374937,0 C37.212164,0 34.347993,1.868 33.0706999,4.762 L0.679342,77.279 C-0.2264473,79.332 -0.2264473,81.672 0.679342,83.725 L33.0706999,155.242 C34.347993,158.136 37.212164,160.004 40.374937,160.004 L200,160.004 L200,-2.13162821e-14 L40.374937,0 Z"/></g></svg></div><div class="gift-tag__corner-decoration gift-tag__corner-decoration--above"><svg viewBox="0 0 42 160" class="is-flipped"><g fill="none" fill-rule="evenodd"><path fill="#FFFFFF" d="M200,0 L39.330757,0 C36.249781,0 34.10199,0.924899795 32.857731,3.81882738 L0.6617728,77.2770677 C-0.2205909,79.3300164 -0.2205909,81.6699579 0.6617728,83.7229067 L32.857731,156.232832 C34.10199,159.12676 36.249781,160 39.330757,160 L200,160 L200,7.2876178e-15 L200,0 Z"/></g></svg></div><div class="gift-tag__corner-hole"></div></div></div></div><div class="gift-action"><div class="cta-box"><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{text:c,attrs:u,block:d},{type:"primary",extraClass:"js-button"},"h").w('</div></div></div><div class="cta-box__additional js-footer" data-qa="gift-cost">').f(t.get(["footerLabel"],!1),t,"h").w("</div></div></div></div></div>")}function i(e,t){return e.w(" is-first")}function n(e,t){return e.w(" is-last")}function a(e,t){return e.w('<div class="gift-preview__page" data-id="').f(t.get(["id"],!1),t,"h").w('"><div class="gift gift--fullsize is-loading js-item"><div class="gift__image"><div class="gift__image-loader">').h("Icon",t,{},{name:"gift-wrap",size:"stretch"},"h").w('</div><img src="').f(t.get(["image"],!1),t,"h").w('" class="js-image" alt=""></div></div></div>')}function o(e,t){return e.w("gift-tag--reverse")}function s(e,t){return e.w('<div class="gift-tag__text">').f(t.get(["text"],!1),t,"h",["s"]).w("</div>")}function r(e,t){return e.f(t.get(["placeholder"],!1),t,"h")}function l(e,t){return e.f(t.get(["textValue"],!1),t,"h")}function c(e,t){return e.h("t",t,{},{k:"382"},"h")}function u(e,t){return e.w('data-kind="send"')}function d(e,t){return e}return e.register("gifts/gift-send",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(100),s=i(155),r=i(99),l=i(121),c=i(3459),u=i(199),d=i(102),h=i(216),p=i(103),m=i(136),g=i(101),_=g.ExitCrossSellEvent,f=g.ViewBannerEvent,v=g.ClickBannerEvent,E=g.ClickEvent,b="cross-sell",y=(n={},(0,a.default)(n,6,"extra-shows"),(0,a.default)(n,7,"riseup"),(0,a.default)(n,2,"spotlight"),(0,a.default)(n,21,"attention-boost"),n),k=l.extend({headerTemplate:null,transaction:null,activationPlace:77,screenName:119,createElement:function(){return m({className:"cross-sell"})},init:function(){k._super.init.apply(this,arguments),this.registerView(b,new c).on(c.EVENTS.CLOSE,this.closeCrossSell_,this).on(c.EVENTS.CONFIRMATION,this.onConfirmation_,this).on(c.EVENTS.TERMS,this.onTerms_,this).appendTo(this.parent)},onStart:function(){var e=this.getParameter("clientPurchaseReceipt");if(o.isObject(e)){var t=s(e);if(t.getCrossSell){k._super.onStart.apply(this,arguments),u.on(u.EVENTS.END_PAYMENT,this.onConfirmationEnd_,this);var i=t.getCrossSell(),n=t.getNotification(),a=i.getPromo(),l=a.getPromoBlockType(),c=a.getOkPaymentProductType(),m=45===l,g=44===l,_=m||g,v=a.getPictures([]),E={pageTitleText:n.getTitle(),pageMessageText:n.getMessage(),actionText:a.getAction(),cancelText:a.getCancelText(),creditsCostText:a.getCreditsCost(),headerText:a.getHeader(),messageText:a.getMssg(),profilePhoto:v.length?v[0].getDisplayImages():null,isCrossSell:_,credits:m&&{otherText:a.getOtherText()},spp:g,isPackSales:49===l,featureName:y[c],ribbon:!m&&{otherText:a.getOtherText()},termsTitle:r.get(146)};this.updateView(b,E),this.promo=a,this.transaction=i.getTransaction(),this.paymentProductType=c,this.hotPanelPaymentFlowId_=h.trackStart(null,c,77,{product:h.toProduct(c),cost:a.getPaymentAmount(0)}),_&&d.track(f,{promo_block_type:this.promo.getPromoBlockType(),banner_id:this.promo.getPromoBlockType(),position_id:this.promo.getPromoBlockPosition()})}else p.back()}else this.close()},onStop:function(){k._super.onStop.apply(this,arguments),u.off(u.EVENTS.END_PAYMENT,this.onConfirmationEnd_,this)},onConfirmation_:function(){d.track(v,{promo_block_type:this.promo.getPromoBlockType(),banner_id:this.promo.getPromoBlockType(),position_id:this.promo.getPromoBlockPosition()});var e={from:p.getUrl()};u.handlePromoSelected({action:this.promo.getOkAction(),activationPlace:this.getActivationPlace(),banner:this.promo.getPromoBlockType(),cost:this.promo.getPaymentAmount(),crossSellTransaction:this.transaction,productType:this.promo.getOkPaymentProductType(),screenName:this.getScreenName(),hotPanelData:{existingPaymentFlowId:this.hotPanelPaymentFlowId_}},e)},onConfirmationEnd_:function(){this.getView(b).removeLoading(),h.trackPaymentResult(this.hotPanelPaymentFlowId_,h.RESULT.SUCCESS),p.back()},getActivationPlace:function(){switch(this.promo&&this.promo.getPromoBlockType()){case 44:case 45:return 77;case 49:return 103;default:return this.activationPlace}},getScreenName:function(){if(o.isEmpty(this.promo)||!this.promo.getPromoBlockType)return this.screenName;switch(this.promo.getPromoBlockType()){case 56:return 210;case 9:return 100;case 1:return 101;case 10:return 103;default:return this.screenName}},closeCrossSell_:function(){d.track(E,{element:51}),h.trackPaymentResult(this.hotPanelPaymentFlowId_,h.RESULT.CANCELLED);var e=this.getActivationPlace();e?(d.track(_,{activation_place:e,uid:this.transaction.getUid()}),p.back()):this.log("Not defined activation place when closing cross sell")},onTerms_:function(){d.track(E,{element:161}),p.navigate("payment-terms",{hotPanelData:{existingPaymentFlowId:this.hotPanelPaymentFlowId_},productType:this.transaction.getProductType(),productUid:this.transaction.getUid(),providerId:this.transaction.getProviderId()})}},"CrossSellController");e.exports=k},function(e,t,i){"use strict";var n=i(25),a=i(109),o=i(113),s=i(169),r=i(3460),l={CLOSE:"close",CONFIRMATION:"confirmation",TERMS:"terms"},c=a.extend({id:"cross-sell-page-view",events:{"click .js-cross-sell-close":"close","click .js-cross-sell-confirmation":"confirmation","click .js-terms":"onTerms_"},toggleScroll_:null,update:function(e){var t=o.getUser();if(e.imagePlaceholder=s.getPlaceholderForGender(t.getGender()).value,this.render(e),(e.isPackSales||e.isBundleSale)&&!e.profilePhoto&&!t.getProfilePhoto().getPreviewUrl())return!1},render:function(e){this.$el.html(r.render(e))},close:function(){this.trigger(l.CLOSE)},confirmation:function(e,t){n(t).hasClass("is-loading")||(n(t).addClass("is-loading"),this.trigger(l.CONFIRMATION))},removeLoading:function(){this.$el.find(".js-cross-sell-confirmation").removeClass("is-loading")},onTerms_:function(e){e.preventDefault(),this.trigger(l.TERMS,{provider:this.selectedProviderId_,product:this.selectedProductId_})}},"CrossSellView");c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(248),s=i(166),r=i(134),l=i(99),c=i(153);e.exports=i(108)("CrossSell",function(e){return n.createElement("div",{className:"upsell"},n.createElement("div",{className:"upsell__title"},e.pageTitleText),n.createElement("div",{className:"upsell__message"},e.pageMessageText),n.createElement("div",{className:"upsell-promotion"},c(e.ribbon,e,function(e){return n.createElement("div",{className:"ribbon ribbon--red"},e.otherText)}),n.createElement("div",{className:"cta-box"},e.spp&&n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--xxlg upsell-promotion__brick","data-qa":"brick"},n.createElement("div",{className:"brick__icon brick__icon--transparent"},n.createElement(a,{name:"generic-premium",size:"stretch"})))),c(e.credits,e,function(e){return n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--xxlg upsell-promotion__brick","data-qa":"brick"},n.createElement("div",{className:"brick__icon brick__icon--transparent"},n.createElement("svg",{viewBox:"0 0 64 64",
className:"icon-inline","data-qa-icon-name":"coins"},n.createElement("defs",null,n.createElement("linearGradient",{id:"icon-coins_gradient",x1:"50%",x2:"50%",y1:"71.486%",y2:".293%"},n.createElement("stop",{offset:"0%","stop-color":"#FFD300"}),n.createElement("stop",{offset:"100%","stop-color":"#FFE600"}))),n.createElement("g",{fill:"none","fill-rule":"evenodd"},n.createElement("g",{transform:"translate(20 10)"},n.createElement("circle",{cx:"22",cy:"22",r:"21.651",fill:"url(#icon-coins_gradient)","fill-rule":"nonzero",stroke:"#FFC831","stroke-width":".697"}),n.createElement("path",{fill:"#FFBA00","fill-rule":"nonzero",d:"M26.9 13.83c-1.93 0-3.75.9-4.9 2.42a6.18 6.18 0 0 0-6.8-2.1 6.01 6.01 0 0 0-4.2 5.68c0 5.42 7.38 12.23 11 12.23s11-6.82 11-12.23c0-3.31-2.73-5.99-6.1-6z"})),n.createElement("g",{transform:"translate(0 10)"},n.createElement("circle",{cx:"22",cy:"22",r:"21.651",fill:"url(#icon-coins_gradient)","fill-rule":"nonzero",stroke:"#FFC831","stroke-width":".697"}),n.createElement("path",{fill:"#FFBA00","fill-rule":"nonzero",d:"M26.9 13.83c-1.93 0-3.75.9-4.9 2.42a6.18 6.18 0 0 0-6.8-2.1 6.01 6.01 0 0 0-4.2 5.68c0 5.42 7.38 12.23 11 12.23s11-6.82 11-12.23c0-3.31-2.73-5.99-6.1-6z"}))))),n.createElement("div",{className:"brick__badge brick__badge--br upsell-promotion__brick-badge"},n.createElement(o,{color:"notification",text:e.otherText}))))}),e.isPackSales&&n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick-wrapper brick-wrapper--padded"},n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--xxlg","data-qa":"brick"},e.profilePhoto?n.createElement("div",{className:"brick__image"},n.createElement("img",{src:"".concat(s({src:e.profilePhoto,width:100})),alt:""})):n.createElement("div",{className:"brick__icon"},n.createElement(a,{size:"stretch",name:"avatar-placeholder-".concat(e.imagePlaceholder)})),n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(a,{shadow:!0,size:"md",name:"badge-feature-".concat(e.featureName)})),n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(a,{shadow:!0,size:"md",name:"badge-feature-".concat(e.featureName)})),n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(a,{shadow:!0,size:"md",name:"badge-feature-".concat(e.featureName)})))))),e.isBundleSale&&n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick-wrapper brick-wrapper--padded"},n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--xxlg","data-qa":"brick"},e.profileImage?n.createElement("div",{className:"brick__image js-picture"},n.createElement("img",{src:"".concat(s({src:e.profileImage,width:100})),alt:""})):n.createElement("div",{className:"brick__icon js-picture"},n.createElement(a,{size:"stretch",name:e.imagePlaceholder})),n.createElement("div",{className:"brick__badge brick__badge--bc"},n.createElement(a,{name:"badge-feature-bundle-sale",size:"lg",shadow:!0})))))),n.createElement("div",{className:"cta-box__header cta-box__header--sm"},e.headerText),n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.messageText}}),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},e.spp?n.createElement(r,{type:"premium",text:e.actionText,narrow:"true",extraClass:"js-cross-sell-confirmation"}):null,e.credits?n.createElement(r,{type:"billing-green",text:e.actionText,narrow:"true",extraClass:"js-cross-sell-confirmation"}):null,e.isBundleSale?n.createElement(r,{type:"bundle-sale",text:e.actionText,narrow:"true",extraClass:"js-cross-sell-confirmation"}):null,e.isPackSales?n.createElement(r,{type:e.featureName,text:e.actionText,narrow:"true",extraClass:"js-cross-sell-confirmation"}):null))))),n.createElement("div",{className:"upsell__close js-cross-sell-close"},l.get(20)),e.isCrossSell&&n.createElement("div",{className:"upsell__footer"},n.createElement("div",{className:"hint"},e.creditsCostText," ",n.createElement("a",{href:"#",className:"js-terms"},e.termsTitle))))})},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(122),s=i(102),r=i(103),l=i(146),c=i(124),u=i(588),d=i(121),h=i(3462),p=i(136),m=i(105),g=m.String,_=m.ClientUnsubscribeAlternative,f=i(101).ClickButtonEvent,v=h.ACTIONS,E=(n={},(0,a.default)(n,60,v.ACCEPT_PROMO),(0,a.default)(n,63,v.REDIRECT_PAGE),(0,a.default)(n,10,v.OPEN_ENCOUNTERS),n),b=d.extend({headerTemplate:null,notificationScreenAccess:3,screenName:134,createElement:function(){return p({className:"unsubscribe-spp-promo"})},init:function(){b._super.init.apply(this,arguments),this.registerView("unsub-view",new h).on(v.UNSUBSCRIBE,this.onUnsubscribe_.bind(this)).on(v.REDIRECT_PAGE,this.onRedirectPage_.bind(this)).on(v.OPEN_ENCOUNTERS,r.navigate.bind(this,"encounters")).on(v.ACCEPT_PROMO,this.onAcceptPromo_.bind(this))},onStart:function(){b._super.onStart.apply(this,arguments),this.getParameter("promo")instanceof _?this.onParametersUpdate():r.back()},onParametersUpdate:function(){var e=this.getParameter("promo").getPromoOffer(),t=e.getGoalProgress();this.promoId_=e.getId();var i={header:e.getHeader(),description:e.getMssg(),actionText:e.getAction(),cancelText:e.getCancelText(),action:E[e.getOkAction()]};t&&(i.goalProgress=function(e){var t=e.getGoal()-e.getProgress(),i=Math.floor(t/S);t-=i*S;var n=Math.floor(t/k);t-=n*k;var a=Math.floor(t/y);return{days:i,hours:n,minutes:a}}(t));var n=this.getView("unsub-view");n.update(i),n.appendTo(this.parent)},onUnsubscribe_:function(){u.getInstance().unsubscribe(1).then(function(){r.navigate("own-profile")},this.onError_),s.track(f,{button_name:22})},onRedirectPage_:function(){var e=this.getParameter("promo").getPromoOffer().getRedirectPage();r.navigate(l.getRouteFromRedirectPage(e),!0)},onAcceptPromo_:function(){var e=this,t=this.getParameter("promo").getPromoOffer().getId();new o(402,(new g).setValue(t)).on(387,function(t){t?(e.onParametersUpdate(),e.onError_()):r.navigate("own-profile")}).request(),s.track(f,{button_name:46})},onError_:function(){c.showNotification({type:c.TYPES.ERROR})}},"UnsubscribeSppPromo"),y=60,k=60*y,S=24*k;e.exports=b},function(e,t,i){"use strict";var n=i(25),a=i(100),o=i(173),s=i(176),r=i(111),l=i(3463),c=r("UNSUBSCRIBE","REDIRECT_PAGE","ACCEPT_PROMO","OPEN_ENCOUNTERS"),u=o.extend({template_:l,ACTIONS:c,init:a.noop,events:Object.assign({"click .js-action":"onActionClick_"},o.prototype.events),render:function(){u._super.render.apply(this,arguments),this.toggleScroll_=new s(this.$el.find(".js-scroll-toggle"))},onActionClick_:function(e,t){var i=n(t);i.data("action")===c.ACCEPT_PROMO&&i.addClass("is-loading")}},"UnsubscribeSppPromo");u.ACTIONS=c,e.exports=u},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(248),r=i(134),l=i(153);e.exports=i(108)("PromoPreventUnsubscription",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__header"},n.createElement(o,{back:"true",title:a.get(52)})),n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--xxlg prevent-unsubscription__brick","data-qa":"brick"},n.createElement("div",{className:"brick__icon brick__icon--transparent"},n.createElement("svg",{viewBox:"0 0 64 64",className:"icon-inline","data-qa-icon-name":"coins"},n.createElement("defs",null,n.createElement("linearGradient",{id:"icon-coins_gradient",x1:"50%",x2:"50%",y1:"71.486%",y2:".293%"},n.createElement("stop",{offset:"0%",stopColor:"#FFD300"}),n.createElement("stop",{offset:"100%",stopColor:"#FFE600"}))),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("g",{transform:"translate(20 10)"},n.createElement("circle",{cx:"22",cy:"22",r:"21.651",fill:"url(#icon-coins_gradient)",fillRule:"nonzero",stroke:"#FFC831",strokeWidth:".697"}),n.createElement("path",{fill:"#FFBA00",fillRule:"nonzero",d:"M26.9 13.83c-1.93 0-3.75.9-4.9 2.42a6.18 6.18 0 0 0-6.8-2.1 6.01 6.01 0 0 0-4.2 5.68c0 5.42 7.38 12.23 11 12.23s11-6.82 11-12.23c0-3.31-2.73-5.99-6.1-6z"})),n.createElement("g",{transform:"translate(0 10)"},n.createElement("circle",{cx:"22",cy:"22",r:"21.651",fill:"url(#icon-coins_gradient)",fillRule:"nonzero",stroke:"#FFC831",strokeWidth:".697"}),n.createElement("path",{fill:"#FFBA00",fillRule:"nonzero",d:"M26.9 13.83c-1.93 0-3.75.9-4.9 2.42a6.18 6.18 0 0 0-6.8-2.1 6.01 6.01 0 0 0-4.2 5.68c0 5.42 7.38 12.23 11 12.23s11-6.82 11-12.23c0-3.31-2.73-5.99-6.1-6z"}))))),n.createElement("div",{className:"brick__badge brick__badge--br prevent-unsubscription__brick-badge"},n.createElement(s,{color:"notification",text:"+100"})))),e.data&&e.data.header?n.createElement("div",{className:"cta-box__header qa-title",dangerouslySetInnerHTML:{__html:e.data.header}}):null,e.data&&e.data.description?n.createElement("div",{className:"cta-box__content qa-message"},e.data.description):null,l(e.data.goalProgress,e,function(e){return n.createElement("div",{className:"cta-box__content qa-counter"},n.createElement("div",{className:"prevent-unsubscription__timer"},n.createElement("div",{className:"timer-time"},n.createElement("div",{className:"timer-time__item"},n.createElement("div",{className:"timer-time__number"},e.days),n.createElement("div",{className:"timer-time__label"},a.get(387))),n.createElement("div",{className:"timer-time__item timer-time__item--delimeter"},":"),n.createElement("div",{className:"timer-time__item"},n.createElement("div",{className:"timer-time__number"},e.hours),n.createElement("div",{className:"timer-time__label"},a.get(388))),n.createElement("div",{className:"timer-time__item timer-time__item--delimeter"},":"),n.createElement("div",{className:"timer-time__item"},n.createElement("div",{className:"timer-time__number"},e.minutes),n.createElement("div",{className:"timer-time__label"},a.get(389))))))}),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(r,{type:"primary",narrow:"true",extraClass:"js-action",text:e.data.actionText,attrs:{"data-action":e.data.action}})))))),n.createElement("div",{className:"layout__footer layout__footer--vpadded layout__footer--hpadded layout__footer--limited"},n.createElement("div",{className:"hint hint--link","data-action":e.actions.UNSUBSCRIBE},e.data.cancelText)))})},function(e,t,i){"use strict";function n(e){return{type:e.getType(),name:e.getDisplayName()}}var a,o=i(3)(i(107)),s=i(100),r=i(122),l=i(155),c=i(249),u=i(150),d=i(3468),h=i(105),p=h.ClientSecurityPage,m=h.ExternalProviderSecurityCredentials,g=h.ServerSecurityCheck,_=i(125),f=(a={},(0,o.default)(a,1,6),(0,o.default)(a,15,7),(0,o.default)(a,14,8),(0,o.default)(a,2,9),(0,o.default)(a,3,10),(0,o.default)(a,4,11),(0,o.default)(a,12,13),a),v={FACEBOOK:1,VKONTAKTE:2,ODNOKLASSNIKI:3,GOOGLE_PLUS:4,INSTAGRAM:12,LINKEDIN:14,TWITTER:15},E=_.getLogger("SecurityCheck"),b=c.extend({screenName:154,viewConstructor:d,onStart:function(){b._super.onStart.apply(this,arguments),this.clientSecurityPage=this.getParameter("clientSecurityPage")},setupView_:function(e){e.on(d.ACTIONS.VERIFY_PROVIDER,this.onVerifyProvider_.bind(this)).on(d.ACTIONS.CHANGE_METHOD,this.onClickChangeVerificationMethod_.bind(this))},onParametersUpdate:function(){if(this.clientSecurityPage=this.getParameter("clientSecurityPage"),!(this.clientSecurityPage instanceof p)&&s.isObject(this.clientSecurityPage)){var e=this.getParameters();return e.clientSecurityPage=l(this.clientSecurityPage),void this.updateParameters(e)}var t=u.getStoredAuthData()||{},i=this.getParameter("providerId")||t.providerId,n=Number(this.getParameter("providerType")||t.providerType);return i&&n&&this.verifyAccessToken_(i,n),b._super.onParametersUpdate.apply(this,arguments)},getContextFromClientSecurity_:function(e){return{types:v,providers:e.getExternalProviders().getProviders().map(n)}},onVerifyProvider_:function(e){var t=this.clientSecurityPage;if(!t)return null;var i=t.getExternalProviders(),n=i.getContext(),a=i.getProviders(),o=parseInt(e.value,10),r=s.find(a,function(e){return e.getType()===o});u.setProviderData(n,[r]),u.login({providerType:o,providerContext:n,returnRoute:"security-social-network",clientSecurityPage:t.toJSON()}),this.getSecurityPageData_()},verifyAccessToken_:function(e,t){this.getMainView_().hideLoading();var i=this.clientSecurityPage;if(!i)return null;var n=(new m).setProviderId(e).setProviderType(t).setContext(11),a=(new g).setSecurityPageId(i.getSecurityPageId()).setAuthCredentials(n);u.removeStoredAuthData(),new r(526,a).on(528,this.handleCheckResult_.bind(this)).request()},getVerificationMethod_:function(){var e=parseInt(this.getParameter("providerType"),10);return f[e]||14},getSecurityPageData_:function(){var e=this;this.clientSecurityPage=null,new r(523,null).on(524,function(t,i){t?E.error("Security check response error",JSON.stringify(t)):e.clientSecurityPage=i}).request()}},"SocialNetwork");e.exports=b},function(e,t,i){"use strict";function n(){E.track(P,{element:51,parent_element:299})}function a(e){return e=e||{},u.isString(e.type)&&u.isString(e.displayName)}var o,s,r,l,c=i(3)(i(107)),u=i(100),d=i(122),h=i(129),p=i(150),m=i(3466),g=i(124),_=i(111),f=i(103),v=i(375),E=i(102),b=v.notifySecurityCheckPassed,y=_("DISMISS","CHANGE_METHOD"),k=i(105),S=k.ClientSecurityCheckResult,w=k.ExternalProviderSecurityCredentials,C=k.ServerSecurityCheck,T=i(101),P=T.ClickEvent,N=T.ViewElementEvent,I=(o={},(0,c.default)(o,4,"phone"),(0,c.default)(o,5,"phone"),(0,c.default)(o,6,"phone"),(0,c.default)(o,2,"email"),(0,c.default)(o,7,"email"),o),x=(s={},(0,c.default)(s,1,"facebook"),(0,c.default)(s,2,"vkontakte"),(0,c.default)(s,3,"odnoklassniki"),(0,c.default)(s,4,"google"),(0,c.default)(s,12,"instagram"),(0,c.default)(s,14,"linkedin"),(0,c.default)(s,15,"twitter"),s),A=(r={},(0,c.default)(r,4,351),(0,c.default)(r,5,164),(0,c.default)(r,2,315),(0,c.default)(r,6,300),(0,c.default)(r,7,315),r),O=(l={},(0,c.default)(l,1,120),(0,c.default)(l,2,178),(0,c.default)(l,3,179),(0,c.default)(l,4,301),(0,c.default)(l,12,44),(0,c.default)(l,14,302),(0,c.default)(l,15,201),l),V=h.extend({construct:function(e){var t=e.alternativeVerificationMethods,i=e.clientSecurityPage;V._super.construct.apply(this,arguments),this.view_=this.registerView(new m),this.alternativeVerificationMethods_=t,this.clientSecurityPage_=i},onStart:function(){var e=this;V._super.onStart.apply(this,arguments),this.view_.on(m.EVENTS.DISMISS,n,this),this.view_.on(m.EVENTS.CHANGE_METHOD,this.onChangeVerificationMethod_,this),this.view_.update({verificationMethods:this.getVerificationMethods_()}),p.on(p.EVENTS.AUTH_ERROR,function(){return e.view_.hideLoading()}),E.track(N,{element:299})},onStop:function(){var e=this;V._super.onStop.apply(this,arguments),this.view_.off(m.EVENTS.CHANGE_METHOD,this.onChangeVerificationMethod_,this),p.off(p.EVENTS.AUTH_ERROR,function(){return e.view_.hideLoading()})},getVerificationMethods_:function(){return this.alternativeVerificationMethods_.map(function(e){var t={displayName:e.getDisplayName()},i=!1;return i=e.hasExternalProvider()?x[e.getExternalProvider().getType()]:I[e.getType()],t.type=i,t}).filter(a)},onChangeVerificationMethod_:function(e){var t=this.alternativeVerificationMethods_[e];if(t){var i;if(t.hasExternalProvider()){this.view_.showLoading();var n=t.getExternalProvider();this.handleExternalProvider_(n),i=O[n.getType()]}else this.trigger(y.CHANGE_METHOD,t.getType()),i=A[t.getType()];i&&E.track(P,{element:i,parent_element:299})}else this.log.error('Error changing verification method. Could not find verification method at index "'.concat(e,'"'))},handleExternalProvider_:function(e){var t=this;p.setProviderData(11,[e]),p.login({providerType:e.getType(),providerContext:11,returnRoute:f.getLocation().routeName,callback:function(e){t.verifyAccessToken_(e.providerId,e.providerId)}})},verifyAccessToken_:function(e,t){var i=this,n=this.clientSecurityPage_;if(!n)return this.view_.hideLoading(),null;e=String(e),t=parseInt(t,10);var a=(new w).setProviderId(e).setProviderType(t).setContext(11),o=(new C).setSecurityPageId(n.getSecurityPageId()).setAuthCredentials(a);p.removeStoredAuthData(),new d(526,o).on(528,function(e,t){if(!e&&t.getComplete()&&t.getSuccess())b(),f.back();else{i.view_.hideLoading();var n={type:g.TYPES.ERROR};t instanceof S&&t.hasErrorText()?n.text=t.getErrorText():i.log.error("Error verifying access token"),g.showNotification(n)}}).request()}},"ChangeVerificationMethodModal");V.EVENTS=y,e.exports=V},function(e,t,i){"use strict";var n=i(25),a=i(111),o=i(202),s=i(3467),r=a("DISMISS","CHANGE_METHOD"),l=o.extend({layout_:o.MODAL_LAYOUT.BOTTOM_DRAWER,events:{"click .js-dismiss":"dismiss","click .js-verification-provider":"onClickVerificationMethod_"},update:function(e){var t=this;this.render(s,e),this.show(),setTimeout(function(){return t.animateIn_()},500)},dismiss:function(){l._super.dismiss.apply(this,arguments),this.trigger(r.DISMISS)},onClickVerificationMethod_:function(e,t){this.trigger(r.CHANGE_METHOD,n(t).data("index"))}},"ChangeVerificationMethodModal");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106),s=i(153);e.exports=i(108)("Modal.changeVerificationMethod",function(e){return n.createElement("div",{className:"modal modal--vpadded"},n.createElement("div",{className:"modal__content"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__header"},a.get(681)),n.createElement("div",{className:"cta-box__content"},a.get(682)),n.createElement("div",{className:"cta-box__buttons cta-box__buttons--wide"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("div",{className:"external-providers-list external-providers-list--horizontal external-providers-list--centered"},s(e.verificationMethods,e,function(e){return n.createElement("div",{className:"external-provider js-verification-provider","data-index":e.ndx},n.createElement("div",{className:"external-provider__icon"},"phone"==e.type&&n.createElement(o,{name:"adaptor-phone",size:"stretch"}),"email"==e.type&&n.createElement(o,{name:"adaptor-email",size:"stretch",branded:!0}),"facebook"==e.type&&n.createElement(o,{name:"adaptor-facebook",size:"stretch"}),"vk"==e.type&&n.createElement(o,{name:"adaptor-vkontakte",size:"stretch"}),"ok"==e.type&&n.createElement(o,{name:"adaptor-odnoklassniki",size:"stretch"}),"google"==e.type&&n.createElement(o,{name:"adaptor-google",size:"stretch"}),"instagram"==e.type&&n.createElement(o,{name:"adaptor-instagram",size:"stretch"}),"linkedin"==e.type&&n.createElement(o,{name:"adaptor-linkedin",size:"stretch"}),"twitter"==e.type&&n.createElement(o,{name:"adaptor-twitter",size:"stretch"})),n.createElement("div",{className:"external-provider__details"},n.createElement("div",{className:"external-provider__details-summary"},e.displayName)))}))),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button js-dismiss"},n.createElement("span",{className:"inline-button__text"},a.get(20)))))))))})},function(e,t,i){"use strict";var n=i(173),a=i(111),o=i(3469),s=a("CONTACT_SUPPORT","VERIFY_PROVIDER","LOGOUT","CHANGE_METHOD"),r=n.extend({template_:o,ACTIONS:s},"SocialNetwork");r.ACTIONS=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106),s=i(99),r=i(153);e.exports=i(108)("SocialNetwork",function(e){return n.createElement("div",{className:"layout layout--with-fake-nav","data-qa":"security-page-social-network"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--xxlg","data-qa":"brick"},e.data.imageUrl?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({width:100,src:e.data.imageUrl}),"')")}}):n.createElement("div",{className:"brick__icon"},"male"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}),"female"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}),!["male","female"].includes(e.data.gender)&&n.createElement(o,{name:"avatar-placeholder-unknown",size:"stretch"})))),n.createElement("div",{className:"cta-box__content"},e.data.text),n.createElement("div",{className:"cta-box__buttons"},e.data.providers?n.createElement("div",{className:"external-providers-list external-providers-list--horizontal external-providers-list--centered"},r(e.data.providers,e,function(t){return n.createElement("div",{className:"external-provider","data-action":t.actions.VERIFY_PROVIDER,"data-value":t.type},n.createElement("div",{className:"external-provider__icon"},t.type==e.data.types.FACEBOOK&&n.createElement(o,{name:"adaptor-facebook",size:"stretch"}),t.type==e.data.types.VKONTAKTE&&n.createElement(o,{name:"adaptor-vkontakte",size:"stretch"}),t.type==e.data.types.ODNOKLASSNIKI&&n.createElement(o,{name:"adaptor-odnoklassniki",size:"stretch"}),t.type==e.data.types.GOOGLE_PLUS&&n.createElement(o,{name:"adaptor-google",size:"stretch"}),t.type==e.data.types.INSTAGRAM&&n.createElement(o,{name:"adaptor-instagram",size:"stretch"}),t.type==e.data.types.LINKEDIN&&n.createElement(o,{name:"adaptor-linkedin",size:"stretch"}),t.type==e.data.types.TWITTER&&n.createElement(o,{name:"adaptor-twitter",size:"stretch"})),n.createElement("div",{className:"external-provider__details"},n.createElement("div",{className:"external-provider__details-summary"},t.name)))})):null,e.data.allowChangeVerificationMethod&&n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary inline-button--sm","data-action":e.actions.CHANGE_METHOD,"data-qa-security-action":"change-method"},n.createElement("span",{className:"inline-button__text"},s.get(680))))))),e.data.errorText?n.createElement("div",{className:"security-error"},e.data.errorText):null),n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint"},n.createElement("a",{"data-action":e.actions.LOGOUT,"data-qa":"logout"},s.get(419)),n.createElement("span",null," ",s.get(447)," "),n.createElement("a",{"data-action":e.actions.CONTACT_SUPPORT,"data-qa":"contact-support"},s.get(446)))))})},function(e,t,i){"use strict";var n=i(122),a=i(249),o=i(3471),s=i(124),r=i(105).ServerSecurityAction,l=a.extend({screenName:158,viewConstructor:o,setupView_:function(e){e.on(o.ACTIONS.RESEND,this.onResendEmail_.bind(this)).on(o.ACTIONS.CHANGE_METHOD,this.onClickChangeVerificationMethod_.bind(this))},getContextFromClientSecurity_:function(e){return{email:e.getMainValue()}},onResendEmail_:function(){var e=this.getParameter("clientSecurityPage"),t=(new r).setSecurityPageId(e.getSecurityPageId()).setAction(1);new n(525,t).on(387,this.onEmailResent_.bind(this)).request(),this.getMainView_().showLoading()},onEmailResent_:function(){this.getMainView_().hideLoading();var e=this.getParameter("clientSecurityPage");s.showNotification({type:s.TYPES.INFO,text:"".concat(e.getText()," ").concat(e.getMainValue())})},getVerificationMethod_:function(){return 4}},"Email");e.exports=l},function(e,t,i){"use strict";var n=i(173),a=i(111),o=i(3472),s=a("CONTACT_SUPPORT","RESEND","LOGOUT","CHANGE_METHOD"),r=n.extend({template_:o,ACTIONS:s},"Email");r.ACTIONS=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106),s=i(99);i(153),e.exports=i(108)("Email",function(e){return n.createElement("div",{className:"layout layout--with-fake-nav","data-qa":"security-page-email"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--xxlg","data-qa":"brick"},e.data.imageUrl?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({width:100,src:e.data.imageUrl}),"')")}}):n.createElement("div",{className:"brick__icon"},"male"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}),"female"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}),!["male","female"].includes(e.data.gender)&&n.createElement(o,{name:"avatar-placeholder-unknown",size:"stretch"})))),n.createElement("div",{className:"cta-box__content"},e.data.text),n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"display-email-address"},e.data.email)),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary inline-button--sm qa-button","data-action":e.actions.RESEND,"data-qa-security-action":"resend"},n.createElement("span",{className:"inline-button__text"},s.get(421)))),e.data.allowChangeVerificationMethod&&n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary inline-button--sm","data-action":e.actions.CHANGE_METHOD,"data-qa-security-action":"change-method"},n.createElement("span",{className:"inline-button__text"},s.get(680)))))))),n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint"},n.createElement("a",{"data-action":e.actions.LOGOUT,"data-qa":"logout"},s.get(419)),n.createElement("span",null," ",s.get(447)," "),n.createElement("a",{"data-action":e.actions.CONTACT_SUPPORT,"data-qa":"contact-support"},s.get(446)))))})},function(e,t,i){"use strict";var n=i(122),a=i(99),o=i(249),s=i(124),r=i(3474),l=i(105).ServerSecurityCheck,c=o.extend({screenName:157,viewConstructor:r,setupView_:function(e){e.on(r.ACTIONS.SIGN_IN,this.onEnterPassword_.bind(this)).on(r.ACTIONS.FORGOT_PASSWORD,this.resetPassword_.bind(this)).on(r.ACTIONS.CHANGE_METHOD,this.onClickChangeVerificationMethod_.bind(this))},resetPassword_:function(){new n(42,null).on(27,this.onPasswordReset_.bind(this)).on(28,this.onPasswordResetFailed_.bind(this)).request()},onPasswordReset_:function(e){e||s.showNotification({type:s.TYPES.INFO,text:a.get(83,"")})},onPasswordResetFailed_:function(e,t){if(e)this.onError_();else{var i=t.getErrors([]);t&&i.length?this.context_.errorText=i[0].getError():this.onError_()}},onEnterPassword_:function(e){if(e.value){var t=this.getParameter("clientSecurityPage"),i=(new l).setSecurityPageId(t.getSecurityPageId()).setValue(e.value);new n(526,i).on(528,this.handleCheckResult_.bind(this)).request(),this.getMainView_().showLoading()}},getVerificationMethod_:function(){return 18}},"EnterPassword");e.exports=c},function(e,t,i){"use strict";var n=i(25),a=i(173),o=i(111),s=i(3475),r=o("CONTACT_SUPPORT","SIGN_IN","LOGOUT","FORGOT_PASSWORD","CHANGE_METHOD"),l=a.extend({template_:s,ACTIONS:r,events:Object.assign({"input .js-password":"onInput_"},a.prototype.events),onInput_:function(e,t){var i=t.value&&t.value.length>0;this.$(".js-sign-in")[i?"removeAttr":"attr"]("disabled","disabled")},onAction_:function(e){var t=n(e.target);return t.data("action")===r.SIGN_IN&&t.data("value",this.$(".js-password").val()),l._super.onAction_.apply(this,arguments)}},"EnterPassword");l.ACTIONS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106),s=i(99),r=i(134);e.exports=i(108)("EnterPassword",function(e){return n.createElement("div",{className:"layout layout--with-fake-nav","data-qa":"security-page-enter-password"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--xxlg","data-qa":"brick"},e.data.imageUrl?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({width:100,src:e.data.imageUrl}),"')")}}):n.createElement("div",{className:"brick__icon"},"male"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}),"female"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}),!["male","female"].includes(e.data.gender)&&n.createElement(o,{name:"avatar-placeholder-unknown",size:"stretch"})))),n.createElement("div",{className:"cta-box__content"},e.data.text),n.createElement("div",{className:"cta-box__content cta-box__content--wide"},n.createElement("div",{className:"form-uniform js-form"},n.createElement("div",{className:"control control--centered control--narrow"},n.createElement("div",{className:"control__inputs js-input-field-container"},n.createElement("div",{className:"input"},n.createElement("input",{type:"password",className:"input__field input__field--secure js-input-field js-password",placeholder:s.get(112),autoComplete:"off",autocapitalize:"none",autocorrect:"off",spellCheck:"false"}))),n.createElement("div",{className:"control__error".concat(e.data.errorText?" show-error":"")},e.data.errorText)))),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(r,{type:"primary",extraClass:"js-sign-in",text:s.get(113),attrs:{"data-action":e.actions.SIGN_IN,"data-qa-security-action":"primary",disabled:!0}})),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary inline-button--sm","data-action":e.actions.FORGOT_PASSWORD,"data-qa-security-action":"forgot-password"},n.createElement("span",{className:"inline-button__text"},s.get(111)))),e.data.allowChangeVerificationMethod&&n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary inline-button--sm","data-action":e.actions.CHANGE_METHOD,"data-qa-security-action":"change-method"},n.createElement("span",{className:"inline-button__text"},s.get(680)))))))),n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint"},n.createElement("a",{"data-action":e.actions.LOGOUT,"data-qa":"logout"},s.get(419)),n.createElement("span",null," ",s.get(447)," "),n.createElement("a",{"data-action":e.actions.CONTACT_SUPPORT,"data-qa":"contact-support"},s.get(446)))))})},function(e,t,i){"use strict";var n=i(100),a=i(122),o=i(249),s=i(3477),r=i(105),l=r.ServerSecurityAction,c=r.ServerSecurityCheck,u=o.extend({screenName:167,viewConstructor:s,allowRetry_:!0,checkAgainTimer_:null,retryCountDown_:null,setupView_:function(e){e.on(s.ACTIONS.CONFIRM,this.onPhoneNumber_.bind(this)).on(s.ACTIONS.RETRY,this.onRetryPhoneCall_.bind(this)).on(s.ACTIONS.CHANGE_METHOD,this.onClickChangeVerificationMethod_.bind(this))},getContextFromClientSecurity_:function(e){this.checkAgainTimer_&&(clearTimeout(this.checkAgainTimer_),this.checkAgainTimer_=null);var t=e.getCheckAgainIn(),i=e.getMainValue();return!i&&t&&t>0?this.handleAndGetLoadingContext_(t):(this.getMainView_().hideLoading(),this.beginRetryCountdown_(e.getTimeout(60)),{isLoading:!1,waitForTimeout:!0,allowRetry:this.allowRetry_,phonePrefix:i,yourPhone:e.getExtraValue(),digits:n.range(e.getInputLen(0))})},handleAndGetLoadingContext_:function(e){return this.checkAgainTimer_=setTimeout(function(){new a(523,null).request()},1e3*e),this.getMainView_().showLoading(),{isLoading:!0}},beginRetryCountdown_:function(e){var t=this;this.retryCountDown_&&(clearInterval(this.retryCountDown_),
this.retryCountDown_=null),this.retryCountDown_=setInterval(function(){--e<1?(clearInterval(t.retryCountDown_),t.context_.waitForTimeout=!1,t.getMainView_().update(t.context_)):t.getMainView_().setCountDown(e)},1e3)},onRetryPhoneCall_:function(){this.getMainView_().showLoading();var e=this.getParameter("clientSecurityPage"),t=(new l).setSecurityPageId(e.getSecurityPageId()).setAction(1);new a(525,t).on(387,this.onPhoneCallResent_.bind(this)).request()},onPhoneCallResent_:function(){this.getMainView_().hideLoading(),this.context_.allowRetry=this.allowRetry_=!1,this.getMainView_().update(this.context_)},onPhoneNumber_:function(e){if(e.value){var t=this.getParameter("clientSecurityPage"),i=(new c).setSecurityPageId(t.getSecurityPageId()).setValue(e.value);new a(526,i).on(528,this.handleCheckResult_.bind(this)).request(),this.getMainView_().showLoading()}},getVerificationMethod_:function(){return 1}},"PhoneCall");e.exports=u},function(e,t,i){"use strict";var n=i(425),a=i(99),o=i(3479),s=n.extend({template_:o,setCountDown:function(e){this.$(".js-timer-hint").text(e>1?a.get(348,e):a.get(358))}},"PhoneCall");e.exports=s},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106),s=i(99),r=i(134),l=i(153);e.exports=i(108)("Sms",function(e){return n.createElement("div",{className:"layout layout--with-fake-nav","data-qa":"security-page-sms"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--xxlg","data-qa":"brick"},e.data.imageUrl?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({width:100,src:e.data.imageUrl}),"')")}}):n.createElement("div",{className:"brick__icon"},"male"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}),"female"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}),!["male","female"].includes(e.data.gender)&&n.createElement(o,{name:"avatar-placeholder-unknown",size:"stretch"})))),n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.data.text}}),n.createElement("div",{className:"cta-box__content cta-box__content--wide"},n.createElement("div",{className:"form-uniform js-form"},n.createElement("div",{className:"control control--digits"},n.createElement("div",{className:"control__inputs control__inputs--row"},l(e.data.digits,e,function(e){return n.createElement("div",{className:"input js-input-field-container".concat(e.data.errorText?" is-invalid":"")},n.createElement("input",{type:"tel",className:"input__field input__field--digit js-input-field js-phone-digit",maxLength:"1"}))})),n.createElement("div",{className:"control__error".concat(e.data.errorText?" show-error":"")},e.data.errorText)))),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(r,{type:"primary",extraClass:"js-submit js-confirm",text:s.get(144),attrs:{"data-action":e.actions.CONFIRM,"data-qa-security-action":"primary",disabled:!0}})),e.data.allowRetry?n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary inline-button--sm","data-action":e.actions.RETRY,"data-qa-security-action":"retry"},n.createElement("span",{className:"inline-button__text"},s.get(352)))):null,e.data.allowChangeVerificationMethod&&n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary inline-button--sm","data-action":e.actions.CHANGE_METHOD,"data-qa-security-action":"change-method"},n.createElement("span",{className:"inline-button__text"},s.get(680)))))))),n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint"},n.createElement("a",{"data-action":e.actions.LOGOUT,"data-qa":"logout"},s.get(419)),n.createElement("span",null," ",s.get(447)," "),n.createElement("a",{"data-action":e.actions.CONTACT_SUPPORT,"data-qa":"contact-support"},s.get(446)))))})},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106),s=i(99),r=i(134);e.exports=i(108)("PhoneCall",function(e){return n.createElement("div",{className:"layout layout--with-fake-nav","data-qa":"security-page-phone-call"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--xxlg","data-qa":"brick"},e.data.imageUrl?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({width:100,src:e.data.imageUrl}),"')")}}):n.createElement("div",{className:"brick__icon"},"male"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}),"female"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}),!["male","female"].includes(e.data.gender)&&n.createElement(o,{name:"avatar-placeholder-unknown",size:"stretch"})))),n.createElement("div",{className:"cta-box__content"},e.data.text),e.data.isLoading?n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"loading-dots small dark ".concat(e.relative?"":"loading-dots--centered"," ").concat(e.extraClass)},n.createElement("div",{className:"first dot"}),n.createElement("div",{className:"second dot"}),n.createElement("div",{className:"third dot"}))):n.createElement(n.Fragment,null,n.createElement("div",{className:"cta-box__content cta-box__content--wide"},n.createElement("div",{className:"form-uniform js-form"},n.createElement("div",{className:"control control--digits"},n.createElement("div",{className:"control__inputs control__inputs--row"},n.createElement("div",{className:"input"},n.createElement("div",{className:"input__field input__field--border-hidden"},e.data.phonePrefix)),e.data.digits.map(function(e){return n.createElement("div",{className:"input js-input-field-container"},n.createElement("input",{type:"tel",className:"input__field input__field--digit js-input-field js-phone-digit",maxLength:"1"}))})),n.createElement("div",{className:"control__error".concat(e.data.errorText?" show-error":"")},e.data.errorText)))),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(r,{type:"primary",extraClass:"js-submit js-confirm",text:s.get(400),attrs:{"data-action":e.actions.CONFIRM,"data-qa-security-action":"primary",disabled:!0}})),!e.data.waitForTimeout&&e.data.allowRetry?n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary inline-button--sm js-try-again","data-action":e.actions.RETRY,"data-qa-security-action":"retry"},n.createElement("span",{className:"inline-button__text"},s.get(406)))):null,e.data.allowChangeVerificationMethod&&n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary inline-button--sm","data-action":e.actions.CHANGE_METHOD,"data-qa-security-action":"change-method"},n.createElement("span",{className:"inline-button__text"},s.get(680)))))),e.data.waitForTimeout?n.createElement("div",{className:"cta-box__additional"},n.createElement("div",{className:"hint js-timer-hint"})):null))),n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint"},n.createElement("a",{"data-action":e.actions.LOGOUT,"data-qa":"logout"},s.get(419)),n.createElement("span",null," ",s.get(447)," "),n.createElement("a",{"data-action":e.actions.CONTACT_SUPPORT,"data-qa":"contact-support"},s.get(446)))))})},function(e,t,i){"use strict";var n=i(100),a=i(122),o=i(249),s=i(425),r=i(105),l=r.ServerSecurityAction,c=r.ServerSecurityCheck,u=o.extend({screenName:166,viewConstructor:s,allowRetry_:!0,setupView_:function(e){e.on(s.ACTIONS.CONFIRM,this.onSms_.bind(this)).on(s.ACTIONS.RETRY,this.onRetrySms_.bind(this)).on(s.ACTIONS.CHANGE_METHOD,this.onClickChangeVerificationMethod_.bind(this))},getContextFromClientSecurity_:function(e){return{text:"".concat(e.getText()," ").concat(e.getExtraValue()),allowRetry:this.allowRetry_,digits:n.range(e.getInputLen(0))}},onRetrySms_:function(){this.getMainView_().showLoading();var e=this.getParameter("clientSecurityPage"),t=(new l).setSecurityPageId(e.getSecurityPageId()).setAction(1);new a(525,t).on(387,this.onSmsResent_.bind(this)).request()},onSmsResent_:function(){this.getMainView_().hideLoading(),this.context_.allowRetry=this.allowRetry_=!1,this.getMainView_().update(this.context_)},onSms_:function(e){if(e.value){var t=this.getParameter("clientSecurityPage"),i=(new c).setSecurityPageId(t.getSecurityPageId()).setValue(e.value);new a(526,i).on(528,this.handleCheckResult_.bind(this)).request(),this.getMainView_().showLoading()}},getVerificationMethod_:function(){return 2}},"Sms");e.exports=u},function(e,t,i){"use strict";var n=i(100),a=i(122),o=i(249),s=i(3482),r=i(105).ServerSecurityCheck,l=o.extend({screenName:155,viewConstructor:s,setupView_:function(e){e.on(s.ACTIONS.CONFIRM,this.onCompletePhone_.bind(this)).on(s.ACTIONS.CHANGE_METHOD,this.onClickChangeVerificationMethod_.bind(this))},getContextFromClientSecurity_:function(e){return{phonePrefix:e.getMainValue(),phonePostfix:e.getExtraValue(),digits:n.range(e.getInputLen(0))}},onCompletePhone_:function(e){if(e.value){var t=this.getParameter("clientSecurityPage"),i=(new r).setSecurityPageId(t.getSecurityPageId()).setValue(e.value);new a(526,i).on(528,this.handleCheckResult_.bind(this)).request(),this.getMainView_().showLoading()}},getVerificationMethod_:function(){return 15}},"CompletePhone");e.exports=l},function(e,t,i){"use strict";var n=i(425),a=i(3483),o=n.extend({template_:a},"CompletePhone");e.exports=o},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106),s=i(99),r=i(134),l=i(153);e.exports=i(108)("CompletePhone",function(e){return n.createElement("div",{className:"layout layout--with-fake-nav","data-qa":"security-page-complete-phone"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--xxlg","data-qa":"brick"},e.data.imageUrl?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({width:100,src:e.data.imageUrl}),"')")}}):n.createElement("div",{className:"brick__icon"},"male"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}),"female"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}),!["male","female"].includes(e.data.gender)&&n.createElement(o,{name:"avatar-placeholder-unknown",size:"stretch"})))),n.createElement("div",{className:"cta-box__content"},e.data.text),n.createElement("div",{className:"cta-box__content cta-box__content--wide"},n.createElement("div",{className:"form-uniform js-form"},n.createElement("div",{className:"control control--digits"},n.createElement("div",{className:"control__inputs control__inputs--row"},n.createElement("div",{className:"input"},n.createElement("div",{className:"input__field input__field--border-hidden"},e.data.phonePrefix)),l(e.data.digits,e,function(e){return n.createElement("div",{className:"input js-input-field-container ".concat(e.data.errorText?" is-invalid":"")},n.createElement("input",{type:"tel",className:"input__field input__field--digit js-input-field js-phone-digit",maxLength:"1"}))}),n.createElement("div",{className:"input"},n.createElement("div",{className:"input__field input__field--border-hidden"},e.data.phonePostfix))),n.createElement("div",{className:"control__error".concat(e.data.errorText?" show-error":"")},e.data.errorText)))),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(r,{type:"primary",extraClass:"js-confirm",text:s.get(400),attrs:{"data-action":e.actions.CONFIRM,"data-qa-security-action":"primary",disabled:!0}})),e.data.allowChangeVerificationMethod&&n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary inline-button--sm","data-action":e.actions.CHANGE_METHOD,"data-qa-security-action":"change-method"},n.createElement("span",{className:"inline-button__text"},s.get(680)))))))),n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint"},n.createElement("a",{"data-action":e.actions.LOGOUT,"data-qa":"logout"},s.get(419)),n.createElement("span",null," ",s.get(447)," "),n.createElement("a",{"data-action":e.actions.CONTACT_SUPPORT,"data-qa":"contact-support"},s.get(446)))))})},function(e,t,i){"use strict";var n=i(122),a=i(249),o=i(3485),s=i(136),r=i(105).ServerSecurityCheck,l=a.extend({screenName:156,viewConstructor:o,createElement:function(){return s({className:"security-complete-email page-security overlay-page"})},setupView_:function(e){e.on(o.ACTIONS.CONFIRM,this.onCompleteEmail_.bind(this)).on(o.ACTIONS.CHANGE_METHOD,this.onClickChangeVerificationMethod_.bind(this))},getContextFromClientSecurity_:function(e){return{emailPrefix:e.getMainValue(),emailPostfix:e.getExtraValue()}},onCompleteEmail_:function(e){if(e.value){var t=this.getParameter("clientSecurityPage"),i=(new r).setSecurityPageId(t.getSecurityPageId()).setValue(e.value);new n(526,i).on(528,this.handleCheckResult_.bind(this)).request(),this.getMainView_().showLoading()}},getVerificationMethod_:function(){return 16}},"CompleteEmail");e.exports=l},function(e,t,i){"use strict";var n=i(25),a=i(173),o=i(111),s=i(3486),r=o("CONFIRM","CONTACT_SUPPORT","LOGOUT","CHANGE_METHOD"),l=a.extend({template_:s,ACTIONS:r,events:Object.assign({"keyup .js-email":"onInput_"},a.prototype.events),onInput_:function(e,t){var i=t.value&&t.value.length>0;this.$(".js-confirm")[i?"removeAttr":"attr"]("disabled","disabled")},onAction_:function(e){var t=n(e.target);return t.data("action")===r.CONFIRM&&t.data("value",this.$(".js-email").val()),l._super.onAction_.apply(this,arguments)}},"CompleteEmail");l.ACTIONS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106),s=i(99),r=i(134);e.exports=i(108)("CompleteEmail",function(e){return n.createElement("div",{className:"layout layout--with-fake-nav","data-qa":"security-page-complete-email"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick brick--xxlg","data-qa":"brick"},e.data.imageUrl?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({width:100,src:e.data.imageUrl}),"')")}}):n.createElement("div",{className:"brick__icon"},"male"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}),"female"==e.data.gender&&n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}),!["male","female"].includes(e.data.gender)&&n.createElement(o,{name:"avatar-placeholder-unknown",size:"stretch"})))),n.createElement("div",{className:"cta-box__content"},e.data.text),n.createElement("div",{className:"cta-box__content cta-box__content--wide"},n.createElement("div",{className:"form-uniform js-form"},n.createElement("div",{className:"control control--email"},n.createElement("div",{className:"control__inputs control__inputs--row"},n.createElement("div",{className:"input"},n.createElement("div",{className:"input__field input__field--border-hidden"},e.data.emailPrefix)),n.createElement("div",{className:"input"},n.createElement("input",{type:"email",name:"email",className:"input__field js-email",autoComplete:"email",autoCapitalize:"none",autoCorrect:"off",spellCheck:"false"})),n.createElement("div",{className:"input"},n.createElement("div",{className:"input__field input__field--border-hidden"},e.data.emailPostfix))),n.createElement("div",{className:"control__error ".concat(e.data.errorText?"show-error":"")},e.data.errorText)))),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(r,{type:"primary",extraClass:"js-confirm",text:s.get(144),attrs:{"data-action":e.actions.CONFIRM,"data-qa-security-action":"primary",disabled:!0}})),e.data.allowChangeVerificationMethod&&n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary inline-button--sm","data-action":e.actions.CHANGE_METHOD,"data-qa-security-action":"change-method"},n.createElement("span",{className:"inline-button__text"},s.get(680)))))))),n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint"},n.createElement("a",{"data-action":e.actions.LOGOUT,"data-qa":"logout"},s.get(419)),n.createElement("span",null," ",s.get(447)," "),n.createElement("a",{"data-action":e.actions.CONTACT_SUPPORT,"data-qa":"contact-support"},s.get(446)))))})},function(e,t,i){"use strict";var n=i(100),a=i(113),o=i(103),s=i(121),r=i(128),l=i(220),c=i(3488),u=i(516),d=i(215),h=i(124),p=i(102),m=i(136),g=i(101).ChangeVerificationSettingsEvent,_=s.extend({headerTemplate:null,mainView_:null,popupView_:null,screenName:138,createElement:function(){return m({className:"verification-settings"})},init:function(){this.onUser_=this.onUser_.bind(this),this.onRemoveVerify_=this.onRemoveVerify_.bind(this),_._super.init.apply(this,arguments),this.mainView_=this.registerView(new c).on(c.EVENTS.RESTRICTION_CHANGED,this.onUpdateRestriction_.bind(this)).on(c.EVENTS.DISCONNECT,this.onDisconnect_.bind(this))},onStart:function(){_._super.onStart.apply(this,arguments),this.mainView_.reset().appendTo(this.parent).showLoading(),r.getInstance().fetch({id:a.getUserId(),clientSource:53,requestedFields:[100]}).then(this.onUser_).catch(function(){h.showNotification({type:h.TYPES.ERROR}),o.back()})},onStop:function(){_._super.onStop.apply(this,arguments),this.method_=null},onUser_:function(e){var t=parseInt(this.getParameter("method"),10),i=parseInt(this.getParameter("provider"),10),a=n.find(e.getVerifiedInformation().getMethods(),function(e){return e.getType()===t&&(!i||e.getExternalProviderData().getType()===i)});this.method_=a,this.mainView_.hideLoading(),this.mainView_.render({method:a})},onUpdateRestriction_:function(e){l.getInstance().setRestriction(this.method_,e);var t=1===e?2:1;p.track(g,{verification_method:d.createHotPanelVerificationMethod(this.method_),social_media_access:t})},onDisconnect_:function(){this.popupView_||(this.popupView_=this.registerView(new u).on(u.ACTIONS.NEXT,this.onRemoveVerify_)),this.popupView_.update({removeVerify:!0})},onRemoveVerify_:function(){d.disconnect({methodType:this.method_.getType(),providerType:this.method_.hasExternalProviderData()&&this.method_.getExternalProviderData().getType(),callback:function(){o.navigate("own-profile-edit",!0)}})}},"VerificationSettingsController");e.exports=_},function(e,t,i){"use strict";function n(e,t){switch(e){case 2:return s.get(398,t);case 1:return s.get(397,t)}}var a=i(100),o=i(109),s=i(99),r=i(215),l=i(3489),c=i(111)("RESTRICTION_CHANGED","DISCONNECT"),u=o.extend({selected_:null,events:{"click .js-option":"onOptionSelect_","click .js-disconnect":"onDisconnect_"},render:function(e){this.selected_=-1;var t,i=e.method,n=r.createKeyForMethod(i);i.getAllowUnlink()&&(t=3===e.method.getType()?s.get(399,i.getName()):s.get(174));var a={navigationBar:{actions:{back:!0},title:s.get(394)},name:i.getName(),verificationData:i.getVerificationData(),disconnect:t,settings:this.createSettings_(i)};a[n]=!0,this.$el.html(l.render(a))},createSettings_:function(e){var t=e.getAccessRestrictions();if(!t)return!1;var i=e.getName(),o=this.selected_=t.getChosenOption(),r=a.map(t.getAvailableOptions(),function(e){return function(e){return{label:n(e,i),selected:e===o,value:e}}(e)});return{title:s.get(395,i),options:r,disclaimer:t.getDisclaimer()}},onOptionSelect_:function(e,t){var i=parseInt(t.value,10);this.selected_!==i&&(this.selected_=i,this.trigger(c.RESTRICTION_CHANGED,i))},onDisconnect_:function(){this.trigger(c.DISCONNECT)}},"VerificationSettingsView");u.EVENTS=c,e.exports=u},function(e,t,i){"use strict";var n=i(98),a=i(137),o=i(99),s=i(106),r=i(153);e.exports=i(108)("VerificationSettings",function(e){return n.createElement("div",{className:"layout"},e.navigationBar&&n.createElement("div",{className:"layout__header"},n.createElement(a,{actions:e.navigationBar.actions,title:e.navigationBar.title})),n.createElement("div",{className:"layout__content"},n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"settings-text"},o.get(396)),n.createElement("div",{className:"verification-settings__method-status"},n.createElement("div",{className:"verification-option is-verified"},n.createElement("div",{className:"verification-option__icon"},e.facebook&&n.createElement(s,{name:"adaptor-facebook",size:"xlg"}),e.vkontakte&&n.createElement(s,{name:"adaptor-vkontakte",size:"xlg"}),e.odnoklassniki&&n.createElement(s,{name:"adaptor-odnoklassniki",size:"xlg"}),e.google&&n.createElement(s,{name:"adaptor-google",size:"xlg"}),e.instagram&&n.createElement(s,{name:"adaptor-instagram",size:"xlg"}),e.linkedin&&n.createElement(s,{name:"adaptor-linkedin",size:"xlg"}),e.twitter&&n.createElement(s,{name:"adaptor-twitter",size:"xlg"}),e.phone&&n.createElement(s,{name:"adaptor-phone",size:"xlg",supportsRtl:!0}),e.spp&&n.createElement(s,{name:"adaptor-premium",size:"xlg",color:"primary"})),n.createElement("div",{className:"verification-option__description"},n.createElement("div",{className:"verification-option__name"},e.name),n.createElement("div",{className:"verification-option__message"},e.verificationData))))),r(e.settings,e,function(e){return n.createElement(n.Fragment,{key:"settings-".concat(e.ndx)},e.options?n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"settings-title"},e.title),n.createElement("ul",{className:"poll poll--radio ".concat(e.group_name)},e.options.map(function(e){return n.createElement("li",{className:"poll__item",key:e.value},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-option",type:"radio",name:"whocanview",value:e.value,defaultChecked:!!e.selected||void 0}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.label)))}))):null,e.disclaimer?n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"hint"},e.disclaimer)):null)}),r(e.showAutoSync,e,function(e){return n.createElement("div",{className:"settings-block"},n.createElement("div",{className:"settings-title"},o.get(539)),n.createElement("div",{className:"settings-item js-toggle-items qa-toggle-items","data-qa":"settings-auto-sync"},n.createElement("label",{className:"settings-item__label"},o.get(540),n.createElement("div",{className:"settings-item__label--secondary"},e.descriptionText)),n.createElement("div",{className:"settings-item__action"},n.createElement("div",{className:"switcher"},n.createElement("input",{type:"checkbox","data-key":"settings-auto-sync",name:"settings-auto-sync",className:"js-checkbox",checked:e.autoSyncEnabled?"checked":""}),n.createElement("label",{className:"needsclick"})))))})),e.disconnect?n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint hint--link js-disconnect"},e.disconnect)):null)})},function(e,t,i){"use strict";var n=i(100),a=i(99),o=i(155),s=i(601),r=i(602),l=i(102),c=i(136),u=i(101).ClickButtonEvent,d=s.extend({transition:!1,activationPlace:150,screenName:171,notificationScreenAccess:3,createElement:function(){return c({qaAttribute:"never-loose-account"})},init:function(){d._super.init.apply(this,arguments),this.page_.on(r.ACTIONS.VERIFY,this.onButtonClick_,this)},renderPhoneNumberScreen:function(e){var t=o(this.getParameter("notification")).getPromoBlock(),i=n.extend(this.getBaseContext_(),{countries:e.countries,introIcon:!0,introMessage:t.getMssg(),skipText:t.getCancelText(),introButtonText:a.get(21),disclaimerText:t.getOtherText()});this.updateNavigationBar_(t.getHeader()),this.page_.update(r.STEPS.VERIFY,i)},onButtonClick_:function(){l.track(u,{button_name:84})}},"NeverLoseAccount");e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(136),o=i(142).waitForPageTransitionFinish,s=i(121),r=i(3492),l=s.extend({overlay:!0,encountersPage:!0,headerTemplate:null,activationPlace:2,clientSource:1,notificationScreenAccess:3,createElement:function(){return a({className:"encounters-overlay-page overlay-page"})},onStart:function(){var e=this;l._super.onStart.apply(this,arguments),this.reactViewId_=this.renderReactView(n.createElement(r,{readyForVrt:this.readyForVrt.bind(this),notification:this.getParameter("notification"),screenNameRef:function(t){e.getScreenName=t}}),this.parent[0])},onStop:function(){var e=this;l._super.onStop.apply(this,arguments),o(function(){e.removeReactView(e.reactViewId_)})}},"EncountersOnboardingPageOverlay");e.exports=l},function(e,t,i){"use strict";function n(e){var t=(e.pictures||[]).map(function(e){return{src:y.getImageUrlForSize(e.display_images,140,140),badgeName:!e.badge_text&&"floating-action-match",badgeText:e.badge_text}});return t.length>0&&t}function a(e){return s(e.find(function(e){return 1===e.type}))}function o(e){return s(e.find(function(e){return 2===e.type}))}function s(e){return e?{text:e.text,onClick:l.bind(null,e)}:{}}function r(){E.back()}function l(e){var t=P[e.type];if(t&&b.track(T,{element:t}),63===e.action){var i=(new S).setAction(e.action).setPopState(!0).setRedirectPage(new C(e.redirect_page));k.handleAction(i).catch(r)}else r()}var c,u=i(3),d=u(i(110)),h=u(i(112)),p=u(i(114)),m=u(i(115)),g=u(i(123)),_=u(i(116)),f=u(i(107)),v=i(98),E=i(103),b=i(102),y=i(169),k=i(208),S=i(207),w=i(3493),C=i(105).RedirectPage,T=i(101).ClickEvent,P=(c={},(0,f.default)(c,1,395),(0,f.default)(c,2,65),c),N=function(e){function t(e){var i;return(0,d.default)(this,t),i=(0,p.default)(this,(0,m.default)(t).call(this,e)),e.screenNameRef(i.getScreenName.bind((0,g.default)(i))),i}return(0,_.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this.getPromoBlock();if(e){var t=e.buttons||[];return v.createElement(w,{titleText:e.header,messageText:e.mssg,avatars:n(e),primaryButton:a(t),secondaryButton:o(t)})}r()}},{key:"getPromoBlock",value:function(){return this.props.notification&&this.props.notification.promo_block}},{key:"getScreenName",value:function(){var e=this.getPromoBlock();if(!e)return null;var t=(n(e)||[]).length;return t>1?621:1===t?620:619}}]),t}(v.Component);e.exports=N},function(e,t,i){"use strict";var n=i(98),a=i(133),o=i(130),s=i(143),r=i(172),l=i(151),c=i(152),u=i(160),d=i(154),h=i(3494),p=i(163),m=i(120).P3,g=i(204);e.exports=function(e){var t=e.titleText,i=e.messageText,_=e.avatars,f=e.primaryButton,v=e.secondaryButton;return n.createElement(a,null,n.createElement(o,{align:"center",hpadded:!0,vpadded:!0},n.createElement(s,null,n.createElement(r,null,_?n.createElement(h,{layout:"cascade",variant:"sm"},_.map(function(e){return n.createElement(g,{key:e.src,src:e.src,render:function(t){var i=t.src;return n.createElement(p,{image:{src:i},badge:e.badgeName?{position:"br",icon:{name:e.badgeName,size:"md"}}:null,overlay:e.badgeText?{children:n.createElement(m,null,e.badgeText),background:"dark"}:null})}})})):n.createElement("div",{className:"encounters-onboarding-promo-hearts"},n.createElement("svg",{viewBox:"0 0 240 240",className:"icon-inline"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{fill:"currentColor",d:"M20 126.2C20 94.65 45.42 69 76.67 69A56.74 56.74 0 0 1 120 89.32 56.74 56.74 0 0 1 163.32 69C194.58 69 220 94.66 220 126.2 220 177.4 153.05 240 120 240S20 177.41 20 126.2z"}),n.createElement("path",{fill:"currentColor",d:"M182 19.72C182 10.5 189.37 3 198.43 3c4.84 0 9.47 2.2 12.57 5.94A16.4 16.4 0 0 1 223.56 3C232.63 3 240 10.5 240 19.72 240 34.7 220.58 53 211 53c-9.58 0-29-18.3-29-33.28z",opacity:".7"}),n.createElement("path",{fill:"currentColor",d:"M7 25.7c0-4.8 3.81-8.7 8.5-8.7 2.5 0 4.9 1.15 6.5 3.09 1.6-1.94 4-3.09 6.5-3.09 4.69 0 8.5 3.9 8.5 8.7C37 33.48 26.96 43 22 43c-4.96 0-15-9.52-15-17.3z"}),n.createElement("path",{fill:"currentColor",d:"M68 45.69a5.68 5.68 0 0 1 10-3.67 5.68 5.68 0 0 1 10 3.67C88 50.78 81.3 57 78 57s-10-6.22-10-11.31z",opacity:".9"}),n.createElement("path",{fill:"currentColor",d:"M4 159.35A4.3 4.3 0 0 1 8.25 155c1.25 0 2.45.57 3.25 1.54.8-.97 2-1.54 3.25-1.54a4.3 4.3 0 0 1 4.25 4.35c0 3.9-5.02 8.65-7.5 8.65-2.48 0-7.5-4.76-7.5-8.65z",opacity:".2"}))))),n.createElement(l,{text:t}),n.createElement(c,{text:i}),n.createElement(u,null,n.createElement(d,{type:"filled",color:"liked-you",text:f.text,onClick:f.onClick}),n.createElement(d,{type:"link",color:"gray-dark",text:v.text,onClick:v.onClick})))))}},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(3495),s=i(3496),r=i(3497),l=i(3498),c={children:a.node.isRequired,layout:a.oneOf(["single","double","triple","cascade"]).isRequired,variant:a.any},u=function(e){var t=e.children,i=e.layout,a=e.variant;switch(i){case"single":return n.createElement(o,null,t);case"double":return n.createElement(s,{variant:a},t);case"triple":return n.createElement(r,{variant:a},t);case"cascade":return n.createElement(l,{variant:a},t)}};u.propTypes=c,e.exports=u},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r={children:o.node.isRequired},l=function(e){var t,i=e.children,o=!1,r=i.props.badge;r&&"bc"===r.position&&(r.mark&&(o="md"),r.icon&&(o=r.icon.size||"md"));var l=s((t={"csms-brick-group":!0},(0,n.default)(t,"csms-brick-group--padded-".concat(o),o),(0,n.default)(t,"csms-brick-group--single",!0),t));return a.createElement("div",{className:l},a.createElement("div",{className:"csms-brick-group__item"},i))};l.propTypes=r,e.exports=l},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r={children:o.node.isRequired,variant:o.oneOf(["l-l"]).isRequired},l=function(e){var t=e.children,i=e.variant,o=s((0,n.default)({"csms-brick-group":!0,"csms-brick-group--double":!0},"csms-brick-group--double-".concat(i),!0)),r=a.Children.map(t,function(e){return a.createElement("div",{className:"csms-brick-group__item"},e)});return a.createElement("div",{className:o},r)};l.propTypes=r,e.exports=l},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r={children:o.node.isRequired,variant:o.oneOf(["s-m-s","l-l-l","m-xl-m"]).isRequired},l=function(e){var t,i=e.children,o=e.variant,r=!1,l=i[1].props.badge;l&&"bc"===l.position&&(l.mark&&(r="md"),l.icon&&(r=l.icon.size||"md"));var c=s((t={"csms-brick-group":!0},(0,n.default)(t,"csms-brick-group--padded-".concat(r),r),(0,n.default)(t,"csms-brick-group--triple",!0),(0,n.default)(t,"csms-brick-group--triple-".concat(o),!0),t)),u=a.Children.map(i,function(e){return a.createElement("div",{className:"csms-brick-group__item"},e)});return a.createElement("div",{className:c},u)};l.propTypes=r,e.exports=l},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r={children:o.arrayOf(o.node).isRequired,variant:o.oneOf(["sm","md","lg"])},l=function(e){var t=e.children,i=e.variant,o=s((0,n.default)({"csms-brick-group":!0,"csms-brick-group--cascade":!0},"csms-brick-group--cascade-".concat(i),!0)),r=a.Children.map(t,function(e){
return a.createElement("div",{className:"csms-brick-group__item"},e)});return a.createElement("div",{className:o},r)};l.propTypes=r,e.exports=l},function(e,t,i){"use strict";function n(e){return l.throttle(e,1200,{trailing:!1})}function a(){var e=N.get(P);if(e)return e;var t=p();return N.set(P,t),t}function o(){h.track(S)}function s(e){h.track(y,{element:e})}function r(e,t){h.track(C,{field_name:7,field_type:1,form_name:15,action_type:e,uid:t})}var l=i(100),c=i(103),u=i(126),d=i(122),h=i(102),p=i(12),m=i(344),g=i(156),_=i(159),f=i(3500),v=i(3502),E=i(105).ServerChangeEmail,b=i(101),y=b.ClickEvent,k=b.StartVerifyAccountEvent,S=b.ViewScreenEvent,w=b.VerifyAccountEvent,C=b.FillFormEvent,T=b.ErrorEvent,P="formUid",N=new m("ResendEmailForm"),I=_.extend({headerTemplate:null,lastRenderedView_:"confirm-email",lastEnteredEmail_:"",init:function(){var e=this;I._super.init.apply(this,arguments),this.confirmView_=this.registerView(new f).on(f.ACTIONS.RESEND,n(this.onResend_),this).on(f.ACTIONS.UPDATE_EMAIL,n(this.onUpdateEmail_),this),this.resendView_=this.registerView(new v).on(v.ACTIONS.INPUT_FOCUS,this.onFocus_,this).on(v.ACTIONS.INPUT_BLUR,this.onBlur_,this).on(v.ACTIONS.RESEND,n(this.onResend_),this).on(v.ACTIONS.SKIP,n(function(){return e.renderView_("confirm-email")}))},onStart:function(e,t){I._super.onStart.call(this,e,t),this.notification_=this.notification_||e.notification,this.renderView_()},onNavigationAction:function(e){e===g.CLOSE&&(s(51),c.navigate(u.get("default.page")))},trackHotPanelScreen:function(){},onResend_:function(e){var t=this,i=(new E).setContext(92);e&&(i.setUpdatedEmail(e),this.lastEnteredEmail_=e),new d(462,i).on(d.SpecialEvent.ON_REQ_END,function(e){e&&e.rpc_response&&t.onResendEmailResponse_(e.rpc_response)}).request(),s(399),h.track(k,{verification_method:16,activation_place:303})},onResendEmailResponse_:function(e){var t=this;Object.keys(e.messages).forEach(function(i){var n=e.messages[i][0];switch(Number(i)){case 158:var a=n.toJSON();81===a.type&&(t.notification_=a,h.track(w,{verification_method:16,activation_place:303,retry:!0}),N.remove(P),t.renderView_("confirm-email"));break;case 1:t.resendView_.setInputError(n.getErrorMessage()),function(e,t){h.track(T,{event_type:13,field_name:7,error_type:e,error_message:t})}(12,n.getErrorMessage())}})},onUpdateEmail_:function(){s(392),this.renderView_("resend-email")},onFocus_:function(){r(8,a())},onBlur_:function(){r(9,a())},renderView_:function(e){e||(e=this.lastRenderedView_);var t=this.notification_.promo_block;this.lastRenderedView_=e,this.parent.empty();var i=t.buttons.find(function(e){return 1===e.type}),n=t.buttons.find(function(e){return 2===e.type});switch(this.lastRenderedView_){case"confirm-email":this.screenName=533,o(),this.confirmView_.appendTo(this.parent),this.confirmView_.render({header:t.header,message:t.mssg,primaryButton:i&&i.text,secondaryButton:n&&n.text});break;case"resend-email":var a=t.extra_texts.find(function(e){return 4===e.type}),s=t.extra_texts.find(function(e){return 5===e.type}),r=t.extra_texts.find(function(e){return 12===e.type});this.screenName=532,o(),this.resendView_.appendTo(this.parent),this.resendView_.render({header:a&&a.text,message:s&&s.text,email:{value:this.lastEnteredEmail_||r&&r.text},primaryButton:i&&i.text})}}},"ConfirmEmailNotification");e.exports=I},function(e,t,i){"use strict";var n=i(109),a=i(111),o=i(3501),s=a("RESEND","UPDATE_EMAIL"),r=n.extend({events:{"click .js-resend":"resend_","click .js-didnt-get-email":"update_"},render:function(e){this.$el.html(o.render(e))},resend_:function(){this.trigger(s.RESEND)},update_:function(){this.trigger(s.UPDATE_EMAIL)}},"ConfirmEmail");r.ACTIONS=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(137),o=i(106);e.exports=i(108)("NeverLoseAccountCheckInbox",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__header"},n.createElement(a,{close:"true",actions:e.navigationActions,logo:!1,noFake:!0,extraClass:"navigation-bar--no-background"})),n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement(o,{name:"adaptor-email",branded:!0,size:"xxlg"})),n.createElement("div",{className:"cta-box__header"},e.header),n.createElement("div",{className:"cta-box__content"},e.message),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--primary js-resend"},n.createElement("span",{className:"inline-button__text"},e.primaryButton))))))),n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm js-didnt-get-email"},n.createElement("span",{className:"inline-button__text"},e.secondaryButton))))))})},function(e,t,i){"use strict";function n(e){s(e).closest(".js-input-field-container").toggleClass("has-value",!!e.value)}var a,o=i(3)(i(107)),s=i(25),r=i(109),l=i(111),c=i(3503),u=l("INPUT_FOCUS","INPUT_BLUR","INPUT_KEYUP","RESEND","SKIP"),d=r.extend({events:(a={},(0,o.default)(a,"keyup ".concat(".js-input-field"),"keyup_"),(0,o.default)(a,"click ".concat(".js-submit"),"resend_"),(0,o.default)(a,"click .js-skip","skip_"),a),render:function(e){this.removeListeners_(),this.$el.html(c.render(e)),this.addListeners_()},onDestroy:function(){this.removeListeners_()},addListeners_:function(){this.$el.find(".js-input-field").on("focus",this.focus_).on("blur",this.blur_)},removeListeners_:function(){this.$el.find(".js-input-field").off("focus").off("blur")},setInputError:function(e){this.$(".js-control-error").toggleClass("show-error",!!e),this.$(".js-control-error").text(e),this.$(".js-input-field-container").toggleClass("is-invalid",!!e)},getText:function(){return this.$(".js-input-field").val().trim()},focus_:function(e){n(e.currentTarget),this.trigger(u.INPUT_FOCUS)},blur_:function(e){n(e.currentTarget),this.trigger(u.INPUT_BLUR)},keyup_:function(e){this.setInputError(),n(e.currentTarget),this.trigger(u.INPUT_KEYUP),this.getText().length>0?this.$el.find(".js-submit").removeAttr("disabled"):this.$el.find(".js-submit").attr("disabled",!0)},resend_:function(){this.trigger(u.RESEND,this.getText())},skip_:function(){this.trigger(u.SKIP)}},"ResendEmail");d.ACTIONS=u,e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(134);e.exports=i(108)("NeverLoseAccountRecheckEmail",function(e){return n.createElement("div",{className:"layout"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box cta-box--vpadded"}," ",n.createElement("div",{className:"cta-box__header"},e.header),n.createElement("div",{className:"cta-box__content"},e.message),n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"form-uniform js-form"},n.createElement("div",{className:"control control--centered"},n.createElement("div",{className:"control__error js-control-error ".concat(e.email.isInvalid?"show-error":"")},e.email.errorMessage),n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"input js-input-field-container ".concat(e.email.value?"has-value":""," ").concat(e.email.isInvalid?"is-invalid":""),"data-field-type":"email"},n.createElement("input",{id:"email",type:"email",className:"input__field js-input-field",value:e.email.value,autoComplete:"email"}),n.createElement("label",{htmlFor:"email",className:"control__label"},a.get(110))))))),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{type:"never-loose-account",narrow:!0,extraClass:"js-submit",text:e.primaryButton})),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm js-skip"},n.createElement("span",{className:"inline-button__text"},a.get(7)))))))))})},function(e,t,i){"use strict";var n=i(98),a=i(3505),o=i(142).waitForPageTransitionFinish,s=i(102),r=i(159),l=i(101).ViewBannerEvent,c=r.extend({headerTemplate:null,screenName:559,onStart:function(e){this.notification_=this.notification_||e.notification;var t=this.notification_.promo_block;s.track(l,{banner_id:t.promo_block_type,position_id:t.promo_block_position}),this.renderReactView(n.createElement(a,{notification:this.notification_}),this.parent[0]),c._super.onStart.apply(this,arguments)},onStop:function(){var e=this;c._super.onStop.apply(this,arguments),o(function(){e.removeReactView(e.parent[0])})}},"MarketingSubscriptionNotificationPage");e.exports=c},function(e,t,i){"use strict";function n(e){var t=(new v).setType(1).setSendEmail(e),i=(new E).setContext(45).setNotificationSettings([t]);m.getInstance().set(i)}var a=i(3),o=a(i(4)),s=a(i(110)),r=a(i(112)),l=a(i(114)),c=a(i(115)),u=a(i(123)),d=a(i(116)),h=i(98),p=i(3506),m=i(196),g=i(103).back,_=i(102),f=i(105),v=f.NotificationSetting,E=f.AppSettings,b=i(101).ClickBannerEvent,y=function(e){function t(e){var i;return(0,s.default)(this,t),(i=(0,l.default)(this,(0,c.default)(t).call(this,e))).onPrimaryClick=i.onPrimaryClick.bind((0,u.default)(i)),i.onSecondaryClick=i.onSecondaryClick.bind((0,u.default)(i)),i}return(0,d.default)(t,e),(0,r.default)(t,[{key:"onPrimaryClick",value:function(){n(!0),this.sentUpdate=!0,this.trackClick(8),g()}},{key:"onSecondaryClick",value:function(){n(!1),this.sentUpdate=!0,this.trackClick(9),g()}},{key:"trackClick",value:function(e){var t=this.props.notification.promo_block;_.track(b,{interaction_point:e,banner_id:t.promo_block_type,position_id:t.promo_block_position})}},{key:"componentWillUnmount",value:function(){this.sentUpdate||n(!1)}},{key:"render",value:function(){var e=this.props.notification.promo_block,t=e.header,i=e.mssg,n=(0,o.default)(e.buttons,2),a=n[0].text,s=n[1].text;return h.createElement(p,{title:t,message:i,primaryButtonText:a,secondaryButtonText:s,onPrimaryClick:this.onPrimaryClick,onSecondaryClick:this.onSecondaryClick})}}]),t}(h.Component);e.exports=y},function(e,t,i){"use strict";var n=i(98),a=i(133),o=i(130),s=i(143),r=i(160),l=i(151),c=i(172),u=i(152),d=i(154),h=i(106);e.exports=function(e){var t=e.title,i=e.message,p=e.primaryButtonText,m=e.secondaryButtonText,g=e.onPrimaryClick,_=e.onSecondaryClick;return n.createElement(a,null,n.createElement(o,{hpadded:!0,vpadded:!0},n.createElement(s,null,n.createElement(c,null,n.createElement(h,{name:"zero-gift",size:"jumbo-lg"})),n.createElement(l,{text:t}),n.createElement(u,{text:i}),n.createElement(r,null,n.createElement(d,{type:"filled",color:"primary",text:p,onClick:g}),n.createElement(d,{type:"link",color:"gray-dark",text:m,onClick:_})))))}},function(e,t,i){"use strict";var n=i(121),a=i(220),o=i(103).navigate,s=n.extend({controllerType:n.TYPES.TRANSITION,onStart:function(e){function t(){o(e.returnRoute,!0)}s._super.onStart.apply(this,arguments),a.getInstance().setVerified({methodType:parseInt(e.methodType,10),providerType:parseInt(e.providerType,10),providerId:e.providerId,token:e.accessToken}).then(t,t)}},"Verify");e.exports=s},function(e,t,i){"use strict";function n(e){p.track(_,{element:e,parent_element:211})}function a(e){p.track(v,{stars:e})}var o=i(3)(i(107)),s=i(103),r=i(121),l=i(3509),c=i(381),u=i(99),d=i(124),h=i(156),p=i(102),m=i(101),g=m.ViewElementEvent,_=m.ClickEvent,f=m.SendFeedbackEvent,v=m.RateAppEvent,E="rate-app-feedback",b=r.extend({headerTemplate:null,rating_:0,sendingFeedback_:!1,init:function(){b._super.init.apply(this,arguments),this.registerView(E,new l).on(l.EVENTS.SEND_FEEDBACK,this.onSendFeedback_.bind(this)).on(l.EVENTS.CLOSE,this.onClose_.bind(this))},onStart:function(e){b._super.onStart.apply(this,arguments);var t=this.getView(E);this.rating_=parseInt(e.rating,10),t.update((0,o.default)({},"rating_".concat(e.rating),!0)),t.appendTo(this.parent),this.fromModal_=e.fromModal||!1,this.fromModal_&&p.track(g,{element:211}),this.readyForVrt()},onClose_:function(){var e=this;if(this.fromModal_){n(113),a(this.rating_);var t={category:c.TYPES.STAR_RATING,message:"",rating:this.rating_};c.getInstance().set(t).then(function(t){return e.onFeedbackResult_(!1,t)}).catch(function(t){return e.onFeedbackResult_(t)})}s.back()},onNavigationAction:function(e){e===h.CLOSE&&this.onClose_()},onSendFeedback_:function(e){var t=this;if(!this.sendingFeedback_){this.fromModal_&&(n(204),a(this.rating_),p.track(f,{activation_place:252,action_type:2})),this.sendingFeedback_=!0,this.getView(E).showLoading();var i={category:c.TYPES.STAR_RATING,message:e.feedback,rating:this.rating_};c.getInstance().set(i).then(function(e){t.onFeedbackResult_(!1,e),s.back()}).catch(function(e){return t.onFeedbackResult_(e)})}},onFeedbackResult_:function(e){this.getView(E).hideLoading(),this.sendingFeedback_=!1,e||this.displayFeedbackResult_()},displayFeedbackResult_:function(){d.showNotification({type:d.TYPES.INFO,text:this.fromModal_?u.get(673):u.get(39)})}},"RateAppFeedbackController");e.exports=b},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(3510),s={CLOSE:"close",SEND_FEEDBACK:"send_feedback"},r=a.extend({events:{"click .js-feedback-action":"onSendFeedback_","click .js-close":"onClose_","keyup textarea":"validate_"},init:function(){return this.onInput_=this.onInput_.bind(this),this.onInputDebounced_=n.debounce(this.onInput_.bind(this),300),r._super.init.apply(this,arguments)},onClose_:function(){this.destroy(),this.trigger(s.CLOSE)},onSendFeedback_:function(e,t){if(!t.disabled){var i=this.getFeedbackMessage();this.trigger(s.SEND_FEEDBACK,{feedback:i})}},validate_:function(e,t){var i=""!==t.value?"removeAttr":"attr";this.$(".js-feedback-action")[i]("disabled","disabled")},getFeedbackMessage:function(){var e=this.$el.find("textarea");return e.length?e.val().trim():null},update:function(e){this.render(e)},render:function(e){this.$el.html(o.render(e)),this.textareaContainer_=this.$el.find(".js-textarea-container"),this.textMirror_=this.$el.find(".js-textarea-mirror"),this.textInput_=this.$el.find(".js-textarea-input"),this.textInput_.on("keyup",this.onInput_).on("paste",this.onInputDebounced_)},onInput_:function(){var e=this.textInput_.val();this.setValue(e)},setValue:function(e){this.textInput_.val(e||""),this.textareaContainer_.toggleClass("has-value",""!==e),this.textMirror_.html("".concat(n.escape(e),"&#x200b;"))}},"RateAppFeedback");r.EVENTS=s,e.exports=r},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{primary:i,title:n,block:a},{},"h").w('</div><div class="layout__content layout__content--hpadded layout__content--vpadded"><div class="cta-box"><div class="cta-box__content">').s(t.get(["rating_1"],!1),t,{block:o},{}).s(t.get(["rating_2"],!1),t,{block:s},{}).s(t.get(["rating_3"],!1),t,{block:r},{}).w('</div><div class="cta-box__content cta-box__content--wide"><form class="form-uniform" action=""><div class="control control--textarea "><div class="control__inputs"><div class="textarea js-textarea-container"><div class="textarea__mirror js-textarea-mirror"></div><textarea class="textarea__field js-textarea-input" rows="1"></textarea><label class="control__label">').h("t",t,{},{k:"235"},"h").w('</label></div></div></div></form></div><div class="cta-box__buttons">').h("Button",t,{text:l,attrs:c,block:u},{type:"primary",extraClass:"js-feedback-action"},"h").w("</div></div></div></div>")}function i(e,t){return e.w('<div class="navigation-bar__icon js-navigation" data-action="').f(t.getPath(!1,["NAVIGATION_BUTTONS","CLOSE"]),t,"h").w('" data-qa="navbar-close">').h("Icon",t,{},{name:"navigation-bar-close"},"h").w("</div>")}function n(e,t){return e.h("t",t,{},{k:"219"},"h")}function a(e,t){return e}function o(e,t){return e.h("t",t,{},{k:"220"},"h")}function s(e,t){return e.h("t",t,{},{k:"221"},"h")}function r(e,t){return e.h("t",t,{},{k:"222"},"h")}function l(e,t){return e.h("t",t,{},{k:"433"},"h")}function c(e,t){return e.w('disableddata-action="').f(t.get(["action"],!1),t,"h").w('"data-qa="navbar-link"')}function u(e,t){return e}return e.register("rate-app/rate-app-feedback",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(126),a=i(113),o=i(103),s=i(121),r=i(330),l=i(3512),c=i(105).User,u=s.extend({headerTemplate:null,activationPlace:161,screenName:186,init:function(){u._super.init.apply(this,arguments),this.registerController("verification-options",new r),this.registerView("view",new l).on(l.ACTIONS.LOGOUT,this.onLogout_)},onStart:function(){u._super.onStart.apply(this,arguments),this.getView("view").appendTo(this.parent).showLoading()},onReady:function(){u._super.onReady.apply(this,arguments),this.onParametersUpdate()},onParametersUpdate:function(){var e=this.getParameter("verificationMethods");e?(this.getView("view").update({promo:e.getPromo()}),this.getController("verification-options").updateParameters({verificationMethods:e,user:(new c).setUserId(a.getUserId()),isOwnProfile:!0,allowConfigure:!1,layout:"horizontal",destination:n.get("default.page"),context:53}).parent.appendTo(this.getView("view").getVerificationSection())):o.back()},onLogout_:function(){a.logout()}},"SubscribeVerification");e.exports=u},function(e,t,i){"use strict";var n=i(109),a=i(3513),o={LOGOUT:"logout"},s=n.extend({events:{"click .js-action":"onAction_"},onAction_:function(e,t){e.preventDefault(),this.trigger(t.getAttribute("data-action"))},update:function(e){var t={ACTIONS:o,header:e.promo.getHeader(),description:e.promo.getMssg()};this.render(t)},render:function(e){this.$el.html(a.render(e))},getVerificationSection:function(){return this.$el.find(".js-verification-section")}},"SubscribeVerification");s.ACTIONS=o,e.exports=s},function(e,t,i){"use strict";var n=i(98),a=i(99);e.exports=i(108)("SubscribeVerification",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__content layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"verify-social-picture",style:{backgroundImage:e.image?"url('".concat(e.image,"')"):void 0}})),n.createElement("div",{className:"cta-box__header",dangerouslySetInnerHTML:{__html:e.header}}),n.createElement("div",{className:"cta-box__content",dangerouslySetInnerHTML:{__html:e.description}}),n.createElement("div",{className:"cta-box__content cta-box__content--wide"},n.createElement("div",{className:"js-verification-section"})))),n.createElement("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded"},n.createElement("div",{className:"hint"},n.createElement("a",{href:"#",className:"js-action","data-action":e.ACTIONS.LOGOUT},a.get(78)))))})},function(e,t,i){"use strict";function n(e){return e&&e.getProductPromos([])[0]}function a(e,t){for(var i=0;i<e.length;i++)for(var n=e[i].getProviders([]);n[0];){var a=n[0];if(a.getProviderId()===t)return a.getPriceToken()}}var o=i(3)(i(4)),s=i(100),r=i(558),l=i(169),c=i(103),u=i(159),d=i(315),h=i(241),p=i(3515),m=i(216),g=i(102),_=i(149),f=i(113),v=i(124),E=i(105).ServerErrorMessage,b=i(101),y=b.ClickEvent,k=b.ClickBannerEvent,S=b.ViewBannerEvent,w=b.ClickBuyEvent,C=b.PaymentResultEvent,T=b.StartPaymentEvent,P=u.extend({headerTemplate:null,transaction_:null,screenName:422,activationPlace:124,notificationScreenAccess:3,init:function(){this.onData_=this.onData_.bind(this),this.onDataError_=this.onDataError_.bind(this),P._super.init.apply(this,arguments),this.registerView("view",new p).on(p.ACTIONS.SUBMIT,this.onSubmit_,this).on(p.ACTIONS.VIEW_TERMS,this.onTerms_,this).on(p.ACTIONS.CLOSE,this.onClose_,this),this.registerController("transactions-controller",new d({mode:d.MODES.NEW_LAYOUT})).on(d.EVENTS.SUCCESS,this.onTransactionSuccess_,this).on(d.EVENTS.FAILED,this.onTransactionFailed_,this).on(d.ACTIONS.BACK,this.onTransactionFailed_,this)},onStart:function(){P._super.onStart.apply(this,arguments);var e={supportedProviders:[102,100001],context:this.getContext()};h.getInstance().get(23,e).then(this.onData_).catch(this.onDataError_);var t=this.getView("view");t.reset(),t.appendTo(this.parent),this.getParameter("fromBanner")&&(this.paymentUID_=m.trackStart(null,23,this.getActivationPlace(),{product:22}))},onStop:function(){P._super.onStop.apply(this,arguments),this.transaction_=null},onData_:function(e){var t=(0,o.default)(e,1)[0];this.promoBlock_=n(t),this.productList_=t;var i=t.getProviderName()[0],c=i.getProviderId();this.transaction_={productType:this.promoBlock_.getOkPaymentProductType(),provider:i.getProvider(),providerId:c,providerName:i.getProviderName(),uid:i.getDefaultProductUid(),priceToken:a(t.getProducts([]),c)};var u,d=function(e){var t=n(e),i=r.getDataFromPromoBlock(t);i.pageTitle=e.getServiceTitle(),i.savedPaymentText=e.getSavedPaymentText(),i.hasAvatar=!!i.avatars[0].src,i.gender=2===f.getUser().getGender()?"female":"male";var a=t.getExtraTexts([])[0];return a&&1===a.getType()&&(i.hintExtraText=a.getText()),i}(t);d.productFeatures=(u=n(t),s.map(u.getPictures(),function(e){return{title:e.getName(),icon:l.getBadgeName(e.getBadgeType())}})),this.updateView("view",d),this.readyForVrt(),g.track(S,{banner_id:this.promoBlock_.getPromoBlockType(),position_id:this.promoBlock_.getPromoBlockPosition()})},onDataError_:function(e){var t;this.getParameter("fromBanner")&&(e instanceof E&&30===e.getType()&&(t=e.getErrorMessage()),v.showNotification({type:v.TYPES.ERROR,text:t})),c.back()},onSubmit_:function(){this.paymentUID_=this.paymentUID_||_.get(),this.getParameter("fromBanner")||(this.paymentUID_=m.trackStart(null,23,this.getActivationPlace(),{product:22})),this.getController("transactions-controller").updateParameters(this.transaction_),this.getView("view").showLoading(),g.track(y,{element:547}),g.track(k,{banner_id:this.promoBlock_.getPromoBlockType(),position_id:this.promoBlock_.getPromoBlockPosition()}),g.track(w,{uid:this.paymentUID_,provider_id:this.transaction_.providerId,product_id:this.transaction_.uid,is_default_product:!0,is_stored_method:this.productList_.getSavedPaymentAvailable(),auto_topup:1}),g.track(T,{uid:this.paymentUID_,activation_place:this.getActivationPlace(),product:22,event_version:1,paywall_type:3})},onTransactionSuccess_:function(){var e=this.getParameter("returnTo");g.track(C,{uid:this.paymentUID_,result:3}),e?c.goBackTo(e):c.back()},onTransactionFailed_:function(){this.updateView("view",{unlock:!0}),this.getView("view").hideLoading()},onClose_:function(){g.track(y,{element:515}),c.back()},getContext:function(){return this.getParameter("context")||45},getActivationPlace:function(){return this.getParameter("activationPlace")||this.activationPlace},onTerms_:function(){c.navigate("legal/terms",{returnTo:c.getUrl()})}},"SppTrialPage");e.exports=P},function(e,t,i){"use strict";var n=i(25),a=i(242),o=i(3516),s={CLOSE:"close",SUBMIT:"submit",VIEW_TERMS:"view_terms"},r=a.extend({events:{"click .js-action":"onAction_","click .js-close":"onClose_","click .js-terms":"onTerms_"},update:function(e){e.unlock?this.$el.find(".is-loading").removeClass("is-loading"):this.render(e)},render:function(e){this.$el.html(o.render(e)),this.attachToggleScroll(),this.hideLoading()},reset:function(){r._super.reset.apply(this,arguments),this.showLoading()},onAction_:function(e,t){(t=n(t)).hasClass("is-loading")||(t.addClass("is-loading"),this.trigger(s.SUBMIT))},onClose_:function(){this.trigger(s.CLOSE)},onTerms_:function(e){e.preventDefault(),this.trigger(s.VIEW_TERMS)}},"SppTrial");r.ACTIONS=s,e.exports=r},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(134),s=i(99),r=i(153);e.exports=i(108)("SppTrial",function(e){return n.createElement("div",{className:"layout layout--centered-content"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"spp-trial-media"},n.createElement("div",{className:"spp-trial-media__icon"},n.createElement(a,{name:"generic-premium",size:"stretch"})),n.createElement("div",{className:"spp-trial-media__badge"},e.hintExtraText))),n.createElement("div",{className:"cta-box__header",dangerouslySetInnerHTML:{__html:e.titleText}}),n.createElement("div",{className:"cta-box__content"},n.createElement("div",{dangerouslySetInnerHTML:{__html:e.messageText}}),n.createElement("div",{className:"spp-trial-features-list"},n.createElement("div",{className:"features-list ".concat(e.standalone?"features-list--standalone":"")},e.listTitle?n.createElement("div",{className:"features-list__title",dangerouslySetInnerHTML:{__html:e.listTitle}}):null,r(e.productFeatures,e,function(e){return n.createElement("div",{className:"features-list__item",key:e.title},n.createElement("div",{className:"features-list__item-image"},n.createElement(a,{size:"lg",color:"primary",name:"function"==typeof e.icon?e.icon():e.icon})),n.createElement("div",{className:"features-list__item-details"},e.title?n.createElement("div",{className:"features-list__item-details-summary",dangerouslySetInnerHTML:{__html:e.title}}):null,e.message?n.createElement("div",{className:"features-list__item-details-text"},e.message):null))})))),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{type:"primary",narrow:"true",extraClass:"js-action",text:e.buttons[0].actionText,attrs:{"data-action-type":e.buttons[0].actionType}})),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm js-close"},n.createElement("span",{className:"inline-button__text"},e.buttons[1].actionText))))),e.savedPaymentText?n.createElement("div",{className:"cta-box__additional"},n.createElement("div",{className:"hint"},e.savedPaymentText," ",n.createElement("a",{href:"#",className:"js-terms"},s.get(68)))):null)))})},function(e,t,i){"use strict";var n,a,o,s=i(3)(i(107)),r=i(100),l=i(113),c=i(631),u=i(128),d=i(284),h=i(3518),p=i(159),m=i(217),g=i(3520),_=i(3523),f=i(3527),v=i(3530),E=i(3532),b=i(3536),y=i(3547),k=i(3550),S=i(3552),w=i(161),C=i(136),T=i(103).navigate,P=i(254),N=i(105).ProfileOptionType,I=i(101).ActivationPlaceEnum,x=(n={},(0,s.default)(n,2,9),(0,s.default)(n,3,9),(0,s.default)(n,11,9),(0,s.default)(n,311,9),(0,s.default)(n,9,8),(0,s.default)(n,23,9),(0,s.default)(n,24,9),(0,s.default)(n,6,9),(0,s.default)(n,7,9),(0,s.default)(n,10,9),(0,s.default)(n,25,9),(0,s.default)(n,165,45),(0,s.default)(n,1,8),n),A=(a={},(0,s.default)(a,2,1),(0,s.default)(a,3,2),(0,s.default)(a,9,2),(0,s.default)(a,23,10),(0,s.default)(a,6,5),(0,s.default)(a,7,74),(0,s.default)(a,10,9),a),O=(o={},(0,s.default)(o,2,10),(0,s.default)(o,3,10),(0,s.default)(o,11,10),(0,s.default)(o,311,10),(0,s.default)(o,9,9),(0,s.default)(o,23,10),(0,s.default)(o,24,10),(0,s.default)(o,6,10),(0,s.default)(o,7,10),(0,s.default)(o,10,10),(0,s.default)(o,165,165),(0,s.default)(o,1,9),o),V="view",R=[b,E,g,_,f,v,k,S],B=r.range(1,18),L=p.extend({headerTemplate:!1,clientSource:104,profileOption:null,screens_:[],currentScreen_:0,unitType_:0,createElement:function(){return C({className:"profile-quality"})},init:function(){this.onScreensFetched_=this.onScreensFetched_.bind(this),this.onScreensDataPreloaded_=this.onScreensDataPreloaded_.bind(this),L._super.init.apply(this,arguments),this.registerView(V,new h).on(h.EVENTS.PREV,this.goToPrevScreen_,this).on(h.EVENTS.NEXT,this.goToNextScreen_,this)},onStart:function(){var e=this;L._super.onStart.apply(this,arguments),this.updateActivationPlace(),this.updateProfileOption(),this.getView(V).reset().appendTo(this.parent).showLoading(),this.currentScreen_=0,this.unitType_=w.getSettings().getDefaultUnitType(),u.getInstance().get({id:l.getUserId(),clientSource:104,userFieldFilter:P.getOwnProfileFilter()}).spread(function(t){e.completePercent_=t.getProfileCompletePercent(),c.getInstance().setClientSource(e.getClientSourceFromActivationPlace_()).setVisitingSource(A[e.activationPlace]).setProfileOption(e.profileOption).fetchRequiredScreens().spread(e.onScreensFetched_)})},onStop:function(){L._super.onStop.apply(this,arguments),this.destroyScreens_(),u.getInstance().invalidate(l.getUserId()),d.getInstance().invalidateAll()},getScreenName:function(){var e=this.screens_[this.currentScreen_];return e instanceof y?e.getScreenName():558},destroyScreens_:function(){var e=this.getController("screen");e&&(this.getView(V).update({previousScreen:e.getName()}),this.removeController("screen")),r.invokeMap(this.screens_,"destroy"),this.screens_=[]},onScreensFetched_:function(e){var t,i=this;this.stepCompletePercent_={},t=Boolean(this.getParameter("dryRun"))?B:e.getSteps([]).map(function(e){var t=e.getType();return i.stepCompletePercent_[t]=e.getProfilePercent(),t}),this.createAndPreloadScreens_(t).then(this.onScreensDataPreloaded_)},onScreensDataPreloaded_:function(){var e=this;if(this.getView(V).hideLoading(),this.getView(V).render({screens:r.map(this.screens_,function(e){return e.getName()})}),this.getParameter("screen")){var t=this.getParameter("screen"),i=r.findIndex(this.screens_,function(i){return e.getScreenUrlPart(i)===t});i>=0&&(this.currentScreen_=i)}this.setScreen_(this.currentScreen_)},createAndPreloadScreens_:function(e){var t=this;this.screens_&&this.destroyScreens_();var i={profileEditForm:d.getInstance().get(this.unitType_),unitType:this.unitType_,activationPlace:O[this.activationPlace]};this.screens_=[],r.each(e,function(e){var n=r.find(R,function(t){return t.isSupport(e)});if(n){var a=(new n).on(m.EVENTS.COMPLETE,t.onScreenComplete_,t).on(m.EVENTS.NEXT,t.goToNextScreen_,t);a.setScreenId(e).preloadData(i),t.screens_.push(a)}});var n=new y;n.on(y.EVENTS.START_OVER,this.onStartOver_,this),this.screens_.push(n);var a=r.filter(i,function(e){return e instanceof Promise});return a.length?Promise.all(a):Promise.resolve([])},setScreen_:function(e){var t,i=this,n=this.getController("screen"),a=this.completePercent_;this.screens_.forEach(function(e){e.isComplete()&&(a+=i.stepCompletePercent_[e.getScreenId()]||0)}),n&&(t=n.getName(),n.updatePercentage(a),n.stop()),this.currentScreen_=e;var o=this.screens_[e],s=this.getView(V);o.setParent(s.getScreenContainer()),this.registerController("screen",o,this.getParameters()),s.update({select:!0,complete:o.isComplete(),currentScreen:o.getName(),previousScreen:t,isFirst:0===this.currentScreen_,isLast:this.currentScreen_===this.screens_.length-1,currentScreenIndex:this.currentScreen_+1,screensNumber:this.screens_.length,gender:l.getUser().getGender(),completePercent:a}),T("profile-quality",!0,{screen:this.getScreenUrlPart(o),dryRun:this.getParameter("dryRun")}),this.readyForVrt()},getScreenUrlPart:function(e){return e.getName().replace(/_/g,"-")},goToPrevScreen_:function(){this.currentScreen_<1||this.setScreen_(this.currentScreen_-1)},goToNextScreen_:function(){this.currentScreen_>=this.screens_.length-1||this.setScreen_(this.currentScreen_+1)},onNavigationAction:function(){var e=this.screens_[this.currentScreen_];e.updatePercentage(this.completePercent_),e.userExited=!0,L._super.onNavigationAction.apply(this,arguments)},onScreenComplete_:function(e){this.getView(V).update({complete:e,currentScreen:this.getController("screen").getName()})},onStartOver_:function(){var e=this;this.getView(V).showLoading(),this.screens_.forEach(function(t){t.isComplete()&&(e.completePercent_+=e.stepCompletePercent_[t.getScreenId()]||0);
}),d.getInstance().setUseCache(!1),c.getInstance().fetchRequiredScreens().spread(function(t){T("profile-quality",!0),e.currentScreen_=0,e.getView(V).update({previousScreen:e.getController("screen").getName()}),e.onScreensFetched_(t)})},updateActivationPlace:function(){var e=this.getParameters()||{};e.inAppData?this.activationPlace=165:e.activationPlace&&I.isValid(e.activationPlace)?this.activationPlace=e.activationPlace:this.activationPlace=1},updateProfileOption:function(){var e=this.getParameters()||{};this.profileOption=e.profileOption&&N.isValid(e.profileOption)?e.profileOption:null},getClientSourceFromActivationPlace_:function(){var e=x[this.activationPlace];return e||(this.log.error("Couldn't get ClientSource from ActivationPlace",{activationPlace:this.activationPlace}),0)}},"ProfileQualityPage");e.exports=L},function(e,t,i){"use strict";var n,a,o,s,r=i(3)(i(107)),l=i(98),c=i(99),u=i(109),d=i(176),h=i(3519),p=i(156),m=i(106),g={PREV:"prev",NEXT:"next"},_={about_you:(n={},(0,r.default)(n,1,c.get(810)),(0,r.default)(n,2,c.get(811)),n),interests:c.get(601),languages:c.get(600),profile_photo:(a={},(0,r.default)(a,1,c.get(804)),(0,r.default)(a,2,c.get(805)),a),appearance_height:c.get(593),appearance_weight:c.get(594),relationship:c.get(591),sexuality:c.get(592),appearance_body_type:(o={},(0,r.default)(o,1,c.get(806)),(0,r.default)(o,2,c.get(807)),o),appearance_hair_color:c.get(595),appearance_eye_color:c.get(596),living:c.get(597),children:(s={},(0,r.default)(s,1,c.get(808)),(0,r.default)(s,2,c.get(809)),s),smoking:c.get(598),drinking:c.get(599),verification:c.get(454),work_and_education:c.get(602),end:""},f={about_you:"profile-badge-about-large",interests:"profile-badge-interests-large",languages:"profile-badge-languages-large",profile_photo:"adaptor-photo-gallery-active",appearance_height:"profile-badge-appearance-height-large",relationship:"profile-badge-relationship-large",sexuality:"profile-badge-sexuality-large",appearance_body_type:"profile-badge-appearance-body-type-large",living:"profile-badge-living-large",children:"profile-badge-children-large",smoking:"profile-badge-smoking-large",drinking:"profile-badge-drinking-large",verification:"profile-badge-verification-large",work_and_education:"profile-badge-work-study-large",end:null},v=u.extend({events:{"click .js-prev":"onPrev_","click .js-next":"onNext_"},update:function(e){if(e.previousScreen&&this.getElement().parent().removeClass("profile-quality--".concat(e.previousScreen)),!0===e.select){this.updateSelect_(e);var t=_[e.currentScreen];if(t&&this.$(".js-screen-title").html("string"==typeof t?t:t[e.gender]),this.$(".js-steps-counter").html("".concat(e.currentScreenIndex,"/").concat(e.screensNumber)),"end"!==e.currentScreen)this.renderReactView(l.createElement(m,{name:f[e.currentScreen]}),this.$(".js-screen-icon")[0]);else{this.$(".js-percentage").html(e.completePercent);var i=this.$(".js-profile-quality-progress");if(i.length>0){var n=i.width()*Math.PI;i.css("strokeDashoffset",n-e.completePercent*n/100)}}}"complete"in e&&this.updateComplete_(e),this.updateArrows_(e)},render:function(e){this.$el.html(h.render({NAVIGATION_ACTIONS:p,screens:e.screens,icon:e.screens.slice(0,e.screens.length-1)}));var t=this.$el.find(".js-scroll-toggle");t.length&&(this.toggleScroll_=new d(t))},getScreenContainer:function(){return this.$(".js-content")},onPrev_:function(){this.trigger(g.PREV)},onNext_:function(){this.trigger(g.NEXT)},updateArrow_:function(e,t){!t||e.hasClass("is-disabled")?e.removeClass("is-disabled"):e.addClass("is-disabled")},updateArrows_:function(e){this.updateArrow_(this.$(".js-prev"),e.isFirst),this.updateArrow_(this.$(".js-next"),e.isLast)},updateComplete_:function(e){this.$(".js-dot-".concat(e.currentScreen)).toggleClass("is-completed",e.complete),this.$(".js-next").toggleClass("is-ready",e.complete),e.complete?this.$(".js-next").attr("data-qa-ready","true"):this.$(".js-next").removeAttr("data-qa-ready")},updateSelect_:function(e){this.getElement().parent().addClass("profile-quality--".concat(e.currentScreen)),this.getElement().parent().hasClass("is-ready")||this.getElement().parent().addClass("is-ready");var t=this.$(".js-dots");t.find(".is-current").removeClass("is-current"),t.find(".js-dot-".concat(e.currentScreen)).addClass("is-current")}},"ProfileQualityView");v.EVENTS=g,e.exports=v},function(e,t,i){"use strict";var n=i(98),a=(i(117),i(106));e.exports=i(108)("Main",function(e){return n.createElement("div",{className:"rainbow-quiz"},n.createElement("div",{className:"rainbow-quiz__close js-navigation","data-action":e.NAVIGATION_ACTIONS.CLOSE,"data-qa":"navbar-close"},n.createElement(a,{name:"generic-close"})),n.createElement("div",{className:"rainbow-quiz__top"},e.icon?n.createElement("div",{className:"rainbow-quiz__level js-screen-icon"}):n.createElement("div",{className:"rainbow-quiz__level"},n.createElement("div",{className:"rainbow-quiz__value"},n.createElement("span",{className:"rainbow-quiz__number js-percentage","data-qa":"progress-percent"},"17"),n.createElement("span",{className:"rainbow-quiz__percent"},"%")),n.createElement("div",{className:"rainbow-quiz__progress"},n.createElement("svg",{className:"boost-timer boost-timer--plain"},n.createElement("circle",{className:"boost-timer__bar",cx:"50%",cy:"50%",fill:"none"}),n.createElement("circle",{className:"boost-timer__progress js-profile-quality-progress",cx:"50%",cy:"50%",fill:"none"})))),n.createElement("div",{className:"rainbow-quiz__question-box"},n.createElement("div",{className:"rainbow-quiz__question js-screen-title","data-qa":"step-title"},e.title))),n.createElement("div",{className:"rainbow-quiz__pagination"},n.createElement("div",{className:"pagination-bar"},n.createElement("div",{className:"pagination-bar__prev js-touchable js-prev","data-qa":"prev-button"},n.createElement("div",{className:"pagination-bar__icon pagination-bar__icon-normal"},n.createElement(a,{name:"floating-action-prev",supportsRtl:!0}))),n.createElement("div",{className:"pagination-bar__content js-steps-counter","data-qa":"current-step"},"1/20"),n.createElement("div",{className:"pagination-bar__next js-touchable js-next","data-qa":"next-button"},n.createElement("div",{className:"pagination-bar__icon pagination-bar__icon-normal"},n.createElement(a,{name:"floating-action-next",supportsRtl:!0})),n.createElement("div",{className:"pagination-bar__icon pagination-bar__icon-ready"},n.createElement(a,{name:"floating-action-ok"}))))),n.createElement("div",{className:"rainbow-quiz__content js-content"}))})},function(e,t,i){"use strict";var n=i(217),a=i(128),o=i(3521),s=i(105),r=s.User,l=s.ProfileField,c=n.extend({value_:null,unsaved_:!1,getHpScreenValue:function(){return 15},getName:function(){return"about_you"},getProfileOptionType:function(){return 2},onScreenInit:function(){return(new o).on(o.EVENTS.CHANGE,this.onChange_,this)},onScreenBackground:function(){if(!this.isDryRun&&this.unsaved_){var e=(new r).setProfileFields([(new l).setDisplayValue(this.value_).setValue(this.value_).setType(2)]);a.getInstance().set(e,[490]),this.unsaved_=!1}},onChange_:function(e){this.setComplete(""!==e),this.value_=e,this.unsaved_=!0}},"ScreenController");c.isSupport=function(e){return 15===e},e.exports=c},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(99),s=i(3522),r={CHANGE:"change"},l=a.extend({textareaContainer_:null,textInput_:null,textMirror_:null,counter_:null,init:function(){this.onInput_=this.onInput_.bind(this),this.onInputDebounced_=n.debounce(this.onInput_.bind(this),300);var e=this.$el;return e.html(s.render({MAX_ALLOWED_CHARACTERS_COUNT:1e3})),this.textareaContainer_=e.find(".js-textarea-container"),this.textMirror_=e.find(".js-textarea-mirror"),this.counter_=e.find(".js-counter"),this.textInput_=e.find(".js-textarea-input"),this.textInput_.on("keyup",this.onInput_).on("paste",this.onInputDebounced_),this.updateCounter_(""),l._super.init.apply(this,arguments)},onInput_:function(){var e=this.textInput_.val();this.textareaContainer_.toggleClass("has-value",""!==e),this.textMirror_.html("".concat(n.escape(e.substring(0,1e3)),"&#x200b;")),window.scrollTo(0,this.counter_.position().top+this.counter_.height()),this.updateCounter_(e),this.trigger(r.CHANGE,e)},updateCounter_:function(e){var t=1e3-e.length;this.counter_.text(o.get(453,t)),this.counter_.toggleClass("is-overflow",t<1)}},"ScreenView");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(99);e.exports=i(108)("AboutYou",function(e){return n.createElement("div",{className:"profile-quality__step profile-quality__step--form","data-qa":"step-about"},n.createElement("form",{className:"form-uniform",action:""},n.createElement("div",{className:"control control--textarea"},n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"textarea js-textarea-container"},n.createElement("div",{className:"textarea__mirror js-textarea-mirror","data-qa":"textarea-text"}),n.createElement("textarea",{className:"textarea__field js-textarea-input",rows:"1",maxLength:e.MAX_ALLOWED_CHARACTERS_COUNT,"data-qa":"textarea-input"}),n.createElement("label",{className:"control__label","data-qa":"textarea-label"},a.get(452))),n.createElement("div",{className:"textarea__counter js-counter","data-qa":"textarea-counter"})))))})},function(e,t,i){"use strict";var n=i(100),a=i(217),o=i(346),s=i(3524),r=a.extend({getHpScreenValue:function(){return 14},getData_:function(){return this.getView(a.VIEW).getData()},save_:function(){var e=this.getData_();this.isDryRun||n.isEmpty(e)||o.getInstance().set(e,null,3)},fetchInterests_:function(e){return e=e||0,o.getInstance().get(1,e,8).spread(function(e){return e.getInterests()})},onInterestSelected_:function(){this.setComplete(!!this.getData_())},onLoadMore_:function(e){this.save_(),e=e||{},this.fetchInterests_(e.from).then(this.getView(a.VIEW).updateInterests)},onStop:function(){this.save_(),r._super.onStop.apply(this,arguments)},preloadData:function(e){var t=this;r._super.preloadData.apply(this,arguments),e.interests=this.fetchInterests_().then(function(e){t.viewData=e})},getName:function(){return"interests"},getProfileOptionType:function(){return 21},onScreenInit:function(){var e=new s;return e.on(s.EVENTS.LOAD_MORE,this.onLoadMore_,this),e.on(s.EVENTS.INTEREST_SELECTED,this.onInterestSelected_,this),e.updateInterests(this.viewData),e}},"ScreenController");r.isSupport=function(e){return 14===e},e.exports=r},function(e,t,i){"use strict";function n(e){return(e=e||[]).map(function(e){return(e=e.toJSON()).icon=(0,a.default)({},"interest".concat(e.group_id),!0),e})}var a=i(3)(i(107)),o=i(100),s=i(25),r=i(111),l=i(109),c=i(3525),u=i(3526),d=r("LOAD_MORE","INTEREST_SELECTED"),h=l.extend({events:{"click .js-interest-bubble":"onInterestSelect_","click .js-event":"onShowMore_"},onInterestSelect_:function(e,t){var i=(t=s(t)).data(),n=i.checked?"removeClass":"addClass";t.data("checked",!i.checked),t[n]("interest--matched qa-matched"),this.trigger(d.INTEREST_SELECTED)},onShowMore_:function(e,t){var i=s(t).data(),n=parseInt(i.from,10);o.isNumber(n)&&(n+=8,s(t).data("from",n),i.from=n),this.trigger(d.LOAD_MORE,i)},init:function(){this.$el.html(c.render())},updateInterests:function(e){var t=u.render({interests:n(e)});this.$el.find(".js-interests").html(t)},getData:function(){var e=this.$el.find(".js-interest-bubble"),t=o.filter(e.map(function(e,t){var i,n=(t=s(t)).data();return n.checked&&(i=n.id),i}));return t.length?t:null}},"ScreenView");h.EVENTS=d,e.exports=h},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106);e.exports=i(108)("Interests",function(e){return n.createElement("div",{className:"profile-quality__step","data-qa":"step-interests"},n.createElement("div",{className:"interests js-interests"}),n.createElement("div",{className:"profile-quality__step-link"},n.createElement("div",{className:"step-link js-event","data-from":"0"},n.createElement("div",{className:"step-link__icon"},n.createElement(o,{name:"generic-spinning-arrows",size:"md"})),n.createElement("span",{className:"step-link__text"},a.get(81)))))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("InterestsList",function(e){return e.interests.map(function(e){return n.createElement("div",{className:"interest qa-interest-bubble ".concat(e.isHidden?"interest--additional":""," ").concat(e.isMatched?"interest--matched qa-matched":""," js-interest-bubble"),"data-group":e.group_id,"data-id":e.interest_id},n.createElement("span",{className:"interest__label"},e.name))})})},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(100),o=i(217),s=i(275),r=i(128),l=i(3528),c=i(105).User,u=o.extend({viewData_:null,view_:null,getHpScreenValue:function(){return 13},getData_:function(){return this.getView(o.VIEW).getData()},save_:function(){var e=this.getData_();if(!this.isDryRun&&!a.isEmpty(e)){var t=(new c).setProfileFields(e);r.getInstance().set(t,[490])}},onLanguageSelected_:function(){this.setComplete(!!this.getData_())},onStop:function(){this.save_(),this.view_.destroyPopUp(),u._super.onStop.apply(this,arguments)},getName:function(){return"languages"},getProfileOptionType:function(){return 11},preloadData:function(e){var t=this;u._super.preloadData.apply(this,arguments),Promise.all([s.getInstance().get(s.TYPE.SPOKEN_MULTILANGUAGE),e.profileEditForm]).then(function(e){var i=(0,n.default)(e,2),a=i[0],o=i[1];t.viewData_={languages:a[0],profileField:o[t.getProfileOptionType()]},t.view_&&t.view_.init({data:t.viewData_})})},onScreenInit:function(){var e=new l({data:this.viewData_});return e.on(l.EVENTS.LANGUAGE_SELECT,this.onLanguageSelected_,this),this.view_=e,e}},"ScreenController");u.isSupport=function(e){return 13===e},e.exports=u},function(e,t,i){"use strict";function n(e,t){return e.getLanguages().map(function(e){var i=t?function(e,t){var i=null,n=e.getInputParts().find(function(e){return parseInt(e.getId(),10)===t&&e.hasCurrentOptionId()});return n&&(i=c.getLevel(parseInt(n.getCurrentOptionId(),10))),i}(t,e.getUid()):null;return{displayValue:e.getName(),value:e.getUid(),level:i}})}var a=i(3)(i(168)),o=i(25),s=i(111),r=i(109),l=i(544),c=i(410),u=i(3529),d=i(202),h=i(105).ProfileField,p=s("LANGUAGE_SELECT"),m=r.extend({popup_:null,events:{"click .js-select-option":"onLanguageSelect_","click .js-event":"onShowMore_"},onLanguageSelect_:function(e,t){var i=this,n=(t=o(t)).find(".js-input"),a=n.val();n.attr("checked")?this.popup_=l(function(e){e?i.updateLevelForSelection_(a,e):(n.data("level")||i.$el.find(".js-languages-".concat(a," .js-input")).prop("checked",!1),i.trigger(p.LANGUAGE_SELECT))}):this.updateLevelForSelection_(a)},onShowMore_:function(){this.updateLanguages_()},updateLevelForSelection_:function(e,t){var i=this.$el.find(".js-languages-".concat(e));t?(i.find(".js-extra").removeClass("hidden"),i.find(".js-extra .js-text").text(c.getLevel(t).title),i.find(".js-input").attr("data-level",c.getLevel(t).level)):(i.find(".js-extra").addClass("hidden"),i.find(".js-input").attr("data-level","")),this.trigger(p.LANGUAGE_SELECT)},updateLanguages_:function(e){var t=this.$el.find(".js-select-option");e=e||t.length,t.forEach(function(t,i){t=o(t),i<e&&t.hasClass("hidden")&&t.removeClass("hidden")}),e===t.length&&this.$el.find(".js-event").addClass("hidden")},init:function(e){e.data&&e.data.languages&&(this.$el.html(u.render({options:n(e.data.languages,e.data.profileField)})),this.updateLanguages_(8))},getData:function(){var e=this.$el.find("input:checked"),t=Array.prototype.reduce.call(e,function(e,t){var i=o(t),n=i.val(),s=(i.data("level")||"").toString();if(n&&s){var r=(new h).setType(11).setId(n).setValue(s).setDisplayValue(s);return[].concat((0,a.default)(e),[r])}return e},[]);return t&&t.length?t:null},destroyPopUp:function(){var e=this;this.popup_&&(this.popup_.on(d.ACTIONS.DISMISS,function(){e.popup_.destroy(),e.popup_=null}),this.popup_.dismiss())}},"ScreenView");m.EVENTS=p,e.exports=m},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106);e.exports=i(108)("Languages",function(e){return n.createElement("div",{className:"profile-quality__step profile-quality__step--poll","data-qa":"step-languages"},n.createElement("ul",{className:"poll poll--checkbox poll--inherited"},e.options.map(function(e){return n.createElement("li",{className:"poll__item js-languages-".concat(e.value," js-select-option ").concat(e.level?"":"hidden"),key:e.value},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"checkbox",name:"languages",value:e.value,"data-action":e.action,defaultChecked:e.level?"checked":void 0,"data-level":e.level?e.level.level:void 0}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.displayValue)),n.createElement("div",{className:"poll__extra ".concat(e.level?"":"hidden"," js-extra")},n.createElement("div",{className:"language-level"},n.createElement("span",{className:"language-level__text js-text"},e.level?e.level.title:null),n.createElement("div",{className:"language-level__icon"},n.createElement(o,{name:"generic-chevron-right",size:"xsm"})))))})),n.createElement("div",{className:"profile-quality__step-link"},n.createElement("div",{className:"step-link js-event"},n.createElement("span",{className:"step-link__text"},a.get(81)))))})},function(e,t,i){"use strict";var n=i(99),a=i(217),o=i(173),s=i(3531),r=i(214),l=i(128),c=i(140),u=i(289),d=i(113),h=i(124),p=i(247),m={UPLOAD:"upload"},g=a.extend({getHpScreenValue:function(){return 1},getName:function(){return"profile_photo"},getProfileOptionType:function(){return 0},onScreenInit:function(){return(new o).setTemplate(s).setActions(m).on(m.UPLOAD,this.onUpload_,this).render({})},onUpload_:function(){u.off(u.EVENTS.FINISH,this.onFinish_,this),u.once(u.EVENTS.FINISH,this.onFinish_,this),u.off(u.EVENTS.START,this.onStart_,this),u.once(u.EVENTS.START,this.onStart_,this),u.start({uploadUrl:p(4),albumType:2})},onStart_:function(){this.update({hasPhoto:!0})},onFinish_:function(e){var t=e&&e.photo_id;return t?(this.update({hasPhoto:!0,photoUrl:e.photo_url}),this.setComplete(!0),r.getInstance().sendPhotoUploadConfirm({photoId:t}).then(function(){var e=d.getUserId();r.getInstance().invalidate(e),l.getInstance().invalidate(e),c.getInstance().invalidate()},this.onError_),void 0):this.onError_()},onError_:function(){h.showNotification({type:h.TYPES.ERROR,text:n.get(75)}),this.update({})}},"ScreenController");g.isSupport=function(e){return 1===e},e.exports=g},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106),s=i(134);e.exports=i(108)("Photo",function(e){return n.createElement("div",{className:"profile-quality__step","data-qa":"step-photo"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__content","data-qa":"step-subtitle"},a.get(675)),e.data.hasPhoto?n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"photo-booth"},n.createElement("div",{className:"photo-booth__item"},n.createElement("div",{className:"photo-booth__preview"},n.createElement("div",{className:"photo-booth__preview-image",style:{backgroundImage:e.data.photoUrl?"url('".concat(e.data.photoUrl,"')"):void 0}}),e.data.photoUrl?null:n.createElement("div",{className:"photo-booth__preview-loader"},n.createElement(o,{name:"loading-dots",size:"lg"})))))):null,n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{type:"inherited",text:a.get(47),extraClass:"needsclick",attrs:{"data-action":e.actions.UPLOAD,"data-qa":"add-photo-button"}}))))))})},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(100),s=i(113),r=i(128),l=i(284),c=i(273),u=i(217),d=i(3533),h=i(105),p=h.User,m=h.ProfileField,g=(0,a.default)({},4,{key:"appearance_height",optionId:13,hotpanelStep:4}),_=u.extend({appearanceData_:(n={},(0,a.default)(n,1,null),(0,a.default)(n,2,null),n),values_:null,unsaved_:!1,unitType_:0,selectedIndex_:0,getName:function(){return g[this.screenId].key},getProfileOptionType:function(){return g[this.screenId].optionId},getHpScreenValue:function(){return g[this.screenId].hotpanelStep},preloadData:function(e){_._super.preloadData.apply(this,arguments),this.unitType_=e.unitType,e.profileEditForm.spread(this.onProfileFormData_.bind(this))},onScreenInit:function(){var e=this.getViewData();return this.screen=new d(e).on(d.EVENTS.CHANGE,this.onChange_,this).on(d.EVENTS.SWITCH_UNIT,this.onSwitchUnit_,this).on(d.EVENTS.RESET,this.onReset_,this),this.screen},onScreenBackground:function(){this.unsaved_&&this.save_(this.values_[this.selectedIndex_].getValue())},onReset_:function(){this.update({value:"",reset:!0}),this.save_(""),this.setComplete(!1),this.goToNextScreen()},onChange_:function(e){var t=Math.round(e*(this.values_.length-2)/1e3);t<0?t=0:t>=this.values_.length-1&&(t=this.values_.length-1),this.selectedIndex_=t+1,this.setComplete(!0),this.update({value:this.values_[this.selectedIndex_].getDisplayValue()}),this.unsaved_=!0},onSwitchUnit_:function(){1===this.unitType_?this.unitType_=2:this.unitType_=1,this.selectedIndex_=0,this.update({reset:!0}),this.setComplete(!1),this.appearanceData_[this.unitType_]?this.onProfileFormData_(this.appearanceData_[this.unitType_]):(this.getView(u.VIEW).showLoading(),l.getInstance().get(this.unitType_,[5]).spread(this.onProfileFormData_.bind(this)))},onProfileFormData_:function(e){var t=e[g[this.screenId].optionId];this.appearanceData_[this.unitType_]=e,this.values_=t.getPossibleValues();var i=t.getCurrentOptionId(),n=o.findIndex(this.values_,function(e){return e.getValue()===i});n>0&&(this.selectedIndex_=n),this.isStarted()&&(this.update({value:this.values_[this.selectedIndex_].getDisplayValue(),unit:this.unitType_}),this.screen.update(this.getViewData()),this.getView(u.VIEW).hideLoading())},save_:function(e){if(!this.isDryRun&&!o.isEmpty(e)&&"0"!==e){var t=g[this.screenId].optionId,i=(new p).setProfileFields([(new m).setDisplayValue(e).setValue(e).setType(t)]);r.getInstance().set(i,[490]),c.trackAppearance(null,(0,a.default)({},t,e)),this.unsaved_=!1}},getViewData:function(){var e={screen:g[this.screenId],gender:s.getUser().getGender(),unit:this.unitType_};if(this.selectedIndex_){var t=Math.round(this.selectedIndex_/(this.values_.length-2)*1e3);e.displayValue=this.values_[this.selectedIndex_].getDisplayValue(),e.sliderValue=t,e.reset=!0}return e}},"ScreenController");_.isSupport=function(e){return e in g},e.exports=_},function(e,t,i){"use strict";var n,a,o=i(3)(i(107)),s=i(109),r=i(99),l=i(545),c=i(3534),u=i(3535),d={RESET:"reset",CHANGE:"change",SWITCH_UNIT:"switch"},h={appearance_height:(n={},(0,o.default)(n,1,r.get(580)),(0,o.default)(n,2,r.get(583)),n),appearance_weight:(a={},(0,o.default)(a,1,r.get(582)),(0,o.default)(a,2,r.get(581)),a)},p=s.extend({events:{"click .js-reset":"onReset_","click .js-switch-unit":"onSwitchUnit_"},key_:null,init:function(e){var t;return"appearance_height"===e.screen.key?t=c:"appearance_weight"===e.screen.key&&(t=u),this.key_=e.screen.key,this.$el.html(t.render({isMale:1===e.gender,isMetric:1===e.unit,displayValue:e.displayValue})),this.registerView("slider",new l).on(l.EVENTS.CHANGE,this.trigger.bind(this,d.CHANGE)).appendTo(this.$(".js-slider")).update({permille:e.sliderValue?e.sliderValue:500}),p._super.init.apply(this,arguments)},update:function(e){"value"in e&&this.$(".js-value").html(e.value||"--"),e.reset&&this.getView("slider").update({permille:e.sliderValue?e.sliderValue:500}),e.unit&&this.$(".js-switch-label").html(h[this.key_][e.unit])},onReset_:function(){this.trigger(d.RESET)},onSwitchUnit_:function(){this.trigger(d.SWITCH_UNIT)}},"ScreenView");p.EVENTS=d,e.exports=p},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106);e.exports=i(108)("Height",function(e){return n.createElement("div",{className:"profile-quality__step","data-qa":"step-height"},n.createElement("div",{className:"appearance-measure"},n.createElement("div",{className:"appearance-measure__value js-value js-switch-unit","data-qa":"measure-value"},e.displayValue?e.displayValue:"--")),n.createElement("div",{className:"profile-quality__slider js-slider"}),n.createElement("div",{className:"profile-quality__step-links"},n.createElement("div",{className:"profile-quality__step-link"},n.createElement("div",{className:"step-link js-reset"},n.createElement("span",{className:"step-link__text"},a.get(451)))),n.createElement("div",{className:"profile-quality__step-link"},n.createElement("div",{className:"step-link js-switch-unit"},n.createElement("div",{className:"step-link__icon"},n.createElement(o,{name:"generic-spinning-arrows",size:"md"})),n.createElement("span",{className:"step-link__text js-switch-label","data-qa":"switch-label"},e.isMetric?a.get(580):a.get(583))))))})},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(106);e.exports=i(108)("Weight",function(e){return n.createElement("div",{className:"profile-quality__step","data-qa":"step-weight"},n.createElement("div",{className:"appearance-measure"},n.createElement("div",{className:"appearance-measure__value js-value js-switch-unit","data-qa":"measure-value"},"--")),n.createElement("div",{className:"profile-quality__slider js-slider"}),n.createElement("div",{className:"profile-quality__step-links"},n.createElement("div",{className:"profile-quality__step-link"},n.createElement("div",{className:"step-link js-reset"},n.createElement("span",{className:"step-link__text"},a.get(451)))),n.createElement("div",{className:"profile-quality__step-link"},n.createElement("div",{className:"step-link js-switch-unit"},n.createElement("div",{className:"step-link__icon"},n.createElement(o,{name:"generic-spinning-arrows",size:"md"})),n.createElement("span",{className:"step-link__text js-switch-label","data-qa":"switch-label"},e.isMetric?a.get(582):a.get(581))))))})},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(100),s=i(217),r=i(3537),l=i(128),c=i(273),u=i(105),d=u.User,h=u.ProfileField,p=(n={},(0,a.default)(n,2,{optionId:3,key:"relationship",hotpanelStep:2}),(0,a.default)(n,3,{optionId:4,key:"sexuality",hotpanelStep:3}),(0,a.default)(n,6,{optionId:15,appearanceId:15,key:"appearance_body_type",hotpanelStep:6}),(0,a.default)(n,7,{optionId:17,appearanceId:17,key:"appearance_hair_color",hotpanelStep:7}),(0,a.default)(n,8,{optionId:16,appearanceId:16,key:"appearance_eye_color",hotpanelStep:8}),(0,a.default)(n,9,{optionId:6,key:"living",hotpanelStep:9}),(0,a.default)(n,10,{optionId:7,key:"children",hotpanelStep:10}),(0,a.default)(n,11,{optionId:8,key:"smoking",hotpanelStep:11}),(0,a.default)(n,12,{optionId:9,key:"drinking",hotpanelStep:12}),n),m=s.extend({save_:function(){if(!this.isDryRun){var e=p[this.screenId],t=this.getView(s.VIEW).getData(),i=e.appearanceId||e.optionId,n=(new d).setProfileFields([(new h).setDisplayValue(t).setValue(t).setType(i)]);l.getInstance().set(n,[490]),c.trackAppearance(null,(0,a.default)({},i,t))}},onOptionSelected_:function(){this.save_();var e=this.getView("view").getData(),t=this.viewData.getPossibleValues().find(function(t){return t.getValue()===e});this.setComplete(!t.getIsEmptyValue()),setTimeout(this.goToNextScreen.bind(this),100)},getName:function(){return p[this.screenId].key},getProfileOptionType:function(){return p[this.screenId].optionId},getHpScreenValue:function(){return p[this.screenId].hotpanelStep},preloadData:function(e){var t=this;m._super.preloadData.apply(this,arguments),e.profileEditForm.spread(function(e){t.viewData=function(e,t){return 5===t.optionId?function(e,t){var i=o.filter(e.getInputParts(),function(e){return e.getType()===t.appearanceId});return o.isArray(i)&&i.length>0?i[0]:i}(e[t.optionId],t):e[t.optionId]}(e,p[t.screenId])})},onScreenInit:function(){var e=p[this.screenId],t=new r({screen:e,data:this.viewData});return t.on(r.EVENTS.ITEM_SELECT,this.onOptionSelected_,this),t}},"ScreenController");m.isSupport=function(e){return e in p},e.exports=m},function(e,t,i){"use strict";var n=i(100),a=i(25),o=i(111),s=i(109),r=i(99),l={relationship:i(3538),sexuality:i(3539),appearance_body_type:i(3540),appearance_hair_color:i(3541),appearance_eye_color:i(3542),living:i(3543),children:i(3544),smoking:i(3545),drinking:i(3546)},c=o("ITEM_SELECT"),u=s.extend({events:{"click .js-input":"onOptionSelect_"},onOptionSelect_:function(e,t){this.$("button").removeClass("is-active"),a(t).addClass("is-active").parents(".js-select-option").siblings().find(".js-input").removeClass("is-active").prop("checked",!1),this.trigger(c.ITEM_SELECT)},init:function(e){var t=l[e.screen.key],i=function(e){if(!e||!e.getPossibleValues)return null;var t=e.getPossibleValues(),i=e.getCurrentOptionId(),n=t.map(function(e){return{value:e.getValue(),checked:!e.getIsEmptyValue()&&e.getValue()===i,displayValue:e.getDisplayValue()||r.get(451)}});return n.length>0?n:null}(e.data);!function(e){var t=n.findIndex(e,{value:"None"});t>=0&&(e.push(e[t]),e.splice(t,1))}(i),this.$el.html(t.render({options:i||[],name:e.screen.key}))},getData:function(){return this.$el.find("input:checked, button.is-active").val()}},"ScreenView");u.EVENTS=c,e.exports=u},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("Relationship",function(e){return n.createElement("div",{className:"profile-quality__step profile-quality__step--poll","data-qa":"step-relationship"},n.createElement("ul",{className:"poll poll--radio poll--inherited"},e.options.map(function(e){return n.createElement("li",{className:"poll__item js-select-option",key:e.value},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"radio",defaultChecked:e.checked,name:e.name,value:e.value}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.displayValue)))})))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("Sexuality",function(e){return n.createElement("div",{className:"profile-quality__step profile-quality__step--poll","data-qa":"step-sexuality"},n.createElement("ul",{className:"poll poll--radio poll--inherited"},e.options.map(function(e){return n.createElement("li",{className:"poll__item js-select-option",key:e.value},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"radio",defaultChecked:e.checked,name:e.name,value:e.value}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.displayValue)))})))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("BodyType",function(e){return n.createElement("div",{className:"profile-quality__step profile-quality__step--poll","data-qa":"step-body-type"},n.createElement("ul",{className:"poll poll--radio poll--inherited"},e.options.map(function(e){return n.createElement("li",{className:"poll__item js-select-option",key:e.value},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"radio",defaultChecked:e.checked,name:e.name,value:e.value}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.displayValue)))})))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("HairColor",function(e){return n.createElement("div",{className:"profile-quality__step profile-quality__step--poll","data-qa":"step-hair-colour"},n.createElement("ul",{className:"poll poll--radio poll--inherited"},e.options.map(function(e){return n.createElement("li",{className:"poll__item js-select-option",key:e.value},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"radio",checked:e.checked,name:e.name,value:e.value}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.displayValue)))})))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("EyeColor",function(e){return n.createElement("div",{className:"profile-quality__step profile-quality__step--poll","data-qa":"step-eye-colour"},n.createElement("ul",{className:"poll poll--radio poll--inherited"},e.options.map(function(e){
return n.createElement("li",{className:"poll__item js-select-option",key:e.value},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"radio",checked:e.checked,name:e.name,value:e.value}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.displayValue)))})))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("Living",function(e){return n.createElement("div",{className:"profile-quality__step profile-quality__step--poll","data-qa":"step-living"},n.createElement("ul",{className:"poll poll--radio poll--inherited"},e.options.map(function(e){return n.createElement("li",{className:"poll__item js-select-option",key:e.value},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"radio",defaultChecked:e.checked,name:e.name,value:e.value}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.displayValue)))})))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("Children",function(e){return n.createElement("div",{className:"profile-quality__step profile-quality__step--poll","data-qa":"step-children"},n.createElement("ul",{className:"poll poll--radio poll--inherited"},e.options.map(function(e){return n.createElement("li",{className:"poll__item js-select-option",key:e.value},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"radio",defaultChecked:e.checked,name:e.name,value:e.value}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.displayValue)))})))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("Smoking",function(e){return n.createElement("div",{className:"profile-quality__step profile-quality__step--poll","data-qa":"step-smoking"},n.createElement("ul",{className:"poll poll--radio poll--inherited"},e.options.map(function(e){return n.createElement("li",{className:"poll__item js-select-option",key:e.value},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"radio",defaultChecked:e.checked,name:e.name,value:e.value}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.displayValue)))})))})},function(e,t,i){"use strict";var n=i(98);e.exports=i(108)("Drinking",function(e){return n.createElement("div",{className:"profile-quality__step profile-quality__step--poll","data-qa":"step-drinking"},n.createElement("ul",{className:"poll poll--radio poll--inherited"},e.options.map(function(e){return n.createElement("li",{className:"poll__item js-select-option",key:e.value},n.createElement("div",{className:"poll__option"},n.createElement("input",{className:"poll__input js-input",type:"radio",defaultChecked:e.checked,name:e.name,value:e.value}),n.createElement("div",{className:"poll__icon"}),n.createElement("label",{className:"poll__label"},e.displayValue)))})))})},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(102),s=i(103),r=i(146),l=i(217),c=i(631),u=i(3548),d=i(101),h=d.ClickEvent,p=d.ViewScreenEvent,m=i(105).RedirectPage,g=(n={},(0,a.default)(n,2,726),(0,a.default)(n,104,724),n),_={START_OVER:"start-over"},f=l.extend({screenName:176,getHtpElementId_:function(e){return g[e]||725},getScreenName:function(){return this.screenName},getProfileOptionType:function(){return 0},logHotPanelEvent_:function(e){var t={element:this.getHtpElementId_(e)};o.track(h,t,!0)},redirect_:function(e){if(this.logHotPanelEvent_(e),104!==e){var t=new m;t.fromJSON({redirect_page:e}),s.navigate(r.getRouteFromRedirectPage(t),!0)}else this.trigger(_.START_OVER)},onScreenActive:function(){var e=this;c.getInstance().fetchWalkthroughEnd().spread(function(t){e.progress_=t.getPromo().getGoalProgress().getProgress(),e.getView(l.VIEW).update(t.getPromo()),100===e.progress_?e.screenName=259:e.progress>=70?e.screenName=260:e.screenName=261,o.track(p)})},getName:function(){return"end"},onScreenInit:function(){return new u(this.viewData).on(u.EVENTS.REDIRECT,this.redirect_,this)}},"ScreenController");f.EVENTS=_,e.exports=f},function(e,t,i){"use strict";var n=i(25),a=i(111),o=i(109),s=i(3549),r=a("REDIRECT"),l=o.extend({events:{"click .js-button":"onButtonClick_"},onButtonClick_:function(e,t){t=n(t),this.trigger(r.REDIRECT,t.data("redirect"))},showCompletenessValue_:function(e){var t=this;e="".concat(e,"%"),setTimeout(function(){var i=t.$el.find(".js-completeness").get(0);i&&(i.style.minWidth=e,n(i).text(e))},100)},update:function(e){var t;(t=e.toJSON()).buttons=t.buttons.reduce(function(e,t){return e[1===t.type?"primaryButton":"secondaryButton"]=t,e},{}),e=t,this.$el.html(s.render({options:e})),this.showCompletenessValue_(e.goal_progress.progress)}},"ScreenView");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(134);e.exports=i(108)("End",function(e){return n.createElement("div",{className:"profile-quality__step","data-qa":"step-final"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick-wrapper brick-wrapper--cascade brick-wrapper--cascade-reverse"},e.options.pictures.map(function(e){return n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch","data-qa":"brick"},n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({src:e.display_images,width:65}),"')")}})))}))),n.createElement("div",{className:"cta-box__header cta-box__header--sm","data-qa":"step-title"},e.options.header),n.createElement("div",{className:"cta-box__content","data-qa":"step-subtitle"},e.options.mssg),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{extraClass:"js-button",text:e.options.buttons.primaryButton.text,attrs:{"data-redirect":e.options.buttons.primaryButton.redirect_page.redirect_page,"data-qa":"primary-button"}})),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button js-button","data-redirect":e.options.buttons.secondaryButton&&e.options.buttons.secondaryButton.redirect_page.redirect_page,"data-qa":"secondary-button"},n.createElement("span",{className:"inline-button__text"},e.options.buttons.secondaryButton&&e.options.buttons.secondaryButton.text)))))))})},function(e,t,i){"use strict";var n=i(132),a=i(113),o=i(103),s=i(217),r=i(400),l=i(330),c=i(173),u=i(220),d=i(3551),h=i(105).User,p=i(256).fromUserVerifiedGet,m="verification_controller",g=s.extend({getName:function(){return"verification"},getProfileOptionType:function(){return 0},getHpScreenValue:function(){return 16},onScreenInit:function(){var e=(new c).setTemplate(d).render();return n.getSync(209).getEnabled()?this.registerController(m,new r).on(r.EVENTS.REFRESH,this.fetch_,this).on(r.EVENTS.OPTION_VERIFIED,this.onOptionVerified_,this):this.registerController(m,new l).on(l.EVENTS.REFRESH,this.fetch_,this).on(l.EVENTS.OPTION_VERIFIED,this.onOptionVerified_,this),e},onScreenActive:function(){this.fetch_()},fetch_:function(){var e=this;this.getView(s.VIEW).showLoading(),u.getInstance().get({context:104}).spread(function(t){var i=e.getController(m);n.getSync(209).getEnabled()?i.set(t):i.updateParameters({user:(new h).setUserId(a.getUserId()),verificationMethods:p(t),layout:"grid",isOwnProfile:!0,allowConfigure:!1,hideMessage:!0,context:104,destination:o.getUrl()});var r=e.getView(s.VIEW).$(".js-container");setTimeout(function(){r.html(i.parent),e.getView(s.VIEW).hideLoading()},1e3)}).catch(function(){e.getView(s.VIEW).hideLoading()})},onOptionVerified_:function(){this.fetch_(),this.getView(s.VIEW).hideLoading(),this.setComplete(!0)}},"ScreenController");g.isSupport=function(e){return 16===e},e.exports=g},function(e,t,i){"use strict";var n=i(98),a=i(99);e.exports=i(108)("Verification",function(e){return n.createElement("div",{className:"profile-quality__step","data-qa":"step-verification"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__content","data-qa":"step-subtitle"},a.get(675)),n.createElement("div",{className:"cta-box__content cta-box__content--wide js-container"})))})},function(e,t,i){"use strict";function n(e){return{label:e.getDisplayValue(),value:e.getValue()}}var a=i(100),o=i(99),s=i(128),r=i(217),l=i(3553),c=i(150),u=i(105),d=u.User,h=u.ProfileField,p=r.extend({provider_:null,workOption_:null,educationOption_:null,unsaved_:!0,getName:function(){return"work_and_education"},getProfileOptionType:function(){return 12},getHpScreenValue:function(){return 17},preloadData:function(e){var t=this;p._super.preloadData.apply(this,arguments),e.externalProviders=c.getProvider({providerContext:3,providerType:1}),e.profileEditForm.spread(function(e){t.workOption_=e[12].getPossibleValues(),t.educationOption_=e[10].getPossibleValues()})},onScreenInit:function(){return this.import_=this.import_.bind(this),this.onImported_=this.onImported_.bind(this),this.onError_=this.onError_.bind(this),this.setComplete(this.workOption_||this.educationOption_),(new l).on(l.EVENTS.CHANGE,this.onChange_,this).on(l.EVENTS.UPDATE,this.import_,this).on(l.EVENTS.RESET,this.onReset_,this).update(this.createState_())},onScreenBackground:function(){var e=this.getView(r.VIEW).getData();this.unsaved_&&(this.workOption_||this.educationOption_)&&this.save_(e.work,e.education)},createState_:function(e){if(this.workOption_||this.educationOption_){var t,i,s={work:a.map(this.workOption_,n),education:a.map(this.educationOption_,n)};return s.work.length&&((t=s.work[e?s.work.length-1:0]).selected=!0),s.education.length&&((i=s.education[e?s.education.length-1:0]).selected=!0),s.selectedWork=t,s.selectedEducation=i,s}return{connect:!0,connectText:o.get(456,"Facebook")}},onChange_:function(e){this.unsaved_=!0,this.setComplete(e.work&&"None"!==e.work||e.education&&"None"!==e.education)},onReset_:function(){this.update(this.createState_(!0)),this.save_(!1,!1),this.setComplete(!1).goToNextScreen()},import_:function(e){var t=this;this.getView(r.VIEW).showLoading(),e=e||{},c.startImport({providerContext:6,providerType:1,providerId:e.providerId,returnRoute:"work-education"}).then(this.onImported_).catch(function(e){t.getView(r.VIEW).hideLoading(),t.log.error("Work and education import failed",e),t.onError_()})},onError_:function(){this.update(this.createState_())},onImported_:function(e){if(!1!==e){this.getView(r.VIEW).hideLoading();var t=e.getPersonProfileEditForm().getOptions(),i=a.find(t,function(e){return 12===e.getType()}),n=a.find(t,function(e){return 10===e.getType()});this.workOption_=i.getPossibleValues(),this.educationOption_=n.getPossibleValues(),this.update(this.createState_()),this.setComplete(!0)}},save_:function(e,t){e=e||"",t=t||"";var i=(new d).setProfileFields([(new h).setDisplayValue(e).setValue(e).setType(12),(new h).setDisplayValue(t).setValue(t).setType(10)]);s.getInstance().set(i,[490]),this.unsaved_=!1}},"ScreenController");p.isSupport=function(e){return 17===e},e.exports=p},function(e,t,i){"use strict";var n=i(25),a=i(100),o=i(109),s=i(3554),r={CHANGE:"change",RESET:"reset",UPDATE:"update"},l=o.extend({events:{"click .js-reset":"onReset_","click .js-update":"onUpdate_","click select":"onSelectClick_"},init:function(){return this.onChange_=this.onChange_.bind(this),l._super.init.apply(this,arguments)},update:function(e){return this.$el.html(s.render(e)),this},getData:function(){var e={};return a.each(this.$el.find("select").get(),function(t){e[t.getAttribute("data-field")]=t.options[t.selectedIndex].value}),e},onUpdate_:function(){this.trigger(r.UPDATE)},onReset_:function(){this.trigger(r.RESET)},onSelectClick_:function(e){n(e.target).on("change",this.onChange_)},onChange_:function(e){n(e.target).off("change",this.onChange_).parent(".js-control").find(".js-label").text(n(e.target.selectedOptions[0]).text()),this.trigger(r.CHANGE,this.getData())}},"ScreenView");l.EVENTS=r,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(134);e.exports=i(108)("WorkAndEducation",function(e){return n.createElement("div",{className:"profile-quality__step","data-qa":"step-work-and-education"},e.connect?n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__content","data-qa":"step-subtitle"},a.get(455)),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{type:"facebook",text:e.connectText,extraClass:"js-update"}))))):null,n.createElement("form",{className:"form-uniform"},e.work?n.createElement("div",{className:"control control--select"},n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"select js-control"},n.createElement("select",{"data-field":"work",className:"select__field"},e.work.map(function(e){return n.createElement("option",{selected:e.selected?"selected":void 0,value:e.value,key:e.value},e.label)})),n.createElement("span",{className:"select__arrow"}),n.createElement("div",{className:"select__surrogate js-label"},e.selectedWork.label),n.createElement("label",{className:"control__label","data-qa":"select-label"},a.get(285))))):null,e.education?n.createElement("div",{className:"control control--select"},n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"select js-control"},n.createElement("select",{"data-field":"education",className:"select__field"},e.education.map(function(e){return n.createElement("option",{selected:e.selected?"selected":void 0,value:e.value,key:e.value},e.label)})),n.createElement("span",{className:"select__arrow"}),n.createElement("div",{className:"select__surrogate js-label"},e.selectedEducation.label),n.createElement("label",{className:"control__label","data-qa":"select-label"},a.get(286))))):null),e.connect?null:n.createElement("div",{className:"profile-quality__step-link"},n.createElement("div",{className:"step-link js-reset"},n.createElement("span",{className:"step-link__text"},a.get(451)))))})},function(e,t,i){"use strict";var n=i(100),a=i(129),o=i(113),s=i(177),r=i(167),l=i(111),c=i(171),u=i(140),d=i(157),h=i(291),p=l("ACTIVITY","FROZEN","MESSAGE"),m=[u.TYPES.VISITORS,u.TYPES.MESSAGES,u.TYPES.WANT_TO_MEET_YOU,u.TYPES.FAVOURITES],g=a.extend({cache_:null,countOfNewActivity_:0,init:function(){var e=this;this.cache_={},this.clearActivityCount(),this.resetCount_=n.debounce(this.clearActivityCount,1e4),r.getInstance().on(r.Type.PERSON_NOTICE,this.onPersonNotice_,this).on(r.Type.CHAT_MESSAGE,function(t){var i=t.getFromUser(),n=new s(t),a=!n.isRead;e.onChatMessage_(n.fromPersonId,n.displayMessage,a,i)}),d.on(d.EVENTS.MESSAGE_FROM_ME,function(t){e.onChatMessage_(t.toPersonId,t.displayMessage,!1)}).on(d.EVENTS.NEW_MESSAGE_READ,function(t,i){if(t!==o.getUserId()){var n=i.isRead?"":i.displayMessage;e.onChatMessage_(t,n,!1)}})},onPersonNotice_:function(e){var t=e.getFolder(),i=e.getIntValue();1===e.getType()&&-1!==m.indexOf(t)&&(void 0===this.cache_[t]&&(this.cache_[t]=0),this.cache_[t]<i&&this.tryFreezeOrUpdate_(t),this.cache_[t]=i)},tryFreezeOrUpdate_:function(e){this.filterIndex_!==e&&31!==this.filterIndex_||(this.countOfNewActivity_++,this.shouldFreeze()?this.trigger(p.FROZEN):this.trigger(p.ACTIVITY,e),this.resetCount_())},shouldFreeze:function(){var e=window.innerHeight||c().clientHeight,t=c().scrollHeight>e;return this.countOfNewActivity_>3&&t},onChatMessage_:function(e,t,i,n){h.findIndex(e)>-1?this.trigger(p.MESSAGE,i,e,t,n):this.tryFreezeOrUpdate_(0)},setFilterIndex:function(e){this.filterIndex_=e},setCache:function(e){this.cache_=e},clearActivityCount:function(){this.countOfNewActivity_=0}},"UpdateConnections");g.EVENTS=p,e.exports=g},function(e,t,i){"use strict";var n=i(304),a=i(129),o=i(132),s=i(103),r=i(99),l=i(113),c=i(102),u=i(208),d=i(149),h=i(3557),p=i(124),m=i(207),g=i(105),_=g.CallToAction,f=g.PromoBlock,v=i(101),E=v.ClickEvent,b=v.ViewElementEvent,y=v.ScrollElementEvent,k=a.extend({view_:null,hasState_:!1,purchasePending_:!1,init:function(){this.onSpotlightPurchased_=this.onSpotlightPurchased_.bind(this),this.view_=this.registerView(new h).on(h.ACTIONS.LAST_VISIBLE_USER,function(e,t){c.track(y,{direction:6,element:91,reached_end:t,position:e})}).on(h.ACTIONS.SELECT,this.onSpotlightItemSelect_,this),this.view_.render({sessionUser:l.getUser(),addFeature:o.getSync(35)}),n.getInstance().on(n.EVENTS.SPOTLIGHT_DIFF,this.onSpotlightDiff_,this)},setParent:function(e){this.view_.appendTo(e)},onStart:function(){this.hasState_&&this.view_.updateUser(l.getUser()),this.renderSpotlightDiff_(),this.purchasePending_=!1,c.track(b,{element:91})},onSpotlightDiff_:function(){this.isStarted()&&this.renderSpotlightDiff_()},renderSpotlightDiff_:function(){var e=n.getInstance().getSpotlightDiff();e&&0!==e.length&&(this.hasState_||"update"===e[0].ev?(this.view_.update(e),this.hasState_=!0,n.getInstance().clearSpotlightDiff()):n.getInstance().clearSpotlightDiff())},openProfile_:function(e,t,i){i&&i.id===l.getUserId()?s.navigate("own-profile",!0,null):s.navigate(e,t,i)},onSpotlightItemSelect_:function(e){d.generate();var t=e.getAttribute("data-page");return"spotlight-explanation"!==t?(this.openProfile_(t,!1,{id:e.getAttribute("data-uid")}),void c.track(E,{element:21,parentElement:91})):(this.buySpotlight_(),void c.track(E,{element:92,parentElement:91}))},buySpotlightForSharing_:function(){var e=l.getUser().getGender(),t=o.getSync(123),i=2===e?r.get(484):r.get(483),n=(t.getDisplayImages()||[]).slice(0,3);if(!n[1])return s.navigate("add-photos",{feature:123}),Promise.resolve(!1);n[1].setBadgeType(6),n[1].setSignificance(1);var a=(new _).setType(1).setText(i).setAction(9),c=(new _).setType(2).setText(t.getDisplayAction()).setAction(53),u=(new f).setButtons([a,c]).setCreditsCost(r.get(481,100)).setPromoBlockType(9).setHeader(t.getDisplayTitle()).setMssg(t.getDisplayMessage()).setOkPaymentProductType(t.getProductType()).setPictures(n);return this.showSpotlightForSharingExplanationScreen_(u),Promise.resolve(!0)},buySpotlight_:function(){var e=this;if(!this.purchasePending_){if(o.isAllowed(o.getSync(123)))return this.buySpotlightForSharing_();this.purchasePending_=!0;var t=o.getSync(35),i=t.getPaymentAmount(),n=(new m).setAction(t.getRequiredAction()).setBack(s.getUrl()).setCost(i).setFeature(35).setProductType(2).setHotPanelData({activationPlace:6,cost:i,featureType:35}).setAlbumType(2).setCallback(function(){e.purchasePending_=!1,e.buySpotlight_()});return u.handleAction(n).then(this.onSpotlightPurchased_).catch(function(t){e.onSpotlightSelectFail_()})}},onSpotlightPurchased_:function(){this.purchasePending_=!1},onSpotlightSelectFail_:function(e){p.showNotification({type:p.TYPES.ERROR,text:e})},showSpotlightForSharingExplanationScreen_:function(e){s.navigate("spotlight-for-sharing",{promoBlock:e.toJSON()})}},"Spotlight");e.exports=k},function(e,t,i){"use strict";var n=i(25),a=i(100),o=i(109),s=i(203),r=i(3558),l=i(3559),c=i(3560),u={SELECT:"select",LAST_VISIBLE_USER:"last-visible-user"},d=o.extend({userId_:null,actionQueue_:[],actionTimeout_:null,wrapper_:null,isAnimationRunning_:!1,events:{"click [data-page]":"onItemPressed_",touchend:"onTouchEnd_"},init:function(){this.onTouchEnd_=a.debounce(this.onTouchEnd_,1e3)},update:function(e){d._super.update.apply(this),this.actionQueue_=this.actionQueue_.concat(e),this.doPollActions_()},updateUser:function(e){this.$(".js-spotlight-add-action").html(c.render({userImage:e.hasProfilePhoto()&&e.getProfilePhoto().getPreviewUrl(),isMale:1===e.getGender(),isFemale:2===e.getGender()}))},render:function(e){var t=this,i=e.sessionUser;this.userId_=i.getUserId(),this.$el.html(r.render({userImage:i.hasProfilePhoto()&&i.getProfilePhoto().getPreviewUrl(),cost:e.addFeature.getDisplayComment(),isMale:1===i.getGender(),isFemale:2===i.getGender()})),this.preloadImages_(this.$el),this.wrapper_=this.$el.find(".js-spotlight-users"),this.isAnimationRunning_=!0,a.delay(function(){t.$(".js-spotlight-promo, .js-spotlight-action").addClass("is-run-animation"),setTimeout(function(){t.$(".js-spotlight-promo, .js-spotlight-action").removeClass("is-standby-animation is-run-animation"),t.onAfterAnimation_()},5e3)},300)},onAfterAnimation_:function(){this.isAnimationRunning_=!1,this.doPollActions_()},doPollActions_:function(){if(!this.isAnimationRunning_){var e=!1,t=this.actionQueue_;t.length>0&&(this.$(".js-spotlight-promo").addClass("is-invisible"),e="add"===t[0].ev||"scroll"===t[0].ev,this.doAction_(t.shift()),t.length&&"scroll"===t[0].ev&&this.doAction_(t.shift()));var i=t.length?t[0]:null;!i||"change"!==i.ev&&"update"!==i.ev?(t.length>0?this.actionTimeout_=setTimeout(this.doPollActions_,1e3):this.actionTimeout_=null,this.doAnimation_(e)):this.doPollActions_()}},doAnimation_:function(e){var t=this;if(this.wrapper_.hasClass("is-standby-animation"))this.isAnimationRunning_=!0,this.$(".js-spotlight-promo").removeClass("is-run-animation is-standby-animation"),a.defer(function(){t.wrapper_.addClass("is-run-animation")}),setTimeout(function(){t.wrapper_.removeClass("is-run-animation is-standby-animation"),t.onAfterAnimation_()},3e3);else{if(this.$(".js-item.is-run-animation").removeClass("is-run-animation is-standby-animation"),!e)return;var i=this.$(".js-item").first().addClass("is-standby-animation");if(!i.length)return;this.isAnimationRunning_=!0,a.defer(function(){i.addClass("is-run-animation"),setTimeout(t.onAfterAnimation_,1e3)})}},doAction_:function(e){var t,i,o,s,r=this;switch(e.ev){case"scroll":if(i=this.getSpotlightElement_(e.bid)){for(var c=[i];i.nextElementSibling;)i=i.nextElementSibling,c.unshift(i);a.each(c,function(e){r.wrapper_.prepend(e)})}break;case"delete":(o=this.getSpotlightElement_(e.id))&&o.remove();break;case"add":var u=this.getSpotlightElement_(e.bid),d=this.getContextFromItem_(e.item);t=l.render(d),u?n(u).after(t):this.wrapper_.prepend(t),this.preloadImages_(t);break;case"change":(s=this.getSpotlightElement_(e.item.id))&&(t=l.render(this.getContextFromItem_(e.item)),n(s).after(t),s.remove(),this.preloadImages_(t));break;case"update":this.wrapper_.empty(),a.each(e.items,function(e){var t=r.getContextFromItem_(e);r.wrapper_.append(l.render(t).get(0))}),this.preloadImages_(this.wrapper_)}},getContextFromItem_:function(e){return{id:e.id,uid:e.uid,name:e.nm,image:e.url,isOnline:1===e.status,isCurrent:String(e.uid)===this.userId_}},getSpotlightElement_:function(e){var t=this.wrapper_.children();e="".concat(e);for(var i=0,n=t.length;i<n;i++)if(t[i].getAttribute("data-spotlight-id")===e)return t[i];return null},onItemPressed_:function(e,t){return this.trigger(u.SELECT,t),!1},onTouchEnd_:function(){var e=this.$el.width(),t=this.wrapper_.find(".js-item"),i=a.findIndex(t,function(t){var i=n(t).offset();return i.left+i.width>=e});-1===i&&(i=t.length-1),this.trigger(u.LAST_VISIBLE_USER,i,i===t.length-1)},preloadImages_:function(e){e&&e.find?s(e.find(".js-preload")):this.log.error("Error preloading images in spotlight: invalid element",{element:e})}},"Spotlight");d.ACTIONS=u,e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(209),o=i(106),s=i(99);e.exports=i(108)("Spotlight",function(e){return n.createElement("div",{className:"spotlight"},n.createElement("div",{className:"spotlight_"},n.createElement("div",{className:"spotlight__action is-standby-animation js-touchable js-spotlight-action"},n.createElement("div",{className:"spotlight__item js-spotlight-add-action js-spotlight-add-after-this","data-page":"spotlight-explanation"},n.createElement("div",{className:"brick brick--squared brick--stretch","data-qa":"brick"},e.userImage?n.createElement(a,{src:e.userImage,size:70,preload:!0}):n.createElement("div",{className:"brick__icon"},e.isMale?n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}):null,e.isFemale?n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}):null),n.createElement("div",{className:"brick__badge brick__badge--br"},n.createElement(o,{name:"badge-plus-red",size:"md",shadow:!0}))))),n.createElement("div",{className:"spotlight__content"},n.createElement("div",{className:"spotlight__promo is-standby-animation js-spotlight-promo"},n.createElement("div",{className:"card"},n.createElement("div",{className:"card__image"}),n.createElement("div",{className:"card__content"},n.createElement("div",{className:"card__summary"},s.get(492)),n.createElement("div",{className:"card__hint"},e.cost)))),n.createElement("div",{className:"spotlight__users is-standby-animation js-spotlight-users"}))))})},function(e,t,i){"use strict";var n=i(98),a=i(209);e.exports=i(108)("SpotlightUser",function(e){return n.createElement("div",{className:"spotlight__item js-item","data-page":"spot","data-uid":e.uid,"data-spotlight-id":e.id},n.createElement("div",{className:"brick brick--squared brick--stretch ".concat(e.isCurrent?" brick--halo-red ":""),"data-qa":"brick"},n.createElement(a,{src:e.image,size:70,preload:!0})))})},function(e,t,i){"use strict";var n=i(98),a=i(166),o=i(106);e.exports=i(108)("SpotlightAction",function(e){return n.createElement("div",{className:"brick brick--squared brick--stretch","data-qa":"brick"},e.userImage?n.createElement("div",{className:"brick__image",style:{backgroundImage:"url('".concat(a({src:e.userImage,width:70}),"')")}}):n.createElement("div",{className:"brick__icon"},e.isMale?n.createElement(o,{name:"avatar-placeholder-male",size:"stretch"}):null,e.isFemale?n.createElement(o,{name:"avatar-placeholder-female",size:"stretch"}):null),n.createElement("div",{className:"brick__badge brick__badge--br"},n.createElement(o,{name:"badge-plus-red",size:"md",shadow:!0})))})},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(25),s=i(100),r=i(99),l=i(109),c=i(5),u=i(126),d=i(98),h=i(3562),p=i(3563),m=i(3573),g=i(3574),_=i(3576),f=i(291),v=i(111),E=i(282),b=i(176),y=i(131),k=i(102),S=i(274),w=i(3580),C=i(3582),T=i(422),P=i(184),N=i(125).getLogger("Connections"),I=i(105).User,x=i(101),A=x.ClickEvent,O=x.ElementStatusEvent,V=x.ViewElementEvent,R=v("TOGGLE_FILTERS","CLOSE_FILTER","SELECT_FILTER","NEED_PAGE","SELECT_ITEM","FAVOURITE","BLOCKING_ACTION","ITEM_VISIBLE","BANNER_VISIBLE","START_SEARCH","SEARCH","CANCEL_SEARCH","RESET_SEARCH","UPDATE","REMOVE_USERS","TOGGLE_MODE","USER_LIST_BECAME_EMPTY","EDIT_MODE_OPENED","EDIT_MODE_CANCELLED","PROMO_VIDEO_SEEN"),B=(n={},(0,a.default)(n,31,245),(0,a.default)(n,4,249),(0,a.default)(n,8,247),(0,a.default)(n,6,248),(0,a.default)(n,0,246),n),L="js-mw-connections-item--is-checked",F=l.extend({events:{"click .js-cancel-search":"onCancelSearch_","click .js-reset-search":"onResetSearch_","click .js-connections-button-remove":"onRemoveUsers_","click .js-button-edit":"toggleEditMode"},filters_:null,hasMore_:!1,currentFilter_:0,lastVisibleElement_:null,searchInput_:null,isSearch_:!1,markedUserIds_:null,init:function(){(!o.os.ios7&&!o.os.ios8||c.isAndroidAfter_4_4_2())&&(this.filtersAnimation=new w)},actuallyReady:function(){this.trackShowingButton_(),this.manageFiltersAnimation_(!0)},enable:function(){F._super.enable.apply(this,arguments),this.lastVisibleElement_=null,this.updateList(),this.renderNewActivityButton_(),P.refresh(P.placements.CONNECTIONS)},disable:function(){F._super.disable.apply(this,arguments),this.lastVisibleElement_=null,this.removeReactView(this.$(".js-items")[0]),this.manageFiltersAnimation_(!1),this.renderNewActivityButton_()},manageFiltersAnimation_:function(e){var t=this;this.filtersAnimation&&(e?this.filtersAnimation.attach(this.$el,function(){t.manageFiltersAnimation_(!1),t.filtersExpanded_=!0,t.renderFilters(),t.trigger(R.TOGGLE_FILTERS,!0,!1)}):this.filtersAnimation.detach())},setFilters:function(e){return this.filters_=e.map(function(e){return Object.assign({},e)}),this.filters_[this.currentFilter_].isActive=!0,this},showLoading:function(){this.$(".js-container").addClass("is-loading")},hideLoading:function(){this.$(".js-container").removeClass("is-loading")},showNextPageLoading:function(){this.updateList({isLoading:!0})},scrollHandler_:function(e){var t=this.calculateLastVisibleItemIndex_(e);t>-1&&this.options.trackScroll(t)},updateAutoOpenFilters:function(e){this.autoOpenFilters_=e},update:function(e){var t=!1;"folderIsEmpty"in e&&(this.showEmptyFolder_(e.folderIsEmpty),this.updateFilters_(e.filters)),e.cancelSearch&&this.cancelSearch_(),"popularityLevel"in e&&this.$(".js-popularity").html(T.render({popularity:E.getLevel(e.popularityLevel)})),"selectedFilterIndex"in e&&this.updateSelectedFilter_(e.selectedFilterIndex),"hasMore"in e&&(this.hasMore_=e.hasMore,t=!0),e.hasItems&&(this.renderDataItems_(e),t=!0),"updatedItem"in e&&(this.renderUpdatedItem_(e),t=!0),"updatedBadges"in e&&(this.updateFilterBadges_(e.updatedBadges),this.filtersExpanded_=!1,this.renderFilters()),t&&this.updateList(),"hideEditButton"in e&&o(".js-button-edit").toggleClass("is-hidden",e.hideEditButton)},renderEmptyScreen_:function(e){var t,i;20===e.getPromoBlockPosition()&&(t=12===e.getPromoBlockType()?"zero-photos":"zero-conversations");var n,a=e.getButtons([])[0];a&&(i={text:a.getText(),onClick:this.onBlockingAction_.bind(this,e,0)});var o=e.getButtons([])[1];o&&(n={text:o.getText(),onClick:this.onBlockingAction_.bind(this,e,1)}),this.renderReactView(d.createElement(m,{icon:t,title:e.getHeader(),message:e.getMssg(),buttonPrimary:i,buttonSecondary:n}),this.$(".js-empty")[0]),this.onBannerVisible_(e)},updateList:function(e){var t=this,i=f.getItems(),n={items:i,isLoading:!1,isEditing:this.isEditing_,onSelectItem:this.onSelectItem_,onFavouriteItem:this.onFavourite_,onItemVisible:this.onItemVisible_,onBannerVisible:this.onBannerVisible_,maxCounter:99,currentFilter:this.filters_[this.currentFilter_],getUserSubstitute:this.options.getUserSubstitute},a=Object.assign(n,e),o=this.$(".js-items")[0];this.renderReactView(d.createElement(h,{items:i,scrollHandler:this.scrollHandler_,fetchNewPage:function(){t.hasMore_&&t.trigger(R.NEED_PAGE)}},d.createElement(p,a)),o),y.onTransitionEnd(this.$el.find(".js-mw-connections-item.mw-connections-item--is-added-hack")[0],function(){f.removeUpdatedFlags()})},updateUser:function(e,t,i,n,a){var o=f.findIndex(t);if(-1!==o){var s=f.get(o).object;i&&s.setDisplayMessage(i),S.mergeUser(s,n),s.setUnreadMessagesCount(e?s.getUnreadMessagesCount(0)+1:0),this.update({index:o,moveUserToTop:!a,updatedItem:s})}},showEmptyFolder_:function(e){this.removeReactView(this.$(".js-items")[0]),f.initialise(),window.scroll(0,0);var t=e.getPromoBlockPosition&&20===e.getPromoBlockPosition();this.$(".js-container").toggleClass("is-empty",!this.isSearch_).toggleClass("is-empty-fullscreen",!this.isSearch_&&t).toggleClass("is-searching-empty",this.isSearch_).find(".js-button-edit").addClass("is-hidden"),this.isSearch_||this.renderEmptyScreen_(e)},cancelSearch_:function(){this.isSearch_=!1,this.$(".js-container").removeClass("is-searching is-searching-loading is-searching-empty"),this.searchInput_.get(0).value=""},updateSelectedFilter_:function(e){this.filters_[this.currentFilter_].isActive=!1,this.filters_[e].isActive=!0,this.currentFilter_=e,this.manageFiltersAnimation_(!0),this.filtersExpanded_=!1,this.renderFilters()},renderDataItems_:function(e){this.$(".js-container").removeClass("is-empty is-searching-empty is-empty-fullscreen").find(".js-button-edit").removeClass("is-hidden"),e.shouldGetNextPage||e.isUpdates||(this.toggleUpdateButton(!1),this.lastVisibleElement_=null,window.scroll(0,0),this.updateFilters_(e.filters))},renderUpdatedItem_:function(e){var t=e.updatedItem,i=void 0===e.index?f.findIndex(t):e.index,n=f.get(i);if(!n)return!1;n.object=t;var a=f.hasTopMostPromo(),o=0===i||1===i&&a;e.moveUserToTop&&!o?(n.isUpdate=!0,f.moveItemToTop(n,i)):f.replaceItem(n,i)},toggleEditMode:function(){this.setEditMode(!this.isEditing_)},setEditMode:function(e){this.markedUserIds_=[],this.isEditing_=e,this.elRemoveButton_=this.$(".js-connections-button-remove").addClass("disabled"),
this.elItemsWrapper_=this.$(".js-items"),this.$el.toggleClass("is-editing",e),this.$(".js-connections-actions-edit").toggleClass("is-inactive",!e),this.$(".js-switch-mode").html(this.getEditButtonText_()),this.$(".".concat("js-button-edit")).html(this.getEditButtonText_()),e||(this.elItemsWrapper_.find(".".concat(L)).removeClass(L),f.getItems().forEach(function(e){e.hasOwnProperty("isChecked")&&delete e.isChecked})),this.updateList(),this.trigger(e?R.EDIT_MODE_OPENED:R.EDIT_MODE_CANCELLED)},getEditButtonText_:function(){return this.isEditing_?r.get(23):r.get(24)},onRemoveUsers_:function(){var e=this;if(this.markedUserIds_.length){var t=this.elItemsWrapper_.find(".".concat(L));y.onTransitionEnd(t.get(0),function(){e.trigger(R.REMOVE_USERS,e.markedUserIds_)}),t.addClass("is-deleted")}},onSelectItem_:function(e){var t=f.findIndex(e),i=f.get(t);if(void 0!==i){if(this.isEditing_){if(!(i.object instanceof I)||i.object.getIsInvisible()||30===i.object.getAccessLevel())return;var n=this.markedUserIds_.indexOf(e.getUserId());-1===n?(this.markedUserIds_.push(e.getUserId()),i.isChecked=!0):(this.markedUserIds_.splice(n,1),delete i.isChecked),f.replaceItem(i,t),this.updateList(),this.elRemoveButton_.toggleClass("disabled",!this.markedUserIds_.length)}else i.isChecked||this.trigger(R.SELECT_ITEM,e,t);return!1}N.error("Connections - user clicked on an item which is undefined: ".concat(e))},updateFilters_:function(e){var t=this;e&&0!==e.length&&(this.filters_.forEach(function(i){i.enabled=!1,e.forEach(function(e){1===e.getType()?i.model.folderId===e.getFolder()&&i.model.activityFilter===e.getFilter()&&(i.title=e.getName(),i.enabled=!0):2===e.getType()&&(t.searchTitle_=e.getName())})}),this.filtersExpanded_=!1,this.renderFilters())},onFilterSelect_:function(e){this.filtersExpanded_=!1,this.renderFilters();var t=this.filters_.findIndex(function(t){return t.param===e});this.update({selectedFilterIndex:t}),this.trigger(R.SELECT_FILTER,t)},onFilterClose_:function(){this.filtersExpanded_=!1,this.renderFilters(),this.manageFiltersAnimation_(!0),this.trigger(R.CLOSE_FILTER)},onFilterToggle_:function(){this.autoOpenFilters_=!1,this.filtersExpanded_=!this.filtersExpanded_,this.renderFilters(),this.manageFiltersAnimation_(!this.filtersExpanded_),this.trigger(R.TOGGLE_FILTERS,this.filtersExpanded_,!1)},onFilterSearch_:function(){var e=this;this.filtersExpanded_=!1,this.renderFilters(),this.isSearch_||(this.isSearch_=!0,this.cleanSearch_(),this.trigger(R.START_SEARCH),setTimeout(function(){e.searchInput_.focus(),window.scrollTo(0,0)},0))},renderFilters:function(){var e=0,t={},i=this.filters_.filter(function(e){return e.enabled}).map(function(i){var n={elementType:i.elementType,filterType:i.param,title:i.title,count:i.count,isDefault:i.isDefault,isActive:i.isActive};return n.isDefault?t=n:n.count&&(e+=n.count),n});t.count=e,this.autoOpenFilters_&&(this.filtersExpanded_=!0),this.filtersExpanded_&&function(e){e.forEach(function(e){k.track(O,{element:e.elementType,active:Boolean(e.isActive),attention:Boolean(e.count),count:e.count||0})})}(i),this.renderReactView(d.createElement(_,{isExpanded:this.filtersExpanded_,filters:i,searchTitle:this.searchTitle_,onClose:this.onFilterClose_,onSearch:this.onFilterSearch_,onToggle:this.onFilterToggle_,onSelect:this.onFilterSelect_}),this.$(".js-react-filters")[0])},updateUnreadBadges:function(e){var t=this;e.forEach(function(e){var i=f.findIndex(e);i>-1&&t.update({updatedItem:e,index:i})})},render:function(e){var t={filters:this.filters_,partner_id:u.get("partner_id")};c.supportsTabBar&&(t.navigationActions={menu:!1},t.noMenu={text:this.getEditButtonText_()}),this.$el.html(C.render(s.assign(t,e))),this.toggleScroll_&&this.toggleScroll_.destroy();var i=this.$(".js-scroll-toggle");i&&i.length&&(this.toggleScroll_=new b(i)),this.removeReactView(this.$(".js-empty")[0]),this.showLoading(),this.searchInput_=this.$el.find(".js-search-input"),this.searchInput_[0].addEventListener("input",this.onSearchInput_)},calculateLastVisibleItemIndex_:function(e){var t=this.lastVisibleElement_||this.$(".js-items").children().children().first();if(!t||!t.length)return-1;for(e+=document.documentElement.offsetHeight;t&&t.length;){var i=t.next();if(i.index()<0||o(i).hasClass("js-loader"))break;var n=i.offset();if(n.top+n.height>e)break;t=i}return this.lastVisibleElement_=t,t.index()},updateFilterBadges_:function(e){var t=this;e.forEach(function(e){var i=Number(e.folder),n=Number(e.filter),a=null;a=n?s.find(t.filters_,{model:{activityFilter:n}}):s.find(t.filters_,{folderType:i}),0===e.value&&(e.value=null),a&&"count"in a&&a.count!==e.value&&(a.count=e.value)})},onSearchInput_:function(){if(document.activeElement===this.$(".js-search-input")[0]){var e=this.searchInput_.get(0).value;this.isSearch_=!0,e.length<3?this.cleanSearch_():this.trigger(R.SEARCH,e)}},cleanSearch_:function(){this.$(".js-container").addClass("is-searching is-empty").removeClass("is-searching-loading is-searching-empty")},onResetSearch_:function(){this.update({folderIsEmpty:!0}),this.searchInput_.get(0).value="",this.searchInput_.focus(),this.trigger(R.RESET_SEARCH)},onCancelSearch_:function(){this.isSearch_&&(this.update({cancelSearch:!0}),this.trigger(R.CANCEL_SEARCH))},onBlockingAction_:function(e,t){this.trigger(R.BLOCKING_ACTION,{promoBlock:e,buttonIndex:t})},onFavourite_:function(e){this.trigger(R.FAVOURITE,e)},onItemVisible_:function(e){this.trigger(R.ITEM_VISIBLE,e)},onBannerVisible_:function(e){this.trigger(R.BANNER_VISIBLE,e)},onClickUpdateButton_:function(){this.toggleUpdateButton(!1),this.trigger(R.UPDATE),k.track(A,{element:this.getHotpanelElement_()})},toggleUpdateButton:function(e){this.trackPending_=e,this.trackShowingButton_(),this.newActivityButtonVisible_=e,this.renderNewActivityButton_()},renderNewActivityButton_:function(){this.renderReactView(d.createElement(g,{isVisible:this.isEnabled()&&this.newActivityButtonVisible_,fixedHeight:this.$(".js-connections-header")[0].clientHeight,onClick:this.onClickUpdateButton_,container:this.$(".js-new-activity-button")[0]}),this.$(".js-new-activity-button")[0])},trackShowingButton_:function(){this.isEnabled()&&this.trackPending_&&this.isButtonShowed_&&k.track(V,{element:this.getHotpanelElement_()}),this.isButtonShowed_=this.trackPending_},getHotpanelElement_:function(){var e=this.filters_[this.currentFilter_];return B[e.folderType]}},"ConnectionsView");F.EVENTS=R,e.exports=F},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(123)),c=n(i(116)),u=i(98),d=i(100),h=i(171),p=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).scrollsSkipped_=0,i.hasStarted=!1,i.onScroll=d.throttle(i.onScroll.bind((0,l.default)(i)),250),i}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!1)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.scrollHandlerTimeout_),window.removeEventListener("scroll",this.onScroll,!1)}},{key:"componentDidUpdate",value:function(){if(!this.hasStarted&&this.props.items.length>0){this.hasStarted=!0;var e=document.body.pageYOffset||h().scrollTop;this.props.scrollHandler(e)}}},{key:"onScroll",value:function(){var e=this,t=document.body.pageYOffset||h().scrollTop,i=document.body.innerHeight||document.body.clientHeight,n=h().scrollHeight-i-.5*i;t>=n&&this.props.fetchNewPage(),clearTimeout(this.scrollHandlerTimeout_),this.scrollsSkipped_+=1,this.props.scrollHandler&&this.scrollsSkipped_>5?(this.scrollsSkipped_=0,this.props.scrollHandler(t)):this.scrollHandlerTimeout_=setTimeout(function(){e.props.scrollHandler(t)},500)}},{key:"render",value:function(){return u.Children.only(this.props.children)}}]),t}(u.Component);e.exports=p},function(e,t,i){"use strict";var n=i(98),a=i(129),o=i(3564),s=i(411),r=i(3565),l=i(3572),c=i(416),u=i(125).getLogger("ConnectionsList"),d=i(105),h=d.PromoBlock,p=d.User;e.exports=function(e){var t=e.items,i=e.onSelectItem,d=e.onFavouriteItem,m=e.isLoading,g=e.onItemVisible,_=e.onBannerVisible,f=e.maxCounter,v=e.currentFilter,E=e.isEditing,b=e.getUserSubstitute;return t?n.createElement("div",null,n.createElement(c,{render:function(e){var s=e.observe,c=e.unobserve;return n.createElement(l,null,t.map(function(e){var t=e.observe,s=e.unobserve;return function(e){var l=e.object,c=e.key,m=e.isUpdate,y=e.isChecked,k=l instanceof p||l instanceof h;return l instanceof a?n.createElement(o,{key:c,controller:l,onVisible:_,observe:t,unobserve:s}):k?n.createElement(r,{key:c,item:l,onClick:i,onFavourite:d,onVisible:g,onBannerVisible:_,isUpdate:m,observe:t,unobserve:s,maxCounter:f,currentFilter:v,isChecked:y,isEditing:E,getUserSubstitute:b}):(u.error("Connections - trying to render an unexpected item: ".concat(l)),null)}}({observe:s,unobserve:c})))}}),m?n.createElement(s,{relative:!0,size:"small",color:"dark",extraClass:"js-loader"}):null):null}},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(123)),c=n(i(116)),u=i(98),d=i(117),h=i(25),p=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).viewed=!1,i.checkVisibility=i.checkVisibility.bind((0,l.default)(i)),i}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.props.controller.setParent(h(this.el)),this.props.observe(this.el,this.checkVisibility)}},{key:"componentWillUnmount",value:function(){this.props.unobserve(this.el)}},{key:"checkVisibility",value:function(e){e.isIntersecting&&!this.viewed&&(this.props.unobserve(this.el),this.props.onVisible(this.props.controller),this.viewed=!0)}},{key:"render",value:function(){var e=this,t=this.props.controller.isGoogleAd(),i=d({"connections-item":!0,"connections-item--banner-ad":t,banner:!0});return u.createElement("div",{className:i,"data-qa":"connections-item","data-qa-connections-item-type":"promo",ref:function(t){e.el=t}},u.createElement("span",{className:"connections__fader"}),u.createElement("span",{className:"b-link"}))}}]),t}(u.Component);e.exports=p},function(e,t,i){"use strict";var n=i(3),a=n(i(127)),o=n(i(110)),s=n(i(112)),r=n(i(114)),l=n(i(115)),c=n(i(123)),u=n(i(116)),d=i(98),h=i(105),p=h.User,m=h.PromoBlock,g=i(101).ViewConnectionEvent,_=i(102),f=i(125),v=i(204),E=i(3566),b=i(3567),y=i(3568),k=i(3569),S=i(3570),w=i(3571),C=f.getLogger("ConnectionsItenContainer"),T=w.getUserItemProps,P=w.getActivityItemProps,N=w.getConnectionStatus,I=w.getUserBadgeNum,x=w.trackViewBannerPromoCard,A=w.trackElementStatus,O=function(e){function t(e){var i;return(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).refEl=null,i.handleClick=i.handleClick.bind((0,c.default)(i)),i.handleLikedYouClick=i.handleLikedYouClick.bind((0,c.default)(i)),i.handleFavourite=i.handleFavourite.bind((0,c.default)(i)),i.handleRef=i.handleRef.bind((0,c.default)(i)),i.checkVisibility=i.checkVisibility.bind((0,c.default)(i)),i.state=i.getState(e),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getState",value:function(e){var t=(e||{}).item,i=t instanceof p,n=t instanceof m&&1===t.getPromoBlockPosition()&&2===t.getStatsVariationId(),a=t instanceof m&&1===t.getPromoBlockPosition()&&326===t.getPromoBlockType(),o=t instanceof m&&4===t.getPromoBlockPosition()&&21===t.getPromoBlockType();return{isUser:i,isLikedYou:n,isMoreLikesPromo:a,isVideoPromo:o,isPromo:a||o,isConnectionItem:t instanceof m}}},{key:"componentDidMount",value:function(){this.updateObserver()}},{key:"componentDidUpdate",value:function(){this.updateObserver()}},{key:"componentWillUnmount",value:function(){this.props.unobserve(this.refEl)}},{key:"handleClick",value:function(){var e=this.props;(0,e.onClick)(e.item)}},{key:"handleLikedYouClick",value:function(e){var t=this;return function(){t.handleClick(),A(Number(e))}}},{key:"handleFavourite",value:function(e){e.stopPropagation();var t=this.props;(0,t.onFavourite)(t.item)}},{key:"handleRef",value:function(e){this.refEl=e}},{key:"updateObserver",value:function(){this.props.item instanceof p||this.props.item instanceof m?this.isObserved||(this.isObserved=!0,this.props.observe(this.refEl,this.checkVisibility)):this.props.unobserve(this.refEl)}},{key:"checkVisibility",value:function(e){var t=this.props,i=t.item,n=t.getUserSubstitute,a=t.currentFilter,o=t.unobserve,s=t.onVisible,r=t.onBannerVisible;if(e.isIntersecting&&i instanceof p){var l=i;if(3===l.getType())x(n(l.getUserId()));else{var c=a;_.track(g,{encrypted_user_id:l.getUserId(),activation_place:c.activationPlace||1,badge_count:I(l,c),connection_status:N(l)})}o(this.refEl);var u=i.getIsUnread(),d=!0===i.getIsVisitor();u&&d&&s(i)}e.isIntersecting&&i instanceof m&&(o(this.refEl),r&&r(i))}},{key:"renderUser",value:function(){var e=this,t=T(this.props),i=t.user,n=t.badge,o=t.message,s=t.isChecked,r=t.isLocked,l=t.isDisabled,c=t.isFavouriteAllowed,u=t.isAddedHACK;return d.createElement(v,{src:i.photo&&i.photo.src,render:function(t){var h=t.src,p=(0,a.default)({},i,{photo:h?{src:h}:null});return d.createElement(E,{user:p,badge:n,message:o,isChecked:s,isLocked:r,isDisabled:l,isFavouriteAllowed:c,isAddedHACK:u,onClick:e.handleClick,onFavourite:e.handleFavourite,innerRef:e.handleRef})}})}},{key:"renderLikedYou",value:function(){var e=this.props.item,t=P(this.props),i=t.title,n=t.isDisabled,a=e.getExtraTexts()&&e.getExtraTexts()[0].getText(),o=e.getPictures([]).map(function(e){return e.getDisplayImages()});return d.createElement(S,{counter:a,title:i,images:o,isDisabled:n,onClick:this.handleLikedYouClick(a),innerRef:this.handleRef})}},{key:"renderPromo",value:function(){var e=this.props.item,t=P(this.props),i=t.title,n=t.isDisabled,a=21===e.getPromoBlockType(),o={name:a?"generic-media-play-hollow":"badge-feature-liked-you"},s=a?null:{mark:{text:e.getExtraTexts()&&e.getExtraTexts()[0].getText()}},r=a?k:y;return d.createElement(r,{icon:o,badge:s,title:i,isDisabled:n,onClick:this.handleClick,innerRef:this.handleRef})}},{key:"renderConnectionItem",value:function(){var e=P(this.props),t=e.activity,i=e.counter,n=e.title,a=e.message,o=e.isDisabled,s=e.isAddedHACK;return d.createElement(b,{activity:t,counter:i,title:n,message:a,isDisabled:o,isAddedHACK:s,onClick:this.handleClick,innerRef:this.handleRef})}},{key:"render",value:function(){var e=this.state,t=e.isUser,i=e.isLikedYou,n=e.isPromo,a=e.isConnectionItem;return t?this.renderUser():i?this.renderLikedYou():n?this.renderPromo():a?this.renderConnectionItem():(C.error("Connections - trying to render an unexpected item: ".concat(this.props.item)),null)}}]),t}(d.Component);e.exports=O},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(117),s=i(147),r=i(191),l=i(193),c=i(192),u=i(277),d=i(163),h=i(230),p=i(106),m=i(120).P1,g={user:a.shape({isFavourite:a.bool}).isRequired,badge:a.object,halo:a.object,message:a.string,isChecked:a.bool,isLocked:a.bool,isDisabled:a.bool,isFavouriteAllowed:a.bool,onClick:a.func,onFavourite:a.func,innerRef:s.ref},_=function(e){var t,i=e.user,a=e.badge,s=e.halo,g=e.message,_=e.isChecked,f=e.isLocked,v=e.isDisabled,E=e.isFavouriteAllowed,b=e.onClick,y=e.onFavourite,k=e.innerRef,S=e.isAddedHACK,w=o({"csms-connections-item":!0,"csms-connections-item--user":!0,"csms-connections-item--disabled":v,"js-mw-connections-item":!0,"js-mw-connections-item--is-checked":!v&&_,"mw-connections-item--is-added-hack":S}),C=o({"csms-connections-item__favourite":!0,"csms-is-active":i.isFavourite});return _&&(t={children:n.createElement(p,{name:"generic-tick",size:"lg"}),background:"primary"}),n.createElement("div",{className:w,onClick:b,"data-qa":"connections-item","data-qa-connections-item-type":"user","data-qa-blocking-promo":f?"locked":null,ref:k},n.createElement(r,null,n.createElement(l,null,n.createElement("div",{className:"csms-connections-item__media"},n.createElement(d,{size:"sm",user:i,badge:a,halo:s,overlay:t}))),n.createElement(c,null,n.createElement("div",{className:"csms-connections-item__profile"},n.createElement(m,null,n.createElement(h,{name:i.name,age:i.age,status:i.status}))),g?n.createElement("div",{className:"csms-connections-item__message","data-qa":"csms-connections-item__message"},n.createElement(m,{ellipsis:!0,dangerous:!0},g)):null),E?n.createElement(u,null,n.createElement("div",{className:C,onClick:y,"data-qa":"favourite","data-qa-favourited":i.isFavourite?"true":"false"},n.createElement(p,{name:i.isFavourite?"generic-star":"generic-star-outlined",size:"sm"}))):null))};_.propTypes=g,_.defaultProps={isChecked:!1,isLocked:!1,isDisabled:!1,isFavouriteAllowed:!0},e.exports=_},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(117),s=i(147),r=i(191),l=i(193),c=i(192),u=i(163),d=i(120).P1,h={activity:a.oneOf(["favourited-you","liked-you","visited-you","mini-game"]).isRequired,counter:a.string.isRequired,title:a.string.isRequired,message:a.string,isDisabled:a.bool,onClick:a.func,innerRef:s.ref,isAddedHACK:a.bool},p=function(e){var t=e.activity,i=e.counter,a=e.title,s=e.message,h=e.isDisabled,p=e.onClick,m=e.innerRef,g=e.isAddedHACK,_=o({"csms-connections-item":!0,"csms-connections-item--batched":!0,"csms-connections-item--disabled":h,"js-mw-connections-item":!0,"mw-connections-item--is-added-hack":g}),f={name:"connections-folder-".concat(t)},v={position:"br",mark:{text:i}};return n.createElement("div",{className:_,onClick:p,"data-qa":"connections-item","data-qa-connections-item-type":"activity",ref:m},n.createElement(r,null,n.createElement(l,null,n.createElement("div",{className:"csms-connections-item__media"},n.createElement(u,{size:"sm",icon:f,badge:v}))),n.createElement(c,null,n.createElement("div",{className:"csms-connections-item__title","data-qa":"connections-item__title"},n.createElement(d,{dangerous:!0},a)),s?n.createElement("div",{className:"csms-connections-item__message","data-qa":"csms-connections-item__message"},n.createElement(d,{dangerous:!0},s)):null)))};p.propTypes=h,p.defaultProps={isDisabled:!1},e.exports=p},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(117),s=i(147),r=i(191),l=i(193),c=i(192),u=i(163),d=i(106),h=i(120).P1,p={image:a.object,icon:a.object,user:a.object,badge:a.object,title:a.string,message:a.string,action:a.string,isProcessing:a.bool,isDisabled:a.bool,onClick:a.func,innerRef:s.ref},m=function(e){var t,i=e.image,a=e.icon,s=e.user,p=e.badge,m=e.title,g=e.message,_=e.action,f=e.isProcessing,v=e.isDisabled,E=e.onClick,b=e.innerRef,y=o({"csms-connections-item":!0,"csms-connections-item--promo":!0,"csms-connections-item--disabled":v});return f&&(t={children:n.createElement(d,{name:"loading-dots",size:"lg"}),background:"dark"}),n.createElement("div",{className:y,onClick:E,"data-qa":"connections-item","data-qa-connections-item-type":"promo",ref:b},n.createElement(r,null,n.createElement(l,null,n.createElement("div",{className:"csms-connections-item__media"},n.createElement(u,{size:"sm",image:i,icon:a,user:s,badge:p,overlay:t}))),n.createElement(c,null,m?n.createElement("div",{className:"csms-connections-item__title"},n.createElement(h,{dangerous:!0},m)):null,g?n.createElement("div",{className:"csms-connections-item__message","data-qa":"csms-connections-item__message"},n.createElement(h,{dangerous:!0},g)):null,_?n.createElement("div",{className:"csms-connections-item__action"},n.createElement(h,null,_)):null)))};m.propTypes=p,m.defaultProps={isProcessing:!1,isDisabled:!1},e.exports=m},function(e,t,i){"use strict";var n=i(98),a=i(117),o=i(191),s=i(193),r=i(192),l=i(163),c=i(120).P1;e.exports=function(e){var t=e.icon,i=e.title,u=e.innerRef,d=e.onClick,h=a({"csms-connections-item":!0,"csms-connections-item--promo-video":!0});return n.createElement("div",{className:h,"data-qa":"connections-item","data-qa-connections-item-type":"promo-video","data-qa-feature-card":!0,onClick:d,ref:u},n.createElement(o,null,n.createElement(s,null,n.createElement("div",{className:"liked-you-media"},n.createElement(l,{size:"sm",icon:t}))),n.createElement(r,null,n.createElement("div",{"data-qa":"connections-item__title"},n.createElement(c,{color:"black",dangerous:!0},i)))))}},function(e,t,i){"use strict";var n=i(98),a=i(117),o=i(191),s=i(193),r=i(192),l=i(320),c=i(120).P1;e.exports=function(e){var t=e.images,i=e.counter,u=e.title,d=e.isDisabled,h=e.innerRef,p=e.onClick,m=a({"csms-connections-item":!0,"csms-connections-item--disabled":d}),g=a({"liked-you-media__image":!0,"liked-you-media__image--multiple":t.length>3}),_=t.length>3?t.map(function(e){return"url(".concat(e,")")}).toString():"url(".concat(t[0],")");return n.createElement("div",{className:m,"data-qa":"connections-item","data-qa-connections-item-type":"liked-you","data-qa-feature-card":!0,onClick:p,ref:h},n.createElement(o,null,n.createElement(s,null,n.createElement("div",{className:"liked-you-media"},n.createElement("div",{className:g,style:{backgroundImage:_}}),n.createElement("div",{className:"liked-you-media__badge"},n.createElement(l,{text:i,shadow:!0})))),n.createElement(r,null,n.createElement("div",{"data-qa":"connections-item__title"},n.createElement(c,{color:"black",dangerous:!0},u)))))}},function(e,t,i){"use strict";function n(e,t,i){var n,a;return t&&(n={name:"badge-feature-liked-you",size:"md"}),i&&(n={name:"badge-feature-crush",size:"md"}),e&&(a={text:String(e)}),{position:void 0,icon:n,mark:a}}var a,o,s=i(3),r=s(i(127)),l=s(i(107)),c=i(101),u=c.ViewBannerEvent,d=c.ElementStatusEvent,h=i(169),p=i(125),m=i(102),g=p.getLogger("ConnectionsItenContainer"),_=(a={},(0,l.default)(a,1,"online"),(0,l.default)(a,2,"idle"),a),f=(o={},(0,l.default)(o,1,"male"),(0,l.default)(o,2,"female"),o),v=["","chats","conversations","unreplied","favourites","online"];e.exports.getUserItemProps=function(e){var t=e.item,i=e.currentFilter,a=e.maxCounter,o=e.isChecked,s=e.isEditing,r=e.isUpdate,l=t,c=l.hasProfilePhoto()&&""!==l.getProfilePhoto().getPreviewUrl()&&h.getImageUrlForSize(l.getProfilePhoto().getPreviewUrl(),70),u=l.getIsDeleted(),d=l.getIsInvisible(),p=l.getIsUnread(),m=!d&&30!==l.getAccessLevel(),g=String(l.getUserId()%9+1);if(isNaN(g)){var E=parseInt(l.getUserId().substr(40),16);g=String(E%9+1)}var b,y,k=c||u?null:{letter:l.getName()?l.getName().charAt(0):"",variant:g},S=l.getUnreadMessagesCount(0),w=S>0&&v.indexOf(i.param)>-1,C=l.getIsCrush(),T=!w&&!C&&p&&l.getIsMatch();return T||C||!w?T||C||!p||(b=1):b=S<=a?S:"".concat(a,"+"),C&&"favourites"===i.param&&(b=1,C=!1),u?y="deleted":d&&(y="invisible"),{user:{name:l.getName(),age:l.getAge(),gender:f[l.getGender()],isFavourite:l.getIsFavourite(),disguise:y,photo:c?{src:c}:null,placeholder:k,status:{online:_[l.getOnlineStatus()]}},badge:n(b,T,C),message:l.getDisplayMessage(),isChecked:o,isLocked:l.hasProfileBlockerPromo(),isDisabled:s&&!m,isFavouriteAllowed:!s&&l.getAllowAddToFavourites(!1),isAddedHACK:r}},e.exports.getUserBadge=n,e.exports.getActivityItemProps=function(e){var t,i=e.item,n=e.isEditing,a=e.isUpdate,o=e.maxCounter,s=i;switch(s.getPromoBlockType()||s.experimentType){case 130:t="visited-you";break;case 131:t="favourited-you";break;case 129:case 326:case 8:t="liked-you";break;case 165:t="mini-game";break;case 21:t="";break;default:g.error("Unexpected PromoBlockType provided: ".concat(s.getPromoBlockType()||s.experimentType))}var r,l=s.getPictures(),c=l?l[0].getBadgeText():null;return c&&(r=Number(c.replace(/\D/g,""))<=o?c:"".concat(o,"+")),{activity:t,counter:r,title:s.getHeader(),message:s.getMssg(),isDisabled:n,isAddedHACK:a}},e.exports.getConnectionStatus=function(e){return e.getIsConversation()||e.getUnreadMessagesCount(0)>0?15:e.getIsMatch()?11:e.getIsCrush()?22:2===e.getTheirVote()?4:e.getFavouritedYou()?23:e.getIsFavourite()?24:e.getIsVisitor()?25:void 0},e.exports.getUserBadgeNum=function(e,t){var i=e.getIsCrush();if(i&&"favourites"===t.param)return 1;var n=e.getIsUnread(),a=e.getUnreadMessagesCount(0),o=a>0&&v.indexOf(t.param)>-1,s=!o&&!i&&n&&e.getIsMatch();return s||i||!o?s||i||!n?0:1:a},e.exports.trackViewBannerPromoCard=function(e){if(e){var t=e.connectionPromoCard;m.track(u,(0,r.default)({},t.hotpanelData,{context:127}))}},e.exports.trackElementStatus=function(e){m.track(d,{element:5,count:e})}},function(e,t,i){"use strict";var n=i(98),a={children:i(104).node.isRequired},o=function(e){var t=e.children;return n.createElement("div",{className:"csms-connections-list"},n.Children.map(t,function(e){return n.createElement("div",{className:"csms-connections-list__item"},e)}))};o.propTypes=a,e.exports=o},function(e,t,i){"use strict";var n=i(98),a=i(633);e.exports=function(e){var t=e.icon,i=e.title,o=e.message,s=e.buttonPrimary,r=e.buttonSecondary;return n.createElement(a,{icon:t,title:i,message:o,buttonPrimary:s,buttonSecondary:r})}},function(e,t,i){"use strict";var n=i(3),a=n(i(110)),o=n(i(112)),s=n(i(114)),r=n(i(115)),l=n(i(123)),c=n(i(116)),u=i(98),d=i(25),h=i(3575),p=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,r.default)(t).call(this,e))).state={fixed:!1},i.onScroll=i.onScroll.bind((0,l.default)(i)),i}return(0,c.default)(t,e),(0,o.default)(t,[{key:"getSnapshotBeforeUpdate",value:function(e){return!e.isVisible&&this.props.isVisible?this.getButtonPosition():null}},{key:"componentDidUpdate",value:function(e,t,i){!e.isVisible&&this.props.isVisible?(null!==i&&this.updatePosition(i),window.addEventListener("scroll",this.onScroll)):!this.props.isVisible&&e.isVisible&&window.removeEventListener("scroll",this.onScroll)}},{key:"onScroll",value:function(){this.updatePosition(this.getButtonPosition())}},{key:"getButtonPosition",value:function(){return d(this.props.container).offset().top-window.scrollY}},{key:"updatePosition",value:function(e){var t=e<=this.props.fixedHeight;this.setState({fixed:t})}},{key:"render",value:function(){return u.createElement(h,{isVisible:this.props.isVisible,isFixed:this.state.fixed,fixedHeight:this.props.fixedHeight,onClick:this.props.onClick})}}]),t}(u.Component);e.exports=p},function(e,t,i){"use strict";var n=i(98),a=i(117),o=i(99),s=i(378);e.exports=function(e){var t=e.isVisible,i=e.isFixed,r=e.fixedHeight,l=e.onClick,c=a({"connections-update-button":!0,"is-hidden":!t,"is-fixed":i}),u=i?{top:r}:void 0;return n.createElement("div",{className:c,style:u},n.createElement("div",{className:"connections-update-button__snackpill"},n.createElement(s,{icon:"generic-chevron-down",text:o.get(516),onClick:l})))}},function(e,t,i){"use strict";var n=i(3),a=n(i(127)),o=n(i(110)),s=n(i(112)),r=n(i(114)),l=n(i(115)),c=n(i(123)),u=n(i(116)),d=i(98),h=i(5),p=i(3577),m=function(e){function t(e){var i;return(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).onClose=i.onClose.bind((0,c.default)(i)),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this;if(!this.props.filters||!this.props.filters.length)return null;var t=this.props.filters.map(function(t){return(0,a.default)({},t,{onSelect:e.onSelect.bind(e,t.filterType)})});return d.createElement(p,{filters:t,searchTitle:this.props.searchTitle,onClose:this.onClose,onSearch:this.props.onSearch,onToggle:this.props.onToggle,hasTransition:!h.needsSimpleListAnimation(),isExpanded:this.props.isExpanded})}},{key:"onSelect",value:function(e){this.props.onSelect(e)}},{key:"onClose",value:function(e){e.stopPropagation(),this.props.onClose()}}]),t}(d.Component);e.exports=m},function(e,t,i){"use strict";var n=i(98),a=i(117),o=i(3578),s=i(106);e.exports=function(e){var t=a({"is-expanded":e.isExpanded,"has-transition":e.hasTransition,"connections-filter":!0}),i=e.filters.find(function(e){return e.isActive})||{},r=e.isExpanded||i&&i.isDefault,l=e.filters.map(function(t){return t.isDefault?null:n.createElement(o,{filterType:t.filterType,title:t.title,count:t.count,isActive:t.isActive,key:t.filterType,showCross:t===i,onSelect:t.onSelect,onClose:e.onClose})});return n.createElement("div",{"data-qa":"filters",className:t},n.createElement("div",{className:"connections-filter__controls"},n.createElement("div",{className:"connections-filter__title"},n.createElement(o,{filterType:i.filterType,title:i.title,isActive:!1,isTitle:!0,showChevron:r,showCross:!r,onSelect:e.onToggle,onClose:e.onClose,count:i.count})),n.createElement("div",{"data-qa":"start-search",className:"connections-filter__search",onClick:e.onSearch},n.createElement("div",{className:"connections-filter-search"},n.createElement("div",{className:"connections-filter-search__field"},e.searchTitle),n.createElement("div",{className:"connections-filter-search__extra"},n.createElement("div",{className:"connections-filter-search__icon"},n.createElement(s,{name:"elements-input-search",size:"stretch"})))))),n.createElement("div",{className:"connections-filter__options"},l))}},function(e,t,i){"use strict";var n=i(98),a=i(117),o=i(3579),s=i(106);e.exports=function(e){var t=a({"is-active":e.isActive,"connections-filter-item":!0});return n.createElement("div",{className:t,onClick:e.onSelect,"data-qa-filter-type":e.filterType},n.createElement(o,{count:e.count,isTitle:e.isTitle}),n.createElement("div",{className:"connections-filter-item__label"},n.createElement("span",{"data-qa":"connections-filter-title"},e.title)),n.createElement("div",{className:"connections-filter-item__extra"},e.showChevron?n.createElement("div",{className:"connections-filter-item__chevron"},n.createElement(s,{name:"generic-chevron-down",size:"sm"})):null,e.showCross?n.createElement("div",{className:"connections-filter-item__close",onClick:e.onClose},n.createElement(s,{name:"elements-input-clear",size:"stretch"})):null))}},function(e,t,i){"use strict";var n=i(98),a=i(117),o=i(320);e.exports=function(e){if(null===e.count&&e.isTitle)return null;var t=e.count;t>99&&(t="".concat(99,"+"));var i=a({"connections-filter-item__counter--fix-width":!e.isTitle,"connections-filter-item__counter":!0});return n.createElement("div",{className:i},t?n.createElement("div",{className:"connections-filter-item__counter-container"},n.createElement(o,{text:"".concat(t)})):null)}},function(e,t,i){"use strict";function n(){this.view_={},this.scrollManager_=new o}var a=i(100),o=i(3581);a.extend(n.prototype,{scrollManager_:{},view_:{},onOpen_:null,_enableVerticalScrollDetection:function(){this._debouncedOnVerticalScroll=a.debounce(this._onVerticalScroll.bind(this),10),this.scrollManager_.attach(this.view_,this._debouncedOnVerticalScroll.bind(this))},_disableVerticalScrollDetection:function(){this.scrollManager_.detach()},_onVerticalScroll:function(e){e>=10&&this._notifyOpenList()},_notifyOpenList:function(){this.onOpen_&&this.onOpen_()},attach:function(e,t){this.view_=e||this.view_,this.onOpen_=t||this.onOpen_,this._enableVerticalScrollDetection()},detach:function(){this.view_={},this.onOpen_=null,this._disableVerticalScrollDetection()}}),e.exports=n},function(e,t,i){"use strict";function n(){this.layout_=null}var a=i(100),o=i(25),s=i(5);a.extend(n.prototype,{layout_:{},onTouchMove_:null,bufferedMove_:null,onTouchStartCallback_:null,firstEventDone_:!1,_onTouchStart:function(e){this.initialEventData_=e.changedTouches[0].screenY,this._notifyTouchStart(),this.firstEventDone_=!1,this.bufferedMove_&&this.bufferedMove_.reset()},_resetOnEnd:function(){this.initialEventData_=null},_notifyTouchStart:function(){this.onTouchStartCallback_&&this.onTouchStartCallback_()},attach:function(e,t){var i=this;this.layout_=e.find(".js-layout"),this.onTouchMove_=function(e){i.firstEventDone_||o.os.ios||!s.isAndroidAfter_4_4_2()||(i.firstEventDone_=!0),0===window.scrollY&&i.initialEventData_&&t(e.changedTouches[0].screenY-i.initialEventData_)},this.layout_.on("touchmove",this.onTouchMove_),this.layout_.on("touchstart",this._onTouchStart.bind(this)),this.layout_.on("touchend",this._resetOnEnd.bind(this))},detach:function(){this.onTouchMove_&&(this.layout_.off("touchmove"),this.layout_.off("touchstart"),this.layout_.off("touchend")),this.onTouchMove_=null,this.layout_={},this._resetOnEnd()},onTouchStart:function(e){this.onTouchStartCallback_=e}}),e.exports=n},function(e,t,i){"use strict";var n=i(98),a=i(137),o=i(106),s=i(99),r=i(134);e.exports=i(108)("Connections",function(e){return n.createElement("div",{
className:"layout layout--stretched-content connections is-empty is-empty-fullscreen js-container js-screen-container"},n.createElement("div",{className:"layout__header connections__header js-connections-header js-scroll-toggle","data-scroll-top":"1","data-toggle-class":e.spotlightEnabled?"is-scrolled":"is-scrolled-spotlight"},n.createElement("div",{className:"connections__navigation"},n.createElement("div",{className:"connections__navigation-default"},e.noMenu?n.createElement(a,{partner_id:e.partner_id,logo:!0,actions:e.navigationActions||e.actions,hasWideSides:!0,extraClass:"js-navigation-bar",primary:n.createElement("div",{className:"js-popularity"}),secondary:n.createElement("button",{className:"navigation-bar__button-text js-button-edit","data-qa":"navbar-link"},e.noMenu.text)}):n.createElement(a,{partner_id:e.partner_id,logo:!0,actions:e.navigationActions||e.actions,extraClass:"js-navigation-bar",secondary:n.createElement("div",{className:"js-popularity"})})),n.createElement("div",{className:"connections__navigation-search"},n.createElement(a,{extraClass:"navigation-bar--shadow",primary:n.createElement("div",{className:"navigation-bar__icon js-cancel-search"},n.createElement(o,{name:"navigation-bar-back",supportsRtl:!0})),title:'<input type="search" class="connections-search-field js-search-input" placeholder="'.concat(s.get(223),'" autocomplete="off" autocorrect="off" spellcheck="false"/>'),secondary:n.createElement("div",{className:"navigation-bar__icon js-reset-search"},n.createElement(o,{name:"elements-input-clear"}))}))),e.spotlightEnabled?n.createElement(n.Fragment,null,n.createElement("div",{className:"connections__spotlight connections__spotlight--fixed"},n.createElement("div",{className:"js-spotlight"}),n.createElement("div",{className:"connections__fader"})),n.createElement("div",{className:"connections__spotlight"},n.createElement("div",{className:"spotlight"},n.createElement("div",{className:"spotlight__scroller"},n.createElement("div",{className:"spotlight_"},n.createElement("div",{className:"spotlight__action"},n.createElement("div",{className:"spotlight__item"},n.createElement("div",{className:"brick brick--squared brick--stretch","data-qa":"brick"})))))))):null),n.createElement("div",{className:"layout__header layout__header--hpadded"},n.createElement("div",{className:"connections__filter-container"},n.createElement("div",{className:"js-react-filters"}),n.createElement("div",{className:"connections__fader"}))),n.createElement("div",{className:"layout__content connections__content js-layout"},n.createElement("div",{className:"connections__items"},n.createElement("div",{className:"js-new-activity-button"}),n.createElement("div",{className:"connections-items js-items"})),n.createElement("div",{className:"connections__folder-empty js-empty"}),n.createElement("div",{className:"connections__search-empty"},n.createElement("div",{className:"connections__empty-screen-wrapper"},s.get(42))),n.createElement("div",{className:"connections__loader"},n.createElement(o,{name:"loading-dots",size:"xlg"}))),n.createElement("div",{className:"floating-action js-connections-actions-edit is-inactive"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(r,{type:"red",extraClass:"js-connections-button-remove disabled",text:s.get(250),attrs:{"data-action":e.actions.DELETE}})))))),n.createElement("div",{className:"fake"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(r,{type:"red",extraClass:"js-connections-button-remove disabled",text:s.get(250),attrs:{"data-action":e.actions.DELETE}})))))))})},function(e,t,i){"use strict";function n(e){return 129===e.getPromoBlockType()&&1===e.getPromoBlockPosition()&&2===e.getStatsVariationId()}function a(e){var t=e.getPictures([]).find(function(e){return 2===e.getBadgeType()});return t&&Number(t.getBadgeText())||0}function o(e){var t=e.getPictures()&&e.getPictures()[0],i=e.getCounter()||t&&t.getBadgeText();return i?{text:i,type:41===e.getPromoBlockType()?"double-credits-badge":null}:null}var s,r=i(3),l=r(i(4)),c=r(i(168)),u=r(i(110)),d=r(i(112)),h=r(i(107)),p=i(100),m=i(103),g=m.navigate,_=m.getUrl,f=i(113),v=i(129),E=i(199),b=i(165),y=i(102),k=i(184),S=i(610),w=i(140),C=i(124),T=i(3584),P=i(3586),N=i(291),I=i(101),x=I.ClickEvent,A=I.ClickBannerEvent,O=I.ElementStatusEvent,V=I.ViewElementEvent,R=[131,129,130,326],B=(s={},(0,h.default)(s,w.TYPES.MESSAGES,26),(0,h.default)(s,w.TYPES.FAVOURITES,23),(0,h.default)(s,w.TYPES.WANT_TO_MEET_YOU,6),(0,h.default)(s,w.TYPES.VISITORS,22),s),L=500,F=function(){function e(t){var i=t.getController,n=t.registerController,a=t.removeController,o=t.onControllerStart,s=t.onPromoClick,r=t.onBannersUpdated,l=t.getActivationPlace,c=t.getElementType,d=t.getFolderType;(0,u.default)(this,e),this.getController=i,this.registerController=n,this.removeController=a,this.onControllerStart=o,this.onPromoClick=s,this.onBannersUpdated=r,this.getActivationPlace=l,this.getElementType=c,this.getFolderType=d,this.onPromoClick_=p.debounce(this.onPromoClick_,L,{leading:!0,trailing:!1}),this.nextPromoControllerId_=0,this.reset()}return(0,d.default)(e,[{key:"reset",value:function(){this.batchedActivities_={},this.promos_=[],this.nextPromoIndex_=0,this.usersBeforeNextPromo_=2,this.resetPromoBlockControllers_=!0}},{key:"getInvisiblePromo",value:function(){return this.invisiblePromo_}},{key:"getShownPromoBlocks",value:function(){return this.shouldResetShownBlocks_&&(this.promos_=[],this.nextPromoIndex_=0,this.shouldResetShownBlocks_=!1),N.getControllers().filter(function(e){return e.object.getPromoBlock()}).map(function(e){return e.object.getPromoBlock().getPromoBlockType()})}},{key:"setPromoBlocks",value:function(e){var t=e.promos;t&&t.length&&this.setPromos_(t)}},{key:"process",value:function(e){var t=this,i=e.items,a=e.clientUserList,o=e.isActive,s=e.isUpdates,r=a.getPromoBlockResponseParams();r&&r[0].getResetShownPromoBlocks()&&(this.shouldResetShownBlocks_=!0);var l=a.getPromoBanners([]);if(l.length){var c=l.find(function(e){return 4===e.getPromoBlockPosition()});c&&(s&&N.hasTopMostPromo()?N.replaceTopMostPromo(c):this.addPromoBlock_(i,c));var u=l.find(n);s&&u&&N.replaceLikedYouPromo(u),s||l.filter(function(e){return R.includes(e.getPromoBlockType())}).forEach(function(e){return t.addPromoBlock_(i,e)});var d=l.find(function(e){return 37===e.getPromoBlockType()});if(this.invisiblePromo_=d||this.invisiblePromo_,o){var h=this.getPromoBlockModalController_(),p=l.filter(function(e){return 143===e.getPromoBlockType()});p.length&&!h.isVisible()&&h.show(p[0])}}}},{key:"processUsers",value:function(e){var t=this,i=e.items;e.users.forEach(function(e){t.likedYouPromoBlock_&&t.likedYouPromoBlock_.getSortTimestamp()>e.getSortTimestamp()&&(i.push(t.likedYouPromoBlock_),t.likedYouPromoBlock_=null),i.push(e),t.batchedActivities_[e.getUserId()]&&i.push(t.batchedActivities_[e.getUserId()])})}},{key:"prependBanner",value:function(e){var t=N.getControllers()[0];if(!t)return e;var i=N.findIndex(t.object);if(i+e.length>9){var n=i+e.length-9;e=[].concat((0,c.default)(e.slice(0,n)),[this.registerPromoController_(this.getNextPromo_())],(0,c.default)(e.slice(n)))}return e}},{key:"appendBanners",value:function(){var e=this;this.nextPromoIndex_=0,this.usersBeforeNextPromo_=2;var t=this.resetPromoBlockControllers_?[]:N.getControllers().map(function(e){return e.object});this.resetPromoBlockControllers_=!1;var i=N.getItems().reduce(function(i,n){return n.object instanceof v?i:(i.push(n.object),e.insertBannerIfNecessary_(i,t),i)},[]);N.addPage(i,!0)}},{key:"insertBannerIfNecessary_",value:function(e,t){var i,n=e[e.length-1];if(n&&(n.getUserId||(i=n).getPromoBlockPosition&&1===i.getPromoBlockPosition()&&326===i.getPromoBlockType())&&this.usersBeforeNextPromo_--,this.usersBeforeNextPromo_<=0){if(this.promos_){var a=this.getNextPromo_();if(a)if(t.length){var o=t.shift();e.push(o),o.start()}else e.push(this.registerPromoController_(a))}this.usersBeforeNextPromo_=9}}},{key:"getPromoBlockModalController_",value:function(){var e=this.getController("PROMO_BLOCK_POPUP");return e||(e=this.registerController("PROMO_BLOCK_POPUP",new P)),e}},{key:"addPromoBlock_",value:function(e,t){var i,o;n(t)?this.likedYouPromoBlock_=t:void 0!==t.getPlaceAfterUser()?this.batchedActivities_[t.getPlaceAfterUser()]=t:(e.push(t),this.usersBeforeNextPromo_--),(o=function(e){switch(e.getPromoBlockType()){case 131:return 10;case 129:return 100;case 130:return 101;case 165:return 14}}(i=t))&&(y.track(V,{element:o}),y.track(O,{element:o,count:a(i)}))}},{key:"setPromos_",value:function(e){var t=e.filter(function(e){return 1===e.getPromoBlockPosition()&&!R.includes(e.getPromoBlockType())});this.promos_=k.isEnabled()?[{googleAd:!0}]:this.promos_.concat(t)}},{key:"getNextPromo_",value:function(){var e;return this.promos_&&(e=this.promos_[this.nextPromoIndex_++],this.nextPromoIndex_===this.promos_.length&&(this.nextPromoIndex_=0)),e}},{key:"registerPromoController_",value:function(e){var t,i=f.getUser().getGender();t=e.googleAd?{googleAd:!0,picture:{}}:function(e,t){var i=e.getPromoBlockType(),n=function(e){var t=e.getCreditsCost(),i=t||e.getMssg();return{title:e.getHeader()||t&&i,text:i}}(e),a=Object.assign({promoBlock:e,isGift:5===e.getOkPaymentProductType(),mark:o(e),badgeType:E.getBadgeTypeForPromoBlock(i)},n);return a.picture=E.getPictureForPromoBlock(e,{gender:t}),a.gender=t,a}(e,i);var n="".concat("promo-").concat(this.nextPromoControllerId_++),a=new T(n,t);return a.on(T.EVENTS.CLICK,this.onPromoClick_.bind(this,a)),this.registerController(n,a),a.start(),a}},{key:"onPromoClick_",value:function(e,t,i){if(t){switch(this.onPromoClick(),e.setProcessing(!0),this.trackClickBannerEvent(t),t.getPromoBlockType()){case 39:y.track(x,{element:95,parentElement:this.getElementType()}),g("app-of-the-day");break;case 65:y.track(x,{element:547}),g("spp-trial",!1,{returnTo:_(),context:26,activationPlace:191,fromBanner:!0});break;default:y.track(x,{element:95,parentElement:this.getElementType()}),this.performAction_(t.getOkAction(),t,e,i)}var n=p.once(this.rotatePromoControllers_.bind(this,e));E.once(E.EVENTS.END_PAYMENT,n),this.onControllerStart(n)}}},{key:"performAction_",value:function(e,t,i,n){switch(e){case 9:case 4:case 2:E.handlePromoSelected({action:e,activationPlace:this.getActivationPlace(),banner:t.getPromoBlockType(),cost:t.getPaymentAmount(),productType:t.getOkPaymentProductType()},{from:_()});break;case 6:this.navigateToSppPayment_(t,n);break;default:C.showNotification({type:C.TYPES.ERROR})}}},{key:"navigateToSppPayment_",value:function(e,t){var i=e.getOkPaymentProductType(),n=E.getFeatureFromPaymentProductType(i),a=e.getPromoBlockType(),o={activationPlace:this.getActivationPlace(),feature:19,bannerId:e.getPromoBlockType()},s={back:_(),productType:i,feature:n,hotPanelData:o,promoBlockType:a};t&&t.userId&&(s.userId=t.userId),b.navigateToPayment(s)}},{key:"rotatePromoControllers_",value:function(e){var t=this;e.setProcessing(!1);var i=N.findIndex(e);this.fetch({excludePromoBlocks:[e.getPromoBlock().getPromoBlockType()],count:N.getControllers().length}).then(function(e){var n=(0,l.default)(e,1)[0].getPromoBlocks([]),a=N.getControllers().map(function(e){return N.findIndex(e.object)});a=[].concat((0,c.default)(a.slice(a.indexOf(i))),(0,c.default)(a.slice(0,a.indexOf(i)))).slice(0,n.length),n.forEach(function(e,i){if(void 0!==a[i]){var n=t.registerPromoController_(e);N.replaceItem({object:n},a[i])}}),t.onBannersUpdated()})}},{key:"fetch",value:function(e){var t=e.shownPromoBlocks,i=e.excludePromoBlocks,n=e.count;return S.getInstance().get({context:this.getClientSource(),position:1,shownPromoBlocks:t,excludePromoBlocks:i,count:n||4})}},{key:"getClientSource",value:function(){return B[this.getFolderType()]||127}},{key:"trackClickBannerEvent",value:function(e){var t={banner_id:e.getPromoBlockType(),position_id:e.getPromoBlockPosition(),context:this.getClientSource()},i=e.getStatsVariationId();i&&(t.variationId=i),y.track(A,t)}}]),e}();e.exports=F},function(e,t,i){"use strict";var n=i(129),a=i(3585),o=i(149),s=a.EVENTS,r={MAIN:"main"},l=n.extend({construct:function(e,t){l._super.construct.call(this),this.name=e,this.data_=t;var i=new a;i.on(a.EVENTS.CLICK,this.onClick_,this),this.registerView(r.MAIN,i),this.render()},getPromoBlock:function(){return this.data_.promoBlock},isGoogleAd:function(){return this.data_.googleAd},render:function(){var e=Object.assign({},this.data_,{processing:this.processing_});this.updateView(r.MAIN,e)},setParent:function(e){this.parent=e,this.getView(r.MAIN).appendTo(e)},onClick_:function(){this.processing_||(o.generate(),this.trigger(s.CLICK,this.getPromoBlock()))},setProcessing:function(e){this.processing_=e,this.render()}},"SimplePromoBlockController");l.EVENTS=s,l.VIEWS=r,e.exports=l},function(e,t,i){"use strict";var n=i(100),a=i(109),o=i(628),s=i(629),r=i(184),l={CLICK:"CLICK"},c=a.extend({events:{"click .js-click-action":"onClick_"},update:function(e){if(c._super.update.apply(this,arguments),n.isObject(e.picture))if(e.googleAd){this.$el.addClass("connections-google-ad");var t=r.create(r.placements.CONNECTIONS);this.$el.html('<div id="'.concat(t,'" style="height:50px" data-qa-ads="connections" />'))}else this.render({picture:e.picture,titleText:e.title,descriptionText:e.text,badgeType:e.badgeType,mark:e.mark,ready:e.ready,isGift:e.isGift,processing:e.processing})},getTemplate_:function(e){return e.isGift?s:o},render:function(e){this.$el.html(this.getTemplate_(e).render(e))},onClick_:function(){this.trigger(l.CLICK)}},"SimplePromoBlockView");c.EVENTS=l,e.exports=c},function(e,t,i){"use strict";var n=i(129),a=i(3587),o=i(122),s=i(102),r=i(103).navigate,l=i(105),c=l.ServerAppStats,u=l.PromoBannerStats,d=l.String,h=i(101),p=h.ClickEvent,m=h.ViewElementEvent,g=i(469),_=n.extend({init:function(){this.mainView_=this.registerView(new a).on(a.ACTIONS.ACTION,this.onAction_,this).on(a.ACTIONS.DISMISS,this.onDismiss_,this),this.mainView_.setLayout(g.BOTTOM_DRAWER)},isVisible:function(){return this.mainView_.isVisible},show:function(e){this.promoBlock_=e,e?(this.mainView_.render(e),s.track(m,{element:508}),this.notificationHandled_(2)):this.hide_()},onAction_:function(e){this.notificationHandled_(1),s.track(p,{element:67,parentElement:508});var t=(new d).setValue(this.promoBlock_.getId());new o(402,t).request(),13===e.actionType&&r("own-profile-edit",{anchor:"verification"})},onDismiss_:function(){s.track(p,{element:113,parentElement:508}),this.notificationHandled_(4)},notificationHandled_:function(e){var t=(new c).setPromoBannerStats((new u).setEvent(e).setContext(127).setPromoBlockType(143).setPromoBlockPosition(8));new o(278,t).request()}},"PromoBlockModalController");e.exports=_},function(e,t,i){"use strict";var n=i(25),a=i(202),o=i(593),s=i(3588),r=a.ACTIONS,l=a.MODAL_BG,c=a.extend({events:{"click .js-action":"onAction_"},preventClosing_:!0,render:function(e){var t=new o(e);c._super.render.call(this,s,t),this.show()},onAction_:function(e,t){if(this.canTakeAction_()){var i=n(t).data(),a=[77,20].includes(i.actionType)?r.DISMISS:r.ACTION;this.dismiss(),this.trigger(a,i)}},getBackdropType:function(){return l.DEFAULT}},"PromoBlockModalView");e.exports=c},function(e,t,i){"use strict";var n=i(98),a=i(134);e.exports=i(108)("Modal.connectionsVerify",function(e){return n.createElement("div",{className:"modal modal--vpadded"},n.createElement("div",{className:"modal__content"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__header cta-box__header--sm"},e.titleText),n.createElement("div",{className:"cta-box__content"},e.messageText),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(a,{type:"primary",narrow:"true",extraClass:"js-action",text:e.buttons[0].actionText,attrs:{"data-action-type":e.buttons[0].actionType}})))),n.createElement("div",{className:"cta-box__additional js-action","data-action-type":e.buttons[1].actionType},e.buttons[1].actionText))))})},function(e,t,i){"use strict";function n(){var e=o.getSync(19),t=Boolean(e&&e.getEnabled());s.setValue(t)}var a=i(201),o=i(132),s=a();n(),o.on(o.EVENTS.UPDATE,function(e){19===e.getFeature()&&n()}),e.exports=s},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(426),s=i(308),r=i(472),l=o.extend({hotpanelElement:109,buttons:(n={},(0,a.default)(n,59,{action:function(){return new Promise(function(e){s.userWantsPushes("onboarding").then(function(t){t&&e()})})},element:67}),(0,a.default)(n,77,{element:65}),n),isRelevant:r.isRelevant},"NotificationStepController");e.exports=l},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(109),s=i(111),r=i(3592),l=s("BUTTON_CLICK"),c=(n={},(0,a.default)(n,106,"zero-notifications"),(0,a.default)(n,12,"zero-photos"),n),u=o.extend({events:{"click .js-button":"handleButtonClick_"},render:function(e){this.buttons_=e.onboardingPage.getPromo().getButtons();var t=function(e){var t=e.onboardingPage.getPromo();return{imageName:c[t.getPromoBlockType()],title:t.getHeader(),message:t.getMssg(),buttons:t.getButtons().map(function(e,t){return{text:e.getText(),primary:1===e.getType(),index:t}}),steps:e.numberOfSteps>1&&{currentStepNumber:e.currentStepNumber,numberOfSteps:e.numberOfSteps}}}(e),i=r.render(t);this.$el.html(i)},handleButtonClick_:function(e,t){e.preventDefault();var i=this.buttons_[t.getAttribute("data-index")];this.trigger(l.BUTTON_CLICK,i)}},"OnboardingStepView");u.EVENTS=l,e.exports=u},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout layout--centered-content"><div class="layout__header">').h("NavigationBar",t,{},{logo:t.get(["true"],!1),actions:t.get(["navigationActions"],!1)},"h").w('</div><div class="layout__content layout__content--hpadded layout__content--vpadded"><div class="cta-box"><div class="cta-box__content"><div class="zero-image">').h("Icon",t,{},{size:"stretch",name:t.get(["imageName"],!1)},"h").w('</div></div><div class="cta-box__header cta-box__header--lg">').f(t.get(["title"],!1),t,"h").w('</div><div class="cta-box__content">').f(t.get(["message"],!1),t,"h").w('</div><div class="cta-box__buttons"><div class="button-wrapper">').s(t.get(["buttons"],!1),t,{block:i},{}).w("</div></div></div></div>").s(t.get(["steps"],!1),t,{block:r},{}).w("</div>")}function i(e,t){return e.w('<div class="button-wrapper__item">').x(t.get(["primary"],!1),t,{else:n,block:a},{}).w("</div>")}function n(e,t){return e.w('<button class="inline-button inline-button--secondary inline-button--sm js-touchable js-button" data-index="').f(t.get(["index"],!1),t,"h").w('"><span class="inline-button__text">').f(t.get(["text"],!1),t,"h").w("</span></button>")}function a(e,t){return e.h("Button",t,{attrs:o,block:s},{type:"transparent",text:t.get(["text"],!1),size:"lg",extraClass:"js-button"},"h")}function o(e,t){return e.w('data-index="').f(t.get(["index"],!1),t,"h").w('"')}function s(e,t){return e}function r(e,t){return e.w('<div class="layout__footer layout__footer--vpadded"><div class="hint js-onboarding-progress">').f(t.get(["currentStepNumber"],!1),t,"h").w("/").f(t.get(["numberOfSteps"],!1),t,"h").w("</div></div>")}return e.register("onboarding/onboarding-step",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n,a=i(3)(i(107)),o=i(426),s=i(471),r=i(103),l=i(329),c=o.extend({hotpanelElement:41,buttons:(n={},(0,a.default)(n,2,{action:function(){return new Promise(function(e){r.navigate("add-photos",!1,{callback:e}),l.once(l.EVENTS.PHOTO_UPLOADED,e)})},element:68}),(0,a.default)(n,77,{element:65}),n),isRelevant:s.isRelevant},"PhotoStepController");e.exports=c},function(e,t,i){"use strict";function n(e){return r.throttle(e,1200,{trailing:!1})}function a(){var e=P.get(T);if(e)return e;var t=p();return P.set(T,t),t}function o(e){h.track(y,{element:e})}function s(e,t){h.track(w,{field_name:7,field_type:1,form_name:15,action_type:e,uid:t})}var r=i(100),l=i(103),c=i(126),u=i(113),d=i(128),h=i(102),p=i(12),m=i(344),g=i(3595),_=i(426),f=i(473),v=i(239),E=i(105).User,b=i(101),y=b.ClickEvent,k=b.StartVerifyAccountEvent,S=b.VerifyAccountEvent,w=b.FillFormEvent,C=b.ErrorEvent,T="formUid",P=new m("OnboardingEmailForm"),N=_.extend({screenName:531,buttons:{},isRelevant:f.isRelevant,init:function(){N._super.init.apply(this,arguments),this.view_=this.registerView(new g).on(g.ACTIONS.INPUT_FOCUS,this.onFocus_,this).on(g.ACTIONS.INPUT_BLUR,this.onBlur_,this).on(g.ACTIONS.SUBMIT,n(this.onSubmit_),this).on(g.ACTIONS.SKIP,n(this.onSkip_),this)},onStart:function(){if(this.onboardingStepNumber_=Number(this.getParameter("onboardingStepNumber")),this.onboardingStep_=v.getOnboardingStep(this.onboardingStepNumber_),!this.isRelevant())return this.sendOnboardingPageEvent_(8),void l.navigate(c.get("default.page"));var e=this.onboardingStep_.onboardingPage.getPromo(),t=e.getButtons([]),i=t.find(function(e){return 1===e.getType()}),n=t.find(function(e){return 2===e.getType()});this.view_.appendTo(this.parent),this.view_.render({title:e.getHeader(),message:e.getMssg(),primaryButton:i&&i.getText(),secondaryButton:n&&n.getText()})},onFocus_:function(){s(8,a())},onBlur_:function(){s(9,a())},onSubmit_:function(e){var t=this,i=(new E).setUserId(u.getUser().getUserId()).setEmail(e);d.getInstance().set(i,[10],92).then(function(){P.remove(T),t.sendOnboardingPageEvent_(10),h.track(S,{verification_method:16,activation_place:303,retry:!1})}).catch(function(e){var i=e.getUserFieldErrors([])[0],n=i&&i.getErrorMessage();t.view_.setInputError(n),function(e,t){h.track(C,{event_type:13,field_name:7,error_type:e,error_message:t})}(12,n)}),o(376),h.track(k,{verification_method:16,activation_place:303})},onSkip_:function(){this.sendOnboardingPageEvent_(4),o(51),l.navigate(c.get("default.page"))}},"EmailStepController");e.exports=N},function(e,t,i){"use strict";function n(e){s(e).closest(".js-input-field-container").toggleClass("has-value",!!e.value)}var a,o=i(3)(i(107)),s=i(25),r=i(109),l=i(111),c=i(3596),u=l("INPUT_FOCUS","INPUT_BLUR","INPUT_KEYUP","SUBMIT","SKIP"),d=r.extend({events:(a={},(0,o.default)(a,"keyup ".concat(".js-input-field"),"keyup_"),(0,o.default)(a,"click ".concat(".js-submit"),"submit_"),(0,o.default)(a,"click .js-skip","skip_"),a),render:function(e){this.removeListeners_(),this.$el.html(c.render(e)),this.addListeners_()},onDestroy:function(){this.removeListeners_()},addListeners_:function(){this.$el.find(".js-input-field").on("focus",this.focus_).on("blur",this.blur_)},removeListeners_:function(){this.$el.find(".js-input-field").off("focus").off("blur")},setInputError:function(e){this.$(".js-control-error").toggleClass("show-error",!!e),this.$(".js-control-error").text(e),this.$(".js-input-field-container").toggleClass("is-invalid",!!e)},getText:function(){return this.$(".js-input-field").val().trim()},focus_:function(e){n(e.currentTarget),this.trigger(u.INPUT_FOCUS)},blur_:function(e){n(e.currentTarget),this.trigger(u.INPUT_BLUR)},keyup_:function(e){this.setInputError(),n(e.currentTarget),this.trigger(u.INPUT_KEYUP),this.getText().length>0?this.$el.find(".js-submit").removeAttr("disabled"):this.$el.find(".js-submit").attr("disabled",!0)},submit_:function(){this.trigger(u.SUBMIT,this.getText())},skip_:function(){this.trigger(u.SKIP)}},"OnboardingEmailView");d.ACTIONS=u,e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(106),o=i(99),s=i(134);e.exports=i(108)("NeverLoseAccountEmail",function(e){return n.createElement("div",{className:"layout"},n.createElement("div",{className:"layout__content layout__content--hpadded layout__content--vpadded"},n.createElement("div",{className:"cta-box cta-box--vpadded"}," ",n.createElement("div",{className:"cta-box__media"},n.createElement(a,{name:"badge-feature-never-loose-account",size:"xxlg"})),n.createElement("div",{className:"cta-box__header"},e.title),n.createElement("div",{className:"cta-box__content"},e.message),n.createElement("div",{className:"cta-box__content"},n.createElement("div",{className:"form-uniform js-form"},n.createElement("div",{className:"control control--centered"},n.createElement("div",{className:"control__error js-control-error ".concat(e.email.isInvalid?"show-error":"")},e.email.errorMessage),n.createElement("div",{className:"control__inputs"},n.createElement("div",{className:"input js-input-field-container ".concat(e.email.value?"has-value":""," ").concat(e.email.isInvalid?"is-invalid":""),"data-field-type":"email"},n.createElement("input",{id:"email",type:"email",className:"input__field js-input-field",value:e.email.value,autoComplete:"email"}),n.createElement("label",{htmlFor:"email",className:"control__label"},o.get(110))))))),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item"},n.createElement(s,{type:"never-loose-account",narrow:!0,extraClass:"js-submit",text:e.primaryButton,attrs:{disabled:!0}})),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button inline-button--sm js-skip"},n.createElement("span",{className:"inline-button__text"},e.secondaryButton))))))))})},function(e,t,i){"use strict";var n=i(121),a=i(3598),o=n.extend({headerTemplate:null,onStart:function(){o._super.onStart.apply(this,arguments),this.parent.html(a.render({partner_name:window._partnerLexemes.partner_name,partner_url:window._partnerLexemes.partner_url}))}},"IosTerms");e.exports=o},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="ios-terms"><p>The app is free to download and use. We also offer one optional subscription package, ').h("t",t,{},{k:"92"},"h").w(". ").h("t",t,{},{k:"92"},"h").w(" include a range of premium features and help user to get noticed and meet new people quickly.</p><h2>Subscription Service Conditions:</h2><ol><li>The cost of the optional subscription for ").h("t",t,{},{k:"92"},"h").w(" is 2.99 USD for 7 days, 7.99 USD for 1 month, 19.99 USD for 3 months, 27.99 USD for 6 months.</li><li>Lifetime ").h("t",t,{},{k:"92"},"h").w(" are not a subscription service, there is only a one off payment of 49.99 USD which will need to be made initially. This will then last the lifetime of your ").f(t.get(["partner_name"],!1),t,"h").w(" account.</li><li>Payment will be charged to your iTunes account at confirmation of purchase.</li><li>Your subscription automatically renews unless auto-renew is turned off at least 24 hours before the end of the current period.</li><li>Your account will be charged for renewal within the 24 hours prior to the end of the current period.</li><li>You can manage your subscription and switch off auto-renewal by accessing your Account Settings after purchase. </li><li>You cannot cancel your current subscription during the active subscription period.</li><li>Any unused portion of a free trial period, if offered, will be forfeited if you purchase a subscription to that publication. </li><li>All personal data is handled under the terms and conditions of ").f(t.get(["partner_name"],!1),t,"h").w('’s privacy policy. More details can be found here: <a href="').f(t.get(["partner_url"],!1),t,"h").w('/privacy/">').f(t.get(["partner_url"],!1),t,"h").w('/privacy</a> <a href="').f(t.get(["partner_url"],!1),t,"h").w('/terms/">').f(t.get(["partner_url"],!1),t,"h").w("/terms/</a></li></ol></div>")}return e.register("ios-terms",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";function n(){return!Boolean(p.getString(P))}function a(e){var t=e.getUserId(),i=e.getPhotoId(),n=e.getStreamId(),a=["page=".concat(e.getRedirectPage()),t&&"uid=".concat(t),i&&"photo_id=".concat(i),n&&"stream_id=".concat(n),"deep_link=1"].filter(Boolean).join("&");o("/landto/?".concat(a))}function o(e){window.location=e||window.location.host}var s=i(25),r=i(126),l=i(5),c=i(99),u=i(173),d=i(3600),h=i(121),p=i(178),m=i(102),g=i(131).getQueryParameters,_=i(150),f=r.get("partner_id"),v=i(3601),E=i(3602),b=i(3603),y={bumble:v,chappy:E}[f]||b,k={bumble:i(3604),chappy:i(3605)}[f],S=i(3606),w=i(101),C=w.ViewScreenEvent,T=w.ClickEvent,P="install_tried",N={PRIMARY:1,SECONDARY:2},I=h.extend({headerTemplate:null,init:function(){var e=this;I._super.init.apply(this,arguments),this.view_=this.registerView(new u({el:this.parent[0]})).setTemplate(y).setActions(N).on(N.PRIMARY,function(t){t.event.preventDefault(),4!==e.landingPageType_?e.redirect_(0):_.login({providerType:1,providerContext:3,needsAppLogin:!0})}).on(N.SECONDARY,function(t){t.event.preventDefault(),e.redirect_(1)})},redirect_:function(e){var t=this.buttonTargets_[e],i=t.getRedirectPage(),n=4===this.landingPageType_?486:381;m.track(T,{element:395,screen_name:n},!0),[73,71].includes(i)?o(t.getUrl()):a(t)},onStart:function(){var e,t=this;I._super.onStart.apply(this,arguments),l.isAndroid&&((e=document.createElement("iframe")).src="".concat(r.get("native.protocol"),"landto/").concat(window.location.search),document.body.appendChild(e),setTimeout(function(){e.parentNode.removeChild(e)},666)),this.view_.showLoading(),d.get(window.location.href).then(function(e){if(t.isStarted()){if(!e)return t.log.error("No ClientDeepLink retrieved from server."),void o();if(t.view_.setTemplate(y),t.buttonTargets_=e.getButtons([]).map(function(e){return e&&e.getRedirectPage?e.getRedirectPage():null}),t.landingPageType_=e.getLandingPageType(),t.landingVariant_=e.getVariantId(),function(e){4===e.getLandingPageType()?m.track(C,{screen_name:486}):"lookalike"in g()&&n()&&m.track(C,{screen_name:381})}(e),4!==t.landingPageType_)if(e.hasContinuePage()){var i=e.getContinuePage(),s=i.getRedirectPage();[73,71].includes(s)?window.location.replace(i.getUrl()):a(i)}else 3===t.landingPageType_&&t.handleNoAppLanding(e),e.hasSharedUser()&&t.handleSharedUserLanding(e),t.view_.hideLoading(),p.saveString(P,1),t.readyForVrt();else t.handleInviteLanding_(e)}}).catch(function(e){t.log.error(e),o()})},handleInviteLanding_:function(e){this.view_.setTemplate(S),this.view_.update(function(e){var t=e.getButtons()[0],i=e.getButtons()[1],n=e.getHeader(),a=e.getMessage();return{headerText:n,content:a,senderPicture:e.getSenderPicture().getDisplayImages(),ctaText:t.getText(),secondaryText:i?i.getText():""}}(e));var t="",i="";e.getButtons().length>=3&&(t=e.getButtons()[2].getRedirectPage()),e.getButtons().length>=4&&(i=e.getButtons()[3].getText()),p.saveObject("DEEPLINK-USER-CACHE",{senderName:e.getSenderName(),senderPicture:e.getSenderPicture().getDisplayImages(),appStoreLink:t?t.getUrl():"",variant:e.getVariantId(),headerText:i}),this.view_.hideLoading()},handleNoAppLanding:function(e){k?this.updateView_(e,k):this.log.error('No "no app" template found for current partner')},handleSharedUserLanding:function(e){var t=this;this.updateView_(e,y),-1!==document.referrer.indexOf("instagram.com/")&&s.os.ios&&this.view_.$el.find(".js-deeplink-container").css("padding-top","55px"),setTimeout(function(){t.view_.$el.find(".js-footer").removeClass("is-hidden")},7e3)},updateView_:function(e,t){var i=e.getSharedUser(),a=function(e){var t,i=e.getSharedUser(),n=e.getButtons()[0];return t="bumble"===f||"chappy"===f?n.getText():2===i.getGender()?c.get(524):c.get(525)}(e),o=i&&i.getCity(),s=o&&o.getName(),r=i&&i.getCountry(),u=r&&r.getName(),d=s&&u&&"".concat(s,", ").concat(u),h=function(e){var t={android:l.isAndroid,ios:l.isIOs};if("chappy"===f&&!t.android&&!t.ios&&e.getButtons([]).length>0){var i=e.getButtons(),n=i.find(function(e){return 12===e.getType()})||i[0],a=i.find(function(e){return 13===e.getType()})||i[0];Object.assign(t,{iosUrl:n.getRedirectPage().getUrl(),androidUrl:a.getRedirectPage().getUrl()
})}return t}(e),p=e.getSenderPicture(),m=i&&i.getProfilePhoto(),g=e.getButtons(),_=g?g[0].getRedirectPage().getUrl():null;this.view_.setTemplate(t),this.view_.update({actionText:a,header:e.getHeader(),hideFooter:n(),isMobile:h.android||h.ios,message:d,os:h,photoUrl:m&&m.getLargeUrl(),redirectUrl:_,secondMessage:e.getMessage(),senderPicture:p&&p.getDisplayImages(),title:i&&"".concat(i.getName(),", ").concat(i.getAge())})},trackHotPanelScreen:function(){}},"LandingDeeplink");e.exports=I},function(e,t,i){"use strict";var n=i(122),a=i(105),o=a.ServerGetDeepLink,s=a.UserFieldFilter;e.exports={get:function(e){return new Promise(function(t,i){new n(599,function(e){return(new o).setUrl(e).setSharedUserFieldFilter((new s).setProjection([210,93,91,230,200,340]))}(e)).on(600,function(e,n){e?i(new Error("Error fetching deepLink:".concat(e.$gpb,":").concat(e.getType()))):t(n)}).request()})}}},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="svg-instant"><svg xmlns="http://www.w3.org/2000/svg"><symbol viewBox="0 0 64 64" id="icon-logo-apple"><path d="M38.93 11.77a10.3 10.3 0 0 0 2.46-7.5c-2.38.1-5.27 1.58-6.96 3.55-1.52 1.76-2.86 4.57-2.5 7.26 2.64.2 5.34-1.33 7-3.3m12.26 26.9c-.06.17-1 3.38-3.27 6.68-1.96 2.87-4 5.72-7.22 5.78-3.14.06-4.16-1.87-7.77-1.87-3.6 0-4.73 1.8-7.72 1.93-3.1.12-5.45-3.1-7.44-5.94-4.05-5.83-7.14-16.47-3-23.65a11.56 11.56 0 0 1 9.77-5.87c3.05-.05 5.92 2.04 7.78 2.04 1.88 0 5.36-2.53 9.04-2.16 1.53.08 5.85.63 8.63 4.67-.23.14-5.16 3-5.1 8.93.06 7.1 6.26 9.47 6.33 9.5" fill-rule="evenodd"/></symbol><symbol viewBox="0 0 64 64" id="icon-logo-android"><path d="M38.42 16.18c.66 0 1.2.54 1.2 1.2a1.2 1.2 0 0 1-1.2 1.18 1.2 1.2 0 0 1-1.2-1.18c0-.66.54-1.2 1.2-1.2zm-12 0c.66 0 1.2.54 1.2 1.2a1.2 1.2 0 0 1-1.2 1.18 1.2 1.2 0 0 1-1.2-1.18c0-.66.54-1.2 1.2-1.2zm-2.16-7.3l2.16 3.77c-3.94 1.93-6.6 5.72-6.6 10.06h25.22c0-4.32-2.67-8.1-6.62-10.04L40.6 8.9s.1-.2-.1-.3c-.2-.13-.34.06-.34.06l-2.2 3.8a13.63 13.63 0 0 0-5.55-1.17c-2 0-3.86.4-5.54 1.16l-2.2-3.8s-.12-.2-.32-.08c-.2.1-.1.3-.1.3zm-4.56 15.3v19.15c0 .95 1.15 2.2 2.1 2.2h3v6.52c0 1.66 1.22 3 2.72 3 1.5 0 2.72-1.34 2.72-3v-6.53h4.37v6.53c0 1.66 1.23 3 2.73 3s2.74-1.34 2.74-3v-6.53h2.98c.95 0 2.1-1.24 2.1-2.2V24.2H19.7zm-4.18-.4c1.5 0 2.72 1.35 2.72 3v11.36c0 1.66-1.22 3-2.72 3-1.5 0-2.72-1.34-2.72-3V26.78c0-1.65 1.22-3 2.72-3m33.8 0c1.5 0 2.73 1.35 2.73 3v11.36c0 1.66-1.22 3-2.72 3-1.5 0-2.72-1.34-2.72-3V26.78c0-1.65 1.24-3 2.74-3"/></symbol></svg></div><div class="landto-bumble"><div class="layout layout--inherited"><div class="layout__header">').h("NavigationBar",t,{},{logo:"true",logoAlt:"white",extraClass:"navigation-bar--static navigation-bar--no-background"},"h").w('</div><div class="layout__content layout__content--vpadded layout__content--hpadded"><div class="landto-bumble__user"><div class="landto-bumble__photo"><div class="multimedia"><div class="multimedia__image" style="background-image: url(').h("PhotoUrl",t,{},{src:t.getPath(!1,["data","photoUrl"]),width:"300"},"h").w(')"></div></div></div>').x(t.getPath(!1,["data","header"]),t,{block:i},{}).w("</div>").x(t.getPath(!1,["data","secondMessage"]),t,{block:a},{}).w('<div class="landto-bumble__button landto-bumble__button--responsive js-responsive-button"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{icon:o,attrs:l,href:c,block:u},{type:"primary-inverted",narrow:"true",text:t.getPath(!1,["data","actionText"]),extraClass:"needsclick"},"h").w('</div></div></div><div class="landto-bumble__button landto-bumble__button--static"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{icon:d,attrs:h,block:p},{type:"primary-inverted",narrow:"true",text:t.getPath(!1,["data","actionText"])},"h").w("</div></div></div></div></div></div>")}function i(e,t){return e.w('<div class="landto-bumble__invite">').x(t.getPath(!1,["data","senderPicture"]),t,{block:n},{}).w('<div class="landto-bumble__comment">').f(t.getPath(!1,["data","header"]),t,"h").w("</div></div>")}function n(e,t){return e.w('<div class="landto-bumble__brick"><div class="brick brick--stretch brick--border"><div class="brick__image" style="background-image: url(').h("PhotoUrl",t,{},{src:t.getPath(!1,["data","senderPicture"]),width:"50"},"h").w(')"></div></div></div>')}function a(e,t){return e.w('<div class="landto-bumble__explanation">').f(t.getPath(!1,["data","secondMessage"]),t,"h").w("</div>")}function o(e,t){return e.x(t.getPath(!1,["data","os","ios"]),t,{block:s},{}).x(t.getPath(!1,["data","os","android"]),t,{block:r},{})}function s(e,t){return e.h("Icon",t,{},{name:"icon-logo-apple",size:"lg"},"h")}function r(e,t){return e.h("Icon",t,{},{name:"icon-logo-android",size:"lg"},"h")}function l(e,t){return e.w('data-action="').f(t.getPath(!1,["actions","PRIMARY"]),t,"h").w('"')}function c(e,t){return e.f(t.getPath(!1,["data","redirectUrl"]),t,"h")}function u(e,t){return e}function d(e,t){return e.h("Icon",t,{},{size:"lg"},"h")}function h(e,t){return e.w("disabled")}function p(e,t){return e}return e.register("standalone/landto-bumble/landto",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="svg-instant"><svg xmlns="http://www.w3.org/2000/svg"><symbol viewBox="0 0 64 64" id="icon-logo-apple"><path d="M38.93 11.77a10.3 10.3 0 0 0 2.46-7.5c-2.38.1-5.27 1.58-6.96 3.55-1.52 1.76-2.86 4.57-2.5 7.26 2.64.2 5.34-1.33 7-3.3m12.26 26.9c-.06.17-1 3.38-3.27 6.68-1.96 2.87-4 5.72-7.22 5.78-3.14.06-4.16-1.87-7.77-1.87-3.6 0-4.73 1.8-7.72 1.93-3.1.12-5.45-3.1-7.44-5.94-4.05-5.83-7.14-16.47-3-23.65a11.56 11.56 0 0 1 9.77-5.87c3.05-.05 5.92 2.04 7.78 2.04 1.88 0 5.36-2.53 9.04-2.16 1.53.08 5.85.63 8.63 4.67-.23.14-5.16 3-5.1 8.93.06 7.1 6.26 9.47 6.33 9.5" fill-rule="evenodd"/></symbol><symbol viewBox="0 0 64 64" id="icon-logo-android"><path d="M38.42 16.18c.66 0 1.2.54 1.2 1.2a1.2 1.2 0 0 1-1.2 1.18 1.2 1.2 0 0 1-1.2-1.18c0-.66.54-1.2 1.2-1.2zm-12 0c.66 0 1.2.54 1.2 1.2a1.2 1.2 0 0 1-1.2 1.18 1.2 1.2 0 0 1-1.2-1.18c0-.66.54-1.2 1.2-1.2zm-2.16-7.3l2.16 3.77c-3.94 1.93-6.6 5.72-6.6 10.06h25.22c0-4.32-2.67-8.1-6.62-10.04L40.6 8.9s.1-.2-.1-.3c-.2-.13-.34.06-.34.06l-2.2 3.8a13.63 13.63 0 0 0-5.55-1.17c-2 0-3.86.4-5.54 1.16l-2.2-3.8s-.12-.2-.32-.08c-.2.1-.1.3-.1.3zm-4.56 15.3v19.15c0 .95 1.15 2.2 2.1 2.2h3v6.52c0 1.66 1.22 3 2.72 3 1.5 0 2.72-1.34 2.72-3v-6.53h4.37v6.53c0 1.66 1.23 3 2.73 3s2.74-1.34 2.74-3v-6.53h2.98c.95 0 2.1-1.24 2.1-2.2V24.2H19.7zm-4.18-.4c1.5 0 2.72 1.35 2.72 3v11.36c0 1.66-1.22 3-2.72 3-1.5 0-2.72-1.34-2.72-3V26.78c0-1.65 1.22-3 2.72-3m33.8 0c1.5 0 2.73 1.35 2.73 3v11.36c0 1.66-1.22 3-2.72 3-1.5 0-2.72-1.34-2.72-3V26.78c0-1.65 1.24-3 2.74-3"/></symbol><symbol viewBox="0 0 254 20" id="chappy-wingman"><path d="M70.65 5.76h.03l4.07 13.37h4.18L84.45.7h-3.97L76.8 13.9 72.76.7h-4.13L64.6 13.8 61.06.7h-4.12l5.47 18.43h4.16l4.1-13.37zM87.05.7v18.43h3.88V.7h-3.87zm12.06 5.75l8.15 12.68h4.38V.7h-3.82v12.46L99.8.7h-4.5v18.43h3.8V6.45zM133.4 9.2h-9.72v3.47h5.7c-.46 1.8-2.3 3.1-4.83 3.1-3.4 0-5.77-2.68-5.77-5.87 0-3.35 2.6-5.85 5.76-5.85 2.54 0 4.27 1.55 4.68 3.1l3.76-1.1C132.18 3.1 129.2.4 124.56.4a9.6 9.6 0 0 0-9.7 9.52c0 5.24 3.9 9.48 9.66 9.48 4.55 0 8.86-3 8.86-8.76V9.2zm20.05-2.65v12.58h3.8V.7h-5.35l-5.06 12.26L141.67.7h-5.22v18.43h3.78V6.63h.04l5.25 12.5h2.58l5.3-12.58h.03zm19.44 8.62h-8.04l-1.48 3.96h-3.95L166.54.7h4.65l7.15 18.43h-4l-1.48-3.96zm-6.76-3.53h5.45l-2.73-7.25-2.7 7.24zm18.22-5.2l8.14 12.7h4.38V.68h-3.82v12.46L185 .7h-4.5v18.43h3.82V6.45zm24.94 7.78v5.9h6.27c10.93 0 13.32-5.9 13.32-5.9h-19.6zm0-6.86h.1v4.9h19.9c10.92 0 13.3-4.9 13.3-4.9h-33.3zM254 .5h-44.74v4.9h31.42C251.6 5.4 254 .5 254 .5zM44.74 14.2v5.9h-6.27c-10.93 0-13.32-5.9-13.32-5.9h19.6zm0-6.86h-.1v4.9h-19.9c-10.92 0-13.3-4.9-13.3-4.9h33.3zM0 .5h44.74v4.9H13.32C2.4 5.4 0 .5 0 .5z" fill="#FFF"/></symbol></svg></div><div class="landto-chappy ').x(t.getPath(!1,["data","isMobile"]),t,{block:i},{}).w('"><div class="layout layout--inherited layout--centered-content"><div class="landto-chappy__decorations"></div><div class="layout__content"><div class="landto-chappy__navigation">').h("NavigationBar",t,{},{logo:"true",logoAlt:"white",extraClass:"navigation-bar--static navigation-bar--no-background"},"h").w('</div><div class="landto-chappy__wingman"><svg><use xlink:href="#chappy-wingman"></use></svg></div></div><div class="layout__content layout__content--vpadded layout__content--hpadded">').x(t.getPath(!1,["data","isMobile"]),t,{block:n},{}).nx(t.getPath(!1,["data","isMobile"]),t,{block:r},{}).w('</div><div class="layout__content layout__content--vpadded layout__content--hpadded layout__content--centered">').x(t.getPath(!1,["data","isMobile"]),t,{block:l},{}).nx(t.getPath(!1,["data","isMobile"]),t,{block:v},{}).w("</div></div></div>")}function i(e,t){return e.w(" is-mobile ")}function n(e,t){return e.w('<div class="landto-chappy__invitation"><div class="landto-invitation"><div class="landto-invitation__user"><div class="landto-invitation__photo"><div class="multimedia"><div class="multimedia__image" style="background-image: url(').h("PhotoUrl",t,{},{src:t.getPath(!1,["data","photoUrl"]),width:"300"},"h").w(')"></div></div></div>').x(t.getPath(!1,["data","header"]),t,{block:a},{}).w("</div>").x(t.getPath(!1,["data","secondMessage"]),t,{block:s},{}).w("</div></div>")}function a(e,t){return e.w('<div class="landto-invitation__invite">').x(t.getPath(!1,["data","senderPicture"]),t,{block:o},{}).w('<div class="landto-invitation__comment">').f(t.getPath(!1,["data","header"]),t,"h").w("</div></div>")}function o(e,t){return e.w('<div class="landto-invitation__brick"><div class="brick brick--stretch brick--border"><div class="brick__image" style="background-image: url(').h("PhotoUrl",t,{},{src:t.getPath(!1,["data","senderPicture"]),width:"50"},"h").w(')"></div></div></div>')}function s(e,t){return e.w('<div class="landto-invitation__explanation">').f(t.getPath(!1,["data","secondMessage"]),t,"h").w("</div>")}function r(e,t){return e.w('<div class="landto-chappy__explanation"><div class="cta-box cta-box--inherited"><div class="cta-box__header">').h("t",t,{},{k:"558"},"h").w('</div><div class="cta-box__content">').h("t",t,{},{k:"559"},"h").w("</div></div></div>")}function l(e,t){return e.w('<div class="landto-chappy__floating-cta landto-chappy__floating-cta--responsive js-responsive-button"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{icon:c,attrs:h,href:p,block:m},{type:"primary-inverted",narrow:"true",text:t.getPath(!1,["data","actionText"]),extraClass:"needsclick"},"h").w('</div></div></div><div class="landto-chappy__floating-cta landto-chappy__floating-cta--static"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{icon:g,attrs:_,block:f},{type:"primary-inverted",narrow:"true",text:t.getPath(!1,["data","actionText"])},"h").w("</div></div></div>")}function c(e,t){return e.x(t.getPath(!1,["data","os","ios"]),t,{block:u},{}).x(t.getPath(!1,["data","os","android"]),t,{block:d},{})}function u(e,t){return e.h("Icon",t,{},{name:"icon-logo-apple",size:"lg"},"h")}function d(e,t){return e.h("Icon",t,{},{name:"icon-logo-android",size:"lg"},"h")}function h(e,t){return e.w('data-action="').f(t.getPath(!1,["actions","PRIMARY"]),t,"h").w('"')}function p(e,t){return e.f(t.getPath(!1,["data","redirectUrl"]),t,"h")}function m(e,t){return e}function g(e,t){return e.h("Icon",t,{},{size:"lg"},"h")}function _(e,t){return e.w("disabled")}function f(e,t){return e}function v(e,t){return e.w('<div class="landto-chappy__buttons"><a href="').f(t.getPath(!1,["data","os","iosUrl"]),t,"h").w('"><div class="landto-chappy__button"><svg width="186" height="56" viewBox="0 0 186 56" xmlns="http://www.w3.org/2000/svg"><path d="M0 4.005A4.005 4.005 0 0 1 4.006 0h177.588a4.01 4.01 0 0 1 4.006 4.005v47.99A4.005 4.005 0 0 1 181.594 56H4.006A4.01 4.01 0 0 1 0 51.995V4.005z" fill="#FFF"/><path d="M46.557 26.962c.042 4.83 4.203 6.427 4.253 6.444-.025.112-.652 2.304-2.212 4.53-1.303 1.96-2.67 3.874-4.837 3.91-2.107.048-2.815-1.248-5.23-1.248-2.44 0-3.195 1.212-5.215 1.296-2.065.077-3.644-2.092-4.994-4.033-2.698-3.963-4.8-11.17-1.982-16.076 1.366-2.405 3.856-3.954 6.516-3.995 2.067-.044 3.986 1.402 5.257 1.402 1.248 0 3.62-1.73 6.066-1.472 1.023.03 3.935.406 5.814 3.16-.152.092-3.47 2.053-3.433 6.082zm-3.98-11.85c-1.133 1.346-2.948 2.374-4.715 2.242-.23-1.814.664-3.746 1.666-4.923 1.133-1.336 3.1-2.36 4.674-2.43.206 1.887-.538 3.746-1.624 5.113zM70.964 28.433l-1.4-4.344c-.147-.446-.425-1.49-.835-3.136h-.05c-.162.708-.425 1.753-.785 3.135l-1.375 4.343h4.444zM75.8 35.37h-2.823l-1.546-4.887h-5.376L64.58 35.37h-2.75l5.33-16.638h3.29l5.35 16.64zm13.7-6.146c0 2.04-.547 3.653-1.644 4.837-.983 1.055-2.2 1.58-3.658 1.58-1.57 0-2.7-.566-3.39-1.702h-.048v6.32h-2.65V27.323c0-1.284-.034-2.6-.1-3.95h2.333l.148 1.9h.05c.884-1.43 2.225-2.147 4.026-2.147 1.408 0 2.582.56 3.523 1.678.94 1.12 1.41 2.593 1.41 4.42zm-2.7.098c0-1.168-.26-2.13-.785-2.888-.574-.79-1.343-1.186-2.308-1.186-.655 0-1.25.22-1.78.655-.532.437-.88 1.01-1.044 1.716-.082.33-.123.6-.123.813v2c0 .873.267 1.61.798 2.21.532.6 1.224.9 2.075.9 1 0 1.776-.386 2.332-1.16.556-.774.835-1.794.835-3.06zm16.426-.098c0 2.04-.55 3.653-1.647 4.837-.982 1.055-2.2 1.58-3.658 1.58-1.572 0-2.702-.566-3.388-1.702h-.05v6.32h-2.65V27.323c0-1.284-.033-2.6-.098-3.95h2.332l.147 1.9h.05c.883-1.43 2.224-2.147 4.026-2.147 1.407 0 2.582.56 3.525 1.678.94 1.12 1.41 2.593 1.41 4.42zm-2.7.098c0-1.168-.263-2.13-.788-2.888-.573-.79-1.34-1.186-2.307-1.186-.655 0-1.248.22-1.78.655-.53.437-.878 1.01-1.042 1.716-.08.33-.123.6-.123.813v2c0 .873.267 1.61.796 2.21.533.6 1.225.9 2.078.9.998 0 1.776-.386 2.332-1.16.555-.774.835-1.794.835-3.06zm18.045 1.383c0 1.415-.487 2.566-1.47 3.455-1.078.972-2.578 1.457-4.506 1.457-1.78 0-3.21-.345-4.29-1.036l.615-2.222a7.23 7.23 0 0 0 3.83 1.062c1 0 1.777-.227 2.335-.68.557-.453.833-1.06.833-1.818 0-.675-.228-1.244-.687-1.705-.455-.462-1.218-.89-2.282-1.288-2.898-1.087-4.345-2.678-4.345-4.772 0-1.367.507-2.488 1.523-3.362 1.013-.874 2.363-1.31 4.05-1.31 1.507 0 2.758.263 3.756.79l-.663 2.17c-.934-.508-1.988-.764-3.168-.764-.933 0-1.662.23-2.184.692a1.98 1.98 0 0 0-.663 1.506c0 .658.253 1.202.76 1.628.442.396 1.244.823 2.407 1.285 1.424.576 2.47 1.25 3.143 2.023.67.775 1.006 1.738 1.006 2.89zm8.766-5.332h-2.922v5.825c0 1.48.515 2.222 1.547 2.222.475 0 .87-.04 1.18-.123l.072 2.024c-.522.198-1.21.297-2.062.297-1.047 0-1.865-.32-2.456-.962-.588-.643-.884-1.72-.884-3.234v-6.047h-1.74v-2h1.74v-2.197l2.604-.79v2.987h2.922v2zm13.185 3.9c0 1.844-.523 3.358-1.57 4.542-1.097 1.218-2.555 1.827-4.372 1.827-1.75 0-3.145-.584-4.184-1.753-1.04-1.17-1.56-2.643-1.56-4.42 0-1.86.535-3.382 1.608-4.566 1.07-1.185 2.517-1.777 4.333-1.777 1.75 0 3.16.583 4.224 1.753 1.014 1.136 1.52 2.6 1.52 4.393zm-2.75.087c0-1.107-.236-2.055-.712-2.848-.556-.957-1.35-1.435-2.38-1.435-1.066 0-1.875.478-2.43 1.435-.477.793-.713 1.757-.713 2.897 0 1.106.236 2.054.712 2.846.573.957 1.375 1.436 2.407 1.436 1.013 0 1.806-.487 2.38-1.46.49-.81.736-1.768.736-2.872zm11.37-3.643a4.593 4.593 0 0 0-.837-.073c-.932 0-1.654.354-2.162 1.062-.44.625-.66 1.416-.66 2.37v6.294h-2.65l.023-8.22c0-1.383-.033-2.64-.1-3.777h2.31l.098 2.296h.073c.28-.79.72-1.425 1.327-1.9.59-.43 1.228-.644 1.915-.644.246 0 .467.018.664.05v2.54zm11.856 3.087c0 .477-.03.88-.097 1.21h-7.955c.03 1.184.415 2.09 1.153 2.715.67.56 1.538.838 2.6.838 1.18 0 2.253-.19 3.22-.568l.415 1.85c-1.13.496-2.463.743-4 .743-1.85 0-3.303-.548-4.36-1.643-1.054-1.094-1.583-2.563-1.583-4.406 0-1.81.49-3.317 1.474-4.518 1.03-1.283 2.42-1.924 4.173-1.924 1.72 0 3.02.64 3.905 1.924.702 1.02 1.054 2.28 1.054 3.778zm-2.53-.69c.02-.79-.154-1.474-.513-2.05-.46-.74-1.164-1.11-2.113-1.11-.868 0-1.572.36-2.11 1.085-.443.576-.705 1.267-.785 2.073h5.522z" fill="#000"/></svg></div></a><a href="').f(t.getPath(!1,["data","os","androidUrl"]),t,"h").w('"><div class="landto-chappy__button"><svg width="199" height="56" viewBox="0 0 199 56" xmlns="http://www.w3.org/2000/svg"><rect fill="#FFF" transform="matrix(-1 0 0 1 198.6 0)" width="198.6" height="56" rx="4"/><path d="M145.172 24.977c0-1.353-1.06-2.45-2.632-2.45h-2.83v4.9h2.963c1.39 0 2.5-1.097 2.5-2.45zm-21.398 4.75l5.166-2.2c-.535-.927-1.4-1.215-2.14-1.215-1.964 0-3.31 2.245-3.026 3.414zm-10.21 1.277c.025-.077.065-.25.092-.42.007-.027.01-.054.01-.054.03-.204.047-.41.046-.625a3.72 3.72 0 0 0-.05-.586 1.263 1.263 0 0 0-.01-.073 3.478 3.478 0 0 0-.132-.525c-.44-1.37-1.61-2.344-2.976-2.33-1.736.012-3.135 1.61-3.123 3.565.015 1.954 1.433 3.528 3.17 3.515 1.367-.012 2.524-1.005 2.974-2.468zm-12.315-1.07c0-1.688-1.185-3.55-3.24-3.55-2.056 0-3.24 1.862-3.24 3.55 0 1.69 1.184 3.55 3.24 3.55 2.055 0 3.24-1.862 3.24-3.55zm-12.602 0c0-1.688-1.183-3.55-3.24-3.55-2.055 0-3.24 1.862-3.24 3.55 0 1.69 1.185 3.55 3.24 3.55 2.057 0 3.24-1.862 3.24-3.55zm71.526 1.243c-.576-.393-1.455-.567-2.218-.567-1.675 0-2.62.85-2.62 1.78 0 1.036.988 1.55 1.913 1.55 1.343 0 2.924-1.125 2.924-2.763zM117.6 35.47h2.577V18.133H117.6V35.47zm31.514.25h2.353V20.23h-2.353v15.49zm-11.757 0V20.23h4.966c2.992 0 5.25 2.103 5.25 4.692 0 2.59-2.146 4.69-4.79 4.69h-3.072v6.108h-2.353zm-14.54-1.643c-2.068-2.292-2.068-6.046 0-8.338 2.068-2.292 5.6-2.28 7.604-.014.66.743 1.103 1.704 1.493 2.702l-7.74 3.272c.452.916 1.342 1.793 2.752 1.793 1.206 0 2.026-.406 2.89-1.637l2.026 1.367h.002c-.233.31-.52.615-.737.854-2.067 2.29-6.22 2.29-8.29 0zm-58.94-1.048c-3.51-3.556-3.408-9.265.106-12.82a8.947 8.947 0 0 1 6.41-2.664c2.218.01 4.435.84 6.17 2.474l-1.74 1.822a6.323 6.323 0 0 0-8.99.123c-2.494 2.594-2.552 6.76-.06 9.355 2.512 2.594 6.675 2.745 9.185.152.85-.877 1.138-1.997 1.31-3.14h-5.89v-2.5h8.275c.118.625.137 1.268.137 1.903 0 2.057-.886 4.236-2.255 5.643-1.566 1.61-3.75 2.443-6.06 2.423a9.444 9.444 0 0 1-6.597-2.77zm28.328-3.094c0-2.8 2.12-5.886 5.805-5.886 3.683 0 5.805 3.084 5.805 5.883 0 2.8-2.122 5.886-5.805 5.886-3.684 0-5.805-3.085-5.805-5.884zm-12.602 0c0-2.8 2.122-5.886 5.806-5.886 3.682 0 5.805 3.084 5.805 5.883 0 2.8-2.123 5.886-5.806 5.886-3.685 0-5.807-3.085-5.807-5.884zm74.352 5.05c-.67-.648-1.036-1.664-1.045-2.597a3.276 3.276 0 0 1 .863-2.284c.955-1.026 2.392-1.464 3.9-1.464.985 0 1.857.198 2.517.58 0-1.712-1.332-2.365-2.46-2.365-1.043 0-1.96.553-2.315 1.508l-2.13-.866c.38-1.034 1.572-2.8 4.392-2.8 1.375 0 2.74.488 3.627 1.436.89.948 1.185 2.13 1.185 3.7v5.873h-2.325v-1.05a3.96 3.96 0 0 1-1.274 1.013c-.595.294-1.298.395-1.945.395-1.06 0-2.227-.345-2.99-1.082zm11.263 5.343l2.352-5.596-4.164-9.7h2.37l2.97 6.91 2.904-6.91h2.372l-6.43 15.295h-2.374zm-58.408-.588c-.66-.585-1.22-1.49-1.55-2.125l2.25-.96c.146.275.354.7.688 1.064.577.628 1.35 1.06 2.286 1.06.873 0 1.86-.403 2.378-1.125.464-.647.645-1.47.645-2.353v-.882c-1.606 2.073-5.117 1.783-7.08-.36-2.1-2.292-2.08-6.012.042-8.303 2.095-2.084 5.204-2.347 7.033-.374l.004.005v-.997h2.436v10.632c0 2.706-.99 4.235-2.218 5.125-.9.653-2.16.95-3.27.95-1.444 0-2.68-.498-3.645-1.355zM25.77 11.853l16.25 16.265-16.613 16.028c-.004-.036-.02-.06-.02-.096V12.594c0-.386.166-.602.383-.74zm21.086 11.6l-3.782 3.65L29.21 13.228l10.357 6.002.618.357 6.67 3.866zm-19.188 20.54l15.386-14.842 3.75 3.754-6.62 3.835-2.083 1.207-1.806 1.047-3.6 2.087-.94.546c-.262.15-.52.302-.773.447l-3.312 1.92zm26.11-16.528c.655.356.73.974-.048 1.426l-1.975 1.145-.67.388-1.74 1.01-1.232.712-4.007-4.01 4.062-3.917c1.743 1.015 5.086 2.96 5.596 3.238l.014.01z" fill="#000"/></svg></div></a></div>')}return e.register("standalone/landto-chappy/landto",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,_.__dustBody=!0,f.__dustBody=!0,v.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout js-deeplink-container"><div class="layout__header">').h("NavigationBar",t,{},{logo:"true",actions:t.getPath(!1,["data","actions"]),extraClass:"navigation-bar--static"},"h").w('</div><div class="layout__content layout__content--hpadded"><div class="deeplink"><div class="deeplink__photo"><div class="multimedia multimedia--dark"><div class="multimedia__image" style="background-image: url(\'').h("PhotoUrl",t,{},{width:175,src:t.getPath(!1,["data","photoUrl"])},"h").w('\')"></div></div></div><div class="deeplink__fade"></div><div class="deeplink__info"><div class="deeplink__name">').f(t.getPath(!1,["data","title"]),t,"h").w('</div><div class="deeplink__announce">').f(t.getPath(!1,["data","message"]),t,"h",["s"]).w('</div></div></div></div><div class="layout__content layout__content--hpadded layout__content--vpadded"><div class="cta-box"><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{attrs:i,block:n},{type:"primary",text:t.getPath(!1,["data","actionText"]),extraClass:"needsclick",href:t.getPath(!1,["data","redirectUrl"])},"h").w('</div></div></div><div class="cta-box__additional js-footer ').x(t.getPath(!1,["data","hideFooter"]),t,{block:a},{}).w('">').h("t",t,{},{k:"523"},"h").w("</div></div></div></div>")}function i(e,t){return e.w('data-action="').f(t.getPath(!1,["actions","PRIMARY"]),t,"h").w('"')}function n(e,t){return e}function a(e,t){return e.w("is-hidden")}return e.register("landing/deeplink-badoo",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="svg-instant"><svg xmlns="http://www.w3.org/2000/svg"><symbol viewBox="0 0 64 64" id="icon-bumble-logo-apple"><defs><linearGradient id="icon-bumble-logo-apple-a" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#F8CD35"/><stop offset="100%" stop-color="#F8B52F"/></linearGradient></defs><rect width="64" height="64" fill="url(#icon-bumble-logo-apple-a)" rx="12"/><path fill="#FFF" d="M41.2570401,34.3408091 L22.7209136,34.3408091 C21.4446682,34.3408091 20.4091727,33.3079315 20.4091727,32.0339405 C20.4091727,30.7599495 21.4446682,29.727072 22.7209136,29.727072 L41.2570401,29.727072 C42.5332856,29.727072 43.5682401,30.7599495 43.5682401,32.0339405 C43.5682401,33.3079315 42.5332856,34.3408091 41.2570401,34.3408091 M34.8276628,42.3089546 L29.150291,42.3089546 C27.8735045,42.3089546 26.8385501,41.276077 26.8385501,40.002086 C26.8385501,38.7280951 27.8735045,37.6952175 29.150291,37.6952175 L34.8276628,37.6952175 C36.1049903,37.6952175 37.1399447,38.7280951 37.1399447,40.002086 C37.1399447,41.276077 36.1049903,42.3089546 34.8276628,42.3089546 M26.8737158,21.7589264 L37.104238,21.7589264 C38.3810245,21.7589264 39.415979,22.791804 39.415979,24.065795 C39.415979,25.3397859 38.3810245,26.3726635 37.104238,26.3726635 L26.8737158,26.3726635 C25.5969293,26.3726635 24.5619748,25.3397859 24.5619748,24.065795 C24.5619748,22.791804 25.5969293,21.7589264 26.8737158,21.7589264 M52.6166528,30.6562273 L43.4746451,14.8546122 C42.9936862,14.0232055 42.1042637,13.5111111 41.1418048,13.5111111 L22.8577895,13.5111111 C21.8953305,13.5111111 21.0059081,14.0232055 20.5254901,14.8546122 L11.3829415,30.6562273 C10.9019825,31.4876341 10.9019825,32.5123659 11.3829415,33.3437727 L20.5254901,49.1453878 C21.0059081,49.9767945 21.8953305,50.4888889 22.8577895,50.4888889 L41.1418048,50.4888889 C42.1042637,50.4888889 42.9936862,49.9767945 43.4746451,49.1453878 L52.6166528,33.3437727 C53.0981528,32.5123659 53.0981528,31.4876341 52.6166528,30.6562273"/></symbol><symbol viewBox="0 0 64 64" id="icon-bumble-logo-android"><svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="icon-bumble-logo-android-a" x1="50%" x2="50%" y1="3.154%" y2="97.89%"><stop offset="0%" stop-color="#F8CD35"/><stop offset="100%" stop-color="#F8B52F"/></linearGradient></defs><rect width="64" height="64" fill="url(#icon-bumble-logo-android-a)" rx="3.556"/><path fill="#FFF" d="M41.2548146,34.3397001 L22.7186881,34.3397001 C21.4424426,34.3397001 20.4069471,33.3068225 20.4069471,32.0328315 C20.4069471,30.7588406 21.4424426,29.725963 22.7186881,29.725963 L41.2548146,29.725963 C42.53106,29.725963 43.5660145,30.7588406 43.5660145,32.0328315 C43.5660145,33.3068225 42.53106,34.3397001 41.2548146,34.3397001 M34.8254372,42.3078456 L29.1480654,42.3078456 C27.8712789,42.3078456 26.8363245,41.274968 26.8363245,40.0009771 C26.8363245,38.7269861 27.8712789,37.6941085 29.1480654,37.6941085 L34.8254372,37.6941085 C36.1027647,37.6941085 37.1377192,38.7269861 37.1377192,40.0009771 C37.1377192,41.274968 36.1027647,42.3078456 34.8254372,42.3078456 M26.8714902,21.7578175 L37.1020124,21.7578175 C38.3787989,21.7578175 39.4137534,22.790695 39.4137534,24.064686 C39.4137534,25.338677 38.3787989,26.3715546 37.1020124,26.3715546 L26.8714902,26.3715546 C25.5947037,26.3715546 24.5597493,25.338677 24.5597493,24.064686 C24.5597493,22.790695 25.5947037,21.7578175 26.8714902,21.7578175 M52.6144272,30.6551184 L43.4724196,14.8535033 C42.9914606,14.0220965 42.1020381,13.5100021 41.1395792,13.5100021 L22.8555639,13.5100021 C21.8931049,13.5100021 21.0036825,14.0220965 20.5232645,14.8535033 L11.3807159,30.6551184 C10.8997569,31.4865251 10.8997569,32.511257 11.3807159,33.3426637 L20.5232645,49.1442788 C21.0036825,49.9756855 21.8931049,50.4877799 22.8555639,50.4877799 L41.1395792,50.4877799 C42.1020381,50.4877799 42.9914606,49.9756855 43.4724196,49.1442788 L52.6144272,33.3426637 C53.0959272,32.511257 53.0959272,31.4865251 52.6144272,30.6551184"/></svg></symbol><symbol viewBox="0 0 64 64" id="icon-logo-apple"><path d="M38.93 11.77a10.3 10.3 0 0 0 2.46-7.5c-2.38.1-5.27 1.58-6.96 3.55-1.52 1.76-2.86 4.57-2.5 7.26 2.64.2 5.34-1.33 7-3.3m12.26 26.9c-.06.17-1 3.38-3.27 6.68-1.96 2.87-4 5.72-7.22 5.78-3.14.06-4.16-1.87-7.77-1.87-3.6 0-4.73 1.8-7.72 1.93-3.1.12-5.45-3.1-7.44-5.94-4.05-5.83-7.14-16.47-3-23.65a11.56 11.56 0 0 1 9.77-5.87c3.05-.05 5.92 2.04 7.78 2.04 1.88 0 5.36-2.53 9.04-2.16 1.53.08 5.85.63 8.63 4.67-.23.14-5.16 3-5.1 8.93.06 7.1 6.26 9.47 6.33 9.5" fill-rule="evenodd"/></symbol><symbol viewBox="0 0 64 64" id="icon-logo-android"><path d="M38.42 16.18c.66 0 1.2.54 1.2 1.2a1.2 1.2 0 0 1-1.2 1.18 1.2 1.2 0 0 1-1.2-1.18c0-.66.54-1.2 1.2-1.2zm-12 0c.66 0 1.2.54 1.2 1.2a1.2 1.2 0 0 1-1.2 1.18 1.2 1.2 0 0 1-1.2-1.18c0-.66.54-1.2 1.2-1.2zm-2.16-7.3l2.16 3.77c-3.94 1.93-6.6 5.72-6.6 10.06h25.22c0-4.32-2.67-8.1-6.62-10.04L40.6 8.9s.1-.2-.1-.3c-.2-.13-.34.06-.34.06l-2.2 3.8a13.63 13.63 0 0 0-5.55-1.17c-2 0-3.86.4-5.54 1.16l-2.2-3.8s-.12-.2-.32-.08c-.2.1-.1.3-.1.3zm-4.56 15.3v19.15c0 .95 1.15 2.2 2.1 2.2h3v6.52c0 1.66 1.22 3 2.72 3 1.5 0 2.72-1.34 2.72-3v-6.53h4.37v6.53c0 1.66 1.23 3 2.73 3s2.74-1.34 2.74-3v-6.53h2.98c.95 0 2.1-1.24 2.1-2.2V24.2H19.7zm-4.18-.4c1.5 0 2.72 1.35 2.72 3v11.36c0 1.66-1.22 3-2.72 3-1.5 0-2.72-1.34-2.72-3V26.78c0-1.65 1.22-3 2.72-3m33.8 0c1.5 0 2.73 1.35 2.73 3v11.36c0 1.66-1.22 3-2.72 3-1.5 0-2.72-1.34-2.72-3V26.78c0-1.65 1.24-3 2.74-3"/></symbol></svg></div><div class="landto-bumble"><div class="layout layout--centered-content layout--inherited"><div class="layout__header">').h("NavigationBar",t,{},{logo:"true",logoAlt:"white",extraClass:"navigation-bar--static navigation-bar--no-background"},"h").w('</div><div class="layout__content"><div class="cta-box cta-box--inherited"><div class="cta-box__media"><a href="').f(t.getPath(!1,["data","redirectUrl"]),t,"h").w('" data-action="').f(t.getPath(!1,["actions","PRIMARY"]),t,"h").w('"><div class="landing-no-app__logo">').x(t.getPath(!1,["data","os","ios"]),t,{block:i},{}).x(t.getPath(!1,["data","os","android"]),t,{block:n},{}).w('<div class="landing-no-app__logo-badge">').h("Icon",t,{},{name:"badge-counter-1",size:"lg"},"h").w('</div></div></a></div><div class="cta-box__content">').f(t.getPath(!1,["data","header"]),t,"h").w('</div></div></div><div class="layout__footer layout__footer--hpadded layout__footer--vpadded"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{icon:a,attrs:r,href:l,block:c},{type:"primary-inverted",narrow:"true",text:t.getPath(!1,["data","actionText"]),extraClass:"needsclick"},"h").w("</div></div></div></div></div>")}function i(e,t){return e.w('<div class="landing-no-app__logo-icon landing-no-app__logo-icon--apple">').h("Icon",t,{},{name:"icon-bumble-logo-apple",size:"stretch"},"h").w("</div>")}function n(e,t){return e.w('<div class="landing-no-app__logo-icon landing-no-app__logo-android">').h("Icon",t,{},{name:"icon-bumble-logo-android",size:"stretch"},"h").w("</div>")}function a(e,t){return e.x(t.getPath(!1,["data","os","ios"]),t,{block:o},{}).x(t.getPath(!1,["data","os","android"]),t,{block:s},{})}function o(e,t){return e.h("Icon",t,{},{name:"icon-logo-apple",size:"lg"},"h")}function s(e,t){return e.h("Icon",t,{},{name:"icon-logo-android",size:"lg"},"h")}function r(e,t){return e.w('data-action="').f(t.getPath(!1,["actions","PRIMARY"]),t,"h").w('"')}function l(e,t){return e.f(t.getPath(!1,["data","redirectUrl"]),t,"h")}function c(e,t){return e}return e.register("standalone/landto-bumble/landing-no-app",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="svg-instant"><svg xmlns="http://www.w3.org/2000/svg"><symbol viewBox="0 0 64 64" id="icon-chappy-logo-apple"><rect width="64" height="64" fill="#FFF" rx="12"/><path fill="#000" d="M50.4560684,19.9897939 C50.8096182,20.3117996 50.9892194,20.7829563 50.9892194,21.2610418 L50.9892194,42.993509 C50.9892194,43.5839136 50.7087863,44.1553551 50.2064501,44.4653267 C49.9402393,44.6296116 49.6399316,44.7114805 49.3399886,44.7114805 C49.0385869,44.7114805 48.7377322,44.6288822 48.4722507,44.4647797 L31.9042735,34.2160275 C31.8984387,34.2123808 31.890963,34.2123808 31.8851282,34.2160275 L15.3169687,44.4647797 C15.0514872,44.6288822 14.7506325,44.7114805 14.4492308,44.7114805 C14.1492877,44.7114805 13.8489801,44.6296116 13.5827692,44.4653267 C13.080433,44.1553551 12.8,43.5839136 12.8,42.993509 L12.8,21.2599477 C12.8,20.7818623 12.9801481,20.3105232 13.3340627,19.9890646 C13.8938348,19.4801643 14.7012194,19.4212697 15.3169687,19.8023523 L31.8851282,30.0509221 C31.890963,30.0545688 31.8984387,30.0545688 31.9042735,30.0509221 L48.4722507,19.80217 C49.088547,19.4210873 49.8964786,19.4801643 50.4560684,19.9897939 Z M47.6628604,40.0854292 C47.6748946,40.092905 47.6905755,40.0841529 47.6905755,40.0699306 L47.6905755,24.197019 C47.6905755,24.1827967 47.6748946,24.1738623 47.6628604,24.1815204 L34.8329573,32.1180674 C34.8212877,32.1251785 34.8212877,32.1419534 34.8329573,32.1490646 L47.6628604,40.0854292 Z M16.0986439,40.0699306 C16.0986439,40.0841529 16.1143248,40.092905 16.126359,40.0854292 L28.9564444,32.1490646 C28.9679316,32.1419534 28.9679316,32.1251785 28.9564444,32.1180674 L16.126359,24.1815204 C16.1143248,24.1740446 16.0986439,24.1827967 16.0986439,24.197019 L16.0986439,40.0699306 Z"/></symbol><symbol viewBox="0 0 64 64" id="icon-chappy-logo-android"><rect width="64" height="64" fill="#FFF" rx="5.69"/><path fill="#000" d="M50.4560684,19.9897939 C50.8096182,20.3117996 50.9892194,20.7829563 50.9892194,21.2610418 L50.9892194,42.993509 C50.9892194,43.5839136 50.7087863,44.1553551 50.2064501,44.4653267 C49.9402393,44.6296116 49.6399316,44.7114805 49.3399886,44.7114805 C49.0385869,44.7114805 48.7377322,44.6288822 48.4722507,44.4647797 L31.9042735,34.2160275 C31.8984387,34.2123808 31.890963,34.2123808 31.8851282,34.2160275 L15.3169687,44.4647797 C15.0514872,44.6288822 14.7506325,44.7114805 14.4492308,44.7114805 C14.1492877,44.7114805 13.8489801,44.6296116 13.5827692,44.4653267 C13.080433,44.1553551 12.8,43.5839136 12.8,42.993509 L12.8,21.2599477 C12.8,20.7818623 12.9801481,20.3105232 13.3340627,19.9890646 C13.8938348,19.4801643 14.7012194,19.4212697 15.3169687,19.8023523 L31.8851282,30.0509221 C31.890963,30.0545688 31.8984387,30.0545688 31.9042735,30.0509221 L48.4722507,19.80217 C49.088547,19.4210873 49.8964786,19.4801643 50.4560684,19.9897939 Z M47.6628604,40.0854292 C47.6748946,40.092905 47.6905755,40.0841529 47.6905755,40.0699306 L47.6905755,24.197019 C47.6905755,24.1827967 47.6748946,24.1738623 47.6628604,24.1815204 L34.8329573,32.1180674 C34.8212877,32.1251785 34.8212877,32.1419534 34.8329573,32.1490646 L47.6628604,40.0854292 Z M16.0986439,40.0699306 C16.0986439,40.0841529 16.1143248,40.092905 16.126359,40.0854292 L28.9564444,32.1490646 C28.9679316,32.1419534 28.9679316,32.1251785 28.9564444,32.1180674 L16.126359,24.1815204 C16.1143248,24.1740446 16.0986439,24.1827967 16.0986439,24.197019 L16.0986439,40.0699306 Z"/></symbol><symbol viewBox="0 0 64 64" id="icon-logo-apple"><path d="M38.93 11.77a10.3 10.3 0 0 0 2.46-7.5c-2.38.1-5.27 1.58-6.96 3.55-1.52 1.76-2.86 4.57-2.5 7.26 2.64.2 5.34-1.33 7-3.3m12.26 26.9c-.06.17-1 3.38-3.27 6.68-1.96 2.87-4 5.72-7.22 5.78-3.14.06-4.16-1.87-7.77-1.87-3.6 0-4.73 1.8-7.72 1.93-3.1.12-5.45-3.1-7.44-5.94-4.05-5.83-7.14-16.47-3-23.65a11.56 11.56 0 0 1 9.77-5.87c3.05-.05 5.92 2.04 7.78 2.04 1.88 0 5.36-2.53 9.04-2.16 1.53.08 5.85.63 8.63 4.67-.23.14-5.16 3-5.1 8.93.06 7.1 6.26 9.47 6.33 9.5" fill-rule="evenodd"/></symbol><symbol viewBox="0 0 64 64" id="icon-logo-android"><path d="M38.42 16.18c.66 0 1.2.54 1.2 1.2a1.2 1.2 0 0 1-1.2 1.18 1.2 1.2 0 0 1-1.2-1.18c0-.66.54-1.2 1.2-1.2zm-12 0c.66 0 1.2.54 1.2 1.2a1.2 1.2 0 0 1-1.2 1.18 1.2 1.2 0 0 1-1.2-1.18c0-.66.54-1.2 1.2-1.2zm-2.16-7.3l2.16 3.77c-3.94 1.93-6.6 5.72-6.6 10.06h25.22c0-4.32-2.67-8.1-6.62-10.04L40.6 8.9s.1-.2-.1-.3c-.2-.13-.34.06-.34.06l-2.2 3.8a13.63 13.63 0 0 0-5.55-1.17c-2 0-3.86.4-5.54 1.16l-2.2-3.8s-.12-.2-.32-.08c-.2.1-.1.3-.1.3zm-4.56 15.3v19.15c0 .95 1.15 2.2 2.1 2.2h3v6.52c0 1.66 1.22 3 2.72 3 1.5 0 2.72-1.34 2.72-3v-6.53h4.37v6.53c0 1.66 1.23 3 2.73 3s2.74-1.34 2.74-3v-6.53h2.98c.95 0 2.1-1.24 2.1-2.2V24.2H19.7zm-4.18-.4c1.5 0 2.72 1.35 2.72 3v11.36c0 1.66-1.22 3-2.72 3-1.5 0-2.72-1.34-2.72-3V26.78c0-1.65 1.22-3 2.72-3m33.8 0c1.5 0 2.73 1.35 2.73 3v11.36c0 1.66-1.22 3-2.72 3-1.5 0-2.72-1.34-2.72-3V26.78c0-1.65 1.24-3 2.74-3"/></symbol></svg></div><div class="landto-chappy"><div class="layout layout--centered-content layout--inherited"><div class="landto-chappy__decorations"></div><div class="layout__header">').h("NavigationBar",t,{},{
logo:"true",logoAlt:"white",extraClass:"navigation-bar--static navigation-bar--no-background"},"h").w('</div><div class="layout__content"><div class="cta-box cta-box--inherited"><div class="cta-box__media"><a href="').f(t.getPath(!1,["data","redirectUrl"]),t,"h").w('" data-action="').f(t.getPath(!1,["actions","PRIMARY"]),t,"h").w('"><div class="landing-no-app__logo"><div class="landing-no-app__logo-icon">').x(t.getPath(!1,["data","os","ios"]),t,{block:i},{}).x(t.getPath(!1,["data","os","android"]),t,{block:n},{}).w('</div><div class="landing-no-app__logo-badge">').h("Icon",t,{},{name:"badge-counter-1",size:"lg"},"h").w('</div></div></a></div><div class="cta-box__content">').f(t.getPath(!1,["data","header"]),t,"h").w('</div></div></div><div class="layout__footer layout__footer--hpadded layout__footer--vpadded"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{icon:a,attrs:r,block:l},{type:"primary-inverted",narrow:"true",text:t.getPath(!1,["data","actionText"]),href:t.getPath(!1,["data","redirectUrl"]),extraClass:"needsclick"},"h").w("</div></div></div></div></div>")}function i(e,t){return e.h("Icon",t,{},{name:"icon-chappy-logo-apple",size:"stretch"},"h")}function n(e,t){return e.h("Icon",t,{},{name:"icon-chappy-logo-android",size:"stretch"},"h")}function a(e,t){return e.x(t.getPath(!1,["data","os","ios"]),t,{block:o},{}).x(t.getPath(!1,["data","os","android"]),t,{block:s},{})}function o(e,t){return e.h("Icon",t,{},{name:"icon-logo-apple",size:"lg"},"h")}function s(e,t){return e.h("Icon",t,{},{name:"icon-logo-android",size:"lg"},"h")}function r(e,t){return e.w('data-action="').f(t.getPath(!1,["actions","PRIMARY"]),t,"h").w('"')}function l(e,t){return e}return e.register("standalone/landto-chappy/landing-no-app",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout"><div class="layout__header">').h("NavigationBar",t,{},{logo:"true",scrollToggle:"1",scrollToggleClass:"navigation-bar--shadow"},"h").w('</div><div class="layout__content layout__content--hpadded"><div class="cta-box cta-box--vpadded"><div class="cta-box__media"><div class="brick-wrapper brick-wrapper--xxxlg brick-wrapper--padded"><div class="brick-wrapper__item"><div class="brick brick--stretch"><div class="brick__image" data-action="').f(t.getPath(!1,["actions","PRIMARY"]),t,"h").w('" style="background-image: url(\'').f(t.getPath(!1,["data","senderPicture"]),t,"h").w('\')"></div><div class="brick__badge brick__badge--bc">').h("Icon",t,{},{name:"badge-counter-1",size:"lg"},"h").w('</div></div></div></div></div><div class="cta-box__header cta-box__header--sm">').f(t.getPath(!1,["data","headerText"]),t,"h").w("</div>").x(t.getPath(!1,["data","content"]),t,{block:i},{}).w('<div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{icon:n,attrs:a,block:o},{type:"primary",text:t.getPath(!1,["data","ctaText"])},"h").w('</div><div class="button-wrapper__item"><button class="inline-button inline-button--primary inline-button--sm" data-action="').f(t.getPath(!1,["actions","SECONDARY"]),t,"h").w('"><span class="inline-button__text">').f(t.getPath(!1,["data","secondaryText"]),t,"h").w('</span></button></div></div></div><div class="cta-box__additional">').h("t",t,{},{k:"390"},"h").w("</div></div></div></div>")}function i(e,t){return e.w('<div class="cta-box__content">').f(t.getPath(!1,["data","content"]),t,"h").w("</div>")}function n(e,t){return e.h("Icon",t,{},{name:"generic-button-facebook",size:"sm"},"h")}function a(e,t){return e.w('data-action="').f(t.getPath(!1,["actions","PRIMARY"]),t,"h").w('"')}function o(e,t){return e}return e.register("invite-landing/invite-landing-facebook",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(3)(i(4)),a=i(103),o=i(113),s=i(131),r=i(178),l=i(272),c=i(111),u=i(102),d=i(126),h=i(121),p=i(173),m=i(3608),g=i(101).ClickEvent,_=c("OPEN_APP"),f=h.extend({headerTemplate:null,screenName:497,init:function(){var e=this;f._super.init.apply(this,arguments),this.view_=this.registerView(new p({el:this.parent[0]})).setActions(_).on(_.OPEN_APP,function(){r.remove("DEEPLINK-USER-CACHE"),l.completeCurrentPage(),u.track(g,{element:466},!0),window.location=e.appStoreLink_})},onStart:function(){var e=this,t=r.getObject("DEEPLINK-USER-CACHE");if(!t)return this.goBack_();this.renderDeeplinkAppBlocker_(t);var i=s.createAppStoreBadgeUrl();i&&s.preloadImage(i).then(function(t){var i=(0,n.default)(t,1)[0];e.view_.$el.find(".js-app-store").removeClass("is-hidden").html('<img src="'.concat(i,'">'))})},renderDeeplinkAppBlocker_:function(e){this.appStoreLink_="".concat(e.appStoreLink,"&af_sub2=").concat(o.getUserId()),this.view_.setTemplate(m);var t={partnerId:d.get("partner_id"),senderName:e.senderName,senderPicture:e.senderPicture};this.view_.update(t)},onNavigationAction:function(){u.track(g,{element:51}),this.goBack_()},goBack_:function(){r.remove("DEEPLINK-USER-CACHE"),l.completeCurrentPage(),a.back()}},"DownloadAppBlocker");e.exports=f},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="layout layout--centered-content"><div class="layout__header">').h("NavigationBar",t,{},{close:"true",logo:"false"},"h").w('</div><div class="layout__content layout__content--hpadded layout__content--vpadded"><div class="cta-box"><div class="cta-box__media"><div class="fake-app-icon"><div class="fake-app-icon__icon"><svg class="icon-inline" data-qa-icon-name="logo-store-').f(t.getPath(!1,["data","partnerId"]),t,"h").w('"><use xlink:href="#logo-store-').f(t.getPath(!1,["data","partnerId"]),t,"h").w('" /></svg></div><div class="fake-app-icon__badge">').h("Icon",t,{},{name:"badge-counter-1",size:"stretch"},"h").w('</div></div></div><div class="cta-box__header cta-box__header--sm">').h("t",t,{},{k:"632"},"h").w('</div><div class="cta-box__content">').h("t",t,{},{k:"633"},"h").w('</div><div class="cta-box__content">&nbsp;</div><div class="cta-box__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{text:i,attrs:n,block:a},{type:"primary",narrow:"true"},"h").w("</div></div></div></div></div></div>")}function i(e,t){return e.h("t",t,{},{k:"634"},"h")}function n(e,t){return e.w('data-action="').f(t.getPath(!1,["actions","OPEN_APP"]),t,"h").w('"data-qa-action="open-app"')}function a(e,t){return e}return e.register("invite-landing/invite-landing",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(98),a=i(103),o=i(102),s=i(126),r=i(99),l=i(121),c=i(3610),u=i(101).ClickEvent,d=l.extend({headerTemplate:null,transition:!1,onStart:function(e){var t=e.title,i=e.message,a=e.type;this.type=a;var o=25===a?"account-abuse-18only":"account-abuse-blocked";this.renderReactView(n.createElement(c,{icon:o,title:t,message:i,partnerId:s.get("partner_id"),onClickTerms:this.onClickTerms,footer:r.get(639,"","","")}),this.parent[0]),d._super.onStart.apply(this,arguments)},onClickTerms:function(e){e.preventDefault(),a.navigate("terms"),o.track(u,{element:161})},getScreenName:function(){return 25===this.type?267:516}},"AccountBlockedController");e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(427),o=i(133),s=i(130),r=i(185),l=i(138),c=i(170),u=i(246),d=i(143),h=i(172),p=i(151),m=i(152),g=i(233),_=i(106);e.exports=a(function(e){var t=e.icon,i=e.title,a=e.message,f=e.partnerId,v=e.onClickTerms,E=e.footer,b=e.scrollToggle;return n.createElement(o,null,n.createElement(l,null,n.createElement(c,{position:"fixed",shadow:b},n.createElement(u,null,n.createElement("svg",null,n.createElement("use",{xlinkHref:"#logo-".concat(f)})))),n.createElement(c,null)),n.createElement(s,{hpadded:!0,vpadded:!0,align:"center"},n.createElement(d,null,n.createElement(h,null,n.createElement(_,{name:t,size:"jumbo-lg"})),n.createElement(p,{text:i}),n.createElement(m,{text:a}))),n.createElement(r,{hpadded:!0,vpadded:!0},n.createElement(g,{text:E,onClick:v})))})},function(e,t,i){"use strict";var n=i(98),a=i(103),o=i(102),s=i(126),r=i(99),l=i(121),c=i(3612),u=i(101),d=u.ClickEvent,h=u.ViewScreenEvent,p=l.extend({headerTemplate:null,onStart:function(e){var t=e.notification.promo_block,i=t.header,l=t.mssg,u=t.buttons;this.renderReactView(n.createElement(c,{title:i,message:l,buttonText:u[0].text,partnerId:s.get("partner_id"),onDismiss:function(){o.track(d,{element:288,screen_name:515}),a.back()},onClickTerms:function(e){e.preventDefault(),a.navigate("terms"),o.track(d,{element:161,screen_name:515})},footer:r.get(639,"","","")}),this.parent[0]),p._super.onStart.apply(this,arguments),o.track(h,{screen_name:515})}},"AbuseWarningController");e.exports=p},function(e,t,i){"use strict";var n=i(98),a=i(427),o=i(133),s=i(130),r=i(185),l=i(138),c=i(170),u=i(246),d=i(143),h=i(160),p=i(151),m=i(172),g=i(152),_=i(154),f=i(233),v=i(106);e.exports=a(function(e){var t=e.title,i=e.message,a=e.buttonText,E=e.partnerId,b=e.onDismiss,y=e.onClickTerms,k=e.footer,S=e.scrollToggle;return n.createElement(o,null,n.createElement(l,null,n.createElement(c,{position:"fixed",shadow:S},n.createElement(u,null,n.createElement("svg",null,n.createElement("use",{xlinkHref:"#logo-".concat(E)})))),n.createElement(c,null)),n.createElement(s,{hpadded:!0,vpadded:!0,align:"center"},n.createElement(d,null,n.createElement(m,null,n.createElement(v,{name:"account-abuse-warning",size:"jumbo-lg"})),n.createElement(p,{text:t}),n.createElement(g,{text:i}),n.createElement(h,null,n.createElement(_,{type:"transparent",color:"primary",text:a,onClick:b})))),n.createElement(r,{hpadded:!0,vpadded:!0},n.createElement(f,{text:k,onClick:y})))})},function(e,t,i){"use strict";var n=i(99),a=i(113),o=i(159),s=i(150),r=i(111),l=i(3614),c=i(124),u=i(618),d=i(121),h=i(103).navigate,p=i(101),m=p.ViewScreenEvent,g=p.ClickEvent,_=i(102),f=r("LOGIN","OPEN_PAGE"),v=o.extend({headerTemplate:null,init:function(){var e=this;v._super.init.apply(this,arguments),this.view_=this.registerView(new l).setActions(f).on(f.OPEN_PAGE,this.onOpenPage_,this).on(f.LOGIN,this.onLogin_,this),this.loginObserver_=a.getLoginObserver(function(t){t.isAuthenticated?e.onLoginSuccess_():e.handleError_()})},onNavigationAction:function(e){e===d.BUTTONS.CLOSE&&_.track(g,{element:52}),v._super.onNavigationAction.apply(this,arguments)},open:function(e){var t=e.parameters;v._super.open.apply(this,arguments),_.track(m,{screen_name:350}),this.view_.reset(),this.view_.appendTo(this.parent);var i=t.user,n=t.photoId;this.photoId_=n,u.preloadExternalProvider(n),this.render_(i)},onStart:function(){v._super.onStart.apply(this,arguments),s.on(s.EVENTS.AUTH_ERROR,this.handleError_,this)},render_:function(e){this.view_.update({screenName:this.screenName,userPhoto:e.profile_photo.preview_url,userInfo:"".concat(e.name,", ").concat(e.age),terms:n.get(155,"","","/legal/terms","","","/legal/privacy","","","/legal/privacy/cookies","","","/legal/privacy","")})},onStop:function(){v._super.onStop.apply(this,arguments),this.loginObserver_.stop(),s.off(s.EVENTS.AUTH_ERROR,this.handleError_,this)},handleError_:function(){c.showNotification({type:c.TYPES.ERROR}),u.preloadExternalProvider(this.photoId_)},onLoginSuccess_:function(){h("lookalikes",!0)},onOpenPage_:function(e){h(e)},onLogin_:function(){_.track(g,{element:118}),u(this.photoId_)}},"LandingPage");e.exports=v},function(e,t,i){"use strict";var n=i(173),a=i(3615),o=n.extend({template_:a,events:Object.assign({"click a":"goToLink_"},n.prototype.events),goToLink_:function(e){e.preventDefault(),this.trigger(this.ACTIONS.OPEN_PAGE,e.target.pathname)}},"LookalikeLandingView");e.exports=o},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(137),s=i(209),r=i(134),l=i(133),c=i(130),u=i(185),d=i(138),h=i(233),p=i(106);e.exports=i(108)("LookalikesLanding",function(e){return n.createElement(l,null,n.createElement(d,null,n.createElement(o,{extraClass:"navigation-bar--static",close:"true"})),n.createElement(c,{align:"center"},n.createElement("div",{className:"cta-box"},n.createElement("div",{className:"cta-box__media"},n.createElement("div",{className:"brick-wrapper brick-wrapper--xxxxlg"},n.createElement("div",{className:"brick-wrapper__item"},n.createElement("div",{className:"brick brick--stretch"},n.createElement(s,{src:e.data&&e.data.userPhoto,size:175}))))),n.createElement("div",{className:"cta-box__header"},e.data&&e.data.userInfo),n.createElement("div",{className:"cta-box__content"},a.get(542)),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},n.createElement("div",{className:"button-wrapper__item","data-action":e.actions&&e.actions.LOGIN},n.createElement(r,{type:"facebook",narrow:"true",icon:n.createElement(p,{name:"generic-button-facebook",size:"sm"}),text:a.get(363),extraClass:"js-button-facebook"})))))),n.createElement(u,{hpadded:!0,vpadded:!0},n.createElement(h,{text:e.data&&e.data.terms})))})},function(e,t,i){"use strict";var n=i(102),a=i(103),o=i(121),s=i(3617),r=i(101).ClickEvent,l=o.extend({notificationScreenAccess:3,screenName:150,init:function(){this.view_=this.registerView(new s({el:this.parent[0]})).on(s.EVENTS.BACK,this.onBack_,this).on(s.EVENTS.CAMERA_ERROR,this.onCameraError_,this).on(s.EVENTS.FORCE_EXIT,this.onForceBack_,this).on(s.EVENTS.TAKE_PICTURE,this.onTakePicture_,this)},onStart:function(){l._super.onStart.apply(this,arguments),a.navigationEvent.subscribe(this.onCancelPicture_,this),this.view_.update(this.getParameters())},onStop:function(){l._super.onStop.apply(this,arguments),this.view_.stopMedia(),a.navigationEvent.unsubscribe(this.onCancelPicture_,this)},getScreenName:function(){return this.getParameter("hasOverlay")?545:150},onTakePicture_:function(e){a.navigationEvent.unsubscribe(this.onCancelPicture_,this),n.track(r,{element:587,parentElement:222});var t=this.getParameter("onTakePicture");t&&t(e)},onCancelPicture_:function(){var e=this.getParameter("onCancelPicture");e&&e()},onBack_:function(){n.track(r,{element:113,parentElement:222}),a.back()},onForceBack_:function(){a.back()},onCameraError_:function(){var e=this.getParameter("onCameraError");e&&e()}},"CameraPage");e.exports=l},function(e,t,i){"use strict";var n=i(3),a=n(i(4)),o=n(i(127)),s=i(100),r=i(109),l=i(3618),c=i(162),u=i(5),d=i(3619),h={TAKE_PICTURE:"TAKE_PICTURE",CAMERA_ERROR:"CAMERA_ERROR",BACK:"BACK",FORCE_EXIT:"FORCE_EXIT"},p=r.extend({events:{"click .js-camera-shutter":"takePicture","click .js-back":"onBack"},init:function(){this.onResize_=s.debounce(this.onResize_,300,{leading:!0}),this.takePicture=s.throttle(this.takePicture,1200,{trailing:!1}),this.isSelfie=!1},onEnable:function(){c.on(c.EVENTS.RESIZE,this.onResize_,this)},onDisable:function(){c.off(c.EVENTS.RESIZE,this.onResize_,this)},update:function(e){this.isSelfie="user"===e.facingMode,this.render(e)},onResize_:function(){this.setupCamera()},getCameraScreenSize:function(){var e=c.getScreenDimensions(),t=e.width,i=e.height;return c.getOrientation()===c.ORIENTATION.PORTRAIT?i-=100:t-=100,{width:t,height:i}},setupCamera:function(){var e=this,t=this.getCameraScreenSize(),i=t.width,n=t.height;this.video=this.$el.find(".js-video")[0],this.video.width=i,this.video.height=n,window.navigator.mediaDevices.getUserMedia({video:{facingMode:this.isSelfie?"user":"environment"},audio:!1}).then(function(t){return e.onGetMedia(t)}).catch(function(t){e.log.error(t),e.trigger(h.CAMERA_ERROR)})},render:function(e){this.$el.html(l.render((0,o.default)({},e,{isSelfie:this.isSelfie}))),this.animate(e),this.setupCamera()},animate:function(e){var t=this;if(e.hasOverlay){var i=(e.previewTooltip||"x x x").match(/\S+/g).length,n=Math.max(1500,500*i);setTimeout(function(){t.$(".js-camera-preview-tooltip").removeClass("is-visible").addClass("is-invisible"),t.$(".js-camera-preview").removeClass("camera-preview--overlay")},n)}},onGetMedia:function(e){var t=this;this.videoTrack=e.getVideoTracks()[0],this.video.srcObject=e,this.video.play().then(function(){var e=t.getImageScaleTransform();t.video.style.transform="scale(".concat(t.isSelfie?-e:e,", ").concat(e,")")})},getImageScaleTransform:function(){if(!this.videoTrack.getSettings)return 1;var e=this.videoTrack&&this.videoTrack.getSettings(),t=e&&e.width,i=e&&e.height,n=this.getCameraScreenSize(),a=n.width,o=n.height;if(a<o&&!u.isIOs){var s=[i,t];t=s[0],i=s[1]}return t&&i?i/t<o/a?o/i/(a/t):a/t/(o/i):1},takePicture:function(){var e=this;if(this.$el.find(".js-camera-shutter").addClass("is-pressed"),this.videoTrack.muted)this.trigger(h.FORCE_EXIT);else{var t=this.getVideoSnapshot(),i=(0,a.default)(t,2),n=i[0],o=i[1];this.referenceImageData=o.getImageData(0,0,n.width,n.height),this.showFlash().then(function(){return e.getImageBlobFromCanvas()}).then(function(t){e.trigger(h.TAKE_PICTURE,t)}).catch(function(t){t&&e.log.error(t),e.trigger(h.FORCE_EXIT)})}},stopMedia:function(){var e=this.video.srcObject;e&&((e.getTracks()||[]).forEach(function(e){e.stop()}),this.video.srcObject=null)},showFlash:function(){var e=this;return new Promise(function(t){e.$el.find(".js-camera-flash").addClass("is-active"),setTimeout(function(){t()},800)})},getImageBlobFromCanvas:function(){var e=this.getVideoSnapshot(),t=(0,a.default)(e,2),i=t[0],n=t[1],o=n.getImageData(0,0,i.width,i.height),s=d(o,this.referenceImageData);return n.putImageData(s,0,0),new Promise(function(e,t){i.toBlob(function(i){i?e(i):t(new Error("Failed to get image from canvas"))})})},onBack:function(){this.trigger(h.BACK)},getVideoSnapshot:function(){var e=document.createElement("canvas");e.height=this.video.videoHeight,e.width=this.video.videoWidth;var t=e.getContext("2d");return this.isSelfie&&(t.translate(e.width,0),t.scale(-1,1)),t.drawImage(this.video,0,0,e.width,e.height),[e,t]}},"CameraView");p.EVENTS=h,e.exports=p},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="camera js-screen-container"><div class="camera__camera"><!-- <video class="camera__canvas js-video ').x(t.get(["isSelfie"],!1),t,{block:i},{}).w('" autoplay muted playsinline></video> --><video class="camera__canvas js-video ').x(t.get(["isSelfie"],!1),t,{block:n},{}).w('" autoplay playsinline></video><div class="camera__flash-light js-camera-flash"></div>').x(t.get(["previewGestureUrl"],!1),t,{block:a},{}).w('</div><div class="camera__actions"><div class="camera__extra "><div class="camera__cancel js-back" data-qa="close-camera">').h("t",t,{},{k:"19"},"h").w('</div></div><div class="camera__button js-camera-shutter" data-qa="camera-shutter"></div><div class="camera__extra"></div></div></div>')}function i(e,t){return e.w("is-selfie")}function n(e,t){return e.w("is-selfie")}function a(e,t){return e.w('<div class="camera__preview"><div class="').x(t.get(["hasOverlay"],!1),t,{block:o},{}).w(' camera-preview js-camera-preview"><div class="camera-preview__media">').x(t.get(["hasOverlay"],!1),t,{block:s},{}).w('<div class="multimedia"><div class="multimedia__image" style="background-image: url(\'').f(t.get(["previewGestureUrl"],!1),t,"h").w("')\"></div></div></div></div></div>")}function o(e,t){return e.w("camera-preview--overlay")}function s(e,t){return e.w('<div class="tooltip tooltip--tc is-visible js-camera-preview-tooltip"><div class="tooltip_"><div class="tooltip__content">').f(t.get(["previewTooltip"],!1),t,"h").w("</div></div></div>")}return e.register("camera/camera",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=function(e,t){var i=function(e,t){var i=!1;if(t||(i=!1),e.width===t.width&&e.height===t.height)for(var n=e.data.length,a=0;a<n;a+=1)if(e.data[a]!==t.data[a]){i=!0;break}return i}(e,t)?255:0;return e.data[0]=i,e.data[1]=i,e.data[2]=i,e.data[3]=255,e}},function(e,t,i){"use strict";var n=i(102),a=i(278),o=i(103),s=i(121),r=i(3621),l=i(101).ClickEvent,c=s.extend({notificationScreenAccess:3,init:function(){this.view_=this.registerView(new r),this.view_.on(r.EVENTS.DOWNLOAD_APP,this.onDownloadApp_,this),this.view_.on(r.EVENTS.SKIP,this.onSkip_,this)},getScreenName:function(){return Boolean(this.getParameter("isHardBlocker"))?492:491},onStart:function(){c._super.onStart.apply(this,arguments),this.view_.update({isHardBlocker:Boolean(this.getParameter("isHardBlocker"))}),this.view_.appendTo(this.parent)},onDownloadApp_:function(){n.track(l,{element:466});var e=Boolean(this.getParameter("isHardBlocker"))?"mw-verification-camera-hard-blocker":"mw-verification-camera-soft-blocker";window.open(a(e),"_blank")},onSkip_:function(){n.track(l,{element:65}),o.back()}},"VerificationAppBlockerPage");e.exports=c},function(e,t,i){"use strict";var n=i(3)(i(127)),a=i(109),o=i(3622),s={DOWNLOAD_APP:"DOWNLOAD_APP",SKIP:"SKIP"},r={badoo:"/img/no-sprite/photo-verification-blocker/camera-not-supported-badoo.86c9602f16bfc12a6f0b.png",blendr:"/img/no-sprite/photo-verification-blocker/camera-not-supported-blendr.08f341579743a536b694.png",fiesta:"/img/no-sprite/photo-verification-blocker/camera-not-supported-fiesta.5c14ec22aec5115bae9f.png",hotornot:"/img/no-sprite/photo-verification-blocker/camera-not-supported-hotornot.51333212cdfffc804873.png"},l=a.extend({events:{"click .js-download-app":"onDownloadApp","click .js-skip":"onSkip"},update:function(e){this.$el.html(o.render((0,n.default)({},e,{blockerImage:r[window._partner_id]})))},onDownloadApp:function(){this.trigger(s.DOWNLOAD_APP)},onSkip:function(){this.trigger(s.SKIP)}},"VerificationAppBlockerView");l.EVENTS=s,e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(99),o=i(134);e.exports=i(108)("Blocker.downloadApp",function(e){return n.createElement("div",{className:"layout"},n.createElement("div",{className:"layout__content"},n.createElement("div",{className:"blocker-photo-verification-image"},n.createElement("div",{className:"blocker-photo-verification-image__image",style:{backgroundImage:"url('".concat(e.blockerImage,"')")}})),n.createElement("div",{className:"cta-box cta-box--hpadded"},n.createElement("div",{className:"cta-box__header"},a.get(629)),n.createElement("div",{className:"cta-box__content"},e.isHardBlocker?a.get(626):a.get(625)),n.createElement("div",{className:"cta-box__buttons"},n.createElement("div",{className:"button-wrapper"},e.isHardBlocker?n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{type:"primary",href:e.deeplink,narrow:"true",extraClass:"js-download-app",text:a.get(628)})):n.createElement(n.Fragment,null,n.createElement("div",{className:"button-wrapper__item"},n.createElement(o,{type:"primary",href:e.deeplink,narrow:"true",extraClass:"js-download-app",text:a.get(627)})),n.createElement("div",{className:"button-wrapper__item"},n.createElement("button",{className:"inline-button js-skip","data-qa-hint":"cancel"},n.createElement("span",{className:"inline-button__text"},a.get(630))))))))))})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(98),a=i(159),o=i(3710),s=a.extend({headerTemplate:null,screenName:null,onStart:function(){var e=this;s._super.onStart.apply(this,arguments);var t=this.getParameters();this.screenName=t.popup?744:446,this.reactViewId_=this.renderReactView(n.createElement(o,{promo:t.promo,popup:t.popup,pageId:t.pageId,callback:t.callback,onAwardCollected:function(){e.screenName=745}}),this.parent[0])},onStop:function(){s._super.onStop.apply(this,arguments),this.removeReactView(this.reactViewId_)}},"DailyRewardsPage");e.exports=s},function(e,t,i){"use strict";function n(e){f.track(N,{element:e})}function a(e){f.track(I,{banner_id:e,position_id:13})}function o(e){f.track(x,{banner_id:e,position_id:13})}var s=i(3),r=s(i(110)),l=s(i(112)),c=s(i(114)),u=s(i(115)),d=s(i(123)),h=s(i(116)),p=i(98),m=i(126),g=i(122),_=i(103),f=i(102),v=i(169),E=i(124),b=i(239),y=i(3711),k=i(3713),S=i(3714),w=i(105),C=w.String,T=w.ServerGetDailyRewards,P=i(101),N=P.ClickEvent,I=P.ViewBannerEvent,x=P.ClickBannerEvent,A=function(e){function t(e){var i;(0,r.default)(this,t),i=(0,c.default)(this,(0,u.default)(t).call(this,e));var n=e.promo&&e.promo.getButtons([])[0];return i.state={rewards:[],modalVisible:!1,modalData:{},popup:e.popup||!1,popupData:{mssg:e.promo&&e.promo.getMssg(),buttonText:n&&n.getText()}},i.onRewardClick=i.onRewardClick.bind((0,d.default)(i)),i.onPopupClose=i.onPopupClose.bind((0,d.default)(i)),i.onPopupAction=i.onPopupAction.bind((0,d.default)(i)),i.onModalAction=i.onModalAction.bind((0,d.default)(i)),i.onBack=i.onBack.bind((0,d.default)(i)),i}return(0,h.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.popup&&this.props.pageId&&this.sendStats(2),this.fetchRewards(function(){e.state.popup||a(214)})}},{key:"fetchRewards",value:function(e){var t=this,i=new T({context:151});new g(637,i).on(638,function(i,n){if(i)return E.showNotification({type:E.TYPES.ERROR}),t.sendStats(8),void _.back();var a=n.getDailyRewards([]);if(a.length){var o=n.getPromoBlocks([])[0];t.setState({header:o.getHeader(),mssg:o.getMssg(),rewards:a.map(function(e,t){var i=e.getPromoBlock(),n=i&&i.getPictures([])[0],a=i&&i.getButtons().find(function(e){return 1===e.getType()});return{id:t+1,name:e.getName(),state:e.getState(),promoBlock:i&&{id:i.getId(),header:i.getHeader(),mssg:i.getMssg(),image:n&&v.getImageUrlForSize(n.getDisplayImages(),300,300),buttonText:a&&a.getText()}}})}),e&&e()}else _.back()}).request()}},{key:"onRewardClick",value:function(e){o(214),this.claimReward(e)}},{key:"onPopupAction",value:function(){this.onRewardClick(this.state.rewards.find(function(e){return e.promoBlock})),n(395)}},{key:"onModalAction",value:function(){o(215),this.acceptReward()}},{key:"onPopupClose",value:function(){this.sendStats(4),n(51),_.navigate(m.get("default.page")),this.props.callback&&this.props.callback()}},{key:"onBack",value:function(){n(52),this.props.popup?_.navigate(m.get("default.page")):_.back(),this.props.callback&&this.props.callback()}},{key:"claimReward",value:function(e){e.promoBlock&&(this.setState({modalVisible:!0,modalData:e.promoBlock}),a(215))}},{key:"acceptReward",value:function(){var e=this;new g(402,(new C).setValue(this.state.modalData.id)).on(387,function(t){t&&E.showNotification({type:E.TYPES.ERROR}),e.sendStats(10),e.fetchRewards(function(){e.setState({modalVisible:!1,popup:!1}),e.props.onAwardCollected()})}).request()}},{key:"sendStats",value:function(e){this.props.pageId&&b.sendOnboardingPageEvent({pageId:this.props.pageId,event:e})}},{key:"render",value:function(){return p.createElement(p.Fragment,null,this.state.popup?p.createElement(k,{mssg:this.state.popupData.mssg,buttonText:this.state.popupData.buttonText,onAction:this.onPopupAction,onClose:this.onPopupClose}):p.createElement(y,{header:this.state.header,message:this.state.mssg,rewards:this.state.rewards,onRewardClick:this.onRewardClick,onBackClick:this.onBack}),this.state.modalVisible?p.createElement(S,{header:this.state.modalData.header,message:this.state.modalData.mssg,imageUrl:this.state.modalData.image,buttonText:this.state.modalData.buttonText,onAction:this.onModalAction}):null)}}]),t}(p.Component);e.exports=A},function(e,t,i){"use strict";var n=i(98),a=i(3712),o=i(133),s=i(138),r=i(130),l=i(170),c=i(182),u=i(181),d=i(143),h=i(151),p=i(152),m=i(337);e.exports=function(e){var t=e.header,i=e.message,g=e.rewards,_=e.onRewardClick,f=e.onBackClick;return n.createElement(o,null,n.createElement(s,null,n.createElement(l,{position:"fixed"},n.createElement(c,null,n.createElement(u,{name:"navigation-bar-back",onClick:f}))),n.createElement(l,null)),n.createElement(r,{align:"center",hpadded:!0},n.createElement(d,null,n.createElement(h,{text:t}),n.createElement(p,{text:i})),n.createElement("div",{className:"daily-rewards-list"},n.createElement(m,{spacing:"lg",centered:!0},g.map(function(e){return n.createElement(a,{idx:e.id,state:e.state,text:e.name,onClick:function(){return _(e)},key:e.id})})))))}},function(e,t,i){"use strict";var n=i(3)(i(107)),a=i(98),o=i(104),s=i(117),r=i(285),l=i(286),c=i(287),u=i(261),d=i(106),h=i(120).P3,p={1:"1",2:"8",3:"6",4:"4",5:"5",6:"2",7:"7"},m={state:o.oneOf([0,1,2,3,4]),text:o.string.isRequired,onClick:o.func.isRequired},g=function(e){var t,i=e.idx,o=e.state,m=e.text,g=e.onClick,_=s((0,n.default)({"daily-reward":!0,"daily-reward--unknown":0===o,"daily-reward--inactive":1===o,"daily-reward--pending":2===o,"daily-reward--ready":3===o,"daily-reward--opened":4===o},"daily-reward--day-".concat(i),!0));4!==o&&(t=p[i]);var f,v,E,b=a.createElement("div",{className:"daily-reward__media-image"},a.createElement(u,{variant:t}));return 4===o&&(f=a.createElement("div",{className:"daily-reward__media-badge"},a.createElement(d,{name:"badge-check",size:"md",shadow:!0}))),3===o&&(v=a.createElement("div",{className:"daily-reward__media-sparks"},a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 64 64"},a.createElement("path",{fill:"currentColor",d:"M10 46.96A5.96 5.96 0 0 1 5.01 42H5A5.96 5.96 0 0 1 0 46.96 5.96 5.96 0 0 1 5 52a5.96 5.96 0 0 1 5-5.04"}),a.createElement("path",{fill:"#FFF",d:"M26 52.97A3.58 3.58 0 0 1 23 50a3.58 3.58 0 0 1-3 2.97A3.58 3.58 0 0 1 23 56a3.57 3.57 0 0 1 3-3.03"}),a.createElement("path",{fill:"currentColor",d:"M54 13.96A5.96 5.96 0 0 1 49.01 9H49A5.96 5.96 0 0 1 44 13.96 5.96 5.96 0 0 1 49 19a5.96 5.96 0 0 1 5-5.04M9 18a3.58 3.58 0 0 1 3-3.03A3.57 3.57 0 0 1 9 12H9A3.57 3.57 0 0 1 6 14.97 3.58 3.58 0 0 1 9 18m51.5 27a4.17 4.17 0 0 1 3.5-3.53A4.17 4.17 0 0 1 60.51 38h-.02A4.17 4.17 0 0 1 57 41.47c1.8.25 3.22 1.7 3.5 3.53"})))),2===o?E="black":1!==o&&4!==o||(E="gray-dark"),a.createElement("div",{className:_,onClick:g},a.createElement(r,null,a.createElement(l,null,a.createElement("div",{className:"daily-reward__media"},b,f,v)),a.createElement(c,null,a.createElement(h,{color:E,ellipsis:!0},m))))};g.propTypes=m,g.defaultProps={state:0},e.exports=g},function(e,t,i){"use strict";var n=i(98),a=i(133),o=i(138),s=i(130),r=i(170),l=i(182),c=i(181),u=i(143),d=i(172),h=i(152),p=i(160),m=i(261),g=i(154);e.exports=function(e){return n.createElement(a,null,n.createElement(o,null,n.createElement(r,null,n.createElement(l,null,n.createElement(c,{name:"navigation-bar-close",onClick:e.onClose})))),n.createElement(s,{align:"center",hpadded:!0},n.createElement(u,null,n.createElement(d,null,n.createElement("div",{className:"daily-reward-promo"},n.createElement(m,{variant:"1"}),n.createElement("div",{className:"daily-reward-promo__sparks"},n.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 64 64"},n.createElement("path",{fill:"currentColor",d:"M14.34 5.2A5.5 5.5 0 0 1 9.74.65h-.03a5.5 5.5 0 0 1-4.59 4.57 5.5 5.5 0 0 1 4.6 4.65 5.5 5.5 0 0 1 4.62-4.65m20.22.55a3.05 3.05 0 0 1 2.56-2.58A3.05 3.05 0 0 1 34.57.64h-.02A3.05 3.05 0 0 1 32 3.18a3.05 3.05 0 0 1 2.56 2.58"}),n.createElement("path",{fill:"currentColor",opacity:".64",d:"M56.64 12.43a6.1 6.1 0 0 1-5.1-5.07 6.16 6.16 0 0 1-5.14 5.07 6.1 6.1 0 0 1 5.12 5.17 6.1 6.1 0 0 1 5.12-5.17z"}),n.createElement("path",{fill:"currentColor",opacity:".64",d:"M64 34.54A3.05 3.05 0 0 1 61.45 32h-.02a3.05 3.05 0 0 1-2.55 2.54 3.05 3.05 0 0 1 2.56 2.58A3.05 3.05 0 0 1 64 34.54"}),n.createElement("path",{fill:"currentColor",d:"M5.76 25.9a3.05 3.05 0 0 1-2.55-2.54A3.08 3.08 0 0 1 .64 25.9a3.05 3.05 0 0 1 2.56 2.58 3.05 3.05 0 0 1 2.56-2.58z"}))))),n.createElement(h,{text:e.mssg}),n.createElement(p,null,n.createElement(g,{narrow:!0,color:"primary",text:e.buttonText,onClick:e.onAction})))))}},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(180),s=i(143),r=i(172),l=i(151),c=i(152),u=i(160),d=i(145),h=i(154),p={header:a.string.isRequired,message:a.string.isRequired,buttonText:a.string.isRequired,onAction:a.func.isRequired},m=function(e){var t=e.imageUrl,i=e.header,a=e.message,p=e.buttonText,m=e.onAction;return n.createElement(o,{isVisible:!0,onClickOutside:m},n.createElement(d,{
top:"xlg",bottom:"xlg"},n.createElement(s,null,n.createElement(r,null,n.createElement("div",{className:"todays-reward",style:{backgroundImage:"url(".concat(t,")")}})),n.createElement(l,{text:i}),n.createElement(c,{text:a}),n.createElement(u,null,n.createElement(h,{narrow:!0,color:"primary",text:p,onClick:m})))))};m.propTypes=p,e.exports=m},function(e,t,i){"use strict";function n(e){var t=document.createElement("iframe");t.id="styleguide-iframe-"+Math.random().toString(36).substring(2,10),t.src="about:blank",t.setAttribute("allowfullscreen",""),t.setAttribute("frameBorder","0"),e.parentNode.insertBefore(t,e);var i=t.contentDocument,n=function(e){return{iphone4:{width:"320px",height:"480px"},iphone5:{width:"320px",height:"568px"},"iphone5-landscape":{width:"568px",height:"320px"},iphone6:{width:"375px",height:"667px"},iphone6plus:{width:"414px",height:"736px"}}[e||"iphone4"]}(/styleguide-frame--([a-z0-9\-]+)/.exec(e.className)[1]);if(t.width=n.width,t.height=n.height,i.head){i.head.className=document.head.className;var a=document.createElement("link");a.rel="stylesheet",a.href=window._platformCssUrl,i.head.appendChild(a),document.getElementById("styleguide-style");var o=document.getElementById("styleguide-style").cloneNode(!0);i.head.appendChild(o)}if(i.body){i.body.className=e.className;for(var s=e.childNodes,r=0;r<s.length;r++){var l=i.importNode(s[r],!0);i.body.appendChild(l)}}return e.remove(),t}var a=i(121),o=i(3716),s={test:"test OK",true:!0,false:!1,partner_id:"badoo",_t:{Payments_Most_Popular:"Most popular",title_terms:"Terms & conditions",cmd_cancel:"Cancel",photo_verification_blocker_explanation_hard:"Unfortunately, we can't verify you on your browser. To complete verification, you need to download our free app",photo_verification_blocker_explanation_soft:"Unfortunately, we can't verify you on your browser. To verify, please download our free app",photo_verification__blocker_button_hard:"Download now",photo_verification_blocker_button_soft:"Get the app",photo_verification_blocker_title:"Camera not supported",photo_verification_blocker_later:"Maybe Later"},img:{gifts:{s130:"//badoocdn.com/big/ga/130/rainbow.png",s200:"//badoocdn.com/big/ga/200/rainbow.png",s400:"//badoocdn.com/big/ga/400/rainbow.png"},placehold:{s100:"//placehold.it/100x100",s200:"//placehold.it/200x200"},lookingfor:{both:"/img/photos/placeholders/looking-for-both.c66a079d6b2a9f1c1edd.png"},profilepic:{boy:"/img/photos/placeholders/generic/boy3.f6bb7dc87472337cc335.jpg",girl:"/img/photos/placeholders/generic/girl1.ec82854962d33b9a98e5.jpg",pixelated:"/img/photos/placeholders/pixelated/girl8.c072181d758c4a4f4b9a.jpg"},video:{preview:"/img/photos/placeholders/looking-for-both.c66a079d6b2a9f1c1edd.png"}},mocks:{"payment-packages-items":[{styleguideTitle:"Regular",qaVisualId:"payment-packages-items-regular",packages:[{title:"Selected package",isSelected:!0},{title:"Unselected package"},{title:"With second line",price:"Payment of £29.99"},{previousTitle:"With previous",title:"Title"},{title:"Lifetime package",isLifeTime:!0,pricePerUnit:{amount:"£56.78",unit:"for life"}},{title:"Discount",discount:"Save 20%"},{title:"Most Popular - SPP",isSelected:!0,isMostPopular:!0,productTypeName:"spp"},{title:"Most Popular - Credits",price:"Payment of £29.99",isMostPopular:!0,productTypeName:"credits"}]}],"methods-of-payment":[{providers:[{providerType:83,isSelected:!0,name:"Mobile"},{providerType:102,name:"Credit Card"},{providerType:35,isSelected:!1,name:"Paypal"}],PROVIDER_TYPE:{FORTUMO:83,WEB:102,GOOGLE_WALLET:113,BOKU_WEB:114,PAYPAL:35,EXTERNAL_WEB:143,PAYMENT_PROVIDER_TYPE_CENTILI:152}}],"payment-bottom":[{styleguideTitle:"No autoTopup - T&C",autoTopup:{visible:!1,text:"Top up automatically when below 200 credits, consectetur adipiscing elit. Duis eget fringilla mauris, non mollis lectus. Curabitur porta nisl quis venenatis gravida."},text:{value:"Terms & Conditions",isTerms:!0}},{styleguideTitle:"AutoTopup unchecked - T&C",autoTopup:{visible:!0,enabled:!0,text:"Top up automatically when below 200 credits, consectetur adipiscing elit. Duis eget fringilla mauris, non mollis lectus. Curabitur porta nisl quis venenatis gravida."},text:{value:"Terms & Conditions",isTerms:!0}},{styleguideTitle:"AutoTopup checked - T&C",autoTopup:{visible:!0,enabled:!0,checked:!0,text:"Top up automatically when below 200 credits, consectetur adipiscing elit. Duis eget fringilla mauris, non mollis lectus. Curabitur porta nisl quis venenatis gravida."},text:{value:"Terms & Conditions",isTerms:!0}},{styleguideTitle:"AutoTopup disabled unchecked - T&C",autoTopup:{visible:!0,enabled:!1,text:"Top up automatically when below 200 credits, consectetur adipiscing elit. Duis eget fringilla mauris, non mollis lectus. Curabitur porta nisl quis venenatis gravida."},text:{value:"Terms & Conditions",isTerms:!0}},{styleguideTitle:"AutoTopup disabled checked - T&C",autoTopup:{visible:!0,checked:!0,text:"Top up automatically when below 200 credits, consectetur adipiscing elit. Duis eget fringilla mauris, non mollis lectus. Curabitur porta nisl quis venenatis gravida."},text:{value:"Terms & Conditions",isTerms:!0}},{styleguideTitle:"AutoTopup - Additional text",autoTopup:{visible:!0,enabled:!0,checked:!1,text:"Top up automatically when below 200 credits, consectetur adipiscing elit. Duis eget fringilla mauris, non mollis lectus. Curabitur porta nisl quis venenatis gravida."},text:{value:"Terms & Conditions",isTerms:!0,additionalText:"Some additional text right after. Note that the T&C link before does not contain an ending '.' (dot) but it's added by us in the template"}},{styleguideTitle:"AutoTopup - Stored payment hint",autoTopup:{visible:!0,enabled:!0,checked:!1,text:"Top up automatically when below 200 credits, consectetur adipiscing elit. Duis eget fringilla mauris, non mollis lectus. Curabitur porta nisl quis venenatis gravida."},text:{value:"You will pay using the card ending with 1111, consectetur adipiscing elit. Duis eget fringilla mauris, non mollis lectus. Curabitur porta nisl quis venenatis gravida. Nullam eu auctor quam, condimentum sagittis libero."}}],"payment-carousel":[{styleguideTitle:"carousel--overlap",promoBlocks:[{picture:{type:"url",value:"//placehold.it/65x65"},badgeType:"badge-feature-extra-shows",descriptionText:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",isActive:!0},{picture:{type:"url",value:"//placehold.it/65x65"},descriptionText:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",badgeType:"badge-feature-spotlight"},{picture:{type:"url",value:"//placehold.it/65x65"},descriptionText:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",badgeType:"badge-feature-riseup"}]}],"pagination-bar":[{styleguideTitle:"Normal",count_current:1,count_total:10},{styleguideTitle:'Prev "disabled" / Next "ready"',count_current:1,count_total:10,isPrevDisabled:!0,isNextReady:!0}],"polls-base":[{styleguideTitle:"Radios",type:"radio",group_name:"poll-group1",items:[{field_label:"Lorem ipsum",field_checked:!0},{field_label:"Dolor sine"},{field_label:"Consectetur adipisicing elit excepturi quibusdam maiores impedit sunt quam aliquam inventore"},{field_label:"Similique excepturi"}]},{styleguideTitle:"Checkboxes",type:"checkbox",group_name:"poll-group2",items:[{field_label:"Lorem ipsum",field_checked:!0},{field_label:"Dolor sit amet"},{field_label:"Consectetur adipisicing elit excepturi quibusdam maiores impedit sunt quam aliquam inventore"},{field_label:"Similique excepturi"}]}],"polls-extra":[{styleguideTitle:"With extra content",type:"radio",group_name:"poll-group3",items:[{field_label:"Lorem ipsum",field_checked:!0,extra_text:"Average"},{field_label:"Dolor sit amet",extra_text:"Good"},{field_label:"Consectetur adipisicing elit excepturi quibusdam maiores impedit sunt quam aliquam inventore",extra_text:"Low"},{field_label:"Similique excepturi",extra_text:"Select"}]}],"photo-grid-liquid":[{url:"//placehold.it/200x200",photoId:"photo1"},{url:"//placehold.it/200x200",photoId:"photo2"},{url:"//placehold.it/200x200",photoId:"photo3"},{url:"//placehold.it/200x200",photoId:"photo4"},{url:"//placehold.it/200x200",photoId:"photo5"},{url:"//placehold.it/200x200",photoId:"photo6"},{url:"//placehold.it/200x200",photoId:"photo8"}],"photo-grid-liquid-first3":[{url:"//placehold.it/200x200",photoId:"photo1"},{url:"//placehold.it/200x200",photoId:"photo2"},{url:"//placehold.it/200x200",photoId:"photo3"}],"photo-grid-liquid-first2":[{url:"//placehold.it/200x200",photoId:"photo1"},{url:"//placehold.it/200x200",photoId:"photo2"}],"photo-grid-liquid-first1":[{url:"//placehold.it/200x200",photoId:"photo1"}],"photo-grid-liquid-spacious":[{url:"//placehold.it/200x200"},{url:"//placehold.it/200x200"},{url:"//placehold.it/200x200"},{url:"//placehold.it/200x200"},{url:"//placehold.it/200x200"},{url:"//placehold.it/200x200"}],"profile-actions":[{styleguideTitle:"Generic",showPrevious:!0,showVoteNo:!0,showVoteYes:!0,showNext:!0},{styleguideTitle:"With disabled items",showPrevious:{isDisabled:!0},showVoteNo:!0,showVoteYes:!0,showNext:{isDisabled:!0}}],"inapp-notifications":[{name:"image from server + text + action",photo:!0,photo_urls:["https://placehold.it/200x200"],disableMasking:!0,text:"Lorem impsum",action:!0},{name:"image from server + text + action",photo:!0,photo_urls:["https://placehold.it/300x200"],disableMasking:!0,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",action:!0},{name:"user + text + action",photo:!0,photo_urls:["https://placehold.it/100x100"],text:"Architecto libero, modi necessitatibus nulla optio possimus sapiente!",action:!0},{name:"users + text + action",photo:!0,photo_urls:["https://placehold.it/100x100","https://placehold.it/100x100"],text:"Atque blanditiis laborum sint voluptatum? Commodi, provident, repudiandae!",action:!0},{name:"user + counter + text + action",photo:!0,photo_urls:["https://placehold.it/100x100"],counter:"14",text:"Assumenda aut deserunt iste mollitia nisi nobis quo?",action:!0},{name:"user + counter (corner) + text + action",photo:!0,photo_urls:["https://placehold.it/100x100"],counter:"14",counter_position:"corner",text:"Assumenda aut deserunt iste mollitia nisi nobis quo?",action:!0},{name:"users + counter + text + action",photo:!0,photo_urls:["https://placehold.it/100x100","https://placehold.it/100x100"],counter:"14",text:"Accusantium incidunt ipsa minima necessitatibus quasi quidem sapiente?",action:!0},{name:"user + badge + text + action",photo:!0,photo_urls:["https://placehold.it/100x100"],badge:{attention_boost:!0},text:"Delectus fugit quisquam unde? Debitis quasi sunt veritatis.",action:!0},{name:"users + badge + text + action",photo:!0,photo_urls:["https://placehold.it/100x100","https://placehold.it/100x100"],badge:{attention_boost:!0},text:"Ad autem corporis nesciunt quibusdam quis sequi. Aspernatur.",action:!0},{name:"icon negative + text",cross:!0,text:"Aliquam deserunt, eum in minima provident quas voluptatem?"},{name:"icon positive + text",tick:!0,text:"Ab cumque debitis deserunt nesciunt provident rerum tempore."}],"scrolling-list":[{styleguideTitle:"Images",items:[{image:{src:"https://placehold.it/65x65"}},{image:{src:"https://placehold.it/65x65"}},{image:{src:"https://placehold.it/65x65"}},{image:{src:"https://placehold.it/65x65"}},{image:{src:"https://placehold.it/65x65"}},{image:{src:"https://placehold.it/65x65"}}]},{styleguideTitle:"Images (with inset gap + negative margin)",items:[{image:{src:"https://placehold.it/65x65"}},{image:{src:"https://placehold.it/65x65"}},{image:{src:"https://placehold.it/65x65"}},{image:{src:"https://placehold.it/65x65"}},{image:{src:"https://placehold.it/65x65"}},{image:{src:"https://placehold.it/65x65"}}],hpadded:!0},{styleguideTitle:"Gifts",items:[{gift:{src:"//badoocdn.com/big/ga/130/rainbow.png"}},{gift:{src:"//badoocdn.com/big/ga/130/carrots.png"}},{gift:{src:"//badoocdn.com/big/ga/130/balloons.png"}},{gift:{src:"//badoocdn.com/big/ga/130/weights.png"}},{gift:{src:"//badoocdn.com/big/ga/130/cookie.png"}},{gift:{src:"//badoocdn.com/big/ga/130/bee.png"}}]}]}},r=a.extend({headerTemplate:null,init:function(){r._super.init.apply(this,arguments),this.registerView("DustStyleguide",new o)},onStart:function(){r._super.onStart.apply(this,arguments);var e=this.getView("DustStyleguide");e.appendTo(this.parent),e.render(s);var t=this.getParameter("section");t&&e.onlyShowSection(t)},onParametersUpdate:function(){var e=this.getView("DustStyleguide"),t=this.getParameter("section");t&&e.onlyShowSection(t),this.readyForVrt()},onReady:function(){for(var e=document.querySelectorAll(".styleguide-frame"),t=0;t<e.length;t++)n(e[t],document);this.readyForVrt()},requiresAuthentication:!1},"DustStyleguideController");e.exports=r},function(e,t,i){"use strict";var n=i(109),a=i(3717),o=n.extend({id:"",className:"styleguide-page",render:function(e){this.$el.html(a.render(e))},onlyShowSection:function(e){this.$(".styleguide-section").hide(),this.$('[data-qa-visual="'.concat(e,'"]')).closest(".styleguide-section").show()}},"DustStyleguideView");e.exports=o},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(3718),i(3719),i(3720),i(3721),i(3729),i(3730),i(3731),i(3732),i(3734),i(3735),i(3736),i(3738),i(3740),i(3741),i(3743),function(e){function t(e,t){return e.p("dust-styleguide/styleguide-style/style",t,t,{}).p("dust-styleguide/styleguide-partials/badge-appstore",t,t,{}).p("dust-styleguide/styleguide-partials/carousel",t,t,{}).p("dust-styleguide/styleguide-partials/forms",t,t,{}).p("dust-styleguide/styleguide-partials/infinite-scroll-spinner",t,t,{}).p("dust-styleguide/styleguide-partials/input-slider",t,t,{}).p("dust-styleguide/styleguide-partials/interests",t,t,{}).p("dust-styleguide/styleguide-partials/pagination-bar",t,t,{}).p("dust-styleguide/styleguide-partials/payments",t,t,{}).p("dust-styleguide/styleguide-partials/photo-grid",t,t,{}).p("dust-styleguide/styleguide-partials/polls",t,t,{}).p("dust-styleguide/styleguide-partials/progress-bar",t,t,{}).p("dust-styleguide/styleguide-partials/ribbon",t,t,{}).p("dust-styleguide/styleguide-partials/selector",t,t,{}).p("dust-styleguide/styleguide-partials/switcher",t,t,{})}return e.register("dust-styleguide/index",t),t.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<style id="styleguide-style">.styleguide-page {padding: 20px 40px;}.styleguide-title {color: #7000e3;font-family: -apple-system, BlinkMacSystemFont, sans-serif !important;font-size: 36px!important;line-height: 60px!important;font-weight: 800!important;margin: 0 auto 30px;padding: 0;text-transform: uppercase;}.styleguide-subtitle {border-bottom: 3px solid #e6e6e6;font-family: -apple-system, BlinkMacSystemFont, sans-serif !important;font-size: 18px!important;line-height: 30px!important;font-weight: 800!important;margin: 30px auto 20px;padding: 0 40px 0 0;position: relative;text-transform: uppercase;}.styleguide-clearfix:after {clear: both;content: "";display: table}.styleguide-section {margin: 0 auto;padding: 0 0 100px}.styleguide-group {margin: 0;padding: 0;position: relative}.styleguide-group:after {clear: both;content: "";display: table}.styleguide-group + .styleguide-group {border-top: 1px solid #fafafa;margin-top: 20px;padding-top: 20px}/* .styleguide-group.styleguide-group--spaced {margin-left: -10px;margin-right: -10px} */.styleguide-group.styleguide-group--spaced > * {margin-left: 10px;margin-right: 10px}.styleguide-cell {display: block;float: left;margin-bottom: 20px;padding: 10px;position: relative}.styleguide-cell.w100 {max-width: 100px;width: 100%}.styleguide-cell.w150 {max-width: 150px;width: 100%}.styleguide-cell.w200 {max-width: 200px;width: 100%}.styleguide-cell.w320 {max-width: 320px;width: 100%}.styleguide-cell.w360 {max-width: 360px;width: 100%}.styleguide-cell.w480 {max-width: 480px;width: 100%}.styleguide-cell.w640 {max-width: 640px;width: 100%}.styleguide-cell.w20p {width: 100%}@media (min-width: 680px) {.styleguide-cell.w20p {width:20%}}.styleguide-cell.w25p {width: 100%}@media (min-width: 680px) {.styleguide-cell.w25p {width:25%}}.styleguide-cell.w33p {width: 100%}@media (min-width: 680px) {.styleguide-cell.w33p {width:33.3%}}.styleguide-cell.backface-pale {background: #f4f4f4}.styleguide-cell.backface-light {background: #e4e4e4}.styleguide-cell.backface-medium {background: #ccc}.styleguide-cell.backface-dark {background: #999}.styleguide-cell.outlined {outline: 1px dotted #eaeaea}.styleguide-cell.nopadding {padding: 0}.styleguide-cell.centered {text-align: center}.styleguide-cell.clear {clear: left}.styleguide-section kbd {clear: left;color: #ccc !important;display: block;font-family: monaco,monospace !important;font-size: 10px !important;line-height: 12px !important;font-weight: 700 !important;margin: 0 auto 10px;}.styleguide-section kbd:empty {content: " "}.styleguide-frame {border: 1px solid #eaeaea;display: block;overflow: hidden;position: relative}.styleguide-frame:before {background: hsla(0,0%,89.4%,.63);bottom: 0;color: #999 !important;font-family: monaco,monospace!important;font-size: 10px  !important;left: 0;line-height: 1.2em !important;padding: 2px 4px;position: absolute;z-index: 999999;}.styleguide-frame.styleguide-frame--iphone4 {height: 480px;width: 320px}.styleguide-frame.styleguide-frame--iphone4:before {content: "iphone4"}.styleguide-frame.styleguide-frame--iphone5 {height: 568px;width: 320px}.styleguide-frame.styleguide-frame--iphone5:before {content: "iphone5"}.styleguide-frame.styleguide-frame--iphone5-landscape {height: 320px;width: 568px}.styleguide-frame.styleguide-frame--iphone5-landscape:before {content: "iphone5"}.styleguide-frame.styleguide-frame--iphone6 {height: 667px;width: 375px}.styleguide-frame.styleguide-frame--iphone6:before {content: "iphone6"}.styleguide-frame.styleguide-frame--iphone6plus {height: 736px;width: 414px}.styleguide-frame.styleguide-frame--iphone6plus:before {content: "iphone6plus"}.styleguide-section-carousel .styleguide-cell.outlined {outline-color: #ccc}.styleguide-section-carousel .styleguide-cell.outlined .carousel-page>div {background-image: -webkit-linear-gradient(315deg,#fafafa,#e4e4e4);background-image: linear-gradient(135deg,#fafafa,#e4e4e4);height: 50px;width: 100%}.styleguide-section-forms .form-uniform {outline: 1px dotted #eaeaea;padding: 20px 15px}.styleguide-section-forms .form-uniform kbd {margin-top: 20px;text-align: left}.styleguide-section-forms .form-uniform kbd:first-child {margin-top: 0}.styleguide-section-forms .page {-webkit-transform: initial;-webkit-transition: initial;min-height: 200px;position: static;top: auto;transform: none;transition: initial;width: auto}.styleguide-section-forms .page:after,.styleguide-section-forms .page:before {content: none}.styleguide-section-forms .modal-container {position: absolute}.styleguide-section-ribbon .ribbon {position: relative}.styleguide-section-progress-bar .styleguide-progress-bar-inherited {color: #ff4278}.styleguide-section-input-slider .input-slider {color: #256cf5}.styleguide-section-polls .poll__extra {color: #ccc}.styleguide-section-infinite-scroll-spinner .infinite-scroll-spinner {display: block}</style>')}return e.register("dust-styleguide/styleguide-style/style",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<section class="styleguide-section"><h2 class="styleguide-title">Bagde Appstore</h2><h3 class="styleguide-subtitle" name="base">base</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="badge-appstore"><div class="styleguide-cell nopadding"><kbd>iOS (en_gb)</kbd><div class="badge-appstore"><img src="/img/no-sprite/badge-appstore/ios/en_gb.e9df940bd9e0cca1eaf1.svg"></div></div><div class="styleguide-cell nopadding"><kbd>Android (jp)</kbd><div class="badge-appstore"><img src="/img/no-sprite/badge-appstore/android/ja.6448cbc73ed673301703.png"></div></div></div></section>')}return e.register("dust-styleguide/styleguide-partials/badge-appstore",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<section class="styleguide-section styleguide-section-carousel"><h2 class="styleguide-title">Carousel</h2><h3 class="styleguide-subtitle" name="containers">containers / "pages"</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="carousel-pages"><kbd>base</kbd><div class="styleguide-cell w320 outlined nopadding"><div class="carousel"><div class="carousel-page"><div><!-- spacer --></div></div><div class="carousel-page"><div><!-- spacer --></div></div><div class="carousel-page"><div><!-- spacer --></div></div></div></div><kbd>hpadded</kbd><div class="styleguide-cell w320 outlined nopadding"><div class="carousel"><div class="carousel-page carousel-page--hpadded"><div><!-- spacer --></div></div><div class="carousel-page carousel-page--hpadded"><div><!-- spacer --></div></div><div class="carousel-page carousel-page--hpadded"><div><!-- spacer --></div></div></div></div><kbd>vpadded</kbd><div class="styleguide-cell w320 outlined nopadding"><div class="carousel"><div class="carousel-page carousel-page--vpadded"><div><!-- spacer --></div></div><div class="carousel-page carousel-page--vpadded"><div><!-- spacer --></div></div><div class="carousel-page carousel-page--vpadded"><div><!-- spacer --></div></div></div></div><kbd>hpadded + vpadded</kbd><div class="styleguide-cell w320 outlined nopadding"><div class="carousel"><div class="carousel-page carousel-page--hpadded carousel-page--vpadded"><div><!-- spacer --></div></div><div class="carousel-page carousel-page--hpadded carousel-page--vpadded"><div><!-- spacer --></div></div><div class="carousel-page carousel-page--hpadded carousel-page--vpadded"><div><!-- spacer --></div></div></div></div><kbd>overlap</kbd><div class="styleguide-cell w320 outlined nopadding"><div class="carousel carousel--overlap"><div class="carousel-page"><div><!-- spacer --></div></div><div class="carousel-page"><div><!-- spacer --></div></div><div class="carousel-page"><div><!-- spacer --></div></div></div></div><kbd>overlap (with padding)</kbd><div class="styleguide-cell w320 outlined nopadding"><div class="carousel carousel--overlap"><div class="carousel-page carousel-page--hpadded carousel-page--vpadded"><div><!-- spacer --></div></div><div class="carousel-page carousel-page--hpadded carousel-page--vpadded"><div><!-- spacer --></div></div><div class="carousel-page carousel-page--hpadded carousel-page--vpadded"><div><!-- spacer --></div></div></div></div><kbd>centered</kbd><div class="styleguide-cell w320 outlined nopadding"><div class="carousel carousel--centered"><div class="carousel-page"><div style="height: 20px;"><!-- spacer --></div></div><div class="carousel-page"><div style="height: 60px;"><!-- spacer --></div></div><div class="carousel-page"><div style="height: 40px;"><!-- spacer --></div></div></div></div></div><h3 class="styleguide-subtitle" name="counter">counter / "index"</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="carousel-index"><kbd>default</kbd><div class="styleguide-cell w320 outlined"><div class="carousel-index"><div class="carousel-index__item"></div><div class="carousel-index__item is-active"></div><div class="carousel-index__item"></div><div class="carousel-index__item"></div><div class="carousel-index__item"></div><div class="carousel-index__item"></div></div></div><kbd>inverted</kbd><div class="styleguide-cell w320 outlined backface-dark"><div class="carousel-index carousel-index--inverted"><div class="carousel-index__item"></div><div class="carousel-index__item is-active"></div><div class="carousel-index__item"></div><div class="carousel-index__item"></div><div class="carousel-index__item"></div><div class="carousel-index__item"></div></div></div></div></section>')}return e.register("dust-styleguide/styleguide-partials/carousel",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(645),i(3722),i(3723),i(3724),i(3725),i(3726),i(3727),i(646),i(647),i(3728),function(e){function t(e,t){return e.w('<section class="styleguide-section styleguide-section-forms"><h2 class="styleguide-title">Form "uniform"</h2><h3 class="styleguide-subtitle" name="input-standard">input standard</h3><div class="styleguide-group" data-qa-visual="forms-input-standard"><div class="styleguide-cell w320 nopadding"><form class="form-uniform"><kbd>base</kbd>').p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{}).w("<kbd>:focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_focus:"true"}).w("<kbd>not empty</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_value:"This is the field value"}).w("<kbd>not empty + :focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_focus:"true",field_value:"This is the data",mask_data:"This is the data",mask_stub:"-entry mask"}).w("<kbd>.is-invalid</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_status:"is-invalid",show_error:"true",field_value:"This is the data",mask_data:"This is the data",mask_stub:"-entry mask"}).w("<kbd>multiline error message</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_status:"is-invalid",show_error:"true",error_message:"This is a pretty long error message that should appear on multiple lines",field_value:"Lorem ipsum"}).w("<kbd>:disabled</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_value:"This is the field value",disabled:"true"}).w('</form></div></div><h3 class="styleguide-subtitle" name="input-simplified">input "simplified"</h3><div class="styleguide-group" data-qa-visual="forms-input-simplified"><div class="styleguide-cell w320 nopadding"><form class="form-uniform"><kbd>base</kbd>').p("dust-styleguide/styleguide-partials/includes/forms/control--input-minimal",t,t,{}).w("<kbd>:focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-minimal",t,t,{field_focus:"true"}).w("<kbd>not empty</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-minimal",t,t,{field_value:"This is the field value"}).w("<kbd>:focus + not empty</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-minimal",t,t,{field_focus:"true",field_value:"This is the field value"}).w("<kbd>.is-invalid</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-minimal",t,t,{field_status:"is-invalid",show_error:"true"}).w("<kbd>multiline error message</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-minimal",t,t,{field_status:"is-invalid",show_error:"true",error_message:"This is a pretty long error message that should appear on multiple lines"}).w("<kbd>:disabled</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--input-minimal",t,t,{field_value:"This is the field value",disabled:"true"}).w('</form></div></div><h3 class="styleguide-subtitle" name="input-secure">input "secure"</h3><div class="styleguide-group" data-qa-visual="forms-input-secure"><div class="styleguide-cell w320 nopadding"><form class="form-uniform"><kbd>.input__field--secure</kbd>').p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_extracss:"input__field--secure",field_value:"abcdef"}).w('</form></div></div><h3 class="styleguide-subtitle" name="input-tel">input "tel"</h3><div class="styleguide-group" data-qa-visual="forms-input-tel"><div class="styleguide-cell w320 nopadding"><form class="form-uniform"><kbd>base (no country code)</kbd>').p("dust-styleguide/styleguide-partials/includes/forms/control--tel",t,t,{}).w("<kbd>base (with country code)</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--tel",t,t,{countries:"true"}).w("<kbd>:focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--tel",t,t,{field_focus:"true",countries:"true"}).w("<kbd>not empty</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--tel",t,t,{field_value:"123456789",countries:"true"}).w("<kbd>not empty + :focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--tel",t,t,{field_focus:"true",field_value:"123456789",countries:"true"}).w("<kbd>.is-invalid</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--tel",t,t,{field_status:"is-invalid",show_error:"true",countries:"true"}).w('</form></div></div><h3 class="styleguide-subtitle" name="input-digits">input "digits"</h3><div class="styleguide-group" data-qa-visual="forms-input-digits"><div class="styleguide-cell w320 nopadding"><form class="form-uniform"><kbd>base</kbd>').p("dust-styleguide/styleguide-partials/includes/forms/control--digits",t,t,{}).w("<kbd>:focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--digits",t,t,{field_focus:"true"}).w("<kbd>not empty</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--digits",t,t,{field1_value:"1",field2_value:"2",field3_value:"3",field4_value:"4"}).w("<kbd>.is-invalid</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--digits",t,t,{field_status:"is-invalid",show_error:"true",field1_value:"1",field2_value:"2",field3_value:"3",field4_value:"4"}).w('</form></div></div><h3 class="styleguide-subtitle" name="input-date">input "date"</h3><div class="styleguide-group" data-qa-visual="forms-input-date"><div class="styleguide-cell w320 nopadding"><form class="form-uniform"><kbd>base</kbd>').p("dust-styleguide/styleguide-partials/includes/forms/control--date",t,t,{}).w("<kbd>:focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--date",t,t,{field_focus:"true"}).w("<kbd>not empty</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--date",t,t,{field_d1_value:"0",field_d2_value:"1",field_m1_value:"1",field_m2_value:"2",field_y1_value:"2",field_y2_value:"0",field_y3_value:"1",field_y4_value:"0"}).w("<kbd>.is-invalid</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--date",t,t,{field_status:"is-invalid",show_error:"true",field_d1_value:"a",field_d2_value:"b",field_m1_value:"2",field_m2_value:"3",field_y1_value:"2",field_y2_value:"0",field_y3_value:"1",field_y4_value:"0"}).w('</form></div></div><h3 class="styleguide-subtitle" name="input-location">input "location"</h3><div class="styleguide-group" data-qa-visual="forms-input-location"><div class="styleguide-cell w320 nopadding"><form class="form-uniform"><kbd>base</kbd>').p("dust-styleguide/styleguide-partials/includes/forms/control--location",t,t,{}).w("<kbd>:focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--location",t,t,{field_focus:"true"}).w("<kbd>not empty</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--location",t,t,{field_value:"Manchester, North West, United Kingdom"}).w("<kbd>.is-invalid</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--location",t,t,{field_status:"is-invalid",show_error:"true",field_value:"Lorem ipsum"}).w("<kbd>.is-loading</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--location",t,t,{field_loading:"true",field_value:"Man"}).w("<kbd>with suggestions</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--location",t,t,{show_suggestions:"true",field_value:"Man"}).w('</form></div></div><h3 class="styleguide-subtitle" name="input-captcha">input "captcha"</h3><div class="styleguide-group" data-qa-visual="forms-input-captcha"><div class="styleguide-cell w320 nopadding"><form class="form-uniform"><kbd>base</kbd>').p("dust-styleguide/styleguide-partials/includes/forms/control--captcha",t,t,{}).w("<kbd>:focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--captcha",t,t,{field_focus:"true"}).w("<kbd>not empty</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--captcha",t,t,{
field_value:"abcdef"}).w("<kbd>not empty + :focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--captcha",t,t,{field_focus:"true",field_value:"abcdef"}).w("<kbd>.is-invalid</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--captcha",t,t,{field_status:"is-invalid",show_error:"true"}).w('</form></div></div><h3 class="styleguide-subtitle" name="select">select</h3><div class="styleguide-group" data-qa-visual="forms-select"><div class="styleguide-cell w320 nopadding"><form class="form-uniform"><kbd>base</kbd>').p("dust-styleguide/styleguide-partials/includes/forms/control--select",t,t,{}).w("<kbd>:focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--select",t,t,{field_focus:"true"}).w("<kbd>.is-invalid</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--select",t,t,{field_status:"is-invalid",show_error:"true"}).w("<kbd>with label</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--select",t,t,{field_label:"This is the label"}).w("<kbd>with long value</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--select",t,t,{field_value:"Lorem ipsum dolor sit amet consectetur adipisicing elit"}).w("<kbd>without arrow</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--select",t,t,{field_value:"Lorem ipsum dolor sit amet consectetur adipisicing elit",hide_arrow:"true"}).w("<kbd>:disabled</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--select",t,t,{field_label:"This is the label",disabled:"true"}).w('</form></div></div><h3 class="styleguide-subtitle" name="textarea">textarea</h3><div class="styleguide-group" data-qa-visual="forms-textarea"><div class="styleguide-cell w320 nopadding"><form class="form-uniform"><kbd>base (with native placeholder)</kbd>').p("dust-styleguide/styleguide-partials/includes/forms/control--textarea",t,t,{}).w("<kbd>base (with label)</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--textarea",t,t,{field_label:"This is the label"}).w("<kbd>with value</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--textarea",t,t,{field_label:"This is the label",field_value:"This is the field value"}).w("<kbd>with multiline value (autogrow)</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--textarea",t,t,{field_label:"This is the label",field_value:"This is the field value and contains a lot of text to simulate a multiline content. This will autogrow using a 'mirror' element. In reality the actual content will be updated via a specific JS script."}).w("<kbd>with counter</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--textarea",t,t,{field_label:"This is the label",show_counter:"true",field_value:"This is the field value and contains a lot of text to simulate a multiline content. This will autogrow using a 'mirror' element. In reality the actual content will be updated via a specific JS script."}).w("<kbd>:focus</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--textarea",t,t,{field_focus:"true"}).w("<kbd>.is-invalid</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--textarea",t,t,{field_status:"is-invalid",show_error:"true"}).w("<kbd>:disabled</kbd>").p("dust-styleguide/styleguide-partials/includes/forms/control--textarea",t,t,{field_label:"This is the label",field_value:"This is the field value and contains a lot of text to simulate a multiline content. This will autogrow using a 'mirror' element. In reality the actual content will be updated via a specific JS script.",disabled:"true"}).w('</form></div></div><h3 class="styleguide-subtitle" name="form-structure-example">form structure example</h3><div class="styleguide-group" data-qa-visual="forms-structure-example"><kbd>control elements</kbd><div class="styleguide-cell w320 nopadding"><form class="form-uniform">').p("dust-styleguide/styleguide-partials/includes/forms/form-sample",t,t,{}).w('</form></div></div></section><section class="styleguide-section styleguide-section-forms"><h2 class="styleguide-title">Forms - Already used</h2><h3 class="styleguide-subtitle" name="phone-verification">phone verification</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="forms-used_phone-verification"><div class="styleguide-cell w320 nopadding"><kbd>standard</kbd><div class="page"><div class="form-uniform js-form"><p class="form__intro">Enter your phone number to verify it:</p><div class="control control--tel control--narrow"><div class="control__inputs control__inputs--row"><div class="select field--tel-country-code js-select"><select class="select__field js-prefix-select"><option value="93">Afghanistan +93</option><option value="355">Albania +355</option><option value="213">Algeria +213</option><option value="376">Andorra +376</option><option value="244">Angola +244</option><option value="1264">Anguilla +1264</option><option value="1268">Antigua and Barbuda +1268</option><option value="54">Argentina +54</option><option value="374">Armenia +374</option><option value="297">Aruba +297</option><option value="61">Australia +61</option><option value="43">Austria +43</option><option value="994">Azerbaijan +994</option><option value="1242">Bahamas +1242</option><option value="973">Bahrain +973</option><option value="880">Bangladesh +880</option><option value="1246">Barbados +1246</option><option value="375">Belarus +375</option><option value="32">Belgium +32</option><option value="501">Belize +501</option><option value="229">Benin +229</option><option value="1441">Bermuda +1441</option><option value="975">Bhutan +975</option><option value="591">Bolivia +591</option><option value="387">Bosnia and Herzegovina +387</option><option value="267">Botswana +267</option><option value="55">Brazil +55</option><option value="246">British Indian Ocean Territory +246</option><option value="1284">British Virgin Islands +1284</option><option value="673">Brunei +673</option><option value="359">Bulgaria +359</option><option value="226">Burkina Faso +226</option><option value="257">Burundi +257</option><option value="855">Cambodia +855</option><option value="237">Cameroon +237</option><option value="1">Canada +1</option><option value="238">Cape Verde +238</option><option value="1345">Cayman Islands +1345</option><option value="236">Central African Republic +236</option><option value="235">Chad +235</option><option value="56">Chile +56</option><option value="86">China +86</option><option value="618">Christmas Island +618</option><option value="61891">Cocos (Keeling) Islands +61891</option><option value="57">Colombia +57</option><option value="269">Comoros +269</option><option value="242">Congo (Brazzaville) +242</option><option value="243">Congo (Kinshasa) +243</option><option value="682">Cook Islands +682</option><option value="506">Costa Rica +506</option><option value="225">Cote D\'Ivoire +225</option><option value="385">Croatia +385</option><option value="53">Cuba +53</option><option value="357">Cyprus +357</option><option value="420">Czech Republic +420</option><option value="45">Denmark +45</option><option value="253">Djibouti +253</option><option value="1767">Dominica +1767</option><option value="18">Dominican Republic +18</option><option value="670">East Timor +670</option><option value="593">Ecuador +593</option><option value="20">Egypt +20</option><option value="503">El Salvador +503</option><option value="240">Equatorial Guinea +240</option><option value="291">Eritrea +291</option><option value="372">Estonia +372</option><option value="251">Ethiopia +251</option><option value="500">Falkland Islands +500</option><option value="298">Faroe Islands +298</option><option value="691">Federated States of Micronesia +691</option><option value="679">Fiji +679</option><option value="358">Finland +358</option><option value="33">France +33</option><option value="594">French Guiana +594</option><option value="689">French Polynesia +689</option><option value="241">Gabon +241</option><option value="220">Gambia +220</option><option value="995">Georgia +995</option><option value="49">Germany +49</option><option value="233">Ghana +233</option><option value="350">Gibraltar +350</option><option value="30">Greece +30</option><option value="299">Greenland +299</option><option value="1473">Grenada +1473</option><option value="590">Guadeloupe +590</option><option value="853">Guam +853</option><option value="502">Guatemala +502</option><option value="44">Guernsey +44</option><option value="224">Guinea +224</option><option value="245">Guinea-Bissau +245</option><option value="592">Guyana +592</option><option value="509">Haiti +509</option><option value="504">Honduras +504</option><option value="852">Hong Kong +852</option><option value="36">Hungary +36</option><option value="354">Iceland +354</option><option value="91">India +91</option><option value="62">Indonesia +62</option><option value="98">Iran +98</option><option value="964">Iraq +964</option><option value="353">Ireland +353</option><option value="44">Isle of Man +44</option><option value="972">Israel +972</option><option value="39">Italy +39</option><option value="1876">Jamaica +1876</option><option value="81">Japan +81</option><option value="44">Jersey +44</option><option value="962">Jordan +962</option><option value="77">Kazakhstan +77</option><option value="254">Kenya +254</option><option value="686">Kiribati +686</option><option value="965">Kuwait +965</option><option value="996">Kyrgyzstan +996</option><option value="856">Laos +856</option><option value="371">Latvia +371</option><option value="961">Lebanon +961</option><option value="266">Lesotho +266</option><option value="231">Liberia +231</option><option value="218">Libya +218</option><option value="423">Liechtenstein +423</option><option value="370">Lithuania +370</option><option value="352">Luxembourg +352</option><option value="389">Macedonia +389</option><option value="261">Madagascar +261</option><option value="265">Malawi +265</option><option value="60">Malaysia +60</option><option value="960">Maldives +960</option><option value="223">Mali +223</option><option value="356">Malta +356</option><option value="692">Marshall Islands +692</option><option value="596">Martinique +596</option><option value="222">Mauritania +222</option><option value="230">Mauritius +230</option><option value="262">Mayotte +262</option><option value="52">Mexico +52</option><option value="373">Moldova +373</option><option value="377">Monaco +377</option><option value="976">Mongolia +976</option><option value="382">Montenegro +382</option><option value="1664">Montserrat +1664</option><option value="212">Morocco +212</option><option value="258">Mozambique +258</option><option value="95">Myanmar +95</option><option value="264">Namibia +264</option><option value="674">Nauru +674</option><option value="977">Nepal +977</option><option value="31">Netherlands +31</option><option value="599">Netherlands Antilles +599</option><option value="687">New Caledonia +687</option><option value="64">New Zealand +64</option><option value="505">Nicaragua +505</option><option value="227">Niger +227</option><option value="234">Nigeria +234</option><option value="683">Niue +683</option><option value="672">Norfolk Island +672</option><option value="850">North Korea +850</option><option value="1670">Northern Mariana Islands +1670</option><option value="47">Norway +47</option><option value="968">Oman +968</option><option value="92">Pakistan +92</option><option value="680">Palau +680</option><option value="507">Panama +507</option><option value="675">Papua New Guinea +675</option><option value="595">Paraguay +595</option><option value="51">Peru +51</option><option value="63">Philippines +63</option><option value="64">Pitcairn Islands +64</option><option value="48">Poland +48</option><option value="351">Portugal +351</option><option value="1787">Puerto Rico +1787</option><option value="974">Qatar +974</option><option value="262">Reunion +262</option><option value="40">Romania +40</option><option value="7">Russia +7</option><option value="250">Rwanda +250</option><option value="590">Saint Barthelemy +590</option><option value="290">Saint Helena +290</option><option value="1869">Saint Kitts and Nevis +1869</option><option value="1758">Saint Lucia +1758</option><option value="590">Saint Martin +590</option><option value="508">Saint Pierre and Miquelon +508</option><option value="685">Samoa +685</option><option value="378">San Marino +378</option><option value="239">Sao Tome and Principe +239</option><option value="966">Saudi Arabia +966</option><option value="221">Senegal +221</option><option value="381">Serbia +381</option><option value="248">Seychelles +248</option><option value="232">Sierra Leone +232</option><option value="65">Singapore +65</option><option value="421">Slovakia +421</option><option value="386">Slovenia +386</option><option value="677">Solomon Islands +677</option><option value="252">Somalia +252</option><option value="27">South Africa +27</option><option value="82">South Korea +82</option><option value="211">South Sudan +211</option><option value="34">Spain +34</option><option value="94">Sri Lanka +94</option><option value="1784">St Vincent and the Grenadines +1784</option><option value="249">Sudan +249</option><option value="597">Suriname +597</option><option value="47">Svalbard +47</option><option value="268">Swaziland +268</option><option value="46">Sweden +46</option><option value="41">Switzerland +41</option><option value="963">Syria +963</option><option value="886">Taiwan +886</option><option value="992">Tajikistan +992</option><option value="255">Tanzania +255</option><option value="66">Thailand +66</option><option value="228">Togo +228</option><option value="690">Tokelau Islands +690</option><option value="676">Tonga +676</option><option value="1868">Trinidad and Tobago +1868</option><option value="216">Tunisia +216</option><option value="90">Turkey +90</option><option value="993">Turkmenistan +993</option><option value="1649">Turks and Caicos Islands +1649</option><option value="688">Tuvalu +688</option><option value="1340">U.S. Virgin Islands +1340</option><option value="256">Uganda +256</option><option value="380">Ukraine +380</option><option value="971">United Arab Emirates +971</option><option value="44" selected="">United Kingdom +44</option><option value="1">United States +1</option><option value="598">Uruguay +598</option><option value="998">Uzbekistan +998</option><option value="678">Vanuatu +678</option><option value="39">Vatican City +39</option><option value="58">Venezuela +58</option><option value="84">Vietnam +84</option><option value="681">Wallis and Futuna +681</option><option value="212">Western Sahara +212</option><option value="967">Yemen +967</option><option value="260">Zambia +260</option><option value="263">Zimbabwe +263</option></select><div class="select__surrogate js-prefix-label">+44</div></div><div class="input field--tel-national js-input-field-container" data-field-type="phone"><input type="tel" class="input__field js-input-field" placeholder="Enter phone number"></div></div><div class="control__error js-error-label js-input-field-error-msg" data-field-type="phone"></div></div><div class="form__buttons"><button class="button button--primary js-submit js-touchable" disabled=""><span class="button__text">Verify number</span></button></div><div class="hint">We\'ll use this info for verification purposes only. We won\'t share it with anyone.</div></div></div></div><div class="styleguide-cell w320 nopadding"><kbd>:focus</kbd><div class="page"><div class="form-uniform js-form"><p class="form__intro">Enter your phone number to verify it:</p><div class="control control--tel control--narrow"><div class="control__inputs control__inputs--row"><div class="select field--tel-country-code js-select"><select class="select__field js-prefix-select"><option value="93">Afghanistan +93</option><option value="355">Albania +355</option><option value="213">Algeria +213</option><option value="376">Andorra +376</option><option value="244">Angola +244</option><option value="1264">Anguilla +1264</option><option value="1268">Antigua and Barbuda +1268</option><option value="54">Argentina +54</option><option value="374">Armenia +374</option><option value="297">Aruba +297</option><option value="61">Australia +61</option><option value="43">Austria +43</option><option value="994">Azerbaijan +994</option><option value="1242">Bahamas +1242</option><option value="973">Bahrain +973</option><option value="880">Bangladesh +880</option><option value="1246">Barbados +1246</option><option value="375">Belarus +375</option><option value="32">Belgium +32</option><option value="501">Belize +501</option><option value="229">Benin +229</option><option value="1441">Bermuda +1441</option><option value="975">Bhutan +975</option><option value="591">Bolivia +591</option><option value="387">Bosnia and Herzegovina +387</option><option value="267">Botswana +267</option><option value="55">Brazil +55</option><option value="246">British Indian Ocean Territory +246</option><option value="1284">British Virgin Islands +1284</option><option value="673">Brunei +673</option><option value="359">Bulgaria +359</option><option value="226">Burkina Faso +226</option><option value="257">Burundi +257</option><option value="855">Cambodia +855</option><option value="237">Cameroon +237</option><option value="1">Canada +1</option><option value="238">Cape Verde +238</option><option value="1345">Cayman Islands +1345</option><option value="236">Central African Republic +236</option><option value="235">Chad +235</option><option value="56">Chile +56</option><option value="86">China +86</option><option value="618">Christmas Island +618</option><option value="61891">Cocos (Keeling) Islands +61891</option><option value="57">Colombia +57</option><option value="269">Comoros +269</option><option value="242">Congo (Brazzaville) +242</option><option value="243">Congo (Kinshasa) +243</option><option value="682">Cook Islands +682</option><option value="506">Costa Rica +506</option><option value="225">Cote D\'Ivoire +225</option><option value="385">Croatia +385</option><option value="53">Cuba +53</option><option value="357">Cyprus +357</option><option value="420">Czech Republic +420</option><option value="45">Denmark +45</option><option value="253">Djibouti +253</option><option value="1767">Dominica +1767</option><option value="18">Dominican Republic +18</option><option value="670">East Timor +670</option><option value="593">Ecuador +593</option><option value="20">Egypt +20</option><option value="503">El Salvador +503</option><option value="240">Equatorial Guinea +240</option><option value="291">Eritrea +291</option><option value="372">Estonia +372</option><option value="251">Ethiopia +251</option><option value="500">Falkland Islands +500</option><option value="298">Faroe Islands +298</option><option value="691">Federated States of Micronesia +691</option><option value="679">Fiji +679</option><option value="358">Finland +358</option><option value="33">France +33</option><option value="594">French Guiana +594</option><option value="689">French Polynesia +689</option><option value="241">Gabon +241</option><option value="220">Gambia +220</option><option value="995">Georgia +995</option><option value="49">Germany +49</option><option value="233">Ghana +233</option><option value="350">Gibraltar +350</option><option value="30">Greece +30</option><option value="299">Greenland +299</option><option value="1473">Grenada +1473</option><option value="590">Guadeloupe +590</option><option value="853">Guam +853</option><option value="502">Guatemala +502</option><option value="44">Guernsey +44</option><option value="224">Guinea +224</option><option value="245">Guinea-Bissau +245</option><option value="592">Guyana +592</option><option value="509">Haiti +509</option><option value="504">Honduras +504</option><option value="852">Hong Kong +852</option><option value="36">Hungary +36</option><option value="354">Iceland +354</option><option value="91">India +91</option><option value="62">Indonesia +62</option><option value="98">Iran +98</option><option value="964">Iraq +964</option><option value="353">Ireland +353</option><option value="44">Isle of Man +44</option><option value="972">Israel +972</option><option value="39">Italy +39</option><option value="1876">Jamaica +1876</option><option value="81">Japan +81</option><option value="44">Jersey +44</option><option value="962">Jordan +962</option><option value="77">Kazakhstan +77</option><option value="254">Kenya +254</option><option value="686">Kiribati +686</option><option value="965">Kuwait +965</option><option value="996">Kyrgyzstan +996</option><option value="856">Laos +856</option><option value="371">Latvia +371</option><option value="961">Lebanon +961</option><option value="266">Lesotho +266</option><option value="231">Liberia +231</option><option value="218">Libya +218</option><option value="423">Liechtenstein +423</option><option value="370">Lithuania +370</option><option value="352">Luxembourg +352</option><option value="389">Macedonia +389</option><option value="261">Madagascar +261</option><option value="265">Malawi +265</option><option value="60">Malaysia +60</option><option value="960">Maldives +960</option><option value="223">Mali +223</option><option value="356">Malta +356</option><option value="692">Marshall Islands +692</option><option value="596">Martinique +596</option><option value="222">Mauritania +222</option><option value="230">Mauritius +230</option><option value="262">Mayotte +262</option><option value="52">Mexico +52</option><option value="373">Moldova +373</option><option value="377">Monaco +377</option><option value="976">Mongolia +976</option><option value="382">Montenegro +382</option><option value="1664">Montserrat +1664</option><option value="212">Morocco +212</option><option value="258">Mozambique +258</option><option value="95">Myanmar +95</option><option value="264">Namibia +264</option><option value="674">Nauru +674</option><option value="977">Nepal +977</option><option value="31">Netherlands +31</option><option value="599">Netherlands Antilles +599</option><option value="687">New Caledonia +687</option><option value="64">New Zealand +64</option><option value="505">Nicaragua +505</option><option value="227">Niger +227</option><option value="234">Nigeria +234</option><option value="683">Niue +683</option><option value="672">Norfolk Island +672</option><option value="850">North Korea +850</option><option value="1670">Northern Mariana Islands +1670</option><option value="47">Norway +47</option><option value="968">Oman +968</option><option value="92">Pakistan +92</option><option value="680">Palau +680</option><option value="507">Panama +507</option><option value="675">Papua New Guinea +675</option><option value="595">Paraguay +595</option><option value="51">Peru +51</option><option value="63">Philippines +63</option><option value="64">Pitcairn Islands +64</option><option value="48">Poland +48</option><option value="351">Portugal +351</option><option value="1787">Puerto Rico +1787</option><option value="974">Qatar +974</option><option value="262">Reunion +262</option><option value="40">Romania +40</option><option value="7">Russia +7</option><option value="250">Rwanda +250</option><option value="590">Saint Barthelemy +590</option><option value="290">Saint Helena +290</option><option value="1869">Saint Kitts and Nevis +1869</option><option value="1758">Saint Lucia +1758</option><option value="590">Saint Martin +590</option><option value="508">Saint Pierre and Miquelon +508</option><option value="685">Samoa +685</option><option value="378">San Marino +378</option><option value="239">Sao Tome and Principe +239</option><option value="966">Saudi Arabia +966</option><option value="221">Senegal +221</option><option value="381">Serbia +381</option><option value="248">Seychelles +248</option><option value="232">Sierra Leone +232</option><option value="65">Singapore +65</option><option value="421">Slovakia +421</option><option value="386">Slovenia +386</option><option value="677">Solomon Islands +677</option><option value="252">Somalia +252</option><option value="27">South Africa +27</option><option value="82">South Korea +82</option><option value="211">South Sudan +211</option><option value="34">Spain +34</option><option value="94">Sri Lanka +94</option><option value="1784">St Vincent and the Grenadines +1784</option><option value="249">Sudan +249</option><option value="597">Suriname +597</option><option value="47">Svalbard +47</option><option value="268">Swaziland +268</option><option value="46">Sweden +46</option><option value="41">Switzerland +41</option><option value="963">Syria +963</option><option value="886">Taiwan +886</option><option value="992">Tajikistan +992</option><option value="255">Tanzania +255</option><option value="66">Thailand +66</option><option value="228">Togo +228</option><option value="690">Tokelau Islands +690</option><option value="676">Tonga +676</option><option value="1868">Trinidad and Tobago +1868</option><option value="216">Tunisia +216</option><option value="90">Turkey +90</option><option value="993">Turkmenistan +993</option><option value="1649">Turks and Caicos Islands +1649</option><option value="688">Tuvalu +688</option><option value="1340">U.S. Virgin Islands +1340</option><option value="256">Uganda +256</option><option value="380">Ukraine +380</option><option value="971">United Arab Emirates +971</option><option value="44" selected="">United Kingdom +44</option><option value="1">United States +1</option><option value="598">Uruguay +598</option><option value="998">Uzbekistan +998</option><option value="678">Vanuatu +678</option><option value="39">Vatican City +39</option><option value="58">Venezuela +58</option><option value="84">Vietnam +84</option><option value="681">Wallis and Futuna +681</option><option value="212">Western Sahara +212</option><option value="967">Yemen +967</option><option value="260">Zambia +260</option><option value="263">Zimbabwe +263</option></select><div class="select__surrogate js-prefix-label">+44</div></div><div class="input field--tel-national js-input-field-container" data-field-type="phone"><input type="tel" class="input__field is-focused js-input-field" placeholder="Enter phone number"></div></div><div class="control__error js-error-label js-input-field-error-msg" data-field-type="phone"></div></div><div class="form__buttons"><button class="button button--primary js-submit js-touchable" disabled=""><span class="button__text">Verify number</span></button></div><div class="hint">We\'ll use this info for verification purposes only. We won\'t share it with anyone.</div></div></div></div><div class="styleguide-cell w320 nopadding"><kbd>not empty</kbd><div class="page"><div class="form-uniform js-form"><p class="form__intro">Enter your phone number to verify it:</p><div class="control control--tel control--narrow"><div class="control__inputs control__inputs--row"><div class="select field--tel-country-code js-select"><select class="select__field js-prefix-select"><option value="93">Afghanistan +93</option><option value="355">Albania +355</option><option value="213">Algeria +213</option><option value="376">Andorra +376</option><option value="244">Angola +244</option><option value="1264">Anguilla +1264</option><option value="1268">Antigua and Barbuda +1268</option><option value="54">Argentina +54</option><option value="374">Armenia +374</option><option value="297">Aruba +297</option><option value="61">Australia +61</option><option value="43">Austria +43</option><option value="994">Azerbaijan +994</option><option value="1242">Bahamas +1242</option><option value="973">Bahrain +973</option><option value="880">Bangladesh +880</option><option value="1246">Barbados +1246</option><option value="375">Belarus +375</option><option value="32">Belgium +32</option><option value="501">Belize +501</option><option value="229">Benin +229</option><option value="1441">Bermuda +1441</option><option value="975">Bhutan +975</option><option value="591">Bolivia +591</option><option value="387">Bosnia and Herzegovina +387</option><option value="267">Botswana +267</option><option value="55">Brazil +55</option><option value="246">British Indian Ocean Territory +246</option><option value="1284">British Virgin Islands +1284</option><option value="673">Brunei +673</option><option value="359">Bulgaria +359</option><option value="226">Burkina Faso +226</option><option value="257">Burundi +257</option><option value="855">Cambodia +855</option><option value="237">Cameroon +237</option><option value="1">Canada +1</option><option value="238">Cape Verde +238</option><option value="1345">Cayman Islands +1345</option><option value="236">Central African Republic +236</option><option value="235">Chad +235</option><option value="56">Chile +56</option><option value="86">China +86</option><option value="618">Christmas Island +618</option><option value="61891">Cocos (Keeling) Islands +61891</option><option value="57">Colombia +57</option><option value="269">Comoros +269</option><option value="242">Congo (Brazzaville) +242</option><option value="243">Congo (Kinshasa) +243</option><option value="682">Cook Islands +682</option><option value="506">Costa Rica +506</option><option value="225">Cote D\'Ivoire +225</option><option value="385">Croatia +385</option><option value="53">Cuba +53</option><option value="357">Cyprus +357</option><option value="420">Czech Republic +420</option><option value="45">Denmark +45</option><option value="253">Djibouti +253</option><option value="1767">Dominica +1767</option><option value="18">Dominican Republic +18</option><option value="670">East Timor +670</option><option value="593">Ecuador +593</option><option value="20">Egypt +20</option><option value="503">El Salvador +503</option><option value="240">Equatorial Guinea +240</option><option value="291">Eritrea +291</option><option value="372">Estonia +372</option><option value="251">Ethiopia +251</option><option value="500">Falkland Islands +500</option><option value="298">Faroe Islands +298</option><option value="691">Federated States of Micronesia +691</option><option value="679">Fiji +679</option><option value="358">Finland +358</option><option value="33">France +33</option><option value="594">French Guiana +594</option><option value="689">French Polynesia +689</option><option value="241">Gabon +241</option><option value="220">Gambia +220</option><option value="995">Georgia +995</option><option value="49">Germany +49</option><option value="233">Ghana +233</option><option value="350">Gibraltar +350</option><option value="30">Greece +30</option><option value="299">Greenland +299</option><option value="1473">Grenada +1473</option><option value="590">Guadeloupe +590</option><option value="853">Guam +853</option><option value="502">Guatemala +502</option><option value="44">Guernsey +44</option><option value="224">Guinea +224</option><option value="245">Guinea-Bissau +245</option><option value="592">Guyana +592</option><option value="509">Haiti +509</option><option value="504">Honduras +504</option><option value="852">Hong Kong +852</option><option value="36">Hungary +36</option><option value="354">Iceland +354</option><option value="91">India +91</option><option value="62">Indonesia +62</option><option value="98">Iran +98</option><option value="964">Iraq +964</option><option value="353">Ireland +353</option><option value="44">Isle of Man +44</option><option value="972">Israel +972</option><option value="39">Italy +39</option><option value="1876">Jamaica +1876</option><option value="81">Japan +81</option><option value="44">Jersey +44</option><option value="962">Jordan +962</option><option value="77">Kazakhstan +77</option><option value="254">Kenya +254</option><option value="686">Kiribati +686</option><option value="965">Kuwait +965</option><option value="996">Kyrgyzstan +996</option><option value="856">Laos +856</option><option value="371">Latvia +371</option><option value="961">Lebanon +961</option><option value="266">Lesotho +266</option><option value="231">Liberia +231</option><option value="218">Libya +218</option><option value="423">Liechtenstein +423</option><option value="370">Lithuania +370</option><option value="352">Luxembourg +352</option><option value="389">Macedonia +389</option><option value="261">Madagascar +261</option><option value="265">Malawi +265</option><option value="60">Malaysia +60</option><option value="960">Maldives +960</option><option value="223">Mali +223</option><option value="356">Malta +356</option><option value="692">Marshall Islands +692</option><option value="596">Martinique +596</option><option value="222">Mauritania +222</option><option value="230">Mauritius +230</option><option value="262">Mayotte +262</option><option value="52">Mexico +52</option><option value="373">Moldova +373</option><option value="377">Monaco +377</option><option value="976">Mongolia +976</option><option value="382">Montenegro +382</option><option value="1664">Montserrat +1664</option><option value="212">Morocco +212</option><option value="258">Mozambique +258</option><option value="95">Myanmar +95</option><option value="264">Namibia +264</option><option value="674">Nauru +674</option><option value="977">Nepal +977</option><option value="31">Netherlands +31</option><option value="599">Netherlands Antilles +599</option><option value="687">New Caledonia +687</option><option value="64">New Zealand +64</option><option value="505">Nicaragua +505</option><option value="227">Niger +227</option><option value="234">Nigeria +234</option><option value="683">Niue +683</option><option value="672">Norfolk Island +672</option><option value="850">North Korea +850</option><option value="1670">Northern Mariana Islands +1670</option><option value="47">Norway +47</option><option value="968">Oman +968</option><option value="92">Pakistan +92</option><option value="680">Palau +680</option><option value="507">Panama +507</option><option value="675">Papua New Guinea +675</option><option value="595">Paraguay +595</option><option value="51">Peru +51</option><option value="63">Philippines +63</option><option value="64">Pitcairn Islands +64</option><option value="48">Poland +48</option><option value="351">Portugal +351</option><option value="1787">Puerto Rico +1787</option><option value="974">Qatar +974</option><option value="262">Reunion +262</option><option value="40">Romania +40</option><option value="7">Russia +7</option><option value="250">Rwanda +250</option><option value="590">Saint Barthelemy +590</option><option value="290">Saint Helena +290</option><option value="1869">Saint Kitts and Nevis +1869</option><option value="1758">Saint Lucia +1758</option><option value="590">Saint Martin +590</option><option value="508">Saint Pierre and Miquelon +508</option><option value="685">Samoa +685</option><option value="378">San Marino +378</option><option value="239">Sao Tome and Principe +239</option><option value="966">Saudi Arabia +966</option><option value="221">Senegal +221</option><option value="381">Serbia +381</option><option value="248">Seychelles +248</option><option value="232">Sierra Leone +232</option><option value="65">Singapore +65</option><option value="421">Slovakia +421</option><option value="386">Slovenia +386</option><option value="677">Solomon Islands +677</option><option value="252">Somalia +252</option><option value="27">South Africa +27</option><option value="82">South Korea +82</option><option value="211">South Sudan +211</option><option value="34">Spain +34</option><option value="94">Sri Lanka +94</option><option value="1784">St Vincent and the Grenadines +1784</option><option value="249">Sudan +249</option><option value="597">Suriname +597</option><option value="47">Svalbard +47</option><option value="268">Swaziland +268</option><option value="46">Sweden +46</option><option value="41">Switzerland +41</option><option value="963">Syria +963</option><option value="886">Taiwan +886</option><option value="992">Tajikistan +992</option><option value="255">Tanzania +255</option><option value="66">Thailand +66</option><option value="228">Togo +228</option><option value="690">Tokelau Islands +690</option><option value="676">Tonga +676</option><option value="1868">Trinidad and Tobago +1868</option><option value="216">Tunisia +216</option><option value="90">Turkey +90</option><option value="993">Turkmenistan +993</option><option value="1649">Turks and Caicos Islands +1649</option><option value="688">Tuvalu +688</option><option value="1340">U.S. Virgin Islands +1340</option><option value="256">Uganda +256</option><option value="380">Ukraine +380</option><option value="971">United Arab Emirates +971</option><option value="44" selected="">United Kingdom +44</option><option value="1">United States +1</option><option value="598">Uruguay +598</option><option value="998">Uzbekistan +998</option><option value="678">Vanuatu +678</option><option value="39">Vatican City +39</option><option value="58">Venezuela +58</option><option value="84">Vietnam +84</option><option value="681">Wallis and Futuna +681</option><option value="212">Western Sahara +212</option><option value="967">Yemen +967</option><option value="260">Zambia +260</option><option value="263">Zimbabwe +263</option></select><div class="select__surrogate js-prefix-label">+44</div></div><div class="input field--tel-national js-input-field-container has-value" data-field-type="phone"><input type="tel" class="input__field js-input-field" placeholder="Enter phone number" value="1234"></div></div><div class="control__error js-error-label js-input-field-error-msg" data-field-type="phone"></div></div><div class="form__buttons"><button class="button button--primary js-submit js-touchable"><span class="button__text">Verify number</span></button></div><div class="hint">We\'ll use this info for verification purposes only. We won\'t share it with anyone.</div></div></div></div><div class="styleguide-cell w320 nopadding"><kbd>is-invalid</kbd><div class="page"><div class="form-uniform js-form"><p class="form__intro">Enter your phone number to verify it:</p><div class="control control--tel control--narrow"><div class="control__inputs control__inputs--row"><div class="select field--tel-country-code js-select"><select class="select__field js-prefix-select"><option value="93">Afghanistan +93</option><option value="355">Albania +355</option><option value="213">Algeria +213</option><option value="376">Andorra +376</option><option value="244">Angola +244</option><option value="1264">Anguilla +1264</option><option value="1268">Antigua and Barbuda +1268</option><option value="54">Argentina +54</option><option value="374">Armenia +374</option><option value="297">Aruba +297</option><option value="61">Australia +61</option><option value="43">Austria +43</option><option value="994">Azerbaijan +994</option><option value="1242">Bahamas +1242</option><option value="973">Bahrain +973</option><option value="880">Bangladesh +880</option><option value="1246">Barbados +1246</option><option value="375">Belarus +375</option><option value="32">Belgium +32</option><option value="501">Belize +501</option><option value="229">Benin +229</option><option value="1441">Bermuda +1441</option><option value="975">Bhutan +975</option><option value="591">Bolivia +591</option><option value="387">Bosnia and Herzegovina +387</option><option value="267">Botswana +267</option><option value="55">Brazil +55</option><option value="246">British Indian Ocean Territory +246</option><option value="1284">British Virgin Islands +1284</option><option value="673">Brunei +673</option><option value="359">Bulgaria +359</option><option value="226">Burkina Faso +226</option><option value="257">Burundi +257</option><option value="855">Cambodia +855</option><option value="237">Cameroon +237</option><option value="1">Canada +1</option><option value="238">Cape Verde +238</option><option value="1345">Cayman Islands +1345</option><option value="236">Central African Republic +236</option><option value="235">Chad +235</option><option value="56">Chile +56</option><option value="86">China +86</option><option value="618">Christmas Island +618</option><option value="61891">Cocos (Keeling) Islands +61891</option><option value="57">Colombia +57</option><option value="269">Comoros +269</option><option value="242">Congo (Brazzaville) +242</option><option value="243">Congo (Kinshasa) +243</option><option value="682">Cook Islands +682</option><option value="506">Costa Rica +506</option><option value="225">Cote D\'Ivoire +225</option><option value="385">Croatia +385</option><option value="53">Cuba +53</option><option value="357">Cyprus +357</option><option value="420">Czech Republic +420</option><option value="45">Denmark +45</option><option value="253">Djibouti +253</option><option value="1767">Dominica +1767</option><option value="18">Dominican Republic +18</option><option value="670">East Timor +670</option><option value="593">Ecuador +593</option><option value="20">Egypt +20</option><option value="503">El Salvador +503</option><option value="240">Equatorial Guinea +240</option><option value="291">Eritrea +291</option><option value="372">Estonia +372</option><option value="251">Ethiopia +251</option><option value="500">Falkland Islands +500</option><option value="298">Faroe Islands +298</option><option value="691">Federated States of Micronesia +691</option><option value="679">Fiji +679</option><option value="358">Finland +358</option><option value="33">France +33</option><option value="594">French Guiana +594</option><option value="689">French Polynesia +689</option><option value="241">Gabon +241</option><option value="220">Gambia +220</option><option value="995">Georgia +995</option><option value="49">Germany +49</option><option value="233">Ghana +233</option><option value="350">Gibraltar +350</option><option value="30">Greece +30</option><option value="299">Greenland +299</option><option value="1473">Grenada +1473</option><option value="590">Guadeloupe +590</option><option value="853">Guam +853</option><option value="502">Guatemala +502</option><option value="44">Guernsey +44</option><option value="224">Guinea +224</option><option value="245">Guinea-Bissau +245</option><option value="592">Guyana +592</option><option value="509">Haiti +509</option><option value="504">Honduras +504</option><option value="852">Hong Kong +852</option><option value="36">Hungary +36</option><option value="354">Iceland +354</option><option value="91">India +91</option><option value="62">Indonesia +62</option><option value="98">Iran +98</option><option value="964">Iraq +964</option><option value="353">Ireland +353</option><option value="44">Isle of Man +44</option><option value="972">Israel +972</option><option value="39">Italy +39</option><option value="1876">Jamaica +1876</option><option value="81">Japan +81</option><option value="44">Jersey +44</option><option value="962">Jordan +962</option><option value="77">Kazakhstan +77</option><option value="254">Kenya +254</option><option value="686">Kiribati +686</option><option value="965">Kuwait +965</option><option value="996">Kyrgyzstan +996</option><option value="856">Laos +856</option><option value="371">Latvia +371</option><option value="961">Lebanon +961</option><option value="266">Lesotho +266</option><option value="231">Liberia +231</option><option value="218">Libya +218</option><option value="423">Liechtenstein +423</option><option value="370">Lithuania +370</option><option value="352">Luxembourg +352</option><option value="389">Macedonia +389</option><option value="261">Madagascar +261</option><option value="265">Malawi +265</option><option value="60">Malaysia +60</option><option value="960">Maldives +960</option><option value="223">Mali +223</option><option value="356">Malta +356</option><option value="692">Marshall Islands +692</option><option value="596">Martinique +596</option><option value="222">Mauritania +222</option><option value="230">Mauritius +230</option><option value="262">Mayotte +262</option><option value="52">Mexico +52</option><option value="373">Moldova +373</option><option value="377">Monaco +377</option><option value="976">Mongolia +976</option><option value="382">Montenegro +382</option><option value="1664">Montserrat +1664</option><option value="212">Morocco +212</option><option value="258">Mozambique +258</option><option value="95">Myanmar +95</option><option value="264">Namibia +264</option><option value="674">Nauru +674</option><option value="977">Nepal +977</option><option value="31">Netherlands +31</option><option value="599">Netherlands Antilles +599</option><option value="687">New Caledonia +687</option><option value="64">New Zealand +64</option><option value="505">Nicaragua +505</option><option value="227">Niger +227</option><option value="234">Nigeria +234</option><option value="683">Niue +683</option><option value="672">Norfolk Island +672</option><option value="850">North Korea +850</option><option value="1670">Northern Mariana Islands +1670</option><option value="47">Norway +47</option><option value="968">Oman +968</option><option value="92">Pakistan +92</option><option value="680">Palau +680</option><option value="507">Panama +507</option><option value="675">Papua New Guinea +675</option><option value="595">Paraguay +595</option><option value="51">Peru +51</option><option value="63">Philippines +63</option><option value="64">Pitcairn Islands +64</option><option value="48">Poland +48</option><option value="351">Portugal +351</option><option value="1787">Puerto Rico +1787</option><option value="974">Qatar +974</option><option value="262">Reunion +262</option><option value="40">Romania +40</option><option value="7">Russia +7</option><option value="250">Rwanda +250</option><option value="590">Saint Barthelemy +590</option><option value="290">Saint Helena +290</option><option value="1869">Saint Kitts and Nevis +1869</option><option value="1758">Saint Lucia +1758</option><option value="590">Saint Martin +590</option><option value="508">Saint Pierre and Miquelon +508</option><option value="685">Samoa +685</option><option value="378">San Marino +378</option><option value="239">Sao Tome and Principe +239</option><option value="966">Saudi Arabia +966</option><option value="221">Senegal +221</option><option value="381">Serbia +381</option><option value="248">Seychelles +248</option><option value="232">Sierra Leone +232</option><option value="65">Singapore +65</option><option value="421">Slovakia +421</option><option value="386">Slovenia +386</option><option value="677">Solomon Islands +677</option><option value="252">Somalia +252</option><option value="27">South Africa +27</option><option value="82">South Korea +82</option><option value="211">South Sudan +211</option><option value="34">Spain +34</option><option value="94">Sri Lanka +94</option><option value="1784">St Vincent and the Grenadines +1784</option><option value="249">Sudan +249</option><option value="597">Suriname +597</option><option value="47">Svalbard +47</option><option value="268">Swaziland +268</option><option value="46">Sweden +46</option><option value="41">Switzerland +41</option><option value="963">Syria +963</option><option value="886">Taiwan +886</option><option value="992">Tajikistan +992</option><option value="255">Tanzania +255</option><option value="66">Thailand +66</option><option value="228">Togo +228</option><option value="690">Tokelau Islands +690</option><option value="676">Tonga +676</option><option value="1868">Trinidad and Tobago +1868</option><option value="216">Tunisia +216</option><option value="90">Turkey +90</option><option value="993">Turkmenistan +993</option><option value="1649">Turks and Caicos Islands +1649</option><option value="688">Tuvalu +688</option><option value="1340">U.S. Virgin Islands +1340</option><option value="256">Uganda +256</option><option value="380">Ukraine +380</option><option value="971">United Arab Emirates +971</option><option value="44" selected="">United Kingdom +44</option><option value="1">United States +1</option><option value="598">Uruguay +598</option><option value="998">Uzbekistan +998</option><option value="678">Vanuatu +678</option><option value="39">Vatican City +39</option><option value="58">Venezuela +58</option><option value="84">Vietnam +84</option><option value="681">Wallis and Futuna +681</option><option value="212">Western Sahara +212</option><option value="967">Yemen +967</option><option value="260">Zambia +260</option><option value="263">Zimbabwe +263</option></select><div class="select__surrogate js-prefix-label">+44</div></div><div class="input field--tel-national js-input-field-container has-value is-invalid" data-field-type="phone"><input type="tel" class="input__field js-input-field" placeholder="Enter phone number" value="1234"></div></div><div class="control__error js-error-label js-input-field-error-msg show-error" data-field-type="phone">Please enter a valid cell phone number.</div></div><div class="form__buttons"><button class="button button--primary js-submit js-touchable" disabled="true"><span class="button__text">Verify number</span></button></div><div class="hint">We\'ll use this info for verification purposes only. We won\'t share it with anyone.</div></div></div></div></div><h3 class="styleguide-subtitle" name="sms-verification">sms verification</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="forms-used_sms-verification"><div class="styleguide-cell w320 nopadding"><kbd>standard</kbd><div class="page"><div class="form-uniform js-form"><p class="form__intro">Please enter the PIN code you receive:</p><div class="control control--digits"><div class="control__inputs control__inputs--row"><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="0"></div><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="1"></div><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="2"></div><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="3"></div></div><div class="control__error js-input-field-error-msg" data-field-type="digits"></div></div><div class="form__buttons"><button class="button button--primary js-submit js-touchable" disabled=""><span class="button__text">Confirm</span></button></div><div class="hint hint--link" data-action="reset"><a>Haven\'t received your PIN code?</a></div><div class="hint hint--link" data-action="reset"><a>Check your phone number and try again.</a></div></div></div></div><div class="styleguide-cell w320 nopadding"><kbd>:focus</kbd><div class="page"><div class="form-uniform js-form"><p class="form__intro">Please enter the PIN code you receive:</p><div class="control control--digits"><div class="control__inputs control__inputs--row"><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit is-focused js-input-field" data-index="0"></div><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit is-focused js-input-field" data-index="1"></div><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit is-focused js-input-field" data-index="2"></div><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit is-focused js-input-field" data-index="3"></div></div><div class="control__error js-input-field-error-msg" data-field-type="digits"></div></div><div class="form__buttons"><button class="button button--primary js-submit js-touchable" disabled=""><span class="button__text">Confirm</span></button></div><div class="hint hint--link" data-action="reset"><a>Haven\'t received your PIN code?</a></div><div class="hint hint--link" data-action="reset"><a>Check your phone number and try again.</a></div></div></div></div><div class="styleguide-cell w320 nopadding"><kbd>not empty</kbd><div class="page"><div class="form-uniform js-form"><p class="form__intro">Please enter the PIN code you receive:</p><div class="control control--digits"><div class="control__inputs control__inputs--row"><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="0" value="1"></div><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="1" value="2"></div><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="2" value="3"></div><div class="input js-input-field-container" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="3" value="4"></div></div><div class="control__error js-input-field-error-msg" data-field-type="digits"></div></div><div class="form__buttons"><button class="button button--primary js-submit js-touchable" disabled=""><span class="button__text">Confirm</span></button></div><div class="hint hint--link" data-action="reset"><a>Haven\'t received your PIN code?</a></div><div class="hint hint--link" data-action="reset"><a>Check your phone number and try again.</a></div></div></div></div><div class="styleguide-cell w320 nopadding"><kbd>is-invalid</kbd><div class="page"><div class="form-uniform js-form"><p class="form__intro">Please enter the PIN code you receive:</p><div class="control control--digits"><div class="control__inputs control__inputs--row"><div class="input js-input-field-container has-value is-invalid" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="0" value="1"></div><div class="input js-input-field-container has-value is-invalid" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="1" value="2"></div><div class="input js-input-field-container has-value is-invalid" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="2" value="3"></div><div class="input js-input-field-container has-value is-invalid" data-field-type="digits"><input type="tel" class="input__field input__field--digit js-input-field" data-index="3" value="4"></div></div><div class="control__error js-input-field-error-msg show-error" data-field-type="digits">Incorrect pin code</div></div><div class="form__buttons"><button class="button button--primary js-submit js-touchable" disabled="true"><span class="button__text">Confirm</span></button></div><div class="hint hint--link" data-action="reset"><a>Haven\'t received your PIN code?</a></div><div class="hint hint--link" data-action="reset"><a>Check your phone number and try again.</a></div></div></div></div></div><h3 class="styleguide-subtitle" name="captcha">captcha</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="forms-used_captcha"><div class="styleguide-cell w320 nopadding"><kbd>standard</kbd><div class="page captcha"><div class="form-uniform js-form"><p class="form__title">Security check</p><div class="control control--captcha control--centered"><div class="control__extra"><div class="captcha"><div class="captcha__image js-captcha-image" style="background-image: url(https://placehold.it/173x46/f4f4f4/999999);"></div><div class="captcha__reload js-captcha-reload">').h("Icon",t,{},{
name:"generic-spinning-arrows",size:"md"},"h").w('</div></div></div><div class="control__error">Wrong captcha</div><div class="control__inputs"><div class="input input--captcha js-input-field-container"><input type="text" id="captcha" name="captcha"class="input__field js-input-field js-captcha-input ').x(t.get(["field_focus"],!1),t,{block:i},{}).w('" maxlength="8" autocomplete="off"autocapitalize="none" autocorrect="off" spellcheck="false"><label for="captcha" class="control__label">Copy the code</label></div></div></div><div class="form__buttons"><button class="button button--primary button--narrow js-captcha-action js-touchable" disabled="true"><span class="button__text">Continue</span></button></div></div></div></div><div class="styleguide-cell w320 nopadding"><kbd>:focus</kbd><div class="page captcha"><div class="form-uniform js-form"><p class="form__title">Security check</p><div class="control control--captcha control--centered"><div class="control__extra"><div class="captcha"><div class="captcha__image js-captcha-image" style="background-image: url(https://placehold.it/173x46/f4f4f4/999999);"></div><div class="captcha__reload js-captcha-reload">').h("Icon",t,{},{name:"generic-spinning-arrows",size:"md"},"h").w('</div></div></div><div class="control__error">Wrong captcha</div><div class="control__inputs"><div class="input input--captcha js-input-field-container"><input type="text" id="captcha" name="captcha"class="input__field js-input-field js-captcha-input is-focused" maxlength="8" autocomplete="off"autocapitalize="none" autocorrect="off" spellcheck="false"><label for="captcha" class="control__label">Copy the code</label></div></div></div><div class="form__buttons"><button class="button button--primary button--narrow js-captcha-action js-touchable" disabled="true"><span class="button__text">Continue</span></button></div></div></div></div><div class="styleguide-cell w320 nopadding"><kbd>not empty</kbd><div class="page captcha"><div class="form-uniform js-form"><p class="form__title">Security check</p><div class="control control--captcha control--centered"><div class="control__extra"><div class="captcha"><div class="captcha__image js-captcha-image" style="background-image: url(https://placehold.it/173x46/f4f4f4/999999);"></div><div class="captcha__reload js-captcha-reload">').h("Icon",t,{},{name:"generic-spinning-arrows",size:"md"},"h").w('</div></div></div><div class="control__error">Wrong captcha</div><div class="control__inputs"><div class="input input--captcha js-input-field-container has-value"><input type="text" id="captcha" name="captcha" value="abcd"class="input__field js-input-field js-captcha-input" maxlength="8" autocomplete="off"autocapitalize="none" autocorrect="off" spellcheck="false"><label for="captcha" class="control__label">Copy the code</label></div></div></div><div class="form__buttons"><button class="button button--primary button--narrow js-captcha-action js-touchable"><span class="button__text">Continue</span></button></div></div></div></div><div class="styleguide-cell w320 nopadding"><kbd>is-invalid</kbd><div class="page captcha"><div class="form-uniform js-form"><p class="form__title">Security check</p><div class="control control--captcha control--centered"><div class="control__extra"><div class="captcha"><div class="captcha__image js-captcha-image" style="background-image: url(https://placehold.it/173x46/f4f4f4/999999);"></div><div class="captcha__reload js-captcha-reload">').h("Icon",t,{},{name:"generic-spinning-arrows",size:"md"},"h").w('</div></div></div><div class="control__error show-error">Wrong captcha</div><div class="control__inputs"><div class="input input--captcha js-input-field-container is-invalid"><input type="text" id="captcha" name="captcha"class="input__field js-input-field js-captcha-input" maxlength="8" autocomplete="off"autocapitalize="none" autocorrect="off" spellcheck="false"><label for="captcha" class="control__label">Copy the code</label></div></div></div><div class="form__buttons"><button class="button button--primary button--narrow js-captcha-action js-touchable" disabled="true"><span class="button__text">Continue</span></button></div></div></div></div></div></section>')}function i(e,t){return e.w(" is-focused ")}return e.register("dust-styleguide/styleguide-partials/forms",t),t.__dustBody=!0,i.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="control"><div class="control__inputs"><div class="input ').f(t.get(["field_status"],!1),t,"h").w(" ").x(t.get(["field_value"],!1),t,{block:i},{}).w('"><input class="input__field ').x(t.get(["field_focus"],!1),t,{block:n},{}).w('" type="text" placeholder="This is the native placeholder" value="').f(t.get(["field_value"],!1),t,"h").w('" ').x(t.get(["disabled"],!1),t,{block:a},{}).w(' /></div></div><div class="control__error ').x(t.get(["show_error"],!1),t,{block:o},{}).w('">').x(t.get(["error_message"],!1),t,{else:s,block:r},{}).w("</div></div>")}function i(e,t){return e.w(" has-value ")}function n(e,t){return e.w(" is-focused ")}function a(e,t){return e.w(" disabled ")}function o(e,t){return e.w(" show-error ")}function s(e,t){return e.w("This is the error message")}function r(e,t){return e.f(t.get(["error_message"],!1),t,"h")}return e.register("dust-styleguide/styleguide-partials/includes/forms/control--input-minimal",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="control control--tel "><div class="control__inputs control__inputs--row">').x(t.get(["countries"],!1),t,{block:i},{}).w('<div class="input field--tel-national ').f(t.get(["field_status"],!1),t,"h").w('"><input type="tel" class="input__field ').x(t.get(["field_focus"],!1),t,{block:n},{}).w('" placeholder="Enter phone number" value="').f(t.get(["field_value"],!1),t,"h").w('" /></div></div><div class="control__error ').x(t.get(["show_error"],!1),t,{block:a},{}).w('">Wrong phone number</div></div>')}function i(e,t){return e.w('<div class="select field--tel-country-code"><select class="select__field"><option value="93">Afghanistan +93</option><option value="1441">Bermuda +1441</option><option value="222">Mauritania +222</option><option value="44" selected="">United Kingdom +44</option><option value="1">United States +1</option><option value="263">Zimbabwe +263</option></select><div class="select__surrogate">+44</div></div>')}function n(e,t){return e.w(" is-focused ")}function a(e,t){return e.w(" show-error ")}return e.register("dust-styleguide/styleguide-partials/includes/forms/control--tel",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="control control--digits "><div class="control__inputs control__inputs--row"><div class="input"><div class="input__field input__field--border-hidden">+1</div></div><div class="input"><div class="input__field input__field--border-hidden">734471</div></div><div class="input ').f(t.get(["field_status"],!1),t,"h").w('"><input class="input__field input__field--digit ').x(t.get(["field_focus"],!1),t,{block:i},{}).w(" ").x(t.get(["field1_value"],!1),t,{block:n},{}).w('" type="tel" value="').f(t.get(["field1_value"],!1),t,"h").w('"></div><div class="input ').f(t.get(["field_status"],!1),t,"h").w('"><input class="input__field input__field--digit ').x(t.get(["field_focus"],!1),t,{block:a},{}).w(" ").x(t.get(["field2_value"],!1),t,{block:o},{}).w('" type="tel" value="').f(t.get(["field2_value"],!1),t,"h").w('"></div><div class="input ').f(t.get(["field_status"],!1),t,"h").w('"><input class="input__field input__field--digit ').x(t.get(["field_focus"],!1),t,{block:s},{}).w(" ").x(t.get(["field3_value"],!1),t,{block:r},{}).w('" type="tel" value="').f(t.get(["field3_value"],!1),t,"h").w('"></div><div class="input ').f(t.get(["field_status"],!1),t,"h").w('"><input class="input__field input__field--digit ').x(t.get(["field_focus"],!1),t,{block:l},{}).w(" ").x(t.get(["field4_value"],!1),t,{block:c},{}).w('" type="tel" value="').f(t.get(["field4_value"],!1),t,"h").w('"></div></div><div class="control__error ').x(t.get(["show_error"],!1),t,{block:u},{}).w('">This is the control error message</div></div>')}function i(e,t){return e.w(" is-focused ")}function n(e,t){return e.w(" has-value ")}function a(e,t){return e.w(" is-focused ")}function o(e,t){return e.w(" has-value ")}function s(e,t){return e.w(" is-focused ")}function r(e,t){return e.w(" has-value ")}function l(e,t){return e.w(" is-focused ")}function c(e,t){return e.w(" has-value ")}function u(e,t){return e.w(" show-error ")}return e.register("dust-styleguide/styleguide-partials/includes/forms/control--digits",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="control control--date"><div class="control__inputs control__inputs--row"><div class="input input--multifield ').f(t.get(["field_status"],!1),t,"h").w('"><input class="input__field input__field--single ').x(t.get(["field_focus"],!1),t,{block:i},{}).w(" ").x(t.get(["field_d1_value"],!1),t,{block:n},{}).w('" type="tel" placeholder="D" value="').f(t.get(["field_d1_value"],!1),t,"h").w('"><input class="input__field input__field--single ').x(t.get(["field_focus"],!1),t,{block:a},{}).w(" ").x(t.get(["field_d2_value"],!1),t,{block:o},{}).w('" type="tel" placeholder="D" value="').f(t.get(["field_d2_value"],!1),t,"h").w('"><label class="fixed__label">Day</label></div><div class="input input--multifield ').f(t.get(["field_status"],!1),t,"h").w('"><input class="input__field input__field--single ').x(t.get(["field_focus"],!1),t,{block:s},{}).w(" ").x(t.get(["field_m1_value"],!1),t,{block:r},{}).w('" type="tel" placeholder="M" value="').f(t.get(["field_m1_value"],!1),t,"h").w('"><input class="input__field input__field--single ').x(t.get(["field_focus"],!1),t,{block:l},{}).w(" ").x(t.get(["field_m2_value"],!1),t,{block:c},{}).w('" type="tel" placeholder="M" value="').f(t.get(["field_m2_value"],!1),t,"h").w('"><label class="fixed__label">Month</label></div><div class="input input--multifield ').f(t.get(["field_status"],!1),t,"h").w('"><input class="input__field input__field--single ').x(t.get(["field_focus"],!1),t,{block:u},{}).w(" ").x(t.get(["field_y1_value"],!1),t,{block:d},{}).w('" type="tel" placeholder="Y" value="').f(t.get(["field_y1_value"],!1),t,"h").w('"><input class="input__field input__field--single ').x(t.get(["field_focus"],!1),t,{block:h},{}).w(" ").x(t.get(["field_y2_value"],!1),t,{block:p},{}).w('" type="tel" placeholder="Y" value="').f(t.get(["field_y2_value"],!1),t,"h").w('"><input class="input__field input__field--single ').x(t.get(["field_focus"],!1),t,{block:m},{}).w(" ").x(t.get(["field_y3_value"],!1),t,{block:g},{}).w('" type="tel" placeholder="Y" value="').f(t.get(["field_y3_value"],!1),t,"h").w('"><input class="input__field input__field--single ').x(t.get(["field_focus"],!1),t,{block:_},{}).w(" ").x(t.get(["field_y4_value"],!1),t,{block:f},{}).w('" type="tel" placeholder="Y" value="').f(t.get(["field_y4_value"],!1),t,"h").w('"><label class="fixed__label">Year</label></div></div><div class="control__error ').x(t.get(["show_error"],!1),t,{block:v},{}).w('">This is the control error message</div></div>')}function i(e,t){return e.w(" is-focused ")}function n(e,t){return e.w(" has-value ")}function a(e,t){return e.w(" is-focused ")}function o(e,t){return e.w(" has-value ")}function s(e,t){return e.w(" is-focused ")}function r(e,t){return e.w(" has-value ")}function l(e,t){return e.w(" is-focused ")}function c(e,t){return e.w(" has-value ")}function u(e,t){return e.w(" is-focused ")}function d(e,t){return e.w(" has-value ")}function h(e,t){return e.w(" is-focused ")}function p(e,t){return e.w(" has-value ")}function m(e,t){return e.w(" is-focused ")}function g(e,t){return e.w(" has-value ")}function _(e,t){return e.w(" is-focused ")}function f(e,t){return e.w(" has-value ")}function v(e,t){return e.w(" show-error ")}return e.register("dust-styleguide/styleguide-partials/includes/forms/control--date",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,_.__dustBody=!0,f.__dustBody=!0,v.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="control control--location"><div class="control__error ').x(t.get(["show_error"],!1),t,{block:i},{}).w('">').x(t.get(["error_message"],!1),t,{else:n,block:a},{}).w('</div><div class="control__inputs"><div class="input ').f(t.get(["field_status"],!1),t,"h").w(" ").x(t.get(["field_value"],!1),t,{block:o},{}).w(" ").x(t.get(["field_loading"],!1),t,{block:s},{}).w('"><div class="input__icon"><div class="input__icon-pointer">').h("Icon",t,{},{name:"elements-input-location",size:"sm"},"h").w('</div><div class="input__icon-cancel">').h("Icon",t,{},{name:"elements-input-clear",size:"sm"},"h").w('</div><div class="input__icon-loader">').h("Icon",t,{},{name:"loading-dots",size:"md"},"h").w('</div></div><input class="input__field ').x(t.get(["field_focus"],!1),t,{block:r},{}).w('" type="text" value="').f(t.get(["field_value"],!1),t,"h").w('" /><label class="control__label">This is the label</label></div></div>').x(t.get(["show_suggestions"],!1),t,{block:l},{}).w("</div>")}function i(e,t){return e.w(" show-error ")}function n(e,t){return e.w("This is the error message")}function a(e,t){return e.f(t.get(["error_message"],!1),t,"h")}function o(e,t){return e.w(" has-value ")}function s(e,t){return e.w(" is-loading ")}function r(e,t){return e.w(" is-focused ")}function l(e,t){return e.w('<ul class="control__extra"><li data-id="130889" id="city-option-0">Manchester, North West, United Kingdom</li><li data-id="130958" id="city-option-1">Mansfield, East Midlands, United Kingdom</li><li data-id="1765877" id="city-option-2">Manchester Airport, North West, United Kingdom</li><li data-id="130284" id="city-option-3">Manningtree, East of England, United Kingdom</li><li data-id="1857483" id="city-option-4">Mangotsfield, South West, United Kingdom</li></ul>')}return e.register("dust-styleguide/styleguide-partials/includes/forms/control--location",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="control control--captcha control--centered"><div class="control__extra"><div class="captcha"><div class="captcha__image js-captcha-image"></div><div class="captcha__reload js-captcha-reload">').h("Icon",t,{},{name:"generic-spinning-arrows",size:"md"},"h").w('</div></div></div><div class="control__error ').x(t.get(["show_error"],!1),t,{block:i},{}).w('">This is the error label/message</div><div class="control__inputs"><div class="input input--captcha ').f(t.get(["field_status"],!1),t,"h").w(" ").x(t.get(["field_value"],!1),t,{block:n},{}).w(' js-input-field-container"><input type="text" id="captcha" name="captcha" value="').f(t.get(["field_value"],!1),t,"h").w('"class="input__field js-input-field js-captcha-input ').x(t.get(["field_focus"],!1),t,{block:a},{}).w('" maxlength="8" autocomplete="off"autocapitalize="none" autocorrect="off" spellcheck="false"><label for="captcha" class="control__label">Copy the code</label></div></div></div>')}function i(e,t){return e.w(" show-error ")}function n(e,t){return e.w(" has-value ")}function a(e,t){return e.w(" is-focused ")}return e.register("dust-styleguide/styleguide-partials/includes/forms/control--captcha",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(645),i(646),i(647),function(e){function t(e,t){return e.w('<p class="form__intro">Lorem ipsum dolor sit amet, consectetur adipisicing aliquam numquam.</p>').p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{}).p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_extracss:"input__field--secure",field_status:"is-value",field_value:"abcdef"}).p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_status:"is-invalid",show_error:"true",error_message:"This is a pretty long error message that should appear on multiple lines",field_value:"Lorem ipsum"}).w('<div class="control-row">').p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{}).p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_status:"is-value",field_value:"abcdef"}).w('</div><div class="control-row">').p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_status:"is-invalid",show_error:"true",error_message:"This is a pretty long error message that should appear on multiple lines",field_value:"Lorem ipsum"}).p("dust-styleguide/styleguide-partials/includes/forms/control--input-standard",t,t,{field_status:"is-invalid",show_error:"true",field_value:"abcdef"}).w("</div>").p("dust-styleguide/styleguide-partials/includes/forms/control--select",t,t,{}).p("dust-styleguide/styleguide-partials/includes/forms/control--textarea",t,t,{field_label:"This is the label",field_value:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolorum eaque a dolores voluptates quam, consequatur autem. Asperiores repellat harum illo, laudantium provident iste nostrum."}).w('<div class="form__buttons"><div class="button-wrapper"><div class="button-wrapper__item">').h("Button",t,{},{type:"primary",text:"Submit"},"h").w('</div></div></div><div class="hint">Lorem ipsum dolor sit amet, consectetur adipisicing quia modi <a href="#">quibusdam repellat deserunt</a> iste.</div>')}return e.register("dust-styleguide/styleguide-partials/includes/forms/form-sample",t),t.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(270),function(e){function t(e,t){return e.w('<section class="styleguide-section styleguide-section-infinite-scroll-spinner"><h2 class="styleguide-title">Infinite Scroll Spinner</h2><h3 class="styleguide-subtitle" name="infinite-scroll-spinner">base</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="infinite-scroll-spinner"><kbd>small / dark</kbd><div class="styleguide-cell w320 nopadding outlined"><div class="infinite-scroll-spinner">').p("loading-dots",t,t,{size:"small",color:"dark"}).w("</div></div></div></section>")}return e.register("dust-styleguide/styleguide-partials/infinite-scroll-spinner",t),t.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(546),function(e){function t(e,t){return e.w('<section class="styleguide-section styleguide-section-input-slider"><h2 class="styleguide-title">Input Slider</h2><h3 class="styleguide-subtitle" name="input-slider">base</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="input-slider"><div class="styleguide-cell w200 outlined"><kbd>0%</kbd>').p("input-slider",t,t,{percent:"0"}).w('</div><div class="styleguide-cell w200 outlined"><kbd>25%</kbd>').p("input-slider",t,t,{percent:"25"}).w('</div><div class="styleguide-cell w200 outlined"><kbd>50%</kbd>').p("input-slider",t,t,{percent:"50"}).w('</div><div class="styleguide-cell w200 outlined"><kbd>100%</kbd>').p("input-slider",t,t,{percent:"100"}).w("</div></div></section>")}return e.register("dust-styleguide/styleguide-partials/input-slider",t),t.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<section class="styleguide-section"><h2 class="styleguide-title">Interests</h2><h3 class="styleguide-subtitle" name="interests">interests</h3><div class="styleguide-group" data-qa-visual="interests"><kbd>interest</kbd><div class="styleguide-cell w480 nopadding"><div class="interests"><div class="interest"><span class="interest__label">Food</span></div><div class="interest"><span class="interest__label">Other</span></div><div class="interest"><span class="interest__label">Music</span></div><div class="interest"><span class="interest__label">Movies</span></div></div></div></div><div class="styleguide-group" data-qa-visual="interests-matched"><kbd>interest/matched</kbd><div class="styleguide-cell w480 nopadding"><div class="interests"><div class="interest interest--matched"><span class="interest__label">Food</span></div><div class="interest interest--matched"><span class="interest__label">Other</span></div><div class="interest interest--matched"><span class="interest__label">Music</span></div><div class="interest interest--matched"><span class="interest__label">Movies</span></div></div></div></div><div class="styleguide-group" data-qa-visual="interests-additional"><kbd>interest/additional + more</kbd><div class="styleguide-cell nopadding"><div class="interests"><div class="interest"><span class="interest__label">Japanese</span></div><!----><div class="interest"><span class="interest__label">Coding</span></div><!----><div class="interest interest--additional"><span class="interest__label">Video game</span></div><!----><div class="interest interest--more">').h("Icon",t,{},{name:"generic-ellipsis",size:"md"},"h").w('</div></div></div></div><div class="styleguide-group" data-qa-visual="interests-expanded"><kbd>interest.expanded/additional + more</kbd><div class="styleguide-cell nopadding"><div class="interests is-expanded"><div class="interest"><span class="interest__label">Japanese</span></div><!----><div class="interest"><span class="interest__label">Coding</span></div><!----><div class="interest interest--additional"><span class="interest__label">Video game</span></div><!----><div class="interest interest--more">').h("Icon",t,{},{name:"generic-ellipsis",size:"sm"},"h").w("</div></div></div></div></section>")}return e.register("dust-styleguide/styleguide-partials/interests",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(3733),function(e){function t(e,t){return e.w('<section class="styleguide-section"><h2 class="styleguide-title">Pagination Bar</h2><h3 class="styleguide-subtitle" name="pagination-bar">base</h3><div class="styleguide-group" data-qa-visual="pagination-bar">').s(t.getPath(!1,["mocks","pagination-bar"]),t,{block:i},{}).w("</div></section>")}function i(e,t){return e.w("<kbd>").f(t.get(["styleguideTitle"],!1),t,"h").w('</kbd><div class="styleguide-cell w320 outlined">').p("dust-styleguide/styleguide-partials/includes/pagination-bar",t,t,{}).w("</div>")}return e.register("dust-styleguide/styleguide-partials/pagination-bar",t),t.__dustBody=!0,i.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="pagination-bar"><div class="pagination-bar__prev ').x(t.get(["isPrevDisabled"],!1),t,{block:i},{}).w('"><div class="pagination-bar__icon pagination-bar__icon-normal">').h("Icon",t,{},{name:"floating-action-prev",supportsRtl:"true"},"h").w('</div></div><div class="pagination-bar__content">').f(t.get(["count_current"],!1),t,"h").w("/").f(t.get(["count_total"],!1),t,"h").w('</div><div class="pagination-bar__next ').x(t.get(["isNextDisabled"],!1),t,{block:n},{}).w(" ").x(t.get(["isNextReady"],!1),t,{block:a},{}).w('"><div class="pagination-bar__icon pagination-bar__icon-normal">').h("Icon",t,{},{name:"floating-action-next",supportsRtl:"true"},"h").w('</div><div class="pagination-bar__icon pagination-bar__icon-ready">').h("Icon",t,{},{name:"floating-action-ok"},"h").w("</div></div></div>")}function i(e,t){return e.w(" is-disabled ")}function n(e,t){return e.w(" is-disabled ")}function a(e,t){return e.w(" is-ready ")}return e.register("dust-styleguide/styleguide-partials/includes/pagination-bar",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(627),i(624),i(626),i(625),function(e){function t(e,t){return e.w('<section class="styleguide-section styleguide-section-payments" data-qa-visual="payment-carousel"><h2 class="styleguide-title">Payments</h2><h3 class="styleguide-subtitle" name="contextual-carousel">contextual carousel</h3><div class="styleguide-group styleguide-group--spaced">').s(t.getPath(!1,["mocks","payment-carousel"]),t,{block:i},{}).w('</div></section><section class="styleguide-section styleguide-section-payments" data-qa-visual="payment-methods-of-payment"><h3 class="styleguide-subtitle" name="methods-of-payment">methods of payment</h3><div class="styleguide-group styleguide-group--spaced">').s(t.getPath(!1,["mocks","methods-of-payment"]),t,{block:n},{}).w('</div></section><section class="styleguide-section styleguide-section-payments"><h3 class="styleguide-subtitle" name="payment-packages-items">payment packages</h3>').s(t.getPath(!1,["mocks","payment-packages-items"]),t,{block:a},{}).w('</section><section class="styleguide-section styleguide-section-payments" data-qa-visual="payment-bottom-part"><h3 class="styleguide-subtitle" name="bottom-part">bottom part</h3>').s(t.getPath(!1,["mocks","payment-bottom"]),t,{block:o},{}).w("</section>")}function i(e,t){return e.w('<div class="styleguide-cell"><kbd>').f(t.get(["styleguideTitle"],!1),t,"h").w('</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="page visible">').p("contextual-carousel",t,t,{}).w("</div></div></div>")}function n(e,t){return e.w('<div class="styleguide-cell w320 nopadding">').p("payments/methods-of-payment",t,t,{}).w('</div><div class="styleguide-clearfix"></div>')}function a(e,t){return e.w('<div class="styleguide-group" data-qa-visual="').f(t.get(["qaVisualId"],!1),t,"h").w('"><kbd>').f(t.get(["styleguideTitle"],!1),t,"h").w('</kbd><div class="styleguide-cell w360 outlined nopadding">').p("payments/payment-packages",t,t,{}).w("</div></div>")}function o(e,t){return e.w('<div class="styleguide-group"><div class="styleguide-cell w640 nopadding"><kbd>').f(t.get(["styleguideTitle"],!1),t,"h").w("</kbd>").p("payments/payment-bottom-part",t,t,{}).w("</div></div>")}return e.register("dust-styleguide/styleguide-partials/payments",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<section class="styleguide-section"><h2 class="styleguide-title">Photo Grid</h2><h3 class="styleguide-subtitle" name="photo-grid-liquid">photo grid liquid</h3><div class="styleguide-group" data-qa-visual="photo-grid-liquid"><div class="styleguide-cell"><kbd>grid with checkbox</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="photo-grid-liquid">').s(t.getPath(!1,["mocks","photo-grid-liquid"]),t,{block:i},{}).w('</div></div></div><div class="styleguide-cell"><kbd>grid with icon</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="photo-grid-liquid">').s(t.getPath(!1,["mocks","photo-grid-liquid"]),t,{block:n},{}).w('</div></div></div></div><div class="styleguide-group" data-qa-visual="photo-grid-liquid-cases"><div class="styleguide-cell"><kbd>grid of 3 with checkbox</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="photo-grid-liquid">').s(t.getPath(!1,["mocks","photo-grid-liquid-first3"]),t,{block:a},{}).w('</div></div></div><div class="styleguide-cell"><kbd>grid of 2 with checkbox</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="photo-grid-liquid">').s(t.getPath(!1,["mocks","photo-grid-liquid-first2"]),t,{block:o},{}).w('</div></div></div><div class="styleguide-cell"><kbd>grid of 1 with checkbox</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="photo-grid-liquid">').s(t.getPath(!1,["mocks","photo-grid-liquid-first1"]),t,{block:s},{}).w('</div></div></div></div><h3 class="styleguide-subtitle" name="photo-grid-liquid-centered">photo grid liquid centered</h3><div class="styleguide-group" data-qa-visual="photo-grid-liquid-centered"><div class="styleguide-cell"><kbd>grid centered with checkbox</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="photo-grid-liquid photo-grid-liquid--centered">').s(t.getPath(!1,["mocks","photo-grid-liquid"]),t,{block:r},{}).w('</div></div></div><div class="styleguide-cell"><kbd>grid centered with icon</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="photo-grid-liquid photo-grid-liquid--centered">').s(t.getPath(!1,["mocks","photo-grid-liquid"]),t,{block:l},{}).w('</div></div></div></div><div class="styleguide-group" data-qa-visual="photo-grid-liquid-centered-cases"><div class="styleguide-cell"><kbd>grid centered of 3 with checkbox</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="photo-grid-liquid photo-grid-liquid--centered">').s(t.getPath(!1,["mocks","photo-grid-liquid-first3"]),t,{block:c},{}).w('</div></div></div><div class="styleguide-cell"><kbd>grid centered of 2 with checkbox</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="photo-grid-liquid photo-grid-liquid--centered">').s(t.getPath(!1,["mocks","photo-grid-liquid-first2"]),t,{block:u},{}).w('</div></div></div><div class="styleguide-cell"><kbd>grid centered of 1 with checkbox</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="photo-grid-liquid photo-grid-liquid--centered">').s(t.getPath(!1,["mocks","photo-grid-liquid-first1"]),t,{block:d},{}).w('</div></div></div></div><h3 class="styleguide-subtitle" name="photo-grid-liquid-centered">photo grid liquid spacious</h3><div class="styleguide-group" data-qa-visual="photo-grid-liquid-spacious"><div class="styleguide-cell"><kbd>grid spacious</kbd><div class="styleguide-frame styleguide-frame--iphone4"><div class="photo-grid-liquid photo-grid-liquid--spacious">').s(t.getPath(!1,["mocks","photo-grid-liquid-spacious"]),t,{block:h},{}).w("</div></div></div></div></section>")}function i(e,t){return e.w('<label class="photo-grid-liquid__item"><div class="photo-grid-liquid__item-image needsclick" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w('\')"></div><div class="photo-grid-liquid__item-icon"><label class="checkbox-singular"><input type="checkbox" name="" class="js-photo-item" data-photo-id="').f(t.get(["photoId"],!1),t,"h").w('" checked><div class="checkbox__inactive">').h("Icon",t,{},{name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w("</div></label></div></label>")}function n(e,t){return e.w('<div class="photo-grid-liquid__item"><div class="photo-grid-liquid__item-image" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w('\')"></div><div class="photo-grid-liquid__item-icon">').h("Icon",t,{},{name:"adaptor-facebook"},"h").w("</div></div>")}function a(e,t){return e.w('<label class="photo-grid-liquid__item"><div class="photo-grid-liquid__item-image needsclick" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w('\')"></div><div class="photo-grid-liquid__item-icon"><label class="checkbox-singular"><input type="checkbox" name="" class="js-photo-item" data-photo-id="').f(t.get(["photoId"],!1),t,"h").w('" checked><div class="checkbox__inactive">').h("Icon",t,{},{name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w("</div></label></div></label>")}function o(e,t){return e.w('<label class="photo-grid-liquid__item"><div class="photo-grid-liquid__item-image needsclick" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w('\')"></div><div class="photo-grid-liquid__item-icon"><label class="checkbox-singular"><input type="checkbox" name="" class="js-photo-item" data-photo-id="').f(t.get(["photoId"],!1),t,"h").w('" checked><div class="checkbox__inactive">').h("Icon",t,{},{
name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w("</div></label></div></label>")}function s(e,t){return e.w('<label class="photo-grid-liquid__item"><div class="photo-grid-liquid__item-image needsclick" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w('\')"></div><div class="photo-grid-liquid__item-icon"><label class="checkbox-singular"><input type="checkbox" name="" class="js-photo-item" data-photo-id="').f(t.get(["photoId"],!1),t,"h").w('" checked><div class="checkbox__inactive">').h("Icon",t,{},{name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w("</div></label></div></label>")}function r(e,t){return e.w('<label class="photo-grid-liquid__item"><div class="photo-grid-liquid__item-image needsclick" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w('\')"></div><div class="photo-grid-liquid__item-icon"><label class="checkbox-singular"><input type="checkbox" name="" class="js-photo-item" data-photo-id="').f(t.get(["photoId"],!1),t,"h").w('" checked><div class="checkbox__inactive">').h("Icon",t,{},{name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w("</div></label></div></label>")}function l(e,t){return e.w('<div class="photo-grid-liquid__item"><div class="photo-grid-liquid__item-image" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w('\')"></div><div class="photo-grid-liquid__item-icon">').h("Icon",t,{},{name:"adaptor-facebook"},"h").w("</div></div>")}function c(e,t){return e.w('<label class="photo-grid-liquid__item"><div class="photo-grid-liquid__item-image needsclick" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w('\')"></div><div class="photo-grid-liquid__item-icon"><label class="checkbox-singular"><input type="checkbox" name="" class="js-photo-item" data-photo-id="').f(t.get(["photoId"],!1),t,"h").w('" checked><div class="checkbox__inactive">').h("Icon",t,{},{name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w("</div></label></div></label>")}function u(e,t){return e.w('<label class="photo-grid-liquid__item"><div class="photo-grid-liquid__item-image needsclick" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w('\')"></div><div class="photo-grid-liquid__item-icon"><label class="checkbox-singular"><input type="checkbox" name="" class="js-photo-item" data-photo-id="').f(t.get(["photoId"],!1),t,"h").w('" checked><div class="checkbox__inactive">').h("Icon",t,{},{name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w("</div></label></div></label>")}function d(e,t){return e.w('<label class="photo-grid-liquid__item"><div class="photo-grid-liquid__item-image needsclick" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w('\')"></div><div class="photo-grid-liquid__item-icon"><label class="checkbox-singular"><input type="checkbox" name="" class="js-photo-item" data-photo-id="').f(t.get(["photoId"],!1),t,"h").w('" checked><div class="checkbox__inactive">').h("Icon",t,{},{name:"elements-input-checkbox"},"h").w('</div><div class="checkbox__active">').h("Icon",t,{},{name:"elements-input-checkbox-selected"},"h").w("</div></label></div></label>")}function h(e,t){return e.w('<div class="photo-grid-liquid__item"><div class="photo-grid-liquid__item-image" style="background-image: url(\'').f(t.get(["url"],!1),t,"h").w("')\"></div></div>")}return e.register("dust-styleguide/styleguide-partials/photo-grid",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,h.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(3737),function(e){function t(e,t){return e.w('<section class="styleguide-section styleguide-section-polls"><h2 class="styleguide-title">Polls</h2><h3 class="styleguide-subtitle" name="polls">base</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="polls-base">').s(t.getPath(!1,["mocks","polls-base"]),t,{block:i},{}).w('</div><div class="styleguide-group styleguide-group--spaced" data-qa-visual="polls-extra">').s(t.getPath(!1,["mocks","polls-extra"]),t,{block:n},{}).w("</div></section>")}function i(e,t){return e.w('<div class="styleguide-cell w320 outlined"><kbd>').f(t.get(["styleguideTitle"],!1),t,"h").w("</kbd>").p("dust-styleguide/styleguide-partials/includes/poll",t,t,{}).w("</div>")}function n(e,t){return e.w('<div class="styleguide-cell w320 outlined"><kbd>').f(t.get(["styleguideTitle"],!1),t,"h").w("</kbd>").p("dust-styleguide/styleguide-partials/includes/poll",t,t,{}).w("</div>")}return e.register("dust-styleguide/styleguide-partials/polls",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<ul class="poll poll--').f(t.get(["type"],!1),t,"h").w(" ").f(t.get(["group_name"],!1),t,"h").w('">').s(t.get(["items"],!1),t,{block:i},{}).w("</ul>")}function i(e,t){return e.w('<li class="poll__item"><div class="poll__option"><input class="poll__input" type="').f(t.get(["type"],!1),t,"h").w('" name="').f(t.get(["group_name"],!1),t,"h").w('" value="" ').x(t.get(["field_checked"],!1),t,{block:n},{}).w(' /><div class="poll__icon"></div><label class="poll__label">').f(t.get(["field_label"],!1),t,"h").w("</label></div>").x(t.get(["extra_text"],!1),t,{block:a},{}).w("</li>")}function n(e,t){return e.w(" checked ")}function a(e,t){return e.w('<a class="poll__extra" href="#"><span class="styleguide-fake-button">').f(t.get(["extra_text"],!1),t,"h").w("</span></a>")}return e.register("dust-styleguide/styleguide-partials/includes/poll",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(3739),function(e){function t(e,t){return e.w('<section class="styleguide-section styleguide-section-progress-bar"><h2 class="styleguide-title">Progress Bar</h2><h3 class="styleguide-subtitle" name="progress-bar">progress bar</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="progress-bar"><div class="styleguide-cell w200 outlined"><kbd>empty</kbd>').p("progress-bar",t,t,{}).w('</div><div class="styleguide-cell w200 outlined"><kbd>0%</kbd>').p("progress-bar",t,t,{percentage:"0"}).w('</div><div class="styleguide-cell w200 outlined"><kbd>1%</kbd>').p("progress-bar",t,t,{percentage:"1"}).w('</div><div class="styleguide-cell w200 outlined"><kbd>50%</kbd>').p("progress-bar",t,t,{percentage:"50"}).w('</div><div class="styleguide-cell w200 outlined"><kbd>100%</kbd>').p("progress-bar",t,t,{percentage:"100"}).w('</div></div><div class="styleguide-group styleguide-group--spaced" data-qa-visual="progress-bar-thin"><div class="styleguide-cell w200 outlined"><kbd>empty</kbd>').p("progress-bar",t,t,{tiny:"true"}).w('</div><div class="styleguide-cell w200 outlined"><kbd>0%</kbd>').p("progress-bar",t,t,{tiny:"true",percentage:"0"}).w('</div><div class="styleguide-cell w200 outlined"><kbd>1%</kbd>').p("progress-bar",t,t,{tiny:"true",percentage:"1"}).w('</div><div class="styleguide-cell w200 outlined"><kbd>50%</kbd>').p("progress-bar",t,t,{tiny:"true",percentage:"50"}).w('</div><div class="styleguide-cell w200 outlined"><kbd>100%</kbd>').p("progress-bar",t,t,{tiny:"true",percentage:"100"}).w('</div></div><div class="styleguide-group styleguide-group--spaced styleguide-progress-bar-inherited" data-qa-visual="progress-bar-inherited"><div class="styleguide-cell w200 outlined"><kbd>inherited</kbd>').p("progress-bar",t,t,{tiny:"true",inherited:"true",percentage:"50"}).w("</div></div></section>")}return e.register("dust-styleguide/styleguide-partials/progress-bar",t),t.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="progress-bar ').x(t.get(["tiny"],!1),t,{block:i},{}).w(" ").x(t.get(["inherited"],!1),t,{block:n},{}).w('"><div class="progress-bar__fill" style="min-width: ').x(t.get(["percentage"],!1),t,{else:a,block:o},{}).w('%">').x(t.get(["percentage"],!1),t,{block:s},{}).w("</div></div>")}function i(e,t){return e.w(" progress-bar--tiny ")}function n(e,t){return e.w(" progress-bar--inherited ")}function a(e,t){return e.w("0")}function o(e,t){return e.f(t.get(["percentage"],!1),t,"h")}function s(e,t){return e.f(t.get(["percentage"],!1),t,"h").w("%")}return e.register("progress-bar",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<section class="styleguide-section styleguide-section-ribbon"><h2 class="styleguide-title">Ribbon</h2><h3 class="styleguide-subtitle" name="base">base</h3><div class="styleguide-group" data-qa-visual="ribbon"><div class="styleguide-cell"><kbd>ribbon/red</kbd><div class="ribbon ribbon--red">Save 25%</div></div></div></section>')}return e.register("dust-styleguide/styleguide-partials/ribbon",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n;e.exports=i(119)((n=i(118),i(3742),function(e){function t(e,t){return e.w('<section class="styleguide-section"><h2 class="styleguide-title">Selector</h2><h3 class="styleguide-subtitle" name="text">text</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="selector-text"><div class="styleguide-cell w320 outlined"><kbd>label (short text)</kbd>').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum"}).w('</div><div class="styleguide-cell w320 outlined"><kbd>label (short text) + icon</kbd>').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum",iconChevronRigh:t.get(["true"],!1)}).w('</div><div class="styleguide-cell w320 outlined"><kbd>label (short text / secondary) + icon</kbd>').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum",isSecondary:t.get(["true"],!1),iconChevronRigh:t.get(["true"],!1)}).w('</div><div class="styleguide-clearfix"></div><div class="styleguide-cell w320 outlined"><kbd>label (long text)</kbd>').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum dolor sit amet, consectetur adipisicing elit."}).w('</div><div class="styleguide-cell w320 outlined"><kbd>label (long text) + icon</kbd>').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",iconChevronRigh:t.get(["true"],!1)}).w('</div><div class="styleguide-cell w320 outlined"><kbd>label (long text / secondary) + icon</kbd>').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",isSecondary:t.get(["true"],!1),iconChevronRigh:t.get(["true"],!1)}).w('</div><div class="styleguide-clearfix"></div><div class="styleguide-cell w320 outlined"><kbd>label + extra (truncated)</kbd>').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum dolor sit",textExtra:"Amet consectetur adipisicing elit"}).w('</div><div class="styleguide-cell w320 outlined"><kbd>label + extra (truncated) + icon</kbd>').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum dolor sit",textExtra:"Amet consectetur adipisicing elit",iconChevronRigh:t.get(["true"],!1)}).w('</div><div class="styleguide-cell w320 outlined"><kbd>label (long text) + extra (truncated) + icon</kbd>').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",textExtra:"Amet consectetur adipisicing elit",iconChevronRigh:t.get(["true"],!1)}).w('</div></div><h3 class="styleguide-subtitle" name="icons">icons</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="selector-icons"><div class="styleguide-cell w320 outlined"><kbd>chevron right</kbd>').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum",iconChevronRigh:t.get(["true"],!1)}).w('</div><div class="styleguide-cell w320 outlined"><kbd>accordion (closed/opened)</kbd>').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum",iconAccordion:t.get(["true"],!1)}).p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum",iconAccordion:t.get(["true"],!1),iconAccordionIsOpened:t.get(["true"],!1)}).w('</div></div><h3 class="styleguide-subtitle" name="multiple-items">multiple items</h3><div class="styleguide-group styleguide-group--spaced" data-qa-visual="selector-multiples"><div class="styleguide-cell w320 outlined">').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum",iconChevronRigh:t.get(["true"],!1)}).p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Dolor sine qua",iconChevronRigh:t.get(["true"],!1)}).p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Non est recusanda",iconChevronRigh:t.get(["true"],!1)}).w('</div><div class="styleguide-cell w320 outlined">').p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum",textExtra:"Amet consectetur adipisicing elit",iconChevronRigh:t.get(["true"],!1)}).p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Dolor sine qua",textExtra:"Amet consectetur adipisicing elit",iconChevronRigh:t.get(["true"],!1)}).p("dust-styleguide/styleguide-partials/includes/selector",t,t,{textLabel:"Lorem ipsum dolor sit",textExtra:"Amet consectetur adipisicing elit",iconChevronRigh:t.get(["true"],!1)}).w("</div></div></section>")}return e.register("dust-styleguide/styleguide-partials/selector",t),t.__dustBody=!0,t}(n)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<div class="selector">').x(t.get(["textExtra"],!1),t,{else:i,block:a},{}).x(t.get(["iconChevronRigh"],!1),t,{block:r},{}).x(t.get(["iconAccordion"],!1),t,{block:l},{}).w("</div>")}function i(e,t){return e.w('<div class="selector__label ').x(t.get(["isSecondary"],!1),t,{block:n},{}).w('">').f(t.get(["textLabel"],!1),t,"h").w("</div>")}function n(e,t){return e.w(" selector__label--secondary ")}function a(e,t){return e.w('<div class="selector__label"><div class="truncated-text">').x(t.get(["textLabel"],!1),t,{block:o},{}).x(t.get(["textExtra"],!1),t,{block:s},{}).w("</div></div>")}function o(e,t){return e.w('<div class="truncated-text__full">').f(t.get(["textLabel"],!1),t,"h").w("</div>")}function s(e,t){return e.w('<div class="truncated-text__trim selector__label--secondary">').f(t.get(["textExtra"],!1),t,"h").w("</div>")}function r(e,t){return e.w('<div class="selector__icon selector__icon--chevron-righ">').h("Icon",t,{},{name:"generic-chevron-right",size:"sm",supportsRtl:"true"},"h").w("</div>")}function l(e,t){return e.w('<div class="selector__icon selector__icon--accordion ').x(t.get(["iconAccordionIsOpened"],!1),t,{block:c},{}).w('">').h("Icon",t,{},{name:"generic-plus",size:"sm"},"h").w("</div>")}function c(e,t){return e.w("is-opened")}return e.register("dust-styleguide/styleguide-partials/includes/selector",t),t.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,a.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";e.exports=i(119)(function(e){function t(e,t){return e.w('<section class="styleguide-section"><h2 class="styleguide-title">Switcher</h2><h3 class="styleguide-subtitle" name="switcher">switcher</h3><div class="styleguide-group" data-qa-visual="switcher"><div class="styleguide-cell"><kbd>switcher</kbd><div class="switcher"><input type="checkbox" /><label class="needsclick"></label></div></div><div class="styleguide-cell"><kbd>switcher/checked</kbd><div class="switcher"><input type="checkbox" checked /><label class="needsclick"></label></div></div></div></section>')}return e.register("dust-styleguide/styleguide-partials/switcher",t),t.__dustBody=!0,t}(i(118)))},function(e,t,i){"use strict";var n=i(98),a=i(159),o=i(3745),s=a.extend({headerTemplate:null,screenName:6,onStart:function(){s._super.onStart.apply(this,arguments),this.reactViewId_=this.renderReactView(n.createElement(o,null),this.parent[0])},onStop:function(){s._super.onStop.apply(this,arguments),this.removeReactView(this.reactViewId_)}},"LikedYouPage");e.exports=s},function(e,t,i){"use strict";function n(e,t){S.track(O,{element:e,position:t})}var a=i(3),o=a(i(144)),s=a(i(4)),r=a(i(107)),l=a(i(127)),c=a(i(110)),u=a(i(112)),d=a(i(114)),h=a(i(115)),p=a(i(123)),m=a(i(116)),g=i(98),_=i(100),f=i(103),v=i(99),E=i(113),b=i(140),y=i(175),k=i(165),S=i(102),w=i(171),C=i(547),T=i(169),P=i(149),N=i(632),I=i(3746),x=i(3749),A=i(101),O=A.ClickEvent,V=A.ScrollScreenEvent,R=A.ViewBannerEvent,B=A.ClickBannerEvent,L=N.FILTERS,F=void 0===L?[]:L,M=function(e){function t(e){var i;return(0,c.default)(this,t),(i=(0,d.default)(this,(0,h.default)(t).call(this,e))).state={users:[],promo:{header:"",message:"",ctaText:""},offset:0,lastUsersCount:null},i.isFetching=!1,i.filterNameToFolderIdMap=null,i.onBack=i.onBack.bind((0,p.default)(i)),i.onScroll=_.throttle(i.onScroll.bind((0,p.default)(i)),250),i.onNavigationEvent=i.onNavigationEvent.bind((0,p.default)(i)),i.onVoted=i.onVoted.bind((0,p.default)(i)),i}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!1),f.navigationEvent.subscribe(this.onNavigationEvent),this.hasSpp=E.getUser().getHasSpp(),this.hasSpp||S.track(R,{banner_id:8,position_id:4,context:3});var e=C.get(),t=e.users,i=e.promo,n=e.scrollTop;t.length?(this.restore(t,i,n),C.clear()):this.fetch()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onScroll,!1),f.navigationEvent.unsubscribe(this.onNavigationEvent)}},{key:"restore",value:function(e,t,i){this.setState({users:e,promo:t},function(){setTimeout(function(){w().scrollTop=i})})}},{key:"getFilterNameToFolderIdMap_",value:function(){return this.filterNameToFolderIdMap||(this.filterNameToFolderIdMap=F.reduce(function(e,t){var i=t||{},n=i.param,a=void 0===n?"":n,o=i.model,s=(void 0===o?{}:o).folderId,c=void 0===s?"":s;return a&&c?(0,l.default)({},e,(0,r.default)({},a,c)):e},{})),this.filterNameToFolderIdMap}},{key:"isChosenFilterAllowed_",value:function(e){var t=e.getFiltersConfig&&e.getFiltersConfig(),i=(t&&t.getFilters([])||[]).map(function(e){return e.getFolder()||null}),n=this.getFilterNameToFolderIdMap_().fans;return Boolean(n&&i[n])}},{key:"fetch",value:function(){var e=this,t={folderId:b.TYPES.WANT_TO_MEET_YOU,clientSource:3,offset:this.state.offset};b.getInstance().fetch(t,!0,!0).then(function(t){var i=(0,s.default)(t,1)[0];if(e.isChosenFilterAllowed_(i)){var n=i.getPromoBanners([])[0];if(0===i.getTotalCount(0)&&n)f.navigate("get-more-likes",!0,{promoBlock:n.toJSON()});else{n&&e.setState({promo:{header:n.getHeader(),message:n.getMssg(),ctaText:n.getButtons()[0]&&n.getButtons()[0].getText()}});var a=i.getSection([])[0];if(a){var o=e.state.users.map(function(e){return e.user_id}),r=a.getUsers([]).filter(function(e){return!o.includes(e.getUserId())}).map(function(e){var t=e.toJSON();return t.profile_photo&&(t.profile_photo.preview_url=T.getImageUrlForSize(t.profile_photo.preview_url,150)),t.isVotedYes=!1,t.isVotedNo=!1,t});r[0]&&(e.hasSpp=!Boolean(r[0].age&&r[0].profile_blocker_promo)),e.setState({users:e.state.users.concat(r),lastUsersCount:r.length},function(){e.isFetching=!1})}}}else f.navigate("connections",!0)})}},{key:"onBack",value:function(){n(52),f.back()}},{key:"onScroll",value:function(){if(w().scrollHeight-window.innerHeight-w().scrollTop<400){var e=this.state.offset;this.state.users.length>=e&&0!==this.state.lastUsersCount&&(e=this.state.users.length-1,this.isFetching||(this.isFetching=!0,this.setState({offset:e}),this.fetch()))}var t;t=2*Math.ceil(w().scrollTop+window.innerHeight/220)-1,S.track(V,{direction:5,position:t})}},{key:"onCTAClick",value:function(){S.track(B,{banner_id:8,position_id:4,context:3,call_to_action_type:1}),this.navigateToPaywall(8)}},{key:"onProfileClick",value:function(e,t){n(21,t),f.navigate("profile",{id:e.user_id})}},{key:"onVoted",value:function(){this.state.users.every(function(e){return e.isVotedNo||e.isVotedYes})&&this.fetch()}},{key:"onNavigationEvent",value:function(e){"profile"===e.routeName||"pay-overlay"===e.routeName||"mutual-attraction"===e.routeName?C.set({users:this.state.users,promo:this.state.promo,scrollTop:w().scrollTop}):C.clear()}},{key:"navigateToPaywall",value:function(e){P.generate(),k.navigateToPayment({back:"liked-you",productType:1,promoBlockType:7,hotPanelData:{activationPlace:211,isOneClickPayment:!1,bannerId:e},callback:function(e){e.success&&y.getInstance().invalidate()}})}},{key:"render",value:function(){var e=this;return g.createElement(x,{title:v.get(798),caption:v.get(799),users:this.state.users.map(function(t,i){return g.createElement(I,(0,o.default)({},t,{key:t.user_id,spp:e.hasSpp,onProfileClick:function(){return e.onProfileClick(t,i)},onNonSPPClick:function(){return e.navigateToPaywall()},onVotedYes:function(){e.setState(function(e){return e.users[i].isVotedYes=!0,e},e.onVoted)},onVotedNo:function(){e.setState(function(e){return e.users[i].isVotedNo=!0,e},e.onVoted)}}))}),isLocked:!this.hasSpp,promo:{header:this.state.promo.header,message:this.state.promo.message,buttons:[{type:"primary",text:this.state.promo.ctaText,action:function(){return e.onCTAClick()}}]},onBack:this.onBack})}}]),t}(g.Component);e.exports=M},function(e,t,i){"use strict";function n(){v.showNotification({type:v.TYPES.ERROR})}var a=i(3),o=a(i(110)),s=a(i(112)),r=a(i(114)),l=a(i(115)),c=a(i(123)),u=a(i(116)),d=i(98),h=i(25),p=i(113),m=i(139),g=i(102),_=i(212),f=i(175),v=i(124),E=i(243),b=i(316),y=i(3747),k=i(105).User,S=i(101),w=S.VoteProfileEvent,C=S.ClickEvent,T=function(e){function t(e){var i;return(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).state={offsetX:0,offsetY:0,isDragging:!1,isDragVertical:!1,isDragHorizontal:!1},i.cardRef=d.createRef(),i.onTouchStart=i.onTouchStart.bind((0,c.default)(i)),i.onTouchMove=i.onTouchMove.bind((0,c.default)(i)),i.onTouchEnd=i.onTouchEnd.bind((0,c.default)(i)),i.onVoteYes=i.onVote.bind((0,c.default)(i),619),i.onVoteNo=i.onVote.bind((0,c.default)(i),618),i.onProfileClick=i.onProfileClick.bind((0,c.default)(i)),i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.cardRef.current&&(this.cardRef.current.addEventListener("touchstart",this.onTouchStart),this.cardRef.current.addEventListener("touchmove",this.onTouchMove),this.cardRef.current.addEventListener("touchend",this.onTouchEnd))}},{key:"componentWillUnmount",value:function(){this.cardRef.current&&(this.cardRef.current.removeEventListener("touchstart",this.onTouchStart),this.cardRef.current.removeEventListener("touchmove",this.onTouchMove),this.cardRef.current.removeEventListener("touchend",this.onTouchEnd))}},{key:"render",value:function(){var e=this.props,t=e.name,i=e.age,n=e.online_status,a=e.profile_photo,o=e.spp,s=e.isVotedYes,r=e.isVotedNo,l=1===n?"online":2===n?"idle":null,c=this.state.offsetX/window.innerWidth,u=Math.min(45,Math.max(-45,70*c)),h=Math.min(3*Math.abs(c),1);return d.createElement(y,{avatar:{photo:{src:a&&a.preview_url}},info:o?{name:t,age:i,status:l}:void 0,cardRef:this.cardRef,styles:{card:{zIndex:this.state.isDragHorizontal?2:1,transform:"translate3d(".concat(.8*this.state.offsetX,"px, ").concat(.5*this.state.offsetY,"px, 0px) rotate(").concat(u,"deg)")},overlayBackground:{opacity:"".concat(2*Math.abs(c)/.3)},overlayIcon:{transform:"scale(".concat(s||r?1:h,")")}},voteYes:this.state.offsetX>0||s,voteNo:this.state.offsetX<0||r,isDragging:this.state.isDragging,isVoted:s||r,onClick:this.onProfileClick,onVoteYes:this.onVoteYes,onVoteNo:this.onVoteNo})}},{key:"onTouchStart",value:function(e){if(m.isTouchEventTrusted(e)){var t=h.os.supportsTouch?e.touches[0]:e;this.startX=t.clientX,this.startY=t.clientY}}},{key:"onTouchMove",value:function(e){if(m.isTouchEventTrusted(e)&&!(h.os.supportsTouch&&e.touches.length>1||this.state.isDragVertical)){var t=h.os.supportsTouch?e.touches[0]:e,i=t.clientX-this.startX,n=t.clientY-this.startY,a=Math.max(Math.abs(i),Math.abs(n))>7;this.state.isDragVertical||this.state.isDragHorizontal||!a||(Math.abs(i)<Math.abs(n)?this.setState({isDragVertical:!0}):this.setState({isDragHorizontal:!0})),this.state.isDragHorizontal&&(this.setState({offsetX:i,offsetY:n,isDragging:a}),e.preventDefault(),e.stopPropagation())}}},{key:"onTouchEnd",value:function(e){if(m.isTouchEventTrusted(e)){var t=this.state.isDragging,i=Math.abs(this.state.offsetX)>.3*window.innerWidth,n=i&&this.state.offsetX>0,a=i&&this.state.offsetX<0;this.setState({offsetY:0,isDragVertical:!1,isDragging:!1}),this.startX=this.startY=0,n?this.swipeRight(8):a?this.swipeLeft(8):this.setState({offsetX:0}),t&&(e.preventDefault(),e.stopPropagation())}}},{key:"swipeLeft",value:function(e){var t=this;this.setState({offsetX:-window.innerWidth}),setTimeout(function(){t.props.onVotedNo(),t.setState({offsetX:0,isDragHorizontal:!1})},200),this.onVoted(3,e)}},{key:"swipeRight",value:function(e){var t=this;this.setState({offsetX:window.innerWidth}),setTimeout(function(){t.props.onVotedYes(),t.setState({offsetX:0,isDragHorizontal:!1})},200),this.onVoted(2,e)}},{key:"onVote",value:function(e,t){var i;m.isTouchEventTrusted(t)?(618===e?this.swipeLeft(3):this.swipeRight(3),i=e,g.track(C,{element:i}),t.stopPropagation()):t.stopPropagation()}},{key:"onProfileClick",value:function(){this.props.spp?this.props.onProfileClick():this.props.onNonSPPClick()}},{key:"onVoted",value:function(e,t){var i=this,a=this.props,o=a.user_id,s=a.profile_photo;this.props.spp?(f.getInstance().set({id:o,photoId:s?s.id:"",source:3,voteType:e}).then(function(e){if(2!==p.getUser().getGender())return 3===e.getVoteResponseType()&&b.showMatchScreen({singleProfileData:new E({activationPlace:211,clientSource:3,protoUser:new k(i.props)}),theirPicture:s&&s.preview_url,message:e.getMessage(),isCrush:e.getIsCrushMatch(),withChat:e.getAllowChatFromMatchScreen(),chatSettings:e.getChatSettings()}),_.fetch()}).catch(n),function(e,t,i){g.track(w,{encrypted_user_id:e,vote_result:t,activation_place:211,mode:6,gesture:i,connection_status:4})}(o,e,t)):this.props.onNonSPPClick()}}]),t}(d.Component);e.exports=T},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(499),s=i(230),r=i(3748),l=i(106),c=i(120).P1,u={avatar:a.shape({disguise:a.string,photo:a.object,gender:a.string}),info:a.shape({name:a.string,age:a.oneOfType([a.string,a.number]),status:a.string}),cardRef:a.object,styles:a.object,voteYes:a.bool,voteNo:a.bool,isDragging:a.bool,isVoted:a.bool,onClick:a.func,onVoteYes:a.func,onVoteNo:a.func},d=function(e){var t=e.avatar,i=e.info,a=e.cardRef,u=e.styles,d=e.voteYes,h=e.voteNo,p=e.isDragging,m=e.isVoted,g=e.onClick,_=e.onVoteYes,f=e.onVoteNo;return n.createElement("div",{className:"want-to-meet-you-user"},m?null:n.createElement("div",{className:"want-to-meet-you-user__card",style:u.card,ref:a},n.createElement(o,{user:t,bottom:i?n.createElement(c,{color:"white"},n.createElement(s,{name:i.name,age:i.age,status:{online:i.status}})):null,actions:[{key:1,icon:"generic-action-no",color:"gray",onClick:f},{key:2,icon:"generic-action-yes",color:"liked-you",onClick:_}],shadow:!0,onClick:g}),p||m?n.createElement("div",{className:"want-to-meet-you-user__overlay"},n.createElement("div",{className:"want-to-meet-you-user__overlay-background",style:u.overlayBackground}),n.createElement("div",{style:u.overlayIcon},d?n.createElement(r,{type:"yes"}):null,h?n.createElement(r,{type:"no"}):null)):null),p||d||h?n.createElement("div",{className:"want-to-meet-you-user__placeholder"},d?n.createElement(l,{name:"generic-action-yes",size:"xlg"}):null,h?n.createElement(l,{name:"generic-action-no",size:"xlg"}):null):null)};d.propTypes=u,d.defaultProps={styles:{card:{},overlayBackground:{},overlayIcon:{}}},e.exports=d},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(117),s=i(106),r={type:a.oneOf(["add-photos","chat","crush","edit-profile","match","next","no","no-inverted","ok","prev","smile","yes","yes-inverted"]).isRequired,isHidden:a.bool,isPressed:a.bool,onClick:a.func},l=function(e){var t=e.type,i=e.isHidden,a=e.isPressed,r=e.onClick,l=o({"csms-profile-action":!0,"csms-profile-action--next":"next"===t,"csms-profile-action--prev":"prev"===t,"is-hidden":i,"is-pressed":a});return n.createElement("div",{className:l,onClick:r,"data-qa-profile-action":t},n.createElement(s,{name:"floating-action-".concat(t)}))};l.propTypes=r,l.defaultProps={isHidden:!1,isPressed:!1},e.exports=l},function(e,t,i){"use strict";var n=i(98),a=i(104),o=i(427),s=i(133),r=i(130),l=i(138),c=i(170),u=i(181),d=i(182),h=i(198),p=i(223),m=i(143),g=i(160),_=i(151),f=i(172),v=i(152),E=i(154),b=i(145),y=i(120).P1,k={title:a.string,caption:a.string,users:a.array.isRequired,isLocked:a.bool,promo:a.shape({header:a.string,message:a.string,buttons:a.arrayOf(a.shape({type:a.string,text:a.string,action:a.func}))})},S=function(e){var t=e.title,i=e.caption,a=e.users,o=e.isLocked,k=e.promo,S=e.onBack,w=e.scrollToggle;return n.createElement(s,null,n.createElement(l,null,n.createElement(c,{position:"fixed",transparent:!w,shadow:w},n.createElement(d,null,n.createElement(u,{name:"navigation-bar-back",onClick:S})),!o&&a.length?n.createElement(p,{text:t}):null,n.createElement(h,null)),o?null:n.createElement(c,null)),o?n.createElement(r,null,n.createElement(b,{top:"xxlg",bottom:"lg"},n.createElement(m,null,k.header?n.createElement(f,null,n.createElement("svg",{viewBox:"0 0 240 240",width:120,height:120},n.createElement("path",{fill:"#F99DF0",d:"M120 98.53A50.77 50.77 0 0 0 72.7 69C44.4 69 20 93.12 20 122.87 20 180.93 74.96 228 120 228s100-47.07 100-105.13C220 93.12 195.6 69 167.3 69A50.77 50.77 0 0 0 120 98.53z"}),n.createElement("path",{fill:"#F99DF0",d:"M211 11.54A14.72 14.72 0 0 0 197.28 3C189.09 3 182 9.98 182 18.59 182 35.39 197.94 49 211 49s29-13.62 29-30.41C240 9.98 232.92 3 224.72 3A14.72 14.72 0 0 0 211 11.54z",opacity:".7"}),n.createElement("path",{fill:"#F99DF0",d:"M22 21.46A7.62 7.62 0 0 0 14.9 17 8.1 8.1 0 0 0 7 25.13C7 33.9 15.24 41 22 41s15-7.1 15-15.87A8.1 8.1 0 0 0 29.1 17a7.62 7.62 0 0 0-7.1 4.46z"}),n.createElement("path",{fill:"#F99DF0",d:"M78 42.97A5.08 5.08 0 0 0 73.27 40 5.4 5.4 0 0 0 68 45.42C68 51.26 73.5 56 78 56s10-4.74 10-10.58c0-3-2.44-5.42-5.27-5.42A5.08 5.08 0 0 0 78 42.97z",opacity:".9"}),n.createElement("path",{fill:"#F99DF0",d:"M12 157.41A4.07 4.07 0 0 0 8.22 155 4.36 4.36 0 0 0 4 159.4c0 4.75 4.4 8.6 8 8.6 3.6 0 8-3.85 8-8.6 0-2.43-1.95-4.4-4.22-4.4a4.07 4.07 0 0 0-3.78 2.41z",opacity:".2"}))):null,n.createElement(_,{text:k.header}),n.createElement(v,{text:k.message}),n.createElement(g,null,k.buttons.map(function(e){var t=!1;return 1===k.buttons.length&&(t=!0),e.text?n.createElement(E,{key:e.type,narrow:t,color:e.type,text:e.text,onClick:e.action}):null}))))):a.length?n.createElement(r,{hpadded:!0},n.createElement(b,{bottom:"sm"},n.createElement(y,{align:"center",color:"gray-dark"},i))):null,n.createElement(r,{hpadded:!0,vpadded:!0},n.createElement("div",{className:"want-to-meet-you-grid"},a&&a.map(function(e){return n.createElement("div",{key:e.key,className:"want-to-meet-you-grid__item"},e)}))))};S.propTypes=k,S.defaultProps={isLocked:!1},e.exports=o(S)},function(e,t,i){"use strict";var n=i(98),a=i(159),o=i(3751),s=a.extend({headerTemplate:null,screenName:91,onStart:function(){s._super.onStart.apply(this,arguments);var e=this.getParameter("timer"),t=this.getParameter("videoId");this.reactViewId_=this.renderReactView(n.createElement(o,{
timer:e,videoId:t}),this.parent[0])},onStop:function(){s._super.onStop.apply(this,arguments),this.removeReactView(this.reactViewId_)}},"ExternalPromoVideoPage");e.exports=s},function(e,t,i){"use strict";var n=i(294),a=i(3);t.__esModule=!0,t.default=void 0;var o=a(i(110)),s=a(i(112)),r=a(i(114)),l=a(i(115)),c=a(i(123)),u=a(i(116)),d=a(i(107)),h=n(i(98)),p=a(i(104)),m=n(i(103)),g=a(i(99)),_=a(i(213)),f=a(i(3752)),v=a(i(125)),E=i(412),b=a(i(3753)),y=a(i(291)),k=a(i(3754)),S=v.default.getLogger("ExternalPromoVideoContainer"),w=function(e){function t(e){var i;return(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).timeout=null,i.handleDeviceOrientationChange=i.handleDeviceOrientationChange.bind((0,c.default)(i)),i.getDeviceOrientation=i.getDeviceOrientation.bind((0,c.default)(i)),i.state={windowOrientation:i.getDeviceOrientation(),promotedVideo:null},i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.loadVideo();var e=this.props,t=e.timer,i=e.videoId,n=1e3*t;f.default.add(this.handleDeviceOrientationChange),this.timeout=setTimeout(function(){_.default.sendPromoBannerStats(i),y.default.removeTopMostPromo()},n)}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout),f.default.remove(this.handleDeviceOrientationChange)}},{key:"loadVideo",value:function(){var e=this,t=this.props.videoId;b.default.getInstance().loadVideo(t).then(function(t){e.setState({promotedVideo:t})}).catch(function(e){S.error("Failed to load promo video",{videoId:t,error:e})})}},{key:"handleBack",value:function(){m.back()}},{key:"handleDeviceOrientationChange",value:function(){var e=this.getDeviceOrientation();this.setState({windowOrientation:e})}},{key:"getSharingOptions",value:function(){var e=this.state.promotedVideo,t=e&&e.getSharingProviders&&e.getSharingProviders()||[];return(0,E.getPreparedSharingOptions)(t).map(function(e){var t=e||{},i=t.provider,n=void 0===i?"":i,a=t.displayName,o=void 0===a?"":a,s=t.networkType,r=t.sharingDescription;return{resource:n,title:o,networkType:s,sharingDescription:void 0===r?"":r}})}},{key:"getVideoData",value:function(){var e=this.state.promotedVideo;return{videoId:e&&e.getVideoSource&&e.getVideoSource()||""}}},{key:"getDeviceOrientation",value:function(){return window.matchMedia&&window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape"}},{key:"render",value:function(){var e=this.state.promotedVideo,t=!e,i=e&&e.getTitle&&e.getTitle()||"",n=e&&e.getText&&e.getText()||"",a="portrait"===this.state.windowOrientation;return h.createElement(k.default,{title:i,caption:n,ctaTitle:g.default.get(369),ctaCaption:g.default.get(370),video:this.getVideoData(),sharingOptions:this.getSharingOptions(),onBack:this.handleBack,showNavigation:a,showCaption:a,isInLandscapeMode:!a,isLoading:t})}}]),t}(h.PureComponent);(0,d.default)(w,"propTypes",{timer:p.default.number,videoId:p.default.string});var C=w;t.default=C,e.exports=t.default},function(e,t,i){"use strict";e.exports=function(){function e(){n||(n=!0,window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,66))}function t(){i.forEach(function(e){e()}),n=!1}var i=[],n=!1;return{add:function(t){i.length||window.addEventListener("resize",e),function(e){e&&i.push(e)}(t)},remove:function(t){i.length||window.removeEventListener("resize",e),function(e){e&&i.pop()}(t)}}}()},function(e,t,i){"use strict";var n,a=i(135),o=i(105).ServerGetPromotedVideo,s=a.extend({name:"Countries",getRequestMessageType:470,getResponseMessageType:[471],loadVideo:function(e){var t=(new o).setVideoId(e);return s._super.fetch.call(this,t).then(function(e){return Array.isArray(e)?e[0]:e})}},"PromoVideo");s.getInstance=function(){return n||(n=new s)},e.exports=s},function(e,t,i){"use strict";i(101);var n=i(98),a=i(104),o=i(133),s=i(138),r=i(130),l=i(170),c=i(181),u=i(182),d=i(198),h=i(223),p=i(143),m=i(151),g=i(172),_=i(152),f=i(145),v=i(335),E=i(560),b=i(3755),y=i(120).P1,k={title:a.string,caption:a.string,ctaTitle:a.string,ctaCaption:a.string,sharingOptions:E.propTypes.sharingOptions,video:a.shape(b.propTypes),sharingProviders:a.array,isLoading:a.bool,showNavigation:a.bool,showCaption:a.bool,isInLandscapeMode:a.bool},S=function(e){var t=e.onBack,i=e.title,a=e.caption,k=e.ctaTitle,S=e.ctaCaption,w=e.sharingOptions,C=e.video,T=e.isLoading,P=e.showNavigation,N=e.showCaption,I=e.isInLandscapeMode,x=(C||{}).videoId,A=void 0===x?"":x,O="https://www.youtube.com/watch?v=".concat(A),V=C?C.onStateChange:null,R=C?C.onPlayerReady:null,B=C?C.hasAutoPlay:null;return n.createElement(o,null,P?n.createElement(s,null,n.createElement(l,null,n.createElement(u,null,n.createElement(c,{name:"navigation-bar-back",onClick:t})),i?n.createElement(h,{text:i}):null,n.createElement(d,null))):null,T?n.createElement(v,null):n.createElement(n.Fragment,null,N?n.createElement(r,{hpadded:!0},n.createElement(f,{bottom:"lg"},n.createElement(y,{align:"center",color:"gray-dark"},a))):null,n.createElement(r,{align:"center"},n.createElement(p,{isCompact:!0},n.createElement(g,null,n.createElement(b,{videoId:A,onStateChange:V,onPlayerReady:R,hasAutoPlay:B,isInLandscapeMode:I})))),n.createElement(r,{align:"center"},n.createElement(f,{bottom:"xlg"},n.createElement(p,{isCompact:!0},n.createElement(m,{text:k}),n.createElement(_,{text:S}))),n.createElement(E,{sharingOptions:w,link:O,extraTrackingParams:{activationPlace:49,contentType:18}}))))};S.propTypes=k,S.defaultProps={showNavigation:!0,showCaption:!0},e.exports=S},function(e,t,i){"use strict";var n,a=i(3),o=a(i(110)),s=a(i(112)),r=a(i(114)),l=a(i(115)),c=a(i(123)),u=a(i(116)),d=i(98),h=i(104),p=i(411),m={"1:1":"100%","16:9":"56.25%","4:3":"75%","3:2":"66.66%","8:5":"62.5%"},g={videoId:h.string.isRequired,width:h.number,height:h.number,onStateChang:h.func,onPlayerReady:h.func,hasAutoPlay:h.bool,hasControls:h.bool,playsInline:h.bool,isInLandscapeMode:h.bool,aspectRatio:h.string},_=function(e){function t(e){var i;return(0,o.default)(this,t),(i=(0,r.default)(this,(0,l.default)(t).call(this,e))).videoRef=d.createRef(),i.initApi=i.initApi.bind((0,c.default)(i)),i.initPlayer=i.initPlayer.bind((0,c.default)(i)),i.onPlayerStateChange=i.onPlayerStateChange.bind((0,c.default)(i)),i.onPlayerError=i.onPlayerError.bind((0,c.default)(i)),i.onPlayerReady=i.onPlayerReady.bind((0,c.default)(i)),i.setPlayerOptions=i.setPlayerOptions.bind((0,c.default)(i)),i.setPlayer=i.setPlayer.bind((0,c.default)(i)),i.state={isLoading:!0},i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"setPlayer",value:function(){this.player=new window.YT.Player("youtube-player",this.playerOptions)}},{key:"setPlayerOptions",value:function(){var e=this.props,t=e.videoId,i=e.height,n=e.width;this.playerOptions={videoId:t,playerVars:{playsinline:1,rel:0},height:i||"100%",width:n||"100%",events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange,onError:this.onPlayerError}}}},{key:"onPlayerStateChange",value:function(e){var t=this.props.onStateChange;"function"==typeof t&&t(e)}},{key:"onPlayerError",value:function(e){console.log("error occured ",e)}},{key:"onPlayerReady",value:function(e){var t=this.props,i=t.onPlayerReady,n=t.hasAutoPlay;this.setState({isLoading:!1}),"function"==typeof i&&i(e),!0===n&&(e.target.mute(),e.target.playVideo())}},{key:"initApi",value:function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},{key:"initPlayer",value:function(){var e=this;this.setPlayerOptions(),n?window.YT&&this.setPlayer():(n=new Promise(function(t){e.initApi(),window.onYouTubeIframeAPIReady=function(){return t()}})).then(function(){return e.setPlayer()})}},{key:"componentDidMount",value:function(){this.videoRef.current&&this.initPlayer()}},{key:"componentWillUnmount",value:function(){this.player&&this.player.destroy()}},{key:"render",value:function(){var e=this.props,t=e.aspectRatio,i=e.isInLandscapeMode;return this.styles={wrapper:{position:"relative",paddingBottom:i?"100vh":m[t],width:"100%",backgroundColor:"#000000"},player:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},d.createElement("div",{ref:this.videoRef,style:this.styles.wrapper},d.createElement("div",{style:this.styles.player,id:"youtube-player"}),this.state.isLoading&&this.state.isVideoVisible?d.createElement(p,{color:"light",size:"large"}):null)}}]),t}(d.Component);_.propTypes=g,_.aspectRatioOptions=m,_.defaultProps={aspectRatio:"4:3",hasAutoPlay:!0,hasControls:!1,playsInline:!1},e.exports=_}])]);
